(window.driftWebpackJsonp=window.driftWebpackJsonp||[]).push([[9],{1508:function(e,t,n){"use strict";n.r(t),function(e){var r=n(11),a=n.n(r),i=n(24),s=n.n(i),o=n(47),c=n.n(o),l=n(154),u=n.n(l),p=n(144),d=n.n(p),f=n(197),h=n.n(f),m=n(196),v=n.n(m),g=n(195),T=n.n(g),b=n(15),y=n(56),C=n(248),w=n(10),_=n(1651),E=n(1730),S=n(1729),k=n(1597),P=n(76),M=n(60),N=n(5),O=n(7),A=n(50),I=n(20),R=n(37),x=n(31),j=n(1574),W=n(94),B=n(9),D=n(12),U=n(65),z=n(30),L=function(t){var n=t.attachmentCount,r=t.messagePreview,a=t.maxLength;if("string"==typeof r){var i=r.length>a?r.trim().slice(0,a)+"…":r.trim();if(i)return e.createElement("span",null,i)}return n>0?e.createElement(E.a,{count:n}):e.createElement("span",null,e.createElement("em",null,"No preview"))};L.propTypes={messagePreview:b.PropTypes.string,attachmentCount:b.PropTypes.number,maxLength:b.PropTypes.number},L.defaultProps={attachmentCount:0,maxLength:100};var H=function(t){function n(){var e,t,r,a,i=this;d()(this,n);for(var o=arguments.length,l=Array(o),p=0;p<o;p++)l[p]=arguments[p];return t=r=v()(this,(e=n.__proto__||u()(n)).call.apply(e,[this].concat(l))),r.getShowMessageSlider=c()(s.a.mark(function e(){var t,n,a,o,c,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.orgId,a=t.authorizationHeader,o=t.endUserId,c=t.actions,e.prev=1,e.next=4,Object(B.b)(D.e+"/cutover/organizations/"+n+"?namespace=WIDGET_MOBILE_SLIDER",{method:"GET",headers:a});case 4:l=e.sent,c.setShowMessageSlider({isMessageSliderTest:l.WIDGET_MOBILE_SLIDER,shouldShowMessageSlider:!l.WIDGET_MOBILE_SLIDER||o%2==0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),c.setShowMessageSlider({isMessageSliderTest:!1,shouldShowMessageSlider:!0}),console.warn("failed to fetch",e.t0);case 12:case"end":return e.stop()}},e,i,[[1,8]])})),r.handleClick=function(){var e=r.props,t=e.actions,n=e.view,a=e.botAvatarVersion,i=e.message;t.trackClick({ctaType:"content",view:n,botAvatarVersion:a}),t.markConversationAsRead(i.get("conversationId")),t.goToConversation(i.get("conversationId")),t.setHasInteracted({hasInteracted:!0})},r.handleDismissClick=function(){var e=r.props,t=e.actions,n=e.botAvatarVersion,a=e.view,i=e.driftUsersById,s=e.message,o=e.conversation;t.trackClick({ctaType:"dismiss",view:a,botAvatarVersion:n});var c=i[s.get("authorId")];t.setHasInteracted({hasInteracted:!0}),t.sliderMessageDismissed({botMessage:c&&!!c.bot,userInteractedWithConversation:"BULK_SENT"===!o.get("status")}),t.markConversationAsRead(s.get("conversationId"))},r.handleResize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.height,n=e.width;r.props.actions.iframeOverrideSize({height:t?t+"px":void 0,width:n?n+"px":void 0})},a=t,v()(r,a)}return T()(n,t),h()(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.actions,n=e.botAvatarVersion,r=e.view;t.trackImpression({view:r,botAvatarVersion:n})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.showMessageSlider,n=e.actions;void 0===t&&Object(U.b)()?this.getShowMessageSlider():n.setShowMessageSlider({isMessageSliderTest:!1,shouldShowMessageSlider:!0})}},{key:"render",value:function(){var t=this.props,n=t.message,r=t.avatarUrl,a=t.bot,i=t.name,s=t.showNewCallout,o=t.showMessageSlider,c=n.get("attachments").size,l=n.getIn(["attributes","preview"]);return e.createElement(_.a,{avatarUrl:r,bot:a,iconType:k.a.CHAT,onResize:this.handleResize,onWidgetClick:this.handleClick},o&&e.createElement(S.a,{onClick:this.handleClick,name:i,bot:a,onDismissClick:this.handleDismissClick,showNewCallout:s,showBranding:O.E},e.createElement(L,{attachmentCount:c,messagePreview:l})))}}]),n}(b.Component);H.propTypes={message:b.PropTypes.object.isRequired,avatarUrl:b.PropTypes.string,bot:b.PropTypes.bool,name:b.PropTypes.string.isRequired,conversation:b.PropTypes.object,driftUsersById:b.PropTypes.object,actions:b.PropTypes.shape({iframeOverrideSize:b.PropTypes.func.isRequired,goToConversation:b.PropTypes.func.isRequired,markConversationAsRead:b.PropTypes.func.isRequired,sliderMessageDismissed:b.PropTypes.func.isRequired})},t.default=Object(C.b)(function(e){var t=Object(A.h)(e),n=Object(O.x)(t.get("authorId"))(e),r=t.get("conversationId"),i=n&&n.bot;return a()({message:t,showBranding:Object(O.E)(e),avatarUrl:n&&n.avatarUrl,bot:n&&n.bot,name:Object(w.a)(n,"name",""),conversation:Object(R.c)(e,{conversationId:r}),driftUsersById:Object(O.y)(e),view:i?W.g.MESSAGE_CALLOUT_BOT:W.g.MESSAGE_CALLOUT_USER,botAvatarVersion:i?Object(N.d)(e):void 0,orgId:Object(O.v)(e),authorizationHeaders:Object(N.c)(e),endUserId:Object(N.i)(e).id,showMessageSlider:Object(z.p)(e)},"bot",i)},function(e){return{actions:Object(y.b)({iframeOverrideSize:P.iframeOverrideSize,goToConversation:M.f,markConversationAsRead:M.g,sliderMessageDismissed:I.O,trackImpression:x.d,trackClick:x.c,setShowMessageSlider:j.b,setHasInteracted:j.a},e)}})(H)}.call(this,n(15))},1524:function(e,t,n){"use strict";t.__esModule=!0;var r=i(n(1513)),a=i(n(1514));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return e};t.default=(0,r.default)(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;return function(r){var i=void 0,s=void 0;return function(o){return e(o)?(i=i||(0,a.default)(t(r)))(o):(s=s||(0,a.default)(n(r)))(o)}}},"branch")},1528:function(e,t,n){"use strict";t.__esModule=!0;var r=n(15),a=function(e){return e&&e.__esModule?e:{default:e}}(n(1513));var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return null},t}(r.Component);i.displayName="Nothing";t.default=(0,a.default)(function(e){return i},"renderNothing",!1,!0)},1574:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var r=n(2),a=n(419),i=Object(r.b)(a.a),s=Object(r.b)(a.b)},1596:function(e,t,n){e.exports=n.p+"static/images/4a3c1161b81f906ccb7e41df6b548811.svg"},1599:function(e,t,n){e.exports={Badge:"_23adWK3Uprf4Ktba9B88ed"}},1600:function(e,t,n){"use strict";(function(e){var r=n(15),a=n(416),i=n.n(a),s=n(1599),o=n.n(s),c=n(1524),l=n.n(c),u=n(1528),p=n.n(u),d=function(t){var n=t.count,r=t.max,a=t.className,s=t.theme,c=t.widgetButton,l=t.hasInteracted;return!c||s.unreadBadgeEnabled||l?e.createElement("div",{className:i()(o.a.Badge,a),"aria-label":(n>r?r:n)+" unread messages"},n>r?r+"+":n):null};d.propTypes={count:r.PropTypes.number.isRequired,max:r.PropTypes.number,className:r.PropTypes.string},d.defaultProps={max:99};var f=l()(function(e){return e.count<1},p.a);t.a=f(d)}).call(this,n(15))},1603:function(e,t,n){"use strict";(function(e){var r=n(4),a=n.n(r),i=n(154),s=n.n(i),o=n(144),c=n.n(o),l=n(197),u=n.n(l),p=n(196),d=n.n(p),f=n(195),h=n.n(f),m=n(15),v=n(508),g=n(1644),T=n.n(g),b=n(416),y=n.n(b),C=n(1640),w=n.n(C),_=function(t){function n(e){c()(this,n);var t=d()(this,(n.__proto__||s()(n)).call(this,e));return t.handleWheel=function(e){var n=void 0;try{n=Object(v.findDOMNode)(t)}catch(e){return void console.error(e)}if(n)return e.deltaY<0&&0===n.scrollTop?(e.preventDefault(),!1):e.deltaY>0&&n.clientHeight+n.scrollTop+e.deltaY>=n.scrollHeight?(e.preventDefault(),!1):void 0},t.handleWheel=T()(t.handleWheel,100),t}return h()(n,t),u()(n,[{key:"render",value:function(){return e.createElement("div",a()({},this.props,{className:y()(w.a.ScrollableContent,this.props.className)}),this.props.children)}}]),n}(m.Component);_.propTypes={className:m.PropTypes.string,children:m.PropTypes.node},t.a=_}).call(this,n(15))},1604:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h});var r=n(4),a=n.n(r),i=n(198),s=n.n(i),o=n(15),c=n(416),l=n.n(c),u=n(1596),p=n.n(u),d=n(1646),f=n.n(d);function h(t){var n=t.className,r=s()(t,["className"]);return e.createElement("button",a()({},r,{className:l()(f.a.DismissButton,n),title:"Dismiss","aria-label":"Dismiss"}),e.createElement("img",{className:f.a.DismissButtonIcon,src:p.a,alt:"×"}))}h.propTypes={className:o.PropTypes.string,onClick:o.PropTypes.func.isRequired}}).call(this,n(15))},1605:function(e,t,n){"use strict";(function(e){var r=n(4),a=n.n(r),i=n(11),s=n.n(i),o=n(198),c=n.n(o),l=n(15),u=n(416),p=n.n(u),d=n(1648),f=n.n(d),h=e.createElement("span",{className:f.a.CalloutTail});function m(t){var n,r=t.className,i=t.children,o=t.hasTail,l=t.onClick,u=c()(t,["className","children","hasTail","onClick"]);return e.createElement("div",a()({},u,{onClick:l,className:p()(f.a.Callout,(n={},s()(n,f.a.hasTail,o),s()(n,f.a.hasClickHandler,l),n),r)}),o&&h,e.createElement("div",{className:f.a.Content},i))}m.propTypes={onClick:l.PropTypes.func,className:l.PropTypes.string,children:l.PropTypes.node,hasTail:l.PropTypes.bool},m.defaultProps={hasTail:!0},t.a=m}).call(this,n(15))},1606:function(e,t,n){"use strict";var r=n(248),a=n(1600),i=n(50),s=n(16),o=n(30);t.a=Object(r.b)(function(e){return{count:Object(i.k)(e),theme:Object(s.t)(e),hasInteracted:Object(o.i)(e)}})(a.a)},1633:function(e,t,n){"use strict";var r=n(1605),a=n(1604),i=function(e){window&&(window.requestAnimationFrame&&window.requestAnimationFrame(e),window.setTimeout(e,0))},s=n(1603);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return a.a}),n.d(t,!1,function(){return i}),n.d(t,"c",function(){return s.a})},1637:function(e,t,n){e.exports={sliderTransitionEnter:"RleSeSSshUnxBU54Ju-Kg",sliderTransitionAppear:"yZ8m6oJqdYiWLMMseLe71",sliderTransitionLeave:"_2REwem2ttd38R0rWXhgPB3",sliderTransitionLeaveActive:"_2PYlwCQUwR96W4dGlZoidv",sliderTransitionEnterActive:"_1A1yWaMm_2RUCDFzylxa4q",sliderTransitionAppearActive:"_1HkBS3rdb0dAn10UW3DlfS"}},1638:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(4),a=n.n(r),i=n(15),s=n(1518),o=n.n(s),c=n(1637),l=n.n(c),u=function(t){return e.createElement(o.a,a()({},t,{transitionName:{enter:l.a.sliderTransitionEnter,enterActive:l.a.sliderTransitionEnterActive,appear:l.a.sliderTransitionAppear,appearActive:l.a.sliderTransitionAppearActive,leave:l.a.sliderTransitionLeave,leaveActive:l.a.sliderTransitionLeaveActive},transitionAppear:!0,transitionAppearTimeout:250,transitionEnterTimeout:250,transitionLeaveTimeout:200}))};u.propTypes={children:i.PropTypes.node}}).call(this,n(15))},1640:function(e,t,n){e.exports={ScrollableContent:"_3qJrcSln-TzTgp5jAZsvE-"}},1641:function(e,t,n){var r=n(510),a=n(417),i=NaN,s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return i;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=c.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):o.test(e)?i:+e}},1642:function(e,t,n){var r=n(418);e.exports=function(){return r.Date.now()}},1643:function(e,t,n){var r=n(510),a=n(1642),i=n(1641),s="Expected a function",o=Math.max,c=Math.min;e.exports=function(e,t,n){var l,u,p,d,f,h,m=0,v=!1,g=!1,T=!0;if("function"!=typeof e)throw new TypeError(s);function b(t){var n=l,r=u;return l=u=void 0,m=t,d=e.apply(r,n)}function y(e){var n=e-h;return void 0===h||n>=t||n<0||g&&e-m>=p}function C(){var e=a();if(y(e))return w(e);f=setTimeout(C,function(e){var n=t-(e-h);return g?c(n,p-(e-m)):n}(e))}function w(e){return f=void 0,T&&l?b(e):(l=u=void 0,d)}function _(){var e=a(),n=y(e);if(l=arguments,u=this,h=e,n){if(void 0===f)return function(e){return m=e,f=setTimeout(C,t),v?b(e):d}(h);if(g)return f=setTimeout(C,t),b(h)}return void 0===f&&(f=setTimeout(C,t)),d}return t=i(t)||0,r(n)&&(v=!!n.leading,p=(g="maxWait"in n)?o(i(n.maxWait)||0,t):p,T="trailing"in n?!!n.trailing:T),_.cancel=function(){void 0!==f&&clearTimeout(f),m=0,l=h=u=f=void 0},_.flush=function(){return void 0===f?d:w(a())},_}},1644:function(e,t,n){var r=n(1643),a=n(510),i="Expected a function";e.exports=function(e,t,n){var s=!0,o=!0;if("function"!=typeof e)throw new TypeError(i);return a(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),r(e,t,{leading:s,maxWait:t,trailing:o})}},1646:function(e,t,n){e.exports={DismissButton:"_1lVdwgQwG8iYSXC1rtIUn-",DismissButtonIcon:"_3sY_jwfgYHGUb3-n-s6cwm"}},1648:function(e,t,n){e.exports={CalloutTail:"_2IOZNDmRPpIkWq7_LHNMMH",Callout:"_2Am0IsT9lH_Ptdj-CW2uiy",hasClickHandler:"_1w6YXZ6Lh2aJD2goJRtLx3",hasTail:"_2hJjohH-EqiCHgHG2iPxnD",Content:"_2fl3RiMFMzxYgTM_TjTg8I"}},1650:function(e,t,n){e.exports={Wrapper:"AsmHNMwa8V6JFxwzpR6dG",SliderLayout:"_3GvcBFnnOqEvAbpxb4K9_",WidgetButton:"j8lkf_ta2sl2WMvjiqiaK",Content:"-zOcMNdFsi7uCebRFihg7",UnreadCountBadgeWrapper:"_2zlCNz6GWncyQ9b6a9KhmX"}},1651:function(e,t,n){"use strict";(function(e){var r=n(154),a=n.n(r),i=n(144),s=n.n(i),o=n(197),c=n.n(o),l=n(196),u=n.n(l),p=n(195),d=n.n(p),f=n(15),h=n(1532),m=n.n(h),v=n(1606),g=n(1531),T=n(1597),b=n(1650),y=n.n(b),C=function(t){function n(){var e,t,r,i;s()(this,n);for(var o=arguments.length,c=Array(o),l=0;l<o;l++)c[l]=arguments[l];return t=r=u()(this,(e=n.__proto__||a()(n)).call.apply(e,[this].concat(c))),r.handleMeasure=function(e){var t=e.width,n=e.height;r.props.onResize&&r.props.onResize({width:t,height:n})},i=t,u()(r,i)}return d()(n,t),c()(n,[{key:"render",value:function(){return e.createElement(m.a,{onMeasure:this.handleMeasure,whitelist:["width","height"]},this.props.children)}}]),n}(f.Component);C.propTypes={onResize:f.PropTypes.func.isRequired,children:f.PropTypes.node.isRequired};var w=function(t){function n(){return s()(this,n),u()(this,(n.__proto__||a()(n)).apply(this,arguments))}return d()(n,t),c()(n,[{key:"render",value:function(){var t=this.props,n=t.children,r=t.avatarUrl,a=t.bot,i=t.onWidgetClick,s=t.iconType,o=t.onResize;return e.createElement("div",{className:y.a.Wrapper},e.createElement(C,{onResize:o},e.createElement("div",{"aria-haspopup":"dialog","aria-label":"Open new message",className:y.a.SliderLayout},e.createElement(g.a,{className:y.a.WidgetButton,onClick:i,iconType:s,avatarUrl:r,bot:a}),e.createElement("div",{className:y.a.UnreadCountBadgeWrapper},e.createElement(v.a,{widgetButton:!0})),e.createElement("div",{className:y.a.Content},n))))}}]),n}(f.Component);w.propTypes={children:f.PropTypes.node,avatarUrl:f.PropTypes.string,bot:f.PropTypes.bool,onWidgetClick:f.PropTypes.func,onResize:f.PropTypes.func,iconType:f.PropTypes.oneOf([T.a.ANNOUNCEMENT,T.a.NPS,T.a.CHAT])},t.a=w}).call(this,n(15))},1728:function(e,t,n){e.exports={Slider:"_2d_Bp-Kt5gkBPBdwssn49b",DismissButton:"_6eWTYUKsxoA_IdO5RL7zQ",Content:"_1QMEkp0zgBS93G6kHWmAHJ",FlexContentWrapper:"l82_D_KImuLA5zRjJBNjH",DismissButtonWrapper:"mTzHPSKdhS7SRFrqMCAlW"}},1729:function(e,t,n){"use strict";(function(e){var r=n(154),a=n.n(r),i=n(144),s=n.n(i),o=n(197),c=n.n(o),l=n(196),u=n.n(l),p=n(195),d=n.n(p),f=n(15),h=n(1633),m=n(1638),v=n(1728),g=n.n(v),T=function(t){function n(){return s()(this,n),u()(this,(n.__proto__||a()(n)).apply(this,arguments))}return d()(n,t),c()(n,[{key:"render",value:function(){var t=this.props,n=t.onClick,r=t.onDismissClick,a=t.children;return e.createElement("div",{className:g.a.Slider,role:"dialog","aria-label":"You have received a message"},e.createElement(m.a,null,e.createElement("div",{className:g.a.FlexContentWrapper,key:"slider"},e.createElement("div",{className:g.a.DismissButtonWrapper},e.createElement(h.b,{className:g.a.DismissButton,onClick:r})),e.createElement(h.a,{onClick:n},e.createElement("div",{className:g.a.Content},a)))))}}]),n}(f.Component);T.propTypes={children:f.PropTypes.node,onClick:f.PropTypes.func.isRequired,onDismissClick:f.PropTypes.func.isRequired},t.a=T}).call(this,n(15))},1730:function(e,t,n){"use strict";(function(e){var r=n(4),a=n.n(r),i=n(15),s=n(33),o=Object(s.h)({attachmentCount:{id:"app.message.attachmentCount",description:"Displays a messages's number of attachments",defaultMessage:"{count, plural,\n        =0 {No attachments}\n        one {1 attachment}\n        other {# attachments}\n      }"}}),c=function(t){return e.createElement(s.b,a()({},o.attachmentCount,{values:{count:t.count}}))};c.propTypes={count:i.PropTypes.number.isRequired},t.a=c}).call(this,n(15))}}]);