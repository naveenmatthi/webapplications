!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/",t(t.s=1124)}([function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){var t="string"==typeof e,n=void 0;if(n=t?document.querySelector(e):e,!a(n)){var r="Container must be `string` or `HTMLElement`.";throw t&&(r+=" Unable to find "+e),new Error(r)}return n}function a(e){return e instanceof window.HTMLElement||Boolean(e)&&e.nodeType>0}function o(e){return 1===e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}function s(e){return function(t,n){return t&&!n?e+"--"+t:t&&n?e+"--"+t+"__"+n:!t&&n?e+"__"+n:e}}function c(e){var t=e.transformData,n=e.defaultTemplates,r=e.templates,i=e.templatesConfig,a=u(n,r);return W({transformData:t,templatesConfig:i},a)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=D()([].concat(r(L()(e)),r(L()(t))));return T()(n,function(n,r){var i=e[r],a=t[r],o=void 0!==a&&a!==i;return n.templates[r]=o?a:i,n.useCustomCompileOptions[r]=o,n},{templates:{},useCustomCompileOptions:{}})}function l(e){var t=e.templates,n=e.templateKey,r=e.compileOptions,i=e.helpers,a=e.data,o=t[n],s=void 0===o?"undefined":z(o),c="string"===s,u="function"===s;if(!c&&!u)throw new Error("Template must be 'string' or 'function', was '"+s+"' (key: "+n+")");if(u)return o(a);var l=d(i,r,a);return V.a.compile(o,r).render(W({},a,{helpers:l}))}function d(e,t,n){return F()(e,function(e){return q()(function(r){var i=this,a=function(e){return V.a.compile(e,t).render(i)};return e.call(n,r,a)})})}function f(e,t,n,r,i){var a={type:t,attributeName:n,name:r},o=P()(i,{name:n}),s=void 0;if("hierarchical"===t){var c=e.getHierarchicalFacetByName(n),u=r.split(c.separator);a.name=u[u.length-1];for(var l=0;void 0!==o&&l<u.length;++l)o=P()(o.data,{name:u[l]});s=A()(o,"count")}else s=A()(o,'data["'+a.name+'"]');var d=A()(o,"exhaustive");return void 0!==s&&(a.count=s),void 0!==d&&(a.exhaustive=d),a}function h(e,t,n){var r=n&&t.query&&t.query.trim()?[{type:"query",name:t.query,query:t.query}]:[];return x()(t.facetsRefinements,function(n,i){x()(n,function(n){r.push(f(t,"facet",i,n,e.facets))})}),x()(t.facetsExcludes,function(e,t){x()(e,function(e){r.push({type:"exclude",attributeName:t,name:e,exclude:!0})})}),x()(t.disjunctiveFacetsRefinements,function(n,i){x()(n,function(n){r.push(f(t,"disjunctive",i,y(n),e.disjunctiveFacets))})}),x()(t.hierarchicalFacetsRefinements,function(n,i){x()(n,function(n){r.push(f(t,"hierarchical",i,n,e.hierarchicalFacets))})}),x()(t.numericRefinements,function(e,t){x()(e,function(e,n){x()(e,function(e){r.push({type:"numeric",attributeName:t,name:""+e,numericValue:e,operator:n})})})}),x()(t.tagRefinements,function(e){r.push({type:"tag",attributeName:"_tags",name:e})}),r}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e;return n&&(r=r.setQuery("")),I()(t)?(r=r.clearTags(),r=r.clearRefinements()):(x()(t,function(e){r="_tags"===e?r.clearTags():r.clearRefinements(e)}),r)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.setState(p(e.state,t,n)).search()}function g(e,t){if(t)return U()(t,function(t,n){return e+n})}function m(e){return"number"==typeof e&&e<0&&(e=String(e).replace(/^-/,"\\-")),e}function y(e){return String(e).replace(/^\\-/,"-")}function b(e,t){if(void 0===e||"function"!=typeof e)throw new Error(t)}function _(e){return"object"===(void 0===e?"undefined":z(e))&&null!==e&&e.$$typeof===G}function w(e,t){var n=!1;return function(){return n||(n=!0,console.warn("[InstantSearch.js]: "+t)),e.apply(void 0,arguments)}}function S(e){var t=e.match(Y);if(!t)throw new Error('Invalid value for "aroundLatLng" parameter: "'+e+'"');return{lat:parseFloat(t[1]),lng:parseFloat(t[2])}}var k=n(117),T=n.n(k),C=n(174),x=n.n(C),E=n(27),P=n.n(E),$=n(175),A=n.n($),O=n(342),I=n.n(O),R=n(28),L=n.n(R),j=n(934),D=n.n(j),N=n(924),U=n.n(N),M=n(925),F=n.n(M),B=n(916),q=n.n(B),H=n(733),V=n.n(H);n.d(t,"k",function(){return i}),n.d(t,"i",function(){return s}),n.d(t,"j",function(){return c}),n.d(t,"l",function(){return l}),n.d(t,"n",function(){return o}),n.d(t,"p",function(){return a}),n.d(t,"h",function(){return h}),n.d(t,"g",function(){return p}),n.d(t,"f",function(){return v}),n.d(t,"o",function(){return g}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return y}),n.d(t,"a",function(){return b}),n.d(t,"m",function(){return _}),n.d(t,"e",function(){return w}),n.d(t,"b",function(){return S});var z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G="function"==typeof Symbol&&"symbol"===z(Symbol.iterator)&&Symbol.for&&Symbol.for("react.element")||60103,Y=/^(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)$/},function(e,t,n){"use strict";(function(e){function r(){return null}function i(e){var t=e.nodeName,n=e.attributes;e.attributes={},t.defaultProps&&w(e.attributes,t.defaultProps),n&&w(e.attributes,n)}function a(e,t){var n,r,i;if(t){for(i in t)if(n=z.test(i))break;if(n){r=e.attributes={};for(i in t)t.hasOwnProperty(i)&&(r[z.test(i)?i.replace(/([A-Z0-9])/,"-$1").toLowerCase():i]=t[i])}}}function o(e,t,r){var i=t&&t._preactCompatRendered&&t._preactCompatRendered.base;i&&i.parentNode!==t&&(i=null),!i&&t&&(i=t.firstElementChild);for(var a=t.childNodes.length;a--;)t.childNodes[a]!==i&&t.removeChild(t.childNodes[a]);var o=n.i(M.c)(e,t,i);return t&&(t._preactCompatRendered=o&&(o._component||{base:o})),"function"==typeof r&&r(),o&&o._component||o}function s(e,t,r,i){var a=n.i(M.a)(J,{context:e.context},t),s=o(a,r),c=s._component||s.base;return i&&i.call(c,s),c}function c(e){var t=e._preactCompatRendered&&e._preactCompatRendered.base;return!(!t||t.parentNode!==e)&&(n.i(M.c)(n.i(M.a)(r),e,t),!0)}function u(e){return p.bind(null,e)}function l(e,t){for(var n=t||0;n<e.length;n++){var r=e[n];Array.isArray(r)?l(r):r&&"object"==typeof r&&!m(r)&&(r.props&&r.type||r.attributes&&r.nodeName||r.children)&&(e[n]=p(r.type||r.nodeName,r.props||r.attributes,r.children))}}function d(e){return"function"==typeof e&&!(e.prototype&&e.prototype.render)}function f(e){return C({displayName:e.displayName||e.name,render:function(){return e(this.props,this.context)}})}function h(e){var t=e[H];return t?!0===t?e:t:(t=f(e),Object.defineProperty(t,H,{configurable:!0,value:!0}),t.displayName=e.displayName,t.propTypes=e.propTypes,t.defaultProps=e.defaultProps,Object.defineProperty(e,H,{configurable:!0,value:t}),t)}function p(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return l(e,2),v(M.a.apply(void 0,e))}function v(e){e.preactCompatNormalized=!0,_(e),d(e.nodeName)&&(e.nodeName=h(e.nodeName));var t=e.attributes.ref,n=t&&typeof t;return!K||"string"!==n&&"number"!==n||(e.attributes.ref=y(t,K)),b(e),e}function g(e,t){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];if(!m(e))return e;var a=e.attributes||e.props,o=n.i(M.a)(e.nodeName||e.type,w({},a),e.children||a&&a.children),s=[o,t];return r&&r.length?s.push(r):t&&t.children&&s.push(t.children),v(M.d.apply(void 0,s))}function m(e){return e&&(e instanceof Y||e.$$typeof===q)}function y(e,t){return t._refProxies[e]||(t._refProxies[e]=function(n){t&&t.refs&&(t.refs[e]=n,null===n&&(delete t._refProxies[e],t=null))})}function b(e){var t=e.nodeName,n=e.attributes;if(n&&"string"==typeof t){var r={};for(var i in n)r[i.toLowerCase()]=i;if(r.ondoubleclick&&(n.ondblclick=n[r.ondoubleclick],delete n[r.ondoubleclick]),r.onchange&&("textarea"===t||"input"===t.toLowerCase()&&!/^fil|che|rad/i.test(n.type))){var a=r.oninput||"oninput";n[a]||(n[a]=A([n[a],n[r.onchange]]),delete n[r.onchange])}}}function _(e){var t=e.attributes||(e.attributes={});re.enumerable="className"in t,t.className&&(t.class=t.className),Object.defineProperty(t,"className",re)}function w(e,t){for(var n=arguments,r=1,i=void 0;r<arguments.length;r++)if(i=n[r])for(var a in i)i.hasOwnProperty(a)&&(e[a]=i[a]);return e}function S(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function k(e){return e&&e.base||e}function T(){}function C(e){function t(e,t){P(this),j.call(this,e,t,W),O.call(this,e,t)}return e=w({constructor:t},e),e.mixins&&E(e,x(e.mixins)),e.statics&&w(t,e.statics),e.propTypes&&(t.propTypes=e.propTypes),e.defaultProps&&(t.defaultProps=e.defaultProps),e.getDefaultProps&&(t.defaultProps=e.getDefaultProps.call(t)),T.prototype=j.prototype,t.prototype=w(new T,e),t.displayName=e.displayName||"Component",t}function x(e){for(var t={},n=0;n<e.length;n++){var r=e[n];for(var i in r)r.hasOwnProperty(i)&&"function"==typeof r[i]&&(t[i]||(t[i]=[])).push(r[i])}return t}function E(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=A(t[n].concat(e[n]||Z),"getDefaultProps"===n||"getInitialState"===n||"getChildContext"===n))}function P(e){for(var t in e){var n=e[t];"function"!=typeof n||n.__bound||V.hasOwnProperty(t)||((e[t]=n.bind(e)).__bound=!0)}}function $(e,t,n){if("string"==typeof t&&(t=e.constructor.prototype[t]),"function"==typeof t)return t.apply(e,n)}function A(e,t){return function(){for(var n,r=arguments,i=this,a=0;a<e.length;a++){var o=$(i,e[a],r);if(t&&null!=o){n||(n={});for(var s in o)o.hasOwnProperty(s)&&(n[s]=o[s])}else void 0!==o&&(n=o)}return n}}function O(e,t){I.call(this,e,t),this.componentWillReceiveProps=A([I,this.componentWillReceiveProps||"componentWillReceiveProps"]),this.render=A([I,R,this.render||"render",L])}function I(e,t){if(e){var n=e.children;if(n&&Array.isArray(n)&&1===n.length&&("string"==typeof n[0]||"function"==typeof n[0]||n[0]instanceof Y)&&(e.children=n[0],e.children&&"object"==typeof e.children&&(e.children.length=1,e.children[0]=e.children)),G){var r="function"==typeof this?this:this.constructor,i=this.propTypes||r.propTypes,a=this.displayName||r.name;i&&U.a.checkPropTypes(i,e,"prop",a)}}}function R(e){K=this}function L(){K===this&&(K=null)}function j(e,t,n){M.e.call(this,e,t),this.state=this.getInitialState?this.getInitialState():{},this.refs={},this._refProxies={},n!==W&&O.call(this,e,t)}function D(e,t){j.call(this,e,t)}Object.defineProperty(t,"__esModule",{value:!0});var N=n(3),U=n.n(N),M=n(1027);n.d(t,"PropTypes",function(){return U.a}),n.d(t,"version",function(){return F}),n.d(t,"DOM",function(){return te}),n.d(t,"Children",function(){return ee}),n.d(t,"render",function(){return o}),n.d(t,"createClass",function(){return C}),n.d(t,"createFactory",function(){return u}),n.d(t,"createElement",function(){return p}),n.d(t,"cloneElement",function(){return g}),n.d(t,"isValidElement",function(){return m}),n.d(t,"findDOMNode",function(){return k}),n.d(t,"unmountComponentAtNode",function(){return c}),n.d(t,"Component",function(){return j}),n.d(t,"PureComponent",function(){return D}),n.d(t,"unstable_renderSubtreeIntoContainer",function(){return s}),n.d(t,"__spread",function(){return w});var F="15.1.0",B="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan".split(" "),q="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,H="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("__preactCompatWrapper"):"__preactCompatWrapper",V={constructor:1,render:1,shouldComponentUpdate:1,componentWillReceiveProps:1,componentWillUpdate:1,componentDidUpdate:1,componentWillMount:1,componentDidMount:1,componentWillUnmount:1,componentDidUnmount:1},z=/^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vector|vert|word|writing|x)[A-Z]/,W={},G=void 0===e||!e.env||"production"!==e.env.NODE_ENV,Y=n.i(M.a)("a",null).constructor;Y.prototype.$$typeof=q,Y.prototype.preactCompatUpgraded=!1,Y.prototype.preactCompatNormalized=!1,Object.defineProperty(Y.prototype,"type",{get:function(){return this.nodeName},set:function(e){this.nodeName=e},configurable:!0}),Object.defineProperty(Y.prototype,"props",{get:function(){return this.attributes},set:function(e){this.attributes=e},configurable:!0});var Q=M.b.event;M.b.event=function(e){return Q&&(e=Q(e)),e.persist=Object,e.nativeEvent=e,e};var X=M.b.vnode;M.b.vnode=function(e){if(!e.preactCompatUpgraded){e.preactCompatUpgraded=!0;var t=e.nodeName,n=e.attributes=w({},e.attributes);"function"==typeof t?(!0===t[H]||t.prototype&&"isReactComponent"in t.prototype)&&(e.children&&""===String(e.children)&&(e.children=void 0),e.children&&(n.children=e.children),e.preactCompatNormalized||v(e),i(e)):(e.children&&""===String(e.children)&&(e.children=void 0),e.children&&(n.children=e.children),n.defaultValue&&(n.value||0===n.value||(n.value=n.defaultValue),delete n.defaultValue),a(e,n))}X&&X(e)};var J=function(){};J.prototype.getChildContext=function(){return this.props.context},J.prototype.render=function(e){return e.children[0]};for(var K,Z=[],ee={map:function(e,t,n){return null==e?null:(e=ee.toArray(e),n&&n!==e&&(t=t.bind(n)),e.map(t))},forEach:function(e,t,n){if(null==e)return null;e=ee.toArray(e),n&&n!==e&&(t=t.bind(n)),e.forEach(t)},count:function(e){return e&&e.length||0},only:function(e){if(e=ee.toArray(e),1!==e.length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:function(e){return null==e?[]:Z.concat(e)}},te={},ne=B.length;ne--;)te[B[ne]]=u(B[ne]);var re={configurable:!0,get:function(){return this.class},set:function(e){this.class=e}};w(j.prototype=new M.e,{constructor:j,isReactComponent:{},replaceState:function(e,t){var n=this;this.setState(e,t);for(var r in n.state)r in e||delete n.state[r]},getDOMNode:function(){return this.base},isMounted:function(){return!!this.base}}),T.prototype=j.prototype,D.prototype=new T,D.prototype.isPureReactComponent=!0,D.prototype.shouldComponentUpdate=function(e,t){return S(this.props,e)||S(this.state,t)};var ie={version:F,DOM:te,PropTypes:U.a,Children:ee,render:o,createClass:C,createFactory:u,createElement:p,cloneElement:g,isValidElement:m,findDOMNode:k,unmountComponentAtNode:c,Component:j,PureComponent:D,unstable_renderSubtreeIntoContainer:s,__spread:w};t.default=ie}).call(t,n(9))},function(e,t,n){var r,i;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===i)for(var o in r)a.call(r,o)&&r[o]&&e.push(o)}}return e.join(" ")}var a={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(r=[],void 0!==(i=function(){return n}.apply(t,r))&&(e.exports=i))}()},function(e,t,n){(function(t){if("production"!==t.env.NODE_ENV){var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,i=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r};e.exports=n(1030)(i,!0)}else e.exports=n(1029)()}).call(t,n(9))},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(319),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},function(e,t,n){var r=n(219),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){v&&h&&(v=!1,h.length?p=h.concat(p):g=-1,p.length&&s())}function s(){if(!v){var e=i(o);v=!0;for(var t=p.length;t;){for(h=p,p=[];++g<t;)h&&h[g].run();g=-1,t=p.length}h=null,v=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,d,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,p=[],v=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||v||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,n){if(!e)return n;var r=l()(n),i=void 0,a=void 0===e?"undefined":p(e);if("function"===a)i=e(r);else{if("object"!==a)throw new Error("transformData must be a function or an object, was "+a+" (key : "+t+")");i=e[t]?e[t](r):n}var o=void 0===i?"undefined":p(i),s=void 0===n?"undefined":p(n);if(o!==s)throw new Error("`transformData` must return a `"+s+"`, got `"+o+"`.");return i}var s=n(1),c=n(3),u=(n.n(c),n(336)),l=n.n(u),d=n(16),f=n.n(d),h=n(0),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),g(t,[{key:"shouldComponentUpdate",value:function(e){return!f()(this.props.data,e.data)||this.props.templateKey!==e.templateKey||!f()(this.props.rootProps,e.rootProps)}},{key:"render",value:function(){var e=this.props.rootTagName,t=this.props.useCustomCompileOptions[this.props.templateKey],r=t?this.props.templatesConfig.compileOptions:{},i=n.i(h.l)({templates:this.props.templates,templateKey:this.props.templateKey,compileOptions:r,helpers:this.props.templatesConfig.helpers,data:this.props.data});if(null===i)return null;if(n.i(h.m)(i))throw new Error("Support for templates as React elements has been removed, please use react-instantsearch");return s.default.createElement(e,v({},this.props.rootProps,{dangerouslySetInnerHTML:{__html:i}}))}}]),t}(s.Component);m.defaultProps={data:{},rootTagName:"div",useCustomCompileOptions:{},templates:{},templatesConfig:{}};var y=function(e){return function(t){var n=void 0===t.data?{}:t.data;return s.default.createElement(e,v({},t,{data:o(t.transformData,t.templateKey,n)}))}};t.a=y(m)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(3),s=(n.n(o),n(1)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.a=function(e){var t,n;return n=t=function(t){function n(){return r(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),c(n,[{key:"render",value:function(){var t=this.props.shouldAutoHideContainer;return s.default.createElement("div",{style:{display:t?"none":""}},s.default.createElement(e,this.props))}}]),n}(s.Component),t.displayName=e.name+"-AutoHide",n}},function(e,t,n){function r(e,t){return i(e,t)}var i=n(164);e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?s(e)?a(e[0],e[1]):i(e):c(e)}var i=n(507),a=n(508),o=n(32),s=n(5),c=n(616);e.exports=r},function(e,t,n){function r(e){return null!=e&&a(e.length)&&!i(e)}var i=n(42),a=n(144);e.exports=r},function(e,t,n){function r(e){return o(e)?i(e):a(e)}var i=n(198),a=n(203),o=n(18);e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){var t=function(t){function n(e){r(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleHeaderClick=t.handleHeaderClick.bind(t),t.state={collapsed:e.collapsible&&e.collapsible.collapsed},t._cssClasses={root:l()("ais-root",t.props.cssClasses.root),body:l()("ais-body",t.props.cssClasses.body)},t._footerElement=t._getElement({type:"footer"}),t}return a(n,t),v(n,[{key:"_getElement",value:function(e){var t=e.type,n=e.handleClick,r=void 0===n?null:n,i=this.props.templateProps&&this.props.templateProps.templates;if(!i||!i[t])return null;var a=l()(this.props.cssClasses[t],"ais-"+t),o=f()(this.props,"headerFooterData."+t);return c.default.createElement(h.a,p({},this.props.templateProps,{data:o,rootProps:{className:a,onClick:r},templateKey:t,transformData:null}))}},{key:"handleHeaderClick",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var t=[this._cssClasses.root];this.props.collapsible&&t.push("ais-root__collapsible"),this.state.collapsed&&t.push("ais-root__collapsed");var n=p({},this._cssClasses,{root:l()(t)}),r=this._getElement({type:"header",handleClick:this.props.collapsible?this.handleHeaderClick:null});return c.default.createElement("div",{className:n.root},r,c.default.createElement("div",{className:n.body},c.default.createElement(e,this.props)),this._footerElement)}}]),n}(c.Component);return t.defaultProps={cssClasses:{},collapsible:!1},t.displayName=e.name+"-HeaderFooter",t}var s=n(3),c=(n.n(s),n(1)),u=n(2),l=n.n(u),d=n(175),f=n.n(d),h=n(14),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.a=o},function(e,t,n){function r(e){return null!=e&&a(e.length)&&!i(e)}var i=n(49),a=n(177);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}e.exports=n},function(e,t,n){function r(e){return null==e?void 0===e?c:s:u&&u in Object(e)?a(e):o(e)}var i=n(34),a=n(549),o=n(581),s="[object Null]",c="[object Undefined]",u=i?i.toStringTag:void 0;e.exports=r},function(e,t,n){function r(e,t){return(s(e)?i:o)(e,a(t,3))}var i=n(22),a=n(17),o=n(204),s=n(5);e.exports=r},function(e,t,n){function r(e){return null==e?void 0===e?c:s:u&&u in Object(e)?a(e):o(e)}var i=n(47),a=n(870),o=n(900),s="[object Null]",c="[object Undefined]",u=i?i.toStringTag:void 0;e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?s(e)?a(e[0],e[1]):i(e):c(e)}var i=n(834),a=n(835),o=n(75),s=n(4),c=n(927);e.exports=r},function(e,t,n){var r=n(858),i=n(920),a=r(i);e.exports=a},function(e,t,n){function r(e){return o(e)?i(e):a(e)}var i=n(294),a=n(303),o=n(21);e.exports=r},function(e,t,n){"use strict";var r=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,a;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){e={}}}};r.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},r.prototype.push=function(e){this.trigger("data",e)},r.prototype.flush=function(e){this.trigger("done",e)},e.exports=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){function r(e,t){var n=a(e,t);return i(n)?n:void 0}var i=n(503),a=n(550);e.exports=r},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function r(e,t){var n=a(e,t);return i(n)?n:void 0}var i=n(829),a=n(871);e.exports=r},function(e,t,n){var r=n(8),i=r.Symbol;e.exports=i},function(e,t,n){function r(e,t){return o(a(e,t,i),e+"")}var i=n(32),a=n(229),o=n(141);e.exports=r},function(e,t,n){function r(e,t){return i(e)?e:a(e,t)?[e]:o(s(e))}var i=n(5),a=n(139),o=n(595),s=n(147);e.exports=r},function(e,t,n){function r(e,t,n,r){var o=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=r?r(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),o?a(n,u,l):i(n,u,l)}return n}var i=n(130),a=n(51);e.exports=r},function(e,t){function n(e,t){for(var n=-1,i=e.length,a=0,o=[];++n<i;){var s=e[n];s!==t&&s!==r||(e[n]=r,o[a++]=n)}return o}var r="__lodash_placeholder__";e.exports=n},function(e,t,n){function r(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}var i=n(62),a=1/0;e.exports=r},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e,t){return(s(e)?i:a)(e,o(t))}var i=n(128),a=n(86),o=n(209),s=n(5);e.exports=r},function(e,t,n){function r(e){if(!a(e))return!1;var t=i(e);return t==s||t==c||t==o||t==u}var i=n(23),a=n(10),o="[object AsyncFunction]",s="[object Function]",c="[object GeneratorFunction]",u="[object Proxy]";e.exports=r},function(e,t){e.exports=function(e){return JSON.parse(JSON.stringify(e))}},function(e,t,n){(function(r){function i(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function a(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(a=i))}),e.splice(a,0,r)}}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function c(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}function u(){try{return window.localStorage}catch(e){}}t=e.exports=n(721),t.log=o,t.formatArgs=a,t.save=s,t.load=c,t.useColors=i,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:u(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(c())}).call(t,n(9))},function(e,t){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,t,i){if("[object Function]"!==r.call(t))throw new TypeError("iterator must be a function");var a=e.length;if(a===+a)for(var o=0;o<a;o++)t.call(i,e[o],o,e);else for(var s in e)n.call(e,s)&&t.call(i,e[s],s,e)}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),c=(n.n(s),n(1)),u=n(2),l=n.n(u),d=n(0),f=n(14),h=n(751),p=n(16),v=n.n(p),g=n(752),m=n(15),y=n(20),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleItemClick=n.handleItemClick.bind(n),n}return o(t,e),_(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=t!==this.state,r=!v()(this.props.facetValues,e.facetValues);return n||r}},{key:"refine",value:function(e,t){this.props.toggleRefinement(e,t)}},{key:"_generateFacetItem",value:function(e){var n=void 0;e.data&&e.data.length>0&&(n=c.default.createElement(t,b({},this.props,{depth:this.props.depth+1,facetValues:e.data})));var i=this.props.createURL(e.value),a=b({},e,{url:i,cssClasses:this.props.cssClasses}),o=l()(this.props.cssClasses.item,r({},this.props.cssClasses.active,e.isRefined)),s=e.value;return void 0!==e.isRefined&&(s+="/"+e.isRefined),void 0!==e.count&&(s+="/"+e.count),c.default.createElement(h.a,{facetValueToRefine:e.value,handleClick:this.handleItemClick,isRefined:e.isRefined,itemClassName:o,key:s,subItems:n,templateData:a,templateKey:"item",templateProps:this.props.templateProps})}},{key:"handleItemClick",value:function(e){var t=e.facetValueToRefine,r=e.originalEvent,i=e.isRefined;if(!n.i(d.n)(r)){if("INPUT"===r.target.tagName)return void this.refine(t,i);for(var a=r.target;a!==r.currentTarget;){if("LABEL"===a.tagName&&(a.querySelector('input[type="checkbox"]')||a.querySelector('input[type="radio"]')))return;"A"===a.tagName&&a.href&&r.preventDefault(),a=a.parentNode}r.stopPropagation(),this.refine(t,i)}}},{key:"componentWillReceiveProps",value:function(e){this.searchbox&&!e.isFromSearch&&this.searchbox.clearInput()}},{key:"refineFirstValue",value:function(){var e=this.props.facetValues[0];if(e){var t=e.value;this.props.toggleRefinement(t)}}},{key:"render",value:function(){var e=this,t=[this.props.cssClasses.list];this.props.cssClasses.depth&&t.push(""+this.props.cssClasses.depth+this.props.depth);var n=!0===this.props.showMore&&this.props.canToggleShowMore?c.default.createElement(f.a,b({rootProps:{onClick:this.props.toggleShowMore},templateKey:"show-more-"+(this.props.isShowingMore?"active":"inactive")},this.props.templateProps)):void 0,r=!0!==this.props.searchIsAlwaysActive&&!(this.props.isFromSearch||!this.props.hasExhaustiveItems),i=this.props.searchFacetValues?c.default.createElement(g.a,{ref:function(t){e.searchbox=t},placeholder:this.props.searchPlaceholder,onChange:this.props.searchFacetValues,onValidate:function(){return e.refineFirstValue()},disabled:r}):null,a=this.props.searchFacetValues&&this.props.isFromSearch&&0===this.props.facetValues.length?c.default.createElement(f.a,b({templateKey:"noResults"},this.props.templateProps)):null;return c.default.createElement("div",{className:l()(t)},i,this.props.facetValues.map(this._generateFacetItem,this),a,n)}}]),t}(c.Component);w.defaultProps={cssClasses:{},depth:0},t.a=n.i(m.a)(n.i(y.a)(w))},function(e,t,n){var r=n(7),i=r.Symbol;e.exports=i},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e){if(!a(e))return!1;var t=i(e);return t==s||t==c||t==o||t==u}var i=n(25),a=n(12),o="[object AsyncFunction]",s="[object Function]",c="[object GeneratorFunction]",u="[object Proxy]";e.exports=r},function(e,t,n){function r(e){if(!o(e)||i(e)!=s)return!1;var t=a(e);if(null===t)return!0;var n=d.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==f}var i=n(25),a=n(168),o=n(13),s="[object Object]",c=Function.prototype,u=Object.prototype,l=c.toString,d=u.hasOwnProperty,f=l.call(Object);e.exports=r},function(e,t,n){function r(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var i=n(216);e.exports=r},function(e,t,n){function r(e,t){return e&&i(e,t,a)}var i=n(201),a=n(19);e.exports=r},function(e,t,n){function r(e,t,n){return t===t?o(e,t,n):i(e,a,n)}var i=n(200),a=n(502),o=n(593);e.exports=r},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t){function n(e){return e.placeholder}e.exports=n},function(e,t,n){var r=n(481),i=n(125),a=n(483),o=n(484),s=n(195),c=n(23),u=n(234),l="[object Map]",d="[object Promise]",f="[object Set]",h="[object WeakMap]",p="[object DataView]",v=u(r),g=u(i),m=u(a),y=u(o),b=u(s),_=c;(r&&_(new r(new ArrayBuffer(1)))!=p||i&&_(new i)!=l||a&&_(a.resolve())!=d||o&&_(new o)!=f||s&&_(new s)!=h)&&(_=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case v:return p;case g:return l;case m:return d;case y:return f;case b:return h}return t}),e.exports=_},function(e,t){function n(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){var r=n(498),i=n(11),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},function(e,t,n){(function(e){var r=n(8),i=n(618),a="object"==typeof t&&t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===a,c=s?r.Buffer:void 0,u=c?c.isBuffer:void 0,l=u||i;e.exports=l}).call(t,n(30)(e))},function(e,t,n){function r(e){if(null==e)return!0;if(c(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||d(e)||o(e)))return!e.length;var t=a(e);if(t==f||t==h)return!e.size;if(l(e))return!i(e).length;for(var n in e)if(v.call(e,n))return!1;return!0}var i=n(203),a=n(56),o=n(58),s=n(5),c=n(18),u=n(59),l=n(91),d=n(95),f="[object Map]",h="[object Set]",p=Object.prototype,v=p.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){return"string"==typeof e||!a(e)&&o(e)&&i(e)==s}var i=n(23),a=n(5),o=n(11),s="[object String]";e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||a(e)&&i(e)==o}var i=n(23),a=n(11),o="[object Symbol]";e.exports=r},function(e,t,n){function r(e){return o(e)?i(e,!0):a(e)}var i=n(198),a=n(506),o=n(18);e.exports=r},function(e,t,n){function r(e,t,n){var r=c(e)?i:s,u=arguments.length<3;return r(e,o(t,4),n,u,a)}var i=n(486),a=n(86),o=n(17),s=n(515),c=n(5);e.exports=r},function(e,t,n){function r(e){var t=i(e),n=t%1;return t===t?n?t-n:t:0}var i=n(620);e.exports=r},function(e,t,n){(function(r){function i(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function a(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(a=i))}),e.splice(a,0,r)}}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function c(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}function u(){try{return window.localStorage}catch(e){}}t=e.exports=n(636),t.log=o,t.formatArgs=a,t.save=s,t.load=c,t.useColors=i,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:u(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(c())}).call(t,n(9))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};r.settings={},r.prefix="transcript",r.player=void 0;var i={autoscroll:!0,clickArea:"text",showTitle:!0,showTrackSelector:!0,followPlayerTrack:!0,stopScrollWhenInUse:!0};t.my=r,t.defaults=i},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),i=u.length,c=0;c<i;c++)u[c].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(t,n(6))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){function r(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var i=n(317);e.exports=r},function(e,t,n){var r=n(163),i=n(854),a=i(r);e.exports=a},function(e,t,n){function r(e,t,n,r){var o=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=r?r(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),o?a(n,u,l):i(n,u,l)}return n}var i=n(297),a=n(71);e.exports=r},function(e,t,n){var r=n(812),i=n(158),a=n(814),o=n(288),s=n(291),c=n(25),u=n(335),l="[object Map]",d="[object Promise]",f="[object Set]",h="[object WeakMap]",p="[object DataView]",v=u(r),g=u(i),m=u(a),y=u(o),b=u(s),_=c;(r&&_(new r(new ArrayBuffer(1)))!=p||i&&_(new i)!=l||a&&_(a.resolve())!=d||o&&_(new o)!=f||s&&_(new s)!=h)&&(_=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case v:return p;case g:return l;case m:return d;case y:return f;case b:return h}return t}),e.exports=_},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){var r=n(824),i=n(13),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},function(e,t,n){(function(e){var r=n(7),i=n(929),a="object"==typeof t&&t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===a,c=s?r.Buffer:void 0,u=c?c.isBuffer:void 0,l=u||i;e.exports=l}).call(t,n(30)(e))},function(e,t,n){function r(e){return o(e)?i(e,!0):a(e)}var i=n(294),a=n(832),o=n(21);e.exports=r},function(e,t,n){(function(e,r){var i;(function(){function a(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function o(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function s(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function c(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function u(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function l(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function d(e,t){return!!(null==e?0:e.length)&&S(e,t,0)>-1}function f(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function h(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function p(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function v(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function g(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function m(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function y(e){return e.split("")}function b(e){return e.match(Ft)||[]}function _(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function w(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function S(e,t,n){return t===t?Q(e,t,n):w(e,T,n)}function k(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function T(e){return e!==e}function C(e,t){var n=null==e?0:e.length;return n?A(e,t)/n:je}function x(e){return function(t){return null==t?ne:t[e]}}function E(e){return function(t){return null==e?ne:e[t]}}function P(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}function $(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function A(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==ne&&(n=n===ne?a:n+a)}return n}function O(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function I(e,t){return h(t,function(t){return[t,e[t]]})}function R(e){return function(t){return e(t)}}function L(e,t){return h(t,function(t){return e[t]})}function j(e,t){return e.has(t)}function D(e,t){for(var n=-1,r=e.length;++n<r&&S(t,e[n],0)>-1;);return n}function N(e,t){for(var n=e.length;n--&&S(t,e[n],0)>-1;);return n}function U(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function M(e){return"\\"+Zn[e]}function F(e,t){return null==e?ne:e[t]}function B(e){return Vn.test(e)}function q(e){return zn.test(e)}function H(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function V(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function z(e,t){return function(n){return e(t(n))}}function W(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==ue||(e[n]=ue,a[i++]=n)}return a}function G(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Y(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Q(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function X(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function J(e){return B(e)?Z(e):gr(e)}function K(e){return B(e)?ee(e):y(e)}function Z(e){for(var t=qn.lastIndex=0;qn.test(e);)++t;return t}function ee(e){return e.match(qn)||[]}function te(e){return e.match(Hn)||[]}var ne,re="4.17.11",ie=200,ae="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",oe="Expected a function",se="__lodash_hash_undefined__",ce=500,ue="__lodash_placeholder__",le=1,de=2,fe=4,he=1,pe=2,ve=1,ge=2,me=4,ye=8,be=16,_e=32,we=64,Se=128,ke=256,Te=512,Ce=30,xe="...",Ee=800,Pe=16,$e=1,Ae=2,Oe=3,Ie=1/0,Re=9007199254740991,Le=1.7976931348623157e308,je=NaN,De=4294967295,Ne=De-1,Ue=De>>>1,Me=[["ary",Se],["bind",ve],["bindKey",ge],["curry",ye],["curryRight",be],["flip",Te],["partial",_e],["partialRight",we],["rearg",ke]],Fe="[object Arguments]",Be="[object Array]",qe="[object AsyncFunction]",He="[object Boolean]",Ve="[object Date]",ze="[object DOMException]",We="[object Error]",Ge="[object Function]",Ye="[object GeneratorFunction]",Qe="[object Map]",Xe="[object Number]",Je="[object Null]",Ke="[object Object]",Ze="[object Promise]",et="[object Proxy]",tt="[object RegExp]",nt="[object Set]",rt="[object String]",it="[object Symbol]",at="[object Undefined]",ot="[object WeakMap]",st="[object WeakSet]",ct="[object ArrayBuffer]",ut="[object DataView]",lt="[object Float32Array]",dt="[object Float64Array]",ft="[object Int8Array]",ht="[object Int16Array]",pt="[object Int32Array]",vt="[object Uint8Array]",gt="[object Uint8ClampedArray]",mt="[object Uint16Array]",yt="[object Uint32Array]",bt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,St=/&(?:amp|lt|gt|quot|#39);/g,kt=/[&<>"']/g,Tt=RegExp(St.source),Ct=RegExp(kt.source),xt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,Pt=/<%=([\s\S]+?)%>/g,$t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,At=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Rt=RegExp(It.source),Lt=/^\s+|\s+$/g,jt=/^\s+/,Dt=/\s+$/,Nt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ut=/\{\n\/\* \[wrapped with (.+)\] \*/,Mt=/,? & /,Ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bt=/\\(\\)?/g,qt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ht=/\w*$/,Vt=/^[-+]0x[0-9a-f]+$/i,zt=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,Gt=/^0o[0-7]+$/i,Yt=/^(?:0|[1-9]\d*)$/,Qt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xt=/($^)/,Jt=/['\n\r\u2028\u2029\\]/g,Kt="\\ud800-\\udfff",Zt="\\u0300-\\u036f",en="\\ufe20-\\ufe2f",tn="\\u20d0-\\u20ff",nn=Zt+en+tn,rn="\\u2700-\\u27bf",an="a-z\\xdf-\\xf6\\xf8-\\xff",on="\\xac\\xb1\\xd7\\xf7",sn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",cn="\\u2000-\\u206f",un=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ln="A-Z\\xc0-\\xd6\\xd8-\\xde",dn="\\ufe0e\\ufe0f",fn=on+sn+cn+un,hn="['’]",pn="["+Kt+"]",vn="["+fn+"]",gn="["+nn+"]",mn="\\d+",yn="["+rn+"]",bn="["+an+"]",_n="[^"+Kt+fn+mn+rn+an+ln+"]",wn="\\ud83c[\\udffb-\\udfff]",Sn="(?:"+gn+"|"+wn+")",kn="[^"+Kt+"]",Tn="(?:\\ud83c[\\udde6-\\uddff]){2}",Cn="[\\ud800-\\udbff][\\udc00-\\udfff]",xn="["+ln+"]",En="\\u200d",Pn="(?:"+bn+"|"+_n+")",$n="(?:"+xn+"|"+_n+")",An="(?:"+hn+"(?:d|ll|m|re|s|t|ve))?",On="(?:"+hn+"(?:D|LL|M|RE|S|T|VE))?",In=Sn+"?",Rn="["+dn+"]?",Ln="(?:"+En+"(?:"+[kn,Tn,Cn].join("|")+")"+Rn+In+")*",jn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Nn=Rn+In+Ln,Un="(?:"+[yn,Tn,Cn].join("|")+")"+Nn,Mn="(?:"+[kn+gn+"?",gn,Tn,Cn,pn].join("|")+")",Fn=RegExp(hn,"g"),Bn=RegExp(gn,"g"),qn=RegExp(wn+"(?="+wn+")|"+Mn+Nn,"g"),Hn=RegExp([xn+"?"+bn+"+"+An+"(?="+[vn,xn,"$"].join("|")+")",$n+"+"+On+"(?="+[vn,xn+Pn,"$"].join("|")+")",xn+"?"+Pn+"+"+An,xn+"+"+On,Dn,jn,mn,Un].join("|"),"g"),Vn=RegExp("["+En+Kt+nn+dn+"]"),zn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gn=-1,Yn={};Yn[lt]=Yn[dt]=Yn[ft]=Yn[ht]=Yn[pt]=Yn[vt]=Yn[gt]=Yn[mt]=Yn[yt]=!0,Yn[Fe]=Yn[Be]=Yn[ct]=Yn[He]=Yn[ut]=Yn[Ve]=Yn[We]=Yn[Ge]=Yn[Qe]=Yn[Xe]=Yn[Ke]=Yn[tt]=Yn[nt]=Yn[rt]=Yn[ot]=!1;var Qn={};Qn[Fe]=Qn[Be]=Qn[ct]=Qn[ut]=Qn[He]=Qn[Ve]=Qn[lt]=Qn[dt]=Qn[ft]=Qn[ht]=Qn[pt]=Qn[Qe]=Qn[Xe]=Qn[Ke]=Qn[tt]=Qn[nt]=Qn[rt]=Qn[it]=Qn[vt]=Qn[gt]=Qn[mt]=Qn[yt]=!0,Qn[We]=Qn[Ge]=Qn[ot]=!1;var Xn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Jn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Zn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},er=parseFloat,tr=parseInt,nr="object"==typeof e&&e&&e.Object===Object&&e,rr="object"==typeof self&&self&&self.Object===Object&&self,ir=nr||rr||Function("return this")(),ar="object"==typeof t&&t&&!t.nodeType&&t,or=ar&&"object"==typeof r&&r&&!r.nodeType&&r,sr=or&&or.exports===ar,cr=sr&&nr.process,ur=function(){try{var e=or&&or.require&&or.require("util").types;return e||cr&&cr.binding&&cr.binding("util")}catch(e){}}(),lr=ur&&ur.isArrayBuffer,dr=ur&&ur.isDate,fr=ur&&ur.isMap,hr=ur&&ur.isRegExp,pr=ur&&ur.isSet,vr=ur&&ur.isTypedArray,gr=x("length"),mr=E(Xn),yr=E(Jn),br=E(Kn),_r=function e(t){function n(e){if(ac(e)&&!mf(e)&&!(e instanceof y)){if(e instanceof i)return e;if(gl.call(e,"__wrapped__"))return to(e)}return new i(e)}function r(){}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ne}function y(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function E(){var e=new y(this.__wrapped__);return e.__actions__=ji(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ji(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ji(this.__views__),e}function Q(){if(this.__filtered__){var e=new y(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Z(){var e=this.__wrapped__.value(),t=this.__dir__,n=mf(e),r=t<0,i=n?e.length:0,a=Ta(0,i,this.__views__),o=a.start,s=a.end,c=s-o,u=r?s:o-1,l=this.__iteratees__,d=l.length,f=0,h=Wl(c,this.__takeCount__);if(!n||!r&&i==c&&h==c)return yi(e,this.__actions__);var p=[];e:for(;c--&&f<h;){u+=t;for(var v=-1,g=e[u];++v<d;){var m=l[v],y=m.iteratee,b=m.type,_=y(g);if(b==Ae)g=_;else if(!_){if(b==$e)continue e;break e}}p[f++]=g}return p}function ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ft(){this.__data__=nd?nd(null):{},this.size=0}function Kt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Zt(e){var t=this.__data__;if(nd){var n=t[e];return n===se?ne:n}return gl.call(t,e)?t[e]:ne}function en(e){var t=this.__data__;return nd?t[e]!==ne:gl.call(t,e)}function tn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nd&&t===ne?se:t,this}function nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function rn(){this.__data__=[],this.size=0}function an(e){var t=this.__data__,n=An(t,e);return!(n<0)&&(n==t.length-1?t.pop():Al.call(t,n,1),--this.size,!0)}function on(e){var t=this.__data__,n=An(t,e);return n<0?ne:t[n][1]}function sn(e){return An(this.__data__,e)>-1}function cn(e,t){var n=this.__data__,r=An(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function un(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ln(){this.size=0,this.__data__={hash:new ee,map:new(Kl||nn),string:new ee}}function dn(e){var t=_a(this,e).delete(e);return this.size-=t?1:0,t}function fn(e){return _a(this,e).get(e)}function hn(e){return _a(this,e).has(e)}function pn(e,t){var n=_a(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function vn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new un;++t<n;)this.add(e[t])}function gn(e){return this.__data__.set(e,se),this}function mn(e){return this.__data__.has(e)}function yn(e){var t=this.__data__=new nn(e);this.size=t.size}function bn(){this.__data__=new nn,this.size=0}function _n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function wn(e){return this.__data__.get(e)}function Sn(e){return this.__data__.has(e)}function kn(e,t){var n=this.__data__;if(n instanceof nn){var r=n.__data__;if(!Kl||r.length<ie-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new un(r)}return n.set(e,t),this.size=n.size,this}function Tn(e,t){var n=mf(e),r=!n&&gf(e),i=!n&&!r&&bf(e),a=!n&&!r&&!i&&Tf(e),o=n||r||i||a,s=o?O(e.length,ul):[],c=s.length;for(var u in e)!t&&!gl.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ia(u,c))||s.push(u);return s}function Cn(e){var t=e.length;return t?e[Zr(0,t-1)]:ne}function xn(e,t){return Ja(ji(e),Dn(t,0,e.length))}function En(e){return Ja(ji(e))}function Pn(e,t,n){(n===ne||zs(e[t],n))&&(n!==ne||t in e)||Ln(e,t,n)}function $n(e,t,n){var r=e[t];gl.call(e,t)&&zs(r,n)&&(n!==ne||t in e)||Ln(e,t,n)}function An(e,t){for(var n=e.length;n--;)if(zs(e[n][0],t))return n;return-1}function On(e,t,n,r){return pd(e,function(e,i,a){t(r,e,n(e),a)}),r}function In(e,t){return e&&Di(t,Fc(t),e)}function Rn(e,t){return e&&Di(t,Bc(t),e)}function Ln(e,t,n){"__proto__"==t&&Ll?Ll(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function jn(e,t){for(var n=-1,r=t.length,i=nl(r),a=null==e;++n<r;)i[n]=a?ne:Nc(e,t[n]);return i}function Dn(e,t,n){return e===e&&(n!==ne&&(e=e<=n?e:n),t!==ne&&(e=e>=t?e:t)),e}function Nn(e,t,n,r,i,a){var o,c=t&le,u=t&de,l=t&fe;if(n&&(o=i?n(e,r,i,a):n(e)),o!==ne)return o;if(!ic(e))return e;var d=mf(e);if(d){if(o=Ea(e),!c)return ji(e,o)}else{var f=xd(e),h=f==Ge||f==Ye;if(bf(e))return Ci(e,c);if(f==Ke||f==Fe||h&&!i){if(o=u||h?{}:Pa(e),!c)return u?Ui(e,Rn(o,e)):Ni(e,In(o,e))}else{if(!Qn[f])return i?e:{};o=$a(e,f,c)}}a||(a=new yn);var p=a.get(e);if(p)return p;if(a.set(e,o),kf(e))return e.forEach(function(r){o.add(Nn(r,t,n,r,e,a))}),o;if(wf(e))return e.forEach(function(r,i){o.set(i,Nn(r,t,n,i,e,a))}),o;var v=l?u?ga:va:u?Bc:Fc,g=d?ne:v(e);return s(g||e,function(r,i){g&&(i=r,r=e[i]),$n(o,i,Nn(r,t,n,i,e,a))}),o}function Un(e){var t=Fc(e);return function(n){return Mn(n,e,t)}}function Mn(e,t,n){var r=n.length;if(null==e)return!r;for(e=sl(e);r--;){var i=n[r],a=t[i],o=e[i];if(o===ne&&!(i in e)||!a(o))return!1}return!0}function qn(e,t,n){if("function"!=typeof e)throw new ll(oe);return $d(function(){e.apply(ne,n)},t)}function Hn(e,t,n,r){var i=-1,a=d,o=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=h(t,R(n))),r?(a=f,o=!1):t.length>=ie&&(a=j,o=!1,t=new vn(t));e:for(;++i<s;){var l=e[i],p=null==n?l:n(l);if(l=r||0!==l?l:0,o&&p===p){for(var v=u;v--;)if(t[v]===p)continue e;c.push(l)}else a(t,p,r)||c.push(l)}return c}function Vn(e,t){var n=!0;return pd(e,function(e,r,i){return n=!!t(e,r,i)}),n}function zn(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],o=t(a);if(null!=o&&(s===ne?o===o&&!gc(o):n(o,s)))var s=o,c=a}return c}function Xn(e,t,n,r){var i=e.length;for(n=Sc(n),n<0&&(n=-n>i?0:i+n),r=r===ne||r>i?i:Sc(r),r<0&&(r+=i),r=n>r?0:kc(r);n<r;)e[n++]=t;return e}function Jn(e,t){var n=[];return pd(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Kn(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=Oa),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?Kn(s,t-1,n,r,i):p(i,s):r||(i[i.length]=s)}return i}function Zn(e,t){return e&&gd(e,t,Fc)}function nr(e,t){return e&&md(e,t,Fc)}function rr(e,t){return l(t,function(t){return tc(e[t])})}function ar(e,t){t=ki(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[Ka(t[n++])];return n&&n==r?e:ne}function or(e,t,n){var r=t(e);return mf(e)?r:p(r,n(e))}function cr(e){return null==e?e===ne?at:Je:Rl&&Rl in sl(e)?ka(e):Va(e)}function ur(e,t){return e>t}function gr(e,t){return null!=e&&gl.call(e,t)}function _r(e,t){return null!=e&&t in sl(e)}function Sr(e,t,n){return e>=Wl(t,n)&&e<zl(t,n)}function kr(e,t,n){for(var r=n?f:d,i=e[0].length,a=e.length,o=a,s=nl(a),c=1/0,u=[];o--;){var l=e[o];o&&t&&(l=h(l,R(t))),c=Wl(l.length,c),s[o]=!n&&(t||i>=120&&l.length>=120)?new vn(o&&l):ne}l=e[0];var p=-1,v=s[0];e:for(;++p<i&&u.length<c;){var g=l[p],m=t?t(g):g;if(g=n||0!==g?g:0,!(v?j(v,m):r(u,m,n))){for(o=a;--o;){var y=s[o];if(!(y?j(y,m):r(e[o],m,n)))continue e}v&&v.push(m),u.push(g)}}return u}function Tr(e,t,n,r){return Zn(e,function(e,i,a){t(r,n(e),i,a)}),r}function Cr(e,t,n){t=ki(t,e),e=Wa(e,t);var r=null==e?e:e[Ka(wo(t))];return null==r?ne:a(r,e,n)}function xr(e){return ac(e)&&cr(e)==Fe}function Er(e){return ac(e)&&cr(e)==ct}function Pr(e){return ac(e)&&cr(e)==Ve}function $r(e,t,n,r,i){return e===t||(null==e||null==t||!ac(e)&&!ac(t)?e!==e&&t!==t:Ar(e,t,n,r,$r,i))}function Ar(e,t,n,r,i,a){var o=mf(e),s=mf(t),c=o?Be:xd(e),u=s?Be:xd(t);c=c==Fe?Ke:c,u=u==Fe?Ke:u;var l=c==Ke,d=u==Ke,f=c==u;if(f&&bf(e)){if(!bf(t))return!1;o=!0,l=!1}if(f&&!l)return a||(a=new yn),o||Tf(e)?da(e,t,n,r,i,a):fa(e,t,c,n,r,i,a);if(!(n&he)){var h=l&&gl.call(e,"__wrapped__"),p=d&&gl.call(t,"__wrapped__");if(h||p){var v=h?e.value():e,g=p?t.value():t;return a||(a=new yn),i(v,g,n,r,a)}}return!!f&&(a||(a=new yn),ha(e,t,n,r,i,a))}function Or(e){return ac(e)&&xd(e)==Qe}function Ir(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=sl(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){s=n[i];var c=s[0],u=e[c],l=s[1];if(o&&s[2]){if(u===ne&&!(c in e))return!1}else{var d=new yn;if(r)var f=r(u,l,c,e,t,d);if(!(f===ne?$r(l,u,he|pe,r,d):f))return!1}}return!0}function Rr(e){return!(!ic(e)||Na(e))&&(tc(e)?Sl:Wt).test(Za(e))}function Lr(e){return ac(e)&&cr(e)==tt}function jr(e){return ac(e)&&xd(e)==nt}function Dr(e){return ac(e)&&rc(e.length)&&!!Yn[cr(e)]}function Nr(e){return"function"==typeof e?e:null==e?Au:"object"==typeof e?mf(e)?Hr(e[0],e[1]):qr(e):Uu(e)}function Ur(e){if(!Ua(e))return Vl(e);var t=[];for(var n in sl(e))gl.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Mr(e){if(!ic(e))return Ha(e);var t=Ua(e),n=[];for(var r in e)("constructor"!=r||!t&&gl.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function Br(e,t){var n=-1,r=Ws(e)?nl(e.length):[];return pd(e,function(e,i,a){r[++n]=t(e,i,a)}),r}function qr(e){var t=wa(e);return 1==t.length&&t[0][2]?Fa(t[0][0],t[0][1]):function(n){return n===e||Ir(n,e,t)}}function Hr(e,t){return La(e)&&Ma(t)?Fa(Ka(e),t):function(n){var r=Nc(n,e);return r===ne&&r===t?Mc(n,e):$r(t,r,he|pe)}}function Vr(e,t,n,r,i){e!==t&&gd(t,function(a,o){if(ic(a))i||(i=new yn),zr(e,t,o,n,Vr,r,i);else{var s=r?r(Ya(e,o),a,o+"",e,t,i):ne;s===ne&&(s=a),Pn(e,o,s)}},Bc)}function zr(e,t,n,r,i,a,o){var s=Ya(e,n),c=Ya(t,n),u=o.get(c);if(u)return void Pn(e,n,u);var l=a?a(s,c,n+"",e,t,o):ne,d=l===ne;if(d){var f=mf(c),h=!f&&bf(c),p=!f&&!h&&Tf(c);l=c,f||h||p?mf(s)?l=s:Gs(s)?l=ji(s):h?(d=!1,l=Ci(c,!0)):p?(d=!1,l=Ai(c,!0)):l=[]:hc(c)||gf(c)?(l=s,gf(s)?l=Cc(s):ic(s)&&!tc(s)||(l=Pa(c))):d=!1}d&&(o.set(c,l),i(l,c,r,a,o),o.delete(c)),Pn(e,n,l)}function Wr(e,t){var n=e.length;if(n)return t+=t<0?n:0,Ia(t,n)?e[t]:ne}function Gr(e,t,n){var r=-1;return t=h(t.length?t:[Au],R(ba())),$(Br(e,function(e,n,i){return{criteria:h(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return Ii(e,t,n)})}function Yr(e,t){return Qr(e,t,function(t,n){return Mc(e,n)})}function Qr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=ar(e,o);n(s,o)&&ai(a,ki(o,e),s)}return a}function Xr(e){return function(t){return ar(t,e)}}function Jr(e,t,n,r){var i=r?k:S,a=-1,o=t.length,s=e;for(e===t&&(t=ji(t)),n&&(s=h(e,R(n)));++a<o;)for(var c=0,u=t[a],l=n?n(u):u;(c=i(s,l,c,r))>-1;)s!==e&&Al.call(s,c,1),Al.call(e,c,1);return e}function Kr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;Ia(i)?Al.call(e,i,1):vi(e,i)}}return e}function Zr(e,t){return e+Ml(Ql()*(t-e+1))}function ei(e,t,n,r){for(var i=-1,a=zl(Ul((t-e)/(n||1)),0),o=nl(a);a--;)o[r?a:++i]=e,e+=n;return o}function ti(e,t){var n="";if(!e||t<1||t>Re)return n;do{t%2&&(n+=e),(t=Ml(t/2))&&(e+=e)}while(t);return n}function ni(e,t){return Ad(za(e,t,Au),e+"")}function ri(e){return Cn(Zc(e))}function ii(e,t){var n=Zc(e);return Ja(n,Dn(t,0,n.length))}function ai(e,t,n,r){if(!ic(e))return e;t=ki(t,e);for(var i=-1,a=t.length,o=a-1,s=e;null!=s&&++i<a;){var c=Ka(t[i]),u=n;if(i!=o){var l=s[c];u=r?r(l,c,s):ne,u===ne&&(u=ic(l)?l:Ia(t[i+1])?[]:{})}$n(s,c,u),s=s[c]}return e}function oi(e){return Ja(Zc(e))}function si(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=nl(i);++r<i;)a[r]=e[r+t];return a}function ci(e,t){var n;return pd(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function ui(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=Ue){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!gc(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return li(e,t,Au,n)}function li(e,t,n,r){t=n(t);for(var i=0,a=null==e?0:e.length,o=t!==t,s=null===t,c=gc(t),u=t===ne;i<a;){var l=Ml((i+a)/2),d=n(e[l]),f=d!==ne,h=null===d,p=d===d,v=gc(d);if(o)var g=r||p;else g=u?p&&(r||f):s?p&&f&&(r||!h):c?p&&f&&!h&&(r||!v):!h&&!v&&(r?d<=t:d<t);g?i=l+1:a=l}return Wl(a,Ne)}function di(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!zs(s,c)){var c=s;a[i++]=0===o?0:o}}return a}function fi(e){return"number"==typeof e?e:gc(e)?je:+e}function hi(e){if("string"==typeof e)return e;if(mf(e))return h(e,hi)+"";if(gc(e))return fd?fd.call(e):"";var t=e+"";return"0"==t&&1/e==-Ie?"-0":t}function pi(e,t,n){var r=-1,i=d,a=e.length,o=!0,s=[],c=s;if(n)o=!1,i=f;else if(a>=ie){var u=t?null:Sd(e);if(u)return G(u);o=!1,i=j,c=new vn}else c=t?[]:s;e:for(;++r<a;){var l=e[r],h=t?t(l):l;if(l=n||0!==l?l:0,o&&h===h){for(var p=c.length;p--;)if(c[p]===h)continue e;t&&c.push(h),s.push(l)}else i(c,h,n)||(c!==s&&c.push(h),s.push(l))}return s}function vi(e,t){return t=ki(t,e),null==(e=Wa(e,t))||delete e[Ka(wo(t))]}function gi(e,t,n,r){return ai(e,t,n(ar(e,t)),r)}function mi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?si(e,r?0:a,r?a+1:i):si(e,r?a+1:0,r?i:a)}function yi(e,t){var n=e;return n instanceof y&&(n=n.value()),v(t,function(e,t){return t.func.apply(t.thisArg,p([e],t.args))},n)}function bi(e,t,n){var r=e.length;if(r<2)return r?pi(e[0]):[];for(var i=-1,a=nl(r);++i<r;)for(var o=e[i],s=-1;++s<r;)s!=i&&(a[i]=Hn(a[i]||o,e[s],t,n));return pi(Kn(a,1),t,n)}function _i(e,t,n){for(var r=-1,i=e.length,a=t.length,o={};++r<i;){var s=r<a?t[r]:ne;n(o,e[r],s)}return o}function wi(e){return Gs(e)?e:[]}function Si(e){return"function"==typeof e?e:Au}function ki(e,t){return mf(e)?e:La(e,t)?[e]:Od(Ec(e))}function Ti(e,t,n){var r=e.length;return n=n===ne?r:n,!t&&n>=r?e:si(e,t,n)}function Ci(e,t){if(t)return e.slice();var n=e.length,r=xl?xl(n):new e.constructor(n);return e.copy(r),r}function xi(e){var t=new e.constructor(e.byteLength);return new Cl(t).set(new Cl(e)),t}function Ei(e,t){var n=t?xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Pi(e){var t=new e.constructor(e.source,Ht.exec(e));return t.lastIndex=e.lastIndex,t}function $i(e){return dd?sl(dd.call(e)):{}}function Ai(e,t){var n=t?xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Oi(e,t){if(e!==t){var n=e!==ne,r=null===e,i=e===e,a=gc(e),o=t!==ne,s=null===t,c=t===t,u=gc(t);if(!s&&!u&&!a&&e>t||a&&o&&c&&!s&&!u||r&&o&&c||!n&&c||!i)return 1;if(!r&&!a&&!u&&e<t||u&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!c)return-1}return 0}function Ii(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var c=Oi(i[r],a[r]);if(c){if(r>=s)return c;return c*("desc"==n[r]?-1:1)}}return e.index-t.index}function Ri(e,t,n,r){for(var i=-1,a=e.length,o=n.length,s=-1,c=t.length,u=zl(a-o,0),l=nl(c+u),d=!r;++s<c;)l[s]=t[s];for(;++i<o;)(d||i<a)&&(l[n[i]]=e[i]);for(;u--;)l[s++]=e[i++];return l}function Li(e,t,n,r){for(var i=-1,a=e.length,o=-1,s=n.length,c=-1,u=t.length,l=zl(a-s,0),d=nl(l+u),f=!r;++i<l;)d[i]=e[i];for(var h=i;++c<u;)d[h+c]=t[c];for(;++o<s;)(f||i<a)&&(d[h+n[o]]=e[i++]);return d}function ji(e,t){var n=-1,r=e.length;for(t||(t=nl(r));++n<r;)t[n]=e[n];return t}function Di(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],c=r?r(n[s],e[s],s,n,e):ne;c===ne&&(c=e[s]),i?Ln(n,s,c):$n(n,s,c)}return n}function Ni(e,t){return Di(e,Td(e),t)}function Ui(e,t){return Di(e,Cd(e),t)}function Mi(e,t){return function(n,r){var i=mf(n)?o:On,a=t?t():{};return i(n,e,ba(r,2),a)}}function Fi(e){return ni(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:ne,o=i>2?n[2]:ne;for(a=e.length>3&&"function"==typeof a?(i--,a):ne,o&&Ra(n[0],n[1],o)&&(a=i<3?ne:a,i=1),t=sl(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}function Bi(e,t){return function(n,r){if(null==n)return n;if(!Ws(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=sl(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function qi(e){return function(t,n,r){for(var i=-1,a=sl(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(!1===n(a[c],c,a))break}return t}}function Hi(e,t,n){function r(){return(this&&this!==ir&&this instanceof r?a:e).apply(i?n:this,arguments)}var i=t&ve,a=Wi(e);return r}function Vi(e){return function(t){t=Ec(t);var n=B(t)?K(t):ne,r=n?n[0]:t.charAt(0),i=n?Ti(n,1).join(""):t.slice(1);return r[e]()+i}}function zi(e){return function(t){return v(Cu(au(t).replace(Fn,"")),e,"")}}function Wi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=hd(e.prototype),r=e.apply(n,t);return ic(r)?r:n}}function Gi(e,t,n){function r(){for(var o=arguments.length,s=nl(o),c=o,u=ya(r);c--;)s[c]=arguments[c];var l=o<3&&s[0]!==u&&s[o-1]!==u?[]:W(s,u);return(o-=l.length)<n?ia(e,t,Xi,r.placeholder,ne,s,l,ne,ne,n-o):a(this&&this!==ir&&this instanceof r?i:e,this,s)}var i=Wi(e);return r}function Yi(e){return function(t,n,r){var i=sl(t);if(!Ws(t)){var a=ba(n,3);t=Fc(t),n=function(e){return a(i[e],e,i)}}var o=e(t,n,r);return o>-1?i[a?t[o]:o]:ne}}function Qi(e){return pa(function(t){var n=t.length,r=n,a=i.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new ll(oe);if(a&&!s&&"wrapper"==ma(o))var s=new i([],!0)}for(r=s?r:n;++r<n;){o=t[r];var c=ma(o),u="wrapper"==c?kd(o):ne;s=u&&Da(u[0])&&u[1]==(Se|ye|_e|ke)&&!u[4].length&&1==u[9]?s[ma(u[0])].apply(s,u[3]):1==o.length&&Da(o)?s[c]():s.thru(o)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&mf(r))return s.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}})}function Xi(e,t,n,r,i,a,o,s,c,u){function l(){for(var m=arguments.length,y=nl(m),b=m;b--;)y[b]=arguments[b];if(p)var _=ya(l),w=U(y,_);if(r&&(y=Ri(y,r,i,p)),a&&(y=Li(y,a,o,p)),m-=w,p&&m<u){var S=W(y,_);return ia(e,t,Xi,l.placeholder,n,y,S,s,c,u-m)}var k=f?n:this,T=h?k[e]:e;return m=y.length,s?y=Ga(y,s):v&&m>1&&y.reverse(),d&&c<m&&(y.length=c),this&&this!==ir&&this instanceof l&&(T=g||Wi(T)),T.apply(k,y)}var d=t&Se,f=t&ve,h=t&ge,p=t&(ye|be),v=t&Te,g=h?ne:Wi(e);return l}function Ji(e,t){return function(n,r){return Tr(n,e,t(r),{})}}function Ki(e,t){return function(n,r){var i;if(n===ne&&r===ne)return t;if(n!==ne&&(i=n),r!==ne){if(i===ne)return r;"string"==typeof n||"string"==typeof r?(n=hi(n),r=hi(r)):(n=fi(n),r=fi(r)),i=e(n,r)}return i}}function Zi(e){return pa(function(t){return t=h(t,R(ba())),ni(function(n){var r=this;return e(t,function(e){return a(e,r,n)})})})}function ea(e,t){t=t===ne?" ":hi(t);var n=t.length;if(n<2)return n?ti(t,e):t;var r=ti(t,Ul(e/J(t)));return B(t)?Ti(K(r),0,e).join(""):r.slice(0,e)}function ta(e,t,n,r){function i(){for(var t=-1,c=arguments.length,u=-1,l=r.length,d=nl(l+c),f=this&&this!==ir&&this instanceof i?s:e;++u<l;)d[u]=r[u];for(;c--;)d[u++]=arguments[++t];return a(f,o?n:this,d)}var o=t&ve,s=Wi(e);return i}function na(e){return function(t,n,r){return r&&"number"!=typeof r&&Ra(t,n,r)&&(n=r=ne),t=wc(t),n===ne?(n=t,t=0):n=wc(n),r=r===ne?t<n?1:-1:wc(r),ei(t,n,r,e)}}function ra(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Tc(t),n=Tc(n)),e(t,n)}}function ia(e,t,n,r,i,a,o,s,c,u){var l=t&ye,d=l?o:ne,f=l?ne:o,h=l?a:ne,p=l?ne:a;t|=l?_e:we,(t&=~(l?we:_e))&me||(t&=~(ve|ge));var v=[e,t,i,h,d,p,f,s,c,u],g=n.apply(ne,v);return Da(e)&&Pd(g,v),g.placeholder=r,Qa(g,e,t)}function aa(e){var t=ol[e];return function(e,n){if(e=Tc(e),n=null==n?0:Wl(Sc(n),292)){var r=(Ec(e)+"e").split("e");return r=(Ec(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}function oa(e){return function(t){var n=xd(t);return n==Qe?V(t):n==nt?Y(t):I(t,e(t))}}function sa(e,t,n,r,i,a,o,s){var c=t&ge;if(!c&&"function"!=typeof e)throw new ll(oe);var u=r?r.length:0;if(u||(t&=~(_e|we),r=i=ne),o=o===ne?o:zl(Sc(o),0),s=s===ne?s:Sc(s),u-=i?i.length:0,t&we){var l=r,d=i;r=i=ne}var f=c?ne:kd(e),h=[e,t,n,r,i,l,d,a,o,s];if(f&&qa(h,f),e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],s=h[9]=h[9]===ne?c?0:e.length:zl(h[9]-u,0),!s&&t&(ye|be)&&(t&=~(ye|be)),t&&t!=ve)p=t==ye||t==be?Gi(e,t,s):t!=_e&&t!=(ve|_e)||i.length?Xi.apply(ne,h):ta(e,t,n,r);else var p=Hi(e,t,n);return Qa((f?yd:Pd)(p,h),e,t)}function ca(e,t,n,r){return e===ne||zs(e,hl[n])&&!gl.call(r,n)?t:e}function ua(e,t,n,r,i,a){return ic(e)&&ic(t)&&(a.set(t,e),Vr(e,t,ne,ua,a),a.delete(t)),e}function la(e){return hc(e)?ne:e}function da(e,t,n,r,i,a){var o=n&he,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var l=-1,d=!0,f=n&pe?new vn:ne;for(a.set(e,t),a.set(t,e);++l<s;){var h=e[l],p=t[l];if(r)var v=o?r(p,h,l,t,e,a):r(h,p,l,e,t,a);if(v!==ne){if(v)continue;d=!1;break}if(f){if(!m(t,function(e,t){if(!j(f,t)&&(h===e||i(h,e,n,r,a)))return f.push(t)})){d=!1;break}}else if(h!==p&&!i(h,p,n,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function fa(e,t,n,r,i,a,o){switch(n){case ut:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ct:return!(e.byteLength!=t.byteLength||!a(new Cl(e),new Cl(t)));case He:case Ve:case Xe:return zs(+e,+t);case We:return e.name==t.name&&e.message==t.message;case tt:case rt:return e==t+"";case Qe:var s=V;case nt:var c=r&he;if(s||(s=G),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=pe,o.set(e,t);var l=da(s(e),s(t),r,i,a,o);return o.delete(e),l;case it:if(dd)return dd.call(e)==dd.call(t)}return!1}function ha(e,t,n,r,i,a){var o=n&he,s=va(e),c=s.length;if(c!=va(t).length&&!o)return!1;for(var u=c;u--;){var l=s[u];if(!(o?l in t:gl.call(t,l)))return!1}var d=a.get(e);if(d&&a.get(t))return d==t;var f=!0;a.set(e,t),a.set(t,e);for(var h=o;++u<c;){l=s[u];var p=e[l],v=t[l];if(r)var g=o?r(v,p,l,t,e,a):r(p,v,l,e,t,a);if(!(g===ne?p===v||i(p,v,n,r,a):g)){f=!1;break}h||(h="constructor"==l)}if(f&&!h){var m=e.constructor,y=t.constructor;m!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(f=!1)}return a.delete(e),a.delete(t),f}function pa(e){return Ad(za(e,ne,ho),e+"")}function va(e){return or(e,Fc,Td)}function ga(e){return or(e,Bc,Cd)}function ma(e){for(var t=e.name+"",n=id[t],r=gl.call(id,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function ya(e){return(gl.call(n,"placeholder")?n:e).placeholder}function ba(){var e=n.iteratee||Ou;return e=e===Ou?Nr:e,arguments.length?e(arguments[0],arguments[1]):e}function _a(e,t){var n=e.__data__;return ja(t)?n["string"==typeof t?"string":"hash"]:n.map}function wa(e){for(var t=Fc(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ma(i)]}return t}function Sa(e,t){var n=F(e,t);return Rr(n)?n:ne}function ka(e){var t=gl.call(e,Rl),n=e[Rl];try{e[Rl]=ne;var r=!0}catch(e){}var i=bl.call(e);return r&&(t?e[Rl]=n:delete e[Rl]),i}function Ta(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Wl(t,e+o);break;case"takeRight":e=zl(e,t-o)}}return{start:e,end:t}}function Ca(e){var t=e.match(Ut);return t?t[1].split(Mt):[]}function xa(e,t,n){t=ki(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var o=Ka(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&rc(i)&&Ia(o,i)&&(mf(e)||gf(e))}function Ea(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&gl.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Pa(e){return"function"!=typeof e.constructor||Ua(e)?{}:hd(El(e))}function $a(e,t,n){var r=e.constructor;switch(t){case ct:return xi(e);case He:case Ve:return new r(+e);case ut:return Ei(e,n);case lt:case dt:case ft:case ht:case pt:case vt:case gt:case mt:case yt:return Ai(e,n);case Qe:return new r;case Xe:case rt:return new r(e);case tt:return Pi(e);case nt:return new r;case it:return $i(e)}}function Aa(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Nt,"{\n/* [wrapped with "+t+"] */\n")}function Oa(e){return mf(e)||gf(e)||!!(Ol&&e&&e[Ol])}function Ia(e,t){var n=typeof e;return!!(t=null==t?Re:t)&&("number"==n||"symbol"!=n&&Yt.test(e))&&e>-1&&e%1==0&&e<t}function Ra(e,t,n){if(!ic(n))return!1;var r=typeof t;return!!("number"==r?Ws(n)&&Ia(t,n.length):"string"==r&&t in n)&&zs(n[t],e)}function La(e,t){if(mf(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!gc(e))||(At.test(e)||!$t.test(e)||null!=t&&e in sl(t))}function ja(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Da(e){var t=ma(e),r=n[t];if("function"!=typeof r||!(t in y.prototype))return!1;if(e===r)return!0;var i=kd(r);return!!i&&e===i[0]}function Na(e){return!!yl&&yl in e}function Ua(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||hl)}function Ma(e){return e===e&&!ic(e)}function Fa(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==ne||e in sl(n)))}}function Ba(e){var t=Os(e,function(e){return n.size===ce&&n.clear(),e}),n=t.cache;return t}function qa(e,t){var n=e[1],r=t[1],i=n|r,a=i<(ve|ge|Se),o=r==Se&&n==ye||r==Se&&n==ke&&e[7].length<=t[8]||r==(Se|ke)&&t[7].length<=t[8]&&n==ye;if(!a&&!o)return e;r&ve&&(e[2]=t[2],i|=n&ve?0:me);var s=t[3];if(s){var c=e[3];e[3]=c?Ri(c,s,t[4]):s,e[4]=c?W(e[3],ue):t[4]}return s=t[5],s&&(c=e[5],e[5]=c?Li(c,s,t[6]):s,e[6]=c?W(e[5],ue):t[6]),s=t[7],s&&(e[7]=s),r&Se&&(e[8]=null==e[8]?t[8]:Wl(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Ha(e){var t=[];if(null!=e)for(var n in sl(e))t.push(n);return t}function Va(e){return bl.call(e)}function za(e,t,n){return t=zl(t===ne?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=zl(r.length-t,0),s=nl(o);++i<o;)s[i]=r[t+i];i=-1;for(var c=nl(t+1);++i<t;)c[i]=r[i];return c[t]=n(s),a(e,this,c)}}function Wa(e,t){return t.length<2?e:ar(e,si(t,0,-1))}function Ga(e,t){for(var n=e.length,r=Wl(t.length,n),i=ji(e);r--;){var a=t[r];e[r]=Ia(a,n)?i[a]:ne}return e}function Ya(e,t){if("__proto__"!=t)return e[t]}function Qa(e,t,n){var r=t+"";return Ad(e,Aa(r,eo(Ca(r),n)))}function Xa(e){var t=0,n=0;return function(){var r=Gl(),i=Pe-(r-n);if(n=r,i>0){if(++t>=Ee)return arguments[0]}else t=0;return e.apply(ne,arguments)}}function Ja(e,t){var n=-1,r=e.length,i=r-1;for(t=t===ne?r:t;++n<t;){var a=Zr(n,i),o=e[a];e[a]=e[n],e[n]=o}return e.length=t,e}function Ka(e){if("string"==typeof e||gc(e))return e;var t=e+"";return"0"==t&&1/e==-Ie?"-0":t}function Za(e){if(null!=e){try{return vl.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eo(e,t){return s(Me,function(n){var r="_."+n[0];t&n[1]&&!d(e,r)&&e.push(r)}),e.sort()}function to(e){if(e instanceof y)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=ji(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function no(e,t,n){t=(n?Ra(e,t,n):t===ne)?1:zl(Sc(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,a=0,o=nl(Ul(r/t));i<r;)o[a++]=si(e,i,i+=t);return o}function ro(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i}function io(){var e=arguments.length;if(!e)return[];for(var t=nl(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return p(mf(n)?ji(n):[n],Kn(t,1))}function ao(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ne?1:Sc(t),si(e,t<0?0:t,r)):[]}function oo(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ne?1:Sc(t),t=r-t,si(e,0,t<0?0:t)):[]}function so(e,t){return e&&e.length?mi(e,ba(t,3),!0,!0):[]}function co(e,t){return e&&e.length?mi(e,ba(t,3),!0):[]}function uo(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Ra(e,t,n)&&(n=0,r=i),Xn(e,t,n,r)):[]}function lo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Sc(n);return i<0&&(i=zl(r+i,0)),w(e,ba(t,3),i)}function fo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==ne&&(i=Sc(n),i=n<0?zl(r+i,0):Wl(i,r-1)),w(e,ba(t,3),i,!0)}function ho(e){return(null==e?0:e.length)?Kn(e,1):[]}function po(e){return(null==e?0:e.length)?Kn(e,Ie):[]}function vo(e,t){return(null==e?0:e.length)?(t=t===ne?1:Sc(t),Kn(e,t)):[]}function go(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function mo(e){return e&&e.length?e[0]:ne}function yo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Sc(n);return i<0&&(i=zl(r+i,0)),S(e,t,i)}function bo(e){return(null==e?0:e.length)?si(e,0,-1):[]}function _o(e,t){return null==e?"":Hl.call(e,t)}function wo(e){var t=null==e?0:e.length;return t?e[t-1]:ne}function So(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==ne&&(i=Sc(n),i=i<0?zl(r+i,0):Wl(i,r-1)),t===t?X(e,t,i):w(e,T,i,!0)}function ko(e,t){return e&&e.length?Wr(e,Sc(t)):ne}function To(e,t){return e&&e.length&&t&&t.length?Jr(e,t):e}function Co(e,t,n){return e&&e.length&&t&&t.length?Jr(e,t,ba(n,2)):e}function xo(e,t,n){return e&&e.length&&t&&t.length?Jr(e,t,ne,n):e}function Eo(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=ba(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Kr(e,i),n}function Po(e){return null==e?e:Xl.call(e)}function $o(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Ra(e,t,n)?(t=0,n=r):(t=null==t?0:Sc(t),n=n===ne?r:Sc(n)),si(e,t,n)):[]}function Ao(e,t){return ui(e,t)}function Oo(e,t,n){return li(e,t,ba(n,2))}function Io(e,t){var n=null==e?0:e.length;if(n){var r=ui(e,t);if(r<n&&zs(e[r],t))return r}return-1}function Ro(e,t){return ui(e,t,!0)}function Lo(e,t,n){return li(e,t,ba(n,2),!0)}function jo(e,t){if(null==e?0:e.length){var n=ui(e,t,!0)-1;if(zs(e[n],t))return n}return-1}function Do(e){return e&&e.length?di(e):[]}function No(e,t){return e&&e.length?di(e,ba(t,2)):[]}function Uo(e){var t=null==e?0:e.length;return t?si(e,1,t):[]}function Mo(e,t,n){return e&&e.length?(t=n||t===ne?1:Sc(t),si(e,0,t<0?0:t)):[]}function Fo(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ne?1:Sc(t),t=r-t,si(e,t<0?0:t,r)):[]}function Bo(e,t){return e&&e.length?mi(e,ba(t,3),!1,!0):[]}function qo(e,t){return e&&e.length?mi(e,ba(t,3)):[]}function Ho(e){return e&&e.length?pi(e):[]}function Vo(e,t){return e&&e.length?pi(e,ba(t,2)):[]}function zo(e,t){return t="function"==typeof t?t:ne,e&&e.length?pi(e,ne,t):[]}function Wo(e){if(!e||!e.length)return[];var t=0;return e=l(e,function(e){if(Gs(e))return t=zl(e.length,t),!0}),O(t,function(t){return h(e,x(t))})}function Go(e,t){if(!e||!e.length)return[];var n=Wo(e);return null==t?n:h(n,function(e){return a(t,ne,e)})}function Yo(e,t){return _i(e||[],t||[],$n)}function Qo(e,t){return _i(e||[],t||[],ai)}function Xo(e){var t=n(e);return t.__chain__=!0,t}function Jo(e,t){return t(e),e}function Ko(e,t){return t(e)}function Zo(){return Xo(this)}function es(){return new i(this.value(),this.__chain__)}function ts(){this.__values__===ne&&(this.__values__=_c(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?ne:this.__values__[this.__index__++]}}function ns(){return this}function rs(e){for(var t,n=this;n instanceof r;){var i=to(n);i.__index__=0,i.__values__=ne,t?a.__wrapped__=i:t=i;var a=i;n=n.__wrapped__}return a.__wrapped__=e,t}function is(){var e=this.__wrapped__;if(e instanceof y){var t=e;return this.__actions__.length&&(t=new y(this)),t=t.reverse(),t.__actions__.push({func:Ko,args:[Po],thisArg:ne}),new i(t,this.__chain__)}return this.thru(Po)}function as(){return yi(this.__wrapped__,this.__actions__)}function os(e,t,n){var r=mf(e)?u:Vn;return n&&Ra(e,t,n)&&(t=ne),r(e,ba(t,3))}function ss(e,t){return(mf(e)?l:Jn)(e,ba(t,3))}function cs(e,t){return Kn(ps(e,t),1)}function us(e,t){return Kn(ps(e,t),Ie)}function ls(e,t,n){return n=n===ne?1:Sc(n),Kn(ps(e,t),n)}function ds(e,t){return(mf(e)?s:pd)(e,ba(t,3))}function fs(e,t){return(mf(e)?c:vd)(e,ba(t,3))}function hs(e,t,n,r){e=Ws(e)?e:Zc(e),n=n&&!r?Sc(n):0;var i=e.length;return n<0&&(n=zl(i+n,0)),vc(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&S(e,t,n)>-1}function ps(e,t){return(mf(e)?h:Br)(e,ba(t,3))}function vs(e,t,n,r){return null==e?[]:(mf(t)||(t=null==t?[]:[t]),n=r?ne:n,mf(n)||(n=null==n?[]:[n]),Gr(e,t,n))}function gs(e,t,n){var r=mf(e)?v:P,i=arguments.length<3;return r(e,ba(t,4),n,i,pd)}function ms(e,t,n){var r=mf(e)?g:P,i=arguments.length<3;return r(e,ba(t,4),n,i,vd)}function ys(e,t){return(mf(e)?l:Jn)(e,Is(ba(t,3)))}function bs(e){return(mf(e)?Cn:ri)(e)}function _s(e,t,n){return t=(n?Ra(e,t,n):t===ne)?1:Sc(t),(mf(e)?xn:ii)(e,t)}function ws(e){return(mf(e)?En:oi)(e)}function Ss(e){if(null==e)return 0;if(Ws(e))return vc(e)?J(e):e.length;var t=xd(e);return t==Qe||t==nt?e.size:Ur(e).length}function ks(e,t,n){var r=mf(e)?m:ci;return n&&Ra(e,t,n)&&(t=ne),r(e,ba(t,3))}function Ts(e,t){if("function"!=typeof t)throw new ll(oe);return e=Sc(e),function(){if(--e<1)return t.apply(this,arguments)}}function Cs(e,t,n){return t=n?ne:t,t=e&&null==t?e.length:t,sa(e,Se,ne,ne,ne,ne,t)}function xs(e,t){var n;if("function"!=typeof t)throw new ll(oe);return e=Sc(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=ne),n}}function Es(e,t,n){t=n?ne:t;var r=sa(e,ye,ne,ne,ne,ne,ne,t);return r.placeholder=Es.placeholder,r}function Ps(e,t,n){t=n?ne:t;var r=sa(e,be,ne,ne,ne,ne,ne,t);return r.placeholder=Ps.placeholder,r}function $s(e,t,n){function r(t){var n=f,r=h;return f=h=ne,y=t,v=e.apply(r,n)}function i(e){return y=e,g=$d(s,t),b?r(e):v}function a(e){var n=e-m,r=e-y,i=t-n;return _?Wl(i,p-r):i}function o(e){var n=e-m,r=e-y;return m===ne||n>=t||n<0||_&&r>=p}function s(){var e=af();if(o(e))return c(e);g=$d(s,a(e))}function c(e){return g=ne,w&&f?r(e):(f=h=ne,v)}function u(){g!==ne&&wd(g),y=0,f=m=h=g=ne}function l(){return g===ne?v:c(af())}function d(){var e=af(),n=o(e);if(f=arguments,h=this,m=e,n){if(g===ne)return i(m);if(_)return g=$d(s,t),r(m)}return g===ne&&(g=$d(s,t)),v}var f,h,p,v,g,m,y=0,b=!1,_=!1,w=!0;if("function"!=typeof e)throw new ll(oe);return t=Tc(t)||0,ic(n)&&(b=!!n.leading,_="maxWait"in n,p=_?zl(Tc(n.maxWait)||0,t):p,w="trailing"in n?!!n.trailing:w),d.cancel=u,d.flush=l,d}function As(e){return sa(e,Te)}function Os(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ll(oe);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Os.Cache||un),n}function Is(e){if("function"!=typeof e)throw new ll(oe);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Rs(e){return xs(2,e)}function Ls(e,t){if("function"!=typeof e)throw new ll(oe);return t=t===ne?t:Sc(t),ni(e,t)}function js(e,t){if("function"!=typeof e)throw new ll(oe);return t=null==t?0:zl(Sc(t),0),ni(function(n){var r=n[t],i=Ti(n,0,t);return r&&p(i,r),a(e,this,i)})}function Ds(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ll(oe);return ic(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),$s(e,t,{leading:r,maxWait:t,trailing:i})}function Ns(e){return Cs(e,1)}function Us(e,t){return df(Si(t),e)}function Ms(){if(!arguments.length)return[];var e=arguments[0];return mf(e)?e:[e]}function Fs(e){return Nn(e,fe)}function Bs(e,t){return t="function"==typeof t?t:ne,Nn(e,fe,t)}function qs(e){return Nn(e,le|fe)}function Hs(e,t){return t="function"==typeof t?t:ne,Nn(e,le|fe,t)}function Vs(e,t){return null==t||Mn(e,t,Fc(t))}function zs(e,t){return e===t||e!==e&&t!==t}function Ws(e){return null!=e&&rc(e.length)&&!tc(e)}function Gs(e){return ac(e)&&Ws(e)}function Ys(e){return!0===e||!1===e||ac(e)&&cr(e)==He}function Qs(e){return ac(e)&&1===e.nodeType&&!hc(e)}function Xs(e){if(null==e)return!0;if(Ws(e)&&(mf(e)||"string"==typeof e||"function"==typeof e.splice||bf(e)||Tf(e)||gf(e)))return!e.length;var t=xd(e);if(t==Qe||t==nt)return!e.size;if(Ua(e))return!Ur(e).length;for(var n in e)if(gl.call(e,n))return!1;return!0}function Js(e,t){return $r(e,t)}function Ks(e,t,n){n="function"==typeof n?n:ne;var r=n?n(e,t):ne;return r===ne?$r(e,t,ne,n):!!r}function Zs(e){if(!ac(e))return!1;var t=cr(e);return t==We||t==ze||"string"==typeof e.message&&"string"==typeof e.name&&!hc(e)}function ec(e){return"number"==typeof e&&ql(e)}function tc(e){if(!ic(e))return!1;var t=cr(e);return t==Ge||t==Ye||t==qe||t==et}function nc(e){return"number"==typeof e&&e==Sc(e)}function rc(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Re}function ic(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ac(e){return null!=e&&"object"==typeof e}function oc(e,t){return e===t||Ir(e,t,wa(t))}function sc(e,t,n){return n="function"==typeof n?n:ne,Ir(e,t,wa(t),n)}function cc(e){return fc(e)&&e!=+e}function uc(e){if(Ed(e))throw new il(ae);return Rr(e)}function lc(e){return null===e}function dc(e){return null==e}function fc(e){return"number"==typeof e||ac(e)&&cr(e)==Xe}function hc(e){if(!ac(e)||cr(e)!=Ke)return!1;var t=El(e);if(null===t)return!0;var n=gl.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&vl.call(n)==_l}function pc(e){return nc(e)&&e>=-Re&&e<=Re}function vc(e){return"string"==typeof e||!mf(e)&&ac(e)&&cr(e)==rt}function gc(e){return"symbol"==typeof e||ac(e)&&cr(e)==it}function mc(e){return e===ne}function yc(e){return ac(e)&&xd(e)==ot}function bc(e){return ac(e)&&cr(e)==st}function _c(e){if(!e)return[];if(Ws(e))return vc(e)?K(e):ji(e);if(Il&&e[Il])return H(e[Il]());var t=xd(e);return(t==Qe?V:t==nt?G:Zc)(e)}function wc(e){if(!e)return 0===e?e:0;if((e=Tc(e))===Ie||e===-Ie){return(e<0?-1:1)*Le}return e===e?e:0}function Sc(e){var t=wc(e),n=t%1;return t===t?n?t-n:t:0}function kc(e){return e?Dn(Sc(e),0,De):0}function Tc(e){if("number"==typeof e)return e;if(gc(e))return je;if(ic(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ic(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Lt,"");var n=zt.test(e);return n||Gt.test(e)?tr(e.slice(2),n?2:8):Vt.test(e)?je:+e}function Cc(e){return Di(e,Bc(e))}function xc(e){return e?Dn(Sc(e),-Re,Re):0===e?e:0}function Ec(e){return null==e?"":hi(e)}function Pc(e,t){var n=hd(e);return null==t?n:In(n,t)}function $c(e,t){return _(e,ba(t,3),Zn)}function Ac(e,t){return _(e,ba(t,3),nr)}function Oc(e,t){return null==e?e:gd(e,ba(t,3),Bc)}function Ic(e,t){return null==e?e:md(e,ba(t,3),Bc)}function Rc(e,t){return e&&Zn(e,ba(t,3))}function Lc(e,t){return e&&nr(e,ba(t,3))}function jc(e){return null==e?[]:rr(e,Fc(e))}function Dc(e){return null==e?[]:rr(e,Bc(e))}function Nc(e,t,n){var r=null==e?ne:ar(e,t);return r===ne?n:r}function Uc(e,t){return null!=e&&xa(e,t,gr)}function Mc(e,t){return null!=e&&xa(e,t,_r)}function Fc(e){return Ws(e)?Tn(e):Ur(e)}function Bc(e){return Ws(e)?Tn(e,!0):Mr(e)}function qc(e,t){var n={};return t=ba(t,3),Zn(e,function(e,r,i){Ln(n,t(e,r,i),e)}),n}function Hc(e,t){var n={};return t=ba(t,3),Zn(e,function(e,r,i){Ln(n,r,t(e,r,i))}),n}function Vc(e,t){return zc(e,Is(ba(t)))}function zc(e,t){if(null==e)return{};var n=h(ga(e),function(e){return[e]});return t=ba(t),Qr(e,n,function(e,n){return t(e,n[0])})}function Wc(e,t,n){t=ki(t,e);var r=-1,i=t.length;for(i||(i=1,e=ne);++r<i;){var a=null==e?ne:e[Ka(t[r])];a===ne&&(r=i,a=n),e=tc(a)?a.call(e):a}return e}function Gc(e,t,n){return null==e?e:ai(e,t,n)}function Yc(e,t,n,r){return r="function"==typeof r?r:ne,null==e?e:ai(e,t,n,r)}function Qc(e,t,n){var r=mf(e),i=r||bf(e)||Tf(e);if(t=ba(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:ic(e)&&tc(a)?hd(El(e)):{}}return(i?s:Zn)(e,function(e,r,i){return t(n,e,r,i)}),n}function Xc(e,t){return null==e||vi(e,t)}function Jc(e,t,n){return null==e?e:gi(e,t,Si(n))}function Kc(e,t,n,r){return r="function"==typeof r?r:ne,null==e?e:gi(e,t,Si(n),r)}function Zc(e){return null==e?[]:L(e,Fc(e))}function eu(e){return null==e?[]:L(e,Bc(e))}function tu(e,t,n){return n===ne&&(n=t,t=ne),n!==ne&&(n=Tc(n),n=n===n?n:0),t!==ne&&(t=Tc(t),t=t===t?t:0),Dn(Tc(e),t,n)}function nu(e,t,n){return t=wc(t),n===ne?(n=t,t=0):n=wc(n),e=Tc(e),Sr(e,t,n)}function ru(e,t,n){if(n&&"boolean"!=typeof n&&Ra(e,t,n)&&(t=n=ne),n===ne&&("boolean"==typeof t?(n=t,t=ne):"boolean"==typeof e&&(n=e,e=ne)),e===ne&&t===ne?(e=0,t=1):(e=wc(e),t===ne?(t=e,e=0):t=wc(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Ql();return Wl(e+i*(t-e+er("1e-"+((i+"").length-1))),t)}return Zr(e,t)}function iu(e){return Xf(Ec(e).toLowerCase())}function au(e){return(e=Ec(e))&&e.replace(Qt,mr).replace(Bn,"")}function ou(e,t,n){e=Ec(e),t=hi(t);var r=e.length;n=n===ne?r:Dn(Sc(n),0,r);var i=n;return(n-=t.length)>=0&&e.slice(n,i)==t}function su(e){return e=Ec(e),e&&Ct.test(e)?e.replace(kt,yr):e}function cu(e){return e=Ec(e),e&&Rt.test(e)?e.replace(It,"\\$&"):e}function uu(e,t,n){e=Ec(e),t=Sc(t);var r=t?J(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return ea(Ml(i),n)+e+ea(Ul(i),n)}function lu(e,t,n){e=Ec(e),t=Sc(t);var r=t?J(e):0;return t&&r<t?e+ea(t-r,n):e}function du(e,t,n){e=Ec(e),t=Sc(t);var r=t?J(e):0;return t&&r<t?ea(t-r,n)+e:e}function fu(e,t,n){return n||null==t?t=0:t&&(t=+t),Yl(Ec(e).replace(jt,""),t||0)}function hu(e,t,n){return t=(n?Ra(e,t,n):t===ne)?1:Sc(t),ti(Ec(e),t)}function pu(){var e=arguments,t=Ec(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function vu(e,t,n){return n&&"number"!=typeof n&&Ra(e,t,n)&&(t=n=ne),(n=n===ne?De:n>>>0)?(e=Ec(e),e&&("string"==typeof t||null!=t&&!Sf(t))&&!(t=hi(t))&&B(e)?Ti(K(e),0,n):e.split(t,n)):[]}function gu(e,t,n){return e=Ec(e),n=null==n?0:Dn(Sc(n),0,e.length),t=hi(t),e.slice(n,n+t.length)==t}function mu(e,t,r){var i=n.templateSettings;r&&Ra(e,t,r)&&(t=ne),e=Ec(e),t=$f({},t,i,ca);var a,o,s=$f({},t.imports,i.imports,ca),c=Fc(s),u=L(s,c),l=0,d=t.interpolate||Xt,f="__p += '",h=cl((t.escape||Xt).source+"|"+d.source+"|"+(d===Pt?qt:Xt).source+"|"+(t.evaluate||Xt).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Gn+"]")+"\n";e.replace(h,function(t,n,r,i,s,c){return r||(r=i),f+=e.slice(l,c).replace(Jt,M),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t}),f+="';\n";var v=t.variable;v||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(bt,""):f).replace(_t,"$1").replace(wt,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Jf(function(){return al(c,p+"return "+f).apply(ne,u)});if(g.source=f,Zs(g))throw g;return g}function yu(e){return Ec(e).toLowerCase()}function bu(e){return Ec(e).toUpperCase()}function _u(e,t,n){if((e=Ec(e))&&(n||t===ne))return e.replace(Lt,"");if(!e||!(t=hi(t)))return e;var r=K(e),i=K(t);return Ti(r,D(r,i),N(r,i)+1).join("")}function wu(e,t,n){if((e=Ec(e))&&(n||t===ne))return e.replace(Dt,"");if(!e||!(t=hi(t)))return e;var r=K(e);return Ti(r,0,N(r,K(t))+1).join("")}function Su(e,t,n){if((e=Ec(e))&&(n||t===ne))return e.replace(jt,"");if(!e||!(t=hi(t)))return e;var r=K(e);return Ti(r,D(r,K(t))).join("")}function ku(e,t){var n=Ce,r=xe;if(ic(t)){var i="separator"in t?t.separator:i;n="length"in t?Sc(t.length):n,r="omission"in t?hi(t.omission):r}e=Ec(e);var a=e.length;if(B(e)){var o=K(e);a=o.length}if(n>=a)return e;var s=n-J(r);if(s<1)return r;var c=o?Ti(o,0,s).join(""):e.slice(0,s);if(i===ne)return c+r;if(o&&(s+=c.length-s),Sf(i)){if(e.slice(s).search(i)){var u,l=c;for(i.global||(i=cl(i.source,Ec(Ht.exec(i))+"g")),i.lastIndex=0;u=i.exec(l);)var d=u.index;c=c.slice(0,d===ne?s:d)}}else if(e.indexOf(hi(i),s)!=s){var f=c.lastIndexOf(i);f>-1&&(c=c.slice(0,f))}return c+r}function Tu(e){return e=Ec(e),e&&Tt.test(e)?e.replace(St,br):e}function Cu(e,t,n){return e=Ec(e),t=n?ne:t,t===ne?q(e)?te(e):b(e):e.match(t)||[]}function xu(e){var t=null==e?0:e.length,n=ba();return e=t?h(e,function(e){if("function"!=typeof e[1])throw new ll(oe);return[n(e[0]),e[1]]}):[],ni(function(n){for(var r=-1;++r<t;){var i=e[r];if(a(i[0],this,n))return a(i[1],this,n)}})}function Eu(e){return Un(Nn(e,le))}function Pu(e){return function(){return e}}function $u(e,t){return null==e||e!==e?t:e}function Au(e){return e}function Ou(e){return Nr("function"==typeof e?e:Nn(e,le))}function Iu(e){return qr(Nn(e,le))}function Ru(e,t){return Hr(e,Nn(t,le))}function Lu(e,t,n){var r=Fc(t),i=rr(t,r);null!=n||ic(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=rr(t,Fc(t)));var a=!(ic(n)&&"chain"in n&&!n.chain),o=tc(e);return s(i,function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=ji(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,p([this.value()],arguments))})}),e}function ju(){return ir._===this&&(ir._=wl),this}function Du(){}function Nu(e){return e=Sc(e),ni(function(t){return Wr(t,e)})}function Uu(e){return La(e)?x(Ka(e)):Xr(e)}function Mu(e){return function(t){return null==e?ne:ar(e,t)}}function Fu(){return[]}function Bu(){return!1}function qu(){return{}}function Hu(){return""}function Vu(){return!0}function zu(e,t){if((e=Sc(e))<1||e>Re)return[];var n=De,r=Wl(e,De);t=ba(t),e-=De;for(var i=O(r,t);++n<e;)t(n);return i}function Wu(e){return mf(e)?h(e,Ka):gc(e)?[e]:ji(Od(Ec(e)))}function Gu(e){var t=++ml;return Ec(e)+t}function Yu(e){return e&&e.length?zn(e,Au,ur):ne}function Qu(e,t){return e&&e.length?zn(e,ba(t,2),ur):ne}function Xu(e){return C(e,Au)}function Ju(e,t){return C(e,ba(t,2))}function Ku(e){return e&&e.length?zn(e,Au,Fr):ne}function Zu(e,t){return e&&e.length?zn(e,ba(t,2),Fr):ne}function el(e){return e&&e.length?A(e,Au):0}function tl(e,t){return e&&e.length?A(e,ba(t,2)):0}t=null==t?ir:wr.defaults(ir.Object(),t,wr.pick(ir,Wn));var nl=t.Array,rl=t.Date,il=t.Error,al=t.Function,ol=t.Math,sl=t.Object,cl=t.RegExp,ul=t.String,ll=t.TypeError,dl=nl.prototype,fl=al.prototype,hl=sl.prototype,pl=t["__core-js_shared__"],vl=fl.toString,gl=hl.hasOwnProperty,ml=0,yl=function(){var e=/[^.]+$/.exec(pl&&pl.keys&&pl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),bl=hl.toString,_l=vl.call(sl),wl=ir._,Sl=cl("^"+vl.call(gl).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kl=sr?t.Buffer:ne,Tl=t.Symbol,Cl=t.Uint8Array,xl=kl?kl.allocUnsafe:ne,El=z(sl.getPrototypeOf,sl),Pl=sl.create,$l=hl.propertyIsEnumerable,Al=dl.splice,Ol=Tl?Tl.isConcatSpreadable:ne,Il=Tl?Tl.iterator:ne,Rl=Tl?Tl.toStringTag:ne,Ll=function(){try{var e=Sa(sl,"defineProperty");return e({},"",{}),e}catch(e){}}(),jl=t.clearTimeout!==ir.clearTimeout&&t.clearTimeout,Dl=rl&&rl.now!==ir.Date.now&&rl.now,Nl=t.setTimeout!==ir.setTimeout&&t.setTimeout,Ul=ol.ceil,Ml=ol.floor,Fl=sl.getOwnPropertySymbols,Bl=kl?kl.isBuffer:ne,ql=t.isFinite,Hl=dl.join,Vl=z(sl.keys,sl),zl=ol.max,Wl=ol.min,Gl=rl.now,Yl=t.parseInt,Ql=ol.random,Xl=dl.reverse,Jl=Sa(t,"DataView"),Kl=Sa(t,"Map"),Zl=Sa(t,"Promise"),ed=Sa(t,"Set"),td=Sa(t,"WeakMap"),nd=Sa(sl,"create"),rd=td&&new td,id={},ad=Za(Jl),od=Za(Kl),sd=Za(Zl),cd=Za(ed),ud=Za(td),ld=Tl?Tl.prototype:ne,dd=ld?ld.valueOf:ne,fd=ld?ld.toString:ne,hd=function(){function e(){}return function(t){if(!ic(t))return{};if(Pl)return Pl(t);e.prototype=t;var n=new e;return e.prototype=ne,n}}();n.templateSettings={escape:xt,evaluate:Et,interpolate:Pt,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=hd(r.prototype),i.prototype.constructor=i,y.prototype=hd(r.prototype),y.prototype.constructor=y,ee.prototype.clear=Ft,ee.prototype.delete=Kt,ee.prototype.get=Zt,ee.prototype.has=en,ee.prototype.set=tn,nn.prototype.clear=rn,nn.prototype.delete=an,nn.prototype.get=on,nn.prototype.has=sn,nn.prototype.set=cn,un.prototype.clear=ln,un.prototype.delete=dn,un.prototype.get=fn,un.prototype.has=hn,un.prototype.set=pn,vn.prototype.add=vn.prototype.push=gn,vn.prototype.has=mn,yn.prototype.clear=bn,yn.prototype.delete=_n,yn.prototype.get=wn,yn.prototype.has=Sn,yn.prototype.set=kn;var pd=Bi(Zn),vd=Bi(nr,!0),gd=qi(),md=qi(!0),yd=rd?function(e,t){return rd.set(e,t),e}:Au,bd=Ll?function(e,t){return Ll(e,"toString",{configurable:!0,enumerable:!1,value:Pu(t),writable:!0})}:Au,_d=ni,wd=jl||function(e){return ir.clearTimeout(e)},Sd=ed&&1/G(new ed([,-0]))[1]==Ie?function(e){return new ed(e)}:Du,kd=rd?function(e){return rd.get(e)}:Du,Td=Fl?function(e){return null==e?[]:(e=sl(e),l(Fl(e),function(t){return $l.call(e,t)}))}:Fu,Cd=Fl?function(e){for(var t=[];e;)p(t,Td(e)),e=El(e);return t}:Fu,xd=cr;(Jl&&xd(new Jl(new ArrayBuffer(1)))!=ut||Kl&&xd(new Kl)!=Qe||Zl&&xd(Zl.resolve())!=Ze||ed&&xd(new ed)!=nt||td&&xd(new td)!=ot)&&(xd=function(e){var t=cr(e),n=t==Ke?e.constructor:ne,r=n?Za(n):"";if(r)switch(r){case ad:return ut;case od:return Qe;case sd:return Ze;case cd:return nt;case ud:return ot}return t});var Ed=pl?tc:Bu,Pd=Xa(yd),$d=Nl||function(e,t){return ir.setTimeout(e,t)},Ad=Xa(bd),Od=Ba(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ot,function(e,n,r,i){t.push(r?i.replace(Bt,"$1"):n||e)}),t}),Id=ni(function(e,t){return Gs(e)?Hn(e,Kn(t,1,Gs,!0)):[]}),Rd=ni(function(e,t){var n=wo(t);return Gs(n)&&(n=ne),Gs(e)?Hn(e,Kn(t,1,Gs,!0),ba(n,2)):[]}),Ld=ni(function(e,t){var n=wo(t);return Gs(n)&&(n=ne),Gs(e)?Hn(e,Kn(t,1,Gs,!0),ne,n):[]}),jd=ni(function(e){var t=h(e,wi);return t.length&&t[0]===e[0]?kr(t):[]}),Dd=ni(function(e){var t=wo(e),n=h(e,wi);return t===wo(n)?t=ne:n.pop(),n.length&&n[0]===e[0]?kr(n,ba(t,2)):[]}),Nd=ni(function(e){var t=wo(e),n=h(e,wi);return t="function"==typeof t?t:ne,t&&n.pop(),n.length&&n[0]===e[0]?kr(n,ne,t):[]}),Ud=ni(To),Md=pa(function(e,t){var n=null==e?0:e.length,r=jn(e,t);return Kr(e,h(t,function(e){return Ia(e,n)?+e:e}).sort(Oi)),r}),Fd=ni(function(e){return pi(Kn(e,1,Gs,!0))}),Bd=ni(function(e){var t=wo(e);return Gs(t)&&(t=ne),pi(Kn(e,1,Gs,!0),ba(t,2))}),qd=ni(function(e){var t=wo(e);return t="function"==typeof t?t:ne,pi(Kn(e,1,Gs,!0),ne,t)}),Hd=ni(function(e,t){return Gs(e)?Hn(e,t):[]}),Vd=ni(function(e){return bi(l(e,Gs))}),zd=ni(function(e){var t=wo(e);return Gs(t)&&(t=ne),bi(l(e,Gs),ba(t,2))}),Wd=ni(function(e){var t=wo(e);return t="function"==typeof t?t:ne,bi(l(e,Gs),ne,t)}),Gd=ni(Wo),Yd=ni(function(e){var t=e.length,n=t>1?e[t-1]:ne;return n="function"==typeof n?(e.pop(),n):ne,Go(e,n)}),Qd=pa(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return jn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof y&&Ia(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Ko,args:[a],thisArg:ne}),new i(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(ne),e})):this.thru(a)}),Xd=Mi(function(e,t,n){gl.call(e,n)?++e[n]:Ln(e,n,1)}),Jd=Yi(lo),Kd=Yi(fo),Zd=Mi(function(e,t,n){gl.call(e,n)?e[n].push(t):Ln(e,n,[t])}),ef=ni(function(e,t,n){var r=-1,i="function"==typeof t,o=Ws(e)?nl(e.length):[];return pd(e,function(e){o[++r]=i?a(t,e,n):Cr(e,t,n)}),o}),tf=Mi(function(e,t,n){Ln(e,n,t)}),nf=Mi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),rf=ni(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Ra(e,t[0],t[1])?t=[]:n>2&&Ra(t[0],t[1],t[2])&&(t=[t[0]]),Gr(e,Kn(t,1),[])}),af=Dl||function(){return ir.Date.now()},of=ni(function(e,t,n){var r=ve;if(n.length){var i=W(n,ya(of));r|=_e}return sa(e,r,t,n,i)}),sf=ni(function(e,t,n){var r=ve|ge;if(n.length){var i=W(n,ya(sf));r|=_e}return sa(t,r,e,n,i)}),cf=ni(function(e,t){return qn(e,1,t)}),uf=ni(function(e,t,n){return qn(e,Tc(t)||0,n)});Os.Cache=un;var lf=_d(function(e,t){t=1==t.length&&mf(t[0])?h(t[0],R(ba())):h(Kn(t,1),R(ba()));var n=t.length;return ni(function(r){for(var i=-1,o=Wl(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return a(e,this,r)})}),df=ni(function(e,t){var n=W(t,ya(df));return sa(e,_e,ne,t,n)}),ff=ni(function(e,t){var n=W(t,ya(ff));return sa(e,we,ne,t,n)}),hf=pa(function(e,t){return sa(e,ke,ne,ne,ne,t)}),pf=ra(ur),vf=ra(function(e,t){return e>=t}),gf=xr(function(){return arguments}())?xr:function(e){return ac(e)&&gl.call(e,"callee")&&!$l.call(e,"callee")},mf=nl.isArray,yf=lr?R(lr):Er,bf=Bl||Bu,_f=dr?R(dr):Pr,wf=fr?R(fr):Or,Sf=hr?R(hr):Lr,kf=pr?R(pr):jr,Tf=vr?R(vr):Dr,Cf=ra(Fr),xf=ra(function(e,t){return e<=t}),Ef=Fi(function(e,t){if(Ua(t)||Ws(t))return void Di(t,Fc(t),e);for(var n in t)gl.call(t,n)&&$n(e,n,t[n])}),Pf=Fi(function(e,t){Di(t,Bc(t),e)}),$f=Fi(function(e,t,n,r){Di(t,Bc(t),e,r)}),Af=Fi(function(e,t,n,r){Di(t,Fc(t),e,r)}),Of=pa(jn),If=ni(function(e,t){e=sl(e);var n=-1,r=t.length,i=r>2?t[2]:ne;for(i&&Ra(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],o=Bc(a),s=-1,c=o.length;++s<c;){var u=o[s],l=e[u];(l===ne||zs(l,hl[u])&&!gl.call(e,u))&&(e[u]=a[u])}return e}),Rf=ni(function(e){return e.push(ne,ua),a(Uf,ne,e)}),Lf=Ji(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=bl.call(t)),e[t]=n},Pu(Au)),jf=Ji(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=bl.call(t)),gl.call(e,t)?e[t].push(n):e[t]=[n]},ba),Df=ni(Cr),Nf=Fi(function(e,t,n){Vr(e,t,n)}),Uf=Fi(function(e,t,n,r){Vr(e,t,n,r)}),Mf=pa(function(e,t){var n={};if(null==e)return n;var r=!1;t=h(t,function(t){return t=ki(t,e),r||(r=t.length>1),t}),Di(e,ga(e),n),r&&(n=Nn(n,le|de|fe,la));for(var i=t.length;i--;)vi(n,t[i]);return n}),Ff=pa(function(e,t){return null==e?{}:Yr(e,t)}),Bf=oa(Fc),qf=oa(Bc),Hf=zi(function(e,t,n){return t=t.toLowerCase(),e+(n?iu(t):t)}),Vf=zi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),zf=zi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Wf=Vi("toLowerCase"),Gf=zi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Yf=zi(function(e,t,n){return e+(n?" ":"")+Xf(t)}),Qf=zi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Xf=Vi("toUpperCase"),Jf=ni(function(e,t){try{return a(e,ne,t)}catch(e){return Zs(e)?e:new il(e)}}),Kf=pa(function(e,t){return s(t,function(t){t=Ka(t),Ln(e,t,of(e[t],e))}),e}),Zf=Qi(),eh=Qi(!0),th=ni(function(e,t){return function(n){return Cr(n,e,t)}}),nh=ni(function(e,t){return function(n){return Cr(e,n,t)}}),rh=Zi(h),ih=Zi(u),ah=Zi(m),oh=na(),sh=na(!0),ch=Ki(function(e,t){return e+t},0),uh=aa("ceil"),lh=Ki(function(e,t){return e/t},1),dh=aa("floor"),fh=Ki(function(e,t){return e*t},1),hh=aa("round"),ph=Ki(function(e,t){return e-t},0);return n.after=Ts,n.ary=Cs,n.assign=Ef,n.assignIn=Pf,n.assignInWith=$f,n.assignWith=Af,n.at=Of,n.before=xs,n.bind=of,n.bindAll=Kf,n.bindKey=sf,n.castArray=Ms,n.chain=Xo,n.chunk=no,n.compact=ro,n.concat=io,n.cond=xu,n.conforms=Eu,n.constant=Pu,n.countBy=Xd,n.create=Pc,n.curry=Es,n.curryRight=Ps,n.debounce=$s,n.defaults=If,n.defaultsDeep=Rf,n.defer=cf,n.delay=uf,n.difference=Id,n.differenceBy=Rd,n.differenceWith=Ld,n.drop=ao,n.dropRight=oo,n.dropRightWhile=so,n.dropWhile=co,n.fill=uo,n.filter=ss,n.flatMap=cs,n.flatMapDeep=us,n.flatMapDepth=ls,n.flatten=ho,n.flattenDeep=po,n.flattenDepth=vo,n.flip=As,n.flow=Zf,n.flowRight=eh,n.fromPairs=go,n.functions=jc,n.functionsIn=Dc,n.groupBy=Zd,n.initial=bo,n.intersection=jd,n.intersectionBy=Dd,n.intersectionWith=Nd,n.invert=Lf,n.invertBy=jf,n.invokeMap=ef,n.iteratee=Ou,n.keyBy=tf,n.keys=Fc,n.keysIn=Bc,n.map=ps,n.mapKeys=qc,n.mapValues=Hc,n.matches=Iu,n.matchesProperty=Ru,n.memoize=Os,n.merge=Nf,n.mergeWith=Uf,n.method=th,n.methodOf=nh,n.mixin=Lu,n.negate=Is,n.nthArg=Nu,n.omit=Mf,n.omitBy=Vc,n.once=Rs,n.orderBy=vs,n.over=rh,n.overArgs=lf,n.overEvery=ih,n.overSome=ah,n.partial=df,n.partialRight=ff,n.partition=nf,n.pick=Ff,n.pickBy=zc,n.property=Uu,n.propertyOf=Mu,n.pull=Ud,n.pullAll=To,n.pullAllBy=Co,n.pullAllWith=xo,n.pullAt=Md,n.range=oh,n.rangeRight=sh,n.rearg=hf,n.reject=ys,n.remove=Eo,n.rest=Ls,n.reverse=Po,n.sampleSize=_s,n.set=Gc,n.setWith=Yc,n.shuffle=ws,n.slice=$o,n.sortBy=rf,n.sortedUniq=Do,n.sortedUniqBy=No,n.split=vu,n.spread=js,n.tail=Uo,n.take=Mo,n.takeRight=Fo,n.takeRightWhile=Bo,n.takeWhile=qo,n.tap=Jo,n.throttle=Ds,n.thru=Ko,n.toArray=_c,n.toPairs=Bf,n.toPairsIn=qf,n.toPath=Wu,n.toPlainObject=Cc,n.transform=Qc,n.unary=Ns,n.union=Fd,n.unionBy=Bd,n.unionWith=qd,n.uniq=Ho,n.uniqBy=Vo,n.uniqWith=zo,n.unset=Xc,n.unzip=Wo,n.unzipWith=Go,n.update=Jc,n.updateWith=Kc,n.values=Zc,n.valuesIn=eu,n.without=Hd,n.words=Cu,n.wrap=Us,n.xor=Vd,n.xorBy=zd,n.xorWith=Wd,n.zip=Gd,n.zipObject=Yo,n.zipObjectDeep=Qo,n.zipWith=Yd,n.entries=Bf,n.entriesIn=qf,n.extend=Pf,n.extendWith=$f,Lu(n,n),n.add=ch,n.attempt=Jf,n.camelCase=Hf,n.capitalize=iu,n.ceil=uh,n.clamp=tu,n.clone=Fs,n.cloneDeep=qs,n.cloneDeepWith=Hs,n.cloneWith=Bs,n.conformsTo=Vs,n.deburr=au,n.defaultTo=$u,n.divide=lh,n.endsWith=ou,n.eq=zs,n.escape=su,n.escapeRegExp=cu,n.every=os,n.find=Jd,n.findIndex=lo,n.findKey=$c,n.findLast=Kd,n.findLastIndex=fo,n.findLastKey=Ac,n.floor=dh,n.forEach=ds,n.forEachRight=fs,n.forIn=Oc,n.forInRight=Ic,n.forOwn=Rc,n.forOwnRight=Lc,n.get=Nc,n.gt=pf,n.gte=vf,n.has=Uc,n.hasIn=Mc,n.head=mo,n.identity=Au,n.includes=hs,n.indexOf=yo,n.inRange=nu,n.invoke=Df,n.isArguments=gf,n.isArray=mf,n.isArrayBuffer=yf,n.isArrayLike=Ws,n.isArrayLikeObject=Gs,n.isBoolean=Ys,n.isBuffer=bf,n.isDate=_f,n.isElement=Qs,n.isEmpty=Xs,n.isEqual=Js,n.isEqualWith=Ks,n.isError=Zs,n.isFinite=ec,n.isFunction=tc,n.isInteger=nc,n.isLength=rc,n.isMap=wf,n.isMatch=oc,n.isMatchWith=sc,n.isNaN=cc,n.isNative=uc,n.isNil=dc,n.isNull=lc,n.isNumber=fc,n.isObject=ic,n.isObjectLike=ac,n.isPlainObject=hc,n.isRegExp=Sf,n.isSafeInteger=pc,n.isSet=kf,n.isString=vc,n.isSymbol=gc,n.isTypedArray=Tf,n.isUndefined=mc,n.isWeakMap=yc,n.isWeakSet=bc,n.join=_o,n.kebabCase=Vf,n.last=wo,n.lastIndexOf=So,n.lowerCase=zf,n.lowerFirst=Wf,n.lt=Cf,n.lte=xf,n.max=Yu,n.maxBy=Qu,n.mean=Xu,n.meanBy=Ju,n.min=Ku,n.minBy=Zu,n.stubArray=Fu,n.stubFalse=Bu,n.stubObject=qu,n.stubString=Hu,n.stubTrue=Vu,n.multiply=fh,n.nth=ko,n.noConflict=ju,n.noop=Du,n.now=af,n.pad=uu,n.padEnd=lu,n.padStart=du,n.parseInt=fu,n.random=ru,n.reduce=gs,n.reduceRight=ms,n.repeat=hu,n.replace=pu,n.result=Wc,n.round=hh,n.runInContext=e,n.sample=bs,n.size=Ss,n.snakeCase=Gf,n.some=ks,n.sortedIndex=Ao,n.sortedIndexBy=Oo,n.sortedIndexOf=Io,n.sortedLastIndex=Ro,n.sortedLastIndexBy=Lo,n.sortedLastIndexOf=jo,n.startCase=Yf,n.startsWith=gu,n.subtract=ph,n.sum=el,n.sumBy=tl,n.template=mu,n.times=zu,n.toFinite=wc,n.toInteger=Sc,n.toLength=kc,n.toLower=yu,n.toNumber=Tc,n.toSafeInteger=xc,n.toString=Ec,n.toUpper=bu,n.trim=_u,n.trimEnd=wu,n.trimStart=Su,n.truncate=ku,n.unescape=Tu,n.uniqueId=Gu,n.upperCase=Qf,n.upperFirst=Xf,n.each=ds,n.eachRight=fs,n.first=mo,Lu(n,function(){var e={};return Zn(n,function(t,r){gl.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION=re,s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),s(["drop","take"],function(e,t){y.prototype[e]=function(n){n=n===ne?1:zl(Sc(n),0);var r=this.__filtered__&&!t?new y(this):this.clone();return r.__filtered__?r.__takeCount__=Wl(n,r.__takeCount__):r.__views__.push({size:Wl(n,De),type:e+(r.__dir__<0?"Right":"")}),r},y.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),s(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==$e||n==Oe;y.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ba(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),s(["head","last"],function(e,t){var n="take"+(t?"Right":"");y.prototype[e]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");y.prototype[e]=function(){return this.__filtered__?new y(this):this[n](1)}}),y.prototype.compact=function(){return this.filter(Au)},y.prototype.find=function(e){return this.filter(e).head()},y.prototype.findLast=function(e){return this.reverse().find(e)},y.prototype.invokeMap=ni(function(e,t){return"function"==typeof e?new y(this):this.map(function(n){return Cr(n,e,t)})}),y.prototype.reject=function(e){return this.filter(Is(ba(e)))},y.prototype.slice=function(e,t){e=Sc(e);var n=this;return n.__filtered__&&(e>0||t<0)?new y(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==ne&&(t=Sc(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},y.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},y.prototype.toArray=function(){return this.take(De)},Zn(y.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),o=n[a?"take"+("last"==t?"Right":""):t],s=a||/^find/.test(t);o&&(n.prototype[t]=function(){var t=this.__wrapped__,c=a?[1]:arguments,u=t instanceof y,l=c[0],d=u||mf(t),f=function(e){var t=o.apply(n,p([e],c));return a&&h?t[0]:t};d&&r&&"function"==typeof l&&1!=l.length&&(u=d=!1);var h=this.__chain__,v=!!this.__actions__.length,g=s&&!h,m=u&&!v;if(!s&&d){t=m?t:new y(this);var b=e.apply(t,c);return b.__actions__.push({func:Ko,args:[f],thisArg:ne}),new i(b,h)}return g&&m?e.apply(this,c):(b=this.thru(f),g?a?b.value()[0]:b.value():b)})}),s(["pop","push","shift","sort","splice","unshift"],function(e){var t=dl[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(mf(n)?n:[],e)}return this[r](function(n){return t.apply(mf(n)?n:[],e)})}}),Zn(y.prototype,function(e,t){var r=n[t];if(r){var i=r.name+"";(id[i]||(id[i]=[])).push({name:t,func:r})}}),id[Xi(ne,ge).name]=[{name:"wrapper",func:ne}],y.prototype.clone=E,y.prototype.reverse=Q,y.prototype.value=Z,n.prototype.at=Qd,n.prototype.chain=Zo,n.prototype.commit=es,n.prototype.next=ts,n.prototype.plant=rs,n.prototype.reverse=is,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=as,n.prototype.first=n.prototype.head,Il&&(n.prototype[Il]=ns),n},wr=_r();ir._=wr,(i=function(){return wr}.call(t,n,t,r))!==ne&&(r.exports=i)}).call(this)}).call(t,n(6),n(30)(e))},function(e,t,n){"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},function(e,t,n){"use strict";function r(e,t,n){return new i(e,t,n)}var i=n(633),a=n(149),o=n(250);r.version=n(252),r.AlgoliaSearchHelper=i,r.SearchParameters=a,r.SearchResults=o,r.url=n(150),e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(566),a=n(567),o=n(568),s=n(569),c=n(570);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t,n){function r(e){var t=this.__data__=new i(e);this.size=t.size}var i=n(82),a=n(588),o=n(589),s=n(590),c=n(591),u=n(592);r.prototype.clear=a,r.prototype.delete=o,r.prototype.get=s,r.prototype.has=c,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}var i=n(40);e.exports=r},function(e,t,n){var r=n(10),i=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},function(e,t,n){var r=n(52),i=n(537),a=i(r);e.exports=a},function(e,t,n){function r(e,t){t=i(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[a(t[n++])];return n&&n==r?e:void 0}var i=n(36),a=n(39);e.exports=r},function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},function(e,t,n){function r(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=i(e.prototype),r=e.apply(n,t);return a(r)?r:n}}var i=n(85),a=n(10);e.exports=r},function(e,t,n){function r(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}var i=n(563);e.exports=r},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}var r=Object.prototype;e.exports=n},function(e,t,n){var r=n(31),i=r(Object,"create");e.exports=i},function(e,t,n){var r=n(541),i=n(236),a=r(i);e.exports=a},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=null==n?0:a(n);return s<0&&(s=o(r+s,0)),i(e,t,s)}var i=n(53),a=n(65),o=Math.max;e.exports=r},function(e,t,n){var r=n(505),i=n(54),a=n(140),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";function r(e,t){var r=n(45),i=this;"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):i.stack=(new Error).stack||"Cannot get a stacktrace, browser is too old",this.name="AlgoliaSearchError",this.message=e||"Unknown error",t&&r(t,function(e,t){i[t]=e})}function i(e,t){function n(){var n=Array.prototype.slice.call(arguments,0);"string"!=typeof n[0]&&n.unshift(t),r.apply(this,n),this.name="AlgoliaSearch"+e+"Error"}return a(n,r),n}var a=n(70);a(r,Error),e.exports={AlgoliaSearchError:r,UnparsableJSON:i("UnparsableJSON","Could not parse the incoming response as JSON, see err.more for details"),RequestTimeout:i("RequestTimeout","Request timedout before getting a response"),Network:i("Network","Network issue, see err.more for details"),JSONPScriptFail:i("JSONPScriptFail","<script> was loaded but did not call our provided callback"),JSONPScriptError:i("JSONPScriptError","<script> unable to load due to an `error` event on it"),Unknown:i("Unknown","Unknown error occured")}},function(e,t,n){var r=n(45);e.exports=function(e,t){var n=[];return r(e,function(r,i){n.push(t(r,i,e))}),n}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return n.i(u.a)(e,f),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.attributeName,a=n.min,s=n.max,u=n.precision,h=void 0===u?2:u;if(!i)throw new Error(f);var p=c()(a),v=c()(s),g=function(e){return Number(Number(e).toFixed(h))},m={from:function(e){return e},to:function(e){return g(e).toLocaleString()}};return{_getCurrentRange:function(e){var t=Math.pow(10,h),n=void 0;n=p?a:c()(e.min)?e.min:0;var r=void 0;return r=v?s:c()(e.max)?e.max:0,{min:Math.floor(n*t)/t,max:Math.ceil(r*t)/t}},_getCurrentRefinement:function(e){var t=e.getNumericRefinement(i,">=")||[],n=d(t,1),r=n[0],a=e.getNumericRefinement(i,"<=")||[],o=d(a,1),s=o[0];return[c()(r)?r:-1/0,c()(s)?s:1/0]},_refine:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=d(n,2),o=r[0],u=r[1],l=t.min,f=t.max,h=e.getNumericRefinement(i,">=")||[],m=d(h,1),y=m[0],b=e.getNumericRefinement(i,"<=")||[],_=d(b,1),w=_[0],S=void 0===o||""===o,k=void 0===u||""===u,T=S?void 0:parseFloat(o),C=k?void 0:parseFloat(u),x=void 0;x=p||l!==T?p&&S?a:T:void 0;var E=void 0;E=v||f!==C?v&&k?s:C:void 0;var P=void 0===x,$=c()(x),A=c()(l),O=A&&l<=x,I=P||$&&(!A||O),R=void 0===E,L=c()(E),j=c()(f),D=j&&f>=E,N=R||L&&(!j||D),U=y!==x,M=w!==E;(U||M)&&I&&N&&(e.clearRefinements(i),$&&e.addNumericRefinement(i,">=",g(x)),L&&e.addNumericRefinement(i,"<=",g(E)),e.search())}},getConfiguration:function(e){var t={disjunctiveFacets:[i]},n=p||v,o=e&&e.numericRefinements&&void 0!==e.numericRefinements[i],u=c()(a),l=c()(s),d=u&&l?a<s:u||l;return n&&!o&&d&&(t.numericRefinements=r({},i,{}),p&&(t.numericRefinements[i][">="]=[a]),v&&(t.numericRefinements[i]["<="]=[s])),t},init:function(t){var r=t.helper,i=t.instantSearchInstance,a={},o=this._getCurrentRange(a),s=this._getCurrentRefinement(r);e({refine:this._refine(r,{}),format:m,range:o,widgetParams:l({},n,{precision:h}),start:s,instantSearchInstance:i},!0)},render:function(t){var r=t.results,a=t.helper,s=t.instantSearchInstance,c=r.disjunctiveFacets||[],u=o()(c,{name:i}),d=u&&u.stats||{},f=this._getCurrentRange(d),p=this._getCurrentRefinement(a);e({refine:this._refine(a,f),format:m,range:f,widgetParams:l({},n,{precision:h}),start:p,instantSearchInstance:s},!1)},dispose:function(e){var n=e.state;return t(),n.removeNumericRefinement(i).removeDisjunctiveFacet(i)},getWidgetState:function(e,t){var n=t.searchParameters,a=n.getNumericRefinements(i),o=a[">="],s=void 0===o?"":o,c=a["<="],u=void 0===c?"":c;return""===s&&""===u||e&&e.range&&e.range[i]===s+":"+u?e:l({},e,{range:l({},e.range,r({},i,s+":"+u))})},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n&&n.range&&n.range[i];if(!r||-1===r.indexOf(":"))return e;var a=e.getNumericRefinements(i),o=a[">="],s=void 0===o?[NaN]:o,u=a["<="],l=void 0===u?[NaN]:u,f=e.clearRefinements(i),h=r.split(":").map(parseFloat),p=d(h,2),v=p[0],g=p[1];return s.includes(v)&&l.includes(g)?e:(c()(v)&&(f=f.addNumericRefinement(i,">=",v)),c()(g)&&(f=f.addNumericRefinement(i,"<=",g)),f)}}}}var a=n(27),o=n.n(a),s=n(176),c=n.n(s),u=n(0);t.a=i;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f="Usage:\nvar customRange = connectRange(function render(params, isFirstRendering) {\n  // params = {\n  //   refine,\n  //   range,\n  //   start,\n  //   format,\n  //   instantSearchInstance,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customRange({\n    attributeName,\n    [ min ],\n    [ max ],\n    [ precision = 2 ],\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectRange.html\n"},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(885),a=n(886),o=n(887),s=n(888),c=n(889);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t,n){function r(e){var t=this.__data__=new i(e);this.size=t.size}var i=n(100),a=n(906),o=n(907),s=n(908),c=n(909),u=n(910);r.prototype.clear=a,r.prototype.delete=o,r.prototype.get=s,r.prototype.has=c,r.prototype.set=u,e.exports=r},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}var i=n(48);e.exports=r},function(e,t,n){var r=n(12),i=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},function(e,t,n){function r(e,t){return o(a(e,t,i),e+"")}var i=n(75),a=n(901),o=n(332);e.exports=r},function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},function(e,t,n){function r(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=i(e.prototype),r=e.apply(n,t);return a(r)?r:n}}var i=n(104),a=n(12);e.exports=r},function(e,t,n){function r(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}var i=n(882);e.exports=r},function(e,t){function n(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?a(n)&&o(t,n.length):"string"==r&&t in n)&&i(n[t],e)}var i=n(48),a=n(21),o=n(109),s=n(12);e.exports=r},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}var r=Object.prototype;e.exports=n},function(e,t,n){var r=n(33),i=r(Object,"create");e.exports=i},function(e,t,n){function r(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}var i=n(114),a=1/0;e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||a(e)&&i(e)==o}var i=n(25),a=n(13),o="[object Symbol]";e.exports=r},function(e,t,n){var r=n(831),i=n(166),a=n(171),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},function(e,t){function n(){}e.exports=n},function(e,t,n){function r(e,t,n){var r=c(e)?i:s,u=arguments.length<3;return r(e,o(t,4),n,u,a)}var i=n(816),a=n(72),o=n(26),s=n(841),c=n(4);e.exports=r},function(e,t,n){function r(e){var t=i(e),n=t%1;return t===t?n?t-n:t:0}var i=n(347);e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}var i=n(980);e.exports=r},function(e,t,n){function r(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}var i=n(963);e.exports=r},function(e,t,n){var r=n(352),i=r(Object,"create");e.exports=i},function(e,t,n){"use strict";var r,i,a,o,s,c=n(1002).toUnsigned;r=function(e,t){var n,a,o,s,u,l=[];if(!t.length)return null;for(n=0;n<e.byteLength;)a=c(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),o=i(e.subarray(n+4,n+8)),s=a>1?n+a:e.byteLength,o===t[0]&&(1===t.length?l.push(e.subarray(n+8,s)):(u=r(e.subarray(n+8,s),t.slice(1)),u.length&&(l=l.concat(u)))),n=s;return l},i=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},a=function(e){var t={};return r(e,["moov","trak"]).reduce(function(e,t){var n,i,a,o,s;return(n=r(t,["tkhd"])[0])?(i=n[0],a=0===i?12:20,o=c(n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]),(s=r(t,["mdia","mdhd"])[0])?(i=s[0],a=0===i?12:20,e[o]=c(s[a]<<24|s[a+1]<<16|s[a+2]<<8|s[a+3]),e):null):null},t)},o=function(e,t){var n,i,a;return n=r(t,["moof","traf"]),i=[].concat.apply([],n.map(function(t){return r(t,["tfhd"]).map(function(n){var i,a,o;return i=c(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),a=e[i]||9e4,o=r(t,["tfdt"]).map(function(e){var t,n;return t=e[0],n=c(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=c(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n})[0],(o=o||1/0)/a})})),a=Math.min.apply(null,i),isFinite(a)?a:0},s=function(e){var t=r(e,["moov","trak"]),n=[];return t.forEach(function(e){var t=r(e,["mdia","hdlr"]),a=r(e,["tkhd"]);t.forEach(function(e,t){var r,o,s,c=i(e.subarray(8,12)),u=a[t];"vide"===c&&(r=new DataView(u.buffer,u.byteOffset,u.byteLength),o=r.getUint8(0),s=0===o?r.getUint32(12):r.getUint32(20),n.push(s))})}),n},e.exports={findBox:r,parseType:i,timescale:a,startTime:o,videoTrackIds:s}},function(e,t,n){"use strict";function r(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}function i(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}function a(e){if(e instanceof ArrayBuffer)return i(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}function o(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&R.call(n)==L}function s(e){var t,n,i;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,i=e.length;n<i;n++)t[n]=s(e[n]);return t}if(e instanceof Date)return e.toISOString();if(r(e))return a(e);if(!o(e))return e;t={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var c=s(e[n]);void 0!==c&&(t[n]=c)}return t}function c(e){var t=!1;return w()(function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)})}function u(e){return w()(function(t){t=s(t);var n=this,r="function"==typeof t[t.length-1]&&t.pop(),i=new Promise(function(r,i){var a;try{var o=c(function(e,t){e?i(e):r(t)});t.push(o),a=e.apply(n,t),a&&"function"==typeof a.then&&r(a)}catch(e){i(e)}});return r&&i.then(function(e){r(null,e)},r),i})}function l(e,t){for(var n={},r=0,i=t.length;r<i;r++){var a=t[r];a in e&&(n[a]=e[a])}return n}function d(){return I}function f(e){d()&&addEventListener("storage",function(t){e.emit(t.key)})}function h(){T.EventEmitter.call(this),this._listeners={},f(this)}function p(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function v(e,t,r){try{return!e(t,r)}catch(e){var i="Filter function threw: "+e.toString();return n.i(E.a)(E.f,i)}}function g(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){r.doc||(r.doc={});var i=n&&v(e.filter,r.doc,t);if("object"==typeof i)return i;if(i)return!1;if(e.include_docs){if(!e.attachments)for(var a in r.doc._attachments)r.doc._attachments.hasOwnProperty(a)&&(r.doc._attachments[a].stub=!0)}else delete r.doc;return!0}}function m(){}function y(e){var t;if(e?"string"!=typeof e?t=n.i(E.a)(E.h):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=n.i(E.a)(E.i)):t=n.i(E.a)(E.g),t)throw t}function b(e,t){var r=n.i(O.h)(e);return t?(delete r._rev_tree,n.i(A.a)(JSON.stringify(r))):$.a.v4().replace(/-/g,"").toLowerCase()}var _=n(255),w=n.n(_),S=(n(187),n(153)),k=n.n(S),T=n(68),C=(n.n(T),n(70)),x=n.n(C),E=n(188),P=n(1014),$=n.n(P),A=n(360),O=n(123);n.d(t,"c",function(){return D}),n.d(t,"b",function(){return h}),n.d(t,"h",function(){return s}),n.d(t,"i",function(){return g}),n.d(t,"a",function(){return p}),n.d(t,"e",function(){return d}),n.d(t,"k",function(){return y}),n.d(t,"d",function(){return l}),n.d(t,"j",function(){return b}),n.d(t,"g",function(){return u}),n.d(t,"f",function(){return U});var I,R=Function.prototype.toString,L=R.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1),I=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){I=!1}x()(h,T.EventEmitter),h.prototype.addListener=function(e,t,n,r){function i(){function e(){o=!1}if(a._listeners[t]){if(o)return void(o="waiting");o=!0;var s=l(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(s).on("change",function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))}).on("complete",function(){"waiting"===o&&k()(i),o=!1}).on("error",e)}}if(!this._listeners[t]){var a=this,o=!1;this._listeners[t]=i,this.on(e,i)}},h.prototype.removeListener=function(e,t){t in this._listeners&&(T.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},h.prototype.notifyLocalWindows=function(e){d()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},h.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var j;j="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};var D=j,N=m.name;var U=$.a.v4},function(e,t,n){function r(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}var i=n(85),a=n(132),o=4294967295;r.prototype=i(a.prototype),r.prototype.constructor=r,e.exports=r},function(e,t,n){var r=n(31),i=n(8),a=r(i,"Map");e.exports=a},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(571),a=n(572),o=n(573),s=n(574),c=n(575);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}e.exports=n},function(e,t,n){function r(e,t,n){var r=e[t];s.call(e,t)&&a(r,n)&&(void 0!==n||t in e)||i(e,t,n)}var i=n(51),a=n(40),o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,o,s){return e===t||(null==e||null==t||!a(e)&&!a(t)?e!==e&&t!==t:i(e,t,n,o,r,s))}var i=n(499),a=n(11);e.exports=r},function(e,t){function n(){}e.exports=n},function(e,t,n){function r(e){if("string"==typeof e)return e;if(o(e))return a(e,r)+"";if(s(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-c?"-0":t}var i=n(34),a=n(22),o=n(5),s=n(62),c=1/0,u=i?i.prototype:void 0,l=u?u.toString:void 0;e.exports=r},function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}var i=n(194);e.exports=r},function(e,t,n){function r(e,t,n,r,S,k,T,C){var x=t&g;if(!x&&"function"!=typeof e)throw new TypeError(p);var E=r?r.length:0;if(E||(t&=~(b|_),r=S=void 0),T=void 0===T?T:w(h(T),0),C=void 0===C?C:h(C),E-=S?S.length:0,t&_){var P=r,$=S;r=S=void 0}var A=x?void 0:u(e),O=[e,t,n,r,S,P,$,k,T,C];if(A&&l(O,A),e=O[0],t=O[1],n=O[2],r=O[3],S=O[4],C=O[9]=void 0===O[9]?x?0:e.length:w(O[9]-E,0),!C&&t&(m|y)&&(t&=~(m|y)),t&&t!=v)I=t==m||t==y?o(e,t,C):t!=b&&t!=(v|b)||S.length?s.apply(void 0,O):c(e,t,n,r);else var I=a(e,t,n);return f((A?i:d)(I,O),e,t)}var i=n(206),a=n(539),o=n(540),s=n(214),c=n(543),u=n(221),l=n(578),d=n(231),f=n(232),h=n(65),p="Expected a function",v=1,g=2,m=8,y=16,b=32,_=64,w=Math.max;e.exports=r},function(e,t,n){function r(e){return i(e,o,a)}var i=n(202),a=n(222),o=n(63);e.exports=r},function(e,t,n){var r=n(228),i=r(Object.getPrototypeOf,Object);e.exports=i},function(e,t,n){var r=n(196),i=n(247),a=Object.prototype,o=a.propertyIsEnumerable,s=Object.getOwnPropertySymbols,c=s?function(e){return null==e?[]:(e=Object(e),r(s(e),function(t){return o.call(e,t)}))}:i;e.exports=c},function(e,t,n){function r(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(s.test(e)||!o.test(e)||null!=t&&e in Object(t))}var i=n(5),a=n(62),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=r},function(e,t,n){(function(e){var r=n(219),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===i,s=o&&r.process,c=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=c}).call(t,n(30)(e))},function(e,t,n){var r=n(517),i=n(233),a=i(r);e.exports=a},function(e,t,n){var r=n(35),i=n(40),a=n(224),o=n(63),s=Object.prototype,c=s.hasOwnProperty,u=r(function(e,t){e=Object(e);var n=-1,r=t.length,u=r>2?t[2]:void 0;for(u&&a(t[0],t[1],u)&&(r=1);++n<r;)for(var l=t[n],d=o(l),f=-1,h=d.length;++f<h;){var p=d[f],v=e[p];(void 0===v||i(v,s[p])&&!c.call(e,p))&&(e[p]=l[p])}return e});e.exports=u},function(e,t,n){function r(e,t){return(s(e)?i:a)(e,o(t,3))}var i=n(196),a=n(493),o=n(17),s=n(5);e.exports=r},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){function r(e){if(!o(e)||i(e)!=s)return!1;var t=a(e);if(null===t)return!0;var n=d.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==f}var i=n(23),a=n(137),o=n(11),s="[object Object]",c=Function.prototype,u=Object.prototype,l=c.toString,d=u.hasOwnProperty,f=l.call(Object);e.exports=r},function(e,t,n){var r=n(509),i=n(536),a=i(function(e,t,n){r(e,t,n)});e.exports=a},function(e,t,n){function r(e){return null==e?"":i(e)}var i=n(133);e.exports=r},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],i=0;i<t.length;++i)void 0!==t[i]&&r.push(t[i]);n.obj[n.prop]=r}}return t},o=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},s=function e(t,n,i){if(!n)return t;if("object"!=typeof n){if(Array.isArray(t))t.push(n);else{if("object"!=typeof t)return[t,n];(i.plainObjects||i.allowPrototypes||!r.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!=typeof t)return[t].concat(n);var a=t;return Array.isArray(t)&&!Array.isArray(n)&&(a=o(t,i)),Array.isArray(t)&&Array.isArray(n)?(n.forEach(function(n,a){r.call(t,a)?t[a]&&"object"==typeof t[a]?t[a]=e(t[a],n,i):t.push(n):t[a]=n}),t):Object.keys(n).reduce(function(t,a){var o=n[a];return r.call(t,a)?t[a]=e(t[a],o,i):t[a]=o,t},a)},c=function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},u=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},l=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",r=0;r<t.length;++r){var a=t.charCodeAt(r);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?n+=t.charAt(r):a<128?n+=i[a]:a<2048?n+=i[192|a>>6]+i[128|63&a]:a<55296||a>=57344?n+=i[224|a>>12]+i[128|a>>6&63]+i[128|63&a]:(r+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(r)),n+=i[240|a>>18]+i[128|a>>12&63]+i[128|a>>6&63]+i[128|63&a])}return n},d=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],o=i.obj[i.prop],s=Object.keys(o),c=0;c<s.length;++c){var u=s[c],l=o[u];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:o,prop:u}),n.push(l))}return a(t)},f=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},h=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:o,assign:c,compact:d,decode:u,encode:l,isBuffer:h,isRegExp:f,merge:s}},function(e,t,n){"use strict";function r(e,t){return _(e,function(e){return g(e,t)})}function i(e){var t=e?i._parseNumbers(e):{};this.index=t.index||"",this.query=t.query||"",this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.hierarchicalFacets=t.hierarchicalFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.tagRefinements=t.tagRefinements||[],this.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements||{},this.numericFilters=t.numericFilters,this.tagFilters=t.tagFilters,this.optionalTagFilters=t.optionalTagFilters,this.optionalFacetFilters=t.optionalFacetFilters,this.hitsPerPage=t.hitsPerPage,this.maxValuesPerFacet=t.maxValuesPerFacet,this.page=t.page||0,this.queryType=t.queryType,this.typoTolerance=t.typoTolerance,this.minWordSizefor1Typo=t.minWordSizefor1Typo,this.minWordSizefor2Typos=t.minWordSizefor2Typos,this.minProximity=t.minProximity,this.allowTyposOnNumericTokens=t.allowTyposOnNumericTokens,this.ignorePlurals=t.ignorePlurals,this.restrictSearchableAttributes=t.restrictSearchableAttributes,this.advancedSyntax=t.advancedSyntax,this.analytics=t.analytics,this.analyticsTags=t.analyticsTags,this.synonyms=t.synonyms,this.replaceSynonymsInHighlight=t.replaceSynonymsInHighlight,this.optionalWords=t.optionalWords,this.removeWordsIfNoResults=t.removeWordsIfNoResults,this.attributesToRetrieve=t.attributesToRetrieve,this.attributesToHighlight=t.attributesToHighlight,this.highlightPreTag=t.highlightPreTag,this.highlightPostTag=t.highlightPostTag,this.attributesToSnippet=t.attributesToSnippet,this.getRankingInfo=t.getRankingInfo,this.distinct=t.distinct,this.aroundLatLng=t.aroundLatLng,this.aroundLatLngViaIP=t.aroundLatLngViaIP,this.aroundRadius=t.aroundRadius,this.minimumAroundRadius=t.minimumAroundRadius,this.aroundPrecision=t.aroundPrecision,this.insideBoundingBox=t.insideBoundingBox,this.insidePolygon=t.insidePolygon,this.snippetEllipsisText=t.snippetEllipsisText,this.disableExactOnAttributes=t.disableExactOnAttributes,this.enableExactOnSingleWordQuery=t.enableExactOnSingleWordQuery,this.offset=t.offset,this.length=t.length;var n=this;s(t,function(e,t){-1===i.PARAMETERS.indexOf(t)&&(n[t]=e)})}var a=n(19),o=n(603),s=n(601),c=n(41),u=n(143),l=n(24),d=n(64),f=n(245),h=n(94),p=n(606),v=n(60),g=n(604),m=n(243),y=n(61),b=n(42),_=n(93),w=n(248),S=n(142),k=n(146),T=n(634),C=n(630),x=n(629);i.PARAMETERS=a(new i),i._parseNumbers=function(e){if(e instanceof i)return e;var t={};if(c(["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"],function(n){var r=e[n];if(y(r)){var i=parseFloat(r);t[n]=p(i)?r:i}}),Array.isArray(e.insideBoundingBox)&&(t.insideBoundingBox=e.insideBoundingBox.map(function(e){return e.map(function(e){return parseFloat(e)})})),e.numericRefinements){var n={};c(e.numericRefinements,function(e,t){n[t]={},c(e,function(e,r){var i=l(e,function(e){return Array.isArray(e)?l(e,function(e){return y(e)?parseFloat(e):e}):y(e)?parseFloat(e):e});n[t][r]=i})}),t.numericRefinements=n}return k({},e,t)},i.make=function(e){var t=new i(e);return c(e.hierarchicalFacets,function(e){if(e.rootPath){var n=t.getHierarchicalRefinement(e.name);n.length>0&&0!==n[0].indexOf(e.rootPath)&&(t=t.clearRefinements(e.name)),n=t.getHierarchicalRefinement(e.name),0===n.length&&(t=t.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}}),t},i.validate=function(e,t){var n=t||{};return e.tagFilters&&n.tagRefinements&&n.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):e.tagRefinements.length>0&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&n.numericRefinements&&!v(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):!v(e.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},i.prototype={constructor:i,clearRefinements:function(e){var t=x.clearRefinement,n={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:t(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:t(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:t(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:t(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return n.numericRefinements===this.numericRefinements&&n.facetsRefinements===this.facetsRefinements&&n.facetsExcludes===this.facetsExcludes&&n.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&n.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(n)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,n){var r=T(n);if(this.isNumericRefined(e,t,r))return this;var i=k({},this.numericRefinements);return i[e]=k({},i[e]),i[e][t]?(i[e][t]=i[e][t].slice(),i[e][t].push(r)):i[e][t]=[r],this.setQueryParameters({numericRefinements:i})},getConjunctiveRefinements:function(e){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.facetsExcludes[e]||[]},removeNumericRefinement:function(e,t,n){if(void 0!==n){var r=T(n);return this.isNumericRefined(e,t,r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(n,i){return i===e&&n.op===t&&g(n.val,r)})}):this}return void 0!==t?this.isNumericRefined(e,t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(n,r){return r===e&&n.op===t})}):this:this.isNumericRefined(e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(t,n){return n===e})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(e){if(m(e))return v(this.numericRefinements)?this.numericRefinements:{};if(y(e))return v(this.numericRefinements[e])?this.numericRefinements:f(this.numericRefinements,e);if(b(e)){var t=!1,n=d(this.numericRefinements,function(n,r,i){var a={};return c(r,function(n,r){var o=[];c(n,function(t){e({val:t,op:r},i,"numeric")||o.push(t)}),v(o)?t=!0:(o.length!==n.length&&(t=!0),a[r]=o)}),v(a)||(n[i]=a),n},{});return t?n:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return x.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:x.addRefinement(this.facetsRefinements,e,t)})},addExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return x.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:x.addRefinement(this.facetsExcludes,e,t)})},addDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return x.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:x.addRefinement(this.disjunctiveFacetsRefinements,e,t)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(t)},removeFacet:function(e){return this.isConjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({facets:u(this.facets,function(t){return t!==e})}):this},removeDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({disjunctiveFacets:u(this.disjunctiveFacets,function(t){return t!==e})}):this},removeHierarchicalFacet:function(e){return this.isHierarchicalFacet(e)?this.clearRefinements(e).setQueryParameters({hierarchicalFacets:u(this.hierarchicalFacets,function(t){return t.name!==e})}):this},removeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return x.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:x.removeRefinement(this.facetsRefinements,e,t)}):this},removeExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return x.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:x.removeRefinement(this.facetsExcludes,e,t)}):this},removeDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return x.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:x.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this},removeTagRefinement:function(e){if(!this.isTagRefined(e))return this;var t={tagRefinements:u(this.tagRefinements,function(t){return t!==e})};return this.setQueryParameters(t)},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:x.toggleRefinement(this.facetsRefinements,e,t)})},toggleExcludeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:x.toggleRefinement(this.facetsExcludes,e,t)})},toggleDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:x.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)})},toggleHierarchicalFacetRefinement:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r={};return void 0!==this.hierarchicalFacetsRefinements[e]&&this.hierarchicalFacetsRefinements[e].length>0&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+n))?-1===t.indexOf(n)?r[e]=[]:r[e]=[t.slice(0,t.lastIndexOf(n))]:r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:S({},r,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");var n={};return n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:S({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))throw new Error(e+" is not refined.");var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:S({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return h(this.disjunctiveFacets,e)>-1},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return h(this.facets,e)>-1},isFacetRefined:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return x.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return x.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return x.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this.getHierarchicalRefinement(e);return t?-1!==h(n,t):n.length>0},isNumericRefined:function(e,t,n){if(m(n)&&m(t))return!!this.numericRefinements[e];var i=this.numericRefinements[e]&&!m(this.numericRefinements[e][t]);if(m(n)||!i)return i;var a=T(n),o=!m(r(this.numericRefinements[e][t],a));return i&&o},isTagRefined:function(e){return-1!==h(this.tagRefinements,e)},getRefinedDisjunctiveFacets:function(){var e=o(a(this.numericRefinements),this.disjunctiveFacets);return a(this.disjunctiveFacetsRefinements).concat(e).concat(this.getRefinedHierarchicalFacets())},getRefinedHierarchicalFacets:function(){return o(l(this.hierarchicalFacets,"name"),a(this.hierarchicalFacetsRefinements))},getUnrefinedDisjunctiveFacets:function(){var e=this.getRefinedDisjunctiveFacets();return u(this.disjunctiveFacets,function(t){return-1===h(e,t)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements"],getQueryParams:function(){var e=this.managedParameters,t={};return s(this,function(n,r){-1===h(e,r)&&void 0!==n&&(t[r]=n)}),t},getQueryParameter:function(e){if(!this.hasOwnProperty(e))throw new Error("Parameter '"+e+"' is not an attribute of SearchParameters (http://algolia.github.io/algoliasearch-helper-js/docs/SearchParameters.html)");return this[e]},setQueryParameter:function(e,t){if(this[e]===t)return this;var n={};return n[e]=t,this.setQueryParameters(n)},setQueryParameters:function(e){if(!e)return this;var t=i.validate(this,e);if(t)throw t;var n=i._parseNumbers(e);return this.mutateMe(function(t){var r=a(e);return c(r,function(e){t[e]=n[e]}),t})},filter:function(e){return C(this,e)},mutateMe:function(e){var t=new this.constructor(this);return e(t,this),t},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(e){return _(this.hierarchicalFacets,{name:e})},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))throw new Error("Cannot get the breadcrumb of an unknown hierarchical facet: `"+e+"`");var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r=t.split(n);return l(r,w)},toString:function(){return JSON.stringify(this,null,2)}},e.exports=i},function(e,t,n){"use strict";function r(e){return v(e)?h(e,r):Array.isArray(e)?d(e,r):p(e)?y(e):e}function i(e,t,n,r){if(null!==e&&(n=n.replace(e,""),r=r.replace(e,"")),n=t[n]||n,r=t[r]||r,-1!==_.indexOf(n)||-1!==_.indexOf(r)){if("q"===n)return-1;if("q"===r)return 1;var i=-1!==b.indexOf(n),a=-1!==b.indexOf(r);if(i&&!a)return 1;if(a&&!i)return-1}return n.localeCompare(r)}var a=n(631),o=n(149),s=n(625),c=n(599),u=n(41),l=n(614),d=n(24),f=n(608),h=n(609),p=n(61),v=n(145),g=n(60),m=n(240),y=n(148).encode,b=["dFR","fR","nR","hFR","tR"],_=a.ENCODED_PARAMETERS;t.getStateFromQueryString=function(e,t){var n=t&&t.prefix||"",r=t&&t.mapping||{},i=m(r),c=s.parse(e),u=new RegExp("^"+n),d=f(c,function(e,t){var r=n&&u.test(t),o=r?t.replace(u,""):t;return a.decode(i[o]||o)||o}),h=o._parseNumbers(d);return l(h,o.PARAMETERS)},t.getUnrecognizedParametersInQueryString=function(e,t){var n=t&&t.prefix,r=t&&t.mapping||{},i=m(r),o={},c=s.parse(e);if(n){var l=new RegExp("^"+n);u(c,function(e,t){l.test(t)||(o[t]=e)})}else u(c,function(e,t){a.decode(i[t]||t)||(o[t]=e)});return o},t.getQueryStringFromState=function(e,t){var n=t&&t.moreAttributes,o=t&&t.prefix||"",u=t&&t.mapping||{},l=t&&t.safe||!1,d=m(u),h=l?e:r(e),p=f(h,function(e,t){var n=a.encode(t);return o+(u[n]||n)}),v=""===o?null:new RegExp("^"+o),y=c(i,null,v,d);if(!g(n)){var b=s.stringify(p,{encode:l,sort:y}),_=s.stringify(n,{encode:l});return b?b+"&"+_:_}return s.stringify(p,{encode:l,sort:y})}},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";(function(t){function n(e,t,n,i,a,o,s,c){if(r(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,a,o,s,c],d=0;u=new Error(t.replace(/%s/g,function(){return l[d++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var r=function(e){};"production"!==t.env.NODE_ENV&&(r=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=n}).call(t,n(9))},function(e,t,n){"use strict";(function(t){function n(){l=!0;for(var e,t,n=d.length;n;){for(t=d,d=[],e=-1;++e<n;)t[e]();n=d.length}l=!1}function r(e){1!==d.push(e)||l||i()}var i,a=t.MutationObserver||t.WebKitMutationObserver;if(a){var o=0,s=new a(n),c=t.document.createTextNode("");s.observe(c,{characterData:!0}),i=function(){c.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var u=new t.MessageChannel;u.port1.onmessage=n,i=function(){u.port2.postMessage(0)}}var l,d=[];e.exports=r}).call(t,n(6))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(3),s=(n.n(o),n(1)),c=n(15),u=n(20),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"componentWillMount",value:function(){this.handleChange=this.handleChange.bind(this)}},{key:"handleChange",value:function(e){this.props.setValue(e.target.value)}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentValue,r=t.options;return s.default.createElement("select",{className:this.props.cssClasses.select,onChange:this.handleChange,value:""+n},r.map(function(t){return s.default.createElement("option",{className:e.props.cssClasses.item,key:t.label+t.value,value:""+t.value},t.label)}))}}]),t}(s.Component);t.a=n.i(c.a)(n.i(u.a)(d))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){return n.i(o.a)(e,u),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.attributeName,o=n.limit,l=void 0===o?10:o,d=n.sortBy,f=void 0===d?["name:asc"]:d,h=n.showMoreLimit;if(!a||!isNaN(h)&&h<l)throw new Error(u);return{isShowingMore:!1,toggleShowMore:function(){},cachedToggleShowMore:function(){this.toggleShowMore()},createToggleShowMore:function(e){var t=this,n=e.results,r=e.instantSearchInstance;return function(){t.isShowingMore=!t.isShowingMore,t.render({results:n,instantSearchInstance:r})}},getLimit:function(){return this.isShowingMore?h:l},refine:function(e){return function(t){var n=e.getHierarchicalFacetBreadcrumb(a),r=c(n,1),i=r[0];e.toggleRefinement(a,t||i).search()}},getConfiguration:function(e){var t={hierarchicalFacets:[{name:a,attributes:[a]}]},n=e.maxValuesPerFacet||0;return t.maxValuesPerFacet=Math.max(n,h||l),t},init:function(t){var r=t.helper,i=t.createURL,o=t.instantSearchInstance;this.cachedToggleShowMore=this.cachedToggleShowMore.bind(this),this._createURL=function(e){return i(r.state.toggleRefinement(a,e))},this._refine=this.refine(r),e({items:[],createURL:this._createURL,refine:this._refine,instantSearchInstance:o,canRefine:!1,widgetParams:n,isShowingMore:this.isShowingMore,toggleShowMore:this.cachedToggleShowMore,canToggleShowMore:!1},!0)},render:function(t){var r=t.results,o=t.instantSearchInstance,c=r.getFacetValues(a,{sortBy:f}).data||[],u=c.slice(0,this.getLimit()).map(function(e){var t=e.name,n=e.path,r=i(e,["name","path"]);return s({},r,{label:t,value:n})});this.toggleShowMore=this.createToggleShowMore({results:r,instantSearchInstance:o}),e({items:u,createURL:this._createURL,refine:this._refine,instantSearchInstance:o,canRefine:u.length>0,widgetParams:n,isShowingMore:this.isShowingMore,toggleShowMore:this.cachedToggleShowMore,canToggleShowMore:this.isShowingMore||c.length>this.getLimit()},!1)},dispose:function(e){var n=e.state;t();var r=n;return n.isHierarchicalFacetRefined(a)&&(r=n.removeHierarchicalFacetRefinement(a)),r=r.removeHierarchicalFacet(a),(r.maxValuesPerFacet===l||h&&r.maxValuesPerFacet===h)&&r.setQueryParameters("maxValuesPerFacet",void 0),r},getWidgetState:function(e,t){var n=t.searchParameters,i=n.getHierarchicalFacetBreadcrumb(a),o=c(i,1),u=o[0];return!u||e.menu&&e.menu[a]===u?e:s({},e,{menu:s({},e.menu,r({},a,u))})},getWidgetSearchParameters:function(e,t){var n=t.uiState;if(n.menu&&n.menu[a]){var r=n.menu[a];return e.isHierarchicalFacetRefined(a,r)?e:e.toggleRefinement(a,r)}if(e.isHierarchicalFacetRefined(a)){var i=e.getHierarchicalFacetBreadcrumb(a),o=c(i,1),s=o[0];return e.toggleRefinement(a,s)}return e}}}}var o=n(0);t.a=a;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u="Usage:\nvar customMenu = connectMenu(function render(params, isFirstRendering) {\n  // params = {\n  //   items,\n  //   createURL,\n  //   refine,\n  //   instantSearchInstance,\n  //   canRefine,\n  //   widgetParams,\n  //   isShowingMore,\n  //   toggleShowMore\n  // }\n});\nsearch.addWidget(\n  customMenu({\n    attributeName,\n    [ limit ],\n    [ showMoreLimit ]\n    [ sortBy = ['name:asc'] ]\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectMenu.html\n"},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return d()(e).replace(new RegExp(m.highlightPreTag,"g"),"<em>").replace(new RegExp(m.highlightPostTag,"g"),"</em>")}function a(e){return v()(e)&&"string"!=typeof e.value?u()(e,function(e,t,n){return g({},e,r({},n,a(t)))},{}):h()(e)?e.map(a):g({},e,{value:i(e.value)})}function o(e){return void 0===e.__escaped&&(e=e.map(function(e){return e._highlightResult&&(e._highlightResult=a(e._highlightResult)),e._snippetResult&&(e._snippetResult=a(e._snippetResult)),e}),e.__escaped=!0),e}function s(e){return e.map(function(e){return g({},e,{highlighted:i(e.highlighted)})})}var c=n(117),u=n.n(c),l=n(919),d=n.n(l),f=n(4),h=n.n(f),p=n(50),v=n.n(p);n.d(t,"a",function(){return m}),t.c=o,t.b=s;var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"}},function(e,t,n){function r(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}var i=n(104),a=n(165),o=4294967295;r.prototype=i(a.prototype),r.prototype.constructor=r,e.exports=r},function(e,t,n){var r=n(33),i=n(7),a=r(i,"Map");e.exports=a},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(890),a=n(891),o=n(892),s=n(893),c=n(894);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}e.exports=n},function(e,t,n){function r(e,t){return e&&i(e,t,a)}var i=n(299),a=n(28);e.exports=r},function(e,t,n){function r(e,t,n,o,s){return e===t||(null==e||null==t||!a(e)&&!a(t)?e!==e&&t!==t:i(e,t,n,o,r,s))}var i=n(825),a=n(13);e.exports=r},function(e,t){function n(){}e.exports=n},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}var i=n(290);e.exports=r},function(e,t,n){var r=n(329),i=r(Object.getPrototypeOf,Object);e.exports=i},function(e,t,n){var r=n(292),i=n(346),a=Object.prototype,o=a.propertyIsEnumerable,s=Object.getOwnPropertySymbols,c=s?function(e){return null==e?[]:(e=Object(e),r(s(e),function(t){return o.call(e,t)}))}:i;e.exports=c},function(e,t,n){function r(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(s.test(e)||!o.test(e)||null!=t&&e in Object(t))}var i=n(4),a=n(114),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=r},function(e,t,n){(function(e){var r=n(319),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===i,s=o&&r.process,c=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=c}).call(t,n(30)(e))},function(e,t){function n(e,t){for(var n=-1,i=e.length,a=0,o=[];++n<i;){var s=e[n];s!==t&&s!==r||(e[n]=r,o[a++]=n)}return o}var r="__lodash_placeholder__";e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function r(e,t){return(s(e)?i:a)(e,o(t))}var i=n(160),a=n(72),o=n(309),s=n(4);e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?void 0:i(e,t);return void 0===r?n:r}var i=n(300);e.exports=r},function(e,t,n){function r(e){return"number"==typeof e&&a(e)}var i=n(7),a=i.isFinite;e.exports=r},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){function r(e){return"string"==typeof e||!a(e)&&o(e)&&i(e)==s}var i=n(25),a=n(4),o=n(13),s="[object String]";e.exports=r},function(e,t,n){function r(e,t){return(s(e)?i:o)(e,a(t,3))}var i=n(161),a=n(26),o=n(833),s=n(4);e.exports=r},function(e,t,n){var r=n(181),i=r.Symbol;e.exports=i},function(e,t,n){var r=n(954),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){function r(e){return"symbol"==typeof e||a(e)&&i(e)==o}var i=n(351),a=n(983),o="[object Symbol]";e.exports=r},function(e,t,n){"use strict";var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},a=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},o=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},s=function(e,t,n){return unescape(o(e,t,n))},c=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},u=function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},l=function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},d=function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return r[(60&e[t+2])>>>2];t++}return null},f=function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=a(e.subarray(10,14)));do{if((n=a(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var i=0;i<r.byteLength;i++)if(0===r[i]){var o=s(r,0,i);if("com.apple.streaming.transportStreamTimestamp"===o){var c=r.subarray(i+1),u=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;return u*=4,u+=3&c[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null};e.exports={isLikelyAacData:i,parseId3TagSize:c,parseAdtsSize:u,parseType:l,parseSampleRate:d,parseAacTimestamp:f}},function(e,t,n){"use strict";var r,i,a,o,s=n(29),c=n(358),u=n(997),l=n(995),d=n(999),f=n(992),h=n(989),p=n(990).H264Stream,v=n(988),g=n(184).isLikelyAacData,m=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],y=["width","height","profileIdc","levelIdc","profileCompatibility"],b=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0};i=function(e,t){var n=[],r=0,a=0,o=0,s=1/0;t=t||{},i.prototype.init.call(this),this.push=function(t){d.collectDtsInfo(e,t),e&&m.forEach(function(n){e[n]=t[n]}),n.push(t)},this.setEarliestDts=function(t){a=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){o=e},this.flush=function(){var i,u,f,h;if(0===n.length)return void this.trigger("done","AudioSegmentStream");i=l.trimAdtsFramesByEarliestDts(n,e,a),e.baseMediaDecodeTime=d.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),l.prefixWithSilence(e,i,o,s),e.samples=l.generateSampleTable(i),f=c.mdat(l.concatenateFrameData(i)),n=[],u=c.moof(r,[e]),h=new Uint8Array(u.byteLength+f.byteLength),r++,h.set(u),h.set(f,u.byteLength),d.clearDtsInfo(e),this.trigger("data",{track:e,boxes:h}),this.trigger("done","AudioSegmentStream")}},i.prototype=new s,r=function(e,t){var n,i,a=0,o=[],s=[];t=t||{},r.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){d.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],y.forEach(function(t){e[t]=n[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),o.push(t)},this.flush=function(){for(var n,r,i,l,f,h;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0===o.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=u.groupNalsIntoFrames(o),i=u.groupFramesIntoGops(n),i[0][0].keyFrame||(r=this.getGopForFusion_(o[0],e),r?(i.unshift(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.pts=r.pts,i.dts=r.dts,i.duration+=r.duration):i=u.extendFirstKeyFrame(i)),s.length){var p;if(!(p=t.alignGopsAtEnd?this.alignGopsAtEnd_(i):this.alignGopsAtStart_(i)))return this.gopCache_.unshift({gop:i.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");d.clearDtsInfo(e),i=p}d.collectDtsInfo(e,i),e.samples=u.generateSampleTable(i),f=c.mdat(u.concatenateNalData(i)),e.baseMediaDecodeTime=d.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",i.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:i.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=c.moof(a,[e]),h=new Uint8Array(l.byteLength+f.byteLength),a++,h.set(l),h.set(f,l.byteLength),this.trigger("data",{track:e,boxes:h}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){d.clearDtsInfo(e),n=void 0,i=void 0},this.getGopForFusion_=function(t){var n,r,i,a,o,s=45e3,c=1e4,u=1/0;for(o=0;o<this.gopCache_.length;o++)a=this.gopCache_[o],i=a.gop,e.pps&&b(e.pps[0],a.pps[0])&&e.sps&&b(e.sps[0],a.sps[0])&&(i.dts<e.timelineStartInfo.dts||(n=t.dts-i.dts-i.duration)>=-c&&n<=s&&(!r||u>n)&&(r=a,u=n));return r?r.gop:null},this.alignGopsAtStart_=function(e){var t,n,r,i,a,o,c,u;for(a=e.byteLength,o=e.nalCount,c=e.duration,t=n=0;t<s.length&&n<e.length&&(r=s[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,a-=i.byteLength,o-=i.nalCount,c-=i.duration);return 0===n?e:n===e.length?null:(u=e.slice(n),u.byteLength=a,u.duration=c,u.nalCount=o,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,r,i,a,o;for(t=s.length-1,n=e.length-1,a=null,o=!1;t>=0&&n>=0;){if(r=s[t],i=e[n],r.pts===i.pts){o=!0;break}r.pts>i.pts?t--:(t===s.length-1&&(a=n),n--)}if(!o&&null===a)return null;var c;if(0===(c=o?n:a))return e;var u=e.slice(c),l=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=l.byteLength,u.duration=l.duration,u.nalCount=l.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){s=e}},r.prototype=new s,o=function(e,t){this.numberOfTracks=0,this.metadataStream=t,e=e||{},void 0!==e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps&&(this.keepOriginalTimestamps=e.keepOriginalTimestamps),this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,o.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}},o.prototype=new s,o.prototype.flush=function(e){var t,n,r,i,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return void(++this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,y.forEach(function(e){o.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,m.forEach(function(e){o.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,r=c.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(r.byteLength),o.initSegment.set(r),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)t=this.pendingCaptions[i],t.startTime=t.startPts,this.keepOriginalTimestamps||(t.startTime-=s),t.startTime/=9e4,t.endTime=t.endPts,this.keepOriginalTimestamps||(t.endTime-=s),t.endTime/=9e4,o.captionStreams[t.stream]=!0,o.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)n=this.pendingMetadata[i],n.cueTime=n.pts,this.keepOriginalTimestamps||(n.cueTime-=s),n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},a=function(e){var t,n,s=this,c=!0;a.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="aac",t.metadataStream=new f.MetadataStream,t.aacStream=new v,t.audioTimestampRolloverStream=new f.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new f.TimestampRolloverStream("timed-metadata"),t.adtsStream=new h,t.coalesceStream=new o(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(r){"timed-metadata"!==r.type||t.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new i(n,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var a={};this.transmuxPipeline_=a,a.type="ts",a.metadataStream=new f.MetadataStream,a.packetStream=new f.TransportPacketStream,a.parseStream=new f.TransportParseStream,a.elementaryStream=new f.ElementaryStream,a.videoTimestampRolloverStream=new f.TimestampRolloverStream("video"),a.audioTimestampRolloverStream=new f.TimestampRolloverStream("audio"),a.timedMetadataTimestampRolloverStream=new f.TimestampRolloverStream("timed-metadata"),a.adtsStream=new h,a.h264Stream=new p,a.captionStream=new f.CaptionStream,a.coalesceStream=new o(e,a.metadataStream),a.headOfPipeline=a.packetStream,a.packetStream.pipe(a.parseStream).pipe(a.elementaryStream),a.elementaryStream.pipe(a.videoTimestampRolloverStream).pipe(a.h264Stream),a.elementaryStream.pipe(a.audioTimestampRolloverStream).pipe(a.adtsStream),a.elementaryStream.pipe(a.timedMetadataTimestampRolloverStream).pipe(a.metadataStream).pipe(a.coalesceStream),a.h264Stream.pipe(a.captionStream).pipe(a.coalesceStream),a.elementaryStream.on("data",function(o){var c;if("metadata"===o.type){for(c=o.tracks.length;c--;)t||"video"!==o.tracks[c].type?n||"audio"!==o.tracks[c].type||(n=o.tracks[c],n.timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(t=o.tracks[c],t.timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime);t&&!a.videoSegmentStream&&(a.coalesceStream.numberOfTracks++,a.videoSegmentStream=new r(t,e),a.videoSegmentStream.on("timelineStartInfo",function(e){n&&(n.timelineStartInfo=e,a.audioSegmentStream.setEarliestDts(e.dts))}),a.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),a.videoSegmentStream.on("baseMediaDecodeTime",function(e){n&&a.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),a.h264Stream.pipe(a.videoSegmentStream).pipe(a.coalesceStream)),n&&!a.audioSegmentStream&&(a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new i(n,e),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream))}}),a.coalesceStream.on("data",this.trigger.bind(this,"data")),a.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(r){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=r),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,d.clearDtsInfo(n),e.keepOriginalTimestamps||(n.timelineStartInfo.baseMediaDecodeTime=r),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[],i.videoTimestampRolloverStream.discontinuity()),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,d.clearDtsInfo(t),i.captionStream.reset(),e.keepOriginalTimestamps||(t.timelineStartInfo.baseMediaDecodeTime=r)),i.timedMetadataTimestampRolloverStream&&i.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(c){var t=g(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),c=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){c=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},a.prototype=new s,e.exports={Transmuxer:a,VideoSegmentStream:r,AudioSegmentStream:i,AUDIO_PROPERTIES:m,VIDEO_PROPERTIES:y}},function(e,t,n){"use strict";function r(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if("TypeError"!==a.name)throw a;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function i(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function a(e,t){return r([i(e)],{type:t})}function o(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}function s(e,t){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||"";if(r)return t(n);t(o(n))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function c(e,t){s(e,function(e){t(e)})}function u(e,t){c(e,function(e){t(f(e))})}function l(e,t){var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)}n.d(t,"d",function(){return d}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return a}),n.d(t,"f",function(){return u}),n.d(t,"e",function(){return c}),n.d(t,"c",function(){return l});var d=function(e){return atob(e)},f=function(e){return btoa(e)}},function(e,t,n){"use strict";function r(e){return"$"+e}function i(e){return e.substring(1)}function a(){this._store={}}function o(e){if(this._store=new a,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}function s(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u}),a.prototype.get=function(e){var t=r(e);return this._store[t]},a.prototype.set=function(e,t){var n=r(e);return this._store[n]=t,!0},a.prototype.has=function(e){return r(e)in this._store},a.prototype.delete=function(e){var t=r(e),n=t in this._store;return delete this._store[t],n},a.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var a=t[n],o=this._store[a];a=i(a),e(o,a)}},Object.defineProperty(a.prototype,"size",{get:function(){return Object.keys(this._store).length}}),o.prototype.add=function(e){return this._store.set(e,!0)},o.prototype.has=function(e){return this._store.has(e)},o.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})},Object.defineProperty(o.prototype,"size",{get:function(){return this._store.size}});var c,u;s()?(c=Set,u=Map):(c=o,u=a)},function(e,t,n){"use strict";function r(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}function i(e,t){function n(t){for(var n in e)"function"!=typeof e[n]&&(this[n]=e[n]);void 0!==t&&(this.reason=t)}return n.prototype=r.prototype,new n(t)}var a=n(70),o=n.n(a);n.d(t,"d",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"h",function(){return u}),n.d(t,"g",function(){return l}),n.d(t,"i",function(){return d}),n.d(t,"l",function(){return f}),n.d(t,"k",function(){return h}),n.d(t,"f",function(){return p}),n.d(t,"b",function(){return v}),n.d(t,"j",function(){return g}),n.d(t,"c",function(){return m}),n.d(t,"a",function(){return i}),o()(r,Error),r.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var s=(new r(401,"unauthorized","Name or password is incorrect."),new r(400,"bad_request","Missing JSON list of 'docs'"),new r(404,"not_found","missing")),c=new r(409,"conflict","Document update conflict"),u=new r(400,"bad_request","_id field must contain a string"),l=new r(412,"missing_id","_id is required for puts"),d=new r(400,"bad_request","Only reserved document ids may start with underscore."),f=(new r(412,"precondition_failed","Database not open"),new r(500,"unknown_error","Database encountered an unknown error"),new r(500,"badarg","Some query argument is invalid")),h=(new r(400,"invalid_request","Request was invalid"),new r(400,"query_parse_error","Some query parameter is invalid"),new r(500,"doc_validation","Bad special document member")),p=new r(400,"bad_request","Something wrong with the request"),v=(new r(400,"bad_request","Document must be a JSON object"),new r(404,"not_found","Database not found"),new r(500,"indexed_db_went_bad","unknown"),new r(500,"web_sql_went_bad","unknown")),g=(new r(500,"levelDB_went_went_bad","unknown"),new r(403,"forbidden","Forbidden by design doc validate_doc_update function"),new r(400,"bad_request","Invalid rev format")),m=(new r(412,"file_exists","The database could not be created, the file already exists."),new r(412,"missing_stub","A pre-existing attachment stub wasn't found"));new r(413,"invalid_url","Provided URL is invalid")},function(e,t,n){"use strict";function r(e){for(var t,n,r,i,a=e.rev_tree.slice();i=a.pop();){var o=i.ids,s=o[2],c=i.pos;if(s.length)for(var u=0,l=s.length;u<l;u++)a.push({pos:c+1,ids:s[u]});else{var d=!!o[1].deleted,f=o[0];t&&!(r!==d?r:n!==c?n<c:t<f)||(t=f,n=c,r=d)}}return n+"-"+t}function i(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,a=n.ids,o=a[2],s=t(0===o.length,i,a[0],n.ctx,a[1]),c=0,u=o.length;c<u;c++)r.push({pos:i+1,ids:o[c],ctx:s})}function a(e,t){return e.pos-t.pos}function o(e){var t=[];i(e,function(e,n,r,i,a){e&&t.push({rev:n+"-"+r,pos:n,opts:a})}),t.sort(a).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function s(e){for(var t=r(e),n=o(e.rev_tree),i=[],a=0,s=n.length;a<s;a++){var c=n[a];c.rev===t||c.opts.deleted||i.push(c.rev)}return i}function c(e){var t=[];return i(e.rev_tree,function(e,n,r,i,a){"available"!==a.status||e||(t.push(n+"-"+r),a.status="missing")}),t}function u(e){for(var t,n=[],r=e.slice();t=r.pop();){var i=t.pos,a=t.ids,o=a[0],s=a[1],c=a[2],u=0===c.length,l=t.history?t.history.slice():[];l.push({id:o,opts:s}),u&&n.push({pos:i+1-l.length,ids:l});for(var d=0,f=c.length;d<f;d++)r.push({pos:i+1,ids:c[d],history:l})}return n.reverse()}function l(e,t){return e.pos-t.pos}function d(e,t,n){for(var r,i=0,a=e.length;i<a;)r=i+a>>>1,n(e[r],t)<0?i=r+1:a=r;return i}function f(e,t,n){var r=d(e,t,n);e.splice(r,0,t)}function h(e,t){for(var n,r,i=t,a=e.length;i<a;i++){var o=e[i],s=[o.id,o.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function p(e,t){return e[0]<t[0]?-1:1}function v(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),a=i.tree1,o=i.tree2;(a[1].status||o[1].status)&&(a[1].status="available"===a[1].status||"available"===o[1].status?"available":"missing");for(var s=0;s<o[2].length;s++)if(a[2][0]){for(var c=!1,u=0;u<a[2].length;u++)a[2][u][0]===o[2][s][0]&&(n.push({tree1:a[2][u],tree2:o[2][s]}),c=!0);c||(r="new_branch",f(a[2],o[2][s],p))}else r="new_leaf",a[2][0]=o[2][s]}return{conflicts:r,tree:e}}function g(e,t,n){var r,i=[],a=!1,o=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var s=0,c=e.length;s<c;s++){var u=e[s];if(u.pos===t.pos&&u.ids[0]===t.ids[0])r=v(u.ids,t.ids),i.push({pos:u.pos,ids:r.tree}),a=a||r.conflicts,o=!0;else if(!0!==n){var d=u.pos<t.pos?u:t,f=u.pos<t.pos?t:u,h=f.pos-d.pos,p=[],g=[];for(g.push({ids:d.ids,diff:h,parent:null,parentIdx:null});g.length>0;){var m=g.pop();if(0!==m.diff)for(var y=m.ids[2],b=0,_=y.length;b<_;b++)g.push({ids:y[b],diff:m.diff-1,parent:m.ids,parentIdx:b});else m.ids[0]===f.ids[0]&&p.push(m)}var w=p[0];w?(r=v(w.ids,f.ids),w.parent[2][w.parentIdx]=r.tree,i.push({pos:d.pos,ids:d.ids}),a=a||r.conflicts,o=!0):i.push(u)}else i.push(u)}return o||i.push(t),i.sort(l),{tree:i,conflicts:a||"internal_node"}}function m(e,t){for(var n,r,a=u(e),o=0,s=a.length;o<s;o++){var c,l=a[o],d=l.ids;if(d.length>t){n||(n={});var f=d.length-t;c={pos:l.pos+f,ids:h(d,f)};for(var p=0;p<f;p++){var v=l.pos+p+"-"+d[p].id;n[v]=!0}}else c={pos:l.pos,ids:h(d,0)};r=r?g(r,c,!0).tree:[c]}return n&&i(r,function(e,t,r){delete n[t+"-"+r]}),{tree:r,revs:n?Object.keys(n):[]}}function y(e,t,n){var r=g(e,t),i=m(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function b(e,t){for(var n,r=e.slice(),i=t.split("-"),a=parseInt(i[0],10),o=i[1];n=r.pop();){if(n.pos===a&&n.ids[0]===o)return!0;for(var s=n.ids[2],c=0,u=s.length;c<u;c++)r.push({pos:n.pos+1,ids:s[c]})}return!1}function _(e){return e.ids}function w(e,t){t||(t=r(e));for(var n,i=t.substring(t.indexOf("-")+1),a=e.rev_tree.map(_);n=a.pop();){if(n[0]===i)return!!n[1].deleted;a=a.concat(n[2])}}function S(e){return/^_local/.test(e)}function k(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var i=n.pos,a=n.ids,o=a[0],s=a[1],c=a[2],u=0===c.length,l=n.history?n.history.slice():[];if(l.push({id:o,pos:i,opts:s}),u)for(var d=0,f=l.length;d<f;d++){var h=l[d],p=h.pos+"-"+h.id;if(p===e)return i+"-"+o}for(var v=0,g=c.length;v<g;v++)r.push({pos:i+1,ids:c[v],history:l})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}n.d(t,"c",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"e",function(){return w}),n.d(t,"f",function(){return S}),n.d(t,"i",function(){return y}),n.d(t,"g",function(){return b}),n.d(t,"d",function(){return i}),n.d(t,"h",function(){return r}),n.d(t,"b",function(){return k})},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){n(654),e.exports=angular},function(e,t,n){function r(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var i=n(85),a=n(132);r.prototype=i(a.prototype),r.prototype.constructor=r,e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i;++t<n;)this.add(e[t])}var i=n(126),a=n(585),o=n(586);r.prototype.add=r.prototype.push=a,r.prototype.has=o,e.exports=r},function(e,t,n){var r=n(8),i=r.Uint8Array;e.exports=i},function(e,t,n){var r=n(31),i=n(8),a=r(i,"WeakMap");e.exports=a},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}e.exports=n},function(e,t,n){function r(e,t){return!!(null==e?0:e.length)&&i(e,t,0)>-1}var i=n(53);e.exports=r},function(e,t,n){function r(e,t){var n=o(e),r=!n&&a(e),l=!n&&!r&&s(e),f=!n&&!r&&!l&&u(e),h=n||r||l||f,p=h?i(e.length,String):[],v=p.length;for(var g in e)!t&&!d.call(e,g)||h&&("length"==g||l&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||c(g,v))||p.push(g);return p}var i=n(520),a=n(58),o=n(5),s=n(59),c=n(57),u=n(95),l=Object.prototype,d=l.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n){(void 0===n||a(e[t],n))&&(void 0!==n||t in e)||i(e,t,n)}var i=n(51),a=n(40);e.exports=r},function(e,t){function n(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}e.exports=n},function(e,t,n){var r=n(538),i=r();e.exports=i},function(e,t,n){function r(e,t,n){var r=t(e);return a(e)?r:i(r,n(e))}var i=n(129),a=n(5);e.exports=r},function(e,t,n){function r(e){if(!i(e))return a(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var i=n(91),a=n(579),o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=-1,r=a(e)?Array(e.length):[];return i(e,function(e,i,a){r[++n]=t(e,i,a)}),r}var i=n(86),a=n(18);e.exports=r},function(e,t,n){function r(e,t,n){for(var r=-1,s=t.length,c={};++r<s;){var u=t[r],l=i(e,u);n(l,u)&&a(c,o(u,e),l)}return c}var i=n(87),a=n(516),o=n(36);e.exports=r},function(e,t,n){var r=n(32),i=n(227),a=i?function(e,t){return i.set(e,t),e}:r;e.exports=a},function(e,t){function n(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}e.exports=n},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){function r(e){return"function"==typeof e?e:i}var i=n(32);e.exports=r},function(e,t,n){(function(e){function r(e,t){if(t)return e.slice();var n=e.length,r=u?u(n):new e.constructor(n);return e.copy(r),r}var i=n(8),a="object"==typeof t&&t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===a,c=s?i.Buffer:void 0,u=c?c.allocUnsafe:void 0;e.exports=r}).call(t,n(30)(e))},function(e,t,n){function r(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var i=n(134);e.exports=r},function(e,t){function n(e,t,n,i){for(var a=-1,o=e.length,s=n.length,c=-1,u=t.length,l=r(o-s,0),d=Array(u+l),f=!i;++c<u;)d[c]=t[c];for(;++a<s;)(f||a<o)&&(d[n[a]]=e[a]);for(;l--;)d[c++]=e[a++];return d}var r=Math.max;e.exports=n},function(e,t){function n(e,t,n,i){for(var a=-1,o=e.length,s=-1,c=n.length,u=-1,l=t.length,d=r(o-c,0),f=Array(d+l),h=!i;++a<d;)f[a]=e[a];for(var p=a;++u<l;)f[p+u]=t[u];for(;++s<c;)(h||a<o)&&(f[p+n[s]]=e[a++]);return f}var r=Math.max;e.exports=n},function(e,t,n){function r(e,t,n,b,_,w,S,k,T,C){function x(){for(var h=arguments.length,p=Array(h),v=h;v--;)p[v]=arguments[v];if(A)var g=u(x),m=o(p,g);if(b&&(p=i(p,b,_,A)),w&&(p=a(p,w,S,A)),h-=m,A&&h<C){var y=d(p,g);return c(e,t,r,x.placeholder,n,p,y,k,T,C-h)}var R=P?n:this,L=$?R[e]:e;return h=p.length,k?p=l(p,k):O&&h>1&&p.reverse(),E&&T<h&&(p.length=T),this&&this!==f&&this instanceof x&&(L=I||s(L)),L.apply(R,p)}var E=t&m,P=t&h,$=t&p,A=t&(v|g),O=t&y,I=$?void 0:s(e);return x}var i=n(212),a=n(213),o=n(535),s=n(89),c=n(215),u=n(55),l=n(584),d=n(38),f=n(8),h=1,p=2,v=8,g=16,m=128,y=512;e.exports=r},function(e,t,n){function r(e,t,n,r,h,p,v,g,m,y){var b=t&l,_=b?v:void 0,w=b?void 0:v,S=b?p:void 0,k=b?void 0:p;t|=b?d:f,(t&=~(b?f:d))&u||(t&=~(s|c));var T=[e,t,h,S,_,k,w,g,m,y],C=n.apply(void 0,T);return i(e)&&a(C,T),C.placeholder=r,o(C,e,t)}var i=n(564),a=n(231),o=n(232),s=1,c=2,u=4,l=8,d=32,f=64;e.exports=r},function(e,t,n){var r=n(31),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){function r(e,t,n,r,u,l){var d=n&s,f=e.length,h=t.length;if(f!=h&&!(d&&h>f))return!1;var p=l.get(e);if(p&&l.get(t))return p==t;var v=-1,g=!0,m=n&c?new i:void 0;for(l.set(e,t),l.set(t,e);++v<f;){var y=e[v],b=t[v];if(r)var _=d?r(b,y,v,t,e,l):r(y,b,v,e,t,l);if(void 0!==_){if(_)continue;g=!1;break}if(m){if(!a(t,function(e,t){if(!o(m,t)&&(y===e||u(y,e,n,r,l)))return m.push(t)})){g=!1;break}}else if(y!==b&&!u(y,b,n,r,l)){g=!1;break}}return l.delete(e),l.delete(t),g}var i=n(193),a=n(487),o=n(208),s=1,c=2;e.exports=r},function(e,t,n){function r(e){return o(a(e,void 0,i),e+"")}var i=n(237),a=n(229),o=n(141);e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(6))},function(e,t,n){function r(e){return i(e,o,a)}var i=n(202),a=n(138),o=n(19);e.exports=r},function(e,t,n){var r=n(227),i=n(611),a=r?function(e){return r.get(e)}:i;e.exports=a},function(e,t,n){var r=n(129),i=n(137),a=n(138),o=n(247),s=Object.getOwnPropertySymbols,c=s?function(e){for(var t=[];e;)r(t,a(e)),e=i(e);return t}:o;e.exports=c},function(e,t,n){function r(e){return"function"!=typeof e.constructor||o(e)?{}:i(a(e))}var i=n(85),a=n(137),o=n(91);e.exports=r},function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?a(n)&&o(t,n.length):"string"==r&&t in n)&&i(n[t],e)}var i=n(40),a=n(18),o=n(57),s=n(10);e.exports=r},function(e,t,n){function r(e){return e===e&&!i(e)}var i=n(10);e.exports=r},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t,n){var r=n(195),i=r&&new r;e.exports=i},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function r(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,s=a(r.length-t,0),c=Array(s);++o<s;)c[o]=r[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=r[o];return u[t]=n(c),i(e,this,u)}}var i=n(127),a=Math.max;e.exports=r},function(e,t){function n(e,t){return"__proto__"==t?void 0:e[t]}e.exports=n},function(e,t,n){var r=n(206),i=n(233),a=i(r);e.exports=a},function(e,t,n){function r(e,t,n){var r=t+"";return o(e,a(r,s(i(r),n)))}var i=n(551),a=n(561),o=n(141),s=n(597);e.exports=r},function(e,t){function n(e){var t=0,n=0;return function(){var o=a(),s=i-(o-n);if(n=o,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,i=16,a=Date.now;e.exports=n},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,i=r.toString;e.exports=n},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var c=null==n?0:o(n);return c<0&&(c=s(r+c,0)),i(e,a(t,3),c)}var i=n(200),a=n(17),o=n(65),s=Math.max;e.exports=r},function(e,t,n){function r(e){return(null==e?0:e.length)?i(e,1):[]}var i=n(494);e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?void 0:i(e,t);return void 0===r?n:r}var i=n(87);e.exports=r},function(e,t,n){function r(e,t){return null!=e&&a(e,t,i)}var i=n(495),a=n(552);e.exports=r},function(e,t,n){var r=n(235),i=n(542),a=n(32),o=Object.prototype,s=o.toString,c=i(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=s.call(t)),e[t]=n},r(a));e.exports=c},function(e,t,n){function r(e){return a(e)&&i(e)}var i=n(18),a=n(11);e.exports=r},function(e,t,n){function r(e){return"number"==typeof e||a(e)&&i(e)==o}var i=n(23),a=n(11),o="[object Number]";e.exports=r},function(e,t){function n(e){return void 0===e}e.exports=n},function(e,t){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}e.exports=n},function(e,t,n){var r=n(22),i=n(492),a=n(521),o=n(36),s=n(37),c=n(544),u=n(218),l=n(136),d=1,f=2,h=4,p=u(function(e,t){var n={};if(null==e)return n;var u=!1;t=r(t,function(t){return t=o(t,e),u||(u=t.length>1),t}),s(e,l(e),n),u&&(n=i(n,d|f|h,c));for(var p=t.length;p--;)a(n,t[p]);return n});e.exports=p},function(e,t,n){function r(e,t,n,r){return null==e?[]:(a(t)||(t=null==t?[]:[t]),n=r?void 0:n,a(n)||(n=null==n?[]:[n]),i(e,t,n))}var i=n(511),a=n(5);e.exports=r},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){function r(e,t,n){if((e=u(e))&&(n||void 0===t))return e.replace(l,"");if(!e||!(t=i(t)))return e;var r=c(e),d=c(t),f=s(r,d),h=o(r,d)+1;return a(r,f,h).join("")}var i=n(133),a=n(524),o=n(525),s=n(526),c=n(594),u=n(147),l=/^\s+|\s+$/g;e.exports=r},function(e,t,n){"use strict";var r=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,n){"use strict";function r(e){var t={};return h(e,function(e,n){t[e]=n}),t}function i(e,t,n){t&&t[n]&&(e.stats=t[n])}function a(e,t){return b(e,function(e){return _(e.attributes,t)})}function o(e,t){var n=t[0];this._rawResults=t,this.query=n.query,this.parsedQuery=n.parsedQuery,this.hits=n.hits,this.index=n.index,this.hitsPerPage=n.hitsPerPage,this.nbHits=n.nbHits,this.nbPages=n.nbPages,this.page=n.page,this.processingTimeMS=y(t,"processingTimeMS"),this.aroundLatLng=n.aroundLatLng,this.automaticRadius=n.automaticRadius,this.serverUsed=n.serverUsed,this.timeoutCounts=n.timeoutCounts,this.timeoutHits=n.timeoutHits,this.exhaustiveFacetsCount=n.exhaustiveFacetsCount,this.exhaustiveNbHits=n.exhaustiveNbHits,this.userData=n.userData,this.queryID=n.queryID,this.disjunctiveFacets=[],this.hierarchicalFacets=w(e.hierarchicalFacets,function(){return[]}),this.facets=[];var o=e.getRefinedDisjunctiveFacets(),s=r(e.facets),c=r(e.disjunctiveFacets),u=1,l=this;h(n.facets,function(t,r){var o=a(e.hierarchicalFacets,r);if(o){var u=o.attributes.indexOf(r),d=g(e.hierarchicalFacets,{name:o.name});l.hierarchicalFacets[d][u]={attribute:r,data:t,exhaustive:n.exhaustiveFacetsCount}}else{var f,h=-1!==v(e.disjunctiveFacets,r),p=-1!==v(e.facets,r);h&&(f=c[r],l.disjunctiveFacets[f]={name:r,data:t,exhaustive:n.exhaustiveFacetsCount},i(l.disjunctiveFacets[f],n.facets_stats,r)),p&&(f=s[r],l.facets[f]={name:r,data:t,exhaustive:n.exhaustiveFacetsCount},i(l.facets[f],n.facets_stats,r))}}),this.hierarchicalFacets=p(this.hierarchicalFacets),h(o,function(r){var a=t[u],o=e.getHierarchicalFacetByName(r);h(a.facets,function(t,r){var s;if(o){s=g(e.hierarchicalFacets,{name:o.name});var u=g(l.hierarchicalFacets[s],{attribute:r});if(-1===u)return;l.hierarchicalFacets[s][u].data=T({},l.hierarchicalFacets[s][u].data,t)}else{s=c[r];var d=n.facets&&n.facets[r]||{};l.disjunctiveFacets[s]={name:r,data:k({},t,d),exhaustive:a.exhaustiveFacetsCount},i(l.disjunctiveFacets[s],a.facets_stats,r),e.disjunctiveFacetsRefinements[r]&&h(e.disjunctiveFacetsRefinements[r],function(t){!l.disjunctiveFacets[s].data[t]&&v(e.disjunctiveFacetsRefinements[r],t)>-1&&(l.disjunctiveFacets[s].data[t]=0)})}}),u++}),h(e.getRefinedHierarchicalFacets(),function(n){var r=e.getHierarchicalFacetByName(n),i=e._getHierarchicalFacetSeparator(r),a=e.getHierarchicalRefinement(n);if(!(0===a.length||a[0].split(i).length<2)){var o=t[u];h(o.facets,function(t,n){var o=g(e.hierarchicalFacets,{name:r.name}),s=g(l.hierarchicalFacets[o],{attribute:n});if(-1!==s){var c={};if(a.length>0){var u=a[0].split(i)[0];c[u]=l.hierarchicalFacets[o][s].data[u]}l.hierarchicalFacets[o][s].data=k(c,t,l.hierarchicalFacets[o][s].data)}}),u++}}),h(e.facetsExcludes,function(e,t){var r=s[t];l.facets[r]={name:t,data:n.facets[t],exhaustive:n.exhaustiveFacetsCount},h(e,function(e){l.facets[r]=l.facets[r]||{name:t},l.facets[r].data=l.facets[r].data||{},l.facets[r].data[e]=0})}),this.hierarchicalFacets=w(this.hierarchicalFacets,$(e)),this.facets=p(this.facets),this.disjunctiveFacets=p(this.disjunctiveFacets),this._state=e}function s(e,t){var n={name:t};if(e._state.isConjunctiveFacet(t)){var r=b(e.facets,n);return r?w(r.data,function(n,r){return{name:r,count:n,isRefined:e._state.isFacetRefined(t,r),isExcluded:e._state.isExcludeRefined(t,r)}}):[]}if(e._state.isDisjunctiveFacet(t)){var i=b(e.disjunctiveFacets,n);return i?w(i.data,function(n,r){return{name:r,count:n,isRefined:e._state.isDisjunctiveFacetRefined(t,r)}}):[]}if(e._state.isHierarchicalFacet(t))return b(e.hierarchicalFacets,n)}function c(e,t){if(!t.data||0===t.data.length)return t;var n=w(t.data,x(c,e)),r=e(n);return T({},t,{data:r})}function u(e,t){return t.sort(e)}function l(e,t){var n=b(e,{name:t});return n&&n.stats}function d(e,t,n,r,i){var a=b(i,{name:n}),o=m(a,"data["+r+"]"),s=m(a,"exhaustive");return{type:t,attributeName:n,name:r,count:o||0,exhaustive:s||!1}}function f(e,t,n,r){for(var i=b(r,{name:t}),a=e.getHierarchicalFacetByName(t),o=n.split(a.separator),s=o[o.length-1],c=0;void 0!==i&&c<o.length;++c)i=b(i.data,{name:o[c]});var u=m(i,"count"),l=m(i,"exhaustive");return{type:"hierarchical",attributeName:t,name:s,count:u||0,exhaustive:l||!1}}var h=n(41),p=n(600),v=n(94),g=n(236),m=n(238),y=n(619),b=n(93),_=n(602),w=n(24),S=n(246),k=n(142),T=n(146),C=n(42),x=n(612),E=n(613),P=n(251),$=n(632);o.prototype.getFacetByName=function(e){var t={name:e};return b(this.facets,t)||b(this.disjunctiveFacets,t)||b(this.hierarchicalFacets,t)},o.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],o.prototype.getFacetValues=function(e,t){var n=s(this,e);if(!n)throw new Error(e+" is not a retrieved facet.");var r=k({},t,{sortBy:o.DEFAULT_SORT});if(Array.isArray(r.sortBy)){var i=P(r.sortBy,o.DEFAULT_SORT);return Array.isArray(n)?S(n,i[0],i[1]):c(E(S,i[0],i[1]),n)}if(C(r.sortBy))return Array.isArray(n)?n.sort(r.sortBy):c(x(u,r.sortBy),n);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},o.prototype.getFacetStats=function(e){if(this._state.isConjunctiveFacet(e))return l(this.facets,e);if(this._state.isDisjunctiveFacet(e))return l(this.disjunctiveFacets,e);throw new Error(e+" is not present in `facets` or `disjunctiveFacets`")},o.prototype.getRefinements=function(){var e=this._state,t=this,n=[];return h(e.facetsRefinements,function(r,i){h(r,function(r){n.push(d(e,"facet",i,r,t.facets))})}),h(e.facetsExcludes,function(r,i){h(r,function(r){n.push(d(e,"exclude",i,r,t.facets))})}),h(e.disjunctiveFacetsRefinements,function(r,i){h(r,function(r){n.push(d(e,"disjunctive",i,r,t.disjunctiveFacets))})}),h(e.hierarchicalFacetsRefinements,function(r,i){h(r,function(r){n.push(f(e,i,r,t.hierarchicalFacets))})}),h(e.numericRefinements,function(e,t){h(e,function(e,r){h(e,function(e){n.push({type:"numeric",attributeName:t,name:e,numericValue:e,operator:r})})})}),h(e.tagRefinements,function(e){n.push({type:"tag",attributeName:"_tags",name:e})}),n},e.exports=o},function(e,t,n){"use strict";var r=n(64),i=n(93),a=n(617);e.exports=function(e,t){return r(e,function(e,n){var r=n.split(":");if(t&&1===r.length){var o=i(t,function(e){return a(e,n[0])});o&&(r=o.split(":"))}return e[0].push(r[0]),e[1].push(r[1]),e},[[],[]])}},function(e,t,n){"use strict";e.exports="2.26.0"},function(e,t,n){function r(e,t){return function(n,r,a){if("function"==typeof n&&"object"==typeof r||"object"==typeof a)throw new i.AlgoliaSearchError("index.search usage is index.search(query, params, cb)");0===arguments.length||"function"==typeof n?(a=n,n=""):1!==arguments.length&&"function"!=typeof r||(a=r,r=void 0),"object"==typeof n&&null!==n?(r=n,n=void 0):void 0!==n&&null!==n||(n="");var o="";void 0!==n&&(o+=e+"="+encodeURIComponent(n));var s;return void 0!==r&&(r.additionalUA&&(s=r.additionalUA,delete r.additionalUA),o=this.as._getSearchParams(r,o)),this._search(o,t,a,s)}}e.exports=r;var i=n(97)},function(e,t,n){e.exports=function(e,t){var r=n(1005),i=n(45),a={};return i(r(e),function(n){!0!==t(n)&&(a[n]=e[n])}),a}},function(e,t,n){"use strict";function r(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.currentRefinedValueClearAllTemplate=t.currentRefinedValueItemTemplate=t.subsFacetHeader=t.facetHeader=t.facetTemplate=t.projectHitTemplate=t.learningPathHitTemplate=t.defaultSubsHitTemplate=t.defaultHitTemplate=void 0;var i=n(259),a=n(258),o=r(a),s=function(){return""},c={EARLY_ACCESS:"Early Access",AVAILABLE:"Available"},u=function(e){switch(e){case c.EARLY_ACCESS:return'\n        <span class="label-tag label-tag--rounded label-tag--orange list-view-width">\n          Early Access\n        </span>\n      ';default:return""}},l=function(e,t,n){return e!==c.AVAILABLE?"":'\n    <div class="product__info hidden-xs hidden-sm">\n        <span class="product__date mr10">\n            <i class="fa fa-calendar mr5" aria-hidden="true"></i>\n            '+t+'\n        </span>\n        <span class="product__duration">\n            <i class="fa fa-clock-o mr5" aria-hidden="true"></i>\n            '+n+"\n        </span>\n    </div>\n  "},d=function(e,t,n){return e!==c.AVAILABLE?"":'\n    <div class="search-hit__info">\n        <span class="search-hit__date mr10">\n            <i class="fa fa-calendar mr5" aria-hidden="true"></i>\n            '+t+'\n        </span>\n        <span class="search-hit__duration">\n            <i class="fa fa-clock-o mr5" aria-hidden="true"></i>\n            '+n+"\n        </span>\n    </div>\n  "},f=function(e){switch(e){case"Book":return'\n        <div class="product__type">\n          <i class="product__type-icon fa fa-book mr5" aria-hidden="true"></i> Book\n        </div>\n      ';case"Video":return'\n        <div class="product__type">\n          <i class="product__type-icon fa fa-play-circle mr5" aria-hidden="true"></i> Video\n        </div>\n      ';default:return""}},h=function(e){if(e&&e.length>91){var t=e.match(/^(\b.{0,90})(?=\s)\b/m);return t&&t.length?t[0]+"&hellip;":e.slice(0,90)+"&hellip;"}return e},p=function(e){if(e&&e.length>105){var t=e.match(/^(\b.{0,104})(?=\s)\b/m);return t&&t.length?t[0]+"&hellip;":e.slice(0,104)+"&hellip;"}return e},v=function(e){return'\n<div class="search-hit__inner">\n  <div class="search-hit__body">\n    <div class="search-hit__body-left search-hit__project-path">\n      <a href="'+s()+e.seoUrl+'"\n        class="search-hit__cover-wrapper"\n        style="background-color: #'+e.colorCode+'">\n          <img class="search-hit__cover-img search-hit__project-img"\n            src="'+e.imageUrl+'"\n            alt="'+e.title+'"/>\n      </a>\n    </div>\n    <div class="search-hit__body-right">\n      <h2 class="search-hit__project-path-title">'+(0,i.TagToBadge)(e._highlightResult.title.value,e.product_type)+'</h2>\n      <div class="search-hit__info show-list">\n      <span class="search-hit__duration">\n        '+e.duration+'\n      </span>\n      </div>\n      <p class="search-hit__project-path-desc show-list">'+e._highlightResult.description.value+'</p>\n      <div class="search-hit__footer search-hit__cta-height show-list-flex">\n      <a class="btn btn-primary" href="'+s()+e.seoUrl+'">\n        '+(0,o.default)(e.product_type)+'\n      </a>\n    </div>\n    </div>\n  </div>\n  <div class="search-hit__info hidden-list">\n  <span class="search-hit__duration">\n    '+e.duration+'\n  </span>\n  </div>\n  </div>\n  <p class="search-hit__project-path-desc hidden-list">'+e._highlightResult.description.truncatedValue+'</p>\n  </div>\n  <div class="search-hit__footer search-hit__cta-height hidden-list">\n    <a class="btn btn-primary" href="'+s()+e.seoUrl+'">\n      '+(0,o.default)(e.product_type)+"\n    </a>\n  </div>\n</div>\n"},g=function(e){return'\n<div class="search-hit__inner">\n  <div class="search-hit__body">\n    <div class="search-hit__body-left search-hit__project-path">\n      <a href="'+s()+e.seoUrl+'"\n        class="search-hit__cover-wrapper"\n        style="background-color: '+e.colorCode+'">\n        '+e.product_type_image+'\n      </a>\n    </div>\n    <div class="search-hit__body-right">\n      <h2 class="search-hit__project-path-title">'+(0,i.TagToBadge)(e._highlightResult.title.value,e.product_type)+'</h2>\n      <div class="search-hit__info show-list">\n      <span class="search-hit__duration">\n        '+e.duration+'\n      </span>\n      </div>\n      <p class="search-hit__project-path-desc show-list">'+e._highlightResult.description.value+'</p>\n      <div class="search-hit__footer search-hit__cta-height show-list-flex">\n      <a class="btn btn-primary" href="'+s()+e.seoUrl+'">\n        '+(0,o.default)(e.product_type)+'\n      </a>\n    </div>\n    </div>\n  </div>\n  <div class="search-hit__info hidden-list">\n  <span class="search-hit__duration">\n    '+e.duration+'\n  </span>\n  </div>\n  </div>\n  <p class="search-hit__project-path-desc hidden-list">'+e._highlightResult.description.truncatedValue+'</p>\n  </div>\n<div class="search-hit__footer search-hit__cta-height hidden-list">\n  <a class="btn btn-primary" href="'+s()+e.seoUrl+'">\n    '+(0,o.default)(e.product_type)+"\n  </a>\n</div>\n</div>\n"},m=function(e){return'\n<div class="search-hit__inner" data-id="'+e.isbn13+'">\n  <div class="search-hit__body">\n      <div class="search-hit__body-left ">\n          <a href="'+s()+e.maptSeoUrl+'">\n              <img class="search-hit__cover-img"\n                  src="'+e.imageUrl+'"\n                  alt="'+e.title+'"/>\n          </a>\n      </div>\n      <div class="search-hit__body-right">\n          '+u(e.released)+'\n          <h2 class="search-hit__title">'+(0,i.TagToBadge)(h(e._highlightResult.title.value),e.product_type)+'</h2>\n          <div class="search-hit__author hidden-on-mobile hidden-list">By '+e._highlightResult.author.truncatedValue+'</div>\n          <div class="search-hit__author visible-on-list-view-xxs">By '+e._highlightResult.author.value+'</div>\n          <div class="search-hit__published-on show-list">\n           '+e.published_on+'\n          </div>\n          <div class="search-hit__duration visible-on-list-view-xxs hidden-on-mobile">\n            '+e.duration+'\n          </div>\n          <p class="search-hit__desc show-list visible-xs">'+p(e._highlightResult.description.value)+'</p>\n          <p class="search-hit__desc show-list hidden-xs">'+e._highlightResult.description.value+'</p>\n          <div class="search-hit__footer show-list-flex">\n          <a class="btn btn-primary" href="'+s()+e.maptSeoUrl+'">\n              '+(0,o.default)(e.product_type)+'\n          </a>\n        </div>\n      </div>\n  </div>\n  <div class="search-hit__info hidden-list">\n    '+d(e.duration)+'\n    <span class="search-hit__duration">\n      '+e.duration+"  &nbsp;\n    </span>\n    "+d(e.published_on)+'\n    <span class="search-hit__published-on hidden-list">\n      &nbsp; '+e.published_on+'\n    </span>\n  </div>\n  <p class="search-hit__desc hidden-list">'+p(e._highlightResult.description.value)+'</p>\n  <div class="search-hit__footer hidden-list">\n    <a class="btn btn-primary" href="'+s()+e.maptSeoUrl+'">\n        '+(0,o.default)(e.product_type)+"\n    </a>\n  </div>\n</div>\n"},y=function(e){return'\n  <a class="product" href="'+s()+e.seoUrl+'" data-id="'+e.isbn13+'">\n    <div class="product__label">\n      '+f(e.product_type)+'\n      <span class="product__date visible-xs visible-sm pull-right">\n          <i class="fa fa-calendar mr5" aria-hidden="true"></i> '+e.published_on+'\n      </span>\n    </div>\n    <div class="product__inner">\n        <div class="product__img-wrapper">\n          <img class="product__img"\n            src="'+e.imageUrl+'"\n            alt="'+e.title+'"/>\n        </div>\n        <div class="product__content">\n          '+u(e.released)+"\n          "+l(e.released,e.published_on,e.duration)+'\n          <h2 class="product__title">'+(0,i.TagToBadge)(e._highlightResult.title.value,e.product_type)+'</h2>\n          <span class="product__author">By '+e.author+'</span>\n          <p class="product__desc hidden-xs">'+e._highlightResult.description.value+'</p>\n        </div>\n        <div class="product__cta-wrapper">\n          <button class="product__cta">\n              <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>\n          </button>\n        </div>\n    </div>\n  </a>\n'},b=function(e){var t=e.value.toLowerCase().replace(/\s/g,"-").replace(/&/,"and"),n=e.isRefined?"checked":"";return'\n    <label for="'+t+'">\n      <input type="checkbox"\n        id="'+t+'"\n        value="'+e.value+'"\n        '+n+">\n      "+e.label+" ("+e.count+")\n    </label>\n  "},_=function(e){return"\n  <h5>"+e+"</h5>\n"},w=function(e){return"\n  <h5><strong>"+e+'</strong></h5><i class="fa fa-angle-down fa-lg dropdown-arrow"></i>\n'};t.defaultHitTemplate=y,t.defaultSubsHitTemplate=m,t.learningPathHitTemplate=g,t.projectHitTemplate=v,t.facetTemplate=b,t.facetHeader=_,t.subsFacetHeader=w,t.currentRefinedValueItemTemplate='\n  <span class="badge badge-secondary">{{ name }} ({{ count }}) <i class="fa fa-times-circle ml-1"></i></span>\n',t.currentRefinedValueClearAllTemplate='\n  <span class="badge badge-primary">Clear all <i class="fa fa-times-circle ml-1"></i></span>\n'},function(e,t,n){"use strict";function r(e){return"string"==typeof e?e.replace(/<[^>]*?>/g,""):e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n){if(t)return"View Details";switch(e.toLowerCase()){case"book":return n?"Read Again":"Read Now";case"video":return n?"Watch Again":"Watch Now";default:return n?"Start Again":"Get Started"}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=/\[([^*]*?)\]/g;return"string"==typeof e&&e.length>0?t&&!n.test(e)?e+' <br><span class="badge badge-'+t.toLowerCase()+'">\n        '+a(t)+"\n      </span>":e.replace(n,s):e}function a(e){return"books"===e?"Book":"learning-path"===e?"Learning Path":e}function o(e){if(!("string"==typeof e&&e.length>0))return e;var t=e.replace(/\[([^*]*?)\]/g,""),n=t.indexOf("<span");return n>-1?t.slice(0,n):t}function s(e,t,n,r){if(f("Match",e),f("Match1",t),f("Offset",n),f("string",r),!t||!e)return r;var i=(0,d.default)(t);return'<span class="badge badge-'+i.toLowerCase()+'">\n                   <span class="sr-only">[</span>\n                     '+i+'\n                   <span class="sr-only">]</span>\n                 </span>'}Object.defineProperty(t,"__esModule",{value:!0}),t.TagToBadge=i,t.RemoveTag=o;var c=n(44),u=r(c),l=n(257),d=r(l),f=(n(271),(0,u.default)("tag-to-badge:info"))},function(e,t,n){"use strict";(function(t){var r=n(151),i=r;if("production"!==t.env.NODE_ENV){var a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,a="Warning: "+e.replace(/%s/g,function(){return n[i++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(e){}};i=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];a.apply(void 0,[t].concat(r))}}}e.exports=i}).call(t,n(9))},function(e,t){function n(){}function r(e,t){for(var n=i.length,r=[];n--;){var a,o=i[n],s=o[0],c=o[1],u=c[0],l=u<32||u>126||62===u||60===u||38===u||34===u||39===u;if(l&&(a=t[u]=t[u]||{}),c[1]){var d=c[1];e[s]=String.fromCharCode(u)+String.fromCharCode(d),r.push(l&&(a[d]=s))}else e[s]=String.fromCharCode(u),r.push(l&&(a[""]=s))}}var i=[["Aacute",[193]],["aacute",[225]],["Abreve",[258]],["abreve",[259]],["ac",[8766]],["acd",[8767]],["acE",[8766,819]],["Acirc",[194]],["acirc",[226]],["acute",[180]],["Acy",[1040]],["acy",[1072]],["AElig",[198]],["aelig",[230]],["af",[8289]],["Afr",[120068]],["afr",[120094]],["Agrave",[192]],["agrave",[224]],["alefsym",[8501]],["aleph",[8501]],["Alpha",[913]],["alpha",[945]],["Amacr",[256]],["amacr",[257]],["amalg",[10815]],["amp",[38]],["AMP",[38]],["andand",[10837]],["And",[10835]],["and",[8743]],["andd",[10844]],["andslope",[10840]],["andv",[10842]],["ang",[8736]],["ange",[10660]],["angle",[8736]],["angmsdaa",[10664]],["angmsdab",[10665]],["angmsdac",[10666]],["angmsdad",[10667]],["angmsdae",[10668]],["angmsdaf",[10669]],["angmsdag",[10670]],["angmsdah",[10671]],["angmsd",[8737]],["angrt",[8735]],["angrtvb",[8894]],["angrtvbd",[10653]],["angsph",[8738]],["angst",[197]],["angzarr",[9084]],["Aogon",[260]],["aogon",[261]],["Aopf",[120120]],["aopf",[120146]],["apacir",[10863]],["ap",[8776]],["apE",[10864]],["ape",[8778]],["apid",[8779]],["apos",[39]],["ApplyFunction",[8289]],["approx",[8776]],["approxeq",[8778]],["Aring",[197]],["aring",[229]],["Ascr",[119964]],["ascr",[119990]],["Assign",[8788]],["ast",[42]],["asymp",[8776]],["asympeq",[8781]],["Atilde",[195]],["atilde",[227]],["Auml",[196]],["auml",[228]],["awconint",[8755]],["awint",[10769]],["backcong",[8780]],["backepsilon",[1014]],["backprime",[8245]],["backsim",[8765]],["backsimeq",[8909]],["Backslash",[8726]],["Barv",[10983]],["barvee",[8893]],["barwed",[8965]],["Barwed",[8966]],["barwedge",[8965]],["bbrk",[9141]],["bbrktbrk",[9142]],["bcong",[8780]],["Bcy",[1041]],["bcy",[1073]],["bdquo",[8222]],["becaus",[8757]],["because",[8757]],["Because",[8757]],["bemptyv",[10672]],["bepsi",[1014]],["bernou",[8492]],["Bernoullis",[8492]],["Beta",[914]],["beta",[946]],["beth",[8502]],["between",[8812]],["Bfr",[120069]],["bfr",[120095]],["bigcap",[8898]],["bigcirc",[9711]],["bigcup",[8899]],["bigodot",[10752]],["bigoplus",[10753]],["bigotimes",[10754]],["bigsqcup",[10758]],["bigstar",[9733]],["bigtriangledown",[9661]],["bigtriangleup",[9651]],["biguplus",[10756]],["bigvee",[8897]],["bigwedge",[8896]],["bkarow",[10509]],["blacklozenge",[10731]],["blacksquare",[9642]],["blacktriangle",[9652]],["blacktriangledown",[9662]],["blacktriangleleft",[9666]],["blacktriangleright",[9656]],["blank",[9251]],["blk12",[9618]],["blk14",[9617]],["blk34",[9619]],["block",[9608]],["bne",[61,8421]],["bnequiv",[8801,8421]],["bNot",[10989]],["bnot",[8976]],["Bopf",[120121]],["bopf",[120147]],["bot",[8869]],["bottom",[8869]],["bowtie",[8904]],["boxbox",[10697]],["boxdl",[9488]],["boxdL",[9557]],["boxDl",[9558]],["boxDL",[9559]],["boxdr",[9484]],["boxdR",[9554]],["boxDr",[9555]],["boxDR",[9556]],["boxh",[9472]],["boxH",[9552]],["boxhd",[9516]],["boxHd",[9572]],["boxhD",[9573]],["boxHD",[9574]],["boxhu",[9524]],["boxHu",[9575]],["boxhU",[9576]],["boxHU",[9577]],["boxminus",[8863]],["boxplus",[8862]],["boxtimes",[8864]],["boxul",[9496]],["boxuL",[9563]],["boxUl",[9564]],["boxUL",[9565]],["boxur",[9492]],["boxuR",[9560]],["boxUr",[9561]],["boxUR",[9562]],["boxv",[9474]],["boxV",[9553]],["boxvh",[9532]],["boxvH",[9578]],["boxVh",[9579]],["boxVH",[9580]],["boxvl",[9508]],["boxvL",[9569]],["boxVl",[9570]],["boxVL",[9571]],["boxvr",[9500]],["boxvR",[9566]],["boxVr",[9567]],["boxVR",[9568]],["bprime",[8245]],["breve",[728]],["Breve",[728]],["brvbar",[166]],["bscr",[119991]],["Bscr",[8492]],["bsemi",[8271]],["bsim",[8765]],["bsime",[8909]],["bsolb",[10693]],["bsol",[92]],["bsolhsub",[10184]],["bull",[8226]],["bullet",[8226]],["bump",[8782]],["bumpE",[10926]],["bumpe",[8783]],["Bumpeq",[8782]],["bumpeq",[8783]],["Cacute",[262]],["cacute",[263]],["capand",[10820]],["capbrcup",[10825]],["capcap",[10827]],["cap",[8745]],["Cap",[8914]],["capcup",[10823]],["capdot",[10816]],["CapitalDifferentialD",[8517]],["caps",[8745,65024]],["caret",[8257]],["caron",[711]],["Cayleys",[8493]],["ccaps",[10829]],["Ccaron",[268]],["ccaron",[269]],["Ccedil",[199]],["ccedil",[231]],["Ccirc",[264]],["ccirc",[265]],["Cconint",[8752]],["ccups",[10828]],["ccupssm",[10832]],["Cdot",[266]],["cdot",[267]],["cedil",[184]],["Cedilla",[184]],["cemptyv",[10674]],["cent",[162]],["centerdot",[183]],["CenterDot",[183]],["cfr",[120096]],["Cfr",[8493]],["CHcy",[1063]],["chcy",[1095]],["check",[10003]],["checkmark",[10003]],["Chi",[935]],["chi",[967]],["circ",[710]],["circeq",[8791]],["circlearrowleft",[8634]],["circlearrowright",[8635]],["circledast",[8859]],["circledcirc",[8858]],["circleddash",[8861]],["CircleDot",[8857]],["circledR",[174]],["circledS",[9416]],["CircleMinus",[8854]],["CirclePlus",[8853]],["CircleTimes",[8855]],["cir",[9675]],["cirE",[10691]],["cire",[8791]],["cirfnint",[10768]],["cirmid",[10991]],["cirscir",[10690]],["ClockwiseContourIntegral",[8754]],["clubs",[9827]],["clubsuit",[9827]],["colon",[58]],["Colon",[8759]],["Colone",[10868]],["colone",[8788]],["coloneq",[8788]],["comma",[44]],["commat",[64]],["comp",[8705]],["compfn",[8728]],["complement",[8705]],["complexes",[8450]],["cong",[8773]],["congdot",[10861]],["Congruent",[8801]],["conint",[8750]],["Conint",[8751]],["ContourIntegral",[8750]],["copf",[120148]],["Copf",[8450]],["coprod",[8720]],["Coproduct",[8720]],["copy",[169]],["COPY",[169]],["copysr",[8471]],["CounterClockwiseContourIntegral",[8755]],["crarr",[8629]],["cross",[10007]],["Cross",[10799]],["Cscr",[119966]],["cscr",[119992]],["csub",[10959]],["csube",[10961]],["csup",[10960]],["csupe",[10962]],["ctdot",[8943]],["cudarrl",[10552]],["cudarrr",[10549]],["cuepr",[8926]],["cuesc",[8927]],["cularr",[8630]],["cularrp",[10557]],["cupbrcap",[10824]],["cupcap",[10822]],["CupCap",[8781]],["cup",[8746]],["Cup",[8915]],["cupcup",[10826]],["cupdot",[8845]],["cupor",[10821]],["cups",[8746,65024]],["curarr",[8631]],["curarrm",[10556]],["curlyeqprec",[8926]],["curlyeqsucc",[8927]],["curlyvee",[8910]],["curlywedge",[8911]],["curren",[164]],["curvearrowleft",[8630]],["curvearrowright",[8631]],["cuvee",[8910]],["cuwed",[8911]],["cwconint",[8754]],["cwint",[8753]],["cylcty",[9005]],["dagger",[8224]],["Dagger",[8225]],["daleth",[8504]],["darr",[8595]],["Darr",[8609]],["dArr",[8659]],["dash",[8208]],["Dashv",[10980]],["dashv",[8867]],["dbkarow",[10511]],["dblac",[733]],["Dcaron",[270]],["dcaron",[271]],["Dcy",[1044]],["dcy",[1076]],["ddagger",[8225]],["ddarr",[8650]],["DD",[8517]],["dd",[8518]],["DDotrahd",[10513]],["ddotseq",[10871]],["deg",[176]],["Del",[8711]],["Delta",[916]],["delta",[948]],["demptyv",[10673]],["dfisht",[10623]],["Dfr",[120071]],["dfr",[120097]],["dHar",[10597]],["dharl",[8643]],["dharr",[8642]],["DiacriticalAcute",[180]],["DiacriticalDot",[729]],["DiacriticalDoubleAcute",[733]],["DiacriticalGrave",[96]],["DiacriticalTilde",[732]],["diam",[8900]],["diamond",[8900]],["Diamond",[8900]],["diamondsuit",[9830]],["diams",[9830]],["die",[168]],["DifferentialD",[8518]],["digamma",[989]],["disin",[8946]],["div",[247]],["divide",[247]],["divideontimes",[8903]],["divonx",[8903]],["DJcy",[1026]],["djcy",[1106]],["dlcorn",[8990]],["dlcrop",[8973]],["dollar",[36]],["Dopf",[120123]],["dopf",[120149]],["Dot",[168]],["dot",[729]],["DotDot",[8412]],["doteq",[8784]],["doteqdot",[8785]],["DotEqual",[8784]],["dotminus",[8760]],["dotplus",[8724]],["dotsquare",[8865]],["doublebarwedge",[8966]],["DoubleContourIntegral",[8751]],["DoubleDot",[168]],["DoubleDownArrow",[8659]],["DoubleLeftArrow",[8656]],["DoubleLeftRightArrow",[8660]],["DoubleLeftTee",[10980]],["DoubleLongLeftArrow",[10232]],["DoubleLongLeftRightArrow",[10234]],["DoubleLongRightArrow",[10233]],["DoubleRightArrow",[8658]],["DoubleRightTee",[8872]],["DoubleUpArrow",[8657]],["DoubleUpDownArrow",[8661]],["DoubleVerticalBar",[8741]],["DownArrowBar",[10515]],["downarrow",[8595]],["DownArrow",[8595]],["Downarrow",[8659]],["DownArrowUpArrow",[8693]],["DownBreve",[785]],["downdownarrows",[8650]],["downharpoonleft",[8643]],["downharpoonright",[8642]],["DownLeftRightVector",[10576]],["DownLeftTeeVector",[10590]],["DownLeftVectorBar",[10582]],["DownLeftVector",[8637]],["DownRightTeeVector",[10591]],["DownRightVectorBar",[10583]],["DownRightVector",[8641]],["DownTeeArrow",[8615]],["DownTee",[8868]],["drbkarow",[10512]],["drcorn",[8991]],["drcrop",[8972]],["Dscr",[119967]],["dscr",[119993]],["DScy",[1029]],["dscy",[1109]],["dsol",[10742]],["Dstrok",[272]],["dstrok",[273]],["dtdot",[8945]],["dtri",[9663]],["dtrif",[9662]],["duarr",[8693]],["duhar",[10607]],["dwangle",[10662]],["DZcy",[1039]],["dzcy",[1119]],["dzigrarr",[10239]],["Eacute",[201]],["eacute",[233]],["easter",[10862]],["Ecaron",[282]],["ecaron",[283]],["Ecirc",[202]],["ecirc",[234]],["ecir",[8790]],["ecolon",[8789]],["Ecy",[1069]],["ecy",[1101]],["eDDot",[10871]],["Edot",[278]],["edot",[279]],["eDot",[8785]],["ee",[8519]],["efDot",[8786]],["Efr",[120072]],["efr",[120098]],["eg",[10906]],["Egrave",[200]],["egrave",[232]],["egs",[10902]],["egsdot",[10904]],["el",[10905]],["Element",[8712]],["elinters",[9191]],["ell",[8467]],["els",[10901]],["elsdot",[10903]],["Emacr",[274]],["emacr",[275]],["empty",[8709]],["emptyset",[8709]],["EmptySmallSquare",[9723]],["emptyv",[8709]],["EmptyVerySmallSquare",[9643]],["emsp13",[8196]],["emsp14",[8197]],["emsp",[8195]],["ENG",[330]],["eng",[331]],["ensp",[8194]],["Eogon",[280]],["eogon",[281]],["Eopf",[120124]],["eopf",[120150]],["epar",[8917]],["eparsl",[10723]],["eplus",[10865]],["epsi",[949]],["Epsilon",[917]],["epsilon",[949]],["epsiv",[1013]],["eqcirc",[8790]],["eqcolon",[8789]],["eqsim",[8770]],["eqslantgtr",[10902]],["eqslantless",[10901]],["Equal",[10869]],["equals",[61]],["EqualTilde",[8770]],["equest",[8799]],["Equilibrium",[8652]],["equiv",[8801]],["equivDD",[10872]],["eqvparsl",[10725]],["erarr",[10609]],["erDot",[8787]],["escr",[8495]],["Escr",[8496]],["esdot",[8784]],["Esim",[10867]],["esim",[8770]],["Eta",[919]],["eta",[951]],["ETH",[208]],["eth",[240]],["Euml",[203]],["euml",[235]],["euro",[8364]],["excl",[33]],["exist",[8707]],["Exists",[8707]],["expectation",[8496]],["exponentiale",[8519]],["ExponentialE",[8519]],["fallingdotseq",[8786]],["Fcy",[1060]],["fcy",[1092]],["female",[9792]],["ffilig",[64259]],["fflig",[64256]],["ffllig",[64260]],["Ffr",[120073]],["ffr",[120099]],["filig",[64257]],["FilledSmallSquare",[9724]],["FilledVerySmallSquare",[9642]],["fjlig",[102,106]],["flat",[9837]],["fllig",[64258]],["fltns",[9649]],["fnof",[402]],["Fopf",[120125]],["fopf",[120151]],["forall",[8704]],["ForAll",[8704]],["fork",[8916]],["forkv",[10969]],["Fouriertrf",[8497]],["fpartint",[10765]],["frac12",[189]],["frac13",[8531]],["frac14",[188]],["frac15",[8533]],["frac16",[8537]],["frac18",[8539]],["frac23",[8532]],["frac25",[8534]],["frac34",[190]],["frac35",[8535]],["frac38",[8540]],["frac45",[8536]],["frac56",[8538]],["frac58",[8541]],["frac78",[8542]],["frasl",[8260]],["frown",[8994]],["fscr",[119995]],["Fscr",[8497]],["gacute",[501]],["Gamma",[915]],["gamma",[947]],["Gammad",[988]],["gammad",[989]],["gap",[10886]],["Gbreve",[286]],["gbreve",[287]],["Gcedil",[290]],["Gcirc",[284]],["gcirc",[285]],["Gcy",[1043]],["gcy",[1075]],["Gdot",[288]],["gdot",[289]],["ge",[8805]],["gE",[8807]],["gEl",[10892]],["gel",[8923]],["geq",[8805]],["geqq",[8807]],["geqslant",[10878]],["gescc",[10921]],["ges",[10878]],["gesdot",[10880]],["gesdoto",[10882]],["gesdotol",[10884]],["gesl",[8923,65024]],["gesles",[10900]],["Gfr",[120074]],["gfr",[120100]],["gg",[8811]],["Gg",[8921]],["ggg",[8921]],["gimel",[8503]],["GJcy",[1027]],["gjcy",[1107]],["gla",[10917]],["gl",[8823]],["glE",[10898]],["glj",[10916]],["gnap",[10890]],["gnapprox",[10890]],["gne",[10888]],["gnE",[8809]],["gneq",[10888]],["gneqq",[8809]],["gnsim",[8935]],["Gopf",[120126]],["gopf",[120152]],["grave",[96]],["GreaterEqual",[8805]],["GreaterEqualLess",[8923]],["GreaterFullEqual",[8807]],["GreaterGreater",[10914]],["GreaterLess",[8823]],["GreaterSlantEqual",[10878]],["GreaterTilde",[8819]],["Gscr",[119970]],["gscr",[8458]],["gsim",[8819]],["gsime",[10894]],["gsiml",[10896]],["gtcc",[10919]],["gtcir",[10874]],["gt",[62]],["GT",[62]],["Gt",[8811]],["gtdot",[8919]],["gtlPar",[10645]],["gtquest",[10876]],["gtrapprox",[10886]],["gtrarr",[10616]],["gtrdot",[8919]],["gtreqless",[8923]],["gtreqqless",[10892]],["gtrless",[8823]],["gtrsim",[8819]],["gvertneqq",[8809,65024]],["gvnE",[8809,65024]],["Hacek",[711]],["hairsp",[8202]],["half",[189]],["hamilt",[8459]],["HARDcy",[1066]],["hardcy",[1098]],["harrcir",[10568]],["harr",[8596]],["hArr",[8660]],["harrw",[8621]],["Hat",[94]],["hbar",[8463]],["Hcirc",[292]],["hcirc",[293]],["hearts",[9829]],["heartsuit",[9829]],["hellip",[8230]],["hercon",[8889]],["hfr",[120101]],["Hfr",[8460]],["HilbertSpace",[8459]],["hksearow",[10533]],["hkswarow",[10534]],["hoarr",[8703]],["homtht",[8763]],["hookleftarrow",[8617]],["hookrightarrow",[8618]],["hopf",[120153]],["Hopf",[8461]],["horbar",[8213]],["HorizontalLine",[9472]],["hscr",[119997]],["Hscr",[8459]],["hslash",[8463]],["Hstrok",[294]],["hstrok",[295]],["HumpDownHump",[8782]],["HumpEqual",[8783]],["hybull",[8259]],["hyphen",[8208]],["Iacute",[205]],["iacute",[237]],["ic",[8291]],["Icirc",[206]],["icirc",[238]],["Icy",[1048]],["icy",[1080]],["Idot",[304]],["IEcy",[1045]],["iecy",[1077]],["iexcl",[161]],["iff",[8660]],["ifr",[120102]],["Ifr",[8465]],["Igrave",[204]],["igrave",[236]],["ii",[8520]],["iiiint",[10764]],["iiint",[8749]],["iinfin",[10716]],["iiota",[8489]],["IJlig",[306]],["ijlig",[307]],["Imacr",[298]],["imacr",[299]],["image",[8465]],["ImaginaryI",[8520]],["imagline",[8464]],["imagpart",[8465]],["imath",[305]],["Im",[8465]],["imof",[8887]],["imped",[437]],["Implies",[8658]],["incare",[8453]],["in",[8712]],["infin",[8734]],["infintie",[10717]],["inodot",[305]],["intcal",[8890]],["int",[8747]],["Int",[8748]],["integers",[8484]],["Integral",[8747]],["intercal",[8890]],["Intersection",[8898]],["intlarhk",[10775]],["intprod",[10812]],["InvisibleComma",[8291]],["InvisibleTimes",[8290]],["IOcy",[1025]],["iocy",[1105]],["Iogon",[302]],["iogon",[303]],["Iopf",[120128]],["iopf",[120154]],["Iota",[921]],["iota",[953]],["iprod",[10812]],["iquest",[191]],["iscr",[119998]],["Iscr",[8464]],["isin",[8712]],["isindot",[8949]],["isinE",[8953]],["isins",[8948]],["isinsv",[8947]],["isinv",[8712]],["it",[8290]],["Itilde",[296]],["itilde",[297]],["Iukcy",[1030]],["iukcy",[1110]],["Iuml",[207]],["iuml",[239]],["Jcirc",[308]],["jcirc",[309]],["Jcy",[1049]],["jcy",[1081]],["Jfr",[120077]],["jfr",[120103]],["jmath",[567]],["Jopf",[120129]],["jopf",[120155]],["Jscr",[119973]],["jscr",[119999]],["Jsercy",[1032]],["jsercy",[1112]],["Jukcy",[1028]],["jukcy",[1108]],["Kappa",[922]],["kappa",[954]],["kappav",[1008]],["Kcedil",[310]],["kcedil",[311]],["Kcy",[1050]],["kcy",[1082]],["Kfr",[120078]],["kfr",[120104]],["kgreen",[312]],["KHcy",[1061]],["khcy",[1093]],["KJcy",[1036]],["kjcy",[1116]],["Kopf",[120130]],["kopf",[120156]],["Kscr",[119974]],["kscr",[12e4]],["lAarr",[8666]],["Lacute",[313]],["lacute",[314]],["laemptyv",[10676]],["lagran",[8466]],["Lambda",[923]],["lambda",[955]],["lang",[10216]],["Lang",[10218]],["langd",[10641]],["langle",[10216]],["lap",[10885]],["Laplacetrf",[8466]],["laquo",[171]],["larrb",[8676]],["larrbfs",[10527]],["larr",[8592]],["Larr",[8606]],["lArr",[8656]],["larrfs",[10525]],["larrhk",[8617]],["larrlp",[8619]],["larrpl",[10553]],["larrsim",[10611]],["larrtl",[8610]],["latail",[10521]],["lAtail",[10523]],["lat",[10923]],["late",[10925]],["lates",[10925,65024]],["lbarr",[10508]],["lBarr",[10510]],["lbbrk",[10098]],["lbrace",[123]],["lbrack",[91]],["lbrke",[10635]],["lbrksld",[10639]],["lbrkslu",[10637]],["Lcaron",[317]],["lcaron",[318]],["Lcedil",[315]],["lcedil",[316]],["lceil",[8968]],["lcub",[123]],["Lcy",[1051]],["lcy",[1083]],["ldca",[10550]],["ldquo",[8220]],["ldquor",[8222]],["ldrdhar",[10599]],["ldrushar",[10571]],["ldsh",[8626]],["le",[8804]],["lE",[8806]],["LeftAngleBracket",[10216]],["LeftArrowBar",[8676]],["leftarrow",[8592]],["LeftArrow",[8592]],["Leftarrow",[8656]],["LeftArrowRightArrow",[8646]],["leftarrowtail",[8610]],["LeftCeiling",[8968]],["LeftDoubleBracket",[10214]],["LeftDownTeeVector",[10593]],["LeftDownVectorBar",[10585]],["LeftDownVector",[8643]],["LeftFloor",[8970]],["leftharpoondown",[8637]],["leftharpoonup",[8636]],["leftleftarrows",[8647]],["leftrightarrow",[8596]],["LeftRightArrow",[8596]],["Leftrightarrow",[8660]],["leftrightarrows",[8646]],["leftrightharpoons",[8651]],["leftrightsquigarrow",[8621]],["LeftRightVector",[10574]],["LeftTeeArrow",[8612]],["LeftTee",[8867]],["LeftTeeVector",[10586]],["leftthreetimes",[8907]],["LeftTriangleBar",[10703]],["LeftTriangle",[8882]],["LeftTriangleEqual",[8884]],["LeftUpDownVector",[10577]],["LeftUpTeeVector",[10592]],["LeftUpVectorBar",[10584]],["LeftUpVector",[8639]],["LeftVectorBar",[10578]],["LeftVector",[8636]],["lEg",[10891]],["leg",[8922]],["leq",[8804]],["leqq",[8806]],["leqslant",[10877]],["lescc",[10920]],["les",[10877]],["lesdot",[10879]],["lesdoto",[10881]],["lesdotor",[10883]],["lesg",[8922,65024]],["lesges",[10899]],["lessapprox",[10885]],["lessdot",[8918]],["lesseqgtr",[8922]],["lesseqqgtr",[10891]],["LessEqualGreater",[8922]],["LessFullEqual",[8806]],["LessGreater",[8822]],["lessgtr",[8822]],["LessLess",[10913]],["lesssim",[8818]],["LessSlantEqual",[10877]],["LessTilde",[8818]],["lfisht",[10620]],["lfloor",[8970]],["Lfr",[120079]],["lfr",[120105]],["lg",[8822]],["lgE",[10897]],["lHar",[10594]],["lhard",[8637]],["lharu",[8636]],["lharul",[10602]],["lhblk",[9604]],["LJcy",[1033]],["ljcy",[1113]],["llarr",[8647]],["ll",[8810]],["Ll",[8920]],["llcorner",[8990]],["Lleftarrow",[8666]],["llhard",[10603]],["lltri",[9722]],["Lmidot",[319]],["lmidot",[320]],["lmoustache",[9136]],["lmoust",[9136]],["lnap",[10889]],["lnapprox",[10889]],["lne",[10887]],["lnE",[8808]],["lneq",[10887]],["lneqq",[8808]],["lnsim",[8934]],["loang",[10220]],["loarr",[8701]],["lobrk",[10214]],["longleftarrow",[10229]],["LongLeftArrow",[10229]],["Longleftarrow",[10232]],["longleftrightarrow",[10231]],["LongLeftRightArrow",[10231]],["Longleftrightarrow",[10234]],["longmapsto",[10236]],["longrightarrow",[10230]],["LongRightArrow",[10230]],["Longrightarrow",[10233]],["looparrowleft",[8619]],["looparrowright",[8620]],["lopar",[10629]],["Lopf",[120131]],["lopf",[120157]],["loplus",[10797]],["lotimes",[10804]],["lowast",[8727]],["lowbar",[95]],["LowerLeftArrow",[8601]],["LowerRightArrow",[8600]],["loz",[9674]],["lozenge",[9674]],["lozf",[10731]],["lpar",[40]],["lparlt",[10643]],["lrarr",[8646]],["lrcorner",[8991]],["lrhar",[8651]],["lrhard",[10605]],["lrm",[8206]],["lrtri",[8895]],["lsaquo",[8249]],["lscr",[120001]],["Lscr",[8466]],["lsh",[8624]],["Lsh",[8624]],["lsim",[8818]],["lsime",[10893]],["lsimg",[10895]],["lsqb",[91]],["lsquo",[8216]],["lsquor",[8218]],["Lstrok",[321]],["lstrok",[322]],["ltcc",[10918]],["ltcir",[10873]],["lt",[60]],["LT",[60]],["Lt",[8810]],["ltdot",[8918]],["lthree",[8907]],["ltimes",[8905]],["ltlarr",[10614]],["ltquest",[10875]],["ltri",[9667]],["ltrie",[8884]],["ltrif",[9666]],["ltrPar",[10646]],["lurdshar",[10570]],["luruhar",[10598]],["lvertneqq",[8808,65024]],["lvnE",[8808,65024]],["macr",[175]],["male",[9794]],["malt",[10016]],["maltese",[10016]],["Map",[10501]],["map",[8614]],["mapsto",[8614]],["mapstodown",[8615]],["mapstoleft",[8612]],["mapstoup",[8613]],["marker",[9646]],["mcomma",[10793]],["Mcy",[1052]],["mcy",[1084]],["mdash",[8212]],["mDDot",[8762]],["measuredangle",[8737]],["MediumSpace",[8287]],["Mellintrf",[8499]],["Mfr",[120080]],["mfr",[120106]],["mho",[8487]],["micro",[181]],["midast",[42]],["midcir",[10992]],["mid",[8739]],["middot",[183]],["minusb",[8863]],["minus",[8722]],["minusd",[8760]],["minusdu",[10794]],["MinusPlus",[8723]],["mlcp",[10971]],["mldr",[8230]],["mnplus",[8723]],["models",[8871]],["Mopf",[120132]],["mopf",[120158]],["mp",[8723]],["mscr",[120002]],["Mscr",[8499]],["mstpos",[8766]],["Mu",[924]],["mu",[956]],["multimap",[8888]],["mumap",[8888]],["nabla",[8711]],["Nacute",[323]],["nacute",[324]],["nang",[8736,8402]],["nap",[8777]],["napE",[10864,824]],["napid",[8779,824]],["napos",[329]],["napprox",[8777]],["natural",[9838]],["naturals",[8469]],["natur",[9838]],["nbsp",[160]],["nbump",[8782,824]],["nbumpe",[8783,824]],["ncap",[10819]],["Ncaron",[327]],["ncaron",[328]],["Ncedil",[325]],["ncedil",[326]],["ncong",[8775]],["ncongdot",[10861,824]],["ncup",[10818]],["Ncy",[1053]],["ncy",[1085]],["ndash",[8211]],["nearhk",[10532]],["nearr",[8599]],["neArr",[8663]],["nearrow",[8599]],["ne",[8800]],["nedot",[8784,824]],["NegativeMediumSpace",[8203]],["NegativeThickSpace",[8203]],["NegativeThinSpace",[8203]],["NegativeVeryThinSpace",[8203]],["nequiv",[8802]],["nesear",[10536]],["nesim",[8770,824]],["NestedGreaterGreater",[8811]],["NestedLessLess",[8810]],["nexist",[8708]],["nexists",[8708]],["Nfr",[120081]],["nfr",[120107]],["ngE",[8807,824]],["nge",[8817]],["ngeq",[8817]],["ngeqq",[8807,824]],["ngeqslant",[10878,824]],["nges",[10878,824]],["nGg",[8921,824]],["ngsim",[8821]],["nGt",[8811,8402]],["ngt",[8815]],["ngtr",[8815]],["nGtv",[8811,824]],["nharr",[8622]],["nhArr",[8654]],["nhpar",[10994]],["ni",[8715]],["nis",[8956]],["nisd",[8954]],["niv",[8715]],["NJcy",[1034]],["njcy",[1114]],["nlarr",[8602]],["nlArr",[8653]],["nldr",[8229]],["nlE",[8806,824]],["nle",[8816]],["nleftarrow",[8602]],["nLeftarrow",[8653]],["nleftrightarrow",[8622]],["nLeftrightarrow",[8654]],["nleq",[8816]],["nleqq",[8806,824]],["nleqslant",[10877,824]],["nles",[10877,824]],["nless",[8814]],["nLl",[8920,824]],["nlsim",[8820]],["nLt",[8810,8402]],["nlt",[8814]],["nltri",[8938]],["nltrie",[8940]],["nLtv",[8810,824]],["nmid",[8740]],["NoBreak",[8288]],["NonBreakingSpace",[160]],["nopf",[120159]],["Nopf",[8469]],["Not",[10988]],["not",[172]],["NotCongruent",[8802]],["NotCupCap",[8813]],["NotDoubleVerticalBar",[8742]],["NotElement",[8713]],["NotEqual",[8800]],["NotEqualTilde",[8770,824]],["NotExists",[8708]],["NotGreater",[8815]],["NotGreaterEqual",[8817]],["NotGreaterFullEqual",[8807,824]],["NotGreaterGreater",[8811,824]],["NotGreaterLess",[8825]],["NotGreaterSlantEqual",[10878,824]],["NotGreaterTilde",[8821]],["NotHumpDownHump",[8782,824]],["NotHumpEqual",[8783,824]],["notin",[8713]],["notindot",[8949,824]],["notinE",[8953,824]],["notinva",[8713]],["notinvb",[8951]],["notinvc",[8950]],["NotLeftTriangleBar",[10703,824]],["NotLeftTriangle",[8938]],["NotLeftTriangleEqual",[8940]],["NotLess",[8814]],["NotLessEqual",[8816]],["NotLessGreater",[8824]],["NotLessLess",[8810,824]],["NotLessSlantEqual",[10877,824]],["NotLessTilde",[8820]],["NotNestedGreaterGreater",[10914,824]],["NotNestedLessLess",[10913,824]],["notni",[8716]],["notniva",[8716]],["notnivb",[8958]],["notnivc",[8957]],["NotPrecedes",[8832]],["NotPrecedesEqual",[10927,824]],["NotPrecedesSlantEqual",[8928]],["NotReverseElement",[8716]],["NotRightTriangleBar",[10704,824]],["NotRightTriangle",[8939]],["NotRightTriangleEqual",[8941]],["NotSquareSubset",[8847,824]],["NotSquareSubsetEqual",[8930]],["NotSquareSuperset",[8848,824]],["NotSquareSupersetEqual",[8931]],["NotSubset",[8834,8402]],["NotSubsetEqual",[8840]],["NotSucceeds",[8833]],["NotSucceedsEqual",[10928,824]],["NotSucceedsSlantEqual",[8929]],["NotSucceedsTilde",[8831,824]],["NotSuperset",[8835,8402]],["NotSupersetEqual",[8841]],["NotTilde",[8769]],["NotTildeEqual",[8772]],["NotTildeFullEqual",[8775]],["NotTildeTilde",[8777]],["NotVerticalBar",[8740]],["nparallel",[8742]],["npar",[8742]],["nparsl",[11005,8421]],["npart",[8706,824]],["npolint",[10772]],["npr",[8832]],["nprcue",[8928]],["nprec",[8832]],["npreceq",[10927,824]],["npre",[10927,824]],["nrarrc",[10547,824]],["nrarr",[8603]],["nrArr",[8655]],["nrarrw",[8605,824]],["nrightarrow",[8603]],["nRightarrow",[8655]],["nrtri",[8939]],["nrtrie",[8941]],["nsc",[8833]],["nsccue",[8929]],["nsce",[10928,824]],["Nscr",[119977]],["nscr",[120003]],["nshortmid",[8740]],["nshortparallel",[8742]],["nsim",[8769]],["nsime",[8772]],["nsimeq",[8772]],["nsmid",[8740]],["nspar",[8742]],["nsqsube",[8930]],["nsqsupe",[8931]],["nsub",[8836]],["nsubE",[10949,824]],["nsube",[8840]],["nsubset",[8834,8402]],["nsubseteq",[8840]],["nsubseteqq",[10949,824]],["nsucc",[8833]],["nsucceq",[10928,824]],["nsup",[8837]],["nsupE",[10950,824]],["nsupe",[8841]],["nsupset",[8835,8402]],["nsupseteq",[8841]],["nsupseteqq",[10950,824]],["ntgl",[8825]],["Ntilde",[209]],["ntilde",[241]],["ntlg",[8824]],["ntriangleleft",[8938]],["ntrianglelefteq",[8940]],["ntriangleright",[8939]],["ntrianglerighteq",[8941]],["Nu",[925]],["nu",[957]],["num",[35]],["numero",[8470]],["numsp",[8199]],["nvap",[8781,8402]],["nvdash",[8876]],["nvDash",[8877]],["nVdash",[8878]],["nVDash",[8879]],["nvge",[8805,8402]],["nvgt",[62,8402]],["nvHarr",[10500]],["nvinfin",[10718]],["nvlArr",[10498]],["nvle",[8804,8402]],["nvlt",[60,8402]],["nvltrie",[8884,8402]],["nvrArr",[10499]],["nvrtrie",[8885,8402]],["nvsim",[8764,8402]],["nwarhk",[10531]],["nwarr",[8598]],["nwArr",[8662]],["nwarrow",[8598]],["nwnear",[10535]],["Oacute",[211]],["oacute",[243]],["oast",[8859]],["Ocirc",[212]],["ocirc",[244]],["ocir",[8858]],["Ocy",[1054]],["ocy",[1086]],["odash",[8861]],["Odblac",[336]],["odblac",[337]],["odiv",[10808]],["odot",[8857]],["odsold",[10684]],["OElig",[338]],["oelig",[339]],["ofcir",[10687]],["Ofr",[120082]],["ofr",[120108]],["ogon",[731]],["Ograve",[210]],["ograve",[242]],["ogt",[10689]],["ohbar",[10677]],["ohm",[937]],["oint",[8750]],["olarr",[8634]],["olcir",[10686]],["olcross",[10683]],["oline",[8254]],["olt",[10688]],["Omacr",[332]],["omacr",[333]],["Omega",[937]],["omega",[969]],["Omicron",[927]],["omicron",[959]],["omid",[10678]],["ominus",[8854]],["Oopf",[120134]],["oopf",[120160]],["opar",[10679]],["OpenCurlyDoubleQuote",[8220]],["OpenCurlyQuote",[8216]],["operp",[10681]],["oplus",[8853]],["orarr",[8635]],["Or",[10836]],["or",[8744]],["ord",[10845]],["order",[8500]],["orderof",[8500]],["ordf",[170]],["ordm",[186]],["origof",[8886]],["oror",[10838]],["orslope",[10839]],["orv",[10843]],["oS",[9416]],["Oscr",[119978]],["oscr",[8500]],["Oslash",[216]],["oslash",[248]],["osol",[8856]],["Otilde",[213]],["otilde",[245]],["otimesas",[10806]],["Otimes",[10807]],["otimes",[8855]],["Ouml",[214]],["ouml",[246]],["ovbar",[9021]],["OverBar",[8254]],["OverBrace",[9182]],["OverBracket",[9140]],["OverParenthesis",[9180]],["para",[182]],["parallel",[8741]],["par",[8741]],["parsim",[10995]],["parsl",[11005]],["part",[8706]],["PartialD",[8706]],["Pcy",[1055]],["pcy",[1087]],["percnt",[37]],["period",[46]],["permil",[8240]],["perp",[8869]],["pertenk",[8241]],["Pfr",[120083]],["pfr",[120109]],["Phi",[934]],["phi",[966]],["phiv",[981]],["phmmat",[8499]],["phone",[9742]],["Pi",[928]],["pi",[960]],["pitchfork",[8916]],["piv",[982]],["planck",[8463]],["planckh",[8462]],["plankv",[8463]],["plusacir",[10787]],["plusb",[8862]],["pluscir",[10786]],["plus",[43]],["plusdo",[8724]],["plusdu",[10789]],["pluse",[10866]],["PlusMinus",[177]],["plusmn",[177]],["plussim",[10790]],["plustwo",[10791]],["pm",[177]],["Poincareplane",[8460]],["pointint",[10773]],["popf",[120161]],["Popf",[8473]],["pound",[163]],["prap",[10935]],["Pr",[10939]],["pr",[8826]],["prcue",[8828]],["precapprox",[10935]],["prec",[8826]],["preccurlyeq",[8828]],["Precedes",[8826]],["PrecedesEqual",[10927]],["PrecedesSlantEqual",[8828]],["PrecedesTilde",[8830]],["preceq",[10927]],["precnapprox",[10937]],["precneqq",[10933]],["precnsim",[8936]],["pre",[10927]],["prE",[10931]],["precsim",[8830]],["prime",[8242]],["Prime",[8243]],["primes",[8473]],["prnap",[10937]],["prnE",[10933]],["prnsim",[8936]],["prod",[8719]],["Product",[8719]],["profalar",[9006]],["profline",[8978]],["profsurf",[8979]],["prop",[8733]],["Proportional",[8733]],["Proportion",[8759]],["propto",[8733]],["prsim",[8830]],["prurel",[8880]],["Pscr",[119979]],["pscr",[120005]],["Psi",[936]],["psi",[968]],["puncsp",[8200]],["Qfr",[120084]],["qfr",[120110]],["qint",[10764]],["qopf",[120162]],["Qopf",[8474]],["qprime",[8279]],["Qscr",[119980]],["qscr",[120006]],["quaternions",[8461]],["quatint",[10774]],["quest",[63]],["questeq",[8799]],["quot",[34]],["QUOT",[34]],["rAarr",[8667]],["race",[8765,817]],["Racute",[340]],["racute",[341]],["radic",[8730]],["raemptyv",[10675]],["rang",[10217]],["Rang",[10219]],["rangd",[10642]],["range",[10661]],["rangle",[10217]],["raquo",[187]],["rarrap",[10613]],["rarrb",[8677]],["rarrbfs",[10528]],["rarrc",[10547]],["rarr",[8594]],["Rarr",[8608]],["rArr",[8658]],["rarrfs",[10526]],["rarrhk",[8618]],["rarrlp",[8620]],["rarrpl",[10565]],["rarrsim",[10612]],["Rarrtl",[10518]],["rarrtl",[8611]],["rarrw",[8605]],["ratail",[10522]],["rAtail",[10524]],["ratio",[8758]],["rationals",[8474]],["rbarr",[10509]],["rBarr",[10511]],["RBarr",[10512]],["rbbrk",[10099]],["rbrace",[125]],["rbrack",[93]],["rbrke",[10636]],["rbrksld",[10638]],["rbrkslu",[10640]],["Rcaron",[344]],["rcaron",[345]],["Rcedil",[342]],["rcedil",[343]],["rceil",[8969]],["rcub",[125]],["Rcy",[1056]],["rcy",[1088]],["rdca",[10551]],["rdldhar",[10601]],["rdquo",[8221]],["rdquor",[8221]],["CloseCurlyDoubleQuote",[8221]],["rdsh",[8627]],["real",[8476]],["realine",[8475]],["realpart",[8476]],["reals",[8477]],["Re",[8476]],["rect",[9645]],["reg",[174]],["REG",[174]],["ReverseElement",[8715]],["ReverseEquilibrium",[8651]],["ReverseUpEquilibrium",[10607]],["rfisht",[10621]],["rfloor",[8971]],["rfr",[120111]],["Rfr",[8476]],["rHar",[10596]],["rhard",[8641]],["rharu",[8640]],["rharul",[10604]],["Rho",[929]],["rho",[961]],["rhov",[1009]],["RightAngleBracket",[10217]],["RightArrowBar",[8677]],["rightarrow",[8594]],["RightArrow",[8594]],["Rightarrow",[8658]],["RightArrowLeftArrow",[8644]],["rightarrowtail",[8611]],["RightCeiling",[8969]],["RightDoubleBracket",[10215]],["RightDownTeeVector",[10589]],["RightDownVectorBar",[10581]],["RightDownVector",[8642]],["RightFloor",[8971]],["rightharpoondown",[8641]],["rightharpoonup",[8640]],["rightleftarrows",[8644]],["rightleftharpoons",[8652]],["rightrightarrows",[8649]],["rightsquigarrow",[8605]],["RightTeeArrow",[8614]],["RightTee",[8866]],["RightTeeVector",[10587]],["rightthreetimes",[8908]],["RightTriangleBar",[10704]],["RightTriangle",[8883]],["RightTriangleEqual",[8885]],["RightUpDownVector",[10575]],["RightUpTeeVector",[10588]],["RightUpVectorBar",[10580]],["RightUpVector",[8638]],["RightVectorBar",[10579]],["RightVector",[8640]],["ring",[730]],["risingdotseq",[8787]],["rlarr",[8644]],["rlhar",[8652]],["rlm",[8207]],["rmoustache",[9137]],["rmoust",[9137]],["rnmid",[10990]],["roang",[10221]],["roarr",[8702]],["robrk",[10215]],["ropar",[10630]],["ropf",[120163]],["Ropf",[8477]],["roplus",[10798]],["rotimes",[10805]],["RoundImplies",[10608]],["rpar",[41]],["rpargt",[10644]],["rppolint",[10770]],["rrarr",[8649]],["Rrightarrow",[8667]],["rsaquo",[8250]],["rscr",[120007]],["Rscr",[8475]],["rsh",[8625]],["Rsh",[8625]],["rsqb",[93]],["rsquo",[8217]],["rsquor",[8217]],["CloseCurlyQuote",[8217]],["rthree",[8908]],["rtimes",[8906]],["rtri",[9657]],["rtrie",[8885]],["rtrif",[9656]],["rtriltri",[10702]],["RuleDelayed",[10740]],["ruluhar",[10600]],["rx",[8478]],["Sacute",[346]],["sacute",[347]],["sbquo",[8218]],["scap",[10936]],["Scaron",[352]],["scaron",[353]],["Sc",[10940]],["sc",[8827]],["sccue",[8829]],["sce",[10928]],["scE",[10932]],["Scedil",[350]],["scedil",[351]],["Scirc",[348]],["scirc",[349]],["scnap",[10938]],["scnE",[10934]],["scnsim",[8937]],["scpolint",[10771]],["scsim",[8831]],["Scy",[1057]],["scy",[1089]],["sdotb",[8865]],["sdot",[8901]],["sdote",[10854]],["searhk",[10533]],["searr",[8600]],["seArr",[8664]],["searrow",[8600]],["sect",[167]],["semi",[59]],["seswar",[10537]],["setminus",[8726]],["setmn",[8726]],["sext",[10038]],["Sfr",[120086]],["sfr",[120112]],["sfrown",[8994]],["sharp",[9839]],["SHCHcy",[1065]],["shchcy",[1097]],["SHcy",[1064]],["shcy",[1096]],["ShortDownArrow",[8595]],["ShortLeftArrow",[8592]],["shortmid",[8739]],["shortparallel",[8741]],["ShortRightArrow",[8594]],["ShortUpArrow",[8593]],["shy",[173]],["Sigma",[931]],["sigma",[963]],["sigmaf",[962]],["sigmav",[962]],["sim",[8764]],["simdot",[10858]],["sime",[8771]],["simeq",[8771]],["simg",[10910]],["simgE",[10912]],["siml",[10909]],["simlE",[10911]],["simne",[8774]],["simplus",[10788]],["simrarr",[10610]],["slarr",[8592]],["SmallCircle",[8728]],["smallsetminus",[8726]],["smashp",[10803]],["smeparsl",[10724]],["smid",[8739]],["smile",[8995]],["smt",[10922]],["smte",[10924]],["smtes",[10924,65024]],["SOFTcy",[1068]],["softcy",[1100]],["solbar",[9023]],["solb",[10692]],["sol",[47]],["Sopf",[120138]],["sopf",[120164]],["spades",[9824]],["spadesuit",[9824]],["spar",[8741]],["sqcap",[8851]],["sqcaps",[8851,65024]],["sqcup",[8852]],["sqcups",[8852,65024]],["Sqrt",[8730]],["sqsub",[8847]],["sqsube",[8849]],["sqsubset",[8847]],["sqsubseteq",[8849]],["sqsup",[8848]],["sqsupe",[8850]],["sqsupset",[8848]],["sqsupseteq",[8850]],["square",[9633]],["Square",[9633]],["SquareIntersection",[8851]],["SquareSubset",[8847]],["SquareSubsetEqual",[8849]],["SquareSuperset",[8848]],["SquareSupersetEqual",[8850]],["SquareUnion",[8852]],["squarf",[9642]],["squ",[9633]],["squf",[9642]],["srarr",[8594]],["Sscr",[119982]],["sscr",[120008]],["ssetmn",[8726]],["ssmile",[8995]],["sstarf",[8902]],["Star",[8902]],["star",[9734]],["starf",[9733]],["straightepsilon",[1013]],["straightphi",[981]],["strns",[175]],["sub",[8834]],["Sub",[8912]],["subdot",[10941]],["subE",[10949]],["sube",[8838]],["subedot",[10947]],["submult",[10945]],["subnE",[10955]],["subne",[8842]],["subplus",[10943]],["subrarr",[10617]],["subset",[8834]],["Subset",[8912]],["subseteq",[8838]],["subseteqq",[10949]],["SubsetEqual",[8838]],["subsetneq",[8842]],["subsetneqq",[10955]],["subsim",[10951]],["subsub",[10965]],["subsup",[10963]],["succapprox",[10936]],["succ",[8827]],["succcurlyeq",[8829]],["Succeeds",[8827]],["SucceedsEqual",[10928]],["SucceedsSlantEqual",[8829]],["SucceedsTilde",[8831]],["succeq",[10928]],["succnapprox",[10938]],["succneqq",[10934]],["succnsim",[8937]],["succsim",[8831]],["SuchThat",[8715]],["sum",[8721]],["Sum",[8721]],["sung",[9834]],["sup1",[185]],["sup2",[178]],["sup3",[179]],["sup",[8835]],["Sup",[8913]],["supdot",[10942]],["supdsub",[10968]],["supE",[10950]],["supe",[8839]],["supedot",[10948]],["Superset",[8835]],["SupersetEqual",[8839]],["suphsol",[10185]],["suphsub",[10967]],["suplarr",[10619]],["supmult",[10946]],["supnE",[10956]],["supne",[8843]],["supplus",[10944]],["supset",[8835]],["Supset",[8913]],["supseteq",[8839]],["supseteqq",[10950]],["supsetneq",[8843]],["supsetneqq",[10956]],["supsim",[10952]],["supsub",[10964]],["supsup",[10966]],["swarhk",[10534]],["swarr",[8601]],["swArr",[8665]],["swarrow",[8601]],["swnwar",[10538]],["szlig",[223]],["Tab",[9]],["target",[8982]],["Tau",[932]],["tau",[964]],["tbrk",[9140]],["Tcaron",[356]],["tcaron",[357]],["Tcedil",[354]],["tcedil",[355]],["Tcy",[1058]],["tcy",[1090]],["tdot",[8411]],["telrec",[8981]],["Tfr",[120087]],["tfr",[120113]],["there4",[8756]],["therefore",[8756]],["Therefore",[8756]],["Theta",[920]],["theta",[952]],["thetasym",[977]],["thetav",[977]],["thickapprox",[8776]],["thicksim",[8764]],["ThickSpace",[8287,8202]],["ThinSpace",[8201]],["thinsp",[8201]],["thkap",[8776]],["thksim",[8764]],["THORN",[222]],["thorn",[254]],["tilde",[732]],["Tilde",[8764]],["TildeEqual",[8771]],["TildeFullEqual",[8773]],["TildeTilde",[8776]],["timesbar",[10801]],["timesb",[8864]],["times",[215]],["timesd",[10800]],["tint",[8749]],["toea",[10536]],["topbot",[9014]],["topcir",[10993]],["top",[8868]],["Topf",[120139]],["topf",[120165]],["topfork",[10970]],["tosa",[10537]],["tprime",[8244]],["trade",[8482]],["TRADE",[8482]],["triangle",[9653]],["triangledown",[9663]],["triangleleft",[9667]],["trianglelefteq",[8884]],["triangleq",[8796]],["triangleright",[9657]],["trianglerighteq",[8885]],["tridot",[9708]],["trie",[8796]],["triminus",[10810]],["TripleDot",[8411]],["triplus",[10809]],["trisb",[10701]],["tritime",[10811]],["trpezium",[9186]],["Tscr",[119983]],["tscr",[120009]],["TScy",[1062]],["tscy",[1094]],["TSHcy",[1035]],["tshcy",[1115]],["Tstrok",[358]],["tstrok",[359]],["twixt",[8812]],["twoheadleftarrow",[8606]],["twoheadrightarrow",[8608]],["Uacute",[218]],["uacute",[250]],["uarr",[8593]],["Uarr",[8607]],["uArr",[8657]],["Uarrocir",[10569]],["Ubrcy",[1038]],["ubrcy",[1118]],["Ubreve",[364]],["ubreve",[365]],["Ucirc",[219]],["ucirc",[251]],["Ucy",[1059]],["ucy",[1091]],["udarr",[8645]],["Udblac",[368]],["udblac",[369]],["udhar",[10606]],["ufisht",[10622]],["Ufr",[120088]],["ufr",[120114]],["Ugrave",[217]],["ugrave",[249]],["uHar",[10595]],["uharl",[8639]],["uharr",[8638]],["uhblk",[9600]],["ulcorn",[8988]],["ulcorner",[8988]],["ulcrop",[8975]],["ultri",[9720]],["Umacr",[362]],["umacr",[363]],["uml",[168]],["UnderBar",[95]],["UnderBrace",[9183]],["UnderBracket",[9141]],["UnderParenthesis",[9181]],["Union",[8899]],["UnionPlus",[8846]],["Uogon",[370]],["uogon",[371]],["Uopf",[120140]],["uopf",[120166]],["UpArrowBar",[10514]],["uparrow",[8593]],["UpArrow",[8593]],["Uparrow",[8657]],["UpArrowDownArrow",[8645]],["updownarrow",[8597]],["UpDownArrow",[8597]],["Updownarrow",[8661]],["UpEquilibrium",[10606]],["upharpoonleft",[8639]],["upharpoonright",[8638]],["uplus",[8846]],["UpperLeftArrow",[8598]],["UpperRightArrow",[8599]],["upsi",[965]],["Upsi",[978]],["upsih",[978]],["Upsilon",[933]],["upsilon",[965]],["UpTeeArrow",[8613]],["UpTee",[8869]],["upuparrows",[8648]],["urcorn",[8989]],["urcorner",[8989]],["urcrop",[8974]],["Uring",[366]],["uring",[367]],["urtri",[9721]],["Uscr",[119984]],["uscr",[120010]],["utdot",[8944]],["Utilde",[360]],["utilde",[361]],["utri",[9653]],["utrif",[9652]],["uuarr",[8648]],["Uuml",[220]],["uuml",[252]],["uwangle",[10663]],["vangrt",[10652]],["varepsilon",[1013]],["varkappa",[1008]],["varnothing",[8709]],["varphi",[981]],["varpi",[982]],["varpropto",[8733]],["varr",[8597]],["vArr",[8661]],["varrho",[1009]],["varsigma",[962]],["varsubsetneq",[8842,65024]],["varsubsetneqq",[10955,65024]],["varsupsetneq",[8843,65024]],["varsupsetneqq",[10956,65024]],["vartheta",[977]],["vartriangleleft",[8882]],["vartriangleright",[8883]],["vBar",[10984]],["Vbar",[10987]],["vBarv",[10985]],["Vcy",[1042]],["vcy",[1074]],["vdash",[8866]],["vDash",[8872]],["Vdash",[8873]],["VDash",[8875]],["Vdashl",[10982]],["veebar",[8891]],["vee",[8744]],["Vee",[8897]],["veeeq",[8794]],["vellip",[8942]],["verbar",[124]],["Verbar",[8214]],["vert",[124]],["Vert",[8214]],["VerticalBar",[8739]],["VerticalLine",[124]],["VerticalSeparator",[10072]],["VerticalTilde",[8768]],["VeryThinSpace",[8202]],["Vfr",[120089]],["vfr",[120115]],["vltri",[8882]],["vnsub",[8834,8402]],["vnsup",[8835,8402]],["Vopf",[120141]],["vopf",[120167]],["vprop",[8733]],["vrtri",[8883]],["Vscr",[119985]],["vscr",[120011]],["vsubnE",[10955,65024]],["vsubne",[8842,65024]],["vsupnE",[10956,65024]],["vsupne",[8843,65024]],["Vvdash",[8874]],["vzigzag",[10650]],["Wcirc",[372]],["wcirc",[373]],["wedbar",[10847]],["wedge",[8743]],["Wedge",[8896]],["wedgeq",[8793]],["weierp",[8472]],["Wfr",[120090]],["wfr",[120116]],["Wopf",[120142]],["wopf",[120168]],["wp",[8472]],["wr",[8768]],["wreath",[8768]],["Wscr",[119986]],["wscr",[120012]],["xcap",[8898]],["xcirc",[9711]],["xcup",[8899]],["xdtri",[9661]],["Xfr",[120091]],["xfr",[120117]],["xharr",[10231]],["xhArr",[10234]],["Xi",[926]],["xi",[958]],["xlarr",[10229]],["xlArr",[10232]],["xmap",[10236]],["xnis",[8955]],["xodot",[10752]],["Xopf",[120143]],["xopf",[120169]],["xoplus",[10753]],["xotime",[10754]],["xrarr",[10230]],["xrArr",[10233]],["Xscr",[119987]],["xscr",[120013]],["xsqcup",[10758]],["xuplus",[10756]],["xutri",[9651]],["xvee",[8897]],["xwedge",[8896]],["Yacute",[221]],["yacute",[253]],["YAcy",[1071]],["yacy",[1103]],["Ycirc",[374]],["ycirc",[375]],["Ycy",[1067]],["ycy",[1099]],["yen",[165]],["Yfr",[120092]],["yfr",[120118]],["YIcy",[1031]],["yicy",[1111]],["Yopf",[120144]],["yopf",[120170]],["Yscr",[119988]],["yscr",[120014]],["YUcy",[1070]],["yucy",[1102]],["yuml",[255]],["Yuml",[376]],["Zacute",[377]],["zacute",[378]],["Zcaron",[381]],["zcaron",[382]],["Zcy",[1047]],["zcy",[1079]],["Zdot",[379]],["zdot",[380]],["zeetrf",[8488]],["ZeroWidthSpace",[8203]],["Zeta",[918]],["zeta",[950]],["zfr",[120119]],["Zfr",[8488]],["ZHcy",[1046]],["zhcy",[1078]],["zigrarr",[8669]],["zopf",[120171]],["Zopf",[8484]],["Zscr",[119989]],["zscr",[120015]],["zwj",[8205]],["zwnj",[8204]]],a={},o={};r(a,o),n.prototype.decode=function(e){return e&&e.length?e.replace(/&(#?[\w\d]+);?/g,function(e,t){var n;if("#"===t.charAt(0)){var r="x"===t.charAt(1)?parseInt(t.substr(2).toLowerCase(),16):parseInt(t.substr(1));isNaN(r)||r<-32768||r>65535||(n=String.fromCharCode(r))}else n=a[t];return n||e}):""},n.decode=function(e){return(new n).decode(e)},n.prototype.encode=function(e){if(!e||!e.length)return"";for(var t=e.length,n="",r=0;r<t;){var i=o[e.charCodeAt(r)];if(i){var a=i[e.charCodeAt(r+1)];if(a?r++:a=i[""],a){n+="&"+a+";",r++;continue}}n+=e.charAt(r),r++}return n},n.encode=function(e){return(new n).encode(e)},n.prototype.encodeNonUTF=function(e){if(!e||!e.length)return"";for(var t=e.length,n="",r=0;r<t;){var i=e.charCodeAt(r),a=o[i];if(a){var s=a[e.charCodeAt(r+1)];if(s?r++:s=a[""],s){n+="&"+s+";",r++;continue}}n+=i<32||i>126?"&#"+i+";":e.charAt(r),r++}return n},n.encodeNonUTF=function(e){return(new n).encodeNonUTF(e)},n.prototype.encodeNonASCII=function(e){if(!e||!e.length)return"";for(var t=e.length,n="",r=0;r<t;){var i=e.charCodeAt(r);i<=255?n+=e[r++]:(n+="&#"+i+";",r++)}return n},n.encodeNonASCII=function(e){return(new n).encodeNonASCII(e)},e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(3),s=(n.n(o),n(1)),c=n(179),u=n.n(c),l=n(14),d=n(338),f=n.n(d),h=n(2),p=n.n(h),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),g(t,[{key:"renderWithResults",value:function(){var e=this,t=u()(this.props.hits,function(t,n){var r=v({},t,{__hitIndex:n});return s.default.createElement(l.a,v({data:r,key:r.objectID,rootProps:{className:e.props.cssClasses.item},templateKey:"item"},e.props.templateProps))});return s.default.createElement("div",{className:this.props.cssClasses.root},t)}},{key:"renderAllResults",value:function(){var e=p()(this.props.cssClasses.root,this.props.cssClasses.allItems);return s.default.createElement(l.a,v({data:this.props.results,rootProps:{className:e},templateKey:"allItems"},this.props.templateProps))}},{key:"renderNoResults",value:function(){var e=p()(this.props.cssClasses.root,this.props.cssClasses.empty);return s.default.createElement(l.a,v({data:this.props.results,rootProps:{className:e},templateKey:"empty"},this.props.templateProps))}},{key:"render",value:function(){var e=this.props.results.hits.length>0,t=f()(this.props,"templateProps.templates.allItems");return e?t?this.renderAllResults():this.renderWithResults():this.renderNoResults()}}]),t}(s.Component);m.defaultProps={results:{hits:[]}},t.a=m},function(e,t,n){"use strict";function r(e,t){return n.i(l.a)(e,f),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.attributes,o=n.separator,c=void 0===o?" > ":o,l=n.rootPath,h=void 0===l?null:l,p=d(r,1),v=p[0];if(!r||!Array.isArray(r)||0===r.length)throw new Error(f);return{getConfiguration:function(e){if(e.hierarchicalFacets){var t=s()(e.hierarchicalFacets,function(e){return e.name===v});if(t)return u()(t.attributes,r)&&t.separator===c||console.warn("Using Breadcrumb & HierarchicalMenu on the same facet with different options. Adding that one will override the configuration of the HierarchicalMenu. Check your options."),{}}return{hierarchicalFacets:[{attributes:r,name:v,separator:c,rootPath:h}]}},init:function(t){var r=t.createURL,i=t.helper,a=t.instantSearchInstance;this._createURL=function(e){if(!e){var t=i.getHierarchicalFacetBreadcrumb(v);if(t.length>0)return r(i.state.toggleRefinement(v,t[0]))}return r(i.state.toggleRefinement(v,e))},this._refine=function(e){if(e)i.toggleRefinement(v,e).search();else{var t=i.getHierarchicalFacetBreadcrumb(v);t.length>0&&i.toggleRefinement(v,t[0]).search()}},e({createURL:this._createURL,canRefine:!1,instantSearchInstance:a,items:[],refine:this._refine,widgetParams:n},!0)},render:function(t){var r=t.instantSearchInstance,o=t.results,s=t.state,c=d(s.hierarchicalFacets,1),u=c[0].name,l=o.getFacetValues(u),f=a(i(l));e({canRefine:f.length>0,createURL:this._createURL,instantSearchInstance:r,items:f,refine:this._refine,widgetParams:n},!1)},dispose:function(){t()}}}}function i(e){return e.data.reduce(function(e,t){if(t.isRefined&&(e.push({name:t.name,value:t.path}),Array.isArray(t.data))){var n=i(t);e=e.concat(n)}return e},[])}function a(e){return e.map(function(t,n){return{name:t.name,value:n+1===e.length?null:e[n+1].value}})}var o=n(27),s=n.n(o),c=n(16),u=n.n(c),l=n(0);t.a=r;var d=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f="Usage:\nvar customBreadcrumb = connectBreadcrumb(function renderFn(params, isFirstRendering) {\n  // params = {\n  //   createURL,\n  //   items,\n  //   refine,\n  //   instantSearchInstance,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customBreadcrumb({\n    attributes,\n    [ rootPath = null ],\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectBreadcrumb.html\n"},function(e,t,n){"use strict";function r(e,t){return n.i(i.a)(e,a),function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.excludeAttributes,s=void 0===a?[]:a,c=r.clearsQuery,u=void 0!==c&&c;return{_refine:function(){},_cachedRefine:function(){this._refine()},init:function(t){var a=t.helper,c=t.instantSearchInstance,l=t.createURL;this._cachedRefine=this._cachedRefine.bind(this);var d=n.i(i.h)({},a.state).map(function(e){return e.attributeName}).filter(function(e){return-1===s.indexOf(e)}),f=u?0!==d.length||""!==a.state.query:0!==d.length,h=function(){return l(n.i(i.g)(a.state,[],u))};this._refine=o({helper:a,clearAttributes:d,hasRefinements:f,clearsQuery:u}),e({refine:this._cachedRefine,hasRefinements:f,createURL:h,instantSearchInstance:c,widgetParams:r},!0)},render:function(t){var a=t.results,c=t.state,l=t.createURL,d=t.helper,f=t.instantSearchInstance,h=n.i(i.h)(a,c).map(function(e){return e.attributeName}).filter(function(e){return-1===s.indexOf(e)}),p=u?0!==h.length||""!==d.state.query:0!==h.length,v=function(){return l(n.i(i.g)(c,[],u))};this._refine=o({helper:d,clearAttributes:h,hasRefinements:p,clearsQuery:u}),e({refine:this._cachedRefine,hasRefinements:p,createURL:v,instantSearchInstance:f,widgetParams:r},!1)},dispose:function(){t()}}}}var i=n(0);t.a=r;var a="Usage:\nvar customClearAll = connectClearAll(function render(params, isFirstRendering) {\n  // params = {\n  //   refine,\n  //   hasRefinements,\n  //   createURL,\n  //   instantSearchInstance,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customClearAll({\n    [ excludeAttributes = [] ],\n    [ clearsQuery = false ]\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectClearAll.html\n",o=function(e){var t=e.helper,r=e.clearAttributes,a=e.hasRefinements,o=e.clearsQuery;return function(){a&&n.i(i.f)(t,r,o)}}},function(e,t,n){"use strict";function r(e,t){if(a()(e)&&!a()(t)||!a()(e)&&a()(t))throw new Error(u);return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!s()(r.searchParameters))throw new Error(u);return{getConfiguration:function(){return r.searchParameters},init:function(t){var n=t.helper;this._refine=this.refine(n),a()(e)&&e({refine:this._refine,widgetParams:r},!0)},refine:function(e){var t=this;return function(i){var a=t.removeSearchParameters(e.getState()),o=n.i(c.a)({})(a,{getConfiguration:function(){return i}});e.setState(o).search(),r.searchParameters=i}},render:function(){e&&e({refine:this._refine,widgetParams:r},!1)},dispose:function(e){var n=e.state;return t&&t(),this.removeSearchParameters(n)},removeSearchParameters:function(e){return e.mutateMe(function(e){Object.keys(r.searchParameters).forEach(function(t){delete e[t]})})}}}}var i=n(49),a=n.n(i),o=n(50),s=n.n(o),c=n(283);t.a=r;var u="Usage:\nvar customConfigureWidget = connectConfigure(\n  function renderFn(params, isFirstRendering) {\n    // params = {\n    //   refine,\n    //   widgetParams\n    // }\n  },\n  function disposeFn() {}\n)\n"},function(e,t,n){"use strict";function r(e,t){return n.i(A.a)(e,O),function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.attributes,a=void 0===i?[]:i,u=r.onlyListedAttributes,l=void 0!==u&&u,f=r.clearsQuery,p=void 0!==f&&f,g=m()(a)&&E()(a,function(e,t){return e&&b()(t)&&v()(t.name)&&(d()(t.label)||v()(t.label))&&(d()(t.template)||v()(t.template)||w()(t.template))&&(d()(t.transformData)||w()(t.transformData))},!0);if(!m()(a)||!g||!h()(l))throw new Error(O);var y=C()(a,function(e){return e.name}),_=l?y:[],S=E()(a,function(e,t){return e[t.name]=t,e},{});return{init:function(t){var i=t.helper,a=t.createURL,u=t.instantSearchInstance;this._clearRefinementsAndSearch=A.f.bind(null,i,_,p);var d=a(n.i(A.g)(i.state,_,p)),f=o({},i.state,y,l,p),h=function(e){return a(s(i.state,e))},v=function(e){return c(i,e)};e({attributes:S,clearAllClick:this._clearRefinementsAndSearch,clearAllURL:d,refine:v,createURL:h,refinements:f,instantSearchInstance:u,widgetParams:r},!0)},render:function(t){var i=t.results,a=t.helper,u=t.state,d=t.createURL,f=t.instantSearchInstance,h=d(n.i(A.g)(u,_,p)),v=o(i,u,y,l,p),g=function(e){return d(s(a.state,e))},m=function(e){return c(a,e)};e({attributes:S,clearAllClick:this._clearRefinementsAndSearch,clearAllURL:h,refine:m,createURL:g,refinements:v,instantSearchInstance:f,widgetParams:r},!1)},dispose:function(){t()}}}}function i(e,t,n){var r=e.indexOf(n);return-1!==r?r:e.length+t.indexOf(n)}function a(e,t,n,r){var a=i(e,t,n.attributeName),o=i(e,t,r.attributeName);return a===o?n.name===r.name?0:n.name<r.name?-1:1:a<o?-1:1}function o(e,t,r,i,o){var s=n.i(A.h)(e,t,o),c=E()(s,function(e,t){return-1===r.indexOf(t.attributeName)&&e.indexOf(-1===t.attributeName)&&e.push(t.attributeName),e},[]);return s=s.sort(a.bind(null,r,c)),i&&!k()(r)&&(s=$()(s,function(e){return-1!==r.indexOf(e.attributeName)})),s.map(u)}function s(e,t){switch(t.type){case"facet":return e.removeFacetRefinement(t.attributeName,t.name);case"disjunctive":return e.removeDisjunctiveFacetRefinement(t.attributeName,t.name);case"hierarchical":return e.clearRefinements(t.attributeName);case"exclude":return e.removeExcludeRefinement(t.attributeName,t.name);case"numeric":return e.removeNumericRefinement(t.attributeName,t.operator,t.numericValue);case"tag":return e.removeTagRefinement(t.name);case"query":return e.setQueryParameter("query","");default:throw new Error("clearRefinement: type "+t.type+" is not handled")}}function c(e,t){e.setState(s(e.state,t)).search()}function u(e){if(e.computedLabel=e.name,e.hasOwnProperty("operator")&&"string"==typeof e.operator){var t=e.operator;">="===e.operator&&(t="≥"),"<="===e.operator&&(t="≤"),e.computedLabel=t+" "+e.name}return e}var l=n(343),d=n.n(l),f=n(341),h=n.n(f),p=n(178),v=n.n(p),g=n(4),m=n.n(g),y=n(50),b=n.n(y),_=n(49),w=n.n(_),S=n(342),k=n.n(S),T=n(179),C=n.n(T),x=n(117),E=n.n(x),P=n(337),$=n.n(P),A=n(0);t.a=r;var O="Usage:\nvar customCurrentRefinedValues = connectCurrentRefinedValues(function renderFn(params, isFirstRendering) {\n  // params = {\n  //   attributes,\n  //   clearAllClick,\n  //   clearAllPosition,\n  //   clearAllURL,\n  //   refine,\n  //   createURL,\n  //   refinements,\n  //   instantSearchInstance,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customCurrentRefinedValues({\n    [ attributes = [] ],\n    [ onlyListedAttributes = false ],\n    [ clearsQuery = false ]\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectCurrentRefinedValues.html\n"},function(e,t,n){"use strict";var r=n(116),i=n.n(r),a=n(0),o="Usage:\n\nvar customGeoSearch = connectGeoSearch(function render(params, isFirstRendering) {\n  // params = {\n  //   items,\n  //   position,\n  //   refine,\n  //   clearMapRefinement,\n  //   isRefinedWithMap,\n  //   toggleRefineOnMapMove,\n  //   isRefineOnMapMove,\n  //   setMapMoveSinceLastRefine,\n  //   hasMapMoveSinceLastRefine,\n  //   hasMapMoveSinceLastRefine,\n  //   widgetParams,\n  //   instantSearchInstance,\n  // }\n});\n\nsearch.addWidget(\n  customGeoSearch({\n    [ enableRefineOnMapMove = true ],\n    [ enableGeolocationWithIP = true ],\n    [ position ],\n    [ radius ],\n    [ precision ],\n  })\n);\n\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectGeoSearch.html\n",s=function(e,t){return n.i(a.a)(e,o),function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.enableRefineOnMapMove,s=void 0===o||o,c=r.enableGeolocationWithIP,u=void 0===c||c,l=r.position,d=r.radius,f=r.precision,h={isRefineOnMapMove:s,hasMapMoveSinceLastRefine:!1,lastRefinePosition:"",lastRefineBoundingBox:"",internalToggleRefineOnMapMove:i.a,internalSetMapMoveSinceLastRefine:i.a},p=function(e){return e.aroundLatLng&&n.i(a.b)(e.aroundLatLng)},v=function(e){return function(t){var n=t.northEast,r=t.southWest,i=[n.lat,n.lng,r.lat,r.lng].join();e.setQueryParameter("insideBoundingBox",i).search(),h.hasMapMoveSinceLastRefine=!1,h.lastRefineBoundingBox=i}},g=function(e){return function(){e.setQueryParameter("insideBoundingBox").search()}},m=function(e){return function(){return Boolean(e.insideBoundingBox)}},y=function(){return h.internalToggleRefineOnMapMove()},b=function(e,t){return function(){h.isRefineOnMapMove=!h.isRefineOnMapMove,e(t)}},_=function(){return h.isRefineOnMapMove},w=function(){return h.internalSetMapMoveSinceLastRefine()},S=function(e,t){return function(){var n=!0!==h.hasMapMoveSinceLastRefine;h.hasMapMoveSinceLastRefine=!0,n&&e(t)}},k=function(){return h.hasMapMoveSinceLastRefine};return{init:function(t){var n=t.state,a=t.helper,o=t.instantSearchInstance;h.internalToggleRefineOnMapMove=b(i.a,t),h.internalSetMapMoveSinceLastRefine=S(i.a,t),e({items:[],position:p(n),refine:v(a),clearMapRefinement:g(a),isRefinedWithMap:m(n),toggleRefineOnMapMove:y,isRefineOnMapMove:_,setMapMoveSinceLastRefine:w,hasMapMoveSinceLastRefine:k,widgetParams:r,instantSearchInstance:o},!0)},render:function t(n){var i=n.results,a=n.helper,o=n.instantSearchInstance,s=a.getState(),c=Boolean(s.aroundLatLng)&&Boolean(h.lastRefinePosition)&&s.aroundLatLng!==h.lastRefinePosition,u=!s.insideBoundingBox&&Boolean(h.lastRefineBoundingBox)&&s.insideBoundingBox!==h.lastRefineBoundingBox;(c||u)&&(h.hasMapMoveSinceLastRefine=!1),h.lastRefinePosition=s.aroundLatLng||"",h.lastRefineBoundingBox=s.insideBoundingBox||"",h.internalToggleRefineOnMapMove=b(t,n),h.internalSetMapMoveSinceLastRefine=S(t,n),e({items:i.hits.filter(function(e){return e._geoloc}),position:p(s),refine:v(a),clearMapRefinement:g(a),isRefinedWithMap:m(s),toggleRefineOnMapMove:y,isRefineOnMapMove:_,setMapMoveSinceLastRefine:w,hasMapMoveSinceLastRefine:k,widgetParams:r,instantSearchInstance:o},!1)},getConfiguration:function(e){var t={};return!u||l||e.aroundLatLng||void 0!==e.aroundLatLngViaIP||(t.aroundLatLngViaIP=!0),!l||e.aroundLatLng||e.aroundLatLngViaIP||(t.aroundLatLng=l.lat+", "+l.lng),d&&!e.aroundRadius&&(t.aroundRadius=d),f&&!e.aroundPrecision&&(t.aroundPrecision=f),t},dispose:function(e){var n=e.state;t();var r=n;return u&&!l&&(r=r.setQueryParameter("aroundLatLngViaIP")),l&&(r=r.setQueryParameter("aroundLatLng")),d&&(r=r.setQueryParameter("aroundRadius")),f&&(r=r.setQueryParameter("aroundPrecision")),r=r.setQueryParameter("insideBoundingBox")}}}};t.a=s},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){return n.i(l.a)(e,h),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.attributes,o=n.separator,c=void 0===o?" > ":o,l=n.rootPath,p=void 0===l?null:l,v=n.showParentLevel,g=void 0===v||v,m=n.limit,y=void 0===m?10:m,b=n.sortBy,_=void 0===b?["name:asc"]:b;if(!a||!a.length)throw new Error(h);var w=f(a,1),S=w[0];return{getConfiguration:function(e){if(e.hierarchicalFacets){var t=s()(e.hierarchicalFacets,function(e){return e.name===S});if(t&&(!u()(t.attributes,a)||t.separator!==c))return console.warn("using Breadcrumb & HierarchicalMenu on the same facet with different options"),{}}return{hierarchicalFacets:[{name:S,attributes:a,separator:c,rootPath:p,showParentLevel:g}],maxValuesPerFacet:void 0!==e.maxValuesPerFacet?Math.max(e.maxValuesPerFacet,y):y}},init:function(t){function r(e){return a(i.state.toggleRefinement(S,e))}var i=t.helper,a=t.createURL,o=t.instantSearchInstance;this._refine=function(e){i.toggleRefinement(S,e).search()},e({createURL:r,items:[],refine:this._refine,instantSearchInstance:o,widgetParams:n},!0)},_prepareFacetValues:function(e,t){var n=this;return e.slice(0,y).map(function(e){var r=e.name,a=e.path,o=i(e,["name","path"]);return Array.isArray(o.data)&&(o.data=n._prepareFacetValues(o.data,t)),d({},o,{label:r,value:a})})},render:function(t){function r(e){return o(a.toggleRefinement(S,e))}var i=t.results,a=t.state,o=t.createURL,s=t.instantSearchInstance,c=this._prepareFacetValues(i.getFacetValues(S,{sortBy:_}).data||[],a);e({createURL:r,items:c,refine:this._refine,instantSearchInstance:s,widgetParams:n},!1)},dispose:function(e){var n=e.state;t();var r=n;return n.isHierarchicalFacetRefined(S)&&(r=n.removeHierarchicalFacetRefinement(S)),r=r.removeHierarchicalFacet(S),r.maxValuesPerFacet===y&&r.setQueryParameters("maxValuesPerFacet",void 0),r},getWidgetState:function(e,t){var n=t.searchParameters,i=n.getHierarchicalFacetBreadcrumb(S);return i&&0!==i.length?e.hierarchicalMenu&&u()(i,e.hierarchicalMenu[S])?e:d({},e,{hierarchicalMenu:d({},e.hierarchicalMenu,r({},S,i))}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState;return n.hierarchicalMenu&&n.hierarchicalMenu[S]?e.clearRefinements(S).toggleRefinement(S,n.hierarchicalMenu[S].join(c)):e}}}}var o=n(27),s=n.n(o),c=n(16),u=n.n(c),l=n(0);t.a=a;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h="Usage:\nvar customHierarchicalMenu = connectHierarchicalMenu(function renderFn(params, isFirstRendering) {\n  // params = {\n  //   createURL,\n  //   items,\n  //   refine,\n  //   instantSearchInstance,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customHierarchicalMenu({\n    attributes,\n    [ separator = ' > ' ],\n    [ rootPath = null ],\n    [ showParentLevel = true ],\n    [ limit = 10 ],\n    [ sortBy = ['name:asc'] ],\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectHierarchicalMenu.html\n"},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){return n.i(u.a)(e,d),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.items,a=i;if(!a)throw new Error(d);var s=a.filter(function(e){return e.default});if(s.length>1)throw new Error("[Error][hitsPerPageSelector] more than one default value is specified in `items[]`\nThe first one will be picked, you should probably set only one default value");var u=c()(i,function(e){return!0===e.default});return{getConfiguration:function(){return s.length>0?{hitsPerPage:s[0].value}:{}},init:function(t){var i=t.helper,s=t.state,c=t.instantSearchInstance;o()(a,function(e){return Number(s.hitsPerPage)===Number(e.value)})||(void 0===s.hitsPerPage?window.console&&window.console.warn("[Warning][hitsPerPageSelector] hitsPerPage not defined.\n  You should probably set the value `hitsPerPage`\n  using the searchParameters attribute of the instantsearch constructor."):window.console&&window.console.warn("[Warning][hitsPerPageSelector] No item in `items`\n  with `value: hitsPerPage` (hitsPerPage: "+s.hitsPerPage+")"),a=[{value:void 0,label:""}].concat(r(a))),this.setHitsPerPage=function(e){return i.setQueryParameter("hitsPerPage",e).search()},e({items:this._transformItems(s),refine:this.setHitsPerPage,hasNoResults:!0,widgetParams:n,instantSearchInstance:c},!0)},render:function(t){var r=t.state,i=t.results,a=t.instantSearchInstance,o=0===i.nbHits;e({items:this._transformItems(r),refine:this.setHitsPerPage,hasNoResults:o,widgetParams:n,instantSearchInstance:a},!1)},_transformItems:function(e){var t=e.hitsPerPage;return a.map(function(e){return l({},e,{isRefined:Number(e.value)===Number(t)})})},dispose:function(){t()},getWidgetState:function(e,t){var n=t.searchParameters,r=n.hitsPerPage;return u&&r===u.value||void 0===r||e.hitsPerPage===r?e:l({},e,{hitsPerPage:r})},getWidgetSearchParameters:function(e,t){var n=t.uiState;return n.hitsPerPage?e.setQueryParameter("hitsPerPage",n.hitsPerPage):u?e.setQueryParameter("hitsPerPage",u.value):e.setQueryParameter("hitsPerPage",void 0)}}}}var a=n(928),o=n.n(a),s=n(27),c=n.n(s),u=n(0);t.a=i;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d="Usage:\nvar customHitsPerPage = connectHitsPerPage(function render(params, isFirstRendering) {\n  // params = {\n  //   items,\n  //   refine,\n  //   hasNoResults,\n  //   instantSearchInstance,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customHitsPerPage({\n    items: [\n      {value: 5, label: '5 results per page', default: true},\n      {value: 10, label: '10 results per page'},\n      {value: 42, label: '42 results per page'},\n    ],\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectHitsPerPage.html\n"},function(e,t,n){"use strict";function r(e,t){return n.i(a.a)(e,o),function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getConfiguration:function(){return r.escapeHits?i.a:void 0},init:function(t){var n=t.instantSearchInstance;e({hits:[],results:void 0,instantSearchInstance:n,widgetParams:r},!0)},render:function(t){var a=t.results,o=t.instantSearchInstance;r.escapeHits&&a.hits&&a.hits.length>0&&(a.hits=n.i(i.c)(a.hits)),e({hits:a.hits,results:a,instantSearchInstance:o,widgetParams:r},!1)},dispose:function(){t()}}}}var i=n(156),a=n(0);t.a=r;var o="Usage:\nvar customHits = connectHits(function render(params, isFirstRendering) {\n  // params = {\n  //   hits,\n  //   results,\n  //   instantSearchInstance,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customHits({\n    [ escapeHits = false ]\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectHits.html\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(264);n.d(t,"connectClearAll",function(){return r.a});var i=n(266);n.d(t,"connectCurrentRefinedValues",function(){return i.a});var a=n(268);n.d(t,"connectHierarchicalMenu",function(){return a.a});var o=n(270);n.d(t,"connectHits",function(){return o.a});var s=n(269);n.d(t,"connectHitsPerPage",function(){return s.a});var c=n(272);n.d(t,"connectInfiniteHits",function(){return c.a});var u=n(155);n.d(t,"connectMenu",function(){return u.a});var l=n(273);n.d(t,"connectNumericRefinementList",function(){return l.a});var d=n(274);n.d(t,"connectNumericSelector",function(){return d.a});var f=n(275);n.d(t,"connectPagination",function(){return f.a});var h=n(276);n.d(t,"connectPriceRanges",function(){return h.a});var p=n(758);n.d(t,"connectRangeSlider",function(){return p.a});var v=n(99);n.d(t,"connectRange",function(){return v.a});var g=n(277);n.d(t,"connectRefinementList",function(){return g.a});var m=n(278);n.d(t,"connectSearchBox",function(){return m.a});var y=n(279);n.d(t,"connectSortBySelector",function(){return y.a});var b=n(280);n.d(t,"connectStarRating",function(){return b.a});var _=n(281);n.d(t,"connectStats",function(){return _.a});var w=n(282);n.d(t,"connectToggle",function(){return w.a});var S=n(263);n.d(t,"connectBreadcrumb",function(){return S.a});var k=n(267);n.d(t,"connectGeoSearch",function(){return k.a});var T=n(265);n.d(t,"connectConfigure",function(){return T.a})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){return n.i(o.a)(e,s),function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=[],s=function(e){return function(){return e.nextPage().search()}};return{getConfiguration:function(){return i.escapeHits?a.a:void 0},init:function(t){var n=t.instantSearchInstance,r=t.helper;this.showMore=s(r),e({hits:o,results:void 0,showMore:this.showMore,isLastPage:!0,instantSearchInstance:n,widgetParams:i},!0)},render:function(t){var s=t.results,c=t.state,u=t.instantSearchInstance;0===c.page&&(o=[]),i.escapeHits&&s.hits&&s.hits.length>0&&(s.hits=n.i(a.c)(s.hits)),o=[].concat(r(o),r(s.hits));var l=s.nbPages<=s.page+1;e({hits:o,results:s,showMore:this.showMore,isLastPage:l,instantSearchInstance:u,widgetParams:i},!1)},dispose:function(){t()}}}}var a=n(156),o=n(0);t.a=i;var s="Usage:\nvar customInfiniteHits = connectInfiniteHits(function render(params, isFirstRendering) {\n  // params = {\n  //   hits,\n  //   results,\n  //   showMore,\n  //   isLastPage,\n  //   instantSearchInstance,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customInfiniteHits({\n    escapeHits: true,\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectInfiniteHits.html\n"},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return n.i(f.a)(e,v),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.attributeName,s=n.options;if(!i||!s)throw new Error(v);return{init:function(t){var r=t.helper,c=t.createURL,u=t.instantSearchInstance;this._refine=function(e){var t=o(r.state,i,s,e);r.setState(t).search()},this._createURL=function(e){return function(t){return c(o(e,i,s,t))}},this._prepareItems=function(e){return s.map(function(t){var n=t.start,r=t.end;return{label:t.name,value:window.encodeURI(JSON.stringify({start:n,end:r})),isRefined:a(e,i,{start:n,end:r})}})},e({createURL:this._createURL(r.state),items:this._prepareItems(r.state),hasNoResults:!0,refine:this._refine,instantSearchInstance:u,widgetParams:n},!0)},render:function(t){var r=t.results,i=t.state,a=t.instantSearchInstance;e({createURL:this._createURL(i),items:this._prepareItems(i),hasNoResults:0===r.nbHits,refine:this._refine,instantSearchInstance:a,widgetParams:n},!1)},dispose:function(e){var n=e.state;return t(),n.clearRefinements(i)},getWidgetState:function(e,t){var n=t.searchParameters,a=n.getNumericRefinements(i),o=a["="]&&a["="][0];if(o||0===o)return p({},e,{numericRefinementList:p({},e.numericRefinementList,r({},i,""+a["="]))});var s=a[">="]&&a[">="][0]||"",c=a["<="]&&a["<="][0]||"";return""!==s||""!==c?e.numericRefinementList&&e.numericRefinementList[i]===s+":"+c?e:p({},e,{numericRefinementList:p({},e.numericRefinementList,r({},i,s+":"+c))}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=e.clearRefinements(i),a=n.numericRefinementList&&n.numericRefinementList[i];if(!a)return r;var o=-1===a.indexOf(":")&&a;if(o)return r.addNumericRefinement(i,"=",o);var s=a.split(":").map(parseFloat),c=h(s,2),u=c[0],l=c[1];return d()(u)&&(r=r.addNumericRefinement(i,">=",u)),d()(l)&&(r=r.addNumericRefinement(i,"<=",l)),r}}}}function a(e,t,n){var r=e.getNumericRefinements(t);return void 0!==n.start&&void 0!==n.end&&n.start===n.end?s(r,"=",n.start):void 0!==n.start?s(r,">=",n.start):void 0!==n.end?s(r,"<=",n.end):void 0===n.start&&void 0===n.end?0===Object.keys(r).length:void 0}function o(e,t,n,r){var i=e,o=JSON.parse(window.decodeURI(r)),c=i.getNumericRefinements(t);if(void 0===o.start&&void 0===o.end)return i.clearRefinements(t);if(a(i,t,o)||(i=i.clearRefinements(t)),void 0!==o.start&&void 0!==o.end){if(o.start>o.end)throw new Error("option.start should be > to option.end");if(o.start===o.end)return i=s(c,"=",o.start)?i.removeNumericRefinement(t,"=",o.start):i.addNumericRefinement(t,"=",o.start)}return void 0!==o.start&&(i=s(c,">=",o.start)?i.removeNumericRefinement(t,">=",o.start):i.addNumericRefinement(t,">=",o.start)),void 0!==o.end&&(i=s(c,"<=",o.end)?i.removeNumericRefinement(t,"<=",o.end):i.addNumericRefinement(t,"<=",o.end)),i.page=0,i}function s(e,t,n){var r=void 0!==e[t],i=u()(e[t],n);return r&&i}var c=n(339),u=n.n(c),l=n(176),d=n.n(l),f=n(0);t.a=i;var h=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v="Usage:\nvar customNumericRefinementList = connectNumericRefinementList(function renderFn(params, isFirstRendering) {\n  // params = {\n  //   createURL,\n  //   items,\n  //   hasNoResults,\n  //   refine,\n  //   instantSearchInstance,\n  //   widgetParams,\n  //  }\n});\nsearch.addWidget(\n  customNumericRefinementList({\n    attributeName,\n    options,\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectNumericRefinementList.html\n"},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return n.i(a.a)(e,s),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.attributeName,a=n.options,c=n.operator,u=void 0===c?"=":c;if(!i||!a)throw new Error(s);return{getConfiguration:function(e,t){var n=this._getRefinedValue(t);return n?{numericRefinements:r({},i,r({},u,[n]))}:{}},init:function(t){var r=t.helper,o=t.instantSearchInstance;this._refine=function(e){r.clearRefinements(i),void 0!==e&&"undefined"!==e&&r.addNumericRefinement(i,u,e),r.search()},e({currentRefinement:this._getRefinedValue(r.state),options:a,refine:this._refine,hasNoResults:!0,instantSearchInstance:o,widgetParams:n},!0)},render:function(t){var r=t.helper,i=t.results,o=t.instantSearchInstance;e({currentRefinement:this._getRefinedValue(r.state),options:a,refine:this._refine,hasNoResults:0===i.nbHits,instantSearchInstance:o,widgetParams:n},!1)},dispose:function(e){var n=e.state;return t(),n.removeNumericRefinement(i)},getWidgetState:function(e,t){var n=t.searchParameters,s=this._getRefinedValue(n);return e.numericSelector&&s===e.numericSelector[i]||s===a[0].value?e:s||0===s?o({},e,{numericSelector:o({},e.numericSelector,r({},i,s))}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n.numericSelector&&n.numericSelector[i],o=this._getRefinedValue(e);return r?r===o?e:e.clearRefinements(i).addNumericRefinement(i,u,r):e.clearRefinements(i).addNumericRefinement(i,u,a[0].value)},_getRefinedValue:function(e){return e&&e.numericRefinements&&void 0!==e.numericRefinements[i]&&void 0!==e.numericRefinements[i][u]&&void 0!==e.numericRefinements[i][u][0]?e.numericRefinements[i][u][0]:a[0].value}}}}var a=n(0);t.a=i;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="Usage:\nvar customNumericSelector = connectNumericSelector(function renderFn(params, isFirstRendering) {\n  // params = {\n  //   currentRefinement,\n  //   options,\n  //   refine,\n  //   hasNoResults,\n  //   instantSearchInstance,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customNumericSelector({\n    attributeName,\n    options,\n    [ operator = '=' ]\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectNumericSelector.html\n"},function(e,t,n){"use strict";function r(e,t){return n.i(i.a)(e,s),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.maxPages,i=n.padding,s=void 0===i?3:i,c=new a.a({currentPage:0,total:0,padding:s});return{init:function(t){var r=t.helper,i=t.createURL,a=t.instantSearchInstance;this.refine=function(e){r.setPage(e),r.search()},this.createURL=function(e){return function(t){return i(e.setPage(t))}},e({createURL:this.createURL(r.state),currentRefinement:r.getPage()||0,nbHits:0,nbPages:0,pages:[],isFirstPage:!0,isLastPage:!0,refine:this.refine,widgetParams:n,instantSearchInstance:a},!0)},getMaxPage:function(e){var t=e.nbPages;return void 0!==r?Math.min(r,t):t},render:function(t){var r=t.results,i=t.state,a=t.instantSearchInstance,o=this.getMaxPage(r);c.currentPage=i.page,c.total=o,e({createURL:this.createURL(i),currentRefinement:i.page,refine:this.refine,nbHits:r.nbHits,nbPages:o,pages:c.pages(),isFirstPage:c.isFirstPage(),isLastPage:c.isLastPage(),widgetParams:n,instantSearchInstance:a},!1)},dispose:function(){t()},getWidgetState:function(e,t){var n=t.searchParameters,r=n.page;return 0===r||r+1===e.page?e:o({},e,{page:r+1})},getWidgetSearchParameters:function(e,t){var n=t.uiState;return n.page?e.setQueryParameter("page",n.page-1):e.setQueryParameter("page",0)}}}}var i=n(0),a=n(756);t.a=r;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="Usage:\nvar customPagination = connectPagination(function render(params, isFirstRendering) {\n  // params = {\n  //   createURL,\n  //   currentRefinement,\n  //   nbHits,\n  //   nbPages,\n  //   pages,\n  //   refine,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customPagination({\n    [ maxPages ]\n    [ padding ]\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectPagination.html\n"},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return n.i(a.a)(e,d),function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.attributeName;if(!a)throw new Error(d);return{getConfiguration:function(){return{facets:[a]}},_generateRanges:function(e){var t=e.getFacetStats(a);return n.i(o.a)(t)},_extractRefinedRange:function(e){var t=e.getRefinements(a),n=void 0,r=void 0;return 0===t.length?[]:(t.forEach(function(e){-1!==e.operator.indexOf(">")?n=Math.floor(e.value[0]):-1!==e.operator.indexOf("<")&&(r=Math.ceil(e.value[0]))}),[{from:n,to:r,isRefined:!0}])},_refine:function(e,t){var n=t.from,r=t.to,i=this._extractRefinedRange(e);e.clearRefinements(a),0!==i.length&&i[0].from===n&&i[0].to===r||(void 0!==n&&e.addNumericRefinement(a,">=",Math.floor(n)),void 0!==r&&e.addNumericRefinement(a,"<=",Math.ceil(r))),e.search()},init:function(t){var n=this,r=t.helper,a=t.instantSearchInstance;this.refine=function(e){n._refine(r,e)},e({instantSearchInstance:a,items:[],refine:this.refine,widgetParams:i},!0)},render:function(t){var n=t.results,r=t.helper,o=t.state,s=t.createURL,c=t.instantSearchInstance,u=void 0;n&&n.hits&&n.hits.length>0?(u=this._extractRefinedRange(r),0===u.length&&(u=this._generateRanges(n))):u=[],u.map(function(e){var t=o.clearRefinements(a);return e.isRefined||(void 0!==e.from&&(t=t.addNumericRefinement(a,">=",Math.floor(e.from))),void 0!==e.to&&(t=t.addNumericRefinement(a,"<=",Math.ceil(e.to)))),e.url=s(t),e}),e({items:u,refine:this.refine,widgetParams:i,instantSearchInstance:c},!1)},dispose:function(e){var n=e.state;return t(),n.removeFacetRefinement(a).removeFacet(a)},getWidgetState:function(e,t){var n=t.searchParameters,i=n.getNumericRefinements(a),o=i[">="],s=void 0===o?"":o,c=i["<="],u=void 0===c?"":c;return""===s&&""===u||e&&e.priceRanges&&e.priceRanges[a]===s+":"+u?e:l({},e,{priceRanges:l({},e.priceRanges,r({},a,s+":"+u))})},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n&&n.priceRanges&&n.priceRanges[a];if(!r||-1===r.indexOf(":"))return e;var i=e.getNumericRefinements(a),o=i[">="],s=void 0===o?[NaN]:o,l=i["<="],d=void 0===l?[NaN]:l,f=e.clearRefinements(a),h=r.split(":").map(parseFloat),p=u(h,2),v=p[0],g=p[1];return s.includes(v)&&d.includes(g)?e:(c()(v)&&(f=f.addNumericRefinement(a,">=",v)),c()(g)&&(f=f.addNumericRefinement(a,"<=",g)),f)}}}}var a=n(0),o=n(757),s=n(176),c=n.n(s);t.a=i;var u=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d="Usage:\nvar customPriceRanges = connectPriceRanges(function render(params, isFirstRendering) {\n  // params = {\n  //   items,\n  //   refine,\n  //   instantSearchInstance,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customPriceRanges({\n    attributeName,\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectPriceRanges.html\n"},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){return n.i(o.a)(e,d),function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=a.attributeName,c=a.operator,h=void 0===c?"or":c,p=a.limit,v=void 0===p?10:p,g=a.showMoreLimit,m=a.sortBy,y=void 0===m?["isRefined","count:desc","name:asc"]:m,b=a.escapeFacetValues,_=void 0!==b&&b;f({attributeName:o,operator:h,usage:d,limit:v,showMoreLimit:g});var w=function(e){var t=e.name,n=i(e,["name"]);return l({},n,{label:t,value:t,highlighted:t})},S=function(t){var n=t.items,r=t.state,i=t.createURL,s=t.helperSpecializedSearchFacetValues,c=t.refine,u=t.isFromSearch,l=t.isFirstSearch,d=t.isShowingMore,f=t.toggleShowMore,h=t.hasExhaustiveItems,p=t.instantSearchInstance,v=function(e){return i(r.toggleRefinement(o,e))},m=s&&s(r,i,s,c,p);e({createURL:v,items:n,refine:c,searchForItems:m,instantSearchInstance:p,isFromSearch:u,canRefine:u||n.length>0,widgetParams:a,isShowingMore:d,canToggleShowMore:!!g&&(d||!h),toggleShowMore:f,hasExhaustiveItems:h},l)},k=void 0,T=void 0,C=void 0,x=function(e){return function(t,r,a,c,u){return function(d){if(""===d&&k)S({items:k,state:t,createURL:r,helperSpecializedSearchFacetValues:a,refine:c,isFromSearch:!1,isFirstSearch:!1,instantSearchInstance:u,hasExhaustiveItems:!1});else{var f={highlightPreTag:_?s.a.highlightPreTag:void 0,highlightPostTag:_?s.a.highlightPostTag:void 0};e.searchForFacetValues(o,d,v,f).then(function(e){var o=_?n.i(s.b)(e.facetHits):e.facetHits,d=o.map(function(e){var t=e.value,n=i(e,["value"]);return l({},n,{value:t,label:t})});S({items:d,state:t,createURL:r,helperSpecializedSearchFacetValues:a,refine:c,isFromSearch:!0,isFirstSearch:!1,instantSearchInstance:u,hasExhaustiveItems:!1})})}}}};return{isShowingMore:!1,toggleShowMore:function(){},cachedToggleShowMore:function(){this.toggleShowMore()},createToggleShowMore:function(e){var t=this;return function(){t.isShowingMore=!t.isShowingMore,t.render(e)}},getLimit:function(){return this.isShowingMore?g:v},getConfiguration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r({},"and"===h?"facets":"disjunctiveFacets",[o]);if(void 0!==v){var n=e.maxValuesPerFacet||0;t.maxValuesPerFacet=void 0===g?Math.max(n,v):Math.max(n,v,g)}return t},init:function(e){var t=e.helper,n=e.createURL,r=e.instantSearchInstance;this.cachedToggleShowMore=this.cachedToggleShowMore.bind(this),C=function(e){return t.toggleRefinement(o,e).search()},T=x(t),S({items:[],state:t.state,createURL:n,helperSpecializedSearchFacetValues:T,refine:C,isFromSearch:!1,isFirstSearch:!0,instantSearchInstance:r,isShowingMore:this.isShowingMore,toggleShowMore:this.cachedToggleShowMore,hasExhaustiveItems:!0})},render:function(e){var t=e.results,n=e.state,r=e.createURL,i=e.instantSearchInstance,a=t.getFacetValues(o,{sortBy:y}),s=a.slice(0,this.getLimit()).map(w),c=n.getQueryParameter("maxValuesPerFacet"),u=this.getLimit(),l=c>u?a.length<=u:a.length<u;k=s,this.toggleShowMore=this.createToggleShowMore(e),S({items:s,state:n,createURL:r,helperSpecializedSearchFacetValues:T,refine:C,isFromSearch:!1,isFirstSearch:!1,instantSearchInstance:i,isShowingMore:this.isShowingMore,toggleShowMore:this.cachedToggleShowMore,hasExhaustiveItems:l})},dispose:function(e){var n=e.state;return t(),"and"===h?n.removeFacetRefinement(o).removeFacet(o):n.removeDisjunctiveFacetRefinement(o).removeDisjunctiveFacet(o)},getWidgetState:function(e,t){var n=t.searchParameters,i="or"===h?n.getDisjunctiveRefinements(o):n.getConjunctiveRefinements(o);return 0===i.length||e.refinementList&&u()(i,e.refinementList[o])?e:l({},e,{refinementList:l({},e.refinementList,r({},o,i))})},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n.refinementList&&n.refinementList[o];return void 0===r?e:r.reduce(function(e,t){return"or"===h?e.addDisjunctiveFacetRefinement(o,t):e.addFacetRefinement(o,t)},e.clearRefinements(o))}}}}var o=n(0),s=n(156),c=n(16),u=n.n(c);t.a=a;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d="Usage:\nvar customRefinementList = connectRefinementList(function render(params) {\n  // params = {\n  //   isFromSearch,\n  //   createURL,\n  //   items,\n  //   refine,\n  //   searchForItems,\n  //   instantSearchInstance,\n  //   canRefine,\n  //   toggleShowMore,\n  //   isShowingMore,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customRefinementList({\n    attributeName,\n    [ operator = 'or' ],\n    [ limit ],\n    [ showMoreLimit ],\n    [ sortBy = ['isRefined', 'count:desc', 'name:asc'] ],\n    [ escapeFacetValues = false ]\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectRefinementList.html\n",f=function(e){var t=e.attributeName,n=e.operator,r=e.usageMessage,i=e.showMoreLimit,a=e.limit,o=void 0===t,s=!/^(and|or)$/.test(n),c=void 0!==i&&(isNaN(i)||i<a);if(o||s||c)throw new Error(r)}},function(e,t,n){"use strict";function r(e,t){return n.i(i.a)(e,o),function(){function n(e){return function(){e.setQuery(""),e.search()}}var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.queryHook;return{_clear:function(){},_cachedClear:function(){this._clear()},init:function(t){var a=t.helper,o=t.onHistoryChange,s=t.instantSearchInstance;this._cachedClear=this._cachedClear.bind(this),this._clear=n(a),this._refine=function(){var e=void 0,t=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==a.state.query&&(e=a.state.query,a.setQuery(t)),n&&void 0!==e&&e!==t&&a.search()};return i?function(e){return i(e,t)}:t}(),this._onHistoryChange=o,e({query:a.state.query,onHistoryChange:this._onHistoryChange,refine:this._refine,clear:this._cachedClear,widgetParams:r,instantSearchInstance:s},!0)},render:function(t){var i=t.helper,a=t.instantSearchInstance,o=t.searchMetadata;this._clear=n(i),e({query:i.state.query,onHistoryChange:this._onHistoryChange,refine:this._refine,clear:this._cachedClear,widgetParams:r,instantSearchInstance:a,isSearchStalled:o.isSearchStalled},!1)},dispose:function(e){var n=e.state;return t(),n.setQuery("")},getWidgetState:function(e,t){var n=t.searchParameters,r=n.query;return""===r||e&&e.query===r?e:a({},e,{query:r})},getWidgetSearchParameters:function(e,t){var n=t.uiState;return e.setQuery(n.query||"")}}}}var i=n(0);t.a=r;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="Usage:\nvar customSearchBox = connectSearchBox(function render(params, isFirstRendering) {\n  // params = {\n  //   query,\n  //   onHistoryChange,\n  //   refine,\n  //   instantSearchInstance,\n  //   widgetParams,\n  //   clear,\n  // }\n});\nsearch.addWidget(\n  customSearchBox({\n    [ queryHook ],\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectSearchBox.html\n"},function(e,t,n){"use strict";function r(e,t){return n.i(o.a)(e,c),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.indices;if(!r)throw new Error(c);var i=r.map(function(e){return{label:e.label,value:e.name}});return{init:function(t){var o=t.helper,s=t.instantSearchInstance,c=o.getIndex();if(!a()(r,function(e){return e.name===c}))throw new Error("[sortBySelector]: Index "+c+" not present in `indices`");this.initialIndex=s.indexName,this.setIndex=function(e){return o.setIndex(e).search()},e({currentRefinement:c,options:i,refine:this.setIndex,hasNoResults:!0,widgetParams:n,instantSearchInstance:s},!0)},render:function(t){var r=t.helper,a=t.results,o=t.instantSearchInstance;e({currentRefinement:r.getIndex(),options:i,refine:this.setIndex,hasNoResults:0===a.nbHits,widgetParams:n,instantSearchInstance:o},!1)},dispose:function(e){var n=e.state;return t(),n.setIndex(this.initialIndex)},getWidgetState:function(e,t){var n=t.searchParameters,r=n.getQueryParameter("index");return r===this.initialIndex||e&&e.sortBy===r?e:s({},e,{sortBy:n.getQueryParameter("index")})},getWidgetSearchParameters:function(e,t){var n=t.uiState;return e.setQueryParameter("index",n.sortBy||this.initialIndex)}}}}var i=n(27),a=n.n(i),o=n(0);t.a=r;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c="Usage:\nvar customSortBySelector = connectSortBySelector(function render(params, isFirstRendering) {\n  // params = {\n  //   currentRefinement,\n  //   options,\n  //   refine,\n  //   hasNoResults,\n  //   instantSearchInstance,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customSortBySelector({ indices })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectSortBySelector.html\n"},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return n.i(a.a)(e,s),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.attributeName,a=n.max,c=void 0===a?5:a;if(!i)throw new Error(s);return{getConfiguration:function(){return{disjunctiveFacets:[i]}},init:function(t){var r=t.helper,a=t.createURL,o=t.instantSearchInstance;this._toggleRefinement=this._toggleRefinement.bind(this,r),this._createURL=function(e){return function(t){return a(e.toggleRefinement(i,t))}},e({instantSearchInstance:o,items:[],hasNoResults:!0,refine:this._toggleRefinement,createURL:this._createURL(r.state),widgetParams:n},!0)},render:function(t){for(var r=t.helper,a=t.results,o=t.state,s=t.instantSearchInstance,u=[],l={},d=c;d>=0;--d)l[d]=0;a.getFacetValues(i).forEach(function(e){var t=Math.round(e.name);if(t&&!(t>c))for(var n=t;n>=1;--n)l[n]+=e.count});for(var f=this._getRefinedStar(r.state),h=c-1;h>=1;--h){var p=l[h];if(!f||h===f||0!==p){for(var v=[],g=1;g<=c;++g)v.push(g<=h);u.push({stars:v,name:String(h),value:String(h),count:p,isRefined:f===h})}}e({instantSearchInstance:s,items:u,hasNoResults:0===a.nbHits,refine:this._toggleRefinement,createURL:this._createURL(o),widgetParams:n},!1)},dispose:function(e){var n=e.state;return t(),n.removeDisjunctiveFacetRefinement(i).removeDisjunctiveFacet(i)},getWidgetState:function(e,t){var n=t.searchParameters,a=this._getRefinedStar(n);return void 0===a||e&&e.starRating&&e.starRating[i]===a?e:o({},e,{starRating:o({},e.starRating,r({},i,a))})},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n.starRating&&n.starRating[i];if(r===this._getRefinedStar(e))return e;var a=e.clearRefinements(i);if(void 0!==r)for(var o=Number(r);o<=c;++o)a=a.addDisjunctiveFacetRefinement(i,o);return a},_toggleRefinement:function(e,t){var n=this._getRefinedStar(e.state)===Number(t);if(e.clearRefinements(i),!n)for(var r=Number(t);r<=c;++r)e.addDisjunctiveFacetRefinement(i,r);e.search()},_getRefinedStar:function(e){var t=void 0;return e.getDisjunctiveRefinements(i).forEach(function(e){(!t||Number(e)<t)&&(t=Number(e))}),t}}}}var a=n(0);t.a=i;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="Usage:\nvar customStarRating = connectStarRating(function render(params, isFirstRendering) {\n  // params = {\n  //   items,\n  //   createURL,\n  //   refine,\n  //   instantSearchInstance,\n  //   hasNoResults,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customStarRatingI({\n    attributeName,\n    [ max=5 ],\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectStarRating.html\n"},function(e,t,n){"use strict";function r(e,t){return n.i(i.a)(e,a),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{init:function(t){var r=t.helper,i=t.instantSearchInstance;e({instantSearchInstance:i,hitsPerPage:r.state.hitsPerPage,nbHits:0,nbPages:0,page:r.state.page,processingTimeMS:-1,query:r.state.query,widgetParams:n},!0)},render:function(t){var r=t.results,i=t.instantSearchInstance;e({instantSearchInstance:i,hitsPerPage:r.hitsPerPage,nbHits:r.nbHits,nbPages:r.nbPages,page:r.page,processingTimeMS:r.processingTimeMS,query:r.query,widgetParams:n},!1)},dispose:function(){t()}}}}var i=n(0);t.a=r;var a="Usage:\nvar customStats = connectStats(function render(params, isFirstRendering) {\n  // params = {\n  //   instantSearchInstance,\n  //   hitsPerPage,\n  //   nbHits,\n  //   nbPages,\n  //   page,\n  //   processingTimeMS,\n  //   query,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(customStats());\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectStats.html"},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return n.i(a.a)(e,u),function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.attributeName,l=i.label,d=i.values,f=void 0===d?{on:!0,off:void 0}:d;if(!o||!l)throw new Error(u);var h=void 0!==f.off,p=f?n.i(a.c)(f.on):void 0,v=f?n.i(a.c)(f.off):void 0;return{getConfiguration:function(){return{disjunctiveFacets:[o]}},_toggleRefinement:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isRefined?(e.removeDisjunctiveFacetRefinement(o,p),h&&e.addDisjunctiveFacetRefinement(o,v)):(h&&e.removeDisjunctiveFacetRefinement(o,v),e.addDisjunctiveFacetRefinement(o,p)),e.search()},init:function(t){var n=this,r=t.state,a=t.helper,s=t.createURL,c=t.instantSearchInstance;this._createURL=function(e){return function(){return s(r.removeDisjunctiveFacetRefinement(o,e?p:v).addDisjunctiveFacetRefinement(o,e?v:p))}},this.toggleRefinement=function(e){n._toggleRefinement(a,e)};var u=r.isDisjunctiveFacetRefined(o,p);if(h&&!u){var d=a.getPage();a.addDisjunctiveFacetRefinement(o,v).setPage(d)}var f={name:l,isRefined:u,count:0},g={name:l,isRefined:h&&!u,count:0},m={name:l,isRefined:u,count:null,onFacetValue:f,offFacetValue:g};e({value:m,createURL:this._createURL(m.isRefined),refine:this.toggleRefinement,instantSearchInstance:c,widgetParams:i},!0)},render:function(t){var r=t.helper,c=t.results,u=t.state,d=t.instantSearchInstance,f=r.state.isDisjunctiveFacetRefined(o,p),g=void 0!==v&&v,m=c.getFacetValues(o),y=s()(m,function(e){return e.name===n.i(a.d)(p)}),b={name:l,isRefined:void 0!==y&&y.isRefined,count:void 0===y?null:y.count},_=h?s()(m,function(e){return e.name===n.i(a.d)(g)}):void 0,w={name:l,isRefined:void 0!==_&&_.isRefined,count:void 0===_?m.reduce(function(e,t){return e+t.count},0):_.count},S=f?w:b,k={name:l,isRefined:f,count:void 0===S?null:S.count,onFacetValue:b,offFacetValue:w};e({value:k,state:u,createURL:this._createURL(k.isRefined),refine:this.toggleRefinement,helper:r,instantSearchInstance:d,widgetParams:i},!1)},dispose:function(e){var n=e.state;return t(),n.removeDisjunctiveFacetRefinement(o).removeDisjunctiveFacet(o)},getWidgetState:function(e,t){var n=t.searchParameters,i=n.isDisjunctiveFacetRefined(o,p);return!i||e&&e.toggle&&e.toggle[o]===i?e:c({},e,{toggle:c({},e.toggle,r({},o,i))})},getWidgetSearchParameters:function(e,t){var n=t.uiState;return Boolean(n.toggle&&n.toggle[o])?h?e.removeDisjunctiveFacetRefinement(o,v).addDisjunctiveFacetRefinement(o,p):e.addDisjunctiveFacetRefinement(o,p):h?e.removeDisjunctiveFacetRefinement(o,p).addDisjunctiveFacetRefinement(o,v):e.removeDisjunctiveFacetRefinement(o,p)}}}}var a=n(0),o=n(27),s=n.n(o);t.a=i;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u="Usage:\nvar customToggle = connectToggle(function render(params, isFirstRendering) {\n  // params = {\n  //   value,\n  //   createURL,\n  //   refine,\n  //   instantSearchInstance,\n  //   widgetParams,\n  // }\n});\nsearch.addWidget(\n  customToggle({\n    attributeName,\n    label,\n    [ values = {on: true, off: undefined} ]\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectToggle.html\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(){return"#"}function s(e){return function(t,n){if(!n.getConfiguration)return t;var r=n.getConfiguration(t,e),i=function e(t,n){return Array.isArray(t)?m()(t,n):b()(t)?v()({},t,n,e):void 0};return v()({},t,r,i)}}var c=n(639),u=n.n(c),l=n(81),d=n.n(l),f=n(174),h=n.n(f),p=n(344),v=n.n(p),g=n(933),m=n.n(g),y=n(50),b=n.n(y),_=n(68),w=n.n(_),S=n(765),k=n(760),T=n(764),C=n(284),x=n(286),E=n(761);t.a=s;var P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),A={stateMapping:n.i(T.a)(),router:n.i(C.a)()},O=function(e,t,n){return e(t,n)},I=function(e){function t(e){var a=e.appId,o=void 0===a?null:a,s=e.apiKey,c=void 0===s?null:s,l=e.indexName,d=void 0===l?null:l,f=e.numberLocale,h=e.searchParameters,p=void 0===h?{}:h,v=e.urlSync,g=void 0===v?null:v,m=e.routing,y=void 0===m?null:m,_=e.searchFunction,w=e.createAlgoliaClient,S=void 0===w?O:w,k=e.stalledSearchDelay,T=void 0===k?200:k;r(this,t);var C=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null===o||null===c||null===d){throw new Error("\nUsage: instantsearch({\n  appId: 'my_application_id',\n  apiKey: 'my_search_api_key',\n  indexName: 'my_index_name'\n});")}var $=S(u.a,o,c);if("function"==typeof $.addAlgoliaAgent&&$.addAlgoliaAgent("instantsearch.js "+x.a),C.client=$,C.helper=null,C.indexName=d,C.searchParameters=P({},p,{index:d}),C.widgets=[],C.templatesConfig={helpers:n.i(E.a)({numberLocale:f}),compileOptions:{}},C._stalledSearchDelay=T,_&&(C._searchFunction=_),null!==g){if(null!==y)throw new Error("InstantSearch configuration error: it is not possible to use `urlSync` and `routing` at the same time");console.warn("InstantSearch.js: `urlSync` option is deprecated and will be removed in the next major version."),console.warn("You can now use the new `routing` option"),!0===g&&console.warn("Use it like this: `routing: true`"),console.warn("For advanced use cases, checkout the documentation: https://community.algolia.com/instantsearch.js/v2/guides/routing.html#migrating-from-urlsync")}return C.urlSync=!0===g?{}:g,!0===y?C.routing=A:b()(y)&&(C.routing=P({},A,y)),C}return a(t,e),$(t,[{key:"addWidget",value:function(e){this.addWidgets([e])}},{key:"addWidgets",value:function(e){var t=this;if(!Array.isArray(e))throw new Error("You need to provide an array of widgets or call `addWidget()`");e.forEach(function(e){if(void 0===e.render&&void 0===e.init)throw new Error("Widget definition missing render or init method");t.widgets.push(e)}),this.started&&(this.searchParameters=this.widgets.reduce(s({}),P({},this.helper.state)),this.helper.setState(this.searchParameters),e.forEach(function(e){e.init&&e.init({state:t.helper.state,helper:t.helper,templatesConfig:t.templatesConfig,createURL:t._createAbsoluteURL,onHistoryChange:t._onHistoryChange,instantSearchInstance:t})}),this.helper.search())}},{key:"removeWidget",value:function(e){this.removeWidgets([e])}},{key:"removeWidgets",value:function(e){var t=this;if(!Array.isArray(e))throw new Error("You need to provide an array of widgets or call `removeWidget()`");e.forEach(function(e){if(!t.widgets.includes(e)||"function"!=typeof e.dispose)throw new Error("The widget you tried to remove does not implement the dispose method, therefore it is not possible to remove this widget");t.widgets=t.widgets.filter(function(t){return t!==e});var n=e.dispose({helper:t.helper,state:t.helper.getState()});n&&(t.searchParameters=t.widgets.filter(function(e){return"URLSync"!==e.constructor.name}).reduce(s({}),P({},n)),t.helper.setState(t.searchParameters))}),setTimeout(function(){t.widgets.length>0&&t.helper.search()},0)}},{key:"refresh",value:function(){this.helper&&this.helper.clearCache().search()}},{key:"start",value:function(){var e=this;if(!this.widgets)throw new Error("No widgets were added to instantsearch.js");if(this.started)throw new Error("start() has been already called once");var t=void 0;if(this.urlSync){var r=n.i(S.a)(this.urlSync);this._createURL=r.createURL.bind(r),this._createAbsoluteURL=function(t){return e._createURL(t,{absolute:!0})},this._onHistoryChange=r.onHistoryChange.bind(r),this.widgets.push(r),t=r.searchParametersFromUrl}else if(this.routing){var i=new k.a(P({},this.routing,{instantSearchInstance:this}));this._onHistoryChange=i.onHistoryChange.bind(i),this._createURL=i.createURL.bind(i),this._createAbsoluteURL=this._createURL,this.widgets.push(i)}else this._createURL=o,this._createAbsoluteURL=o,this._onHistoryChange=function(){};this.searchParameters=this.widgets.reduce(s(t),this.searchParameters);var a=d()(this.client,this.searchParameters.index||this.indexName,this.searchParameters);this._searchFunction&&(this._mainHelperSearch=a.search.bind(a),a.search=function(){var t=d()({search:function(){return new Promise(function(){})}},a.state.index,a.state);t.once("search",function(t){a.overrideStateWithoutTriggeringChangeEvent(t),e._mainHelperSearch()}),e._searchFunction(t)}),this.helper=a,this._init(a.state,this.helper),this.helper.on("result",this._render.bind(this,this.helper)),this.helper.on("error",function(t){e.emit("error",t)}),this._searchStalledTimer=null,this._isSearchStalled=!0,this.helper.search(),this.helper.on("search",function(){e._isSearchStalled||e._searchStalledTimer||(e._searchStalledTimer=setTimeout(function(){e._isSearchStalled=!0,e._render(e.helper,e.helper.lastResults,e.helper.lastResults._state)},e._stalledSearchDelay))}),this.started=!0}},{key:"dispose",value:function(){this.removeWidgets(this.widgets)}},{key:"createURL",value:function(e){if(!this._createURL)throw new Error("You need to call start() before calling createURL()");return this._createURL(this.helper.state.setQueryParameters(e))}},{key:"_render",value:function(e,t,n){var r=this;this.helper.hasPendingRequests()||(clearTimeout(this._searchStalledTimer),this._searchStalledTimer=null,this._isSearchStalled=!1),h()(this.widgets,function(i){i.render&&i.render({templatesConfig:r.templatesConfig,results:t,state:n,helper:e,createURL:r._createAbsoluteURL,instantSearchInstance:r,searchMetadata:{isSearchStalled:r._isSearchStalled}})}),this.emit("render")}},{key:"_init",value:function(e,t){var n=this;h()(this.widgets,function(r){r.init&&r.init({state:e,helper:t,templatesConfig:n.templatesConfig,createURL:n._createAbsoluteURL,onHistoryChange:n._onHistoryChange,instantSearchInstance:n})})}}]),t}(w.a);t.b=I},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=e.qsModule,n=e.routeState,r=e.location,i=r.protocol,a=r.hostname,o=r.port,s=void 0===o?"":o,c=r.pathname,u=r.hash,l=t.stringify(n),d=""===s?"":":"+s;return n&&0!==Object.keys(n).length?i+"//"+a+d+c+"?"+l+u:i+"//"+a+d+c+u}function a(e){var t=e.qsModule,n=e.location;return t.parse(n.search.slice(1))}var o=n(937),s=n.n(o),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.windowTitle,o=t.writeDelay,s=void 0===o?400:o,c=t.createURL,u=void 0===c?i:c,l=t.parseURL,d=void 0===l?a:l;r(this,e),this.windowTitle=n,this.writeTimer=void 0,this.writeDelay=s,this._createURL=u,this.parseURL=d}return c(e,[{key:"write",value:function(e){var t=this,n=this.createURL(e),r=this.windowTitle&&this.windowTitle(e);this.writeTimer&&window.clearTimeout(this.writeTimer),this.writeTimer=setTimeout(function(){r&&(window.document.title=r),window.history.pushState(e,r||"",n),t.writeTimer=void 0},this.writeDelay)}},{key:"read",value:function(){return this.parseURL({qsModule:s.a,location:window.location})}},{key:"onUpdate",value:function(e){var t=this;this._onPopState=function(n){t.writeTimer&&(window.clearTimeout(t.writeTimer),t.writeTimer=void 0);var r=n.state;e(r||t.read())},window.addEventListener("popstate",this._onPopState)}},{key:"createURL",value:function(e){return this._createURL({qsModule:s.a,routeState:e,location:window.location})}},{key:"dispose",value:function(){window.removeEventListener("popstate",this._onPopState),this.writeTimer&&window.clearTimeout(this.writeTimer),this.write()}}]),e}();t.a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(u,[null].concat(t)))}},function(e,t,n){"use strict";function r(e){if(!e)return null;if(!0===e)return o;var t=a({},e);return e.templates||(t.templates=o.templates),e.limit||(t.limit=o.limit),t}var i=n(763);t.a=r;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o={templates:i.a,limit:100}},function(e,t,n){"use strict";t.a="2.7.4"},function(e,t,n){function r(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var i=n(104),a=n(165);r.prototype=i(a.prototype),r.prototype.constructor=r,e.exports=r},function(e,t,n){var r=n(33),i=n(7),a=r(i,"Set");e.exports=a},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i;++t<n;)this.add(e[t])}var i=n(159),a=n(904),o=n(905);r.prototype.add=r.prototype.push=a,r.prototype.has=o,e.exports=r},function(e,t,n){var r=n(7),i=r.Uint8Array;e.exports=i},function(e,t,n){var r=n(33),i=n(7),a=r(i,"WeakMap");e.exports=a},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}e.exports=n},function(e,t,n){function r(e,t){return!!(null==e?0:e.length)&&i(e,t,0)>-1}var i=n(302);e.exports=r},function(e,t,n){function r(e,t){var n=o(e),r=!n&&a(e),l=!n&&!r&&s(e),f=!n&&!r&&!l&&u(e),h=n||r||l||f,p=h?i(e.length,String):[],v=p.length;for(var g in e)!t&&!d.call(e,g)||h&&("length"==g||l&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||c(g,v))||p.push(g);return p}var i=n(306),a=n(76),o=n(4),s=n(77),c=n(109),u=n(115),l=Object.prototype,d=l.hasOwnProperty;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){function r(e,t,n){(void 0===n||a(e[t],n))&&(void 0!==n||t in e)||i(e,t,n)}var i=n(71),a=n(48);e.exports=r},function(e,t,n){function r(e,t,n){var r=e[t];s.call(e,t)&&a(r,n)&&(void 0!==n||t in e)||i(e,t,n)}var i=n(71),a=n(48),o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t){function n(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}e.exports=n},function(e,t,n){var r=n(855),i=r();e.exports=i},function(e,t,n){function r(e,t){t=i(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[a(t[n++])];return n&&n==r?e:void 0}var i=n(310),a=n(113);e.exports=r},function(e,t,n){function r(e,t,n){var r=t(e);return a(e)?r:i(r,n(e))}var i=n(162),a=n(4);e.exports=r},function(e,t,n){function r(e,t,n){return t===t?o(e,t,n):i(e,a,n)}var i=n(298),a=n(828),o=n(911);e.exports=r},function(e,t,n){function r(e){if(!i(e))return a(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var i=n(111),a=n(898),o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,d,f){e!==t&&o(t,function(o,u){if(c(o))f||(f=new i),s(e,t,u,n,r,d,f);else{var h=d?d(l(e,u),o,u+"",e,t,f):void 0;void 0===h&&(h=o),a(e,u,h)}},u)}var i=n(101),a=n(296),o=n(299),s=n(836),c=n(12),u=n(78),l=n(330);e.exports=r},function(e,t,n){var r=n(75),i=n(328),a=i?function(e,t){return i.set(e,t),e}:r;e.exports=a},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e,t,n){var r=-1,d=a,f=e.length,h=!0,p=[],v=p;if(n)h=!1,d=o;else if(f>=l){var g=t?null:c(e);if(g)return u(g);h=!1,d=s,v=new i}else v=t?[]:p;e:for(;++r<f;){var m=e[r],y=t?t(m):m;if(m=n||0!==m?m:0,h&&y===y){for(var b=v.length;b--;)if(v[b]===y)continue e;t&&v.push(y),p.push(m)}else d(v,y,n)||(v!==p&&v.push(y),p.push(m))}return p}var i=n(289),a=n(293),o=n(815),s=n(308),c=n(861),u=n(173),l=200;e.exports=r},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){function r(e){return"function"==typeof e?e:i}var i=n(75);e.exports=r},function(e,t,n){function r(e,t){return i(e)?e:a(e,t)?[e]:o(s(e))}var i=n(4),a=n(170),o=n(912),s=n(348);e.exports=r},function(e,t,n){(function(e){function r(e,t){if(t)return e.slice();var n=e.length,r=u?u(n):new e.constructor(n);return e.copy(r),r}var i=n(7),a="object"==typeof t&&t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===a,c=s?i.Buffer:void 0,u=c?c.allocUnsafe:void 0;e.exports=r}).call(t,n(30)(e))},function(e,t,n){function r(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var i=n(167);e.exports=r},function(e,t){function n(e,t,n,i){for(var a=-1,o=e.length,s=n.length,c=-1,u=t.length,l=r(o-s,0),d=Array(u+l),f=!i;++c<u;)d[c]=t[c];for(;++a<s;)(f||a<o)&&(d[n[a]]=e[a]);for(;l--;)d[c++]=e[a++];return d}var r=Math.max;e.exports=n},function(e,t){function n(e,t,n,i){for(var a=-1,o=e.length,s=-1,c=n.length,u=-1,l=t.length,d=r(o-c,0),f=Array(d+l),h=!i;++a<d;)f[a]=e[a];for(var p=a;++u<l;)f[p+u]=t[u];for(;++s<c;)(h||a<o)&&(f[p+n[s]]=e[a++]);return f}var r=Math.max;e.exports=n},function(e,t,n){function r(e,t,n,b,_,w,S,k,T,C){function x(){for(var h=arguments.length,p=Array(h),v=h;v--;)p[v]=arguments[v];if(A)var g=u(x),m=o(p,g);if(b&&(p=i(p,b,_,A)),w&&(p=a(p,w,S,A)),h-=m,A&&h<C){var y=d(p,g);return c(e,t,r,x.placeholder,n,p,y,k,T,C-h)}var R=P?n:this,L=$?R[e]:e;return h=p.length,k?p=l(p,k):O&&h>1&&p.reverse(),E&&T<h&&(p.length=T),this&&this!==f&&this instanceof x&&(L=I||s(L)),L.apply(R,p)}var E=t&m,P=t&h,$=t&p,A=t&(v|g),O=t&y,I=$?void 0:s(e);return x}var i=n(313),a=n(314),o=n(852),s=n(107),c=n(316),u=n(322),l=n(903),d=n(172),f=n(7),h=1,p=2,v=8,g=16,m=128,y=512;e.exports=r},function(e,t,n){function r(e,t,n,r,h,p,v,g,m,y){var b=t&l,_=b?v:void 0,w=b?void 0:v,S=b?p:void 0,k=b?void 0:p;t|=b?d:f,(t&=~(b?f:d))&u||(t&=~(s|c));var T=[e,t,h,S,_,k,w,g,m,y],C=n.apply(void 0,T);return i(e)&&a(C,T),C.placeholder=r,o(C,e,t)}var i=n(883),a=n(331),o=n(333),s=1,c=2,u=4,l=8,d=32,f=64;e.exports=r},function(e,t,n){var r=n(33),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){function r(e,t,n,r,u,l){var d=n&s,f=e.length,h=t.length;if(f!=h&&!(d&&h>f))return!1;var p=l.get(e);if(p&&l.get(t))return p==t;var v=-1,g=!0,m=n&c?new i:void 0;for(l.set(e,t),l.set(t,e);++v<f;){var y=e[v],b=t[v];if(r)var _=d?r(b,y,v,t,e,l):r(y,b,v,e,t,l);if(void 0!==_){if(_)continue;g=!1;break}if(m){if(!a(t,function(e,t){if(!o(m,t)&&(y===e||u(y,e,n,r,l)))return m.push(t)})){g=!1;break}}else if(y!==b&&!u(y,b,n,r,l)){g=!1;break}}return l.delete(e),l.delete(t),g}var i=n(289),a=n(295),o=n(308),s=1,c=2;e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(6))},function(e,t,n){function r(e){return i(e,o,a)}var i=n(301),a=n(169),o=n(28);e.exports=r},function(e,t,n){var r=n(328),i=n(116),a=r?function(e){return r.get(e)}:i;e.exports=a},function(e,t){function n(e){return e.placeholder}e.exports=n},function(e,t,n){var r=n(162),i=n(168),a=n(169),o=n(346),s=Object.getOwnPropertySymbols,c=s?function(e){for(var t=[];e;)r(t,a(e)),e=i(e);return t}:o;e.exports=c},function(e,t,n){function r(e,t,n){t=i(t,e);for(var r=-1,l=t.length,d=!1;++r<l;){var f=u(t[r]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++r!=l?d:!!(l=null==e?0:e.length)&&c(l)&&s(f,l)&&(o(e)||a(e))}var i=n(310),a=n(76),o=n(4),s=n(109),c=n(177),u=n(113);e.exports=r},function(e,t,n){function r(e){return"function"!=typeof e.constructor||o(e)?{}:i(a(e))}var i=n(104),a=n(168),o=n(111);e.exports=r},function(e,t,n){function r(e){return e===e&&!i(e)}var i=n(12);e.exports=r},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t,n){var r=n(291),i=r&&new r;e.exports=i},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t){function n(e,t){return"__proto__"==t?void 0:e[t]}e.exports=n},function(e,t,n){var r=n(305),i=n(334),a=i(r);e.exports=a},function(e,t,n){var r=n(842),i=n(334),a=i(r);e.exports=a},function(e,t,n){function r(e,t,n){var r=t+"";return o(e,a(r,s(i(r),n)))}var i=n(872),a=n(880),o=n(332),s=n(913);e.exports=r},function(e,t){function n(e){var t=0,n=0;return function(){var o=a(),s=i-(o-n);if(n=o,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,i=16,a=Date.now;e.exports=n},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,i=r.toString;e.exports=n},function(e,t,n){function r(e){return i(e,a|o)}var i=n(819),a=1,o=4;e.exports=r},function(e,t,n){function r(e,t){return(s(e)?i:a)(e,o(t,3))}var i=n(292),a=n(820),o=n(26),s=n(4);e.exports=r},function(e,t,n){function r(e,t){return null!=e&&a(e,t,i)}var i=n(822),a=n(324);e.exports=r},function(e,t,n){function r(e,t,n,r){e=a(e)?e:c(e),n=n&&!r?s(n):0;var l=e.length;return n<0&&(n=u(l+n,0)),o(e)?n<=l&&e.indexOf(t,n)>-1:!!l&&i(e,t,n)>-1}var i=n(302),a=n(21),o=n(178),s=n(118),c=n(935),u=Math.max;e.exports=r},function(e,t,n){function r(e){return a(e)&&i(e)}var i=n(21),a=n(13);e.exports=r},function(e,t,n){function r(e){return!0===e||!1===e||a(e)&&i(e)==o}var i=n(25),a=n(13),o="[object Boolean]";e.exports=r},function(e,t,n){function r(e){if(null==e)return!0;if(c(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||d(e)||o(e)))return!e.length;var t=a(e);if(t==f||t==h)return!e.size;if(l(e))return!i(e).length;for(var n in e)if(v.call(e,n))return!1;return!0}var i=n(303),a=n(74),o=n(76),s=n(4),c=n(21),u=n(77),l=n(111),d=n(115),f="[object Map]",h="[object Set]",p=Object.prototype,v=p.hasOwnProperty;e.exports=r},function(e,t){function n(e){return void 0===e}e.exports=n},function(e,t,n){var r=n(304),i=n(853),a=i(function(e,t,n,i){r(e,t,n,i)});e.exports=a},function(e,t,n){var r=n(860),i=r();e.exports=i},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){function r(e){if(!e)return 0===e?e:0;if((e=i(e))===a||e===-a){return(e<0?-1:1)*o}return e===e?e:0}var i=n(931),a=1/0,o=1.7976931348623157e308;e.exports=r},function(e,t,n){function r(e){return null==e?"":i(e)}var i=n(844);e.exports=r},function(e,t,n){"use strict";var r=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],i=0;i<t.length;++i)void 0!==t[i]&&r.push(t[i]);n.obj[n.prop]=r}}return t};t.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},t.merge=function(e,n,i){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(i.plainObjects||i.allowPrototypes||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var a=e;return Array.isArray(e)&&!Array.isArray(n)&&(a=t.arrayToObject(e,i)),Array.isArray(e)&&Array.isArray(n)?(n.forEach(function(n,a){r.call(e,a)?e[a]&&"object"==typeof e[a]?e[a]=t.merge(e[a],n,i):e.push(n):e[a]=n}),e):Object.keys(n).reduce(function(e,a){var o=n[a];return r.call(e,a)?e[a]=t.merge(e[a],o,i):e[a]=o,e},a)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",r=0;r<t.length;++r){var a=t.charCodeAt(r);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?n+=t.charAt(r):a<128?n+=i[a]:a<2048?n+=i[192|a>>6]+i[128|63&a]:a<55296||a>=57344?n+=i[224|a>>12]+i[128|a>>6&63]+i[128|63&a]:(r+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(r)),n+=i[240|a>>18]+i[128|a>>12&63]+i[128|a>>6&63]+i[128|63&a])}return n},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],o=i.obj[i.prop],s=Object.keys(o),c=0;c<s.length;++c){var u=s[c],l=o[u];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:o,prop:u}),n.push(l))}return a(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,n){function r(e){return null==e?void 0===e?c:s:u&&u in Object(e)?a(e):o(e)}var i=n(180),a=n(955),o=n(976),s="[object Null]",c="[object Undefined]",u=i?i.toStringTag:void 0;e.exports=r},function(e,t,n){function r(e,t){var n=a(e,t);return i(n)?n:void 0}var i=n(950),a=n(956);e.exports=r},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){var t=this,n=new o(e);return this.mark=function(e,r){return n.mark(e,r),t},this.markRegExp=function(e,r){return n.markRegExp(e,r),t},this.markRanges=function(e,r){return n.markRanges(e,r),t},this.unmark=function(e){return n.unmark(e),t},this}var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;n(this,e),this.ctx=t,this.iframes=r,this.exclude=i,this.iframesTimeout=a}return r(e,[{key:"getContexts",value:function(){var e=void 0,t=[];return e=void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[],e.forEach(function(e){var n=t.filter(function(t){return t.contains(e)}).length>0;-1!==t.indexOf(e)||n||t.push(e)}),t}},{key:"getIframeContents",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=void 0;try{var i=e.contentWindow;if(r=i.document,!i||!r)throw new Error("iframe inaccessible")}catch(e){n()}r&&t(r)}},{key:"isIframeBlank",value:function(e){var t="about:blank",n=e.getAttribute("src").trim();return e.contentWindow.location.href===t&&n!==t&&n}},{key:"observeIframeLoad",value:function(e,t,n){var r=this,i=!1,a=null,o=function o(){if(!i){i=!0,clearTimeout(a);try{r.isIframeBlank(e)||(e.removeEventListener("load",o),r.getIframeContents(e,t,n))}catch(e){n()}}};e.addEventListener("load",o),a=setTimeout(o,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,t,n){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,n):this.getIframeContents(e,t,n):this.observeIframeLoad(e,t,n)}catch(e){n()}}},{key:"waitForIframes",value:function(e,t){var n=this,r=0;this.forEachIframe(e,function(){return!0},function(e){r++,n.waitForIframes(e.querySelector("html"),function(){--r||t()})},function(e){e||t()})}},{key:"forEachIframe",value:function(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=t.querySelectorAll("iframe"),s=o.length,c=0;o=Array.prototype.slice.call(o);var u=function(){--s<=0&&a(c)};s||u(),o.forEach(function(t){e.matches(t,i.exclude)?u():i.onIframeReady(t,function(e){n(t)&&(c++,r(e)),u()},u)})}},{key:"createIterator",value:function(e,t,n){return document.createNodeIterator(e,t,n,!1)}},{key:"createInstanceOnIframe",value:function(t){return new e(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,t,n){if(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(e){var t=e.previousNode(),n=void 0;return n=null===t?e.nextNode():e.nextNode()&&e.nextNode(),{prevNode:t,node:n}}},{key:"checkIframeFilter",value:function(e,t,n,r){var i=!1,a=!1;return r.forEach(function(e,t){e.val===n&&(i=t,a=e.handled)}),this.compareNodeIframe(e,t,n)?(!1!==i||a?!1===i||a||(r[i].handled=!0):r.push({val:n,handled:!0}),!0):(!1===i&&r.push({val:n,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,t,n,r){var i=this;e.forEach(function(e){e.handled||i.getIframeContents(e.val,function(e){i.createInstanceOnIframe(e).forEachNode(t,n,r)})})}},{key:"iterateThroughNodes",value:function(e,t,n,r,i){for(var a=this,o=this.createIterator(t,e,r),s=[],c=[],u=void 0,l=void 0,d=function(){var e=a.getIteratorNode(o);return l=e.prevNode,u=e.node};d();)this.iframes&&this.forEachIframe(t,function(e){return a.checkIframeFilter(u,l,e,s)},function(t){a.createInstanceOnIframe(t).forEachNode(e,function(e){return c.push(e)},r)}),c.push(u);c.forEach(function(e){n(e)}),this.iframes&&this.handleOpenIframes(s,e,n,r),i()}},{key:"forEachNode",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=this.getContexts(),o=a.length;o||i(),a.forEach(function(a){var s=function(){r.iterateThroughNodes(e,a,t,n,function(){--o<=0&&i()})};r.iframes?r.waitForIframes(a,s):s()})}}],[{key:"matches",value:function(e,t){var n="string"==typeof t?[t]:t,r=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(r){var i=!1;return n.every(function(t){return!r.call(e,t)||(i=!0,!1)}),i}return!1}}]),e}(),o=function(){function e(t){n(this,e),this.ctx=t,this.ie=!1;var r=window.navigator.userAgent;(r.indexOf("MSIE")>-1||r.indexOf("Trident")>-1)&&(this.ie=!0)}return r(e,[{key:"log",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",r=this.opt.log;this.opt.debug&&"object"===(void 0===r?"undefined":t(r))&&"function"==typeof r[n]&&r[n]("mark.js: "+e)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:"createSynonymsRegExp",value:function(e){var t=this.opt.synonyms,n=this.opt.caseSensitive?"":"i",r=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var i in t)if(t.hasOwnProperty(i)){var a=t[i],o="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(i):this.escapeStr(i),s="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(a):this.escapeStr(a);""!==o&&""!==s&&(e=e.replace(new RegExp("("+this.escapeStr(o)+"|"+this.escapeStr(s)+")","gm"+n),r+"("+this.processSynomyms(o)+"|"+this.processSynomyms(s)+")"+r))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return e=e.replace(/(?:\\)*\?/g,function(e){return"\\"===e.charAt(0)?"?":""}),e.replace(/(?:\\)*\*/g,function(e){return"\\"===e.charAt(0)?"*":""})}},{key:"createWildcardsRegExp",value:function(e){var t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,function(e,t,n){var r=n.charAt(t+1);return/[(|)\\]/.test(r)||""===r?e:e+"\0"})}},{key:"createJoinersRegExp",value:function(e){var t=[],n=this.opt.ignorePunctuation;return Array.isArray(n)&&n.length&&t.push(this.escapeStr(n.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join("["+t.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(e){var t=this.opt.caseSensitive?"":"i",n=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],r=[];return e.split("").forEach(function(i){n.every(function(n){if(-1!==n.indexOf(i)){if(r.indexOf(n)>-1)return!1;e=e.replace(new RegExp("["+n+"]","gm"+t),"["+n+"]"),r.push(n)}return!0})}),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var t=this,n=this.opt.accuracy,r="string"==typeof n?n:n.value,i="string"==typeof n?[]:n.limiters,a="";switch(i.forEach(function(e){a+="|"+t.escapeStr(e)}),r){case"partially":default:return"()("+e+")";case"complementary":return"()([^"+(a="\\s"+(a||this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿")))+"]*"+e+"[^"+a+"]*)";case"exactly":return"(^|\\s"+a+")("+e+")(?=$|\\s"+a+")"}}},{key:"getSeparatedKeywords",value:function(e){var t=this,n=[];return e.forEach(function(e){t.opt.separateWordSearch?e.split(" ").forEach(function(e){e.trim()&&-1===n.indexOf(e)&&n.push(e)}):e.trim()&&-1===n.indexOf(e)&&n.push(e)}),{keywords:n.sort(function(e,t){return t.length-e.length}),length:n.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var t=this;if(!Array.isArray(e)||"[object Object]"!==Object.prototype.toString.call(e[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var n=[],r=0;return e.sort(function(e,t){return e.start-t.start}).forEach(function(e){var i=t.callNoMatchOnInvalidRanges(e,r),a=i.start,o=i.end;i.valid&&(e.start=a,e.length=o-a,n.push(e),r=o)}),n}},{key:"callNoMatchOnInvalidRanges",value:function(e,t){var n=void 0,r=void 0,i=!1;return e&&void 0!==e.start?(n=parseInt(e.start,10),r=n+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&r-t>0&&r-n>0?i=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(e)),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:n,end:r,valid:i}}},{key:"checkWhitespaceRanges",value:function(e,t,n){var r=void 0,i=!0,a=n.length,o=t-a,s=parseInt(e.start,10)-o;return s=s>a?a:s,r=s+parseInt(e.length,10),r>a&&(r=a,this.log("End range automatically set to the max value of "+a)),s<0||r-s<0||s>a||r>a?(i=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):""===n.substring(s,r).replace(/\s+/g,"")&&(i=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:s,end:r,valid:i}}},{key:"getTextNodes",value:function(e){var t=this,n="",r=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(e){r.push({start:n.length,end:(n+=e.textContent).length,node:e})},function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){e({value:n,nodes:r})})}},{key:"matchesExclude",value:function(e){return a.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,t,n){var r=this.opt.element?this.opt.element:"mark",i=e.splitText(t),a=i.splitText(n-t),o=document.createElement(r);return o.setAttribute("data-markjs","true"),this.opt.className&&o.setAttribute("class",this.opt.className),o.textContent=i.textContent,i.parentNode.replaceChild(o,i),a}},{key:"wrapRangeInMappedTextNode",value:function(e,t,n,r,i){var a=this;e.nodes.every(function(o,s){var c=e.nodes[s+1];if(void 0===c||c.start>t){if(!r(o.node))return!1;var u=t-o.start,l=(n>o.end?o.end:n)-o.start,d=e.value.substr(0,o.start),f=e.value.substr(l+o.start);if(o.node=a.wrapRangeInTextNode(o.node,u,l),e.value=d+f,e.nodes.forEach(function(t,n){n>=s&&(e.nodes[n].start>0&&n!==s&&(e.nodes[n].start-=l),e.nodes[n].end-=l)}),n-=l,i(o.node.previousSibling,o.start),!(n>o.end))return!1;t=o.end}return!0})}},{key:"wrapMatches",value:function(e,t,n,r,i){var a=this,o=0===t?0:t+1;this.getTextNodes(function(t){t.nodes.forEach(function(t){t=t.node;for(var i=void 0;null!==(i=e.exec(t.textContent))&&""!==i[o];)if(n(i[o],t)){var s=i.index;if(0!==o)for(var c=1;c<o;c++)s+=i[c].length;t=a.wrapRangeInTextNode(t,s,s+i[o].length),r(t.previousSibling),e.lastIndex=0}}),i()})}},{key:"wrapMatchesAcrossElements",value:function(e,t,n,r,i){var a=this,o=0===t?0:t+1;this.getTextNodes(function(t){for(var s=void 0;null!==(s=e.exec(t.value))&&""!==s[o];){var c=s.index;if(0!==o)for(var u=1;u<o;u++)c+=s[u].length;var l=c+s[o].length;a.wrapRangeInMappedTextNode(t,c,l,function(e){return n(s[o],e)},function(t,n){e.lastIndex=n,r(t)})}i()})}},{key:"wrapRangeFromIndex",value:function(e,t,n,r){var i=this;this.getTextNodes(function(a){var o=a.value.length;e.forEach(function(e,r){var s=i.checkWhitespaceRanges(e,o,a.value),c=s.start,u=s.end;s.valid&&i.wrapRangeInMappedTextNode(a,c,u,function(n){return t(n,e,a.value.substring(c,u),r)},function(t){n(t,e)})}),r()})}},{key:"unwrapMatches",value:function(e){for(var t=e.parentNode,n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.removeChild(e.firstChild));t.replaceChild(n,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,t){var n=this;this.opt=t,this.log('Searching with expression "'+e+'"');var r=0,i="wrapMatches",a=function(e){r++,n.opt.each(e)};this.opt.acrossElements&&(i="wrapMatchesAcrossElements"),this[i](e,this.opt.ignoreGroups,function(e,t){return n.opt.filter(t,e,r)},a,function(){0===r&&n.opt.noMatch(e),n.opt.done(r)})}},{key:"mark",value:function(e,t){var n=this;this.opt=t;var r=0,i="wrapMatches",a=this.getSeparatedKeywords("string"==typeof e?[e]:e),o=a.keywords,s=a.length,c=this.opt.caseSensitive?"":"i",u=function e(t){var a=new RegExp(n.createRegExp(t),"gm"+c),u=0;n.log('Searching with expression "'+a+'"'),n[i](a,1,function(e,i){return n.opt.filter(i,t,r,u)},function(e){u++,r++,n.opt.each(e)},function(){0===u&&n.opt.noMatch(t),o[s-1]===t?n.opt.done(r):e(o[o.indexOf(t)+1])})};this.opt.acrossElements&&(i="wrapMatchesAcrossElements"),0===s?this.opt.done(r):u(o[0])}},{key:"markRanges",value:function(e,t){var n=this;this.opt=t;var r=0,i=this.checkRanges(e);i&&i.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(i)),this.wrapRangeFromIndex(i,function(e,t,r,i){return n.opt.filter(e,t,r,i)},function(e,t){r++,n.opt.each(e,t)},function(){n.opt.done(r)})):this.opt.done(r)}},{key:"unmark",value:function(e){var t=this;this.opt=e;var n=this.opt.element?this.opt.element:"*";n+="[data-markjs]",this.opt.className&&(n+="."+this.opt.className),this.log('Removal selector "'+n+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(e){t.unwrapMatches(e)},function(e){var r=a.matches(e,n),i=t.matchesExclude(e);return!r||i?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(e){this._opt=i({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new a(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),e}();return e})},function(e,t){function n(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=s?Math.round(e/s)+"m":e>=o?Math.round(e/o)+"s":e+"ms"}function i(e){return a(e,u,"day")||a(e,c,"hour")||a(e,s,"minute")||a(e,o,"second")||e+" ms"}function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var o=1e3,s=60*o,c=60*s,u=24*c,l=365.25*u;e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return n(e);if("number"===a&&!1===isNaN(e))return t.long?i(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";var r=n(29),i=n(359),a=function(){a.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new d(0,0),new d(0,1),new d(1,0),new d(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};a.prototype=new r,a.prototype.push=function(e){var t,n,r;if("sei_rbsp"===e.nalUnitType&&(t=i.parseSei(e.escapedRBSP),t.payloadType===i.USER_DATA_REGISTERED_ITU_T_T35&&(n=i.parseUserData(t)))){if(e.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return void(--this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=i.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},a.prototype.flush=function(){if(!this.captionPackets_.length)return void this.ccStreams_.forEach(function(e){e.flush()},this);this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)},a.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},a.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},a.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},a.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};var o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},s=function(e){return null===e?"":(e=o[e]||e,String.fromCharCode(e))},c=14,u=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],l=function(){for(var e=[],t=c+1;t--;)e.push("");return e},d=function(e,t){d.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,a;if((t=32639&e.ccData)===this.lastControlCode_)return void(this.lastControlCode_=null);if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=l();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=l();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=l()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(r,i))r=(3&r)<<8,a=s(r|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),r=(3&r)<<8,a=s(r|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var o=u.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=s(r),a+=s(i),this[this.mode_](e.pts,a),this.column_+=a.length)}};d.prototype=new r,d.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},d.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=l(),this.nonDisplayed_=l(),this.lastControlCode_=null,this.column_=0,this.row_=c,this.rollUpRows_=2,this.formatting_=[]},d.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},d.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},d.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},d.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},d.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},d.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},d.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},d.prototype.isNormalChar=function(e){return e>=32&&e<=127},d.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=c,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=l(),this.displayed_=l()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},d.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},d.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},d.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},d.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},d.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<c+1;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},d.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},e.exports={CaptionStream:a,Cea608Stream:d}},function(e,t,n){"use strict";var r=n(29),i=8589934592,a=4294967296,o=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>a;)e+=n*i;return e},s=function(e){var t,n;s.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(void 0===n&&(n=e.dts),e.dts=o(e.dts,n),e.pts=o(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.discontinuity=function(){n=void 0,t=void 0}};s.prototype=new r,e.exports={TimestampRolloverStream:s,handleRollover:o}},function(e,t,n){"use strict";var r,i,a,o,s,c,u,l,d,f,h,p,v,g,m,y,b,_,w,S,k,T,C,x,E,P,$,A,O,I,R,L,j,D,N,U,M=Math.pow(2,32)-1;!function(){var e;if(C={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in C)C.hasOwnProperty(e)&&(C[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);x=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),P=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),E=new Uint8Array([0,0,0,1]),$=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),A=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),O={video:$,audio:A},L=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),R=new Uint8Array([0,0,0,0,0,0,0,0]),j=new Uint8Array([0,0,0,0,0,0,0,0]),D=j,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),U=j,I=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),r=function(e){var t,n,r,i=[],a=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)a+=i[t].byteLength;for(n=new Uint8Array(a+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength),r.setUint32(0,n.byteLength),n.set(e,4),t=0,a=8;t<i.length;t++)n.set(i[t],a),a+=i[t].byteLength;return n},i=function(){return r(C.dinf,r(C.dref,L))},a=function(e){return r(C.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},o=function(){return r(C.ftyp,x,E,x,P)},y=function(e){return r(C.hdlr,O[e])},s=function(e){return r(C.mdat,e)},m=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),r(C.mdhd,t)},g=function(e){return r(C.mdia,m(e),y(e.type),u(e))},c=function(e){return r(C.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},u=function(e){return r(C.minf,"video"===e.type?r(C.vmhd,I):r(C.smhd,R),i(),_(e))},l=function(e,t){for(var n=[],i=t.length;i--;)n[i]=S(t[i]);return r.apply(null,[C.moof,c(e)].concat(n))},d=function(e){for(var t=e.length,n=[];t--;)n[t]=p(e[t]);return r.apply(null,[C.moov,h(4294967295)].concat(n).concat(f(e)))},f=function(e){for(var t=e.length,n=[];t--;)n[t]=k(e[t]);return r.apply(null,[C.mvex].concat(n))},h=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return r(C.mvhd,t)},b=function(e){var t,n,i=e.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)t=i[n].flags,a[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return r(C.sdtp,a)},_=function(e){return r(C.stbl,w(e),r(C.stts,U),r(C.stsc,D),r(C.stsz,N),r(C.stco,j))},function(){var e,t;w=function(n){return r(C.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===n.type?e(n):t(n))},e=function(e){var t,n=e.sps||[],i=e.pps||[],a=[],o=[];for(t=0;t<n.length;t++)a.push((65280&n[t].byteLength)>>>8),a.push(255&n[t].byteLength),a=a.concat(Array.prototype.slice.call(n[t]));for(t=0;t<i.length;t++)o.push((65280&i[t].byteLength)>>>8),o.push(255&i[t].byteLength),o=o.concat(Array.prototype.slice.call(i[t]));return r(C.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),r(C.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length]).concat(a).concat([i.length]).concat(o))),r(C.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},t=function(e){return r(C.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),a(e))}}(),v=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return r(C.tkhd,t)},S=function(e){var t,n,i,a,o,s,c;return t=r(C.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(M+1)),c=Math.floor(e.baseMediaDecodeTime%(M+1)),n=r(C.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,c>>>24&255,c>>>16&255,c>>>8&255,255&c])),o=92,"audio"===e.type?(i=T(e,o),r(C.traf,t,n,i)):(a=b(e),i=T(e,a.length+o),r(C.traf,t,n,i,a))},p=function(e){return e.duration=e.duration||4294967295,r(C.trak,v(e),g(e))},k=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),r(C.trex,t)},function(){var e,t,n;n=function(e,t){var n=0,r=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t=function(e,t){var i,a,o,s;for(a=e.samples||[],t+=20+16*a.length,i=n(a,t),s=0;s<a.length;s++)o=a[s],i=i.concat([(4278190080&o.duration)>>>24,(16711680&o.duration)>>>16,(65280&o.duration)>>>8,255&o.duration,(4278190080&o.size)>>>24,(16711680&o.size)>>>16,(65280&o.size)>>>8,255&o.size,o.flags.isLeading<<2|o.flags.dependsOn,o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,61440&o.flags.degradationPriority,15&o.flags.degradationPriority,(4278190080&o.compositionTimeOffset)>>>24,(16711680&o.compositionTimeOffset)>>>16,(65280&o.compositionTimeOffset)>>>8,255&o.compositionTimeOffset]);return r(C.trun,new Uint8Array(i))},e=function(e,t){var i,a,o,s;for(a=e.samples||[],t+=20+8*a.length,i=n(a,t),s=0;s<a.length;s++)o=a[s],i=i.concat([(4278190080&o.duration)>>>24,(16711680&o.duration)>>>16,(65280&o.duration)>>>8,255&o.duration,(4278190080&o.size)>>>24,(16711680&o.size)>>>16,(65280&o.size)>>>8,255&o.size]);return r(C.trun,new Uint8Array(i))},T=function(n,r){return"audio"===n.type?e(n,r):t(n,r)}}(),e.exports={ftyp:o,mdat:s,moof:l,moov:d,initSegment:function(e){var t,n=o(),r=d(e);return t=new Uint8Array(n.byteLength+r.byteLength),t.set(n),t.set(r,n.byteLength),t}}},function(e,t,n){"use strict";var r=4,i=128,a=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},a=0,o=0;t<e.byteLength&&e[t]!==i;){for(;255===e[t];)a+=255,t++;for(a+=e[t++];255===e[t];)o+=255,t++;if(o+=e[t++],!n.payload&&a===r){n.payloadType=a,n.payloadSize=o,n.payload=e.subarray(t,t+o);break}t+=o,a=0,o=0}return n},o=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},s=function(e,t){var n,r,i,a,o=[];if(!(64&t[0]))return o;for(r=31&t[0],n=0;n<r;n++)i=3*n,a={type:3&t[i+2],pts:e},4&t[i+2]&&(a.ccData=t[i+3]<<8|t[i+4],o.push(a));return o},c=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n};e.exports={parseSei:a,parseUserData:o,parseCaptionPackets:s,discardEmulationPreventionBytes:c,USER_DATA_REGISTERED_ITU_T_T35:r}},function(e,t,n){"use strict";(function(e){function r(e){return n.i(u.b)(e)}function i(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.slice(t,n)}function a(e,t,r,a,o){(r>0||a<t.size)&&(t=i(t,r,a)),n.i(u.c)(t,function(t){e.append(t),o()})}function o(e,t,n,r,i){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function s(e,t){function n(){f(s)}function i(){var e=g.end(!0),n=r(e);t(n),g.destroy()}function s(){var t=v*l,r=t+l;v++,v<p?m(g,e,t,r,n):m(g,e,t,r,i)}var c="string"==typeof e,u=c?e.length:e.size,l=Math.min(h,u),p=Math.ceil(u/l),v=0,g=c?new d.a:new d.a.ArrayBuffer,m=c?o:a;s()}function c(e){return d.a.hash(e)}var u=n(186),l=n(368),d=n.n(l);n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var f=e.setImmediate||e.setTimeout,h=32768}).call(t,n(6))},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var a=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}e.exports=n}).call(t,n(6))},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><title>Book</title><path d="M7.39 1l-1.33.38L9 4.15zM2.57 17.38l6.18 3.18.18-15.65-6.36-3.24zM14.61 1L13 4.15l3-2.77zm-1.54 3.91l.18 15.65 6.18-3.18V1.67zM3.2 1.51l5.86 3.07-4.78-3.35zm14.52-.28l-4.78 3.35 5.86-3.07zM9.48 5v15.62a3.25 3.25 0 0 0 3.06 0V5a3.31 3.31 0 0 1-3.06 0z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Learning Path</title><path d="M11.19 6.23c.27 0 .35-.17.19-.38L9.19 3a.34.34 0 0 0-.57 0L6.47 5.84c-.16.21-.07.38.19.38zM11.64 13.97H1v-1.04h10.21l8.88-8.88.74.74-9.19 9.18z"/><path d="M9.52 10.5H1V9.46h7.47V5.11h1.05v5.39zM1 16.23h17.38v1.04H1zM20.09 8c.18.19.37.13.4-.13L21 4.29a.35.35 0 0 0-.41-.41L17 4.41c-.26 0-.32.22-.13.4z"/><path d="M16.63 18.94c0 .26.17.35.38.19l2.91-2.19a.34.34 0 0 0 0-.57L17 14.21c-.21-.15-.38-.07-.38.2z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Video</title><rect x="1" y="6.65" width="13.67" height="8.89" rx=".95" ry=".95"/><path d="M15.55 10.82v1.93a2.08 2.08 0 0 0 .86 1.64l3.73 2.29c.47.29.86 0 .86-.6v-5.26z"/><path d="M15.55 11.18V9.25a2.08 2.08 0 0 1 .86-1.64l3.73-2.29c.47-.29.86 0 .86.6v5.26z"/></svg>\n'},function(e,t,n){!function(t){e.exports=t()}(function(e){"use strict";function t(e,t){var n=e[0],r=e[1],i=e[2],a=e[3];n+=(r&i|~r&a)+t[0]-680876936|0,n=(n<<7|n>>>25)+r|0,a+=(n&r|~n&i)+t[1]-389564586|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&r)+t[2]+606105819|0,i=(i<<17|i>>>15)+a|0,r+=(i&a|~i&n)+t[3]-1044525330|0,r=(r<<22|r>>>10)+i|0,n+=(r&i|~r&a)+t[4]-176418897|0,n=(n<<7|n>>>25)+r|0,a+=(n&r|~n&i)+t[5]+1200080426|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&r)+t[6]-1473231341|0,i=(i<<17|i>>>15)+a|0,r+=(i&a|~i&n)+t[7]-45705983|0,r=(r<<22|r>>>10)+i|0,n+=(r&i|~r&a)+t[8]+1770035416|0,n=(n<<7|n>>>25)+r|0,a+=(n&r|~n&i)+t[9]-1958414417|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&r)+t[10]-42063|0,i=(i<<17|i>>>15)+a|0,r+=(i&a|~i&n)+t[11]-1990404162|0,r=(r<<22|r>>>10)+i|0,n+=(r&i|~r&a)+t[12]+1804603682|0,n=(n<<7|n>>>25)+r|0,a+=(n&r|~n&i)+t[13]-40341101|0,a=(a<<12|a>>>20)+n|0,i+=(a&n|~a&r)+t[14]-1502002290|0,i=(i<<17|i>>>15)+a|0,r+=(i&a|~i&n)+t[15]+1236535329|0,r=(r<<22|r>>>10)+i|0,n+=(r&a|i&~a)+t[1]-165796510|0,n=(n<<5|n>>>27)+r|0,a+=(n&i|r&~i)+t[6]-1069501632|0,a=(a<<9|a>>>23)+n|0,i+=(a&r|n&~r)+t[11]+643717713|0,i=(i<<14|i>>>18)+a|0,r+=(i&n|a&~n)+t[0]-373897302|0,r=(r<<20|r>>>12)+i|0,n+=(r&a|i&~a)+t[5]-701558691|0,n=(n<<5|n>>>27)+r|0,a+=(n&i|r&~i)+t[10]+38016083|0,a=(a<<9|a>>>23)+n|0,i+=(a&r|n&~r)+t[15]-660478335|0,i=(i<<14|i>>>18)+a|0,r+=(i&n|a&~n)+t[4]-405537848|0,r=(r<<20|r>>>12)+i|0,n+=(r&a|i&~a)+t[9]+568446438|0,n=(n<<5|n>>>27)+r|0,a+=(n&i|r&~i)+t[14]-1019803690|0,a=(a<<9|a>>>23)+n|0,i+=(a&r|n&~r)+t[3]-187363961|0,i=(i<<14|i>>>18)+a|0,r+=(i&n|a&~n)+t[8]+1163531501|0,r=(r<<20|r>>>12)+i|0,n+=(r&a|i&~a)+t[13]-1444681467|0,n=(n<<5|n>>>27)+r|0,a+=(n&i|r&~i)+t[2]-51403784|0,a=(a<<9|a>>>23)+n|0,i+=(a&r|n&~r)+t[7]+1735328473|0,i=(i<<14|i>>>18)+a|0,r+=(i&n|a&~n)+t[12]-1926607734|0,r=(r<<20|r>>>12)+i|0,n+=(r^i^a)+t[5]-378558|0,n=(n<<4|n>>>28)+r|0,a+=(n^r^i)+t[8]-2022574463|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^r)+t[11]+1839030562|0,i=(i<<16|i>>>16)+a|0,r+=(i^a^n)+t[14]-35309556|0,r=(r<<23|r>>>9)+i|0,n+=(r^i^a)+t[1]-1530992060|0,n=(n<<4|n>>>28)+r|0,a+=(n^r^i)+t[4]+1272893353|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^r)+t[7]-155497632|0,i=(i<<16|i>>>16)+a|0,r+=(i^a^n)+t[10]-1094730640|0,r=(r<<23|r>>>9)+i|0,n+=(r^i^a)+t[13]+681279174|0,n=(n<<4|n>>>28)+r|0,a+=(n^r^i)+t[0]-358537222|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^r)+t[3]-722521979|0,i=(i<<16|i>>>16)+a|0,r+=(i^a^n)+t[6]+76029189|0,r=(r<<23|r>>>9)+i|0,n+=(r^i^a)+t[9]-640364487|0,n=(n<<4|n>>>28)+r|0,a+=(n^r^i)+t[12]-421815835|0,a=(a<<11|a>>>21)+n|0,i+=(a^n^r)+t[15]+530742520|0,i=(i<<16|i>>>16)+a|0,r+=(i^a^n)+t[2]-995338651|0,r=(r<<23|r>>>9)+i|0,n+=(i^(r|~a))+t[0]-198630844|0,n=(n<<6|n>>>26)+r|0,a+=(r^(n|~i))+t[7]+1126891415|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~r))+t[14]-1416354905|0,i=(i<<15|i>>>17)+a|0,r+=(a^(i|~n))+t[5]-57434055|0,r=(r<<21|r>>>11)+i|0,n+=(i^(r|~a))+t[12]+1700485571|0,n=(n<<6|n>>>26)+r|0,a+=(r^(n|~i))+t[3]-1894986606|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~r))+t[10]-1051523|0,i=(i<<15|i>>>17)+a|0,r+=(a^(i|~n))+t[1]-2054922799|0,r=(r<<21|r>>>11)+i|0,n+=(i^(r|~a))+t[8]+1873313359|0,n=(n<<6|n>>>26)+r|0,a+=(r^(n|~i))+t[15]-30611744|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~r))+t[6]-1560198380|0,i=(i<<15|i>>>17)+a|0,r+=(a^(i|~n))+t[13]+1309151649|0,r=(r<<21|r>>>11)+i|0,n+=(i^(r|~a))+t[4]-145523070|0,n=(n<<6|n>>>26)+r|0,a+=(r^(n|~i))+t[11]-1120210379|0,a=(a<<10|a>>>22)+n|0,i+=(n^(a|~r))+t[2]+718787259|0,i=(i<<15|i>>>17)+a|0,r+=(a^(i|~n))+t[9]-343485551|0,r=(r<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=a+e[3]|0}function n(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var r,i,a,o,s,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=u;r+=64)t(l,n(e.substring(r-64,r)));for(e=e.substring(r-64),i=e.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<i;r+=1)a[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(a[r>>2]|=128<<(r%4<<3),r>55)for(t(l,a),r=0;r<16;r+=1)a[r]=0;return o=8*u,o=o.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(o[2],16),c=parseInt(o[1],16)||0,a[14]=s,a[15]=c,t(l,a),l}function a(e){var n,i,a,o,s,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=u;n+=64)t(l,r(e.subarray(n-64,n)));for(e=n-64<u?e.subarray(n-64):new Uint8Array(0),i=e.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<i;n+=1)a[n>>2]|=e[n]<<(n%4<<3);if(a[n>>2]|=128<<(n%4<<3),n>55)for(t(l,a),n=0;n<16;n+=1)a[n]=0;return o=8*u,o=o.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(o[2],16),c=parseInt(o[1],16)||0,a[14]=s,a[15]=c,t(l,a),l}function o(e){var t,n="";for(t=0;t<4;t+=1)n+=p[e>>8*t+4&15]+p[e>>8*t&15];return n}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=o(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e,t){var n,r=e.length,i=new ArrayBuffer(r),a=new Uint8Array(i);for(n=0;n<r;n+=1)a[n]=e.charCodeAt(n);return t?a:i}function l(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function d(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function f(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function h(){this.reset()}var p=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==s(i("hello"))&&function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return e=0|e||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var i,a,o,s,c=this.byteLength,u=t(n,c),l=c;return r!==e&&(l=t(r,c)),u>l?new ArrayBuffer(0):(i=l-u,a=new ArrayBuffer(i),o=new Uint8Array(a),s=new Uint8Array(this,u,i),o.set(s),a)}}(),h.prototype.append=function(e){return this.appendBinary(c(e)),this},h.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var r,i=this._buff.length;for(r=64;r<=i;r+=64)t(this._hash,n(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},h.prototype.end=function(e){var t,n,r=this._buff,i=r.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)a[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(a,i),n=s(this._hash),e&&(n=f(n)),this.reset(),n},h.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},h.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},h.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},h.prototype._finish=function(e,n){var r,i,a,o=n;if(e[o>>2]|=128<<(o%4<<3),o>55)for(t(this._hash,e),o=0;o<16;o+=1)e[o]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),a=parseInt(r[1],16)||0,e[14]=i,e[15]=a,t(this._hash,e)},h.hash=function(e,t){return h.hashBinary(c(e),t)},h.hashBinary=function(e,t){var n=i(e),r=s(n);return t?f(r):r},h.ArrayBuffer=function(){this.reset()},h.ArrayBuffer.prototype.append=function(e){var n,i=d(this._buff.buffer,e,!0),a=i.length;for(this._length+=e.byteLength,n=64;n<=a;n+=64)t(this._hash,r(i.subarray(n-64,n)));return this._buff=n-64<a?new Uint8Array(i.buffer.slice(n-64)):new Uint8Array(0),this},h.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)a[t>>2]|=r[t]<<(t%4<<3);return this._finish(a,i),n=s(this._hash),e&&(n=f(n)),this.reset(),n},h.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.ArrayBuffer.prototype.getState=function(){var e=h.prototype.getState.call(this);return e.buff=l(e.buff),e},h.ArrayBuffer.prototype.setState=function(e){return e.buff=u(e.buff,!0),h.prototype.setState.call(this,e)},h.ArrayBuffer.prototype.destroy=h.prototype.destroy,h.ArrayBuffer.prototype._finish=h.prototype._finish,h.ArrayBuffer.hash=function(e,t){var n=a(new Uint8Array(e)),r=s(n);return t?f(r):r},h})},function(e,t,n){(function(e,r){function i(e,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),c(r,e,r.depth)}function a(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function o(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,n,r){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=c(e,i,r)),i}var a=u(e,n);if(a)return a;var o=Object.keys(n),v=s(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),C(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(n);if(0===o.length){if(x(n)){var g=n.name?": "+n.name:"";return e.stylize("[Function"+g+"]","special")}if(S(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return e.stylize(Date.prototype.toString.call(n),"date");if(C(n))return l(n)}var m="",y=!1,_=["{","}"];if(p(n)&&(y=!0,_=["[","]"]),x(n)){m=" [Function"+(n.name?": "+n.name:"")+"]"}if(S(n)&&(m=" "+RegExp.prototype.toString.call(n)),T(n)&&(m=" "+Date.prototype.toUTCString.call(n)),C(n)&&(m=" "+l(n)),0===o.length&&(!y||0==n.length))return _[0]+m+_[1];if(r<0)return S(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var w;return w=y?d(e,n,r,v,o):o.map(function(t){return f(e,n,r,v,t,y)}),e.seen.pop(),h(w,m,_)}function u(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)O(t,String(o))?a.push(f(e,t,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(f(e,t,n,r,i,!0))}),a}function f(e,t,n,r,i,a){var o,s,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),O(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=g(n)?c(e,u.value,null):c(e,u.value,n-1),s.indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(o)){if(a&&i.match(/^\d+$/))return s;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function h(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function _(e){return"symbol"==typeof e}function w(e){return void 0===e}function S(e){return k(e)&&"[object RegExp]"===P(e)}function k(e){return"object"==typeof e&&null!==e}function T(e){return k(e)&&"[object Date]"===P(e)}function C(e){return k(e)&&("[object Error]"===P(e)||e instanceof Error)}function x(e){return"function"==typeof e}function E(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function P(e){return Object.prototype.toString.call(e)}function $(e){return e<10?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[$(e.getHours()),$(e.getMinutes()),$(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var I=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,a=r.length,o=String(e).replace(I,function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<a;s=r[++n])g(s)||!k(s)?o+=" "+s:o+=" "+i(s);return o},t.deprecate=function(n,i){function a(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}if(w(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return a};var R,L={};t.debuglog=function(e){if(w(R)&&(R=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=r.pid;L[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else L[e]=function(){};return L[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=v,t.isNull=g,t.isNullOrUndefined=m,t.isNumber=y,t.isString=b,t.isSymbol=_,t.isUndefined=w,t.isRegExp=S,t.isObject=k,t.isDate=T,t.isError=C,t.isFunction=x,t.isPrimitive=E,t.isBuffer=n(1115);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(1114),t._extend=function(e,t){if(!t||!k(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(6),n(9))},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function o(e,t,n){return o=a()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&i(o,n.prototype),o},o.apply(null,arguments)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return t||(t=e.slice(0)),e.raw=t,e}function u(e){var t,n="info",r=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t("log",n,r)};return t=gt(e,r),r.createLogger=function(t){return u(e+": "+t)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},r.level=function(e){if("string"==typeof e){if(!r.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');n=e}return n},r.history=function(){return vt?[].concat(vt):[]},r.history.filter=function(e){return(vt||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},r.history.clear=function(){vt&&(vt.length=0)},r.history.disable=function(){null!==vt&&(vt.length=0,vt=null)},r.history.enable=function(){null===vt&&(vt=[])},r.error=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t("error",n,r)},r.warn=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t("warn",n,r)},r.debug=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t("debug",n,r)},r}function l(e,t){_t(e).forEach(function(n){return t(e[n],n)})}function d(e,t,n){return void 0===n&&(n=0),_t(e).reduce(function(n,r){return t(n,e[r],r)},n)}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign?Object.assign.apply(Object,[e].concat(n)):(n.forEach(function(t){t&&l(t,function(t,n){e[n]=t})}),e)}function h(e){return!!e&&"object"==typeof e}function p(e){return h(e)&&"[object Object]"===bt.call(e)&&e.constructor===Object}function v(e,t){if(!e||!t)return"";if("function"==typeof rt.a.getComputedStyle){var n=rt.a.getComputedStyle(e);return n?n[t]:""}return""}function g(){var e=c(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);return g=function(){return e},e}function m(e){return"string"==typeof e&&/\S/.test(e)}function y(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function b(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function _(){return ot.a===rt.a.document}function w(e){return h(e)&&1===e.nodeType}function S(){try{return rt.a.parent!==rt.a.self}catch(e){return!0}}function k(e){return function(t,n){if(!m(t))return ot.a[e](null);m(n)&&(n=ot.a.querySelector(n));var r=w(n)?n:ot.a;return r[e]&&r[e](t)}}function T(e,t,n,r){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={});var i=ot.a.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(mt.warn(Je()(g(),e,n)),i.setAttribute(e,n)):"textContent"===e?C(i,n):i[e]=n}),Object.getOwnPropertyNames(n).forEach(function(e){i.setAttribute(e,n[e])}),r&&V(i,r),i}function C(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function x(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function E(e,t){return y(t),e.classList?e.classList.contains(t):b(t).test(e.className)}function P(e,t){return e.classList?e.classList.add(t):E(e,t)||(e.className=(e.className+" "+t).trim()),e}function $(e,t){return e.classList?e.classList.remove(t):(y(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function A(e,t,n){var r=E(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!r),n!==r)return n?P(e,t):$(e,t),e}function O(e,t){Object.getOwnPropertyNames(t).forEach(function(n){var r=t[n];null===r||void 0===r||!1===r?e.removeAttribute(n):e.setAttribute(n,!0===r?"":r)})}function I(e){var t={};if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,r=n.length-1;r>=0;r--){var i=n[r].name,a=n[r].value;"boolean"!=typeof e[i]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+",")||(a=null!==a),t[i]=a}return t}function R(e,t){return e.getAttribute(t)}function L(e,t,n){e.setAttribute(t,n)}function j(e,t){e.removeAttribute(t)}function D(){ot.a.body.focus(),ot.a.onselectstart=function(){return!1}}function N(){ot.a.onselectstart=function(){return!0}}function U(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),n.height||(n.height=parseFloat(v(e,"height"))),n.width||(n.width=parseFloat(v(e,"width"))),n}}function M(e){var t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=ot.a.documentElement,r=ot.a.body,i=n.clientLeft||r.clientLeft||0,a=rt.a.pageXOffset||r.scrollLeft,o=t.left+a-i,s=n.clientTop||r.clientTop||0,c=rt.a.pageYOffset||r.scrollTop,u=t.top+c-s;return{left:Math.round(o),top:Math.round(u)}}function F(e,t){var n={},r=M(e),i=e.offsetWidth,a=e.offsetHeight,o=r.top,s=r.left,c=t.pageY,u=t.pageX;return t.changedTouches&&(u=t.changedTouches[0].pageX,c=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(o-c+a)/a)),n.x=Math.max(0,Math.min(1,(u-s)/i)),n}function B(e){return h(e)&&3===e.nodeType}function q(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function H(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),w(e)||B(e)?e:"string"==typeof e&&/\S/.test(e)?ot.a.createTextNode(e):void 0}).filter(function(e){return e})}function V(e,t){return H(t).forEach(function(t){return e.appendChild(t)}),e}function z(e,t){return V(q(e),t)}function W(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||0===e.button&&1===e.buttons)}function G(){return Tt++}function Y(e){var t=e[xt];return t||(t=e[xt]=G()),Ct[t]||(Ct[t]={}),Ct[t]}function Q(e){var t=e[xt];return!!t&&!!Object.getOwnPropertyNames(Ct[t]).length}function X(e){var t=e[xt];if(t){delete Ct[t];try{delete e[xt]}catch(t){e.removeAttribute?e.removeAttribute(xt):e[xt]=null}}}function J(e,t){var n=Y(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&X(e)}function K(e,t,n,r){n.forEach(function(n){e(t,n,r)})}function Z(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var r=e||rt.a.event;e={};for(var i in r)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&r.preventDefault||(e[i]=r[i]));if(e.target||(e.target=e.srcElement||ot.a),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var a=ot.a.documentElement,o=ot.a.body;e.pageX=e.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}function ee(e,t,n){if(Array.isArray(t))return K(ee,e,t,n);var r=Y(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=G()),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(!r.disabled){t=Z(t);var i=r.handlers[t.type];if(i)for(var a=i.slice(0),o=0,s=a.length;o<s&&!t.isImmediatePropagationStopped();o++)try{a[o].call(e,t,n)}catch(e){mt.error(e)}}}),1===r.handlers[t].length)if(e.addEventListener){var i=!1;Et&&$t.indexOf(t)>-1&&(i={passive:!0}),e.addEventListener(t,r.dispatcher,i)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function te(e,t,n){if(Q(e)){var r=Y(e);if(r.handlers){if(Array.isArray(t))return K(te,e,t,n);var i=function(e,t){r.handlers[t]=[],J(e,t)};if(void 0!==t){var a=r.handlers[t];if(a){if(!n)return void i(e,t);if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);J(e,t)}}else for(var s in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},s)&&i(e,s)}}}function ne(e,t,n){var r=Q(e)?Y(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Z(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles)ne.call(null,i,t,n);else if(!i&&!t.defaultPrevented){var a=Y(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function re(e,t,n){if(Array.isArray(t))return K(re,e,t,n);var r=function r(){te(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||G(),ee(e,t,r)}function ie(e,t){t&&(Pt=t),rt.a.setTimeout(It,e)}function ae(e,t){void 0===t&&(t={});var n=t,r=n.eventBusKey;if(r){if(!e[r].nodeName)throw new Error('The eventBusKey "'+r+'" does not refer to an element.');e.eventBusEl_=e[r]}else e.eventBusEl_=T("span",{className:"vjs-event-bus"});return f(e,Yt),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),rt.a.setTimeout(function(){e.eventBusEl_=null},0)}),e}function oe(e,t){return f(e,Qt),e.state=f({},e.state,t),"function"==typeof e.handleStateChanged&&Ft(e)&&e.on("statechanged",e.handleStateChanged),e}function se(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function ce(e,t){return se(e)===se(t)}function ue(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){t&&l(t,function(t,n){if(!p(t))return void(e[n]=t);p(e[n])||(e[n]={}),e[n]=ue(e[n],t)})}),e}function le(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}function de(e,t,n,r){return le(e,r,n.length-1),n[r][t]}function fe(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:de.bind(null,"start",0,e),end:de.bind(null,"end",1,e)}}function he(e,t){return Array.isArray(e)?fe(e):void 0===e||void 0===t?fe():fe([[e,t]])}function pe(e,t){var n,r,i=0;if(!t)return 0;e&&e.length||(e=he(0,0));for(var a=0;a<e.length;a++)n=e.start(a),r=e.end(a),r>t&&(r=t),i+=r-n;return i/t}function ve(e){if(e instanceof ve)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:h(e)&&("number"==typeof e.code&&(this.code=e.code),f(this,e)),this.message||(this.message=ve.defaultMessages[this.code]||"")}function ge(e){return void 0!==e&&null!==e&&"function"==typeof e.then}function me(e){ge(e)&&e.then(null,function(e){})}function ye(e,t,n,r,i){void 0===i&&(i={});var a=e.textTracks();i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e;var o=new sr.text.TrackClass(i);return a.addTrack(o),o}function be(e,t){ur[e]=ur[e]||[],ur[e].push(t)}function _e(e,t,n){e.setTimeout(function(){return $e(t,ur[t.type],n,e)},1)}function we(e,t){e.forEach(function(e){return e.setTech&&e.setTech(t)})}function Se(e,t,n){return e.reduceRight(Ce(n),t[n]())}function ke(e,t,n,r){return t[n](e.reduce(Ce(n),r))}function Te(e,t,n,r){void 0===r&&(r=null);var i="call"+se(n),a=e.reduce(Ce(i),r),o=a===dr,s=o?null:t[n](a);return xe(e,n,s,o),s}function Ce(e){return function(t,n){return t===dr?dr:n[e]?n[e](t):t}}function xe(e,t,n,r){for(var i=e.length-1;i>=0;i--){var a=e[i];a[t]&&a[t](r,n)}}function Ee(e){lr[e.id()]=null}function Pe(e,t){var n=lr[e.id()],r=null;if(void 0===n||null===n)return r=t(e),lr[e.id()]=[[t,r]],r;for(var i=0;i<n.length;i++){var a=n[i],o=a[0],s=a[1];o===t&&(r=s)}return null===r&&(r=t(e),n.push([t,r])),r}function $e(e,t,n,r,i,a){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===i&&(i=[]),void 0===a&&(a=!1);var o=t,s=o[0],c=o.slice(1);if("string"==typeof s)$e(e,ur[s],n,r,i,a);else if(s){var u=Pe(r,s);if(!u.setSource)return i.push(u),$e(e,c,n,r,i,a);u.setSource(f({},e),function(t,o){if(t)return $e(e,c,n,r,i,a);i.push(u),$e(o,e.type===o.type?c:ur[o.type],n,r,i,a)})}else c.length?$e(e,c,n,r,i,a):a?n(e,i):$e(e,ur["*"],n,r,i,!0)}function Ae(e){var t=gr(e.src);return!e.type&&t&&(e.type=t),e}function Oe(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Ie(e,t,n){try{e.style[t]=n}catch(e){return}}function Re(e){Ir=e}function Le(){Ir=Or}function je(e,t){return void 0===t&&(t=e),Ir(e,t)}function De(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function Ne(e,t){return De(e.options[e.options.selectedIndex].value,t)}function Ue(e,t,n){if(t)for(var r=0;r<e.options.length;r++)if(De(e.options[r].value,n)===t){e.selectedIndex=r;break}}function Me(){var e=c(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);return Me=function(){return e},e}function Fe(){var e=c(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);return Fe=function(){return e},e}function Be(e,t,n){var r=Be.getPlayer(e);if(r)return t&&mt.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&r.ready(n),r;var i="string"==typeof e?wt("#"+ba(e)):e;if(!w(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");ot.a.body.contains(i)||mt.warn("The element supplied is not included in the DOM"),t=t||{},Be.hooks("beforesetup").forEach(function(e){var n=e(i,ue(t));if(!h(n)||Array.isArray(n))return void mt.error("please return an object in beforesetup hooks");t=ue(t,n)});var a=Xt.getComponent("Player");return r=new a(i,t,n),Be.hooks("setup").forEach(function(e){return e(r)}),r}function qe(e,t){return function(n){var r=this;if(!t)return new Xo(e);if(Xo&&!n){var i=t.toString().replace(/^function.+?{/,"").slice(0,-1),a=He(i);return this[Wo]=new Xo(a),Ve(this[Wo],a),this[Wo]}var o={postMessage:function(e){r.onmessage&&setTimeout(function(){r.onmessage({data:e,target:o})})}};t.call(o),this.postMessage=function(e){setTimeout(function(){o.onmessage({data:e,target:r})})},this.isThisThread=!0}}function He(e){try{return Qo.createObjectURL(new Blob([e],{type:Go}))}catch(n){var t=new Yo;return t.append(e),Qo.createObjectURL(t.getBlob(type))}}function Ve(e,t){if(e&&t){var n=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&Qo.revokeObjectURL(e.objURL),n.call(e)}}}function ze(){}Object.defineProperty(t,"__esModule",{value:!0});var We=n(1107),Ge=n.n(We),Ye=n(1116),Qe=n.n(Ye),Xe=n(1112),Je=n.n(Xe),Ke=n(1121),Ze=n.n(Ke),et=n(1113),tt=n.n(et),nt=n(69),rt=n.n(nt),it=n(986),at=n(731),ot=n.n(at),st=n(987),ct=n(122),ut=n.n(ct),lt=n(998),dt=(n.n(lt),n(1001)),ft=n.n(dt),ht=n(480),pt="7.4.1",vt=[],gt=function(e,t){return function(n,r,i){var a=t.levels[r],o=new RegExp("^("+a+")$");if("log"!==n&&i.unshift(n.toUpperCase()+":"),i.unshift(e+":"),vt&&vt.push([].concat(i)),rt.a.console){var s=rt.a.console[n];s||"debug"!==n||(s=rt.a.console.info||rt.a.console.log),s&&a&&o.test(n)&&s[Array.isArray(i)?"apply":"call"](rt.a.console,i)}}},mt=u("VIDEOJS"),yt=mt.createLogger,bt=Object.prototype.toString,_t=function(e){return h(e)?Object.keys(e):[]},wt=k("querySelector"),St=k("querySelectorAll"),kt=Object.freeze({isReal:_,isEl:w,isInFrame:S,createEl:T,textContent:C,prependTo:x,hasClass:E,addClass:P,removeClass:$,toggleClass:A,setAttributes:O,getAttributes:I,getAttribute:R,setAttribute:L,removeAttribute:j,blockTextSelection:D,unblockTextSelection:N,getBoundingClientRect:U,findPosition:M,getPointerPosition:F,isTextNode:B,emptyEl:q,normalizeContent:H,appendContent:V,insertContent:z,isSingleLeftClick:W,$:wt,$$:St}),Tt=1,Ct={},xt="vdata"+(new Date).getTime(),Et=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){Et=!0}});rt.a.addEventListener("test",null,e),rt.a.removeEventListener("test",null,e)}catch(e){}}();var Pt,$t=["touchstart","touchmove"],At=Object.freeze({fixEvent:Z,on:ee,off:te,trigger:ne,one:re}),Ot=!1,It=function(){if(_()&&!1!==Pt.options.autoSetup){var e=Array.prototype.slice.call(ot.a.getElementsByTagName("video")),t=Array.prototype.slice.call(ot.a.getElementsByTagName("audio")),n=Array.prototype.slice.call(ot.a.getElementsByTagName("video-js")),r=e.concat(t,n);if(r&&r.length>0)for(var i=0,a=r.length;i<a;i++){var o=r[i];if(!o||!o.getAttribute){ie(1);break}if(void 0===o.player){var s=o.getAttribute("data-setup");null!==s&&Pt(o)}}else Ot||ie(1)}};_()&&"complete"===ot.a.readyState?Ot=!0:re(rt.a,"load",function(){Ot=!0});var Rt=function(e){var t=ot.a.createElement("style");return t.className=e,t},Lt=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},jt=function(e,t,n){t.guid||(t.guid=G());var r=function(){return t.apply(e,arguments)};return r.guid=n?n+"_"+t.guid:t.guid,r},Dt=function(e,t){var n=Date.now();return function(){var r=Date.now();r-n>=t&&(e.apply(void 0,arguments),n=r)}},Nt=function(e,t,n,r){void 0===r&&(r=rt.a);var i,a=function(){r.clearTimeout(i),i=null},o=function(){var a=this,o=arguments,s=function(){i=null,s=null,n||e.apply(a,o)};!i&&n&&e.apply(a,o),r.clearTimeout(i),i=r.setTimeout(s,t)};return o.cancel=a,o},Ut=function(){};Ut.prototype.allowedEvents_={},Ut.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},ee(this,e,t),this.addEventListener=n},Ut.prototype.addEventListener=Ut.prototype.on,Ut.prototype.off=function(e,t){te(this,e,t)},Ut.prototype.removeEventListener=Ut.prototype.off,Ut.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},re(this,e,t),this.addEventListener=n},Ut.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=Z(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),ne(this,e)},Ut.prototype.dispatchEvent=Ut.prototype.trigger;var Mt;Ut.prototype.queueTrigger=function(e){var t=this;Mt||(Mt=new Map);var n=e.type||e,r=Mt.get(this);r||(r=new Map,Mt.set(this,r));var i=r.get(n);r.delete(n),rt.a.clearTimeout(i);var a=rt.a.setTimeout(function(){0===r.size&&(r=null,Mt.delete(t)),t.trigger(e)},0);r.set(n,a)};var Ft=function(e){return e instanceof Ut||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},Bt=function(e,t){Ft(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},qt=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Ht=function(e){if(!e.nodeName&&!Ft(e))throw new Error("Invalid target; must be a DOM node or evented object.")},Vt=function(e){if(!qt(e))throw new Error("Invalid event type; must be a non-empty string or array.")},zt=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},Wt=function(e,t){var n,r,i,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return a?(n=e.eventBusEl_,t.length>=3&&t.shift(),r=t[0],i=t[1]):(n=t[0],r=t[1],i=t[2]),Ht(n),Vt(r),zt(i),i=jt(e,i),{isTargetingSelf:a,target:n,type:r,listener:i}},Gt=function(e,t,n,r){Ht(e),e.nodeName?At[t](e,n,r):e[t](n,r)},Yt={on:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Wt(this,n),a=i.isTargetingSelf,o=i.target,s=i.type,c=i.listener;if(Gt(o,"on",s,c),!a){var u=function(){return e.off(o,s,c)};u.guid=c.guid;var l=function(){return e.off("dispose",u)};l.guid=c.guid,Gt(this,"on","dispose",u),Gt(o,"on","dispose",l)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Wt(this,n),a=i.isTargetingSelf,o=i.target,s=i.type,c=i.listener;if(a)Gt(o,"one",s,c);else{var u=function t(){e.off(o,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];c.apply(null,r)};u.guid=c.guid,Gt(o,"one",s,u)}},off:function(e,t,n){if(!e||qt(e))te(this.eventBusEl_,e,t);else{var r=e,i=t;Ht(r),Vt(i),zt(n),n=jt(this,n),this.off("dispose",n),r.nodeName?(te(r,i,n),te(r,"dispose",n)):Ft(r)&&(r.off(i,n),r.off("dispose",n))}},trigger:function(e,t){return ne(this.eventBusEl_,e,t)}},Qt={state:{},setState:function(e){var t=this;"function"==typeof e&&(e=e());var n;return l(e,function(e,r){t.state[r]!==e&&(n=n||{},n[r]={from:t.state[r],to:e}),t.state[r]=e}),n&&Ft(this)&&this.trigger({changes:n,type:"statechanged"}),n}},Xt=function(){function e(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.options_=ue({},this.options_),t=this.options_=ue(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var r=e&&e.id&&e.id()||"no_player";this.id_=r+"_component_"+G()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&ae(this,{eventBusKey:this.el_?"el_":null}),oe(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),X(this.el_),this.el_=null),this.player_=null},t.player=function(){return this.player_},t.options=function(e){return mt.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=ue(this.options_,e),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return T(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),a=i&&i[r],o=r&&r.split("-")[0],s=i&&i[o],c=n;return a&&a[e]?c=a[e]:s&&s[e]&&(c=s[e]),t&&(c=c.replace(/\{(\d+)\}/g,function(e,n){var r=t[n-1],i=r;return void 0===r&&(i=e),i})),c},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return e=se(e),this.childNameIndex_[e]},t.addChild=function(t,n,r){void 0===n&&(n={}),void 0===r&&(r=this.children_.length);var i,a;if("string"==typeof t){a=se(t);var o=n.componentClass||a;n.name=a;var s=e.getComponent(o);if(!s)throw new Error("Component "+o+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,n)}else i=t;if(this.children_.splice(r,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),a=a||i.name&&se(i.name()),a&&(this.childNameIndex_[a]=i),"function"==typeof i.el&&i.el()){var c=this.contentEl().children,u=c[r]||null;this.contentEl().insertBefore(i.el(),u)}return i},t.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,n=this.options_.children;if(n){var r,i=this.options_,a=function(e){var n=e.name,r=e.opts;if(void 0!==i[n]&&(r=i[n]),!1!==r){!0===r&&(r={}),r.playerOptions=t.options_.playerOptions;var a=t.addChild(n,r);a&&(t[n]=a)}},o=e.getComponent("Tech");r=Array.isArray(n)?n:Object.keys(n),r.concat(Object.keys(this.options_).filter(function(e){return!r.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var r,i;return"string"==typeof e?(r=e,i=n[r]||t.options_[r]||{}):(r=e.name,i=e),{name:r,opts:i}}).filter(function(t){var n=e.getComponent(t.opts.componentClass||se(t.name));return n&&!o.isTech(n)}).forEach(a)}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},t.$=function(e,t){return wt(e,t||this.contentEl())},t.$$=function(e,t){return St(e,t||this.contentEl())},t.hasClass=function(e){return E(this.el_,e)},t.addClass=function(e){P(this.el_,e)},t.removeClass=function(e){$(this.el_,e)},t.toggleClass=function(e,t){A(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return R(this.el_,e)},t.setAttribute=function(e,t){L(this.el_,e,t)},t.removeAttribute=function(e){j(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t===t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var r=this.el_.style[e],i=r.indexOf("px");return-1!==i?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+se(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof rt.a.getComputedStyle){var n=rt.a.getComputedStyle(this.el_);t=n.getPropertyValue(e)||n[e]}if(0===(t=parseFloat(t))){var r="offset"+se(e);t=this.el_[r]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.emitTapEvents=function(){var e,t=0,n=null,r=10,i=200;this.on("touchstart",function(r){1===r.touches.length&&(n={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},t=(new Date).getTime(),e=!0)}),this.on("touchmove",function(t){if(t.touches.length>1)e=!1;else if(n){var i=t.touches[0].pageX-n.pageX,a=t.touches[0].pageY-n.pageY,o=Math.sqrt(i*i+a*a);o>r&&(e=!1)}});var a=function(){e=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(r){if(n=null,!0===e){(new Date).getTime()-t<i&&(r.preventDefault(),this.trigger("tap"))}})},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=jt(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}},t.setTimeout=function(e,t){var n,r,i=this;return e=jt(this,e),n=rt.a.setTimeout(function(){i.off("dispose",r),e()},t),r=function(){return i.clearTimeout(n)},r.guid="vjs-timeout-"+n,this.on("dispose",r),n},t.clearTimeout=function(e){rt.a.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},t.setInterval=function(e,t){var n=this;e=jt(this,e);var r=rt.a.setInterval(e,t),i=function(){return n.clearInterval(r)};return i.guid="vjs-interval-"+r,this.on("dispose",i),r},t.clearInterval=function(e){rt.a.clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},t.requestAnimationFrame=function(e){var t,n,r=this;return this.supportsRaf_?(e=jt(this,e),t=rt.a.requestAnimationFrame(function(){r.off("dispose",n),e()}),n=function(){return r.cancelAnimationFrame(t)},n.guid="vjs-raf-"+t,this.on("dispose",n),t):this.setTimeout(e,1e3/60)},t.cancelAnimationFrame=function(e){if(this.supportsRaf_){rt.a.cancelAnimationFrame(e);var t=function(){};return t.guid="vjs-raf-"+e,this.off("dispose",t),e}return this.clearTimeout(e)},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var r=e.getComponent("Tech"),i=r&&r.isTech(n),a=e===n||e.prototype.isPrototypeOf(n.prototype);if(i||!a){var o;throw o=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+o+".")}t=se(t),e.components_||(e.components_={});var s=e.getComponent("Player");if("Player"===t&&s&&s.players){var c=s.players,u=Object.keys(c);if(c&&u.length>0&&u.map(function(e){return c[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,n},e.getComponent=function(t){if(t)return t=se(t),e.components_&&e.components_[t]?e.components_[t]:void 0},e}();Xt.prototype.supportsRaf_="function"==typeof rt.a.requestAnimationFrame&&"function"==typeof rt.a.cancelAnimationFrame,Xt.registerComponent("Component",Xt);for(var Jt,Kt=rt.a.navigator&&rt.a.navigator.userAgent||"",Zt=/AppleWebKit\/([\d.]+)/i.exec(Kt),en=Zt?parseFloat(Zt.pop()):null,tn=/iPad/i.test(Kt),nn=/iPhone/i.test(Kt)&&!tn,rn=/iPod/i.test(Kt),an=nn||tn||rn,on=function(){var e=Kt.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),sn=/Android/i.test(Kt),cn=function(){var e=Kt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),un=sn&&cn<5&&en<537,ln=/Firefox/i.test(Kt),dn=/Edge/i.test(Kt),fn=!dn&&(/Chrome/i.test(Kt)||/CriOS/i.test(Kt)),hn=function(){var e=Kt.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),pn=function(){var e=/MSIE\s(\d+)\.\d/.exec(Kt),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(Kt)&&/rv:11.0/.test(Kt)&&(t=11),t}(),vn=/Safari/i.test(Kt)&&!fn&&!sn&&!dn,gn=(vn||an)&&!fn,mn=(_()&&("ontouchstart"in rt.a||rt.a.navigator.maxTouchPoints||rt.a.DocumentTouch&&rt.a.document instanceof rt.a.DocumentTouch)),yn=Object.freeze({IS_IPAD:tn,IS_IPHONE:nn,IS_IPOD:rn,IS_IOS:an,IOS_VERSION:on,IS_ANDROID:sn,ANDROID_VERSION:cn,IS_NATIVE_ANDROID:un,IS_FIREFOX:ln,IS_EDGE:dn,IS_CHROME:fn,CHROME_VERSION:hn,IE_VERSION:pn,IS_SAFARI:vn,IS_ANY_SAFARI:gn,TOUCH_ENABLED:mn}),bn={},_n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],wn=_n[0],Sn=0;Sn<_n.length;Sn++)if(_n[Sn][1]in ot.a){Jt=_n[Sn];break}if(Jt)for(var kn=0;kn<Jt.length;kn++)bn[wn[kn]]=Jt[kn];ve.prototype.code=0,ve.prototype.message="",ve.prototype.status=null,ve.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ve.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Tn=0;Tn<ve.errorTypes.length;Tn++)ve[ve.errorTypes[Tn]]=Tn,ve.prototype[ve.errorTypes[Tn]]=Tn;var Cn=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,n,r){return e[n]&&(t[n]=e[n]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},xn=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=Cn(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(Cn))},En=function(e,t){return e.forEach(function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return n.addCue(e)})}),t.textTracks()},Pn={textTracksToJson:xn,jsonToTextTracks:En,trackToJson_:Cn},$n="vjs-modal-dialog",An=27,On=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=T("div",{className:$n+"-content"},{role:"document"}),r.descEl_=T("p",{className:$n+"-description vjs-control-text",id:r.el().getAttribute("aria-describedby")}),C(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}r(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return $n+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.handleKeyPress=function(e){e.which===An&&this.closeable()&&this.close()},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",jt(this,this.handleKeyPress)),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",jt(this,this.handleKeyPress)),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var r=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(n,"close",this.close)}!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),z(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t);var i=this.getChild("closeButton");i&&n.appendChild(i.el_)},n.empty=function(){this.trigger("beforemodalempty"),q(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=ot.a.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus(),this.on(ot.a,"keydown",this.handleKeyDown))},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(ot.a,"keydown",this.handleKeyDown)},n.handleKeyDown=function(e){if(9===e.which){for(var t,n=this.focusableEls_(),r=this.el_.querySelector(":focus"),i=0;i<n.length;i++)if(r===n[i]){t=i;break}ot.a.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof rt.a.HTMLAnchorElement||e instanceof rt.a.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof rt.a.HTMLInputElement||e instanceof rt.a.HTMLSelectElement||e instanceof rt.a.HTMLTextAreaElement||e instanceof rt.a.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof rt.a.HTMLIFrameElement||e instanceof rt.a.HTMLObjectElement||e instanceof rt.a.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},t}(Xt);On.prototype.options_={pauseOnOpen:!0,temporary:!0},Xt.registerComponent("ModalDialog",On);var In=function(e){function t(t){var n;void 0===t&&(t=[]),n=e.call(this)||this,n.tracks_=[],Object.defineProperty(s(s(n)),"length",{get:function(){return this.tracks_.length}});for(var r=0;r<t.length;r++)n.addTrack(t[r]);return n}r(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},n.removeTrack=function(e){for(var t,n=0,r=this.length;n<r;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack"})},n.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(Ut);In.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var Rn in In.prototype.allowedEvents_)In.prototype["on"+Rn]=null;var Ln=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},jn=function(e){function t(t){var n;void 0===t&&(t=[]);for(var r=t.length-1;r>=0;r--)if(t[r].enabled){Ln(t,t[r]);break}return n=e.call(this,t)||this,n.changing_=!1,n}return r(t,e),t.prototype.addTrack=function(t){var n=this;t.enabled&&Ln(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){n.changing_||(n.changing_=!0,Ln(n,t),n.changing_=!1,n.trigger("change"))})},t}(In),Dn=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},Nn=function(e){function t(t){var n;void 0===t&&(t=[]);for(var r=t.length-1;r>=0;r--)if(t[r].selected){Dn(t,t[r]);break}return n=e.call(this,t)||this,n.changing_=!1,Object.defineProperty(s(s(n)),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}return r(t,e),t.prototype.addTrack=function(t){var n=this;t.selected&&Dn(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",function(){n.changing_||(n.changing_=!0,Dn(n,t),n.changing_=!1,n.trigger("change"))})},t}(In),Un=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.addTrack=function(t){e.prototype.addTrack.call(this,t),t.addEventListener("modechange",jt(this,function(){this.queueTrigger("change")})),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",jt(this,function(){this.trigger("selectedlanguagechange")}))},t}(In),Mn=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}(),Fn=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,n=0,r=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<r)for(n=t;n<r;n++)i.call(this,n)},t.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}(),Bn={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},qn={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Hn={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Vn={disabled:"disabled",hidden:"hidden",showing:"showing"},zn=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var r={id:t.id||"vjs_track_"+G(),kind:t.kind||"",label:t.label||"",language:t.language||""},i=function(e){Object.defineProperty(s(s(n)),e,{get:function(){return r[e]},set:function(){}})};for(var a in r)i(a);return n}return r(t,e),t}(Ut),Wn=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=ot.a.createElement("a");n.href=e;var r,i=""===n.host&&"file:"!==n.protocol;i&&(r=ot.a.createElement("div"),r.innerHTML='<a href="'+e+'"></a>',n=r.firstChild,r.setAttribute("style","display:none; position:absolute;"),ot.a.body.appendChild(r));for(var a={},o=0;o<t.length;o++)a[t[o]]=n[t[o]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=rt.a.location.protocol),i&&ot.a.body.removeChild(r),a},Gn=function(e){if(!e.match(/^https?:\/\//)){var t=ot.a.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},Yn=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,n=t.exec(e);if(n)return n.pop().toLowerCase()}return""},Qn=function(e){var t=rt.a.location,n=Wn(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},Xn=Object.freeze({parseUrl:Wn,getAbsoluteURL:Gn,getFileExtension:Yn,isCrossOrigin:Qn}),Jn=function(e,t){var n=new rt.a.WebVTT.Parser(rt.a,rt.a.vttjs,rt.a.WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),r.length>0&&(rt.a.console&&rt.a.console.groupCollapsed&&rt.a.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach(function(e){return mt.error(e)}),rt.a.console&&rt.a.console.groupEnd&&rt.a.console.groupEnd()),n.flush()},Kn=function(e,t){var n={uri:e},r=Qn(e);r&&(n.cors=r),Ze()(n,jt(this,function(e,n,r){if(e)return mt.error(e,n);if(t.loaded_=!0,"function"!=typeof rt.a.WebVTT){if(t.tech_){var i=function(){return Jn(r,t)};t.tech_.on("vttjsloaded",i),t.tech_.on("vttjserror",function(){mt.error("vttjs failed to load, stopping trying to process "+t.src),t.tech_.off("vttjsloaded",i)})}}else Jn(r,t)}))},Zn=function(e){function t(t){var n;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var r=ue(t,{kind:Hn[t.kind]||"subtitles",language:t.language||t.srclang||""}),i=Vn[r.mode]||"disabled",a=r.default;"metadata"!==r.kind&&"chapters"!==r.kind||(i="hidden"),n=e.call(this,r)||this,n.tech_=r.tech,n.cues_=[],n.activeCues_=[];var o=new Fn(n.cues_),c=new Fn(n.activeCues_),u=!1,l=jt(s(s(n)),function(){this.activeCues=this.activeCues,u&&(this.trigger("cuechange"),u=!1)});return"disabled"!==i&&n.tech_.ready(function(){n.tech_.on("timeupdate",l)},!0),Object.defineProperties(s(s(n)),{default:{get:function(){return a},set:function(){}},mode:{get:function(){return i},set:function(e){var t=this;Vn[e]&&(i=e,"disabled"!==i?this.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return c;for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];i.startTime<=e&&i.endTime>=e?t.push(i):i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e&&t.push(i)}if(u=!1,t.length!==this.activeCues_.length)u=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(u=!0);return this.activeCues_=t,c.setCues_(this.activeCues_),c},set:function(){}}}),r.src?(n.src=r.src,Kn(r.src,s(s(n)))):n.loaded_=!0,n}r(t,e);var n=t.prototype;return n.addCue=function(e){var t=e;if(rt.a.vttjs&&!(e instanceof rt.a.vttjs.VTTCue)){t=new rt.a.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(var n in e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var r=this.tech_.textTracks(),i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(zn);Zn.prototype.allowedEvents_={cuechange:"cuechange"};var er=function(e){function t(t){var n;void 0===t&&(t={});var r=ue(t,{kind:qn[t.kind]||""});n=e.call(this,r)||this;var i=!1;return Object.defineProperty(s(s(n)),"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),r.enabled&&(n.enabled=r.enabled),n.loaded_=!0,n}return r(t,e),t}(zn),tr=function(e){function t(t){var n;void 0===t&&(t={});var r=ue(t,{kind:Bn[t.kind]||""});n=e.call(this,r)||this;var i=!1;return Object.defineProperty(s(s(n)),"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),r.selected&&(n.selected=r.selected),n}return r(t,e),t}(zn),nr=0,rr=2,ir=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var r,i=new Zn(t);return n.kind=i.kind,n.src=i.src,n.srclang=i.language,n.label=i.label,n.default=i.default,Object.defineProperties(s(s(n)),{readyState:{get:function(){return r}},track:{get:function(){return i}}}),r=nr,i.addEventListener("loadeddata",function(){r=rr,n.trigger({type:"load",target:s(s(n))})}),n}return r(t,e),t}(Ut);ir.prototype.allowedEvents_={load:"load"},ir.NONE=nr,ir.LOADING=1,ir.LOADED=rr,ir.ERROR=3;var ar={audio:{ListClass:jn,TrackClass:er,capitalName:"Audio"},video:{ListClass:Nn,TrackClass:tr,capitalName:"Video"},text:{ListClass:Un,TrackClass:Zn,capitalName:"Text"}};Object.keys(ar).forEach(function(e){ar[e].getterName=e+"Tracks",ar[e].privateName=e+"Tracks_"});var or={remoteText:{ListClass:Un,TrackClass:Zn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Mn,TrackClass:ir,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},sr=ue(ar,or);or.names=Object.keys(or),ar.names=Object.keys(ar),sr.names=[].concat(or.names).concat(ar.names);var cr=function(e){function t(t,n){var r;return void 0===t&&(t={}),void 0===n&&(n=function(){}),t.reportTouchActivity=!1,r=e.call(this,null,t,n)||this,r.hasStarted_=!1,r.on("playing",function(){this.hasStarted_=!0}),r.on("loadstart",function(){this.hasStarted_=!1}),sr.names.forEach(function(e){var n=sr[e];t&&t[n.getterName]&&(r[n.privateName]=t[n.getterName])}),r.featuresProgressEvents||r.manualProgressOn(),r.featuresTimeupdateEvents||r.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(r["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?r.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(r.featuresNativeTextTracks=!0),r.featuresNativeTextTracks||r.emulateTextTracks(),r.autoRemoteTextTracks_=new sr.text.ListClass,r.initTrackListeners(),t.nativeControlsForTouch||r.emitTapEvents(),r.constructor&&(r.name_=r.constructor.name||"Unknown Tech"),r}r(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(jt(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return he(0,0)},n.bufferedPercent=function(){return pe(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(ar.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;e=[].concat(e),e.forEach(function(e){for(var n=t[e+"Tracks"]()||[],r=n.length;r--;){var i=n[r];"text"===e&&t.removeRemoteTextTrack(i),n.removeTrack(i)}})},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.error=function(e){return void 0!==e&&(this.error_=new ve(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?he(0,0):he()},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;ar.names.forEach(function(t){var n=ar[t],r=function(){e.trigger(t+"trackchange")},i=e[n.getterName]();i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),e.on("dispose",function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)})})},n.addWebVttScript_=function(){var e=this;if(!rt.a.WebVTT)if(ot.a.body.contains(this.el())){if(!this.options_["vtt.js"]&&p(Qe.a)&&Object.keys(Qe.a).length>0)return void this.trigger("vttjsloaded");var t=ot.a.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),rt.a.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var e=this,t=this.textTracks(),n=this.remoteTextTracks(),r=function(e){return t.addTrack(e.track)},i=function(e){return t.removeTrack(e.track)};n.on("addtrack",r),n.on("removetrack",i),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},o=function(){a();for(var e=0;e<t.length;e++){var n=t[e];n.removeEventListener("cuechange",a),"showing"===n.mode&&n.addEventListener("cuechange",a)}};o(),t.addEventListener("change",o),t.addEventListener("addtrack",o),t.addEventListener("removetrack",o),this.on("dispose",function(){n.off("addtrack",r),n.off("removetrack",i),t.removeEventListener("change",o),t.removeEventListener("addtrack",o),t.removeEventListener("removetrack",o);for(var e=0;e<t.length;e++){t[e].removeEventListener("cuechange",a)}})},n.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return ye(this,e,t,n)},n.createRemoteTextTrack=function(e){var t=ue(e,{tech:this});return new or.remoteTextEl.TrackClass(t)},n.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var r=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(mt.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!0!==t&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(r.track)}),r},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=se(e),t.techs_[e]=n,"Tech"!==e&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e)return e=se(e),t.techs_&&t.techs_[e]?t.techs_[e]:rt.a&&rt.a.videojs&&rt.a.videojs[e]?(mt.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),rt.a.videojs[e]):void 0},t}(Xt);sr.names.forEach(function(e){var t=sr[e];cr.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),cr.prototype.featuresVolumeControl=!0,cr.prototype.featuresMuteControl=!0,cr.prototype.featuresFullscreenResize=!1,cr.prototype.featuresPlaybackRate=!1,cr.prototype.featuresProgressEvents=!1,cr.prototype.featuresSourceset=!1,cr.prototype.featuresTimeupdateEvents=!1,cr.prototype.featuresNativeTextTracks=!1,cr.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){for(var n,r=e.sourceHandlers||[],i=0;i<r.length;i++)if(n=r[i].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var r=e.sourceHandlers||[],i=0;i<r.length;i++)if(r[i].canHandleSource(t,n))return r[i];return null},e.canPlaySource=function(t,n){var r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:mt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Xt.registerComponent("Tech",cr),cr.registerTech("Tech",cr),cr.defaultTechOrder_=[];var ur={},lr={},dr={},fr={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},hr={setCurrentTime:1},pr={play:1,pause:1},vr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},gr=function(e){void 0===e&&(e="");var t=Yn(e);return vr[t.toLowerCase()]||""},mr=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(e){return e.src===t});if(n.length)return n[0].type;for(var r=e.$$("source"),i=0;i<r.length;i++){var a=r[i];if(a.type&&a.src&&a.src===t)return a.type}return gr(t)},yr=function e(t){if(Array.isArray(t)){var n=[];t.forEach(function(t){t=e(t),Array.isArray(t)?n=n.concat(t):h(t)&&n.push(t)}),t=n}else t="string"==typeof t&&t.trim()?[Ae({src:t})]:h(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[Ae(t)]:[];return t},br=function(e){function t(t,n,r){var i,a=ue({createEl:!1},n);if(i=e.call(this,t,a,r)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var o=0,s=n.playerOptions.techOrder;o<s.length;o++){var c=se(s[o]),u=cr.getTech(c);if(c||(u=Xt.getComponent(c)),u&&u.isSupported()){t.loadTech_(c);break}}return i}return r(t,e),t}(Xt);Xt.registerComponent("MediaLoader",br);var _r=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.emitTapEvents(),r.enable(),r}r(t,e);var n=t.prototype;return n.createEl=function(t,n,r){void 0===t&&(t="div"),void 0===n&&(n={}),void 0===r&&(r={}),n=f({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},n),"button"===t&&mt.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),r=f({role:"button"},r),this.tabIndex_=n.tabIndex;var i=e.prototype.createEl.call(this,t,n,r);return this.createControlTextEl(i),i},n.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=T("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,C(this.controlTextEl_,n),this.nonIconControl||t.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},n.handleClick=function(e){},n.handleFocus=function(e){ee(ot.a,"keydown",jt(this,this.handleKeyPress))},n.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.trigger("click")):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},n.handleBlur=function(e){te(ot.a,"keydown",jt(this,this.handleKeyPress))},t}(Xt);Xt.registerComponent("ClickableComponent",_r);var wr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.update(),t.on("posterchange",jt(s(s(r)),r.update)),r}r(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},n.createEl=function(){return T("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?me(this.player_.play()):this.player_.pause())},t}(_r);Xt.registerComponent("PosterImage",wr);var Sr="#222",kr="#ccc",Tr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Cr=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var a=jt(s(s(i)),i.updateDisplay);return t.on("loadstart",jt(s(s(i)),i.toggleDisplay)),t.on("texttrackchange",a),t.on("loadedmetadata",jt(s(s(i)),i.preselectTrack)),t.ready(jt(s(s(i)),function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)return void this.hide();t.on("fullscreenchange",a),t.on("playerresize",a),rt.a.addEventListener("orientationchange",a),t.on("dispose",function(){return rt.a.removeEventListener("orientationchange",a)});for(var e=this.options_.playerOptions.tracks||[],n=0;n<e.length;n++)this.player_.addRemoteTextTrack(e[n],!0);this.preselectTrack()})),i}r(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,r={captions:1,subtitles:1},i=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o=0;o<i.length;o++){var s=i[o];a&&a.enabled&&a.language&&a.language===s.language&&s.kind in r?s.kind===a.kind?n=s:n||(n=s):a&&!a.enabled?(n=null,e=null,t=null):s.default&&("descriptions"!==s.kind||e?s.kind in r&&!t&&(t=s):e=s)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof rt.a.WebVTT&&rt.a.WebVTT.processCues(rt.a,[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var t=null,n=null,r=e.length;r--;){var i=e[r];"showing"===i.mode&&("descriptions"===i.kind?t=i:n=i)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))},n.updateForTrack=function(e){if("function"==typeof rt.a.WebVTT&&e.activeCues){for(var t=[],n=0;n<e.activeCues.length;n++)t.push(e.activeCues[n]);if(rt.a.WebVTT.processCues(rt.a,t,this.el_),this.player_.textTrackSettings)for(var r=this.player_.textTrackSettings.getValues(),i=t.length;i--;){var a=t[i];if(a){var o=a.displayState;if(r.color&&(o.firstChild.style.color=r.color),r.textOpacity&&Ie(o.firstChild,"color",Oe(r.color||"#fff",r.textOpacity)),r.backgroundColor&&(o.firstChild.style.backgroundColor=r.backgroundColor),r.backgroundOpacity&&Ie(o.firstChild,"backgroundColor",Oe(r.backgroundColor||"#000",r.backgroundOpacity)),r.windowColor&&(r.windowOpacity?Ie(o,"backgroundColor",Oe(r.windowColor,r.windowOpacity)):o.style.backgroundColor=r.windowColor),r.edgeStyle&&("dropshadow"===r.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px "+Sr+", 2px 2px 4px "+Sr+", 2px 2px 5px "+Sr:"raised"===r.edgeStyle?o.firstChild.style.textShadow="1px 1px "+Sr+", 2px 2px "+Sr+", 3px 3px "+Sr:"depressed"===r.edgeStyle?o.firstChild.style.textShadow="1px 1px "+kr+", 0 1px "+kr+", -1px -1px "+Sr+", 0 -1px "+Sr:"uniform"===r.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px "+Sr+", 0 0 4px "+Sr+", 0 0 4px "+Sr+", 0 0 4px "+Sr)),r.fontPercent&&1!==r.fontPercent){var s=rt.a.parseFloat(o.style.fontSize);o.style.fontSize=s*r.fontPercent+"px",o.style.height="auto",o.style.top="auto",o.style.bottom="2px"}r.fontFamily&&"default"!==r.fontFamily&&("small-caps"===r.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=Tr[r.fontFamily])}}}},t}(Xt);Xt.registerComponent("TextTrackDisplay",Cr);var xr=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),r=T("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[n])}),i=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(r),i},t}(Xt);Xt.registerComponent("LoadingSpinner",xr);var Er=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={}),e="button",t=f({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),n=f({type:"button"},n);var r=Xt.prototype.createEl.call(this,e,t,n);return this.createControlTextEl(r),r},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return mt.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),Xt.prototype.addChild.call(this,e,t)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(_r);Xt.registerComponent("Button",Er);var Pr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.mouseused_=!1,r.on("mousedown",r.handleMouseDown),r}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return void me(t);var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(!r)return void this.player_.focus();var i=function(){return r.focus()};ge(t)?t.then(i,function(){}):this.setTimeout(i,1)},n.handleKeyPress=function(t){this.mouseused_=!1,e.prototype.handleKeyPress.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(Er);Pr.prototype.controlText_="Play Video",Xt.registerComponent("BigPlayButton",Pr);var $r=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.controlText(n&&n.controlText||r.localize("Close")),r}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t}(Er);Xt.registerComponent("CloseButton",$r);var Ar=function(e){function t(t,n){var r;return void 0===n&&(n={}),r=e.call(this,t,n)||this,n.replay=void 0===n.replay||n.replay,r.on(t,"play",r.handlePlay),r.on(t,"pause",r.handlePause),n.replay&&r.on(t,"ended",r.handleEnded),r}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(Er);Ar.prototype.controlText_="Play",Xt.registerComponent("PlayToggle",Ar);var Or=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=r=n="-"),i=i>0||o>0?i+":":"",r=((i||a>=10)&&r<10?"0"+r:r)+":",n=n<10?"0"+n:n,i+r+n},Ir=Or,Rr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.throttledUpdateContent=Dt(jt(s(s(r)),r.updateContent),25),r.on(t,"timeupdate",r.throttledUpdateContent),r}r(t,e);var n=t.prototype;return n.createEl=function(t){var n=this.buildCSSClass(),r=e.prototype.createEl.call(this,"div",{className:n+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=T("span",{className:n+"-display"},{"aria-live":"off",role:"presentation"}),this.updateTextNode_(),r.appendChild(this.contentEl_),r},n.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},n.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=ot.a.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},n.formatTime_=function(e){return je(e)},n.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},n.updateContent=function(e){},t}(Xt);Rr.prototype.labelText_="Time",Rr.prototype.controlText_="Time",Xt.registerComponent("TimeDisplay",Rr);var Lr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.on(t,"ended",r.handleEnded),r}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},n.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},t}(Rr);Lr.prototype.labelText_="Current Time",Lr.prototype.controlText_="Current Time",Xt.registerComponent("CurrentTimeDisplay",Lr);var jr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.on(t,"durationchange",r.updateContent),r.on(t,"loadstart",r.updateContent),r.on(t,"loadedmetadata",r.throttledUpdateContent),r}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},t}(Rr);jr.prototype.labelText_="Duration",jr.prototype.controlText_="Duration",Xt.registerComponent("DurationDisplay",jr);var Dr=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(Xt);Xt.registerComponent("TimeDivider",Dr);var Nr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.on(t,"durationchange",r.throttledUpdateContent),r.on(t,"ended",r.handleEnded),r}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.formatTime_=function(t){return"-"+e.prototype.formatTime_.call(this,t)},n.updateContent=function(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},n.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},t}(Rr);Nr.prototype.labelText_="Remaining Time",Nr.prototype.controlText_="Remaining Time",Xt.registerComponent("RemainingTimeDisplay",Nr);var Ur=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.updateShowing(),r.on(r.player(),"durationchange",r.updateShowing),r}r(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=T("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Xt);Xt.registerComponent("LiveDisplay",Ur);var Mr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.updateLiveEdgeStatus(),r.player_.liveTracker&&r.on(r.player_.liveTracker,"liveedgechange",r.updateLiveEdgeStatus),r}r(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=T("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},n.updateLiveEdgeStatus=function(e){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,e.prototype.dispose.call(this)},t}(Er);Mr.prototype.controlText_="Seek to live, currently playing live",Xt.registerComponent("SeekToLive",Mr);var Fr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.bar=r.getChild(r.options_.barName),r.vertical(!!r.options_.vertical),r.enable(),r}r(t,e);var n=t.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(t,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),n.className=n.className+" vjs-slider",n=f({tabIndex:0},n),r=f({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,n,r)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||fn||e.preventDefault(),D(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;N(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},n.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!==e||e<0||e===1/0)&&(e=0);var n=(100*e).toFixed(2)+"%",r=t.el().style;return this.vertical()?r.height=n:r.width=n,e}}},n.calculateDistance=function(e){var t=F(this.el_,e);return this.vertical()?t.y:t.x},n.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},n.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},n.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},n.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},n.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Xt);Xt.registerComponent("Slider",Fr);var Br=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.partEls_=[],r.on(t,"progress",r.update),r}r(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})},n.dispose=function(){this.partEls_=null,e.prototype.dispose.call(this)},n.update=function(e){var t=this.player_.liveTracker,n=this.player_.buffered(),r=t&&t.isLive()?t.seekableEnd():this.player_.duration(),i=this.player_.bufferedEnd(),a=this.partEls_,o=this.$(".vjs-control-text-loaded-percentage"),s=function(e,t,n){var r=e/t||0;return r=100*(r>=1?1:r),n&&(r=r.toFixed(2)),r+"%"};this.el_.style.width=s(i,r),C(o,s(i,r,!0));for(var c=0;c<n.length;c++){var u=n.start(c),l=n.end(c),d=a[c];d||(d=this.el_.appendChild(T()),a[c]=d),d.style.left=s(u,i),d.style.width=s(l-u,i)}for(var f=a.length;f>n.length;f--)this.el_.removeChild(a[f-1]);a.length=n.length},t}(Xt);Xt.registerComponent("LoadProgressBar",Br);var qr=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var r=U(this.el_),i=U(this.player_.el()),a=e.width*t;if(i&&r){var o=e.left-i.left+a,s=e.width-a+(i.right-e.right),c=r.width/2;o<c?c+=c-o:s<c&&(c=s),c<0?c=0:c>r.width&&(c=r.width),this.el_.style.right="-"+c+"px",C(this.el_,n)}},n.updateTime=function(e,t,n,r){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var a,o=i.player_.duration();if(i.player_.liveTracker&&i.player_.liveTracker.isLive()){var s=i.player_.liveTracker.liveWindow(),c=s-t*s;a=(c<1?"":"-")+je(c,s)}else a=je(n,o);i.update(e,t,a),r&&r()})},t}(Xt);Xt.registerComponent("TimeTooltip",qr);var Hr=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n=this.getChild("timeTooltip");if(n){var r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,r)}},t}(Xt);Hr.prototype.options_={children:[]},an||sn||Hr.prototype.options_.children.push("timeTooltip"),Xt.registerComponent("PlayProgressBar",Hr);var Vr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.update=Dt(jt(s(s(r)),r.update),25),r}r(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var n=this,r=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,r,function(){n.el_.style.left=e.width*t+"px"})},t}(Xt);Vr.prototype.options_={children:["timeTooltip"]},Xt.registerComponent("MouseTimeDisplay",Vr);var zr=5,Wr=30,Gr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.setEventHandlers_(),r}r(t,e);var n=t.prototype;return n.setEventHandlers_=function(){var e=this;this.update=Dt(jt(this,this.update),Wr),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.on(this.player_,"durationchange",this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval(function(){e.requestAnimationFrame(function(){e.update()})},Wr)}),this.on(this.player_,["ended","pause","waiting"],function(t){e.player_.liveTracker&&e.player_.liveTracker.isLive()&&"ended"!==t.type||e.clearInterval(e.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update_=function(e,t){var n=this.player_.liveTracker,r=this.player_.duration();n&&n.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),n&&n.seekableEnd()===1/0?this.disable():this.enable(),this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[je(e,r),je(r,r)],"{1} of {2}")),this.bar.update(U(this.el_),t)},n.update=function(t){var n=e.prototype.update.call(this);return this.update_(this.getCurrentTime_(),n),n},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.handleEnded=function(e){this.update_(this.player_.duration(),1)},n.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e>=1?1:e||0},n.handleMouseDown=function(t){W(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},n.handleMouseMove=function(e){if(W(e)){var t,n=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){var i=r.seekableStart(),a=r.liveCurrentTime();if(t=i+n*r.liveWindow(),t>=a&&(t=a),t<=i&&(t=i+.1),t===1/0)return}else(t=n*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},n.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},n.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},n.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&me(this.player_.play())},n.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+zr)},n.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-zr)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleAction(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t}(Fr);Gr.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},an||sn||Gr.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Gr.prototype.playerEvent="timeupdate",Xt.registerComponent("SeekBar",Gr);var Yr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.handleMouseMove=Dt(jt(s(s(r)),r.handleMouseMove),25),r.throttledHandleMouseSeek=Dt(jt(s(s(r)),r.handleMouseSeek),25),r.enable(),r}r(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("mouseTimeDisplay"),r=t.el(),i=U(r),a=F(r,e).x;a>1?a=1:a<0&&(a=0),n&&n.update(i,a)}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},n.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(Xt);Yr.prototype.options_={children:["seekBar"]},Xt.registerComponent("ProgressControl",Yr);var Qr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.on(t,"fullscreenchange",r.handleFullscreenChange),!1===ot.a[bn.fullscreenEnabled]&&r.disable(),r}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(Er);Qr.prototype.controlText_="Fullscreen",Xt.registerComponent("FullscreenToggle",Qr);var Xr=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},Jr=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Xt);Xt.registerComponent("VolumeLevel",Jr);var Kr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.on("slideractive",r.updateLastVolume_),r.on(t,"volumechange",r.updateARIAAttributes),t.ready(function(){return r.updateARIAAttributes()}),r}r(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){W(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){W(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},t}(Fr);Kr.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Kr.prototype.playerEvent="volumechange",Xt.registerComponent("VolumeBar",Kr);var Zr=function(e){function t(t,n){var r;return void 0===n&&(n={}),n.vertical=n.vertical||!1,(void 0===n.volumeBar||p(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),r=e.call(this,t,n)||this,Xr(s(s(r)),t),r.throttledHandleMouseMove=Dt(jt(s(s(r)),r.handleMouseMove),25),r.on("mousedown",r.handleMouseDown),r.on("touchstart",r.handleMouseDown),r.on(r.volumeBar,["focus","slideractive"],function(){r.volumeBar.addClass("vjs-slider-active"),r.addClass("vjs-slider-active"),r.trigger("slideractive")}),r.on(r.volumeBar,["blur","sliderinactive"],function(){r.volumeBar.removeClass("vjs-slider-active"),r.removeClass("vjs-slider-active"),r.trigger("sliderinactive")}),r}r(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Xt);Zr.prototype.options_={children:["volumeBar"]},Xt.registerComponent("VolumeControl",Zr);var ei=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},ti=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,ei(s(s(r)),t),r.on(t,["loadstart","volumechange"],r.update),r}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var r=n<.1?.1:n;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;an&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)$(this.el_,"vjs-vol-"+n);P(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume(),t=e?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},t}(Er);ti.prototype.controlText_="Mute",Xt.registerComponent("MuteToggle",ti);var ni=function(e){function t(t,n){var r;return void 0===n&&(n={}),void 0!==n.inline?n.inline=n.inline:n.inline=!0,(void 0===n.volumeControl||p(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),r=e.call(this,t,n)||this,r.on(t,["loadstart"],r.volumePanelState_),r.on(r.volumeControl,["slideractive"],r.sliderActive_),r.on(r.volumeControl,["sliderinactive"],r.sliderInactive_),r}r(t,e);var n=t.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},t}(Xt);ni.prototype.options_={children:["muteToggle","volumeControl"]},Xt.registerComponent("VolumePanel",ni);var ri=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,n&&(r.menuButton_=n.menuButton),r.focusedChild_=-1,r.on("keydown",r.handleKeyPress),r}r(t,e);var n=t.prototype;return n.addItem=function(e){this.addChild(e),e.on("blur",jt(this,this.handleBlur)),e.on(["tap","click"],jt(this,function(t){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())}))},n.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=T(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),ee(n,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),n},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.handleBlur=function(e){var t=e.relatedTarget||ot.a.activeElement;if(!this.children().some(function(e){return e.el()===t})){var n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}},n.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(Xt);Xt.registerComponent("Menu",ri);var ii=function(e){function t(t,n){var r;void 0===n&&(n={}),r=e.call(this,t,n)||this,r.menuButton_=new Er(t,n),r.menuButton_.controlText(r.controlText_),r.menuButton_.el_.setAttribute("aria-haspopup","true");var i=Er.prototype.buildCSSClass();return r.menuButton_.el_.className=r.buildCSSClass()+" "+i,r.menuButton_.removeClass("vjs-control"),r.addChild(r.menuButton_),r.update(),r.enabled_=!0,r.on(r.menuButton_,"tap",r.handleClick),r.on(r.menuButton_,"click",r.handleClick),r.on(r.menuButton_,"focus",r.handleFocus),r.on(r.menuButton_,"blur",r.handleBlur),r.on(r.menuButton_,"mouseenter",function(){r.menu.show()}),r.on("keydown",r.handleSubmenuKeyPress),r}r(t,e);var n=t.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},n.createMenu=function(){var e=new ri(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=T("li",{className:"vjs-menu-title",innerHTML:se(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),x(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},n.createItems=function(){},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+Er.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleFocus=function(){ee(ot.a,"keydown",jt(this,this.handleKeyPress))},n.handleBlur=function(){te(ot.a,"keydown",jt(this,this.handleKeyPress))},n.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):13!==e.which&&38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},n.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),an&&S())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(Xt);Xt.registerComponent("MenuButton",ii);var ai=function(e){function t(t,n){var r,i=n.tracks;if(r=e.call(this,t,n)||this,r.items.length<=1&&r.hide(),!i)return s(r);var a=jt(s(s(r)),r.update);return i.addEventListener("removetrack",a),i.addEventListener("addtrack",a),r.player_.on("ready",a),r.player_.on("dispose",function(){i.removeEventListener("removetrack",a),i.removeEventListener("addtrack",a)}),r}return r(t,e),t}(ii);Xt.registerComponent("TrackButton",ai);var oi=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.selectable=n.selectable,r.isSelected_=n.selected||!1,r.multiSelectable=n.multiSelectable,r.selected(r.isSelected_),r.selectable?r.multiSelectable?r.el_.setAttribute("role","menuitemcheckbox"):r.el_.setAttribute("role","menuitemradio"):r.el_.setAttribute("role","menuitem"),r}r(t,e);var n=t.prototype;return n.createEl=function(t,n,r){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",f({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},n),r)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(_r);Xt.registerComponent("MenuItem",oi);var si=function(e){function t(t,n){var r,i=n.track,a=t.textTracks();n.label=i.label||i.language||"Unknown",n.selected="showing"===i.mode,r=e.call(this,t,n)||this,r.track=i;var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply(s(s(r)),t)},c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleSelectedLanguageChange.apply(s(s(r)),t)};if(t.on(["loadstart","texttrackchange"],o),a.addEventListener("change",o),a.addEventListener("selectedlanguagechange",c),r.on("dispose",function(){t.off(["loadstart","texttrackchange"],o),a.removeEventListener("change",o),a.removeEventListener("selectedlanguagechange",c)}),void 0===a.onchange){var u;r.on(["tap","click"],function(){if("object"!=typeof rt.a.Event)try{u=new rt.a.Event("change")}catch(e){}u||(u=ot.a.createEvent("Event"),u.initEvent("change",!0,!0)),a.dispatchEvent(u)})}return r.handleTracksChange(),r}r(t,e);var n=t.prototype;return n.handleClick=function(t){var n=this.track.kind,r=this.track.kinds,i=this.player_.textTracks();if(r||(r=[n]),e.prototype.handleClick.call(this,t),i)for(var a=0;a<i.length;a++){var o=i[a];o===this.track&&r.indexOf(o.kind)>-1?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled")}},n.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},n.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(oi);Xt.registerComponent("TextTrackMenuItem",si);var ci=function(e){function t(t,n){return n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}r(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var a=t[r];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var a=t[r];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(si);Xt.registerComponent("OffTextTrackMenuItem",ci);var ui=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.textTracks(),e.call(this,t,n)||this}return r(t,e),t.prototype.createItems=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=si);var n;this.label_&&(n=this.label_+" off"),e.push(new ci(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var i=0;i<r.length;i++){var a=r[i];if(this.kinds_.indexOf(a.kind)>-1){var o=new t(this.player_,{track:a,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+a.kind+"-menu-item"),e.push(o)}}return e},t}(ai);Xt.registerComponent("TextTrackButton",ui);var li=function(e){function t(t,n){var r,i=n.track,a=n.cue,o=t.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=o&&o<a.endTime,r=e.call(this,t,n)||this,r.track=i,r.cue=a,i.addEventListener("cuechange",jt(s(s(r)),r.update)),r}r(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},n.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},t}(oi);Xt.registerComponent("ChaptersTrackMenuItem",li);var di=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(se(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,r=t.length;n<r;n++){var i=t[n],a=new li(this.player_,{track:this.track_,cue:i});e.push(a)}return e},t}(ui);di.prototype.kind_="chapters",di.prototype.controlText_="Chapters",Xt.registerComponent("ChaptersButton",di);var fi=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var a=t.textTracks(),o=jt(s(s(i)),i.handleTracksChange);return a.addEventListener("change",o),i.on("dispose",function(){a.removeEventListener("change",o)}),i}r(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,r=0,i=t.length;r<i;r++){var a=t[r];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(ui);fi.prototype.kind_="descriptions",fi.prototype.controlText_="Descriptions",Xt.registerComponent("DescriptionsButton",fi);var hi=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(ui);hi.prototype.kind_="subtitles",hi.prototype.controlText_="Subtitles",Xt.registerComponent("SubtitlesButton",hi);var pi=function(e){function t(t,n){var r;return n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",r=e.call(this,t,n)||this,r.addClass("vjs-texttrack-settings"),r.controlText(", opens "+n.kind+" settings dialog"),r}return r(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(si);Xt.registerComponent("CaptionSettingsMenuItem",pi);var vi=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new pi(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(ui);vi.prototype.kind_="captions",vi.prototype.controlText_="Captions",Xt.registerComponent("CaptionsButton",vi);var gi=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.createEl=function(t,n,r){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),i+="</span>",e.prototype.createEl.call(this,t,f({innerHTML:i},n),r)},t}(si);Xt.registerComponent("SubsCapsMenuItem",gi);var mi=function(e){function t(t,n){var r;return void 0===n&&(n={}),r=e.call(this,t,n)||this,r.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(r.player_.language_)>-1&&(r.label_="captions"),r.menuButton_.controlText(se(r.label_)),r}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new pi(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,gi)},t}(ui);mi.prototype.kinds_=["captions","subtitles"],mi.prototype.controlText_="Subtitles",Xt.registerComponent("SubsCapsButton",mi);var yi=function(e){function t(t,n){var r,i=n.track,a=t.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i.enabled,r=e.call(this,t,n)||this,r.track=i,r.addClass("vjs-"+i.kind+"-menu-item");var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply(s(s(r)),t)};return a.addEventListener("change",o),r.on("dispose",function(){a.removeEventListener("change",o)}),r}r(t,e);var n=t.prototype;return n.createEl=function(t,n,r){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),i+="</span>",e.prototype.createEl.call(this,t,f({innerHTML:i},n),r)},n.handleClick=function(t){var n=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var r=0;r<n.length;r++){var i=n[r];i.enabled=i===this.track}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(oi);Xt.registerComponent("AudioTrackMenuItem",yi);var bi=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.audioTracks(),e.call(this,t,n)||this}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var r=t[n];e.push(new yi(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e},t}(ai);bi.prototype.controlText_="Audio Track",Xt.registerComponent("AudioTrackButton",bi);var _i=function(e){function t(t,n){var r,i=n.rate,a=parseFloat(i,10);return n.label=i,n.selected=1===a,n.selectable=!0,n.multiSelectable=!1,r=e.call(this,t,n)||this,r.label=i,r.rate=a,r.on(t,"ratechange",r.update),r}r(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(oi);_i.prototype.contentElType="button",Xt.registerComponent("PlaybackRateMenuItem",_i);var wi=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.updateVisibility(),r.updateLabel(),r.on(t,"loadstart",r.updateVisibility),r.on(t,"ratechange",r.updateLabel),r}r(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=T("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createMenu=function(){var e=new ri(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;n>=0;n--)e.addChild(new _i(this.player(),{rate:t[n]+"x"}));return e},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),r=n[0],i=0;i<n.length;i++)if(n[i]>t){r=n[i];break}this.player().playbackRate(r)},n.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(ii);wi.prototype.controlText_="Playback Rate",Xt.registerComponent("PlaybackRateMenuButton",wi);var Si=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Xt);Xt.registerComponent("Spacer",Si);var ki=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(Si);Xt.registerComponent("CustomControlSpacer",ki);var Ti=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Xt);Ti.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},Xt.registerComponent("ControlBar",Ti);var Ci=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.on(t,"error",r.open),r}r(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(On);Ci.prototype.options_=ue(On.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Xt.registerComponent("ErrorDisplay",Ci);var xi="vjs-text-track-settings",Ei=["#000","Black"],Pi=["#00F","Blue"],$i=["#0FF","Cyan"],Ai=["#0F0","Green"],Oi=["#F0F","Magenta"],Ii=["#F00","Red"],Ri=["#FFF","White"],Li=["#FF0","Yellow"],ji=["1","Opaque"],Di=["0.5","Semi-Transparent"],Ni=["0","Transparent"],Ui={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ei,Ri,Ii,Ai,Pi,Li,Oi,$i]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ji,Di,Ni]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Ri,Ei,Ii,Ai,Pi,Li,Oi,$i]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[ji,Di]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Ni,Di,ji]}};Ui.windowColor.options=Ui.backgroundColor.options;var Mi=function(e){function t(t,n){var r;return n.temporary=!1,r=e.call(this,t,n)||this,r.updateDisplay=jt(s(s(r)),r.updateDisplay),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=T("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===n.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",function(){r.saveSettings(),r.close()}),r.on(r.$(".vjs-default-button"),"click",function(){r.setDefaults(),r.updateDisplay()}),l(Ui,function(e){r.on(r.$(e.selector),"change",r.updateDisplay)}),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}r(t,e);var n=t.prototype;return n.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},n.createElSelect_=function(e,t,n){var r=this;void 0===t&&(t=""),void 0===n&&(n="label");var i=Ui[e],a=i.id.replace("%s",this.id_),o=[t,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(i.label),"</"+n+">",'<select aria-labelledby="'+o+'">'].concat(i.options.map(function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',r.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return T("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return T("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return T("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e=this;return d(Ui,function(t,n,r){var i=Ne(e.$(n.selector),n.parser);return void 0!==i&&(t[r]=i),t},{})},n.setValues=function(e){var t=this;l(Ui,function(n,r){Ue(t.$(n.selector),e[r],n.parser)})},n.setDefaults=function(){var e=this;l(Ui,function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n})},n.restoreSettings=function(){var e;try{e=JSON.parse(rt.a.localStorage.getItem(xi))}catch(e){mt.warn(e)}e&&this.setValues(e)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?rt.a.localStorage.setItem(xi,JSON.stringify(e)):rt.a.localStorage.removeItem(xi)}catch(e){mt.warn(e)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(ot.a,"keydown",this.handleKeyDown);var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},t}(On);Xt.registerComponent("TextTrackSettings",Mi);var Fi=function(e){function t(t,n){var r,i=n.ResizeObserver||rt.a.ResizeObserver;null===n.ResizeObserver&&(i=!1);var a=ue({createEl:!i,reportTouchActivity:!1},n);return r=e.call(this,t,a)||this,r.ResizeObserver=n.ResizeObserver||rt.a.ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=Nt(function(){r.resizeHandler()},100,!1,s(s(r))),i?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(t.el())):(r.loadListener_=function(){r.el_&&r.el_.contentWindow&&ee(r.el_.contentWindow,"resize",r.debouncedHandler_)},r.one("load",r.loadListener_)),r}r(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&te(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},t}(Xt);Xt.registerComponent("ResizeManager",Fi);var Bi=function(e){function t(t,n){var r,i=ue({createEl:!1},n);return r=e.call(this,t,i)||this,r.reset_(),r.on(r.player_,"durationchange",r.handleDurationchange),r}r(t,e);var n=t.prototype;return n.isBehind_=function(){if(!this.timeupdateSeen_)return!1;var e=this.liveCurrentTime(),t=this.player_.currentTime(),n=this.seekableIncrement_,r=2*n+.07;return e!==1/0&&e-r>=t},n.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var e=this.player_.seekable();if(e&&e.length){var t=this.seekableEnd();t!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrement_=Math.abs(t-this.lastSeekEnd_)),this.pastSeekEnd_=0,this.lastSeekEnd_=t,this.trigger("seekableendchange")),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.player_.duration()===1/0?this.startTracking():this.stopTracking()},n.startTracking=function(){var e=this;this.isTracking()||(this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.one(this.player_,"play",this.handlePlay),this.timeupdateSeen_||(this.handleTimeupdate=function(){e.timeupdateSeen_=!0,e.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},n.reset_=function(){this.pastSeekEnd_=0,this.lastSeekEnd_=null,this.behindLiveEdge_=null,this.timeupdateSeen_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.seekableIncrement_=12,this.off(this.player_,"play",this.trackLive_),this.off(this.player_,"pause",this.trackLive_),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.seekToLiveEdge),this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)},n.stopTracking=function(){this.isTracking()&&this.reset_()},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?1/0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){return this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"==typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},n.dispose=function(){this.stopTracking(),e.prototype.dispose.call(this)},t}(Xt);Xt.registerComponent("LiveTracker",Bi);var qi=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),r=[],i="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var o=n[a].src;o&&-1===r.indexOf(o)&&r.push(o)}return!!r.length&&(1===r.length&&(i=r[0]),e.triggerSourceset(i),!0)},Hi=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=ot.a.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=ot.a.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",rt.a.Element.prototype.appendChild.call(this,n),this.innerHTML}}),Vi=function(e,t){for(var n={},r=0;r<e.length&&!((n=Object.getOwnPropertyDescriptor(e[r],t))&&n.set&&n.get);r++);return n.enumerable=!0,n.configurable=!0,n},zi=function(e){return Vi([e.el(),rt.a.HTMLMediaElement.prototype,rt.a.Element.prototype,Hi],"innerHTML")},Wi=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},r=zi(e),i=function(n){return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=n.apply(t,i);return qi(e),o}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){t[e]&&(n[e]=t[e],t[e]=i(n[e]))}),Object.defineProperty(t,"innerHTML",ue(r,{set:i(r.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach(function(e){t[e]=n[e]}),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)}},Gi=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Gn(rt.a.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return rt.a.Element.prototype.setAttribute.call(this,"src",e),e}}),Yi=function(e){return Vi([e.el(),rt.a.HTMLMediaElement.prototype,Gi],"src")},Qi=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=Yi(e),r=t.setAttribute,i=t.load;Object.defineProperty(t,"src",ue(n,{set:function(r){var i=n.set.call(t,r);return e.triggerSourceset(t.src),i}})),t.setAttribute=function(n,i){var a=r.call(t,n,i);return/src/i.test(n)&&e.triggerSourceset(t.src),a},t.load=function(){var n=i.call(t);return qi(e)||(e.triggerSourceset(""),Wi(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):qi(e)||Wi(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=i,t.setAttribute=r,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},Xi=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i=t.source,a=!1;if(i&&(r.el_.currentSrc!==i.src||t.tag&&3===t.tag.initNetworkState_)?r.setSource(i):r.handleLateInit_(r.el_),t.enableSourceset&&r.setupSourcesetHandling_(),r.el_.hasChildNodes()){for(var o=r.el_.childNodes,s=o.length,c=[];s--;){var u=o[s];"track"===u.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(u),r.remoteTextTracks().addTrack(u.track),r.textTracks().addTrack(u.track),a||r.el_.hasAttribute("crossorigin")||!Qn(u.src)||(a=!0)):c.push(u))}for(var l=0;l<c.length;l++)r.el_.removeChild(c[l])}return r.proxyNativeTracks_(),r.featuresNativeTextTracks&&a&&mt.warn(Je()(Me())),r.restoreMetadataTracksInIOSNativePlayer_(),(mn||nn||un)&&!0===t.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}r(t,e);var n=t.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){Qi(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),n=function(){e=[];for(var n=0;n<t.length;n++){var r=t[n];"metadata"===r.kind&&e.push({track:r,storedMode:r.mode})}};n(),t.addEventListener("change",n),this.on("dispose",function(){return t.removeEventListener("change",n)});var r=function n(){for(var r=0;r<e.length;r++){var i=e[r];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",n),t.removeEventListener("change",r),t.addEventListener("change",r)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",n),t.addEventListener("change",n),t.removeEventListener("change",r)})},n.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var r=e.toLowerCase();this[r+"TracksListeners_"]&&Object.keys(this[r+"TracksListeners_"]).forEach(function(e){n.el()[r+"Tracks"].removeEventListener(e,n[r+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[r+"TracksListeners_"]=null,this.proxyNativeTracksForType_(r)}},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t=this,n=ar[e],r=this.el()[n.getterName],i=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&r&&r.addEventListener){var a={change:function(e){i.trigger({type:"change",target:i,currentTarget:i,srcElement:i})},addtrack:function(e){i.addTrack(e.track)},removetrack:function(e){i.removeTrack(e.track)}},o=function(){for(var e=[],t=0;t<i.length;t++){for(var n=!1,a=0;a<r.length;a++)if(r[a]===i[t]){n=!0;break}n||e.push(i[t])}for(;e.length;)i.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach(function(e){var n=a[e];r.addEventListener(e,n),t.on("dispose",function(t){return r.removeEventListener(e,n)})}),this.on("loadstart",o),this.on("dispose",function(e){return t.off("loadstart",o)})}},n.proxyNativeTracks_=function(){var e=this;ar.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},n.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=ot.a.createElement("video");var r=this.options_.tag&&I(this.options_.tag),i=ue({},r);mn&&!0===this.options_.nativeControlsForTouch||delete i.controls,O(e,f(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&L(e,"preload",this.options_.preload);for(var a=["loop","muted","playsinline","autoplay"],o=0;o<a.length;o++){var s=a[o],c=this.options_[s];void 0!==c&&(c?L(e,s,s):j(e,s),e[s]=c)}return e},n.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var r=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),t||this.trigger("loadstart")})}var i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(e){this.trigger(e)},this)})}},n.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){mt(e,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;if(this.el_.duration===1/0&&sn&&fn&&0===this.el_.currentTime){var t=function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)})}},n.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=rt.a.navigator&&rt.a.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},n.exitFullScreen=function(){this.el_.webkitExitFullScreen()},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){t.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):e.prototype.addTextTrack.call(this,t,n,r)},n.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=ot.a.createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},n.addRemoteTextTrack=function(t,n){var r=e.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},n.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),r=n.length;r--;)t!==n[r]&&t!==n[r].track||this.el().removeChild(n[r])},n.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),rt.a.performance&&"function"==typeof rt.a.performance.now?e.creationTime=rt.a.performance.now():rt.a.performance&&rt.a.performance.timing&&"number"==typeof rt.a.performance.timing.navigationStart&&(e.creationTime=rt.a.Date.now()-rt.a.performance.timing.navigationStart),e},t}(cr);if(_()){Xi.TEST_VID=ot.a.createElement("video");var Ji=ot.a.createElement("track");Ji.kind="captions",Ji.srclang="en",Ji.label="English",Xi.TEST_VID.appendChild(Ji)}Xi.isSupported=function(){try{Xi.TEST_VID.volume=.5}catch(e){return!1}return!(!Xi.TEST_VID||!Xi.TEST_VID.canPlayType)},Xi.canPlayType=function(e){return Xi.TEST_VID.canPlayType(e)},Xi.canPlaySource=function(e,t){return Xi.canPlayType(e.type)},Xi.canControlVolume=function(){try{var e=Xi.TEST_VID.volume;return Xi.TEST_VID.volume=e/2+.1,e!==Xi.TEST_VID.volume}catch(e){return!1}},Xi.canMuteVolume=function(){try{var e=Xi.TEST_VID.muted;return Xi.TEST_VID.muted=!e,Xi.TEST_VID.muted?L(Xi.TEST_VID,"muted","muted"):j(Xi.TEST_VID,"muted","muted"),e!==Xi.TEST_VID.muted}catch(e){return!1}},Xi.canControlPlaybackRate=function(){if(sn&&fn&&hn<58)return!1;try{var e=Xi.TEST_VID.playbackRate;return Xi.TEST_VID.playbackRate=e/2+.1,e!==Xi.TEST_VID.playbackRate}catch(e){return!1}},Xi.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(ot.a.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(ot.a.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(ot.a.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(ot.a.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Xi.supportsNativeTextTracks=function(){return gn||an&&fn},Xi.supportsNativeVideoTracks=function(){return!(!Xi.TEST_VID||!Xi.TEST_VID.videoTracks)},Xi.supportsNativeAudioTracks=function(){return!(!Xi.TEST_VID||!Xi.TEST_VID.audioTracks)},Xi.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Xi.prototype.featuresVolumeControl=Xi.canControlVolume(),Xi.prototype.featuresMuteControl=Xi.canMuteVolume(),Xi.prototype.featuresPlaybackRate=Xi.canControlPlaybackRate(),Xi.prototype.featuresSourceset=Xi.canOverrideAttributes(),Xi.prototype.movingMediaElementInDOM=!an,Xi.prototype.featuresFullscreenResize=!0,Xi.prototype.featuresProgressEvents=!0,Xi.prototype.featuresTimeupdateEvents=!0,Xi.prototype.featuresNativeTextTracks=Xi.supportsNativeTextTracks(),Xi.prototype.featuresNativeVideoTracks=Xi.supportsNativeVideoTracks(),Xi.prototype.featuresNativeAudioTracks=Xi.supportsNativeAudioTracks();var Ki=Xi.TEST_VID&&Xi.TEST_VID.constructor.prototype.canPlayType,Zi=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Xi.patchCanPlayType=function(){cn>=4&&!ln&&!fn&&(Xi.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&Zi.test(e)?"maybe":Ki.call(this,e)})},Xi.unpatchCanPlayType=function(){var e=Xi.TEST_VID.constructor.prototype.canPlayType;return Xi.TEST_VID.constructor.prototype.canPlayType=Ki,e},Xi.patchCanPlayType(),Xi.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Xi.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){Xi.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){Xi.prototype["set"+se(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){Xi.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(e){Xi.prototype["set"+se(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){Xi.prototype[e]=function(){return this.el_[e]()}}),cr.withSourceHandlers(Xi),Xi.nativeSourceHandler={},Xi.nativeSourceHandler.canPlayType=function(e){try{return Xi.TEST_VID.canPlayType(e)}catch(e){return""}},Xi.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Xi.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=Yn(e.src);return Xi.nativeSourceHandler.canPlayType("video/"+n)}return""},Xi.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Xi.nativeSourceHandler.dispose=function(){},Xi.registerSourceHandler(Xi.nativeSourceHandler),cr.registerTech("Html5",Xi);var ea=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],ta={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},na=["tiny","xsmall","small","medium","large","xlarge","huge"],ra={};na.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;ra[e]="vjs-layout-"+t});var ia={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},aa=function(e){function t(n,r,i){var a;if(n.id=n.id||r.id||"vjs_video_"+G(),r=f(t.getTagSettings(n),r),r.initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof n.closest){var o=n.closest("[lang]");o&&o.getAttribute&&(r.language=o.getAttribute("lang"))}else for(var c=n;c&&1===c.nodeType;){if(I(c).hasOwnProperty("lang")){r.language=c.getAttribute("lang");break}c=c.parentNode}if(a=e.call(this,null,r,i)||this,a.log=yt(a.id_),a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=n,a.tagAttributes=n&&I(n),a.language(a.options_.language),r.languages){var u={};Object.getOwnPropertyNames(r.languages).forEach(function(e){u[e.toLowerCase()]=r.languages[e]}),a.languages_=u}else a.languages_=t.prototype.options_.languages;a.cache_={},a.poster_=r.poster||"",a.controls_=!!r.controls,a.cache_.lastVolume=1,n.controls=!1,n.removeAttribute("controls"),n.hasAttribute("autoplay")?a.options_.autoplay=!0:a.autoplay(a.options_.autoplay),a.scrubbing_=!1,a.el_=a.createEl(),a.cache_.lastPlaybackRate=a.defaultPlaybackRate(),ae(s(s(a)),{eventBusKey:"el_"}),a.fluid_&&a.on("playerreset",a.updateStyleEl_);var l=ue(a.options_);if(r.plugins){var d=r.plugins;Object.keys(d).forEach(function(e){if("function"!=typeof this[e])throw new Error('plugin "'+e+'" does not exist');this[e](d[e])},s(s(a)))}a.options_.playerOptions=l,a.middleware_=[],a.initChildren(),a.isAudio("audio"===n.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),an||a.addClass("vjs-workinghover"),t.players[a.id_]=s(s(a));var h=pt.split(".")[0];return a.addClass("vjs-v"+h),a.userActive(!0),a.reportUserActivity(),a.one("play",a.listenForUserActivity_),a.on("fullscreenchange",a.handleFullscreenChange_),a.on("stageclick",a.handleStageClick_),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.changingSrc_=!1,a.playWaitingForReady_=!1,a.playOnLoadstart_=null,a}r(t,e);var n=t.prototype;return n.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Ee(this),e.prototype.dispose.call(this)},n.createEl=function(){var t,n=this.tag,r=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),i="video-js"===this.tag.tagName.toLowerCase();r?t=this.el_=n.parentNode:i||(t=this.el_=e.prototype.createEl.call(this,"div"));var a=I(n);if(i){for(t=this.el_=n,n=this.tag=ot.a.createElement("video");t.children.length;)n.appendChild(t.firstChild);E(t,"video-js")||P(t,"video-js"),t.appendChild(n),r=this.playerElIngest_=t,Object.keys(t).forEach(function(e){n[e]=t[e]})}if(n.setAttribute("tabindex","-1"),a.tabindex="-1",pn&&(n.setAttribute("role","application"),a.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach(function(e){i&&"class"===e||t.setAttribute(e,a[e]),i&&n.setAttribute(e,a[e])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),!0!==rt.a.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Rt("vjs-styles-dimensions");var o=wt(".vjs-styles-defaults"),s=wt("head");s.insertBefore(this.styleEl_,o?o.nextSibling:s.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var c=n.getElementsByTagName("a"),u=0;u<c.length;u++){var l=c.item(u);P(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!r&&n.parentNode.insertBefore(t,n),x(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=t,t},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t)return this[n]=void 0,void this.updateStyleEl_();var r=parseFloat(t);if(isNaN(r))return void mt.error('Improper value "'+t+'" supplied for for '+e);this[n]=r,this.updateStyleEl_()},n.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,Ft(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),Bt(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(!0===rt.a.VIDEOJS_NO_DYNAMIC_STYLE){var e="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();return void(n&&(e>=0&&(n.width=e),t>=0&&(n.height=t)))}var r,i,a,o;a=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var s=a.split(":"),c=s[1]/s[0];r=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/c:this.videoWidth()||300,i=void 0!==this.height_?this.height_:r*c,o=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(o),Lt(this.styleEl_,"\n      ."+o+" {\n        width: "+r+"px;\n        height: "+i+"px;\n      }\n\n      ."+o+".vjs-fluid {\n        padding-top: "+100*c+"%;\n      }\n    ")},n.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var r=se(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(cr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var a="string"!=typeof this.autoplay()&&this.autoplay(),o={source:t,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};sr.names.forEach(function(e){var t=sr[e];o[t.getterName]=n[t.privateName]}),f(o,this.options_[r]),f(o,this.options_[i]),f(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);var s=cr.getTech(e);if(!s)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new s(o),this.tech_.ready(jt(this,this.handleTechReady_),!0),Pn.jsonToTextTracks(this.textTracksJson_||[],this.tech_),ea.forEach(function(e){n.on(n.tech_,e,n["handleTech"+se(e)+"_"])}),Object.keys(ta).forEach(function(e){n.on(n.tech_,e,function(t){if(0===n.tech_.playbackRate()&&n.tech_.seeking())return void n.queuedCallbacks_.push({callback:n["handleTech"+ta[e]+"_"].bind(n),event:t});n["handleTech"+ta[e]+"_"](t)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||x(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e=this;sr.names.forEach(function(t){var n=sr[t];e[n.privateName]=e[n.getterName]()}),this.textTracksJson_=Pn.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&mt.warn(Je()(Fe())),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,r=function(){var e=t.muted();t.muted(!0);var n=t.play();if(n&&n.then&&n.catch)return n.catch(function(n){t.muted(e)})};if("any"===e?(n=this.play())&&n.then&&n.catch&&n.catch(function(){return r()}):n="muted"===e?r():this.play(),n&&n.then&&n.catch)return n.then(function(){t.trigger({type:"autoplay-success",autoplay:e})}).catch(function(n){t.trigger({type:"autoplay-failure",autoplay:e})})}},n.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=mr(this,t)),this.cache_.source=ue({},e,{src:t,type:n});for(var r=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),i=[],a=this.$$("source"),o=[],s=0;s<a.length;s++){var c=I(a[s]);i.push(c),c.src&&c.src===t&&o.push(c.src)}o.length&&!r.length?this.cache_.sources=i:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var n=function(e){return t.updateSourceCaches_(e)},r=this.currentSource().src,i=e.src;if(r&&!/^blob:/.test(r)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==r)&&(n=function(){}),n(i),!e.src){var a=function e(n){if("sourceset"!==n.type){var r=t.techGet("currentSrc");t.lastSource_.tech=r,t.updateSourceCaches_(r)}t.tech_.off(["sourceset","loadstart"],e)};this.tech_.one(["sourceset","loadstart"],a)}}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime(),n=function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))};this.on("timeupdate",n)},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(mt.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){W(e)&&this.controls_&&(this.paused()?me(this.play()):this.pause())},n.handleTechDoubleClick_=function(e){if(this.controls_){Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.preventDefault()},n.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.handleStageClick_=function(){this.reportUserActivity()},n.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},n.getCache=function(){return this.cache_},n.techCall_=function(e,t){this.ready(function(){if(e in hr)return ke(this.middleware_,this.tech_,e,t);if(e in pr)return Te(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw mt(e),e}},!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in fr)return Se(this.middleware_,this.tech_,e);if(e in pr)return Te(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw mt("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw mt("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw mt(t),t}}},n.play=function(){var e=this,t=this.options_.Promise||rt.a.Promise;return t?new t(function(t){e.play_(t)}):this.play_()},n.play_=function(e){var t=this;if(void 0===e&&(e=me),this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return void e(this.techGet_("play"));this.playOnLoadstart_=function(){t.playOnLoadstart_=null,e(t.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){t.playWaitingForReady_=!1,e(t.play())})}},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||he(0,0)},n.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=he(0,0)),e},n.bufferedPercent=function(){return pe(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},n.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.muted=function(e){return void 0!==e?void this.techCall_("setMuted",e):this.techGet_("muted")||!1},n.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){return void 0!==e&&0!==e?void(this.cache_.lastVolume=e):this.cache_.lastVolume},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){return void 0!==e?void(this.isFullscreen_=!!e):!!this.isFullscreen_},n.requestFullscreen=function(){var e=bn;this.isFullscreen(!0),e.requestFullscreen?(ee(ot.a,e.fullscreenchange,jt(this,function t(n){this.isFullscreen(ot.a[e.fullscreenElement]),!1===this.isFullscreen()&&te(ot.a,e.fullscreenchange,t),this.trigger("fullscreenchange")})),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},n.exitFullscreen=function(){var e=bn;this.isFullscreen(!1),e.requestFullscreen?ot.a[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},n.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=ot.a.documentElement.style.overflow,ee(ot.a,"keydown",jt(this,this.fullWindowOnEscKey)),ot.a.documentElement.style.overflow="hidden",P(ot.a.body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},n.exitFullWindow=function(){this.isFullWindow=!1,te(ot.a,"keydown",this.fullWindowOnEscKey),ot.a.documentElement.style.overflow=this.docOrigOverflow,$(ot.a.body,"vjs-full-window"),this.trigger("exitFullWindow")},n.canPlayType=function(e){for(var t,n=0,r=this.options_.techOrder;n<r.length;n++){var i=r[n],a=cr.getTech(i);if(a||(a=Xt.getComponent(i)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else mt.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){var t=this,n=this.options_.techOrder.map(function(e){return[e,cr.getTech(e)]}).filter(function(e){var t=e[0],n=e[1];return n?n.isSupported():(mt.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(e,t,n){var r;return e.some(function(e){return t.some(function(t){if(r=n(e,t))return!0})}),r},i=function(e){return function(t,n){return e(n,t)}},a=function(e,n){var r=e[0];if(e[1].canPlaySource(n,t.options_[r.toLowerCase()]))return{source:n,tech:r}};return(this.options_.sourceOrder?r(e,n,i(a)):r(n,e,a))||!1},n.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";var n=yr(e);if(!n.length)return void this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),_e(this,n[0],function(e,r){if(t.middleware_=r,t.cache_.sources=n,t.updateSourceCaches_(e),t.src_(e))return n.length>1?t.src(n.slice(1)):(t.changingSrc_=!1,t.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void t.triggerReady());we(r,t.tech_)})},n.src_=function(e){var t=this,n=this.selectSource([e]);return!n||(ce(n.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(function(){t.changingSrc_=!1}),!1))},n.load=function(){this.techCall_("load")},n.reset=function(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),Ft(this)&&this.trigger("playerreset")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=t||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new ve(e),this.addClass("vjs-error"),mt.error("(CODE:"+this.error_.code+" "+ve.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,n,r=jt(this,this.reportUserActivity),i=function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())},a=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},o=function(t){r(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",i),this.on("mouseup",o),this.on("keydown",r),this.on("keyup",r);var s;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var e=this.options_.inactivityTimeout;e<=0||(s=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},n.playbackRate=function(e){return void 0!==e?void this.techCall_("setPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){return void 0!==e?void(this.isAudio_=!!e):!!this.isAudio_},n.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e,n=t.track;if(n||(n=e),this.tech_)return this.tech_.removeRemoteTextTrack(n)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},n.languages=function(){return ue(t.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=ue(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];r=ue(r),r.player=void 0,e.tracks[n]=r}return e},n.createModal=function(e,t){var n=this;t=t||{},t.content=e||"";var r=new On(this,t);return this.addChild(r),r.on("dispose",function(){n.removeChild(r)}),r.open(),r},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<na.length;n++){var r=na[n],i=this.breakpoints_[r];if(t<=i){if(e===r)return;e&&this.removeClass(ra[e]),this.addClass(ra[r]),this.breakpoint_=r;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0===e?f(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=f({},ia,e),this.updateCurrentBreakpoint_(),f(this.breakpoints_))},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e),e!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0)},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return ra[this.breakpoint_]||""},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=I(e),r=n["data-setup"];if(E(e,"vjs-fill")&&(n.fill=!0),E(e,"vjs-fluid")&&(n.fluid=!0),null!==r){var i=Ge()(r||"{}"),a=i[0],o=i[1];a&&mt.error(a),f(n,o)}if(f(t,n),e.hasChildNodes())for(var s=e.childNodes,c=0,u=s.length;c<u;c++){var l=s[c],d=l.nodeName.toLowerCase();"source"===d?t.sources.push(I(l)):"track"===d&&t.tracks.push(I(l))}return t},n.flexNotSupported_=function(){var e=ot.a.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},t}(Xt);sr.names.forEach(function(e){var t=sr[e];aa.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),aa.players={};var oa=rt.a.navigator;aa.prototype.options_={techOrder:cr.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:oa&&(oa.languages&&oa.languages[0]||oa.userLanguage||oa.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){aa.prototype[e]=function(){return this.techGet_(e)}}),ea.forEach(function(e){aa.prototype["handleTech"+se(e)+"_"]=function(){return this.trigger(e)}}),Xt.registerComponent("Player",aa);var sa="plugin",ca="activePlugins_",ua={},la=function(e){return ua.hasOwnProperty(e)},da=function(e){return la(e)?ua[e]:void 0},fa=function(e,t){e[ca]=e[ca]||{},e[ca][t]=!0},ha=function(e,t,n){var r=(n?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},pa=function(e,t){var n=function(){ha(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return fa(this,e),ha(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},va=function(e,t){return t.prototype.name=e,function(){ha(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=o(t,[this].concat(r));return this[e]=function(){return a},ha(this,a.getEventHash()),a}},ga=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,ae(this),delete this.trigger,oe(this,this.constructor.defaultState),fa(t,this.name),this.dispose=jt(this,this.dispose),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),ne(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[ca][e]=!1,this.player=this.state=null,t[e]=va(e,ua[e])},e.isBasic=function(t){var n="string"==typeof t?da(t):t;return"function"==typeof n&&!e.prototype.isPrototypeOf(n.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(la(t))mt.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(aa.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return ua[t]=n,t!==sa&&(e.isBasic(n)?aa.prototype[t]=pa(t,n):aa.prototype[t]=va(t,n)),n},e.deregisterPlugin=function(e){if(e===sa)throw new Error("Cannot de-register base plugin.");la(e)&&(delete ua[e],delete aa.prototype[e])},e.getPlugins=function(e){void 0===e&&(e=Object.keys(ua));var t;return e.forEach(function(e){var n=da(e);n&&(t=t||{},t[e]=n)}),t},e.getPluginVersion=function(e){var t=da(e);return t&&t.VERSION||""},e}();ga.getPlugin=da,ga.BASE_PLUGIN_NAME=sa,ga.registerPlugin(sa,ga),aa.prototype.usingPlugin=function(e){return!!this[ca]&&!0===this[ca][e]},aa.prototype.hasPlugin=function(e){return!!la(e)};var ma=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},ya=function(e,t){void 0===t&&(t={});var n=function(){e.apply(this,arguments)},r={};"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),r=t):"function"==typeof t&&(n=t),ma(n,e);for(var i in r)r.hasOwnProperty(i)&&(n.prototype[i]=r[i]);return n},ba=function(e){return 0===e.indexOf("#")?e.slice(1):e};if(Be.hooks_={},Be.hooks=function(e,t){return Be.hooks_[e]=Be.hooks_[e]||[],t&&(Be.hooks_[e]=Be.hooks_[e].concat(t)),Be.hooks_[e]},Be.hook=function(e,t){Be.hooks(e,t)},Be.hookOnce=function(e,t){Be.hooks(e,[].concat(t).map(function(t){return function n(){return Be.removeHook(e,n),t.apply(void 0,arguments)}}))},Be.removeHook=function(e,t){var n=Be.hooks(e).indexOf(t);return!(n<=-1)&&(Be.hooks_[e]=Be.hooks_[e].slice(),Be.hooks_[e].splice(n,1),!0)},!0!==rt.a.VIDEOJS_NO_DYNAMIC_STYLE&&_()){var _a=wt(".vjs-styles-defaults");if(!_a){_a=Rt("vjs-styles-defaults");var wa=wt("head");wa&&wa.insertBefore(_a,wa.firstChild),Lt(_a,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}ie(1,Be),Be.VERSION=pt,Be.options=aa.prototype.options_,Be.getPlayers=function(){return aa.players},Be.getPlayer=function(e){var t,n=aa.players;if("string"==typeof e){var r=ba(e),i=n[r];if(i)return i;t=wt("#"+r)}else t=e;if(w(t)){var a=t,o=a.player,s=a.playerId;if(o||n[s])return o||n[s]}},Be.getAllPlayers=function(){return Object.keys(aa.players).map(function(e){return aa.players[e]}).filter(Boolean)},Be.players=aa.players,Be.getComponent=Xt.getComponent,Be.registerComponent=function(e,t){cr.isTech(t)&&mt.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Xt.registerComponent.call(Xt,e,t)},Be.getTech=cr.getTech,Be.registerTech=cr.registerTech,Be.use=be,Object.defineProperty(Be,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Be.middleware,"TERMINATOR",{value:dr,writeable:!1,enumerable:!0}),Be.browser=yn,Be.TOUCH_ENABLED=mn,Be.extend=ya,Be.mergeOptions=ue,Be.bind=jt,Be.registerPlugin=ga.registerPlugin,Be.deregisterPlugin=ga.deregisterPlugin,Be.plugin=function(e,t){return mt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ga.registerPlugin(e,t)},Be.getPlugins=ga.getPlugins,Be.getPlugin=ga.getPlugin,Be.getPluginVersion=ga.getPluginVersion,Be.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),Be.options.languages=ue(Be.options.languages,(n={},n[e]=t,n)),Be.options.languages[e]},Be.log=mt,Be.createLogger=yt,Be.createTimeRange=Be.createTimeRanges=he,Be.formatTime=je,Be.setFormatTime=Re,Be.resetFormatTime=Le,Be.parseUrl=Wn,Be.isCrossOrigin=Qn,Be.EventTarget=Ut,Be.on=ee,Be.one=re,Be.off=te,Be.trigger=ne,Be.xhr=Ze.a,Be.TextTrack=Zn,Be.AudioTrack=er,Be.VideoTrack=tr,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){Be[e]=function(){return mt.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),kt[e].apply(null,arguments)}}),Be.computedStyle=v,Be.dom=kt,Be.url=Xn;/**
 * @videojs/http-streaming
 * @version 1.5.1
 * @copyright 2018 Brightcove, Inc
 * @license Apache-2.0
 */
var Sa=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=tt.a.buildAbsoluteURL(rt.a.location.href,e)),tt.a.buildAbsoluteURL(e,t))},ka=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Ta=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ca=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},xa=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Ea=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Pa=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),$a=Be.mergeOptions,Aa=Be.EventTarget,Oa=Be.log,Ia=function(e,t){["AUDIO","SUBTITLES"].forEach(function(n){for(var r in e.mediaGroups[n])for(var i in e.mediaGroups[n][r]){var a=e.mediaGroups[n][r][i];t(a,n,r,i)}})},Ra=function(e,t,n){var r=t.slice();n=n||0;for(var i=Math.min(e.length,t.length+n),a=n;a<i;a++)r[a-n]=$a(e[a],r[a-n]);return r},La=function(e,t){e.resolvedUri||(e.resolvedUri=Sa(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Sa(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Sa(t,e.map.uri))},ja=function(e,t){var n=$a(e,{}),r=n.playlists[t.uri];if(!r)return null;if(r.segments&&t.segments&&r.segments.length===t.segments.length&&r.mediaSequence===t.mediaSequence)return null;var i=$a(r,t);r.segments&&(i.segments=Ra(r.segments,t.segments,t.mediaSequence-r.mediaSequence)),i.segments.forEach(function(e){La(e,i.resolvedUri)});for(var a=0;a<n.playlists.length;a++)n.playlists[a].uri===t.uri&&(n.playlists[a]=i);return n.playlists[t.uri]=i,n},Da=function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];e.playlists[n.uri]=n,n.resolvedUri=Sa(e.uri,n.uri),n.id=t,n.attributes||(n.attributes={},Oa.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},Na=function(e){Ia(e,function(t){t.uri&&(t.resolvedUri=Sa(e.uri,t.uri))})},Ua=function(e,t){var n=e.segments[e.segments.length-1];return t&&n&&n.duration?1e3*n.duration:500*(e.targetDuration||10)},Ma=function(e){function t(e,n,r){ka(this,t);var i=Ea(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(i.srcUrl=e,i.hls_=n,i.withCredentials=r,!i.srcUrl)throw new Error("A non-empty playlist URL is required");return i.state="HAVE_NOTHING",i.on("mediaupdatetimeout",function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.hls_.xhr({uri:Sa(i.master.uri,i.media().uri),withCredentials:i.withCredentials},function(e,t){if(i.request)return e?i.playlistRequestError(i.request,i.media().uri,"HAVE_METADATA"):void i.haveMetadata(i.request,i.media().uri)}))}),i}return xa(t,e),Ta(t,[{key:"playlistRequestError",value:function(e,t,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(e,t){var n=this;this.request=null,this.state="HAVE_METADATA";var r=new it.a;r.push(e.responseText),r.end(),r.manifest.uri=t,r.manifest.attributes=r.manifest.attributes||{};var i=ja(this.master,r.manifest);this.targetDuration=r.manifest.targetDuration,i?(this.master=i,this.media_=this.master.playlists[r.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(rt.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=rt.a.setTimeout(function(){n.trigger("mediaupdatetimeout")},Ua(this.media(),!!i))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),rt.a.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var r=!this.media_||e.uri!==this.media_.uri;if(this.master.playlists[e.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r){if(this.state="SWITCHING_MEDIA",this.request){if(Sa(this.master.uri,e.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:Sa(this.master.uri,e.uri),withCredentials:this.withCredentials},function(r,i){if(t.request){if(r)return t.playlistRequestError(t.request,e.uri,n);t.haveMetadata(i,e.uri),"HAVE_MASTER"===n?t.trigger("loadedmetadata"):t.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest(),rt.a.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var t=this;rt.a.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;return void(this.mediaUpdateTimeout=rt.a.setTimeout(function(){return t.load()},r))}if(!this.started)return void this.start();n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}},{key:"start",value:function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: "+e.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");var r=new it.a;return r.push(n.responseText),(r.end(),e.state="HAVE_MASTER",r.manifest.uri=e.srcUrl,r.manifest.playlists)?(e.master=r.manifest,Da(e.master),Na(e.master),e.trigger("loadedplaylist"),void(e.request||e.media(r.manifest.playlists[0]))):(e.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:rt.a.location.href,playlists:[{uri:e.srcUrl,id:0}]},e.master.playlists[e.srcUrl]=e.master.playlists[0],e.master.playlists[0].resolvedUri=e.srcUrl,e.master.playlists[0].attributes=e.master.playlists[0].attributes||{},e.haveMetadata(n,e.srcUrl),e.trigger("loadedmetadata"))}})}}]),t}(Aa),Fa=Be.createTimeRange,Ba=function(e,t){var n=0,r=t-e.mediaSequence,i=e.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(i=e.segments[r],void 0!==i.end)return{result:n+i.end,precise:!0};if(n+=i.duration,void 0!==i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}},qa=function(e,t){for(var n=0,r=void 0,i=t-e.mediaSequence;i<e.segments.length;i++){if(r=e.segments[i],void 0!==r.start)return{result:r.start-n,precise:!0};if(n+=r.duration,void 0!==r.end)return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}},Ha=function(e,t,n){var r=void 0,i=void 0;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(r=Ba(e,t),r.precise?r.result:(i=qa(e,t),i.precise?i.result:r.result+n))},Va=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return rt.a.Infinity}return Ha(e,t,n)},za=function(e,t,n){var r=0;if(t>n){var i=[n,t];t=i[0],n=i[1]}if(t<0){for(var a=t;a<Math.min(0,n);a++)r+=e.targetDuration;t=0}for(var o=t;o<n;o++)r+=e.segments[o].duration;return r},Wa=function(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,n=e.segments[t].duration||e.targetDuration,r=n+2*e.targetDuration;t--&&!((n+=e.segments[t].duration)>=r););return Math.max(0,t)},Ga=function(e,t,n){if(!e||!e.segments)return null;if(e.endList)return Va(e);if(null===t)return null;t=t||0;var r=n?Wa(e):e.segments.length;return Ha(e,e.mediaSequence+r,t)},Ya=function(e,t){var n=!0,r=t||0,i=Ga(e,t,n);return null===i?Fa():Fa(r,i)},Qa=function(e){return e-Math.floor(e)==0},Xa=function(e,t){if(Qa(t))return t+.1*e;for(var n=t.toString().split(".")[1].length,r=1;r<=n;r++){var i=Math.pow(10,r),a=t*i;if(Qa(a)||r===n)return(a+e)/i}},Ja=Xa.bind(null,1),Ka=Xa.bind(null,-1),Za=function(e,t,n,r){var i=void 0,a=void 0,o=e.segments.length,s=t-r;if(s<0){if(n>0)for(i=n-1;i>=0;i--)if(a=e.segments[i],(s+=Ka(a.duration))>0)return{mediaIndex:i,startTime:r-za(e,n,i)};return{mediaIndex:0,startTime:t}}if(n<0){for(i=n;i<0;i++)if((s-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};n=0}for(i=n;i<o;i++)if(a=e.segments[i],(s-=Ja(a.duration))<0)return{mediaIndex:i,startTime:r+za(e,n,i)};return{mediaIndex:o-1,startTime:t}},eo=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},to=function(e){return e.excludeUntil&&e.excludeUntil===1/0},no=function(e){var t=eo(e);return!e.disabled&&!t},ro=function(e){return e.disabled},io=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},ao=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},oo=function(e,t){return t.attributes&&t.attributes[e]},so=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return oo("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/t:NaN},co=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!no(e)&&(e.attributes.BANDWIDTH||0)<n}).length},uo={duration:Va,seekable:Ya,safeLiveIndex:Wa,getMediaInfoForTime:Za,isEnabled:no,isDisabled:ro,isBlacklisted:eo,isIncompatible:to,playlistEnd:Ga,isAes:io,isFmp4:ao,hasAttribute:oo,estimateSegmentRequestTime:so,isLowestEnabledRendition:co},lo=Be.xhr,fo=Be.mergeOptions,ho=function(){return function e(t,n){t=fo({timeout:45e3},t);var r=e.beforeRequest||Be.Hls.xhr.beforeRequest;if(r&&"function"==typeof r){var i=r(t);i&&(t=i)}var a=lo(t,function(e,t){var r=a.response;!e&&r&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=r.byteLength||r.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),t.headers&&(a.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(a.timedout=!0),e||a.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(a&&(r||a.responseText)))),n(e,a)}),o=a.abort;return a.abort=function(){return a.aborted=!0,o.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a}},po=function(e,t){return e.start(t)+"-"+e.end(t)},vo=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},go=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},mo=function(e){var t={};return Object.keys(e).forEach(function(n){var r=e[n];ArrayBuffer.isView(r)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r}),t},yo=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},bo=function(e){for(var t=Array.prototype.slice.call(e),n=16,r="",i=void 0,a=void 0,o=0;o<t.length/n;o++)i=t.slice(o*n,o*n+n).map(vo).join(""),a=t.slice(o*n,o*n+n).map(go).join(""),r+=i+" "+a+"\n";return r},_o=function(e){var t=e.bytes;return bo(t)},wo=function(e){var t="",n=void 0;for(n=0;n<e.length;n++)t+=po(e,n)+" ";return t},So=Object.freeze({createTransferableMessage:mo,initSegmentId:yo,hexDump:bo,tagDump:_o,textRanges:wo}),ko=function(e,t,n,r){var i=void 0;if("stream"===t){i=new Date(1e3*r+n.getTime());var a=e.toISOString(),o=n.toISOString(),s=i.toISOString();return o<=a&&a<=s}if("player"===t)return i=r+n,n<=e&&e<=i},To=function(e,t,n){if(!n.segments||0===n.segments.length)return null;if("player"!==t&&"stream"!==t)return null;for(var r=0,i=0;i<n.segments.length;i++){var a=n.segments[i],o=r+a.duration,s=void 0,c=void 0;"player"===t?(s=a.start,c=r):(s=a.dateTimeObject,c=a.dateTimeObject);var u=void 0!==a.start&&void 0!==a.end&&ko(e,t,s,a.end-a.start),l=ko(e,t,c,a.duration);if(u)return{segment:a,estimatedStart:c,type:"accurate"};if(l)return{segment:a,estimatedStart:c,type:"estimate"};r=o}return null},Co=function(e,t){return To(e,"player",t)},xo=function(e,t){var n=void 0;try{n=new Date(e)}catch(e){return null}return To(n,"stream",t)},Eo=function(e,t){var n=void 0,r=void 0;try{n=new Date(e),r=new Date(t)}catch(e){}var i=n.getTime();return(r.getTime()-i)/1e3},Po=function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++){if(!e.segments[t].dateTimeObject)return!1}return!0},$o=function(e){var t=e.playlist,n=e.time,r=void 0===n?void 0:n,i=e.callback;if(!i)throw new Error("getStreamTime: callback must be provided");if(!t||void 0===r)return i({message:"getStreamTime: playlist and time must be provided"});var a=Co(r,t);if(!a)return i({message:"valid streamTime was not found"});if("estimate"===a.type)return i({message:"Accurate streamTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:r};return a.segment.dateTimeObject&&(o.programDateTime=a.segment.dateTimeObject.toISOString()),i(null,o)},Ao=function e(t){var n=t.streamTime,r=t.playlist,i=t.retryCount,a=void 0===i?2:i,o=t.seekTo,s=t.pauseAfterSeek,c=void 0===s||s,u=t.tech,l=t.callback;if(!l)throw new Error("seekToStreamTime: callback must be provided");if(void 0===n||!r||!o)return l({message:"seekToStreamTime: streamTime, seekTo and playlist must be provided"});if(!r.endList&&!u.hasStarted_)return l({message:"player must be playing a live stream to start buffering"});if(!Po(r))return l({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var d=xo(n,r);if(!d)return l({message:n+" was not found in the stream"});if("estimate"===d.type)return 0===a?l({message:n+" is not buffered yet. Try again"}):e({streamTime:n,playlist:r,retryCount:a-1,seekTo:o,pauseAfterSeek:c,tech:u,callback:l});var f=d.segment,h=Eo(f.dateTimeObject,n),p=f.start+h,v=function(){return l(null,u.currentTime())};u.one("seeked",v),c&&u.pause(),o(p)},Oo=1/30,Io=3*Oo,Ro=function(e,t){var n=[],r=void 0;if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&n.push([e.start(r),e.end(r)]);return Be.createTimeRanges(n)},Lo=function(e,t){return Ro(e,function(e,n){return e-Oo<=t&&n+Oo>=t})},jo=function(e,t){return Ro(e,function(e){return e-Oo>=t})},Do=function(e){if(e.length<2)return Be.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var r=e.end(n-1),i=e.start(n);t.push([r,i])}return Be.createTimeRanges(t)},No=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},Uo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return((e.length?e.end(e.length-1):0)-t)/n},Mo=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},Fo=function(e,t,n){var r=t.player_;if(n.captions&&n.captions.length){e.inbandTextTracks_||(e.inbandTextTracks_={});for(var i in n.captionStreams)if(!e.inbandTextTracks_[i]){r.tech_.trigger({type:"usage",name:"hls-608"});var a=r.textTracks().getTrackById(i);e.inbandTextTracks_[i]=a||r.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}}n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)},Bo=function(e,t,n){var r=void 0,i=void 0;if(n&&n.cues)for(r=n.cues.length;r--;)i=n.cues[r],i.startTime<=t&&i.endTime>=e&&n.removeCue(i)},qo=function(e){Object.defineProperties(e.frame,{id:{get:function(){return Be.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Be.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Be.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},Ho=function(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e},Vo=function(e,t,n){var r=rt.a.WebKitDataCue||rt.a.VTTCue;if(t&&t.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),n){var i=Ho(e.mediaSource_.duration);if(n.forEach(function(e){var t=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var n=new r(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,qo(n),this.metadataTrack_.addCue(n)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var a=e.metadataTrack_.cues,o=[],s=0;s<a.length;s++)a[s]&&o.push(a[s]);var c=o.reduce(function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e},{}),u=Object.keys(c).sort(function(e,t){return Number(e)-Number(t)});u.forEach(function(e,t){var n=c[e],r=Number(u[t+1])||i;n.forEach(function(e){e.endTime=r})})}}},zo="undefined"!=typeof window?window:{},Wo="undefined"==typeof Symbol?"__target":Symbol(),Go="application/javascript",Yo=zo.BlobBuilder||zo.WebKitBlobBuilder||zo.MozBlobBuilder||zo.MSBlobBuilder,Qo=zo.URL||zo.webkitURL||Qo&&Qo.msURL,Xo=zo.Worker;if(Xo){var Jo,Ko=He("self.onmessage = function () {}"),Zo=new Uint8Array(1);try{Jo=new Xo(Ko),Jo.postMessage(Zo,[Zo.buffer])}catch(e){Xo=null}finally{Qo.revokeObjectURL(Ko),Jo&&Jo.terminate()}}var es=new qe("./transmuxer-worker.worker.js",function(e,t){var n=this;!function(){var e,t,r,i,a,o,s,c,u,l,d,f,h,p,v,g,m,y,b,_,w,S,k,T,C,x,E,P,$,A,O,I,R,L,j,D,N=Math.pow(2,32)-1;!function(){var e;if(k={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in k)k.hasOwnProperty(e)&&(k[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);T=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),x=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),C=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),$={video:E,audio:P},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0]),R=new Uint8Array([0,0,0,0,0,0,0,0]),L=R,j=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),D=R,A=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),e=function(e){var t,n,r,i=[],a=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)a+=i[t].byteLength;for(n=new Uint8Array(a+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength),r.setUint32(0,n.byteLength),n.set(e,4),t=0,a=8;t<i.length;t++)n.set(i[t],a),a+=i[t].byteLength;return n},t=function(){return e(k.dinf,e(k.dref,I))},r=function(t){return e(k.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},i=function(){return e(k.ftyp,T,C,T,x)},g=function(t){return e(k.hdlr,$[t])},a=function(t){return e(k.mdat,t)},v=function(t){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(n[12]=t.samplerate>>>24&255,n[13]=t.samplerate>>>16&255,n[14]=t.samplerate>>>8&255,n[15]=255&t.samplerate),e(k.mdhd,n)},p=function(t){return e(k.mdia,v(t),g(t.type),s(t))},o=function(t){return e(k.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},s=function(n){return e(k.minf,"video"===n.type?e(k.vmhd,A):e(k.smhd,O),t(),y(n))},c=function(t,n){for(var r=[],i=n.length;i--;)r[i]=_(n[i]);return e.apply(null,[k.moof,o(t)].concat(r))},u=function(t){for(var n=t.length,r=[];n--;)r[n]=f(t[n]);return e.apply(null,[k.moov,d(4294967295)].concat(r).concat(l(t)))},l=function(t){for(var n=t.length,r=[];n--;)r[n]=w(t[n]);return e.apply(null,[k.mvex].concat(r))},d=function(t){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e(k.mvhd,n)},m=function(t){var n,r,i=t.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e(k.sdtp,a)},y=function(t){return e(k.stbl,b(t),e(k.stts,D),e(k.stsc,L),e(k.stsz,j),e(k.stco,R))},function(){var t,n;b=function(r){return e(k.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===r.type?t(r):n(r))},t=function(t){var n,r=t.sps||[],i=t.pps||[],a=[],o=[];for(n=0;n<r.length;n++)a.push((65280&r[n].byteLength)>>>8),a.push(255&r[n].byteLength),a=a.concat(Array.prototype.slice.call(r[n]));for(n=0;n<i.length;n++)o.push((65280&i[n].byteLength)>>>8),o.push(255&i[n].byteLength),o=o.concat(Array.prototype.slice.call(i[n]));return e(k.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e(k.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([r.length]).concat(a).concat([i.length]).concat(o))),e(k.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},n=function(t){return e(k.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),r(t))}}(),h=function(t){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return e(k.tkhd,n)},_=function(t){var n,r,i,a,o,s,c;return n=e(k.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(t.baseMediaDecodeTime/(N+1)),c=Math.floor(t.baseMediaDecodeTime%(N+1)),r=e(k.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,c>>>24&255,c>>>16&255,c>>>8&255,255&c])),o=92,"audio"===t.type?(i=S(t,o),e(k.traf,n,r,i)):(a=m(t),i=S(t,a.length+o),e(k.traf,n,r,i,a))},f=function(t){return t.duration=t.duration||4294967295,e(k.trak,h(t),p(t))},w=function(t){var n=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(n[n.length-1]=0),e(k.trex,n)},function(){var t,n,r;r=function(e,t){var n=0,r=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},n=function(t,n){var i,a,o,s;for(a=t.samples||[],n+=20+16*a.length,i=r(a,n),s=0;s<a.length;s++)o=a[s],i=i.concat([(4278190080&o.duration)>>>24,(16711680&o.duration)>>>16,(65280&o.duration)>>>8,255&o.duration,(4278190080&o.size)>>>24,(16711680&o.size)>>>16,(65280&o.size)>>>8,255&o.size,o.flags.isLeading<<2|o.flags.dependsOn,o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,61440&o.flags.degradationPriority,15&o.flags.degradationPriority,(4278190080&o.compositionTimeOffset)>>>24,(16711680&o.compositionTimeOffset)>>>16,(65280&o.compositionTimeOffset)>>>8,255&o.compositionTimeOffset]);return e(k.trun,new Uint8Array(i))},t=function(t,n){var i,a,o,s;for(a=t.samples||[],n+=20+8*a.length,i=r(a,n),s=0;s<a.length;s++)o=a[s],i=i.concat([(4278190080&o.duration)>>>24,(16711680&o.duration)>>>16,(65280&o.duration)>>>8,255&o.duration,(4278190080&o.size)>>>24,(16711680&o.size)>>>16,(65280&o.size)>>>8,255&o.size]);return e(k.trun,new Uint8Array(i))},S=function(e,r){return"audio"===e.type?t(e,r):n(e,r)}}();var U,M,F,B,q,H={ftyp:i,mdat:a,moof:c,moov:u,initSegment:function(e){var t,n=i(),r=u(e);return t=new Uint8Array(n.byteLength+r.byteLength),t.set(n),t.set(r,n.byteLength),t}},V=function(e){return e>>>0},z={toUnsigned:V},W=z.toUnsigned;U=function(e,t){var n,r,i,a,o,s=[];if(!t.length)return null;for(n=0;n<e.byteLength;)r=W(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),i=M(e.subarray(n+4,n+8)),a=r>1?n+r:e.byteLength,i===t[0]&&(1===t.length?s.push(e.subarray(n+8,a)):(o=U(e.subarray(n+8,a),t.slice(1)),o.length&&(s=s.concat(o)))),n=a;return s},M=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},F=function(e){var t={};return U(e,["moov","trak"]).reduce(function(e,t){var n,r,i,a,o;return(n=U(t,["tkhd"])[0])?(r=n[0],i=0===r?12:20,a=W(n[i]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3]),(o=U(t,["mdia","mdhd"])[0])?(r=o[0],i=0===r?12:20,e[a]=W(o[i]<<24|o[i+1]<<16|o[i+2]<<8|o[i+3]),e):null):null},t)},B=function(e,t){var n,r,i;return n=U(t,["moof","traf"]),r=[].concat.apply([],n.map(function(t){return U(t,["tfhd"]).map(function(n){var r,i,a;return r=W(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),i=e[r]||9e4,a=U(t,["tfdt"]).map(function(e){var t,n;return t=e[0],n=W(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=W(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n})[0],(a=a||1/0)/i})})),i=Math.min.apply(null,r),isFinite(i)?i:0},q=function(e){var t=U(e,["moov","trak"]),n=[];return t.forEach(function(e){var t=U(e,["mdia","hdlr"]),r=U(e,["tkhd"]);t.forEach(function(e,t){var i,a,o,s=M(e.subarray(8,12)),c=r[t];"vide"===s&&(i=new DataView(c.buffer,c.byteOffset,c.byteLength),a=i.getUint8(0),o=0===a?i.getUint32(12):i.getUint32(20),n.push(o))})}),n};var G={findBox:U,parseType:M,timescale:F,startTime:B,videoTrackIds:q},Y=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,a;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){e={}}}};Y.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},Y.prototype.push=function(e){this.trigger("data",e)},Y.prototype.flush=function(e){this.trigger("done",e)};var Q,X,J,K,Z,ee,te=Y,ne=function(e){var t,n,r=[],i=[];for(r.byteLength=0,t=0;t<e.length;t++)n=e[t],"access_unit_delimiter_rbsp"===n.nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.push(r)),r=[n],r.byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.push(r),i},re=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)n=e[t],n.keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),r=[n],r.nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i},ie=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ae=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},oe=function(e,t){var n=ae();return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},se=function(e,t){var n,r,i,a,o,s=t||0,c=[];for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++)o=a[r],i=oe(o,s),s+=i.size,c.push(i);return c},ce=function(e){var t,n,r,i,a,o,s=0,c=e.byteLength,u=e.nalCount,l=c+4*u,d=new Uint8Array(l),f=new DataView(d.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)o=a[r],f.setUint32(s,o.data.byteLength),s+=4,d.set(o.data,s),s+=o.data.byteLength;return d},ue={groupNalsIntoFrames:ne,groupFramesIntoGops:re,extendFirstKeyFrame:ie,generateSampleTable:se,concatenateNalData:ce},le=[33,16,5,32,164,27],de=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],fe=function(e){for(var t=[];e--;)t.push(0);return t},he=function(e){return Object.keys(e).reduce(function(t,n){return t[n]=new Uint8Array(e[n].reduce(function(e,t){return e.concat(t)},[])),t},{})},pe={96e3:[le,[227,64],fe(154),[56]],88200:[le,[231],fe(170),[56]],64e3:[le,[248,192],fe(240),[56]],48e3:[le,[255,192],fe(268),[55,148,128],fe(54),[112]],44100:[le,[255,192],fe(268),[55,163,128],fe(84),[112]],32e3:[le,[255,192],fe(268),[55,234],fe(226),[112]],24e3:[le,[255,192],fe(268),[55,255,128],fe(268),[111,112],fe(126),[224]],16e3:[le,[255,192],fe(268),[55,255,128],fe(268),[111,255],fe(269),[223,108],fe(195),[1,192]],12e3:[de,fe(268),[3,127,248],fe(268),[6,255,240],fe(268),[13,255,224],fe(268),[27,253,128],fe(259),[56]],11025:[de,fe(268),[3,127,248],fe(268),[6,255,240],fe(268),[13,255,224],fe(268),[27,255,192],fe(268),[55,175,128],fe(108),[112]],8e3:[de,fe(268),[3,121,16],fe(47),[7]]},ve=he(pe),ge=9e4;Q=function(e){return e*ge},X=function(e,t){return e*t},J=function(e){return e/ge},K=function(e,t){return e/t},Z=function(e,t){return Q(K(e,t))},ee=function(e,t){return X(J(e),t)};var me={secondsToVideoTs:Q,secondsToAudioTs:X,videoTsToSeconds:J,audioTsToSeconds:K,audioTsToVideoTs:Z,videoTsToAudioTs:ee},ye=9e4,be=function(e){var t,n,r=0;for(t=0;t<e.length;t++)n=e[t],r+=n.data.byteLength;return r},_e=function(e,t,n,r){var i,a,o,s=0,c=0,u=0,l=0;if(t.length&&(i=me.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),s=Math.ceil(ye/(e.samplerate/1024)),n&&r&&(c=i-Math.max(n,r),u=Math.floor(c/s),l=u*s),!(u<1||l>ye/2))){for(a=ve[e.samplerate],a||(a=t[0].data),o=0;o<u;o++)t.splice(o,0,{data:a});e.baseMediaDecodeTime-=Math.floor(me.videoTsToAudioTs(l,e.samplerate))}},we=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},Se=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r},ke=function(e){var t,n,r=0,i=new Uint8Array(be(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i},Te={prefixWithSilence:_e,trimAdtsFramesByEarliestDts:we,generateSampleTable:Se,concatenateFrameData:ke},Ce=9e4,xe=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Ee=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Pe=function(e,t){var n,r,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(r=e.samplerate/Ce,n*=r,n=Math.floor(n)),n},$e={clearDtsInfo:Ee,calculateTrackBaseMediaDecodeTime:Pe,collectDtsInfo:xe},Ae=4,Oe=128,Ie=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&e[t]!==Oe;){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&r===Ae){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}t+=i,r=0,i=0}return n},Re=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Le=function(e,t){var n,r,i,a,o=[];if(!(64&t[0]))return o;for(r=31&t[0],n=0;n<r;n++)i=3*n,a={type:3&t[i+2],pts:e},4&t[i+2]&&(a.ccData=t[i+3]<<8|t[i+4],o.push(a));return o},je=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},De={parseSei:Ie,parseUserData:Re,parseCaptionPackets:Le,discardEmulationPreventionBytes:je,USER_DATA_REGISTERED_ITU_T_T35:Ae},Ne=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new He(0,0),new He(0,1),new He(1,0),new He(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};Ne.prototype=new te,Ne.prototype.push=function(e){var t,n,r;if("sei_rbsp"===e.nalUnitType&&(t=De.parseSei(e.escapedRBSP),t.payloadType===De.USER_DATA_REGISTERED_ITU_T_T35&&(n=De.parseUserData(t)))){if(e.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return void(--this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=De.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Ne.prototype.flush=function(){if(!this.captionPackets_.length)return void this.ccStreams_.forEach(function(e){e.flush()},this);this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)},Ne.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},Ne.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Ne.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},Ne.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};var Ue={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Me=function(e){return null===e?"":(e=Ue[e]||e,String.fromCharCode(e))},Fe=14,Be=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],qe=function(){for(var e=[],t=Fe+1;t--;)e.push("");return e},He=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,a;if((t=32639&e.ccData)===this.lastControlCode_)return void(this.lastControlCode_=null);if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=qe();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=qe();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=qe()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(r,i))r=(3&r)<<8,a=Me(r|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),r=(3&r)<<8,a=Me(r|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var o=Be.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=Me(r),a+=Me(i),this[this.mode_](e.pts,a),this.column_+=a.length)}};He.prototype=new te,He.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},He.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=qe(),this.nonDisplayed_=qe(),this.lastControlCode_=null,this.column_=0,this.row_=Fe,this.rollUpRows_=2,this.formatting_=[]},He.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},He.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},He.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},He.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},He.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},He.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},He.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},He.prototype.isNormalChar=function(e){return e>=32&&e<=127},He.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=Fe,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=qe(),this.displayed_=qe()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},He.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},He.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},He.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},He.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},He.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<Fe+1;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},He.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var Ve={CaptionStream:Ne,Cea608Stream:He},ze={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},We=8589934592,Ge=4294967296,Ye=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>Ge;)e+=n*We;return e},Qe=function e(t){var n,r;e.prototype.init.call(this),this.type_=t,this.push=function(e){e.type===this.type_&&(void 0===r&&(r=e.dts),e.dts=Ye(e.dts,r),e.pts=Ye(e.pts,r),n=e.dts,this.trigger("data",e))},this.flush=function(){r=n,this.trigger("done")},this.discontinuity=function(){r=void 0,n=void 0}};Qe.prototype=new te;var Xe,Je={TimestampRolloverStream:Qe,handleRollover:Ye},Ke=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},Ze=function(e,t,n){return decodeURIComponent(Ke(e,t,n))},et=function(e,t,n){return unescape(Ke(e,t,n))},tt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},nt={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ze(e.data,1,t),e.value=Ze(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ze(e.data,1,t),e.url=Ze(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=et(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};Xe=function(e){var t,n={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},r=0,i=[],a=0;if(Xe.prototype.init.call(this),this.dispatchType=ze.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,o,s,c,u,l;if("timed-metadata"===e.type){if(e.dataAlignmentIndicator&&(a=0,i.length=0),0===i.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))return void(n.debug&&console.log("Skipping unrecognized metadata packet"));if(i.push(e),a+=e.data.byteLength,1===i.length&&(r=tt(e.data.subarray(6,10)),r+=10),!(a<r)){for(t={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts},u=0;u<r;)t.data.set(i[0].data.subarray(0,r-u),u),u+=i[0].data.byteLength,a-=i[0].data.byteLength,i.shift();o=10,64&t.data[5]&&(o+=4,o+=tt(t.data.subarray(10,14)),r-=tt(t.data.subarray(16,20)));do{if((s=tt(t.data.subarray(o+4,o+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(l=String.fromCharCode(t.data[o],t.data[o+1],t.data[o+2],t.data[o+3]),c={id:l,data:t.data.subarray(o+10,o+s+10)},c.key=c.id,nt[c.id]&&(nt[c.id](c),"com.apple.streaming.transportStreamTimestamp"===c.owner)){var d=c.data,f=(1&d[3])<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;f*=4,f+=3&d[7],c.timeStamp=f,void 0===t.pts&&void 0===t.dts&&(t.pts=c.timeStamp,t.dts=c.timeStamp),this.trigger("timestamp",c)}t.frames.push(c),o+=10,o+=s}while(o<r);this.trigger("data",t)}}}},Xe.prototype=new te;var rt,it,at,ot=Xe,st=Je.TimestampRolloverStream,ct=188,ut=71;rt=function(){var e=new Uint8Array(ct),t=0;rt.prototype.init.call(this),this.push=function(n){var r,i=0,a=ct;for(t?(r=new Uint8Array(n.byteLength+t),r.set(e.subarray(0,t)),r.set(n,t),t=0):r=n;a<r.byteLength;)r[i]!==ut||r[a]!==ut?(i++,a++):(this.trigger("data",r.subarray(i,a)),i+=ct,a+=ct);i<r.byteLength&&(e.set(r.subarray(i),0),t=r.byteLength-i)},this.flush=function(){t===ct&&e[0]===ut&&(this.trigger("data",e),t=0),this.trigger("done")}},rt.prototype=new te,it=function(){var e,t,n,r;it.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var i=0;r.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===r.type?t(e.subarray(i),r):n(e.subarray(i),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i,a,o;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=(15&e[1])<<8|e[2],i=3+n-4,a=(15&e[10])<<8|e[11],o=12+a;o<i;){var s=e[o],c=(31&e[o+1])<<8|e[o+2];s===ze.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=c:s===ze.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=c:s===ze.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][c]=s),o+=5+((15&e[o+3])<<8|e[o+4])}t.programMapTable=r.programMapTable}},this.push=function(t){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid)n.type="pat",e(t.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=ze.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=ze.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},it.prototype=new te,it.STREAM_TYPES={h264:27,adts:15},at=function(){var e=this,t={data:[],size:0},n={data:[],size:0},r={data:[],size:0},i=function(e,t){var n;t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),n=e[7],192&n&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])},a=function(t,n,r){var a,o=new Uint8Array(t.size),s={type:n},c=0,u=0,l=!1;if(t.data.length&&!(t.size<9)){for(s.trackId=t.data[0].pid,c=0;c<t.data.length;c++)a=t.data[c],o.set(a.data,u),u+=a.data.byteLength;i(o,s),l="video"===n||s.packetLength<=t.size,(r||l)&&(t.size=0,t.data.length=0),l&&e.trigger("data",s)}};at.prototype.init.call(this),this.push=function(i){({pat:function(){},pes:function(){var e,o;switch(i.streamType){case ze.H264_STREAM_TYPE:case ze.H264_STREAM_TYPE:e=t,o="video";break;case ze.ADTS_STREAM_TYPE:e=n,o="audio";break;case ze.METADATA_STREAM_TYPE:e=r,o="timed-metadata";break;default:return}i.payloadUnitStartIndicator&&a(e,o,!0),e.data.push(i),e.size+=i.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},n=i.programMapTable;null!==n.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.video,codec:"avc",type:"video"}),null!==n.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.audio,codec:"adts",type:"audio"}),e.trigger("data",t)}})[i.type]()},this.flush=function(){a(t,"video"),a(n,"audio"),a(r,"timed-metadata"),this.trigger("done")}},at.prototype=new te;var lt={PAT_PID:0,MP2T_PACKET_LENGTH:ct,TransportPacketStream:rt,TransportParseStream:it,ElementaryStream:at,TimestampRolloverStream:st,CaptionStream:Ve.CaptionStream,Cea608Stream:Ve.Cea608Stream,MetadataStream:ot};for(var dt in ze)ze.hasOwnProperty(dt)&&(lt[dt]=ze[dt]);var ft,ht=lt,pt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ft=function(){var e;ft.prototype.init.call(this),this.push=function(t){var n,r,i,a,o,s,c=0,u=0;if("audio"===t.type)for(e?(a=e,e=new Uint8Array(a.byteLength+t.data.byteLength),e.set(a),e.set(t.data,a.byteLength)):e=t.data;c+5<e.length;)if(255===e[c]&&240==(246&e[c+1])){if(r=2*(1&~e[c+1]),n=(3&e[c+3])<<11|e[c+4]<<3|(224&e[c+5])>>5,o=1024*(1+(3&e[c+6])),s=9e4*o/pt[(60&e[c+2])>>>2],i=c+n,e.byteLength<i)return;if(this.trigger("data",{pts:t.pts+u*s,dts:t.dts+u*s,sampleCount:o,audioobjecttype:1+(e[c+2]>>>6&3),channelcount:(1&e[c+2])<<2|(192&e[c+3])>>>6,samplerate:pt[(60&e[c+2])>>>2],samplingfrequencyindex:(60&e[c+2])>>>2,samplesize:16,data:e.subarray(c+7+r,i)}),e.byteLength===i)return void(e=void 0);u++,e=e.subarray(i)}else c++},this.flush=function(){this.trigger("done")}},ft.prototype=new te;var vt,gt=ft;vt=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,a=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");a.set(e.subarray(i,i+o)),n=new DataView(a.buffer).getUint32(0),r=8*o,t-=o},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,i=Math.floor(e/8),e-=8*i,t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),a=n>>>32-i;return r-=i,r>0?n<<=i:t>0&&this.loadWord(),i=e-i,i>0?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(0!=(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var mt,yt,bt,_t=vt;yt=function(){var e,t,n=0;yt.prototype.init.call(this),this.push=function(r){var i;for(t?(i=new Uint8Array(t.byteLength+r.data.byteLength),i.set(t),i.set(r.data,t.byteLength),t=i):t=r.data;n<t.byteLength-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<t.byteLength;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<t.length);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")}},yt.prototype=new te,bt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},mt=function(){var e,t,n,r,i,a,o,s=new yt;mt.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,r=e.dts,s.push(e))},s.on("data",function(o){var s={trackId:t,pts:n,dts:r,data:o};switch(31&o[0]){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=i(o.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=i(o.subarray(1)),s.config=a(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",s)}),s.on("done",function(){e.trigger("done")}),this.flush=function(){s.flush()},o=function(e,t){var n,r,i=8,a=8;for(n=0;n<e;n++)0!==a&&(r=t.readExpGolomb(),a=(i+r+256)%256),i=0===a?i:a},i=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},a=function(e){var t,n,r,i,a,s,c,u,l,d,f,h,p,v=0,g=0,m=0,y=0,b=1;if(t=new _t(e),n=t.readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),bt[n]&&(a=t.readUnsignedExpGolomb(),3===a&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(f=3!==a?8:12,p=0;p<f;p++)t.readBoolean()&&(p<6?o(16,t):o(64,t));if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),c=t.readUnsignedExpGolomb(),p=0;p<c;p++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),d=t.readBits(1),0===d&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(v=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}h&&(b=h[0]/h[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:Math.ceil((16*(u+1)-2*v-2*g)*b),height:(2-d)*(l+1)*16-2*m-2*y}}},mt.prototype=new te;var wt,St={H264Stream:mt,NalByteStream:yt},kt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Tt=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},Ct=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},xt=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},Et=function(e,t,n){return unescape(xt(e,t,n))},Pt=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},$t=function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},At=function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},Ot=function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return kt[(60&e[t+2])>>>2];t++}return null},It=function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=Ct(e.subarray(10,14)));do{if((n=Ct(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var i=0;i<r.byteLength;i++)if(0===r[i]){var a=Et(r,0,i);if("com.apple.streaming.transportStreamTimestamp"===a){var o=r.subarray(i+1),s=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return s*=4,s+=3&o[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null},Rt={isLikelyAacData:Tt,parseId3TagSize:Pt,parseAdtsSize:$t,parseType:At,parseSampleRate:Ot,parseAacTimestamp:It};wt=function(){var e=new Uint8Array,t=0;wt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var r,i,a,o,s=0,c=0;for(e.length?(o=e.length,e=new Uint8Array(n.byteLength+o),e.set(e.subarray(0,o)),e.set(n,o)):e=n;e.length-c>=3;)if(e[c]!=="I".charCodeAt(0)||e[c+1]!=="D".charCodeAt(0)||e[c+2]!=="3".charCodeAt(0))if(255!=(255&e[c])||240!=(240&e[c+1]))c++;else{if(e.length-c<7)break;if(s=Rt.parseAdtsSize(e,c),c+s>e.length)break;a={type:"audio",data:e.subarray(c,c+s),pts:t,dts:t},this.trigger("data",a),c+=s}else{if(e.length-c<10)break;if(s=Rt.parseId3TagSize(e,c),c+s>e.length)break;i={type:"timed-metadata",data:e.subarray(c,c+s)},this.trigger("data",i),c+=s}r=e.length-c,e=r>0?e.subarray(c):new Uint8Array}},wt.prototype=new te;var Lt,jt,Dt,Nt,Ut=wt,Mt=St.H264Stream,Ft=Rt.isLikelyAacData,Bt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],qt=["width","height","profileIdc","levelIdc","profileCompatibility"],Ht=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0};jt=function(e,t){var n=[],r=0,i=0,a=0,o=1/0;t=t||{},jt.prototype.init.call(this),this.push=function(t){$e.collectDtsInfo(e,t),e&&Bt.forEach(function(n){e[n]=t[n]}),n.push(t)},this.setEarliestDts=function(t){i=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var s,c,u,l;if(0===n.length)return void this.trigger("done","AudioSegmentStream");s=Te.trimAdtsFramesByEarliestDts(n,e,i),e.baseMediaDecodeTime=$e.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),Te.prefixWithSilence(e,s,a,o),e.samples=Te.generateSampleTable(s),u=H.mdat(Te.concatenateFrameData(s)),n=[],c=H.moof(r,[e]),l=new Uint8Array(c.byteLength+u.byteLength),r++,l.set(c),l.set(u,c.byteLength),$e.clearDtsInfo(e),this.trigger("data",{track:e,boxes:l}),this.trigger("done","AudioSegmentStream")}},jt.prototype=new te,Lt=function(e,t){var n,r,i=0,a=[],o=[];t=t||{},Lt.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){$e.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],qt.forEach(function(t){e[t]=n[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var n,r,s,c,u,l;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=ue.groupNalsIntoFrames(a),s=ue.groupFramesIntoGops(n),s[0][0].keyFrame||(r=this.getGopForFusion_(a[0],e),r?(s.unshift(r),s.byteLength+=r.byteLength,s.nalCount+=r.nalCount,s.pts=r.pts,s.dts=r.dts,s.duration+=r.duration):s=ue.extendFirstKeyFrame(s)),o.length){var d;if(!(d=t.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");$e.clearDtsInfo(e),s=d}$e.collectDtsInfo(e,s),e.samples=ue.generateSampleTable(s),u=H.mdat(ue.concatenateNalData(s)),e.baseMediaDecodeTime=$e.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),c=H.moof(i,[e]),l=new Uint8Array(c.byteLength+u.byteLength),i++,l.set(c),l.set(u,c.byteLength),this.trigger("data",{track:e,boxes:l}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){$e.clearDtsInfo(e),n=void 0,r=void 0},this.getGopForFusion_=function(t){var n,r,i,a,o,s=45e3,c=1e4,u=1/0;for(o=0;o<this.gopCache_.length;o++)a=this.gopCache_[o],i=a.gop,e.pps&&Ht(e.pps[0],a.pps[0])&&e.sps&&Ht(e.sps[0],a.sps[0])&&(i.dts<e.timelineStartInfo.dts||(n=t.dts-i.dts-i.duration)>=-c&&n<=s&&(!r||u>n)&&(r=a,u=n));return r?r.gop:null},this.alignGopsAtStart_=function(e){var t,n,r,i,a,s,c,u;for(a=e.byteLength,s=e.nalCount,c=e.duration,t=n=0;t<o.length&&n<e.length&&(r=o[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,a-=i.byteLength,s-=i.nalCount,c-=i.duration);return 0===n?e:n===e.length?null:(u=e.slice(n),u.byteLength=a,u.duration=c,u.nalCount=s,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,r,i,a,s;for(t=o.length-1,n=e.length-1,a=null,s=!1;t>=0&&n>=0;){if(r=o[t],i=e[n],r.pts===i.pts){s=!0;break}r.pts>i.pts?t--:(t===o.length-1&&(a=n),n--)}if(!s&&null===a)return null;var c;if(0===(c=s?n:a))return e;var u=e.slice(c),l=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=l.byteLength,u.duration=l.duration,u.nalCount=l.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){o=e}},Lt.prototype=new te,Nt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,e=e||{},void 0!==e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps&&(this.keepOriginalTimestamps=e.keepOriginalTimestamps),this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Nt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}},Nt.prototype=new te,Nt.prototype.flush=function(e){var t,n,r,i,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return void(++this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,qt.forEach(function(e){o.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,Bt.forEach(function(e){o.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,r=H.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(r.byteLength),o.initSegment.set(r),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)t=this.pendingCaptions[i],t.startTime=t.startPts,this.keepOriginalTimestamps||(t.startTime-=s),t.startTime/=9e4,t.endTime=t.endPts,this.keepOriginalTimestamps||(t.endTime-=s),t.endTime/=9e4,o.captionStreams[t.stream]=!0,o.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)n=this.pendingMetadata[i],n.cueTime=n.pts,this.keepOriginalTimestamps||(n.cueTime-=s),n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Dt=function(e){var t,n,r=this,i=!0;Dt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="aac",t.metadataStream=new ht.MetadataStream,t.aacStream=new Ut,t.audioTimestampRolloverStream=new ht.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new ht.TimestampRolloverStream("timed-metadata"),t.adtsStream=new gt,t.coalesceStream=new Nt(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(i){"timed-metadata"!==i.type||t.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new jt(n,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new ht.MetadataStream,i.packetStream=new ht.TransportPacketStream,i.parseStream=new ht.TransportParseStream,i.elementaryStream=new ht.ElementaryStream,i.videoTimestampRolloverStream=new ht.TimestampRolloverStream("video"),i.audioTimestampRolloverStream=new ht.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new ht.TimestampRolloverStream("timed-metadata"),i.adtsStream=new gt,i.h264Stream=new Mt,i.captionStream=new ht.CaptionStream,i.coalesceStream=new Nt(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream),i.elementaryStream.pipe(i.videoTimestampRolloverStream).pipe(i.h264Stream),i.elementaryStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.elementaryStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(a){var o;if("metadata"===a.type){for(o=a.tracks.length;o--;)t||"video"!==a.tracks[o].type?n||"audio"!==a.tracks[o].type||(n=a.tracks[o],n.timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(t=a.tracks[o],t.timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime);t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new Lt(t,e),i.videoSegmentStream.on("timelineStartInfo",function(e){n&&(n.timelineStartInfo=e,i.audioSegmentStream.setEarliestDts(e.dts))}),i.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",function(e){n&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),n&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new jt(n,e),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream))}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(r){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=r),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,$e.clearDtsInfo(n),e.keepOriginalTimestamps||(n.timelineStartInfo.baseMediaDecodeTime=r),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[],i.videoTimestampRolloverStream.discontinuity()),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,$e.clearDtsInfo(t),i.captionStream.reset(),e.keepOriginalTimestamps||(t.timelineStartInfo.baseMediaDecodeTime=r)),i.timedMetadataTimestampRolloverStream&&i.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(i){var t=Ft(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Dt.prototype=new te;var Vt,zt,Wt={Transmuxer:Dt,VideoSegmentStream:Lt,AudioSegmentStream:jt,AUDIO_PROPERTIES:Bt,VIDEO_PROPERTIES:qt},Gt=G.parseType,Yt=function(e){return new Date(1e3*e-20828448e5)},Qt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Xt=function(e){var t,n,r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=[];for(t=0;t+4<e.length;t+=n)if(n=r.getUint32(t),t+=4,n<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+e[t]&31)}return i},Jt={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:Vt(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,r,i,a=new DataView(e.buffer,e.byteOffset,e.byteLength),o={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},s=31&e[5];for(r=6,i=0;i<s;i++)n=a.getUint16(r),r+=2,o.sps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;for(t=e[r],r++,i=0;i<t;i++)n=a.getUint16(r),r+=2,o.pps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;return o},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:Gt(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},r=8;r<e.byteLength;)n.compatibleBrands.push(Gt(e.subarray(r,r+4))),r+=4;return n},dinf:function(e){return{boxes:Vt(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:Vt(e.subarray(8))}},hdlr:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:Gt(e.subarray(8,12)),name:""},r=8;for(r=24;r<e.byteLength;r++){if(0===e[r]){r++;break}n.name+=String.fromCharCode(e[r])}return n.name=decodeURIComponent(escape(n.name)),n},mdat:function(e){return{byteLength:e.byteLength,nals:Xt(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===i.version?(r+=4,i.creationTime=Yt(n.getUint32(r)),r+=8,i.modificationTime=Yt(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=8,i.duration=n.getUint32(r)):(i.creationTime=Yt(n.getUint32(r)),r+=4,i.modificationTime=Yt(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=4,i.duration=n.getUint32(r)),r+=4,t=n.getUint16(r),i.language+=String.fromCharCode(96+(t>>10)),i.language+=String.fromCharCode(96+((992&t)>>5)),i.language+=String.fromCharCode(96+(31&t)),i},mdia:function(e){return{boxes:Vt(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:Vt(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(n.streamDescriptor=Vt(e.subarray(28))[0]),n},moof:function(e){return{boxes:Vt(e)}},moov:function(e){return{boxes:Vt(e)}},mvex:function(e){return{boxes:Vt(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=Yt(t.getUint32(n)),n+=8,r.modificationTime=Yt(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=8,r.duration=t.getUint32(n)):(r.creationTime=Yt(t.getUint32(n)),n+=4,r.modificationTime=Yt(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=4,r.duration=t.getUint32(n)),n+=4,r.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,r.nextTrackId=t.getUint32(n),r},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},i=n.getUint16(22);for(t=24;i;t+=12,i--)r.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return r},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:Vt(e)}},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},i=n.getUint32(4);for(t=8;i;t+=4,i--)r.chunkOffsets.push(n.getUint32(t));return r},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=n.getUint32(4),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;r;t+=12,r--)i.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return i},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:Vt(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)r.entries.push(n.getUint32(t));return r},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},i=n.getUint32(4);for(t=8;i;t+=8,i--)r.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return r},styp:function(e){return Jt.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],o=8&r.flags[2],s=16&r.flags[2],c=32&r.flags[2],u=65536&r.flags[0],l=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),a&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(r.defaultSampleDuration=n.getUint32(t),t+=4),s&&(r.defaultSampleSize=n.getUint32(t),t+=4),c&&(r.defaultSampleFlags=n.getUint32(t)),u&&(r.durationIsEmpty=!0),!i&&l&&(r.baseDataOffsetIsMoof=!0),r},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=Yt(t.getUint32(n)),n+=8,r.modificationTime=Yt(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=8,r.duration=t.getUint32(n)):(r.creationTime=Yt(t.getUint32(n)),n+=4,r.modificationTime=Yt(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=4,r.duration=t.getUint32(n)),n+=4,n+=8,r.layer=t.getUint16(n),n+=2,r.alternateGroup=t.getUint16(n),n+=2,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,r.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,r.height=t.getUint16(n)+t.getUint16(n+2)/16,r},traf:function(e){return{boxes:Vt(e)}},trak:function(e){return{boxes:Vt(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],s=2&n.flags[1],c=4&n.flags[1],u=8&n.flags[1],l=r.getUint32(4),d=8;for(i&&(n.dataOffset=r.getInt32(d),d+=4),a&&l&&(t={flags:Qt(e.subarray(d,d+4))},d+=4,o&&(t.duration=r.getUint32(d),d+=4),s&&(t.size=r.getUint32(d),d+=4),u&&(t.compositionTimeOffset=r.getUint32(d),d+=4),n.samples.push(t),l--);l--;)t={},o&&(t.duration=r.getUint32(d),d+=4),s&&(t.size=r.getUint32(d),d+=4),c&&(t.flags=Qt(e.subarray(d,d+4)),d+=4),u&&(t.compositionTimeOffset=r.getUint32(d),d+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};Vt=function(e){for(var t,n,r,i,a,o=0,s=[],c=new ArrayBuffer(e.length),u=new Uint8Array(c),l=0;l<e.length;++l)u[l]=e[l];for(t=new DataView(c);o<e.byteLength;)n=t.getUint32(o),r=Gt(e.subarray(o+4,o+8)),i=n>1?o+n:e.byteLength,a=(Jt[r]||function(e){return{data:e}})(e.subarray(o+8,i)),a.size=n,a.type=r,s.push(a),o=i;return s},zt=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map(function(e,r){return n+e.type+"\n"+Object.keys(e).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(t){var r=n+"  "+t+": ",i=e[t];if(i instanceof Uint8Array||i instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return a?1===a.length?r+"<"+a.join("").slice(1)+">":r+"<\n"+a.map(function(e){return n+"  "+e}).join("\n")+"\n"+n+"  >":r+"<>"}return r+JSON.stringify(i,null,2).split("\n").map(function(e,t){return 0===t?e:n+"  "+e}).join("\n")}).join("\n")+(e.boxes?"\n"+zt(e.boxes,t+1):"")}).join("\n")};var Kt={inspect:Vt,textify:zt,parseTfdt:Jt.tfdt,parseHdlr:Jt.hdlr,parseTfhd:Jt.tfhd,parseTrun:Jt.trun},Zt=De.discardEmulationPreventionBytes,en=Ve.CaptionStream,tn=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(n<i.size)return i;n-=i.size}return null},nn=function(e,t,n){var r,i,a,o,s=new DataView(e.buffer,e.byteOffset,e.byteLength),c=[];for(i=0;i+4<e.length;i+=a)if(a=s.getUint32(i),i+=4,!(a<=0))switch(31&e[i]){case 6:var u=e.subarray(i+1,i+1+a),l=tn(i,t);r={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:Zt(u),trackId:n},l?(r.pts=l.pts,r.dts=l.dts,o=l):(r.pts=o.pts,r.dts=o.dts),c.push(r)}return c},rn=function(e,t,n){var r=t,i=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,o=n.trackId,s=[];return e.forEach(function(e){var t=Kt.parseTrun(e),n=t.samples;n.forEach(function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=r+e.compositionTimeOffset,r+=e.duration}),s=s.concat(n)}),s},an=function(e,t){var n=G.findBox(e,["moof","traf"]),r=G.findBox(e,["mdat"]),i={},a=[];return r.forEach(function(e,t){var r=n[t];a.push({mdat:e,traf:r})}),a.forEach(function(e){var n,r,a=e.mdat,o=e.traf,s=G.findBox(o,["tfhd"]),c=Kt.parseTfhd(s[0]),u=c.trackId,l=G.findBox(o,["tfdt"]),d=l.length>0?Kt.parseTfdt(l[0]).baseMediaDecodeTime:0,f=G.findBox(o,["trun"]);t===u&&f.length>0&&(n=rn(f,d,c),r=nn(a,n,u),i[u]||(i[u]=[]),i[u]=i[u].concat(r))}),i},on=function(e,t,n){var r;return t?(r=an(e,t),{seiNals:r[t],timescale:n}):null},sn=function(){var e,t,n,r,i,a=!1;this.isInitialized=function(){return a},this.init=function(){e=new en,a=!0,e.on("data",function(e){e.startTime=e.startPts/r,e.endTime=e.endPts/r,i.captions.push(e),i.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(n!==e[0]||r!==t[n])},this.parse=function(e,a,o){var s;if(!this.isInitialized())return null;if(!a||!o)return null;if(this.isNewInit(a,o))n=a[0],r=o[n];else if(!n||!r)return t.push(e),null;for(;t.length>0;){var c=t.shift();this.parse(c,a,o)}return null!==(s=on(e,n,r))&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),i):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;e.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,r=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},cn=sn,un={generator:H,probe:G,Transmuxer:Wt.Transmuxer,AudioSegmentStream:Wt.AudioSegmentStream,VideoSegmentStream:Wt.VideoSegmentStream,CaptionParser:cn},ln=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},dn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),fn=function(e,t){t.on("data",function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var r=t.data;t.data=r.buffer,e.postMessage({action:"data",segment:t,byteOffset:r.byteOffset,byteLength:r.byteLength},[t.data])}),t.captionStream&&t.captionStream.on("data",function(t){e.postMessage({action:"caption",data:t})}),t.on("done",function(t){e.postMessage({action:"done"})}),t.on("gopInfo",function(t){e.postMessage({action:"gopInfo",gopInfo:t})})},hn=function(){function e(t,n){ln(this,e),this.options=n||{},this.self=t,this.init()}return dn(e,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new un.Transmuxer(this.options),fn(this.self,this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),e}();new function(e){e.onmessage=function(t){if("init"===t.data.action&&t.data.options)return void(this.messageHandlers=new hn(e,t.data.options));this.messageHandlers||(this.messageHandlers=new hn(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data)}}(n)}()}),ts={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},ns=function(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})},rs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={codecCount:0},n=void 0;return t.codecCount=e.split(",").length,t.codecCount=t.codecCount||2,n=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(e),n&&(t.videoCodec=n[2],t.videoObjectTypeIndicator=n[3]),t.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),t.audioProfile=t.audioProfile&&t.audioProfile[2],t},is=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return ns([e])[0]})},as=function(e,t,n){return e+"/"+t+'; codecs="'+n.filter(function(e){return!!e}).join(", ")+'"'},os=function(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"},ss=function(e){var t=e.attributes||{};return t.CODECS?rs(t.CODECS):ts},cs=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var r in n){var i=n[r];if(i.default&&i.playlists)return rs(i.playlists[0].attributes.CODECS).audioProfile}return null},us=function(e,t){var n=os(t),r=ss(t),i=t.attributes||{},a=!0,o=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&i.AUDIO){var s=e.mediaGroups.AUDIO[i.AUDIO];if(s){o=!0,a=!1;for(var c in s)if(!s[c].uri&&!s[c].playlists){a=!0;break}}}o&&!r.audioProfile&&(a||(r.audioProfile=cs(e,i.AUDIO)),r.audioProfile||(Be.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),r.audioProfile=ts.audioProfile));var u={};r.videoCodec&&(u.video=""+r.videoCodec+r.videoObjectTypeIndicator),r.audioProfile&&(u.audio="mp4a.40."+r.audioProfile);var l=as("audio",n,[u.audio]),d=as("video",n,[u.video]),f=as("video",n,[u.video,u.audio]);return o?!a&&u.video?[d,l]:a||u.video?[f,l]:[l,l]:u.video?[f]:[l]},ls=function(e){var t={type:"",parameters:{}},n=e.trim().split(";");return t.type=n.shift().trim(),n.forEach(function(e){var n=e.trim().split("=");if(n.length>1){var r=n[0].replace(/"/g,"").trim(),i=n[1].replace(/"/g,"").trim();t.parameters[r]=i}}),t},ds=function(e){return/mp4a\.\d+.\d+/i.test(e)},fs=function(e){return/avc1\.[\da-f]+/i.test(e)},hs=function(e,t,n){if(void 0===t||null===t||!e.length)return[];var r=Math.ceil(9e4*(t-n+3)),i=void 0;for(i=0;i<e.length&&!(e[i].pts>r);i++);return e.slice(i)},ps=function(e,t,n){if(!t.length)return e;if(n)return t.slice();var r=t[0].pts,i=0;for(i;i<e.length&&!(e[i].pts>=r);i++);return e.slice(0,i).concat(t)},vs=function(e,t,n,r){for(var i=Math.ceil(9e4*(t-r)),a=Math.ceil(9e4*(n-r)),o=e.slice(),s=e.length;s--&&!(e[s].pts<=a););if(-1===s)return o;for(var c=s+1;c--&&!(e[c].pts<=i););return c=Math.max(c,0),o.splice(c,s-c+1),o},gs=function(e,t,n){var r=null,i=null,a=0,o=[],s=[];if(!e&&!t)return Be.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(n)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return Be.createTimeRange();for(var c=e.buffered,u=t.buffered,l=c.length;l--;)o.push({time:c.start(l),type:"start"}),o.push({time:c.end(l),type:"end"});for(l=u.length;l--;)o.push({time:u.start(l),type:"start"}),o.push({time:u.end(l),type:"end"});for(o.sort(function(e,t){return e.time-t.time}),l=0;l<o.length;l++)"start"===o[l].type?2===++a&&(r=o[l].time):"end"===o[l].type&&1===--a&&(i=o[l].time),null!==r&&null!==i&&(s.push([r,i]),r=null,i=null);return Be.createTimeRanges(s)},ms=function(e,t){var n=e.addSourceBuffer(t),r=Object.create(null);r.updating=!1,r.realBuffer_=n;var i=function(e){"function"==typeof n[e]?r[e]=function(){return n[e].apply(n,arguments)}:void 0===r[e]&&Object.defineProperty(r,e,{get:function(){return n[e]},set:function(t){return n[e]=t}})};for(var a in n)i(a);return r},ys=function(e){function t(e,n){ka(this,t);var r=Ea(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Be.EventTarget));r.timestampOffset_=0,r.pendingBuffers_=[],r.bufferUpdating_=!1,r.mediaSource_=e,r.codecs_=n,r.audioCodec_=null,r.videoCodec_=null,r.audioDisabled_=!1,r.appendAudioInitSegment_=!0,r.gopBuffer_=[],r.timeMapping_=0,r.safeAppend_=Be.browser.IE_VERSION>=11;var i={remux:!1,alignGopsAtEnd:r.safeAppend_};return r.codecs_.forEach(function(e){ds(e)?r.audioCodec_=e:fs(e)&&(r.videoCodec_=e)}),r.transmuxer_=new es,r.transmuxer_.postMessage({action:"init",options:i}),r.transmuxer_.onmessage=function(e){return"data"===e.data.action?r.data_(e):"done"===e.data.action?r.done_(e):"gopInfo"===e.data.action?r.appendGopInfo_(e):void 0},Object.defineProperty(r,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(r,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(r,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(r,"buffered",{get:function(){return gs(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),r}return xa(t,e),Ta(t,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),Fo(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){if("closed"===this.mediaSource_.readyState)return void(this.pendingBuffers_.length=0);this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var e=this,t=["audio","video"];t.forEach(function(n){if(e[n+"Codec_"]&&!e[n+"Buffer_"]){var r=null;if(e.mediaSource_[n+"Buffer_"])r=e.mediaSource_[n+"Buffer_"],r.updating=!1;else{var i=n+"Codec_",a=n+'/mp4;codecs="'+e[i]+'"';r=ms(e.mediaSource_.nativeMediaSource_,a),e.mediaSource_[n+"Buffer_"]=r}e[n+"Buffer_"]=r,["update","updatestart","updateend"].forEach(function(i){r.addEventListener(i,function(){if("audio"!==n||!e.audioDisabled_){"updateend"===i&&(e[n+"Buffer_"].updating=!1);return t.every(function(t){return!("audio"!==t||!e.audioDisabled_)||(n===t||!e[t+"Buffer_"]||!e[t+"Buffer_"].updating)})?e.trigger(i):void 0}})})}})}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:hs(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=ps(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=vs(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),Bo(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)Bo(e,t,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(e,t){var n=t.type,r=t.data,i=t.initSegment;return e[n].segments.push(r),e[n].bytes+=r.byteLength,e[n].initSegment=i,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),Vo(this,e.captions,e.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var n=0,r=void 0;if(e.bytes){r=new Uint8Array(e.bytes),e.segments.forEach(function(e){r.set(e,n),n+=e.byteLength});try{t.updating=!0,t.appendBuffer(r)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),t}(Be.EventTarget),bs=function(e){function t(){ka(this,t);var e=Ea(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=void 0;e.nativeMediaSource_=new rt.a.MediaSource;for(n in e.nativeMediaSource_)n in t.prototype||"function"!=typeof e.nativeMediaSource_[n]||(e[n]=e.nativeMediaSource_[n].bind(e.nativeMediaSource_));return e.duration_=NaN,Object.defineProperty(e,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){if(this.duration_=e,e!==1/0)return void(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(e,"seekable",{get:function(){return this.duration_===1/0?Be.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(e,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(e,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),e.sourceBuffers=[],e.activeSourceBuffers_=[],e.updateActiveSourceBuffers_=function(){if(e.activeSourceBuffers_.length=0,1===e.sourceBuffers.length){var t=e.sourceBuffers[0];return t.appendAudioInitSegment_=!0,t.audioDisabled_=!t.audioCodec_,void e.activeSourceBuffers_.push(t)}for(var n=!1,r=!0,i=0;i<e.player_.audioTracks().length;i++){var a=e.player_.audioTracks()[i];if(a.enabled&&"main"!==a.kind){n=!0,r=!1;break}}e.sourceBuffers.forEach(function(t,i){if(t.appendAudioInitSegment_=!0,t.videoCodec_&&t.audioCodec_)t.audioDisabled_=n;else if(t.videoCodec_&&!t.audioCodec_)t.audioDisabled_=!0,r=!1;else if(!t.videoCodec_&&t.audioCodec_&&(t.audioDisabled_=i?r:!r,t.audioDisabled_))return;e.activeSourceBuffers_.push(t)})},e.onPlayerMediachange_=function(){e.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},e.onHlsReset_=function(){e.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},e.onHlsSegmentTimeMapping_=function(t){e.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},e),e.on("sourceopen",function(t){var n=ot.a.querySelector('[src="'+e.url_+'"]');n&&(e.player_=Be(n.parentNode),e.player_&&(e.player_.tech_.on("hls-reset",e.onHlsReset_),e.player_.tech_.on("hls-segment-time-mapping",e.onHlsSegmentTimeMapping_),e.player_.audioTracks&&e.player_.audioTracks()&&(e.player_.audioTracks().on("change",e.updateActiveSourceBuffers_),e.player_.audioTracks().on("addtrack",e.updateActiveSourceBuffers_),e.player_.audioTracks().on("removetrack",e.updateActiveSourceBuffers_)),e.player_.on("mediachange",e.onPlayerMediachange_)))}),e.on("sourceended",function(t){for(var n=Ho(e.duration),r=0;r<e.sourceBuffers.length;r++){var i=e.sourceBuffers[r],a=i.metadataTrack_&&i.metadataTrack_.cues;a&&a.length&&(a[a.length-1].endTime=n)}}),e.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),e}return xa(t,e),Ta(t,[{key:"addSeekableRange_",value:function(e,t){var n=void 0;if(this.duration!==1/0)throw n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),n.name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,n=ls(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var r=[];n.parameters&&n.parameters.codecs&&(r=n.parameters.codecs.split(","),r=ns(r),r=r.filter(function(e){return ds(e)||fs(e)})),0===r.length&&(r=["avc1.4d400d","mp4a.40.2"]),t=new ys(this,r),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),t}(Be.EventTarget),_s=0;Be.mediaSources={};var ws=function(e,t){var n=Be.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})},Ss=function(){return!!rt.a.MediaSource&&!!rt.a.MediaSource.isTypeSupported&&rt.a.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},ks=function(){if(this.MediaSource={open:ws,supportsNativeMediaSources:Ss},Ss())return new bs;throw new Error("Cannot use create a virtual MediaSource for this video")};ks.open=ws,ks.supportsNativeMediaSources=Ss;var Ts={createObjectURL:function(e){var t=void 0;return e instanceof bs?(t=rt.a.URL.createObjectURL(e.nativeMediaSource_),e.url_=t,t):e instanceof bs?(t="blob:vjs-media-source/"+_s,_s++,Be.mediaSources[t]=e,t):(t=rt.a.URL.createObjectURL(e),e.url_=t,t)}};Be.MediaSource=ks,Be.URL=Ts;var Cs=Be.EventTarget,xs=Be.mergeOptions,Es=function(e,t){for(var n=xs(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),r=0;r<t.playlists.length;r++){var i=ja(n,t.playlists[r]);i&&(n=i)}return Ia(t,function(e,t,r,i){if(e.playlists&&e.playlists.length){var a=e.playlists[0].uri,o=ja(n,e.playlists[0]);o&&(n=o,n.mediaGroups[t][r][i].playlists[0]=n.playlists[a])}}),n},Ps=function(e){function t(e,n,r,i){ka(this,t);var a=Ea(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(a.hls_=n,a.withCredentials=r,!e)throw new Error("A non-empty playlist URL or playlist is required");return a.on("minimumUpdatePeriod",function(){a.refreshXml_()}),a.on("mediaupdatetimeout",function(){a.refreshMedia_()}),"string"==typeof e?(a.srcUrl=e,a.state="HAVE_NOTHING",Ea(a)):(a.masterPlaylistLoader_=i,a.state="HAVE_METADATA",a.started=!0,a.media(e),rt.a.setTimeout(function(){a.trigger("loadedmetadata")},0),a)}return xa(t,e),Ta(t,[{key:"dispose",value:function(){this.stopRequest(),rt.a.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var t=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var n=!this.media_||e.uri!==this.media_.uri;this.state="HAVE_METADATA",n&&(this.media_&&this.trigger("mediachanging"),this.media_=e,this.refreshMedia_(),"HAVE_MASTER"!==t&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest(),rt.a.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(e){var t=this;rt.a.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;return void(this.mediaUpdateTimeout=rt.a.setTimeout(function(){return t.load()},r))}if(!this.started)return void this.start();this.trigger("loadedplaylist")}},{key:"parseMasterXml",value:function(){var e=n.i(st.a)(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});e.uri=this.srcUrl;for(var t=0;t<e.playlists.length;t++){var r="placeholder-uri-"+t;e.playlists[t].uri=r,e.playlists[r]=e.playlists[t]}return Ia(e,function(t,n,r,i){if(t.playlists&&t.playlists.length){var a="placeholder-uri-"+n+"-"+r+"-"+i;t.playlists[0].uri=a,e.playlists[a]=t.playlists[0]}}),Da(e),Na(e),e}},{key:"start",value:function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?e.masterLoaded_=Date.parse(n.responseHeaders.date):e.masterLoaded_=Date.now(),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))}})}},{key:"syncClientServerClock_",value:function(e){var t=this,r=n.i(st.b)(this.masterXml_);return null===r?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===r.method?(this.clientOffset_=r.value-Date.now(),e()):void(this.request=this.hls_.xhr({uri:Sa(this.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},function(n,i){if(t.request){if(n)return t.clientOffset_=t.masterLoaded_-Date.now(),e();var a=void 0;a="HEAD"===r.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):t.masterLoaded_:Date.parse(i.responseText),t.clientOffset_=a-Date.now(),e()}}))}},{key:"onClientServerClockSync_",value:function(){var e=this;this.master=this.parseMasterXml(),this.state="HAVE_MASTER",this.trigger("loadedplaylist"),this.media_||this.media(this.master.playlists[0]),rt.a.setTimeout(function(){e.trigger("loadedmetadata")},0),this.master.minimumUpdatePeriod&&rt.a.setTimeout(function(){e.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var e=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=n.responseText;var r=e.parseMasterXml();e.master=Es(e.master,r),rt.a.setTimeout(function(){e.trigger("minimumUpdatePeriod")},e.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(){var e=this,t=void 0,n=void 0;this.masterPlaylistLoader_?(t=this.masterPlaylistLoader_.master,n=this.masterPlaylistLoader_.parseMasterXml()):(t=this.master,n=this.parseMasterXml());var r=Es(t,n);r?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=r:this.master=r,this.media_=r.playlists[this.media_.uri]):this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=rt.a.setTimeout(function(){e.trigger("mediaupdatetimeout")},Ua(this.media(),!!r))),this.trigger("loadedplaylist")}}]),t}(Cs),$s=function(e){return Be.log.debug?Be.log.debug.bind(Be,"VHS:",e+" >"):function(){}},As=function(){function e(t,n,r,i){ka(this,e),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=r,this.mimeType_=n,this.logger_=$s("SourceUpdater["+r+"]["+n+"]"),"closed"===t.readyState?t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,n,i)):this.createSourceBuffer_(n,i)}return Ta(e,[{key:"createSourceBuffer_",value:function(e,t){var n=this;if(this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2))return void t.on("sourcebufferadded",function(){n.start_()});this.start_()}},{key:"start_",value:function(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.logger_("buffered ["+No(e.buffered())+"]"),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function(e,t){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(e)},t)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:Be.createTimeRanges()}},{key:"remove",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ze;this.processedAppend_&&this.queueCallback_(function(){n.logger_("remove ["+e+" => "+t+"]"),n.sourceBuffer_.remove(e,t)},r)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),e}(),Os={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Is={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Rs=function(e){var t=void 0;return t=e.offset+e.length-1,"bytes="+e.offset+"-"+t},Ls=function(e){var t={};return e.byterange&&(t.Range=Rs(e.byterange)),t},js=function(e){e.forEach(function(e){e.abort()})},Ds=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},Ns=function(e){var t=e.target,n=Date.now()-t.requestTime,r={bandwidth:1/0,bytesReceived:0,roundTripTime:n||0};return r.bytesReceived=e.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r},Us=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Is.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Is.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Is.FAILURE,xhr:t}:null},Ms=function(e,t){return function(n,r){var i=r.response,a=Us(n,r);if(a)return t(a,e);if(16!==i.byteLength)return t({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:Is.FAILURE,xhr:r},e);var o=new DataView(i);return e.key.bytes=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),t(null,e)}},Fs=function(e,t,n){return function(r,i){var a=i.response,o=Us(r,i);return o?n(o,e):0===a.byteLength?n({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:Is.FAILURE,xhr:i},e):(e.map.bytes=new Uint8Array(i.response),t.isInitialized()||t.init(),e.map.timescales=ut.a.timescale(e.map.bytes),e.map.videoTrackIds=ut.a.videoTrackIds(e.map.bytes),n(null,e))}},Bs=function(e,t,n){return function(r,i){var a=i.response,o=Us(r,i),s=void 0;return o?n(o,e):0===a.byteLength?n({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:Is.FAILURE,xhr:i},e):(e.stats=Ds(i),e.key?e.encryptedBytes=new Uint8Array(i.response):e.bytes=new Uint8Array(i.response),e.map&&e.map.bytes&&(t.isInitialized()||t.init(),(s=t.parse(e.bytes,e.map.videoTrackIds,e.map.timescales))&&s.captions&&(e.captionStreams=s.captionStreams,e.fmp4Captions=s.captions)),n(null,e))}},qs=function(e,t,n){var r=function r(i){if(i.data.source===t.requestId){e.removeEventListener("message",r);var a=i.data.decrypted;return t.bytes=new Uint8Array(a.bytes,a.byteOffset,a.byteLength),n(null,t)}};e.addEventListener("message",r),e.postMessage(mo({source:t.requestId,encrypted:t.encryptedBytes,key:t.key.bytes,iv:t.key.iv}),[t.encryptedBytes.buffer,t.key.bytes.buffer])},Hs=function(e,t,n){var r=0,i=!1;return function(a,o){if(!i)return a?(i=!0,js(e),n(a,o)):(r+=1,r===e.length?(o.endOfAllRequests=Date.now(),o.encryptedBytes?qs(t,o,n):n(null,o)):void 0)}},Vs=function(e,t){return function(n){return e.stats=Be.mergeOptions(e.stats,Ns(n)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(n,e)}},zs=function(e,t,n,r,i,a,o){var s=[],c=Hs(s,n,o);if(i.key){var u=Be.mergeOptions(t,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),l=Ms(i,c),d=e(u,l);s.push(d)}if(i.map&&!i.map.bytes){var f=Be.mergeOptions(t,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:Ls(i.map)}),h=Fs(i,r,c),p=e(f,h);s.push(p)}var v=Be.mergeOptions(t,{uri:i.resolvedUri,responseType:"arraybuffer",headers:Ls(i)}),g=Bs(i,r,c),m=e(v,g);return m.addEventListener("progress",Vs(i,a)),s.push(m),function(){return js(s)}},Ws=function(e,t){var n=void 0;return e?(n=rt.a.getComputedStyle(e),n?n[t]:""):""},Gs=function(e,t){var n=e.slice();e.sort(function(e,r){var i=t(e,r);return 0===i?n.indexOf(e)-n.indexOf(r):i})},Ys=function(e,t){var n=void 0,r=void 0;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||rt.a.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||rt.a.Number.MAX_VALUE,n-r},Qs=function(e,t){var n=void 0,r=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||rt.a.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||rt.a.Number.MAX_VALUE,n===r&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r},Xs=function(e,t,n,r,i){var a=e.playlists.map(function(e){var t=void 0,n=void 0,r=void 0;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,r=e.attributes.BANDWIDTH,r=r||rt.a.Number.MAX_VALUE,{bandwidth:r,width:t,height:n,playlist:e}});Gs(a,function(e,t){return e.bandwidth-t.bandwidth}),a=a.filter(function(e){return!uo.isIncompatible(e.playlist)});var o=a.filter(function(e){return uo.isEnabled(e.playlist)});o.length||(o=a.filter(function(e){return!uo.isDisabled(e.playlist)}));var s=o.filter(function(e){return e.bandwidth*Os.BANDWIDTH_VARIANCE<t}),c=s[s.length-1],u=s.filter(function(e){return e.bandwidth===c.bandwidth})[0];if(!1===i){var l=u||o[0]||a[0];return l?l.playlist:null}var d=s.filter(function(e){return e.width&&e.height});Gs(d,function(e,t){return e.width-t.width});var f=d.filter(function(e){return e.width===n&&e.height===r});c=f[f.length-1];var h=f.filter(function(e){return e.bandwidth===c.bandwidth})[0],p=void 0,v=void 0,g=void 0;h||(p=d.filter(function(e){return e.width>n||e.height>r}),v=p.filter(function(e){return e.width===p[0].width&&e.height===p[0].height}),c=v[v.length-1],g=v.filter(function(e){return e.bandwidth===c.bandwidth})[0]);var m=g||h||u||o[0]||a[0];return m?m.playlist:null},Js=function(){return Xs(this.playlists.master,this.systemBandwidth,parseInt(Ws(this.tech_.el(),"width"),10),parseInt(Ws(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},Ks=function(e){var t=e.master,n=e.currentTime,r=e.bandwidth,i=e.duration,a=e.segmentDuration,o=e.timeUntilRebuffer,s=e.currentTimeline,c=e.syncController,u=t.playlists.filter(function(e){return!uo.isIncompatible(e)}),l=u.filter(uo.isEnabled);l.length||(l=u.filter(function(e){return!uo.isDisabled(e)}));var d=l.filter(uo.hasAttribute.bind(null,"BANDWIDTH")),f=d.map(function(e){var t=c.getSyncPoint(e,i,s,n),u=t?1:2;return{playlist:e,rebufferingImpact:uo.estimateSegmentRequestTime(a,r,e)*u-o}}),h=f.filter(function(e){return e.rebufferingImpact<=0});return Gs(h,function(e,t){return Ys(t.playlist,e.playlist)}),h.length?h[0]:(Gs(f,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),f[0]||null)},Zs=function(){var e=this.playlists.master.playlists.filter(uo.isEnabled);return Gs(e,function(e,t){return Ys(e,t)}),e.filter(function(e){return rs(e.attributes.CODECS).videoCodec})[0]||null},ec=function(e,t,n){for(var r in n)if(!e[r]){t.trigger({type:"usage",name:"hls-608"});var i=t.textTracks().getTrackById(r);e[r]=i||t.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}},tc=function(e){var t=e.inbandTextTracks,n=e.captionArray,r=e.timestampOffset;if(n){var i=window.WebKitDataCue||window.VTTCue;n.forEach(function(e){var n=e.stream,a=e.startTime,o=e.endTime;t[n]&&(a+=r,o+=r,t[n].addCue(new i(a,o,e.text)))})}},nc=500,rc=function(e,t,n){if(!e||!t)return!1;var r=e.segments,i=n===r.length;return e.endList&&"open"===t.readyState&&i},ic=function(e){return"number"==typeof e&&isFinite(e)},ac=function(e,t,n){return"main"===e&&t&&n?n.containsAudio||n.containsVideo?t.containsVideo&&!n.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.containsVideo&&n.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null},oc=function(e,t,n){var r=void 0;return r=e.length&&e.start(0)>0&&e.start(0)<t?e.start(0):t-30,Math.min(r,t-n)},sc=function(e){var t=e.segment,n=t.start,r=t.end,i=e.playlist,a=i.mediaSequence,o=i.id,s=i.segments,c=void 0===s?[]:s,u=e.mediaIndex,l=e.timeline;return["appending ["+u+"] of ["+a+", "+(a+c.length)+"] from playlist ["+o+"]","["+n+" => "+r+"] in timeline ["+l+"]"].join(" ")},cc=function(e){function t(e){ka(this,t);var n=Ea(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=e.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.hasPlayed_=e.hasPlayed,n.currentTime_=e.currentTime,n.seekable_=e.seekable,n.seeking_=e.seeking,n.duration_=e.duration,n.mediaSource_=e.mediaSource,n.hls_=e.hls,n.loaderType_=e.loaderType,n.startingMedia_=void 0,n.segmentMetadataTrack_=e.segmentMetadataTrack,n.goalBufferLength_=e.goalBufferLength,n.sourceType_=e.sourceType,n.inbandTextTracks_=e.inbandTextTracks,n.state_="INIT",n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.mimeType_=null,n.sourceUpdater_=null,n.xhrOptions_=null,n.activeInitSegmentId_=null,n.initSegments_={},n.captionParser_=new lt.CaptionParser,n.decrypter_=e.decrypter,n.syncController_=e.syncController,n.syncPoint_={segmentIndex:0,time:0},n.syncController_.on("syncinfoupdate",function(){return n.trigger("syncinfoupdate")}),n.mediaSource_.addEventListener("sourceopen",function(){return n.ended_=!1}),n.fetchAtBuffer_=!1,n.logger_=$s("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(n,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),n}return xa(t,e),Ta(t,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_.reset()}},{key:"abort",value:function(){if("WAITING"!==this.state)return void(this.pendingSegment_&&(this.pendingSegment_=null));this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():Be.createTimeRanges()}},{key:"initSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=yo(e),r=this.initSegments_[n];return t&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),r||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new As(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var i=n?n.id:null;if(this.logger_("playlist update ["+i+" => "+e.id+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return void(null!==this.mediaIndex&&this.resyncLoader());var a=e.mediaSequence-n.mediaSequence;this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex&&(this.mediaIndex-=a),r&&(r.mediaIndex-=a,r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,e)}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(rt.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),e),this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t,n){if(this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,n),Bo(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var r in this.inbandTextTracks_)Bo(e,t,this.inbandTextTracks_[r])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&rt.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=rt.a.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&rt.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=rt.a.setTimeout(this.monitorBufferTick_.bind(this),nc)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e){if(rc(this.playlist_,this.mediaSource_,e.mediaIndex))return void this.endOfStream();(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_.clearAllCaptions()),this.loadSegment_(e))}}}},{key:"checkBuffer_",value:function(e,t,n,r,i,a){var o=0,s=void 0;e.length&&(o=e.end(e.length-1));var c=Math.max(0,o-i);if(!t.segments.length)return null;if(c>=this.goalBufferLength_())return null;if(!r&&c>=1)return null;if(null===a)return n=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,n,null,!0);if(null!==n){var u=t.segments[n];return s=u&&u.end?u.end:o,this.generateSegmentInfo_(t,n+1,s,!1)}if(this.fetchAtBuffer_){var l=uo.getMediaInfoForTime(t,o,a.segmentIndex,a.time);n=l.mediaIndex,s=l.startTime}else{var d=uo.getMediaInfoForTime(t,i,a.segmentIndex,a.time);n=d.mediaIndex,s=d.startTime}return this.generateSegmentInfo_(t,n,s,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,n,r){if(t<0||t>=e.segments.length)return null;var i=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:i.resolvedUri,mediaIndex:t,isSyncRequest:r,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:i.timeline,duration:i.duration,segment:i}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,i=uo.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),a=Uo(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(i<=a)return!1;var o=Ks({master:this.hls_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var s=i-a,c=s-o.rebufferingImpact,u=.5;return a<=Oo&&(u=1),!o.playlist||o.playlist.uri===this.playlist_.uri||c<u?!1:(this.bandwidth=o.playlist.attributes.BANDWIDTH*Os.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=zs(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t=oc(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,n={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var r=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key={resolvedUri:t.key.resolvedUri,iv:r}}return t.map&&(n.map=this.initSegment(t.map)),n}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),!this.pendingSegment_)return void(this.mediaRequestsAborted+=1);if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Is.ABORTED?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===Is.TIMEOUT?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),this.processSegmentResponse_(t)}}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(ec(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),tc({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(!this.pendingSegment_)return void(this.state="READY");var t=this.pendingSegment_,n=t.segment,r=this.syncController_.probeSegmentInfo(t);void 0===this.startingMedia_&&r&&(r.containsAudio||r.containsVideo)&&(this.startingMedia_={containsAudio:r.containsAudio,containsVideo:r.containsVideo});var i=ac(this.loaderType_,this.startingMedia_,r);if(i)return this.error({message:i,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset"));var a=this.syncController_.mappingForTimeline(t.timeline);if(null!==a&&this.trigger({type:"segmenttimemapping",mapping:a}),this.state="APPENDING",n.map){var o=yo(n.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==o){var s=this.initSegment(n.map);this.sourceUpdater_.appendBuffer(s.bytes,function(){e.activeInitSegmentId_=o})}}t.byteLength=t.bytes.byteLength,"number"==typeof n.start&&"number"==typeof n.end?this.mediaSecondsLoaded+=n.end-n.start:this.mediaSecondsLoaded+=n.duration,this.logger_(sc(t)),this.sourceUpdater_.appendBuffer(t.bytes,this.handleUpdateEnd_.bind(this))}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,n=null!==this.mediaIndex;if(this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration)return void this.resetEverything();n&&this.trigger("bandwidthupdate"),this.trigger("progress"),rc(e.playlist,this.mediaSource_,e.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,r=t.end;if(ic(n)&&ic(r)){Bo(n,r,this.segmentMetadataTrack_);var i=rt.a.WebKitDataCue||rt.a.VTTCue,a={dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:n,end:r},o=JSON.stringify(a),s=new i(n,r,o);s.value=a,this.segmentMetadataTrack_.addCue(s)}}}}]),t}(Be.EventTarget),uc=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},lc=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),dc=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ka(this,t);var r=Ea(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.mediaSource_=null,r.subtitlesTrack_=null,r}return xa(t,e),Ta(t,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return Be.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return Be.createTimeRanges([[t,n]])}},{key:"initSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=yo(e),r=this.initSegments_[n];if(t&&!r&&e.bytes){var i=lc.byteLength+e.bytes.byteLength,a=new Uint8Array(i);a.set(e.bytes),a.set(lc,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return r||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e?this.subtitlesTrack_:(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}},{key:"remove",value:function(e,t){Bo(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){var n=function(){e.state="READY",e.paused()||e.monitorBuffer_()};return this.syncController_.one("timestampoffset",n),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var e=this;if(!this.pendingSegment_||!this.subtitlesTrack_)return void(this.state="READY");this.state="APPENDING";var t=this.pendingSegment_,n=t.segment;if("function"!=typeof rt.a.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var r=function(){e.handleSegment_()};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",r),void this.subtitlesTrack_.tech_.one("vttjserror",function(){e.subtitlesTrack_.tech_.off("vttjsloaded",r),e.error({message:"Error loading vtt.js"}),e.state="READY",e.pause(),e.trigger("error")})}n.requested=!0;try{this.parseVTTCues_(t)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(t,this.syncController_.timelines[t.timeline],this.playlist_),t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");t.byteLength=t.bytes.byteLength,this.mediaSecondsLoaded+=n.duration,t.cues.length&&this.remove(t.cues[0].endTime,t.cues[t.cues.length-1].endTime),t.cues.forEach(function(t){e.subtitlesTrack_.addCue(t)}),this.handleUpdateEnd_()}},{key:"parseVTTCues_",value:function(e){var t=void 0,n=!1;"function"==typeof rt.a.TextDecoder?t=new rt.a.TextDecoder("utf8"):(t=rt.a.WebVTT.StringDecoder(),n=!0);var r=new rt.a.WebVTT.Parser(rt.a,rt.a.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=function(t){return e.timestampmap=t},r.onparsingerror=function(e){Be.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var i=e.segment.map.bytes;n&&(i=uc(i)),r.parse(i)}var a=e.bytes;n&&(a=uc(a)),r.parse(a),r.flush()}},{key:"updateTimeMapping_",value:function(e,t,n){var r=e.segment;if(t){if(!e.cues.length)return void(r.empty=!0);var i=e.timestampmap,a=i.MPEGTS/9e4-i.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=a,e.endTime+=a}),!n.syncInfo){var o=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(o,s-r.duration)}}}}}]),t}(cc),fc=function(e,t){for(var n=e.cues,r=0;r<n.length;r++){var i=n[r];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null},hc=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.segments)for(var r=n,i=void 0,a=0;a<e.segments.length;a++){var o=e.segments[a];if(i||(i=fc(t,r+o.duration/2)),i){if("cueIn"in o){i.endTime=r,i.adEndTime=r,r+=o.duration,i=null;continue}if(r<i.endTime){r+=o.duration;continue}i.endTime+=o.duration}else if("cueOut"in o&&(i=new rt.a.VTTCue(r,r+o.duration,o.cueOut),i.adStartTime=r,i.adEndTime=r+parseFloat(o.cueOut),t.addCue(i)),"cueOutCont"in o){var s=void 0,c=void 0,u=o.cueOutCont.split("/").map(parseFloat),l=Pa(u,2);s=l[0],c=l[1],i=new rt.a.VTTCue(r,r+o.duration,""),i.adStartTime=r-s,i.adEndTime=i.adStartTime+c,t.addCue(i)}r+=o.duration}},pc=ft.a.inspect,vc=[{name:"VOD",run:function(e,t,n,r,i){if(n!==1/0){return{time:0,segmentIndex:0}}return null}},{name:"ProgramDateTime",run:function(e,t,n,r,i){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],o=null,s=null;i=i||0;for(var c=0;c<a.length;c++){var u=a[c];if(u.dateTimeObject){var l=u.dateTimeObject.getTime()/1e3,d=l+e.datetimeToDisplayTime,f=Math.abs(i-d);if(null!==s&&s<f)break;s=f,o={time:d,segmentIndex:c}}}return o}},{name:"Segment",run:function(e,t,n,r,i){var a=t.segments||[],o=null,s=null;i=i||0;for(var c=0;c<a.length;c++){var u=a[c];if(u.timeline===r&&void 0!==u.start){var l=Math.abs(i-u.start);if(null!==s&&s<l)break;(!o||null===s||s>=l)&&(s=l,o={time:u.start,segmentIndex:c})}}return o}},{name:"Discontinuity",run:function(e,t,n,r,i){var a=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,s=0;s<t.discontinuityStarts.length;s++){var c=t.discontinuityStarts[s],u=t.discontinuitySequence+s+1,l=e.discontinuities[u];if(l){var d=Math.abs(i-l.time);if(null!==o&&o<d)break;(!a||null===o||o>=d)&&(o=d,a={time:l.time,segmentIndex:c})}}return a}},{name:"Playlist",run:function(e,t,n,r,i){if(t.syncInfo){return{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}}return null}}],gc=function(e){function t(){ka(this,t);var e=Ea(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=$s("SyncController"),e}return xa(t,e),Ta(t,[{key:"getSyncPoint",value:function(e,t,n,r){var i=this.runStrategies_(e,t,n,r);return i.length?this.selectSyncPoint_(i,{key:"time",value:r}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+za(e,r.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,n,r){for(var i=[],a=0;a<vc.length;a++){var o=vc[a],s=o.run(this,e,t,n,r);s&&(s.strategy=o.name,i.push({strategy:o.name,syncPoint:s}))}return i}},{key:"selectSyncPoint_",value:function(e,t){for(var n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy,a=1;a<e.length;a++){var o=Math.abs(e[a].syncPoint[t.key]-t.value);o<r&&(r=o,n=e[a].syncPoint,i=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+i+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var n=t.mediaSequence-e.mediaSequence,r=n-1;r>=0;r--){var i=e.segments[r];if(i&&void 0!==i.start){t.syncInfo={mediaSequence:e.mediaSequence+r,time:i.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t=e.segment,n=e.playlist,r=void 0;return r=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e),r&&this.calculateSegmentTimeMapping_(e,r)&&(this.saveDiscontinuitySyncInfo_(e),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:t.start})),r}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,n=ut.a.timescale(t.map.bytes),r=ut.a.startTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=r),{start:r,end:r+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=pc(e.bytes,this.inspectCache_),n=void 0,r=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,n=t.video[0].dtsTime,r=t.video[1].dtsTime):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,n=t.audio[0].dtsTime,r=t.audio[1].dtsTime),{start:n,end:r,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var n=e.segment,r=this.timelines[e.timeline];if(null!==e.timestampOffset)r={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=r,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+r.time+"] [mapping: "+r.mapping+"]"),n.start=e.startOfSegment,n.end=t.end+r.mapping;else{if(!r)return!1;n.start=t.start+r.mapping,n.end=t.end+r.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var r=0;r<t.discontinuityStarts.length;r++){var i=t.discontinuityStarts[r],a=t.discontinuitySequence+r+1,o=i-e.mediaIndex,s=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>s){var c=void 0;c=o<0?n.start-za(t,e.mediaIndex,i):n.end+za(t,e.mediaIndex+1,i),this.discontinuities[a]={time:c,accuracy:s}}}}}]),t}(Be.EventTarget),mc=new qe("./decrypter-worker.worker.js",function(e,t){var n=this;!function(){function e(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},o=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],r=t[4],i=n[4],a=void 0,o=void 0,s=void 0,c=[],u=[],l=void 0,d=void 0,f=void 0,h=void 0,p=void 0,v=void 0;for(a=0;a<256;a++)u[(c[a]=a<<1^283*(a>>7))^a]=a;for(o=s=0;!r[o];o^=l||1,s=u[s]||1)for(h=s^s<<1^s<<2^s<<3^s<<4,h=h>>8^255&h^99,r[o]=h,i[h]=o,f=c[d=c[l=c[o]]],v=16843009*f^65537*d^257*l^16843008*o,p=257*c[h]^16843008*h,a=0;a<4;a++)t[a][o]=p=p<<24^p>>>8,n[a][h]=v=v<<24^v>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e},s=null,c=function(){function e(n){t(this,e),s||(s=o()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var r=void 0,i=void 0,a=void 0,c=void 0,u=void 0,l=this._tables[0][4],d=this._tables[1],f=n.length,h=1;if(4!==f&&6!==f&&8!==f)throw new Error("Invalid aes key size");for(c=n.slice(0),u=[],this._key=[c,u],r=f;r<4*f+28;r++)a=c[r-1],(r%f==0||8===f&&r%f==4)&&(a=l[a>>>24]<<24^l[a>>16&255]<<16^l[a>>8&255]<<8^l[255&a],r%f==0&&(a=a<<8^a>>>24^h<<24,h=h<<1^283*(h>>7))),c[r]=c[r-f]^a;for(i=0;r;i++,r--)a=c[3&i?r:r-4],u[i]=r<=4||i<4?a:d[0][l[a>>>24]]^d[1][l[a>>16&255]]^d[2][l[a>>8&255]]^d[3][l[255&a]]}return e.prototype.decrypt=function(e,t,n,r,i,a){var o=this._key[1],s=e^o[0],c=r^o[1],u=n^o[2],l=t^o[3],d=void 0,f=void 0,h=void 0,p=o.length/4-2,v=void 0,g=4,m=this._tables[1],y=m[0],b=m[1],_=m[2],w=m[3],S=m[4];for(v=0;v<p;v++)d=y[s>>>24]^b[c>>16&255]^_[u>>8&255]^w[255&l]^o[g],f=y[c>>>24]^b[u>>16&255]^_[l>>8&255]^w[255&s]^o[g+1],h=y[u>>>24]^b[l>>16&255]^_[s>>8&255]^w[255&c]^o[g+2],l=y[l>>>24]^b[s>>16&255]^_[c>>8&255]^w[255&u]^o[g+3],g+=4,s=d,c=f,u=h;for(v=0;v<4;v++)i[(3&-v)+a]=S[s>>>24]<<24^S[c>>16&255]<<16^S[u>>8&255]<<8^S[255&l]^o[g++],d=s,s=c,c=u,u=l,l=d},e}(),u=function(){function e(){t(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),n>-1},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,i)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),l=function(e){function n(){t(this,n);var r=a(this,e.call(this,u));return r.jobs=[],r.delay=1,r.timeout_=null,r}return i(n,e),n.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},n}(u),d=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},f=function(e,t,n){var r=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),i=new c(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),o=new Int32Array(a.buffer),s=void 0,u=void 0,l=void 0,f=void 0,h=void 0,p=void 0,v=void 0,g=void 0,m=void 0;for(s=n[0],u=n[1],l=n[2],f=n[3],m=0;m<r.length;m+=4)h=d(r[m]),p=d(r[m+1]),v=d(r[m+2]),g=d(r[m+3]),i.decrypt(h,p,v,g,o,m),o[m]=d(o[m]^s),o[m+1]=d(o[m+1]^u),o[m+2]=d(o[m+2]^l),o[m+3]=d(o[m+3]^f),s=h,u=p,l=v,f=g;return a},h=function(){function n(r,i,a,o){t(this,n);var s=n.STEP,c=new Int32Array(r.buffer),u=new Uint8Array(r.byteLength),f=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(c.subarray(f,f+s),i,a,u)),f=s;f<c.length;f+=s)a=new Uint32Array([d(c[f-4]),d(c[f-3]),d(c[f-2]),d(c[f-1])]),this.asyncStream_.push(this.decryptChunk_(c.subarray(f,f+s),i,a,u));this.asyncStream_.push(function(){o(null,e(u))})}return n.prototype.decryptChunk_=function(e,t,n,r){return function(){var i=f(e,t,n);r.set(i,e.byteOffset)}},r(n,null,[{key:"STEP",get:function(){return 32e3}}]),n}(),p=function(e){var t={};return Object.keys(e).forEach(function(n){var r=e[n];ArrayBuffer.isView(r)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r}),t};new function(e){e.onmessage=function(t){var n=t.data,r=new Uint8Array(n.encrypted.bytes,n.encrypted.byteOffset,n.encrypted.byteLength),i=new Uint32Array(n.key.bytes,n.key.byteOffset,n.key.byteLength/4),a=new Uint32Array(n.iv.bytes,n.iv.byteOffset,n.iv.byteLength/4);new h(r,i,a,function(t,r){e.postMessage(p({source:n.source,decrypted:r}),[r.buffer])})}}(n)}()}),yc=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},bc=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},_c=function(e,t){t.activePlaylistLoader=e,e.load()},wc=function(e,t){return function(){var n=t.segmentLoaders,r=n[e],i=n.main,a=t.mediaTypes[e],o=a.activeTrack(),s=a.activeGroup(o),c=a.activePlaylistLoader;if(bc(r,a),s){if(!s.playlistLoader)return void(c&&i.resetEverything());r.resyncLoader(),_c(s.playlistLoader,a)}}},Sc=function(e,t){return function(){var n=t.segmentLoaders,r=n[e],i=n.main,a=t.mediaTypes[e],o=a.activeTrack(),s=a.activeGroup(o),c=a.activePlaylistLoader;if(bc(r,a),s){if(!s.playlistLoader)return void i.resetEverything();if(c===s.playlistLoader)return void _c(s.playlistLoader,a);r.track&&r.track(o),r.resetEverything(),_c(s.playlistLoader,a)}}},kc={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e],i=t.blacklistCurrentPlaylist;bc(n,r);var a=r.activeTrack(),o=r.activeGroup(),s=(o.filter(function(e){return e.default})[0]||o[0]).id,c=r.tracks[s];if(a===c)return void i({message:"Problem encountered loading the default audio track."});Be.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var u in r.tracks)r.tracks[u].enabled=r.tracks[u]===c;r.onTrackChanged()}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e];Be.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),bc(n,r);var i=r.activeTrack();i&&(i.mode="disabled"),r.onTrackChanged()}}},Tc={AUDIO:function(e,t,n){if(t){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,i),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),i),r.paused()||a.load()}),t.on("error",kc[e](e,n))}},SUBTITLES:function(e,t,n){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e],o=n.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,i),a.track(o.activeTrack()),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),i),r.paused()||a.load()}),t.on("error",kc[e](e,n))}},Cc=function(e,t){return function(n){return n.attributes[e]===t}},xc=function(e){return function(t){return t.resolvedUri===e}},Ec={AUDIO:function(e,t){var n=t.hls,r=t.sourceType,i=t.segmentLoaders[e],a=t.requestOptions.withCredentials,o=t.master,s=o.mediaGroups,c=o.playlists,u=t.mediaTypes[e],l=u.groups,d=u.tracks,f=t.masterPlaylistLoader;s[e]&&0!==Object.keys(s[e]).length||(s[e]={main:{default:{default:!0}}});for(var h in s[e]){l[h]||(l[h]=[]);var p=c.filter(Cc(e,h));for(var v in s[e][h]){var g=s[e][h][v];p.filter(xc(g.resolvedUri)).length&&delete g.resolvedUri;var m=void 0;if(m=g.resolvedUri?new Ma(g.resolvedUri,n,a):g.playlists&&"dash"===r?new Ps(g.playlists[0],n,a,f):null,g=Be.mergeOptions({id:v,playlistLoader:m},g),Tc[e](e,g.playlistLoader,t),l[h].push(g),void 0===d[v]){var y=new Be.AudioTrack({id:v,kind:yc(g),enabled:!1,language:g.language,default:g.default,label:v});d[v]=y}}}i.on("error",kc[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,r=t.hls,i=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions.withCredentials,s=t.master.mediaGroups,c=t.mediaTypes[e],u=c.groups,l=c.tracks,d=t.masterPlaylistLoader;for(var f in s[e]){u[f]||(u[f]=[]);for(var h in s[e][f])if(!s[e][f][h].forced){var p=s[e][f][h],v=void 0;if("hls"===i?v=new Ma(p.resolvedUri,r,o):"dash"===i&&(v=new Ps(p.playlists[0],r,o,d)),p=Be.mergeOptions({id:h,playlistLoader:v},p),Tc[e](e,p.playlistLoader,t),u[f].push(p),void 0===l[h]){var g=n.addRemoteTextTrack({id:h,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:h},!1).track;l[h]=g}}}a.on("error",kc[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,r=t.master.mediaGroups,i=t.mediaTypes[e],a=i.groups,o=i.tracks;for(var s in r[e]){a[s]||(a[s]=[]);for(var c in r[e][s]){var u=r[e][s][c];if(u.instreamId.match(/CC\d/)&&(a[s].push(Be.mergeOptions({id:c},u)),void 0===o[c])){var l=n.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default&&u.autoselect,language:u.language,label:c},!1).track;o[c]=l}}}}},Pc=function(e,t){return function(n){var r=t.masterPlaylistLoader,i=t.mediaTypes[e].groups,a=r.media();if(!a)return null;var o=null;return a.attributes[e]&&(o=i[a.attributes[e]]),o=o||i.main,void 0===n?o:null===n?null:o.filter(function(e){return e.id===n.id})[0]||null}},$c={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if(n[r].enabled)return n[r];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if("showing"===n[r].mode)return n[r];return null}}},Ac=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){Ec[t](t,e)});var t=e.mediaTypes,n=e.masterPlaylistLoader,r=e.tech,i=e.hls;["AUDIO","SUBTITLES"].forEach(function(n){t[n].activeGroup=Pc(n,e),t[n].activeTrack=$c[n](n,e),t[n].onGroupChanged=wc(n,e),t[n].onTrackChanged=Sc(n,e)});var a=t.AUDIO.activeGroup(),o=(a.filter(function(e){return e.default})[0]||a[0]).id;t.AUDIO.tracks[o].enabled=!0,t.AUDIO.onTrackChanged(),n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return t[e].onGroupChanged()})});var s=function(){t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"hls-audio-change"})};r.audioTracks().addEventListener("change",s),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),i.on("dispose",function(){r.audioTracks().removeEventListener("change",s),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(var c in t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[c])},Oc=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ze,activeTrack:ze,onGroupChanged:ze,onTrackChanged:ze}}),e},Ic=120,Rc=void 0,Lc=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],jc=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Dc=function(e){function t(e){ka(this,t);var n=Ea(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=e.url,i=e.withCredentials,a=e.tech,o=e.bandwidth,s=e.externHls,c=e.useCueTags,u=e.blacklistDuration,l=e.enableLowInitialPlaylist,d=e.sourceType,f=e.seekTo;if(!r)throw new Error("A non-empty playlist URL is required");Rc=s,n.withCredentials=i,n.tech_=a,n.hls_=a.hls,n.seekTo_=f,n.sourceType_=d,n.useCueTags_=c,n.blacklistDuration=u,n.enableLowInitialPlaylist=l,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:n.withCredentials,timeout:null},n.mediaTypes_=Oc(),n.mediaSource=new Be.MediaSource,n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_.bind(n)),n.seekable_=Be.createTimeRanges(),n.hasPlayed_=function(){return!1},n.syncController_=new gc(e),n.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new mc,n.inbandTextTracks_={};var h={hls:n.hls_,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.mediaSource.duration},hasPlayed:function(){return n.hasPlayed_()},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:o,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_};return n.masterPlaylistLoader_="dash"===n.sourceType_?new Ps(r,n.hls_,n.withCredentials):new Ma(r,n.hls_,n.withCredentials),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new cc(Be.mergeOptions(h,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),e),n.audioSegmentLoader_=new cc(Be.mergeOptions(h,{loaderType:"audio"}),e),n.subtitleSegmentLoader_=new dc(Be.mergeOptions(h,{loaderType:"vtt"}),e),n.setupSegmentLoaderListeners_(),Lc.forEach(function(e){n[e+"_"]=jc.bind(n,e)}),n.logger_=$s("MPC"),n.masterPlaylistLoader_.load(),n}return xa(t,e),Ta(t,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),n=1.5*e.masterPlaylistLoader_.targetDuration*1e3;co(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),Ac({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,hls:e.hls_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t);try{e.setupSourceBuffers_()}catch(t){return Be.log.warn("Failed to create SourceBuffers",t),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),e.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=e.masterPlaylistLoader_.media();if(!t){e.excludeUnsupportedVariants_();var n=void 0;return e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),e.initialMedia_=n,void e.masterPlaylistLoader_.media(e.initialMedia_)}if(e.useCueTags_&&e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),e.tech_.paused()||(e.mainSegmentLoader_.load(),e.audioSegmentLoader_&&e.audioSegmentLoader_.load()),!t.endList){var r=function(){var t=e.seekable();0!==t.length&&e.mediaSource.addSeekableRange_(t.start(0),t.end(0))};if(e.duration()!==1/0){var i=function t(){e.duration()===1/0?r():e.tech_.one("durationchange",t)};e.tech_.one("durationchange",i)}else r()}}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),n=1.5*e.masterPlaylistLoader_.targetDuration*1e3;co(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(e,t){var n=e.mediaGroups||{},r=!0,i=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var o in n.AUDIO[a]){var s=n.AUDIO[a][o];s.uri||(r=!1)}r&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),Rc.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),Rc.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.length&&Object.keys(n.AUDIO[i[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var t=e.selectPlaylist(),n=e.masterPlaylistLoader_.media(),r=e.tech_.buffered(),i=r.length?r.end(r.length-1)-e.tech_.currentTime():0,a=e.bufferLowWaterLine();(!n.endList||e.duration()<Os.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH<n.attributes.BANDWIDTH||i>=a)&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},Ic)}),this.mainSegmentLoader_.on("reseteverything",function(){e.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(t){e.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})}),this.audioSegmentLoader_.on("ended",function(){e.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything(function(){Be.browser.IE_VERSION||Be.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.seekTo_(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(Be.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.seekTo_(n.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(n.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return Be.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var n=Rc.Playlist.playlistEnd(e,t),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=Io;var a=i.end(i.length-1);return a-r<=Io&&n-a<=Io}},{key:"blacklistCurrentPlaylist",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=void 0,r=void 0;if(n=e.playlist||this.masterPlaylistLoader_.media(),t=t||e.blacklistDuration||this.blacklistDuration,!n){this.error=e;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var i=1===this.masterPlaylistLoader_.master.playlists.filter(no).length;return i?(Be.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(i)):(n.excludeUntil=Date.now()+1e3*t,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),r=this.selectPlaylist(),Be.log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(r))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=Lo(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:Rc.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var r=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==r&&(e=Rc.Playlist.seekable(n,r),0!==e.length)){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(r=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(t=Rc.Playlist.seekable(n,r),0===t.length)return}t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=Be.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.logger_("seekable updated ["+No(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function(){var e=this,t=this.mediaSource.duration,n=Rc.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered(),i=function t(){e.mediaSource.duration=n,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)};r.length>0&&(n=Math.max(n,r.end(r.length-1))),t!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",i):i())}},{key:"dispose",value:function(){var e=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(t){var n=e.mediaTypes_[t].groups;for(var r in n)n[r].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e=this.masterPlaylistLoader_.media(),t=void 0;if(e&&"open"===this.mediaSource.readyState){if(t=us(this.masterPlaylistLoader_.master,e),t.length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+e.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(t),this.excludeIncompatibleVariants_(e)}}},{key:"configureLoaderMimeTypes_",value:function(e){var t=e.length>1&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new Be.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(e){e.attributes.CODECS&&rt.a.MediaSource&&rt.a.MediaSource.isTypeSupported&&!rt.a.MediaSource.isTypeSupported('video/mp4; codecs="'+is(e.attributes.CODECS)+'"')&&(e.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(e){var t=2,n=null,r=void 0;e.attributes.CODECS&&(r=rs(e.attributes.CODECS),n=r.videoCodec,t=r.codecCount),this.master().playlists.forEach(function(e){var r={codecCount:2,videoCodec:null};e.attributes.CODECS&&(r=rs(e.attributes.CODECS)),r.codecCount!==t&&(e.excludeUntil=1/0),r.videoCodec!==n&&(e.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),hc(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=Os.GOAL_BUFFER_LENGTH,n=Os.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,Os.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,r)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=Os.BUFFER_LOW_WATER_LINE,n=Os.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,Os.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,r)}}]),t}(Be.EventTarget),Nc=function(e,t,n){return function(r){var i=e.master.playlists[t],a=to(i),o=no(i);return void 0===r?o:(r?delete i.disabled:i.disabled=!0,r===o||a||(n(),r?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),r)}},Uc=function e(t,n,r){ka(this,e);var i=t.masterPlaylistController_,a=t.options_.smoothQualityChange,o=a?"smooth":"fast",s=i[o+"QualityChange_"].bind(i);if(n.attributes.RESOLUTION){var c=n.attributes.RESOLUTION;this.width=c.width,this.height=c.height}this.bandwidth=n.attributes.BANDWIDTH,this.id=r,this.enabled=Nc(t.playlists,n.uri,s)},Mc=function(e){var t=e.playlists;e.representations=function(){return t.master.playlists.filter(function(e){return!to(e)}).map(function(t,n){return new Uc(e,t,t.uri)})}},Fc=["seeking","seeked","pause","playing","error"],Bc=function(){function e(t){var n=this;ka(this,e),this.tech_=t.tech,this.seekable=t.seekable,this.seekTo=t.seekTo,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=$s("PlaybackWatcher"),this.logger_("initialize");var r=function(){return n.monitorCurrentTime_()},i=function(){return n.techWaiting_()},a=function(){return n.cancelTimer_()},o=function(){return n.fixesBadSeeks_()};this.tech_.on("seekablechanged",o),this.tech_.on("waiting",i),this.tech_.on(Fc,a),this.tech_.on("canplay",r),this.dispose=function(){n.logger_("dispose"),n.tech_.off("seekablechanged",o),n.tech_.off("waiting",i),n.tech_.off(Fc,a),n.tech_.off("canplay",r),n.checkCurrentTimeTimeout_&&rt.a.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}return Ta(e,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&rt.a.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=rt.a.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Io>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var e=this.tech_.seeking(),t=this.seekable(),n=this.tech_.currentTime(),r=void 0;if(e&&this.afterSeekableWindow_(t,n)){r=t.end(t.length-1)}if(e&&this.beforeSeekableWindow_(t,n)){r=t.start(0)+Io}return void 0!==r&&(this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+No(t)+". Seeking to "+r+"."),this.seekTo(r),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=Lo(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.seekTo(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.seekTo(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.buffered(),i=jo(r,t);if(this.videoUnderflow_(i,r,t))return this.cancelTimer_(),this.seekTo(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(i.length>0){var a=i.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+i.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t){return!!e.length&&t>e.end(e.length-1)+Io}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-Io)}},{key:"videoUnderflow_",value:function(e,t,n){if(0===e.length){var r=this.gapFromVideoUnderflow_(t,n);if(r)return this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),r=jo(t,n);this.cancelTimer_(),0!==r.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.seekTo(r.start(0)+Oo),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=Do(e),r=0;r<n.length;r++){var i=n.start(r),a=n.end(r);if(t-i<4&&t-i>2)return{start:i,end:a}}return null}}]),e}(),qc={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},Hc=function e(t,n){var r=0,i=0,a=Be.mergeOptions(qc,n);t.ready(function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var o=function(){i&&t.currentTime(i)},s=function(e){null!==e&&void 0!==e&&(i=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",o),t.src(e),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},c=function(){return Date.now()-r<1e3*a.errorInterval?void t.trigger({type:"usage",name:"hls-error-reload-canceled"}):a.getSource&&"function"==typeof a.getSource?(r=Date.now(),a.getSource.call(t,s)):void Be.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},u=function e(){t.off("loadedmetadata",o),t.off("error",c),t.off("dispose",e)},l=function(n){u(),e(t,n)};t.on("error",c),t.on("dispose",u),t.reloadSourceOnError=l},Vc=function(e){Hc(this,e)},zc="1.5.1";Be.use("*",function(e){return{setSource:function(e,t){t(null,e)},setCurrentTime:function(t){return e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(t),t},play:function(){e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(e.currentTime())}}});var Wc={PlaylistLoader:Ma,Playlist:uo,Decrypter:ht.a,AsyncStream:ht.b,decrypt:ht.c,utils:So,STANDARD_PLAYLIST_SELECTOR:Js,INITIAL_PLAYLIST_SELECTOR:Zs,comparePlaylistBandwidth:Ys,comparePlaylistResolution:Qs,xhr:ho()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(e){Object.defineProperty(Wc,e,{get:function(){return Be.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),Os[e]},set:function(t){if(Be.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0)return void Be.log.warn("value of Hls."+e+" must be greater than or equal to 0");Os[e]=t}})});var Gc="videojs-vhs",Yc=function(e){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)?"hls":/^application\/dash\+xml/i.test(e)?"dash":null},Qc=function(e,t){for(var n=t.media(),r=-1,i=0;i<e.length;i++)if(e[i].id===n.uri){r=i;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})},Xc=function(e,t){t.representations().forEach(function(t){e.addQualityLevel(t)}),Qc(e,t.playlists)};Wc.canPlaySource=function(){return Be.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Jc=function(e,t,n){if(!e)return e;var r={};for(var i in e)r[i]={audioContentType:'audio/mp4; codecs="'+n.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+t.attributes.CODECS+'"'},t.contentProtection&&t.contentProtection[i]&&t.contentProtection[i].pssh&&(r[i].pssh=t.contentProtection[i].pssh),"string"==typeof e[i]&&(r[i].url=e[i]);return Be.mergeOptions(e,r)},Kc=function(e){if("dash"===e.options_.sourceType){var t=Be.players[e.tech_.options_.playerId];if(t.eme){var n=Jc(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());n&&(t.currentSource().keySystems=n,t.eme.initializeMediaKeys&&t.eme.initializeMediaKeys())}}},Zc=function(){if(!window.localStorage)return null;var e=window.localStorage.getItem(Gc);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},eu=function(e){if(!window.localStorage)return!1;var t=Zc();t=t?Be.mergeOptions(t,e):e;try{window.localStorage.setItem(Gc,JSON.stringify(t))}catch(e){return!1}return t};Wc.supportsNativeHls=function(){var e=ot.a.createElement("video");return!!Be.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),Wc.supportsNativeDash=function(){return!!Be.getTech("Html5").isSupported()&&/maybe|probably/i.test(ot.a.createElement("video").canPlayType("application/dash+xml"))}(),Wc.supportsTypeNatively=function(e){return"hls"===e?Wc.supportsNativeHls:"dash"===e&&Wc.supportsNativeDash},Wc.isSupported=function(){return Be.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var tu=Be.getComponent("Component"),nu=function(e){function t(e,n,r){ka(this,t);var i=Ea(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r.hls));if(n.options_&&n.options_.playerId){var a=Be(n.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return Be.log.warn("player.hls is deprecated. Use player.tech().hls instead."),n.trigger({type:"usage",name:"hls-player-access"}),i},configurable:!0}),a.vhs=i,a.dash=i,i.player_=a}if(i.tech_=n,i.source_=e,i.stats={},i.setOptions_(),i.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(i.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return i.on(ot.a,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=ot.a.fullscreenElement||ot.a.webkitFullscreenElement||ot.a.mozFullScreenElement||ot.a.msFullscreenElement;t&&t.contains(i.tech_.el())&&i.masterPlaylistController_.smoothQualityChange_()}),i.on(i.tech_,"seeking",function(){this.tech_.seeking()&&0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),i.on(i.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),i.on(i.tech_,"play",i.play),i}return xa(t,e),Ta(t,[{key:"setOptions_",value:function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Zc();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Os.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Os.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange"].forEach(function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(e,t){var n=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Wc,this.options_.sourceType=Yc(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e),n.setCurrentTime(e)},this.masterPlaylistController_=new Dc(this.options_),this.playbackWatcher_=new Bc(Be.mergeOptions(this.options_,{seekable:function(){return n.seekable()}})),this.masterPlaylistController_.on("error",function(){Be.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Wc.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Wc.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=void 0;return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){Be.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Mo(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Mo(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){n.options_.useBandwidthFromLocalStorage&&eu({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){Mc(n),Kc(n)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return n.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(Be.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,t=Be.players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Xc(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){Qc(e.qualityLevels_,e.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,Ca(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"convertToStreamTime",value:function(e,t){return $o({playlist:this.masterPlaylistController_.media(),time:e,callback:t})}},{key:"seekToStreamTime",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return Ao({streamTime:e,playlist:this.masterPlaylistController_.media(),retryCount:r,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}]),t}(tu),ru={name:"videojs-http-streaming",VERSION:zc,canHandleSource:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Be.mergeOptions(Be.options,t);return ru.canPlayType(e.type,n)},handleSource:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Be.mergeOptions(Be.options,n);return t.hls=new nu(e,t,r),t.hls.xhr=ho(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Be.mergeOptions(Be.options,t),r=n.hls.overrideNative,i=Yc(e);return!i||Wc.supportsTypeNatively(i)&&!r?"":"maybe"}};void 0!==Be.MediaSource&&void 0!==Be.URL||(Be.MediaSource=ks,Be.URL=Ts),ks.supportsNativeMediaSources()&&Be.getTech("Html5").registerSourceHandler(ru,0),Be.HlsHandler=nu,Be.HlsSourceHandler=ru,Be.Hls=Wc,Be.use||Be.registerComponent("Hls",Wc),Be.options.hls=Be.options.hls||{},Be.registerPlugin?Be.registerPlugin("reloadSourceOnError",Vc):Be.plugin("reloadSourceOnError",Vc),t.default=Be},function(e,t,n){"use strict";function r(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,a=r.index;if(Array.isArray(i))i.push(e);else if(a===t.length-2){var o=t.pop();i[o]=e}else t.push(e)}t.stringify=function(e){var t=[];t.push({obj:e});for(var n,r,i,a,o,s,c,u,l,d,f,h="";n=t.pop();)if(r=n.obj,i=n.prefix||"",a=n.val||"",h+=i,a)h+=a;else if("object"!=typeof r)h+=void 0===r?null:JSON.stringify(r);else if(null===r)h+="null";else if(Array.isArray(r)){for(t.push({val:"]"}),o=r.length-1;o>=0;o--)s=0===o?"":",",t.push({obj:r[o],prefix:s});t.push({val:"["})}else{c=[];for(u in r)r.hasOwnProperty(u)&&c.push(u);for(t.push({val:"}"}),o=c.length-1;o>=0;o--)l=c[o],d=r[l],f=o>0?",":"",f+=JSON.stringify(l)+":",t.push({obj:d,prefix:f});t.push({val:"{"})}return h},t.parse=function(e){for(var t,n,i,a,o,s,c,u,l,d=[],f=[],h=0;;)if("}"!==(t=e[h++])&&"]"!==t&&void 0!==t)switch(t){case" ":case"\t":case"\n":case":":case",":break;case"n":h+=3,r(null,d,f);break;case"t":h+=3,r(!0,d,f);break;case"f":h+=4,r(!1,d,f);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",h--;;){if(i=e[h++],!/[\d\.\-e\+]/.test(i)){h--;break}n+=i}r(parseFloat(n),d,f);break;case'"':for(a="",o=void 0,s=0;;){if('"'===(c=e[h++])&&("\\"!==o||s%2!=1))break;a+=c,o=c,"\\"===o?s++:s=0}r(JSON.parse('"'+a+'"'),d,f);break;case"[":u={element:[],index:d.length},d.push(u.element),f.push(u);break;case"{":l={element:{},index:d.length},d.push(l.element),f.push(l);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===d.length)return d.pop();r(d.pop(),d,f)}}},function(e,t,n){/**
 * angular-cache
 * @version 4.6.0 - Homepage <https://github.com/jmdobry/angular-cache>
 * @copyright (c) 2013-2016 angular-cache project authors
 * @license MIT <https://github.com/jmdobry/angular-cache/blob/master/LICENSE>
 * @overview angular-cache is a very useful replacement for Angular's $cacheFactory.
 */
!function(t,r){e.exports=r("undefined"==typeof angular?n(191):angular)}(0,function(e){"use strict";function t(e,t){if(e||(e=function(e){return e}),t||(t=function(e,t){return e===t}),"function"!=typeof e)throw new Error('BinaryHeap([weightFunc][, compareFunc]): "weightFunc" must be a function!');if("function"!=typeof t)throw new Error('BinaryHeap([weightFunc][, compareFunc]): "compareFunc" must be a function!');this.weightFunc=e,this.compareFunc=t,this.heap=[]}function n(e){var t=[],n=void 0;if(!v.isObject(e))return t;for(n in e)e.hasOwnProperty(n)&&t.push(n);return t}function r(e){return e&&"function"==typeof e.then}function i(e){return v.isNumber(e)?e.toString():e}function a(e){var t={},n=void 0;if(!v.isObject(e))return t;for(n in e)e.hasOwnProperty(n)&&(t[n]=n);return t}function o(e,o){if(e in m)throw new Error(e+" already exists!");if(!v.isString(e))throw new Error("cacheId must be a string!");var s={},c={},u=null,d=new t(function(e){return e.expires},v.equals),f=new t(function(e){return e.accessed},v.equals),h=m[e]={$$id:e,destroy:function(){clearInterval(this.$$cacheFlushIntervalId),clearInterval(this.$$recycleFreqId),this.removeAll(),u&&(u().removeItem(this.$$prefix+".keys"),u().removeItem(this.$$prefix)),u=null,s=null,f=null,d=null,this.$$prefix=null,delete m[this.$$id]},disable:function(){this.$$disabled=!0},enable:function(){delete this.$$disabled},get:function(e,t){var n=this;if(Array.isArray(e)){var r=function(){var r=e,i=[];return r.forEach(function(e){var r=n.get(e,t);null!==r&&void 0!==r&&i.push(r)}),{v:i}}();if("object"===(void 0===r?"undefined":l.typeof(r)))return r.v}else if(e=i(e),this.$$disabled)return;if(t=t||{},!v.isString(e))throw new Error("key must be a string!");if(t&&!v.isObject(t))throw new Error("options must be an object!");if(t.onExpire&&!v.isFunction(t.onExpire))throw new Error("options.onExpire must be a function!");var a=void 0;if(u){if(c[e])return c[e];var o=u().getItem(this.$$prefix+".data."+e);if(!o)return;a=v.fromJson(o)}else if(v.isObject(s)){if(!(e in s))return;a=s[e]}var d=a.value,h=(new Date).getTime();return u?(f.remove({key:e,accessed:a.accessed}),a.accessed=h,f.push({key:e,accessed:h})):(f.remove(a),a.accessed=h,f.push(a)),"passive"===this.$$deleteOnExpire&&"expires"in a&&a.expires<h?(this.remove(e),this.$$onExpire?this.$$onExpire(e,a.value,t.onExpire):t.onExpire&&t.onExpire.call(this,e,a.value),d=void 0):u&&u().setItem(this.$$prefix+".data."+e,JSON.stringify(a)),d},info:function(e){if(e){var t=void 0;if(u){var n=u().getItem(this.$$prefix+".data."+e);return n?(t=v.fromJson(n),{created:t.created,accessed:t.accessed,expires:t.expires,isExpired:(new Date).getTime()-t.created>(t.maxAge||this.$$maxAge)}):void 0}return v.isObject(s)&&e in s?(t=s[e],{created:t.created,accessed:t.accessed,expires:t.expires,isExpired:(new Date).getTime()-t.created>(t.maxAge||this.$$maxAge)}):void 0}return{id:this.$$id,capacity:this.$$capacity,maxAge:this.$$maxAge,deleteOnExpire:this.$$deleteOnExpire,onExpire:this.$$onExpire,cacheFlushInterval:this.$$cacheFlushInterval,recycleFreq:this.$$recycleFreq,storageMode:this.$$storageMode,storageImpl:u?u():void 0,disabled:!!this.$$disabled,size:f&&f.size()||0}},keys:function(){if(u){var e=u().getItem(this.$$prefix+".keys");return e?v.fromJson(e):[]}return n(s)},keySet:function(){if(u){var e=u().getItem(this.$$prefix+".keys"),t={};if(e)for(var n=v.fromJson(e),r=0;r<n.length;r++)t[n[r]]=n[r];return t}return a(s)},put:function(e,t,n){var a=this;n||(n={});var o="storeOnResolve"in n?!!n.storeOnResolve:this.$$storeOnResolve,l="storeOnReject"in n?!!n.storeOnReject:this.$$storeOnReject,h=function(t,n){return function(r){if(t&&(delete c[e],v.isObject(r)&&"status"in r&&"data"in r?(r=[r.status,r.data,r.headers(),r.statusText],a.put(e,r)):a.put(e,r)),n){if(v.Promise)return v.Promise.reject(r);throw r}return r}};if(!this.$$disabled&&v.isObject(s)&&null!==t&&void 0!==t){if(e=i(e),!v.isString(e))throw new Error("key must be a string!");var p=(new Date).getTime(),g={key:e,value:r(t)?t.then(h(o,!1),h(l,!0)):t,created:void 0===n.created?p:n.created,accessed:void 0===n.accessed?p:n.accessed};if(n.maxAge&&(g.maxAge=n.maxAge),void 0===n.expires?g.expires=g.created+(g.maxAge||this.$$maxAge):g.expires=n.expires,u){if(r(g.value))return c[e]=g.value,c[e];var m=u().getItem(this.$$prefix+".keys"),y=m?v.fromJson(m):[];u().getItem(this.$$prefix+".data."+e)&&this.remove(e),d.push({key:e,expires:g.expires}),f.push({key:e,accessed:g.accessed}),u().setItem(this.$$prefix+".data."+e,JSON.stringify(g));for(var b=!1,_=0;_<y.length;_++)if(y[_]===e){b=!0;break}b||y.push(e),u().setItem(this.$$prefix+".keys",JSON.stringify(y))}else s[e]&&this.remove(e),d.push(g),f.push(g),s[e]=g,delete c[e];return f.size()>this.$$capacity&&this.remove(f.peek().key),t}},remove:function(e){if(e+="",delete c[e],u){var t=u().getItem(this.$$prefix+".data."+e);if(t){var n=v.fromJson(t);f.remove({key:e,accessed:n.accessed}),d.remove({key:e,expires:n.expires}),u().removeItem(this.$$prefix+".data."+e);var r=u().getItem(this.$$prefix+".keys"),i=r?v.fromJson(r):[],a=i.indexOf(e);return a>=0&&i.splice(a,1),u().setItem(this.$$prefix+".keys",JSON.stringify(i)),n.value}}else if(v.isObject(s)){var o=s[e]?s[e].value:void 0;return f.remove(s[e]),d.remove(s[e]),s[e]=null,delete s[e],o}},removeAll:function(){if(u){f.removeAll(),d.removeAll();var e=u().getItem(this.$$prefix+".keys");if(e)for(var t=v.fromJson(e),n=0;n<t.length;n++)this.remove(t[n]);u().setItem(this.$$prefix+".keys",JSON.stringify([]))}else if(v.isObject(s)){f.removeAll(),d.removeAll();for(var r in s)s[r]=null;s={}}else f.removeAll(),d.removeAll(),s={};c={}},removeExpired:function(){for(var e=(new Date).getTime(),t={},n=void 0,r=void 0;(r=d.peek())&&r.expires<=e;)t[r.key]=r.value?r.value:null,d.pop();if(u)for(n in t){var i=u().getItem(this.$$prefix+".data."+n);i&&(t[n]=v.fromJson(i).value,this.remove(n))}else for(n in t)this.remove(n);if(this.$$onExpire)for(n in t)this.$$onExpire(n,t[n]);return t},setCacheFlushInterval:function(e){var t=this;if(null===e)delete t.$$cacheFlushInterval;else{if(!v.isNumber(e))throw new Error("cacheFlushInterval must be a number!");if(e<0)throw new Error("cacheFlushInterval must be greater than zero!");e!==t.$$cacheFlushInterval&&(t.$$cacheFlushInterval=e,clearInterval(t.$$cacheFlushIntervalId),t.$$cacheFlushIntervalId=setInterval(function(){t.removeAll()},t.$$cacheFlushInterval))}},setCapacity:function(e){if(null===e)delete this.$$capacity;else{if(!v.isNumber(e))throw new Error("capacity must be a number!");if(e<0)throw new Error("capacity must be greater than zero!");this.$$capacity=e}for(var t={};f.size()>this.$$capacity;)t[f.peek().key]=this.remove(f.peek().key);return t},setDeleteOnExpire:function(e,t){if(null===e)delete this.$$deleteOnExpire;else{if(!v.isString(e))throw new Error("deleteOnExpire must be a string!");if("none"!==e&&"passive"!==e&&"aggressive"!==e)throw new Error('deleteOnExpire must be "none", "passive" or "aggressive"!');this.$$deleteOnExpire=e}!1!==t&&this.setRecycleFreq(this.$$recycleFreq)},setMaxAge:function(e){if(null===e)this.$$maxAge=Number.MAX_VALUE;else{if(!v.isNumber(e))throw new Error("maxAge must be a number!");if(e<0)throw new Error("maxAge must be greater than zero!");this.$$maxAge=e}var t=void 0,r=void 0,i=void 0;if(d.removeAll(),u){var a=u().getItem(this.$$prefix+".keys");for(r=a?v.fromJson(a):[],t=0;t<r.length;t++){i=r[t];var o=u().getItem(this.$$prefix+".data."+i);if(o){var c=v.fromJson(o);this.$$maxAge===Number.MAX_VALUE?c.expires=Number.MAX_VALUE:c.expires=c.created+(c.maxAge||this.$$maxAge),d.push({key:i,expires:c.expires})}}}else for(r=n(s),t=0;t<r.length;t++)i=r[t],this.$$maxAge===Number.MAX_VALUE?s[i].expires=Number.MAX_VALUE:s[i].expires=s[i].created+(s[i].maxAge||this.$$maxAge),d.push(s[i]);return"aggressive"===this.$$deleteOnExpire?this.removeExpired():{}},setOnExpire:function(e){if(null===e)delete this.$$onExpire;else{if(!v.isFunction(e))throw new Error("onExpire must be a function!");this.$$onExpire=e}},setOptions:function(e,t){if(e=e||{},t=!!t,!v.isObject(e))throw new Error("cacheOptions must be an object!");"storagePrefix"in e?this.$$storagePrefix=e.storagePrefix:t&&(this.$$storagePrefix=g.storagePrefix),this.$$prefix=this.$$storagePrefix+this.$$id,"disabled"in e?this.$$disabled=!!e.disabled:t&&(this.$$disabled=g.disabled),"deleteOnExpire"in e?this.setDeleteOnExpire(e.deleteOnExpire,!1):t&&this.setDeleteOnExpire(g.deleteOnExpire,!1),"recycleFreq"in e?this.setRecycleFreq(e.recycleFreq):t&&this.setRecycleFreq(g.recycleFreq),"maxAge"in e?this.setMaxAge(e.maxAge):t&&this.setMaxAge(g.maxAge),"storeOnResolve"in e?this.$$storeOnResolve=!!e.storeOnResolve:t&&(this.$$storeOnResolve=g.storeOnResolve),"storeOnReject"in e?this.$$storeOnReject=!!e.storeOnReject:t&&(this.$$storeOnReject=g.storeOnReject),"capacity"in e?this.setCapacity(e.capacity):t&&this.setCapacity(g.capacity),"cacheFlushInterval"in e?this.setCacheFlushInterval(e.cacheFlushInterval):t&&this.setCacheFlushInterval(g.cacheFlushInterval),"onExpire"in e?this.setOnExpire(e.onExpire):t&&this.setOnExpire(g.onExpire),"storageMode"in e||"storageImpl"in e?this.setStorageMode(e.storageMode||g.storageMode,e.storageImpl||g.storageImpl):t&&this.setStorageMode(g.storageMode,g.storageImpl)},setRecycleFreq:function(e){if(null===e)delete this.$$recycleFreq;else{if(!v.isNumber(e))throw new Error("recycleFreq must be a number!");if(e<0)throw new Error("recycleFreq must be greater than zero!");this.$$recycleFreq=e}clearInterval(this.$$recycleFreqId),"aggressive"===this.$$deleteOnExpire?function(e){e.$$recycleFreqId=setInterval(function(){e.removeExpired()},e.$$recycleFreq)}(this):delete this.$$recycleFreqId},setStorageMode:function(e,t){function n(e,t){var n=this.keys(),r=n.length;if(r){for(var i=void 0,s=v.isObject(t),c=0;c<r;c++){if(i=n[c],e){var u=e().getItem(this.$$prefix+".data."+i);u&&(o[i]=v.fromJson(u))}else s&&(o[i]=t[i]);this.remove(i)}a=!0}}if(!v.isString(e))throw new Error("storageMode must be a string!");if("memory"!==e&&"localStorage"!==e&&"sessionStorage"!==e)throw new Error('storageMode must be "memory", "localStorage" or "sessionStorage"!');var r=u,i=s,a=!1,o={};if(this.$$initializing||n.call(this,r,i),this.$$storageMode=e,t){if(!v.isObject(t))throw new Error("storageImpl must be an object!");if(!("setItem"in t&&"function"==typeof t.setItem))throw new Error('storageImpl must implement "setItem(key, value)"!');if(!("getItem"in t&&"function"==typeof t.getItem))throw new Error('storageImpl must implement "getItem(key)"!');if(!("removeItem"in t)||"function"!=typeof t.removeItem)throw new Error('storageImpl must implement "removeItem(key)"!');u=function(){return t}}else if("localStorage"===this.$$storageMode)try{localStorage.setItem("cachefactory","cachefactory"),localStorage.removeItem("cachefactory"),u=function(){return localStorage}}catch(e){u=null,this.$$storageMode="memory"}else if("sessionStorage"===this.$$storageMode)try{sessionStorage.setItem("cachefactory","cachefactory"),sessionStorage.removeItem("cachefactory"),u=function(){return sessionStorage}}catch(e){u=null,this.$$storageMode="memory"}else u=null,this.$$storageMode="memory";if(this.$$initializing&&n.call(this,u,s),a){var c=void 0;for(var l in o)c=o[l],this.put(l,c.value,{created:c.created,accessed:c.accessed,expires:c.expires})}},touch:function(e,t){var n=this;if(e){var r=this.get(e,{onExpire:function(e,t){return n.put(e,t)}});r&&this.put(e,r,t)}else for(var i=this.keys(),a=0;a<i.length;a++)this.touch(i[a],t)},values:function(){for(var e=this.keys(),t=[],n=0;n<e.length;n++)t.push(this.get(e[n]));return t}};return h.$$initializing=!0,h.setOptions(o,!0),h.$$initializing=!1,h}function s(e,t){return o(e,t)}function c(){this.$get=function(){return s.BinaryHeap}}function u(){this.defaults=s.defaults,this.defaults.storagePrefix="angular-cache.caches.",this.$get=["$q",function(e){return s.utils.Promise=e,s}]}e="default"in e?e.default:e;var l={};l.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var d=function(e,t,n){for(var r=e[n],i=t(r);n>0;){var a=Math.floor((n+1)/2)-1,o=e[a];if(i>=t(o))break;e[a]=r,e[n]=o,n=a}},f=function(e,t,n){for(var r=e.length,i=e[n],a=t(i);;){var o=2*(n+1),s=o-1,c=null;if(s<r){t(e[s])<a&&(c=s)}if(o<r){t(e[o])<(null===c?a:t(e[s]))&&(c=o)}if(null===c)break;e[n]=e[c],e[c]=i,n=c}},h=t.prototype;h.push=function(e){this.heap.push(e),d(this.heap,this.weightFunc,this.heap.length-1)},h.peek=function(){return this.heap[0]},h.pop=function(){var e=this.heap[0],t=this.heap.pop();return this.heap.length>0&&(this.heap[0]=t,f(this.heap,this.weightFunc,0)),e},h.remove=function(e){for(var t=this.heap.length,n=0;n<t;n++)if(this.compareFunc(this.heap[n],e)){var r=this.heap[n],i=this.heap.pop();return n!==t-1&&(this.heap[n]=i,d(this.heap,this.weightFunc,n),f(this.heap,this.weightFunc,n)),r}return null},h.removeAll=function(){this.heap=[]},h.size=function(){return this.heap.length};var p=null;try{p=window.Promise}catch(e){}var v={isNumber:function(e){return"number"==typeof e},isString:function(e){return"string"==typeof e},isObject:function(e){return null!==e&&"object"===(void 0===e?"undefined":l.typeof(e))},isFunction:function(e){return"function"==typeof e},fromJson:function(e){return JSON.parse(e)},equals:function(e,t){return e===t},Promise:p},g={capacity:Number.MAX_VALUE,maxAge:Number.MAX_VALUE,deleteOnExpire:"none",onExpire:null,cacheFlushInterval:null,recycleFreq:1e3,storageMode:"memory",storageImpl:null,disabled:!1,storagePrefix:"cachefactory.caches.",storeOnResolve:!1,storeOnReject:!1},m={};return s.createCache=o,s.defaults=g,s.info=function(){var e=n(m),t={size:e.length,caches:{}};for(var r in g)g.hasOwnProperty(r)&&(t[r]=g[r]);for(var i=0;i<e.length;i++){var a=e[i];t.caches[a]=m[a].info()}return t},s.get=function(e){return m[e]},s.keySet=function(){return a(m)},s.keys=function(){return n(m)},s.destroy=function(e){m[e]&&(m[e].destroy(),delete m[e])},s.destroyAll=function(){for(var e in m)m[e].destroy();m={}},s.clearAll=function(){for(var e in m)m[e].removeAll()},s.removeExpiredFromAll=function(){var e={};for(var t in m)e[t]=m[t].removeExpired();return e},s.enableAll=function(){for(var e in m)m[e].$$disabled=!1},s.disableAll=function(){for(var e in m)m[e].$$disabled=!0},s.touchAll=function(){for(var e in m)m[e].touch()},s.utils=v,s.BinaryHeap=t,s.utils.equals=e.equals,s.utils.isObject=e.isObject,s.utils.fromJson=e.fromJson,e.module("angular-cache",[]).provider("BinaryHeap",c).provider("CacheFactory",u),"angular-cache"})},function(e,t,n){n(650),e.exports="ngCookies"},function(e,t,n){n(652),e.exports="ngRoute"},function(e,t,n){n(653),e.exports="ngSanitize"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,i,o,s,u){var l=this,d={init:function(){e.currentPage="account-details",l.jumbotrontitle="Account Details",l.pageIntroBackgroundImageName="HG1200xVariable-Account.png",l.linktext='<i class="fa fa-chevron-left mr5"></i> Back to Subscription Settings',l.link=i.getPath("myAccount"),l.b2bEnabled=u.getFlagStatus("b2b"),d.setScopeFunctions(),d.loadPageContent()},setScopeFunctions:function(){l.submitUserData=function(){d.addSpinner(),d.removeFormStatuses();var e=$(".account-details-form form :input"),t={billingCountry:l.userData.billingCountry||"",billingZone:l.userData.billingZone||""};e.each(function(){var e=$(this).attr("data-mapping");e&&(t[e]=$(this).val())});var n=d.validateUserAccountDetails(t);if(n.length>0)return d.highlightFormFails(n),void d.removeSpinner();Object.assign(t,{billingAddressId:l.userData.billingAddressId}),d.updateUserDetails(t).finally(d.removeSpinner)},l.cdnUrl=function(e){return i.cdnUrl(e)},l.updateBillingZones=function(){l.userData.billingZone=!1,d.setCountryZones(l.userData.billingCountry).finally(d.removeSpinner)}},loadPageContent:function(){return d.addSpinner(),d.setUserDetails().then(d.setB2bDetails).finally(d.removeSpinner)},getLocation:function(){return n.getCountryFromIp().then(function(e){l.country=e})},setUserDetails:function(){return t.getUserDetails().then(function(e){e&&(c("Setting user details:",e),l.userData=e,l.isCityRequired=!0,d.setCountries(),d.setCountryZones(l.userData.billingCountry))}).catch(function(e){c("Setting user details error:",e),r.addAlert("We cannot get your account details right now")})},setCountries:function(){return d.getLocation().then(function(){return n.getCountries()}).then(function(e){return"IN"!==l.country?l.countries=e.filter(function(e){return"IN"!==e.iso2Code}):l.countries=e,l.countries})},setCountryZones:function(e){return n.getCountryZones(e,!0).then(function(e){l.countryZones=e,e&&e.length>0&&!l.userData.billingZone&&(l.userData.billingZone=e[0].id)})},setB2bDetails:function(){return l.b2bEnabled?s.getB2bRoleMaps().then(function(e){if(e&&e.length>0){var t=a(e,1),n=t[0];l.userData.b2bEmail=n.userEmail,l.isB2bUser=!0}}):void(l.isB2bUser=!1)},updateUserDetails:function(e){return t.updateUserDetails(e).then(function(){return r.addAlert("Details updated successfully","success")}).catch(function(e){return r.addAlert(e.message,"danger")}).finally(function(){$("#current-password, #password, #confirm-password").val("")})},updateFail:function(e){$("#update-result").addClass("fail-status"),$("#update-result").html(e),$(".message-container").show(),$("html, body").animate({scrollTop:0},"fast")},highlightFormFails:function(e){e.forEach(function(e,t){$("."+e.field+"-input").addClass("has-error"),$("#"+e.field+"-error-message").html(e.error)})},removeFormStatuses:function(){var e=["mail","first-name","last-name","password","current-password","billing-street1","billing-country","billing-postal-code"];$(".message-container").hide(),$("#update-result").removeClass(),e.forEach(function(e,t){$("."+e+"-input").removeClass("has-error"),$("#"+e+"-error-message").empty()})},validateUserAccountDetails:function(e){var t=[];return!e.currentPassword&&e.password&&t.push({field:"current-password",error:"You must enter your current password when updating your password."}),e.password!==e.confirmPassword&&t.push({field:"password",error:"The passwords do not match."}),o.getEmailFromAccessToken()===e.mail||e.currentPassword||t.push({field:"current-password",error:"You must enter your current password when updating your email."}),e.billingCity||t.push({field:"billing-city",error:"You must enter a city."}),e.firstName||t.push({field:"first-name",error:"You must enter a first name."}),e.lastName||t.push({field:"last-name",error:"You must enter a last name."}),e.mail||t.push({field:"mail",error:"You must enter an email address."}),e.billingStreet1||t.push({field:"billing-street1",error:"You must enter an address."}),e.billingCountry||t.push({field:"billing-country",error:"You must select a country."}),e.billingPostalCode||t.push({field:"billing-postal-code",error:"You must enter a postcode."}),t},addSpinner:function(){l.loading=!0},removeSpinner:function(){l.loading=!1}};d.init()}var a=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(44),s=r(o);i.$inject=["$rootScope","userService","utilitiesService","alertService","configService","authService","b2bService","featureFlagsService"];var c=(0,s.default)("account-details-controller");angular.module("PacktUnlimited.controllers").controller("account",i),i.$inject=["$rootScope","userService","utilitiesService","alertService","configService","authService","b2bService","featureFlagsService"]},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o,s){var c=this,u={userVat:0,init:function(){e.currentPage="billing-details",c.jumbotrontitle="Billing Details",c.pageIntroBackgroundImageName="HG1200xVariable-Account.png",c.linktext='<i class="fa fa-chevron-left mr5"></i> Back to Subscription Settings',c.link=o.getPath("myAccount"),c.displayBillingMessage=!1,u.setScopeFunctions(),u.loadPageContent()},setScopeFunctions:function(){c.hasSubscription=!1,c.currentInvoicePage=1,c.getInvoice=function(e){return u.addSpinner(),r.getInvoice(e).then(function(t){if(!t)throw new Error;var n,r,i="invoice-"+e+".pdf",a=document.createElement("a");document.body.appendChild(a),a.style="display: none",n=new Blob([t],{type:"application/pdf"}),r=window.URL.createObjectURL(n),a.href=r,a.download=i,a.click(),a.remove()}).catch(function(){a.addAlert("Something went wrong, please retry or get in touch with us.")}).finally(u.removeSpinner)},c.clickPagination=function(e){u.addSpinner(),c.currentInvoicePage=e,u.getInvoices(e).finally(u.removeSpinner)}},loadPageContent:function(){u.addSpinner(),n.getSubscriberAccount().then(function(e){return e&&e.data?(u.userCurrency=e.data.currency,n.getTaxForCountryOrZone(e.data.billingAddress.country,e.data.billingAddress.state)):0}).then(function(e){return e&&(u.userVat=e),n.getUserSubscriptions()}).then(function(e){c.subscriptions=[],c.cancelledSubscriptionsNotice="",e&&"success"===e.status&&0!==e.data.length&&(c.subscriptions=e.data,c.currentSubscription=c.subscriptions.find(function(e){return new Date(e.renewalDate)>new Date}),c.hasSubscription=!!c.currentSubscription,c.isLegacySubscription=c.currentSubscription.legacySubscriptionId&&""!==c.currentSubscription.legacySubscriptionId,c.hasSubscription&&(c.displayBillingMessage="active"===c.currentSubscription.subscriptionStatus,c.currentSubscription.total=u.getSubscriptionPrice(c.currentSubscription.pricing,u.userCurrency,u.userVat)))}).then(function(){return u.getInvoices(1)}).then(function(){return n.hasLegacySubscription()}).then(function(e){c.hasLegacySubscription=!!e,c.legacyInvoicesUrl=o.getPath("orderHistory",!1)}).finally(u.removeSpinner)},getInvoices:function(e){return r.getInvoices(e).then(function(e){e&&e.data&&e.data.invoices&&(e.data.invoices.forEach(function(e,t){c.subscriptions.find(function(t){return e.subscriptionId===t.subscriptionId})||(c.cancelledSubscriptionsNotice="* Invoice balances for billing periods where you changed your subscription will automatically be applied to future invoices."),e.subTotalAmount=i.getCurrencySymbol(u.userCurrency)+e.subTotalAmount.toFixed(2),e.totalAmount=i.getCurrencySymbol(u.userCurrency)+e.totalAmount.toFixed(2),e.taxAmount=i.getCurrencySymbol(u.userCurrency)+e.taxAmount.toFixed(2)}),c.invoices=e.data.invoices,c.hasNextInvoicePage=e.data.nextPage)})},getSubscriptionPrice:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";return e&&e.prices&&e.prices.forEach(function(e){if(e.currency===t){var a=i.calculateTaxes(e.price,n);r=i.getCurrencySymbol(t)+a.total.toFixed(2)}}),r},addSpinner:function(){c.loading=!0},removeSpinner:function(){c.loading=!1}};u.init()}r.$inject=["$rootScope","userService","subscriptionService","invoiceService","utilitiesService","alertService","configService","$location"],angular.module("PacktUnlimited.controllers").controller("billing",r),r.$inject=["$rootScope","userService","subscriptionService","invoiceService","utilitiesService","alertService","configService","$location"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i,a,o,s,c){"ngInject";r(this,e),this.$rootScope=t,this.$location=n,this.utilitiesService=i,this.subscriptionService=a,this.configService=o,this.cancellationService=s,this.featureFlagsService=c,this.init()}return e.$inject=["$rootScope","$location","utilitiesService","subscriptionService","configService","cancellationService","featureFlagsService"],a(e,[{key:"init",value:function(){var e=this;this.featureFlagsService.getFlagStatus("cancellation")||this.$location.url(this.configService.getPath("home")),this.$rootScope.currentPage="cancellation",this.utilitiesService.unsetNightmode(),this.addSpinner(),this.subscriptionService.getUserSubscriptions(!0).then(function(t){var n=i(t.data,1);e.subscription=n[0],e.initVars()})}},{key:"initVars",value:function(){var e=this;switch(this.$location.search().cancellationId?this.cancellationId=this.$location.search().cancellationId:this.cancellationService.createNewCancellation(this.subscription.ratePlanId).then(function(t){e.cancellationId=t.id}),this.pageTitle="Manage your Subscription",this.pageSubtitle="Manage your plan, billing details, and account information",this.pageIntroBackgroundImageName="HG1200xVariable-Account.png",this.backLink=this.configService.getPath("myAccount"),this.reasonId=this.$location.search().reasonId,this.step=this.$location.search().step||"1",this.step){case"1":this.setOptions(this.subscription.pricing.pricingModel,this.subscription.freeTrial).then(function(t){e.options=e.shuffle(t),e.removeSpinner()});break;case"2":this.reasonId?this.cancellationService.getCancellationReason(this.reasonId).then(function(t){e.reason=t,e.removeSpinner()}):(this.step=1,this.removeSpinner());break;case"3":this.removeSpinner()}}},{key:"setOptions",value:function(e,t){var n="monthly"===e?"MONTHLY":"MULTI_MONTH";return t&&(n="FREE_TRIAL"),this.cancellationService.filterCancellationReasons(n)}},{key:"shuffle",value:function(e){for(var t=e.length-1;t>0;t-=1){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}var i=e.find(function(e){return"Other"===e.title});return i&&(e.splice(e.indexOf(i),1),e.push(i)),e}},{key:"submitOption",value:function(e){var t=this;if(this.loading=!0,e){var n=this.options.find(function(t){return t.title===e}),r=this.options.indexOf(n)+1,i=n.id;null===n.followupType?this.cancellationService.editCancellation(this.cancellationId,{reasonPosition:r,reasonId:i}).then(function(){t.subscriptionService.updateUserSubscriptionStatus(t.subscription.subscriptionId,"paused")}).then(function(){t.subscriptionService.clearGetSubscriptionCache(),t.loading=!1,t.$location.search({step:"3",cancellationId:t.cancellationId})}):this.cancellationService.editCancellation(this.cancellationId,{reasonPosition:r,reasonId:i}).then(function(){t.loading=!1,t.$location.search({step:"2",cancellationId:t.cancellationId,reasonId:i})})}}},{key:"submitComments",value:function(e,t){var n=this;this.loading=!0;var r={followupResponse:e};return t&&(r.followupDropdownResponse=t),this.cancellationService.editCancellation(this.cancellationId,r).then(function(){n.subscriptionService.updateUserSubscriptionStatus(n.subscription.subscriptionId,"paused")}).then(function(){n.subscriptionService.clearGetSubscriptionCache(),n.loading=!1,n.$location.search({step:"3",cancellationId:n.cancellationId,reasonId:n.reasonId})})}},{key:"back",value:function(){this.$location.search("step","1")}},{key:"addSpinner",value:function(){this.loading=!0}},{key:"removeSpinner",value:function(){this.loading=!1}}]),e}();angular.module("PacktUnlimited.controllers").controller("cancellation",o)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){var s=this,c={init:function(){o.currentPage="card-details",s.jumbotrontitle="Card Details",s.pageIntroBackgroundImageName="HG1200xVariable-Account.png",s.linktext='<i class="fa fa-chevron-left mr5"></i> Back to Subscription Settings',s.link=n.getPath("myAccount"),c.loadPageContent()},loadPageContent:function(){return s.loading=!0,c.userHasAllRequiredAccountData().then(function(e){e?c.bindEvents():(t.addAlert("Please complete your account information."),r.path(n.getPath("accountDetails")))}).finally(function(){s.loading=!1})},userHasAllRequiredAccountData:function(){var t;return e.getUserDetails().then(function(n){return t=n,e.getMetaData()}).then(function(e){return i.buildGeneralSubscriptionUserData(t,e.currency)}).then(function(e){return""!==e.currency&&""!==e.billingAddress.firstName&&""!==e.billingAddress.address1&&""!==e.billingAddress.country&&""!==e.billingAddress.zipCode&&""!==e.billingAddress.personalEmail})},bindEvents:function(){a.$on("$destroy",function(){o.isUpgradingSubsWithLegacyPayment=!1,o.upgradingLegacySubsInfo={}})}};c.init()}r.$inject=["userService","alertService","configService","$location","subscriptionService","$scope","$rootScope"],angular.module("PacktUnlimited.controllers").controller("card",r),r.$inject=["userService","alertService","configService","$location","subscriptionService","$scope","$rootScope"]},function(e,t,n){"use strict";function r(e,t,n,r,o,s,c,u,l,d,f,h,p){var v=this,g={init:function(){d.currentPage="my-account",v.pageIntroBackgroundImageName="HG1200xVariable-Account.png",v.laptopImageUrl=v.cdnUrl("subs-account-laptop.png"),v.teamsLaptopImageUrl=v.cdnUrl("teams-account-laptop.png"),g.setScopeVariables(),g.getAccountData().then(function(){var e={email:v.email};e.ratePlanId=(0,a.get)(v,"userSubscription.ratePlanId"),e.freeTrial=(0,a.get)(v,"userSubscription.freeTrial"),e.firstname=(0,a.get)(v,"name.firstName"),e.surname=(0,a.get)(v,"name.lastName"),f.addEvent("my_account_load",e)}),r.unsetNightmode()},setScopeVariables:function(){v.newCancellation=c.getFlagStatus("cancellation"),v.b2bEnabled=c.getFlagStatus("b2b"),v.isB2bUser=!1,v.isB2bAdmin=!1,v.updateDetailsUrl=n.getPath("accountDetails"),v.emailPreferencesUrl=n.getPath("emailPreferences"),v.link=n.getPath("myAccount"),v.subscriptionSettingsPage="https://subscription.packtpub.com"+v.link,v.updateCardDetailsUrl=n.getPath("cardDetails"),v.updateBillingDetailsUrl=n.getPath("billingDetails"),v.upgradeSubscriptionUrl=n.getPath("upgrades"),v.cancellationUrl=n.getPath("cancellation"),v.primaryButton=g.getButtonObjectInfo("hidden"),v.secondaryButton=g.getButtonObjectInfo("hidden"),v.showUpgradeButton=!1,v.supportEmail=n.supportEmail,g.searchParams=o.search(),d.subscriptionExistsError&&(v.subscriptionExistsError=!0,d.subscriptionExistsError=!1),g.searchParams&&"true"===g.searchParams.upgraded&&(v.upgraded=!0)},getAccountData:function(){return g.addSpinner(),e.getMetaData().then(function(e){e&&(v.email=e.mail,v.name=e.name)}).then(g.getB2bDetails).then(function(e){if(e)return p.getDefaultPaymentMethod(e.id).then(g.setB2bPaymentMethod)}).then(g.getSubscription).catch(function(){v.userSubscription=!1}).finally(g.removeSpinner)},getSubscription:function(){return t.getUserSubscriptions().then(function(e){if("success"!==e.status||!e.data[0])throw new Error("No subscription account.");return v.userSubscription=e.data[0],v.subscriptionFeatures=t.getSubscriptionFeatures(v.userSubscription.productDescription),t.getPaymentMethods(!0)}).then(function(e){if(v.hasLegacyPayment=0===Object.keys(e).length,!v.hasLegacyPayment){var t=e.cardType?e.cardType.toLowerCase():"";v.faClass=r.getPaymentIcon(t),v.cardNumber=e.cardNumber||""}}).then(function(){return t.canUpgrade(v.userSubscription)}).then(function(e){return v.showUpgradeButton=e,g.setButtonsTextFromSubscriptionCurrentStatus()})},getB2bDetails:function(){return v.b2bEnabled?h.getB2bRolesAndSubjects().then(function(e){var t=e[0].subjects.accounts[0];return v.b2bAccountId=t,v.isB2bUser=!!e.filter(function(e){return"learner"===e.identifier}).length,v.isB2bAdmin=!!e.filter(function(e){return"customer-admin"===e.identifier}).length,l.all([p.getActiveSubscription(t),h.getB2bAccountById(t)])}).then(function(e){var t=i(e,2),n=t[0],r=t[1],a=n.find(function(e){return"active"===e.packtSubscriptionStatus});return v.b2bSubscription=a,v.b2bRenewalDate=a.renewalDate,g.setB2bAutoRenewalInfo(a),r}).catch(function(){return null}):l.resolve(null)},setB2bPaymentMethod:function(e){if("paypal"===e.type)v.paypalEmail=e.email;else if("card"===e.type){var t=("0"+e.expiryMonth).slice(-2);v.cardNumber=""+e.maskedCardNumber||"",v.expiryDate=t+"/"+e.expiryYear}},setB2bAutoRenewalInfo:function(e){v.b2bAutoRenewalBtnText=!0===e.autoRenew?"Disable Auto-Renewal":"Enable Auto-Renewal"},updateB2bAutoRenewal:function(){v.loadingAutoRenewal=!0,p.updateSubscription(v.b2bAccountId,v.b2bSubscription.id,{autoRenew:!v.b2bSubscription.autoRenew}).then(function(e){return v.b2bSubscription=e,s.addAlert("Auto-renewal status has been updated successfully!","success"),v.b2bSubscription}).catch(function(){return s.addAlert("Updating auto-renewal status failed! Please try again!","danger"),v.b2bSubscription}).then(function(e){v.loadingAutoRenewal=!1,g.setB2bAutoRenewalInfo(e)})},setButtonsTextFromSubscriptionCurrentStatus:function(){g.addSpinner();var e=void 0,r=!1;return t.hasLegacySubscription(!0).then(function(e){e&&(r=!!e)}).then(t.getUserSubscriptions).then(function(n){if("fail"!==n.status&&n.data[0])return e=n.data[0],t.getPaymentMethods()}).then(function(i){if(e){v.primaryButton=g.getButtonObjectInfo("hidden"),v.secondaryButton=g.getButtonObjectInfo("hidden");var a=e.subscriptionStatus,o=e.pricing.pricingModel,s=r&&"Month"===o,c=r&&e.freeTrial,l=0!==Object.keys(i.data).length,d=!e.legacySubscriptionId||e.legacySubscriptionId&&l,f=u("date_with_suffix")(e.renewalDate),h=new Date(e.renewalDate),p=new Date;if(v.subscriptionStatusText="Your plan is due for renewal on <strong>"+f+"</strong>",h>p&&!l&&(v.subscriptionStatusText="Your plan is due for renewal on <strong>"+f+'</strong>. Update your <a href="'+n.getPath("cardDetails")+'">payment details</a> to allow your subscription to auto renew.'),d||s||c||(v.subscriptionStatusText="Your plan is due to expire on <strong>"+f+"</strong>"),h<p&&!l?v.subscriptionStatusText="Your plan expired on <strong>"+f+'</strong>. Update your <a href="'+n.getPath("cardDetails")+'">payment details</a> to re-activate your subscription.':h<p&&(v.subscriptionStatusText="Your plan expired on <strong>"+f+"</strong>."),"complete"!==e.creationStatus&&(v.subscriptionStatusText="",v.hideRenewalDate=!0),e.failedPayment&&(v.subscriptionStatusText='Your last payment failed, please try updating your <a href="'+n.getPath("cardDetails")+'">payment details </a>before resuming your subscription',v.hideRenewalDate=!0),t.isMultiMonthSubscription(o)&&r&&!l&&g.setLegacySubscriptionStatusText(e),s&&("paused"===a||"cancelled"===a)&&!d){var m="will expire";h<p&&(m="expired"),v.subscriptionStatusText="Your plan "+m+" on <strong>"+f+'</strong>. Update your <a href="'+n.getPath("cardDetails")+'">payment details</a> to resume your subscription.',v.hideRenewalDate=!0}switch(v.hideRenewalDate=!!v.hideRenewalDate,a){case"paused":"Month"===o?d&&(v.primaryButton=g.getButtonObjectInfo("resume")):t.isMultiMonthSubscription(o)&&d&&(v.primaryButton=g.getButtonObjectInfo("enable-auto"));break;case"cancelled":"Month"===o&&d&&(v.primaryButton=g.getButtonObjectInfo("resume"));break;case"active":default:e.freeTrial?v.secondaryButton=g.getButtonObjectInfo("cancel-trial"):"Month"===o?v.secondaryButton=g.getButtonObjectInfo("cancel"):t.isMultiMonthSubscription(o)&&(v.secondaryButton=g.getButtonObjectInfo("disable-auto"))}g.primaryButtonAction=v.primaryButton.action,g.secondaryButtonAction=v.secondaryButton.action}}).finally(g.removeSpinner)},setLegacySubscriptionStatusText:function(e){var i=u("date_with_suffix")(e.renewalDate),a="\n        Your subscription is due to expire on\n        <strong>"+i+'</strong>. Update your\n        <a href="'+n.getPath("cardDetails")+'">payment details</a> to\n        auto renew on this date\n      ';e.legacySubscriptionPrice?t.getSubscriberAccount().then(function(e){return g.currency=e.data.currency,t.getTaxForCountryOrZone(e.data.billingAddress.country,e.data.billingAddress.state)}).then(function(t){return r.getPriceWithTax(e.legacySubscriptionPrice,t)}).then(function(e){if(e){var t=r.getCurrencySymbol(g.currency);v.subscriptionStatusText=a+" at "+t+e+"."}}).catch(function(){v.subscriptionStatusText=a+"."}):v.subscriptionStatusText=a+"."},getButtonObjectInfo:function(e){var t={action:e,text:""};switch(e){case"options":t.text="Subscription options";break;case"cancel":t.text="Cancel";break;case"cancel-trial":t.text="Cancel trial";break;case"resume":t.text="Resume plan";break;case"enable-auto":t.text="Enable auto renewal";break;case"disable-auto":t.text="Disable auto renewal";break;case"hidden":t.class="hidden";break;case"activate":default:t.text="Activate access"}return t},getModalText:function(e){switch(e){case"cancel-trial":return"If you cancel your trial";case"disable-auto":return"If you disable auto-renewal on your subscription";default:return"If you continue"}},setActionText:function(e){var t="";switch(e){case"disable-auto":case"cancel":case"cancel-trial":default:t="cancel"}v.subscriptionAction=t},addSpinner:function(){v.loading=!0},removeSpinner:function(){v.loading=!1}};v.updateSubscriptionStatus=function(){var e=g.updateAction;g.addSpinner();var n=void 0;return t.getUserSubscriptions().then(function(r){if("fail"===r.status||!r.data[0])throw new Error("No active subscription");if(n=r.data[0],n.legacySubscriptionId&&["paused","cancelled"].includes(e))return t.cancelLegacySubscription(n.legacySubscriptionId)}).then(function(){return t.updateUserSubscriptionStatus(n.subscriptionId,e)}).then(function(r){if("success"===r.status){n.subscriptionStatus=e;var i=n.pricing.pricingModel,a=t.isMultiMonthSubscription(i);switch(e){case"paused":case"cancelled":var o=a?"Auto-renewal disabled":"Subscription cancelled";f.addIntercomMetadata({suspend_date_at:Date.now()/1e3,is_on_trial:!1,status:"Suspended"}),f.addIntercomEvent("subscription-suspended"),s.addAlert('<b><i class="fa fa-warning mr5"></i>'+o+"</b> You will lose access to "+n.productName+" from the day after your subscription period ends.","warning",0,"subscription-alert-box");break;case"active":f.addIntercomMetadata({suspend_date_at:"",status:"Active"}),f.addIntercomEvent("subscription-suspended"),s.addAlert('<b><i class="fa fa-check mr5"></i>Subscription Activated</b> You have successfully activated your subscription, get back to learning now.',"success",0,"subscription-alert-box");break;default:s.addAlert("Sorry! Your subscription could not be updated, please contact support for assistance.","danger")}}t.clearGetSubscriptionCache()}).then(g.setButtonsTextFromSubscriptionCurrentStatus).then(t.clearUserSubscriptionCache).then(function(){return t.canUpgrade(n)}).then(function(e){v.showUpgradeButton=e}).catch(function(){return s.addAlert("Sorry! Your subscription could not be updated, please contact support for assistance.","danger")}).finally(g.removeSpinner)},v.buttonAction=function(e){var t="primary"===e?g.primaryButtonAction:g.secondaryButtonAction;switch(g.setActionText(t),t){case"cancel":g.updateAction="cancelled",$("#cancel-subscription-modal").modal("show");break;case"cancel-trial":case"disable-auto":case"pause":v.modalSubscriptionTypeText=g.getModalText(t),g.updateAction="cancel-trial"===t?"cancelled":"paused",$("#reason-subscription-modal").modal("show");break;case"enable-auto":case"resume":default:g.updateAction="active",v.updateSubscriptionStatus("Active")}},v.redirect=function(e){o.path(e)},v.cdnUrl=function(e){return n.cdnUrl(e)},v.updateB2bAutoRenewal=function(){g.updateB2bAutoRenewal()},g.init()}var i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(79);r.$inject=["userService","subscriptionService","configService","utilitiesService","$location","alertService","featureFlagsService","$filter","$q","$rootScope","analyticsService","b2bService","b2bSubscriptionsService"],angular.module("PacktUnlimited.controllers").controller("accountMain",r),r.$inject=["userService","subscriptionService","configService","utilitiesService","$location","alertService","featureFlagsService","$filter","$q","$rootScope","analyticsService","b2bService","b2bSubscriptionsService"]},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o,s){var c=this,u={init:function(){a.currentPage="email-preferences",c.jumbotrontitle="Email Preferences",c.pageIntroBackgroundImageName="HG1200xVariable-Account.png",c.linktext='<i class="fa fa-chevron-left mr5"></i> Back to Subscription Settings',c.link=i.getPath("myAccount"),u.setScopeFunctions(),u.loadPageContent(),s.addIntercomMetadata({visit_email_preferences:!0})},setScopeFunctions:function(){c.submitUserData=function(){u.addSpinner();var e=$(".email-preferences-form form :input"),t={newsletterPreferences:{}};e.each(function(){$(this).hasClass("newsletter")&&(t.newsletterPreferences[this.id]=$(this).is(":checked"))}),u.updateUserNewsletterPreferences(t).then(u.setUsersNewsletters).finally(u.removeSpinner)}},loadPageContent:function(){return u.addSpinner(),u.setUsersNewsletters().then(u.setNewsletters).finally(u.removeSpinner)},setNewsletters:function(){return o.getNewsletters().then(function(e){c.newsletters=e})},updateUserNewsletterPreferences:function(e){s.addIntercomMetadata({update_email_preferences:!0});var t=Object.keys(e.newsletterPreferences).map(function(t){return{id:t,status:e.newsletterPreferences[t]}});return o.updateUsersInterests("c970747b22",t).then(function(){var e=t.filter(function(e){return e.status}).map(function(e){return e.id});0===c.userData.newsletterPreferences.length&&e.length>0?s.addNewsletterSubscribeEvent():c.userData.newsletterPreferences.length>0&&0===e.length&&s.addNewsletterUnsubscribeEvent(),n.addAlert("Newsletter preferences updated successfully.","success")}).catch(function(e){n.addAlert("We cannot update your newsletters right now")})},setUsersNewsletters:function(){return o.getUsersNewsletters().then(function(e){e&&(c.userData={newsletterPreferences:e})}).catch(function(){n.addAlert("We cannot get your newsletters right now")})},addSpinner:function(){c.loading=!0},removeSpinner:function(){c.loading=!1}};u.init()}r.$inject=["userService","httpService","alertService","$location","configService","$rootScope","newslettersService","analyticsService"],angular.module("PacktUnlimited.controllers").controller("newsletter",r),r.$inject=["userService","httpService","alertService","$location","configService","$rootScope","newslettersService","analyticsService"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(79),s=function(){function e(t,n,i,a,o,s,c,u,l,d,f){"ngInject";r(this,e),this.userService=t,this.subscriptionService=n,this.invoiceService=i,this.utilitiesService=a,this.configService=o,this.alertService=s,this.$rootScope=c,this.$location=u,this.$q=l,this.analyticsService=d,this.log=f.create("packt:upgrades"),this.init()}return e.$inject=["userService","subscriptionService","invoiceService","utilitiesService","configService","alertService","$rootScope","$location","$q","analyticsService","logManager"],a(e,[{key:"init",value:function(){this.$rootScope.currentPage="upgrades",this.utilitiesService.unsetNightmode(),this.initVars(),this.setSubscriptionPlans()}},{key:"initVars",value:function(){this.pageTitle="Subscription Upgrades",this.pageIntroBackgroundImageName="HG1200xVariable-Account.png",this.backLink=this.configService.getPath("myAccount"),this.backLinkText='<i class="fa fa-chevron-left mr5"></i> Back to Subscription Settings',this.showPlans=!1,this.supportEmail=this.configService.supportEmail,this.mailToSupport="mailto:"+this.supportEmail}},{key:"setSubscriptionPlans",value:function(){var e=this;return this.addSpinner(),this.subscriptionService.getUserSubscriptions().then(function(t){return e.userSubscription=t.data[0],e.subscriptionService.canUpgrade(e.userSubscription)}).then(function(t){return t?e.subscriptionService.getSubscriberAccount():e.$q.reject("User not allowed to upgrade.")}).then(function(t){return e.userCurrency=t.data.currency,e.$q.all([e.subscriptionService.getTaxForCountryOrZone(t.data.billingAddress.country,t.data.billingAddress.state),e.subscriptionService.getAvailableSubscriptions()])}).then(function(t){var n=i(t,2),r=n[0],a=n[1],o=e.subscriptionService.filterSubscriptionsByWeight(a.data.results,e.userSubscription.weighting),s=e.subscriptionService.sortSubscriptionsByWeight(o);return e.tax=r,s.forEach(function(t){t.priceInfo=e.getPriceInfo(t,r)}),e.userSubscription.priceInfo=e.getPriceInfo(e.userSubscription,r),e.subscriptionService.groupSubscriptionsByType(s)}).then(function(t){return e.createSubscriptionTemplatePlans(t,e.userSubscription)}).then(function(){return e.subscriptionService.getPaymentMethods("active")}).then(function(t){e.hasLegacyPayment=0===Object.keys(t).length}).catch(function(){e.$location.url(e.configService.getPath("myAccount"))}).finally(function(){return e.removeSpinner()})}},{key:"getPriceInfo",value:function(e,t){var n=this,r=e.pricing.prices.find(function(e){return e.currency===n.userCurrency});return r.price=this.utilitiesService.getPriceWithTax(r.price,t),r.currencySymbol=this.utilitiesService.getCurrencySymbol(r.currency),r.pricingModel=e.pricing.pricingModel,r.monthlyPrice=this.subscriptionService.getMonthlyPrice(r.pricingModel,r.price),r.priceDescription=this.subscriptionService.getPriceDescription(r),r.decimal=(""+r.price).substr((""+r.price).indexOf(".")),r.priceWithoutDecimals=parseInt(r.price,10),r}},{key:"createSubscriptionTemplatePlans",value:function(e,t){var n=t.productName.toLowerCase().indexOf("pro")>=0?"pro":"basic",r="basic"===n?"Basic":"Pro",i=[{id:"current",name:r,type:n,subscriptionList:[t]}];e.basic.length>0&&i.push({id:"basic",name:"Basic",type:"basic",subscriptionList:e.basic}),e.pro.length>0&&i.push({id:"pro",name:"Pro",type:"pro",subscriptionList:e.pro}),e.exclusive.length>0&&i.push({id:"exclusive",name:"Pro",type:"pro",header:"Exclusive Offers",subscriptionList:e.exclusive}),this.panelCol=12/i.length,this.panels=i,this.showPlans=!0}},{key:"showUpgradeSubscriptionModal",value:function(e){this.upgradeToSubscription=e,$("#subscriptionUpgradeModal").modal("show")}},{key:"upgradeSubscription",value:function(){var e=this;return this.addSpinner(),this.subscriptionService.upgradeUserSubscription(this.userSubscription.subscriptionId,this.upgradeToSubscription.ratePlanId).then(function(){e.analyticsService.addIntercomMetadata({is_on_trial:!1,term:"",rate_plan:"",trial_start_date:""}),e.analyticsService.addIntercomEvent("subscription-upgraded",{rate_plan_id:e.upgradeToSubscription.ratePlanId}),e.sendUpgradeAnalyticsEvent(),e.$location.path(e.configService.getPath("myAccount")).search({upgraded:"true"})}).catch(function(){e.alertService.addAlert("Sorry! Your subscription could not be upgraded, please email us for assistance at "+e.supportEmail+".","danger"),e.$location.url(e.configService.getPath("myAccount"))}).finally(function(){return e.removeSpinner()})}},{key:"sendUpgradeAnalyticsEvent",value:function(){var e=this;return this.log.debug("Upgraded:",this.upgradeToSubscription),this.log.debug("userSub:",this.userSubscription),this.log.debug("tax:",this.tax),this.userService.getMetaData().then(function(t){e.log.debug("got metadata:",t);var n=(0,o.get)(e.upgradeToSubscription,"ratePlanId"),r=(0,o.get)(t,"name.firstName"),i=(0,o.get)(t,"name.lastName"),a=(0,o.get)(t,"currency"),s=(0,o.get)(t,"mail"),c=(new Date).toISOString(),u=(0,o.get)(e.userSubscription,"subscriptionId"),l=e.getOrderTotal(),d={ratePlanId:n,firstname:r,surname:i,currency:a,email:s,order_date:c,order_total:l,order_id:u};e.analyticsService.addEvent("subscription_upgrade",d)})}},{key:"getOrderTotal",value:function(){try{var e=(0,o.get)(this.upgradeToSubscription,"priceInfo.price");return(e-e*this.tax).toFixed(2)}catch(e){return this.log.error("Error getting order total:",e),0}}},{key:"addSpinner",value:function(){this.loading=!0}},{key:"removeSpinner",value:function(){this.loading=!1}}]),e}();angular.module("PacktUnlimited.controllers").controller("upgrades",s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(655),a=r(i),o=n(657),s=r(o),c=n(656),u=r(c);angular.module("PacktUnlimited.search",[]).controller("searchController",a.default).service("algoliaSearchService",u.default).service("templatesService",s.default)},function(e,t,n){"use strict";var r=angular.module("PacktUnlimited.directives");r.directive("readerContainer",["$compile",function(e){return{restrict:"C",link:function(t,n,r){var i=Array.from(n[0].querySelectorAll("pre"));$(i).each(function(e){$(this).wrapInner('<code class="language-markup" data-code-index="'+e+'"></code>'),Prism.highlightElement(this.firstChild)});var a=Array.from(n[0].querySelectorAll("a.link"));$(a).each(function(){if($(this).attr("linkend"))$(this).attr("ng-click","changePageInner($event)");else{var n=$(this).text();$(this).after(n),$(this).remove()}e($(this))(t)})}}}]),r.directive("onFinishRender",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){!0===t.$last&&e(function(){t.$emit(r.onFinishRender)})}}}]),r.directive("onFinishPageRender",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){e(function(){t.$eval(r.onFinishPageRender)})}}}])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o,s){"ngInject";r(this,e),this.$rootScope=t,this.userService=n,this.configService=i,this.analyticsService=a,this.utilitiesService=o,this.bookmarksService=s,this.init()}return e.$inject=["$rootScope","userService","configService","analyticsService","utilitiesService","bookmarksService"],i(e,[{key:"init",value:function(){var e=this;this.utilitiesService.unsetNightmode(),this.$rootScope.currentPage="bookmarks",this.pageIntroBackgroundImageName="HG1200xVariable-Bookmarks.png",this.offset=0,this.limit=12,this.sortOrder="newest",this.currentPage=0,this.getPath=function(t){return e.configService.getPath(t)},this.cdnUrl=function(t){return e.configService.cdnUrl(t)},this.loadingMsg="Loading Bookmarks...",this.getBookmarks(this.offset,this.limit,this.sortOrder),this.analyticsService.addIntercomMetadata({viewed_bookmarks:!0})}},{key:"changeOrder",value:function(e){this.analyticsService.addSortByEvent(e),this.sortOrder=e,this.currentPage=0,this.offset=0,this.getBookmarks(this.offset,this.limit,this.sortOrder)}},{key:"changePage",value:function(e){this.offset=e*this.limit,this.getBookmarks(this.offset,this.limit,this.sortOrder)}},{key:"removeBookmark",value:function(e,t){var n=this;return this.addSpinner(),this.bookmarksService.updateBookmark(e,t.chapterId,t.sectionId,!1).then(function(){return n.removeSpinner()}).then(function(){return n.getBookmarks(n.offset,n.limit,n.sortOrder)}).catch(function(){return n.removeSpinner()})}},{key:"getBookmarks",value:function(e,t,n){var r=this;this.addSpinner(),this.bookmarksService.getBatchedBookmarks(e,t,n).then(function(i){var a=r.bookmarksService.getBookmarkCount()||0;if(!i||!i.length)return e>0?r.getBookmarks(e-t,t,n):(r.bookmarkedProducts=null,void r.setPagination(0,e));r.setPagination(a,e),r.bookmarkedProducts=i;var o=i.map(function(e){return e.product});r.analyticsService.addProductListImpressionEvent(o,"Bookmarks")}).finally(function(){return r.removeSpinner()})}},{key:"setPagination",value:function(e,t){this.productCount=e,this.numberPageTotal=e?Math.ceil(e/this.limit):0,this.currentPage=t?t/this.limit:0,this.pageTotal=new Array(this.numberPageTotal)}},{key:"changeLimit",value:function(e){this.limit=e,this.getBookmarks(0,this.limit,this.sortOrder)}},{key:"addSpinner",value:function(){this.loading=!0}},{key:"removeSpinner",value:function(){this.loading=!1}}]),e}();angular.module("PacktUnlimited.controllers").controller("bookmarks",a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o,s){"ngInject";r(this,e),this.configService=t,this.curationService=n,this.utilitiesService=i,this.alertService=a,this.$location=o,this.$rootScope=s,this.init()}return e.$inject=["configService","curationService","utilitiesService","alertService","$location","$rootScope"],i(e,[{key:"init",value:function(){this.utilitiesService.unsetNightmode(),this.$rootScope.currentPage="books-and-videos",this.pageIntroBackgroundImageName="HG1200xVariable-BV.png",this.booksAndVideosSearchUrl=this.configService.getPath("search")+"?products=Book~Video&released=Available",this.showError=!1,this.loadingMsg="Loading books & videos...",this.loading=!0,this.loadPageContent()}},{key:"loadPageContent",value:function(){var e=this;this.curationService.getBooksAndVideosData().then(function(t){if(!t)throw"No results";e.curationData=t}).catch(function(t){e.alertService.addAlert("Could not load Books & Videos content.","danger"),e.showError=!0}).finally(function(){e.loading=!1})}},{key:"search",value:function(e,t){e.preventDefault();var n=this.booksAndVideosSearchUrl+"&query="+t;this.$location.url(n)}}]),e}();angular.module("PacktUnlimited.controllers").controller("booksAndVideosController",a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,i,o,u,l,d,f,h,p,v,g,m,y,b,_,w,S,k,T){var C=v.create("packt:checkout"),x=this,E={defaultCurrency:"USD",productPrices:{},productDiscountsInfo:{},paypalToken:"",recaptchaRendered:!1,recaptchaRenderedOnLoad:!1,recaptchaWidgetId:void 0,subscriptionPrice:0,subscriptionPriceAfterDiscountEnd:0,isLoggedIn:!1,init:function(){C.debug("init checkout controller"),e.currentPage="checkout",l.unsetNightmode(),E.setScopeFunctions(),E.loadPageContent()},setScopeFunctions:function(){var e=g.getFlagStatus("b2b");x.isB2bCheckout=!!e&&"true"===t.b2b,x.b2bMaxSeats=50,x.b2bMinSeats=3,x.b2bSeats=10,x.seatsPickerMessage="Please choose a number of seats between "+x.b2bMinSeats+" and "+x.b2bMaxSeats+".";var c=Number.isNaN(parseInt(t.seats,10))?x.b2bMinSeats:parseInt(t.seats,10);x.b2bSeats=c>x.b2bMaxSeats?x.b2bMaxSeats:c<x.b2bMinSeats?x.b2bMinSeats:c,x.b2bIsVatExempt=!1,x.b2bPoNumber="",x.b2bStartupUrl="https://business.packtpub.com/startup?seats="+t.seats,x.isSidebarVisible=!x.isB2bCheckout,x.forgottenPasswordLink=o.getPath("forgottenPassword"),x.maptIoUrl="https://mapt.packtpub.com",x.showLoginFormByDefault="login"===r.hash(),x.accountStepTab="login"===r.hash()?"login":"register",x.supportEmail=x.isB2bCheckout?o.b2bSupportEmail:o.supportEmail,x.mailToSupport="mailto:"+x.supportEmail,x.maptTermsAndConditions=o.maptTermsAndConditions,x.token="",x.submitting=!1,x.maptHome=o.baseUrl,x.isFreeTrial=t.freeTrial||!1,x.isDiscounted=!1;var u=r.search();x.checkoutProductUrl=u.product?r.path()+"?product="+u.product:r.path(),x.prepopulatedEmail=u.email,x.displayTax=!1,x.hasTax=!1,x.registerForm={password:{text:"",focus:!1,rules:{oneLower:!1,oneUpper:!1,oneNumber:!1,minEightChars:!1}},confirmPassword:{text:"",focus:!1,rules:{matchText:!1}}},x.redirectPageWhenError=o.getPath("home"),x.redirectPageWhenSuccess=o.getPath("myAccount"),x.checkoutUrl=o.getPath("checkout"),x.businessEmailPopupText="\n        Used to associate your account with this organisation.\n        Business email can be the same as your primary email.\n      ",x.loginEmailPopupText="\n        Used to access the system. If you have an existing\n        personal Packt account, this also enables Packt to\n        link your learning history to your business account.\n        Primary email can be the same as your business email.\n      ",$(document).on("change","#billing-country",function(){C.debug("update billing details event"),x.updateBillingZones()}),x.changeCurrency=function(e){C.debug("change currency to %s event",e),E.addSpinner(!0),E.setPriceFromCurrency(e),E.applyTaxRates(!1).finally(E.removeSpinner)},x.submitCreateAccountForm=function(){h.addFormSubmittedEvent("create-account-form"),x.submitting=!0,grecaptcha.execute(E.recaptchaWidgetId)},x.cdnUrl=function(e){return o.cdnUrl(e)},x.monitorRegisterPassword=function(){var e=x.registerForm.password.text;x.registerForm.password.rules.oneLower=p.hasAtLeastOneLowercaseLetter(e),x.registerForm.password.rules.oneUpper=p.hasAtLeastOneUppercaseLetter(e),x.registerForm.password.rules.oneNumber=p.hasAtLeastOneNumber(e),x.registerForm.password.rules.minEightChars=p.hasMinLength(e,8)},x.monitorConfirmRegisterPassword=function(){x.registerForm.confirmPassword.rules.matchText=x.registerForm.confirmPassword.text===x.registerForm.password.text},x.login=function(){E.addSpinner(!0);var e=E.getFormInput("login-form");E.recaptchaRendered&&(e.recaptcha=grecaptcha.getResponse(E.recaptchaWidgetId));var t=E.validateLoginDetails(e);return t.length>0?(E.showFormErrors(t),void E.removeSpinner()):n.loginRequest(e).then(function(){return h.addLoginEvent(),E.loadPageContent()}).catch(function(e){400===e.httpStatus?(i.addAlert("Invalid credentials specified.","warning"),e.message&&e.message.indexOf("recaptcha")>-1&&E.renderLoginCaptcha()):404===e.httpStatus?i.addAlert("Sorry, your username does not exist.","danger"):i.addAlert("Sorry, login is not available right now.","danger")}).finally(E.removeSpinner)},x.createB2bAccount=function(){E.addSpinner(!0);var e=E.getFormInput("b2b-link-account-form"),t=E.validateB2bDetails(e);if(t.length>0)return E.showFormErrors(t),void E.removeSpinner();var n={name:e["organization-name"],businessEmail:e["business-email"]};return m.createB2bAccount(n).then(function(e){return x.b2bAccountId=e.id,x.b2bBusinessEmail=n.businessEmail,E.loadPageContent()}).catch(function(e){var t="Something went wrong, please retry or get in touch with us!";e&&11000041===e.errorCode&&(t="Business email already exists. Please change your business email and try again."),E.showFormErrors([t])}).finally(E.removeSpinner)},x.logoutAndReload=function(e){e.preventDefault(),y.unsetAuthentication(),b.destroyAllCaches(),w.location.reload()},x.updateBillingZones=function(){E.addSpinner();var e=$("#billing-country option:selected"),t=e.attr("id"),n=void 0;E.selectedCountry=e.attr("data-iso-code"),E.setCountryZones(t).then(d.hasZuoraAccount).then(function(e){if(!(n=e))return l.getCurrencyFromCountry(E.selectedCountry)}).then(function(e){return e&&(x.selectedCurrency=e,E.setCurrencySelector(e),E.setPriceFromCurrency(e)),E.applyTaxRates(n,!0)}).finally(E.removeSpinner)},x.updateAddressDetails=function(){E.addSpinner(),E.removeFormStatuses();var e=!1,t=Object.assign({firstName:x.userData.firstName,lastName:x.userData.lastName,mail:x.userData.mail},E.getFormInput("update-address-form")),r=E.validateUserAccountDetails(t);if(r.length>0)return E.highlightFormFails(r),void E.removeSpinner();var a=void 0;Object.assign(t,{billingAddressId:x.userData.billingAddressId}),a=n.createOrUpdateAddress(t),a.then(d.hasZuoraAccount).then(function(t){e=t}).then(n.getMetaData).then(function(t){t.currency&&!e&&E.setPriceFromCurrency(t.currency)}).then(E.goToPaymentStep).catch(function(e){var t=e.data||{};"fail"===t.status&&"validation errors"===t.message?(E.highlightFormFails(t.data),$("html, body").animate({scrollTop:0},"fast")):"fail"===t.status&&"update errors"===t.message?i.addAlert(t.data,"danger"):i.addAlert("We cannot update your account details right now","danger")}).finally(E.removeSpinner)},x.updateB2bBillingDetails=function(){E.addSpinner(),E.removeFormStatuses();var e=void 0,t=E.getFormInput("update-address-form"),n=E.validateUserAccountDetails(t);if(n.length>0)return E.highlightFormFails(n),void E.removeSpinner();var r=_.resolve();t.billingVat.length>0?r=_.all([k.validateVatNumber(t.billingVat),k.getVatExemptionStatusByCountryId(t.billingCountry)]).then(function(e){var t=a(e,2),n=t[0],r=t[1];if(!n||!n.valid)throw new s.default("The vat number provided is not valid. Please try again.");x.b2bIsVatExempt=r}).catch(function(e){if(x.b2bIsVatExempt=!1,e.manuallyRaised)throw e;throw new s.default("We cannot validate your VAT number. Please try again or contact us.")}):x.b2bIsVatExempt=!1,r.then(function(){return m.updateB2bBillingDetails(x.b2bAccountId,t)}).then(function(){return S.getSubscriptionAccount(x.b2bAccountId).catch(function(){return!1})}).then(function(n){return e=!!n,n?n.currency:l.getCurrencyFromCountryId(t.billingCountry)}).then(function(t){return E.setPriceFromCurrency(t),E.applyTaxRates(e,!1,x.b2bIsVatExempt)}).then(function(){return E.goToPaymentStep()}).catch(function(e){i.addAlert(e.message,"danger")}).finally(function(){return E.removeSpinner()})},x.goToBillingDetails=function(){E.handleSettingBillingDetails().then(function(){return E.goToAddressStep()}).then(function(){return E.removeSpinner()})},x.incrementSeats=function(){if(x.b2bSeats<x.b2bMaxSeats)return x.b2bSeats+=1,E.setPriceFromCurrency(x.selectedCurrency),E.applyTaxRates(!1,!1,x.b2bIsVatExempt),void(x.showSeatsPickerError=!1);x.showSeatsPickerError=!0},x.decrementSeats=function(){if(x.b2bSeats>x.b2bMinSeats)return x.b2bSeats-=1,E.setPriceFromCurrency(x.selectedCurrency),E.applyTaxRates(!1,!1,x.b2bIsVatExempt),void(x.showSeatsPickerError=!1);x.showSeatsPickerError=!0},x.handleSeatsChange=function(){var e=parseInt(x.b2bSeats,10)||x.b2bMinSeats;e>x.b2bMaxSeats?(e=x.b2bMaxSeats,x.showSeatsPickerError=!0):e<x.b2bMinSeats?(e=x.b2bMinSeats,x.showSeatsPickerError=!0):x.showSeatsPickerError=!1,x.b2bSeats=e,E.setPriceFromCurrency(x.selectedCurrency),E.applyTaxRates(!1,!1,x.b2bIsVatExempt)}},highlightFormFails:function(e){e.forEach(function(e,t){$("."+e.field+"-input").addClass("has-error"),$("#"+e.field+"-error-message").html(e.error)})},validateUserAccountDetails:function(e){var t=[];return e.billingStreet1||t.push({field:"billing-street1",error:"You must enter an address."}),e.billingCity||t.push({field:"billing-city",error:"You must enter a city."}),e.billingCountry||t.push({field:"billing-country",error:"You must select a country."}),e.billingPostalCode||t.push({field:"billing-postal-code",error:"You must enter a postcode."}),x.isB2bCheckout&&(e.organisationName||t.push({field:"organisation-name",error:"You must enter an organisation name."}),e.billingPhoneNumber||t.push({field:"billing-phone-number",error:"You must enter a phone number."})),t},removeFormStatuses:function(){var e=["organisation-name","business-email","billing-street1","billing-city","billing-country","billing-postal-code","billing-vat","billing-phone-number"];$(".message-container").hide(),$("#update-result").removeClass(),e.forEach(function(e,t){$("."+e+"-input").removeClass("has-error"),$("#"+e+"-error-message").empty()})},getFormInput:function(e){var t=$("#"+e+" :input"),n={},r=["billingCountry","billingZone"];return t.each(function(){var e=$(this).attr("data-mapping");if(!e)return void(n[this.name]=$(this).val());r.includes(e)?n[e]=$(this).children(":selected").attr("id"):n[e]=$(this).val()}),n},showFormErrors:function(e){var t="";e.forEach(function(e){t+=e+"<br />"}),i.addAlert(t,"danger")},loadPageContent:function(){E.addSpinner(!0);var e=t.product,a=new Date,o=new Date,c=void 0,l=void 0,f=!0,p=!0;return e?_.resolve().then(function(){return x.isB2bCheckout&&y.hasJwtAuth()?m.getCustomerAdminAccounts():null}).then(function(e){x.isB2bCheckout&&Array.isArray(e)&&(0===e.length?(x.prepopulatedEmail=y.getEmailFromAccessToken(),x.accountStepTab="b2b-link-account",p=!1,E.goToAccountStep()):x.b2bAccountId=e[0])}).then(function(){return n.getMetaData()}).catch(function(e){if(e&&401!==e.httpStatus)throw e;return!1}).then(function(e){e?(E.isLoggedIn=!0,x.isLoggedIn=!0,e.currency&&(c=e.currency)):h.addZuoraCheckoutLoginRegisterEvent()}).then(function(){return x.isB2bCheckout?E.canContinueB2bCheckoutAfterLoginOrRegister(x.b2bAccountId):E.canContinueB2cCheckoutAfterLoginOrRegister(e)}).then(function(){return E.isLoggedIn&&p?E.handleSettingBillingDetails().then(function(){return E.goToAddressStep()}):E.goToAccountStep()}).then(function(){return c?null:E.getCurrencyAndCountry(x.b2bAccountId).then(function(e){C.debug("Got currency for user:",e),c=e.currency,l=e.country})}).then(function(){return u.getSubscriptionProductData(e,x.isB2bCheckout)}).then(function(t){C.debug("got subs product response:",t),E.checkoutLoadToAnalytics(t);var n=[];if(!t)throw i.addAlert("The product "+e+" could not be found."),new s.default("Invalid product id");if(x.isFreeTrial&&!t.freeTrialLength)throw i.addAlert("This product does not have a free trial plan available."),r.path(x.checkoutUrl).search({product:e}),f=!1,new s.default("Invalid free trial flag");if(t.discountTerm>0){x.isDiscounted=!0,x.discountTerm=t.discountTerm;var u=E.getDiscountEndDate(t.pricing.pricingModel,t.discountTerm);x.subscriptionDiscountEndDate=u.toDateString()}n=d.getSubscriptionFeatures(t.productDescription);var h=E.getAvailablePricesAndCurrencies(t,l),p=h.currenciesToShow,v=h.currencyToPriceMap,g=h.currencyToDiscountMap;E.productPrices=v,E.productDiscountsInfo=g,x.pricingModel=t.pricing.pricingModel,x.productFeatures=n,x.currencies=p,x.subscriptionTitle=t.productName,x.subscriptionDescription=t.rateDescription,o.setDate(a.getDate()+t.freeTrialLength),x.subscriptionTrialEndDate=o.toDateString(),x.freeTrialLength=t.freeTrialLength,c||(c=E.defaultCurrency),x.selectedCurrency=c,E.setPriceFromCurrency(c)}).catch(function(t){if(C.error("loadPageContent:first catch error:",t),void 0===t.status)throw t;if(404===t.status&&"Product not found."===t.data.message)throw i.addAlert("The product "+e+" could not be found."),new s.default("Invalid product id")}).then(function(){return!(!E.isLoggedIn||x.isB2bCheckout)&&d.hasZuoraAccount()}).then(function(e){return E.applyTaxRates(e)}).catch(function(e){if(C.error("loadPageContent:second catch error:",e),!e.manuallyRaised)return void(f&&(i.addAlert("Something went wrong, please try again or get in touch."),r.path(x.redirectPageWhenError).search({})));r.path(x.redirectPageWhenSuccess)}).finally(E.removeSpinner):(i.addAlert("Sorry the product could not be found."),r.path(x.redirectPageWhenError).search({}),E.removeSpinner(),null)},checkoutLoadToAnalytics:function(e){C.debug("checkout_loaded:",e);var t={ratePlanId:(0,c.get)(e,"ratePlanId"),freeTrial:x.isFreeTrial};h.addEvent("checkout_loaded",t)},canContinueB2cCheckoutAfterLoginOrRegister:function(e){return C.debug("Check if can continue b2c checkout"),_.resolve().then(function(){return E.isLoggedIn?d.getSubscriberAccount():null}).then(function(e){return e&&"fail"!==e.status?d.getUserSubscriptions(!0):null}).then(function(t){return!(t&&t.data.length>0&&"cancelled"!==t.data[0].subscriptionStatus)||E.canClaimStacking(e)}).then(function(e){if(!e)throw i.addAlert("We couldn't complete your checkout as you already have an active subscription."),new s.default("Can't stack subscription.")}).then(E.canClaimFreeTrial).then(function(e){if(E.isLoggedIn&&!e&&x.isFreeTrial){var t="You already had a free trial subscription";throw i.addAlert(t),new s.default(t)}return!0})},canContinueB2bCheckoutAfterLoginOrRegister:function(e){return C.debug("Check if can continue b2b checkout"),e?_.resolve().then(function(){return E.isLoggedIn?S.getSubscriptionAccount(e).catch(function(){return!1}):null}).then(function(t){return t?S.getSubscriptions(e):null}).then(function(e){if(e&&e.length>0)throw i.addAlert("We couldn't complete your checkout as you already have an active subscription."),new s.default("Already have an active subscription.")}):_.resolve()},getCurrencyAndCountry:function(e){return!E.isLoggedIn||x.isB2bCheckout&&!e?l.getCurrencyAndCountryFromIp():(x.isB2bCheckout?S.getSubscriptionAccount(e).catch(function(){return!1}):d.getSubscriberAccount().then(function(e){return e.data}).catch(function(){return!1})).then(function(e){return e?{currency:e.currency}:l.getCurrencyAndCountryFromIp()})},getAvailablePricesAndCurrencies:function(e,t){var n=[],r={},i={};return e.pricing.prices.forEach(function(e){if(e.currency&&(e.price||e.tiers)&&((!E.isLoggedIn&&"IN"!==t&&"INR"!==e.currency||"IN"===t&&"INR"===e.currency)&&n.push(e.currency),r[e.currency]=x.isB2bCheckout?e.tiers[0].price:e.price,x.isDiscounted)){var a=l.roundUp(e.price,2);if(e.discountAmount){var o=(a-e.discountAmount).toFixed(2);i[e.currency]={discountedPrice:o,discountValue:e.discountAmount,isDiscountedByAmount:!0}}else if(e.discountPercentage&&e.discountPercentage>0){var s=(a*(1-e.discountPercentage/100)).toFixed(2);i[e.currency]={discountedPrice:s,discountValue:e.discountPercentage,isDiscountedByAmount:!1}}}}),{currenciesToShow:n,currencyToPriceMap:r,currencyToDiscountMap:i}},canClaimFreeTrial:function(){return n.getMetaData().then(function(e){return!!e.canClaimFreeTrial}).catch(function(e){if(e&&401!==e.httpStatus)throw e;return!1})},setCurrencySelector:function(e){$("#currency-selector").val(e)},setPriceFromCurrency:function(e){C.debug("set price from currency:",e);var t=E.productPrices[e]?e:Object.keys(E.productPrices)[0];if(x.selectedCurrency=t,x.selectedCurrencySymbol=l.getCurrencySymbol(t),x.isB2bCheckout)return void(E.subscriptionPrice=x.b2bSeats*E.productPrices[t]);x.isDiscounted?(E.subscriptionPriceAfterDiscountEnd=E.productPrices[t],E.subscriptionPrice=E.productDiscountsInfo[t].discountedPrice):E.subscriptionPrice=E.productPrices[t]},renderCapture:function(){C.debug("got to renderCapture"),angular.element(document).ready(function(){C.debug("document ready fired"),!E.recaptchaRenderedOnLoad&&$("popup-recaptcha")[1]&&(C.debug("rendering recaptcha..."),E.recaptchaWidgetId=grecaptcha.render($("popup-recaptcha")[1],{sitekey:"6LeAHSgUAAAAAKsn5jo6RUSTLVxGNYyuvUcLMe0_",size:"invisible",callback:E.recaptchaCallback,"error-callback":E.recaptchaError}),E.recaptchaRenderedOnLoad=!0)})},collectFormData:function(){var e=$("#create-account-form :input"),t={};return e.each(function(){t[this.name]=$(this).val()}),t},createAccount:function(t){E.addSpinner(!0);var r=E.validateCreateAccountDetails(t);if(r.length>0)return x.submitting=!1,E.showFormErrors(r),grecaptcha.reset(),void E.removeSpinner();var i={firstName:t["first-name"],lastName:t["last-name"],email:t.email,password:t.password,confirmPassword:t.password,recaptcha:t["g-recaptcha-response"],newsletters:!x.isB2bCheckout},a={name:t["organization-name"],businessEmail:t["business-email"]};return n.registerUser(i).then(function(){if(h.addRegisterEvent({firstname:i.firstName,lastname:i.lastName,email:i.email}),x.isB2bCheckout)return m.createB2bAccount(a).then(function(){x.b2bBusinessEmail=a.businessEmail}).catch(function(e){var t="Something went wrong, please retry or get in touch with us!";e&&11000041===e.errorCode&&(t="Business email already exists. Please change your business email and try again."),E.showFormErrors([t])})}).then(function(){return E.loadPageContent()}).catch(function(t){if(C.error("createAccount error:",t),grecaptcha.reset(e.repcaptcha),"Failed to register with drupal"===t.message){return void E.showFormErrors(["Registration not available right now. Please try again..."])}t&&t.data&&(x.isB2bCheckout&&t.data[0].indexOf("This email address is not valid")>-1&&(t.data[0]='\n                  The primary email is not valid or it is already in use.\n                  If you already have an account, please <a href="#login">Sign In</a>.\n                '),E.showFormErrors(t.data)),t&&t.message&&E.showFormErrors([t.message])}).finally(E.removeSpinner)},recaptchaCallback:function(e){if(!x.submitting)return void grecaptcha.reset();var t=E.collectFormData();t["g-recaptcha-response"]=e,E.createAccount(t)},recaptchaError:function(){i.addAlert("There was an error submitting the recaptcha. Please refresh the page and try again"),x.submitting=!1},renderLoginCaptcha:function(){E.recaptchaRendered||(E.recaptchaWidgetId=grecaptcha.render($("popup-recaptcha")[0],{sitekey:"6LeAHSgUAAAAAKsn5jo6RUSTLVxGNYyuvUcLMe0_"}),E.recaptchaRendered=!0)},validateCreateAccountDetails:function(e){var t=[];if(x.isB2bCheckout&&(e["organization-name"]||t.push("You must enter an organization name."),e["business-email"]||t.push("You must enter a business email address.")),e["first-name"]||t.push("You must enter a first name."),e["last-name"]||t.push("You must enter a last name."),!e.email){var n=x.isB2bCheckout?"You must enter a primary email address.":"You must enter an email address.";t.push(n)}return e.password?E.isValidRegisterPassword()||t.push("You must enter a valid password."):t.push("You must enter a password."),x.isB2bCheckout&&(e["confirm-password"]?E.isValidRegisterConfirmPassword()||t.push("The passwords must match."):t.push("You must confirm your password.")),e["g-recaptcha-response"]||t.push("You must complete the recaptcha."),t},validateLoginDetails:function(e){var t=[];return e.email||t.push("You must enter your email address."),e.password||t.push("You must enter your password."),E.recaptchaRendered&&!e.recaptcha&&t.push("You must complete the recaptcha."),t},validateB2bDetails:function(e){var t=[];return e["organization-name"]||t.push("You must enter an organization name."),e["business-email"]||t.push("You must enter a business email."),t},isValidRegisterPassword:function(){return p.areRulesSatisfied(x.registerForm.password.rules)},isValidRegisterConfirmPassword:function(){return x.registerForm.confirmPassword.rules.matchText},getLocation:function(){return l.getCountryFromIp().then(function(e){return x.country=e,x.country})},setCountries:function(){return E.getLocation().then(function(){return l.getCountries()}).then(function(e){return"IN"!==x.country?x.countries=e.filter(function(e){return"IN"!==e.iso2Code}):x.countries=e,x.countries})},setCountryZones:function(e){return l.getCountryZones(e,!0).then(function(e){x.countryZones=e})},handleSettingBillingDetails:function(){delete x.userData,delete x.countries,delete x.countryZones,E.addSpinner();var e=void 0;return e=x.isB2bCheckout?E.getOrganisationDetails():n.getUserDetails(),e.then(function(e){return E.setBillingDetails(e)}).catch(function(e){C.error("setting billing details error:",e),i.addAlert("We cannot get your account details right now")})},getOrganisationDetails:function(){return m.getB2bAccountById(x.b2bAccountId,!0).then(function(e){return e.address1?m.mapB2bAccountDetailsToLegacyAccountDetails(e):n.getUserDetails().then(function(t){return Object.assign({organisationName:e.name},t)})})},setBillingDetails:function(e){return C.info("setBillingDetails:",e),e&&(x.userData=e,x.currentBillingCountryId=e.billingCountry),x.isCityRequired=!0,E.setCountries().then(function(){return x.userData.billingCountry?E.setCountryZones(x.userData.billingCountry):l.getCountryFromIp().then(function(e){return l.getCountryFromIso2Code(e)}).then(function(e){x.currentBillingCountryId=e.id,x.countryZones=e.zones})})},goToAccountStep:function(){C.debug("go to account step"),x.checkoutStep="account",E.renderCapture()},goToAddressStep:function(){C.debug("go to address step"),x.checkoutStep="address",h.addZuoraCheckoutAddressEvent()},goToPaymentStep:function(){C.debug("go to payment step");var e=E.getTaxInfo();x.checkoutStep="payment",h.addZuoraCheckoutPaymentEvent(),h.saveSubscriptionTax(e)},getTaxInfo:function(){var e={subTotal:0,taxTotal:0,total:0};return x.hasTax&&!x.isFreeTrial&&(e.subTotal=x.subTotal,e.taxTotal=x.taxTotal),e.total=x.isFreeTrial&&x.freeTrialLength?0:x.total,e.subTotal=e.taxTotal?e.subTotal:e.total,e},applyTaxRates:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(x.isDiscounted&&(x.subscriptionPriceAfterDiscountEnd=E.subscriptionPriceAfterDiscountEnd),r)return _.resolve().then(function(){return E.setTaxes(0)});if(!E.isLoggedIn&&!e)return C.debug("get taxes when not logged in and not zuora account"),l.getCountryFromIp().then(function(e){if(e)return d.getTaxForCountryOrZone(e)}).then(E.setTaxes);if(e){C.debug("get taxes when has zuora account");var i=void 0;return i=x.isB2bCheckout?S.getSubscriptionAccount(x.b2bAccountId,!0).then(function(e){return e.billingAddress}):d.getSubscriberAccount().then(function(e){return e.data.billingAddress}),i.then(function(e){return d.getTaxForCountryOrZone(e.country,e.state)}).then(E.setTaxes)}if(!E.isLoggedIn||e||t){if(E.isLoggedIn&&!e&&t){var a=$("#billing-country option:selected").text(),o=$("#billing-zone option:selected").text();return C.debug("get taxes when logged in and not zuora account and from country change",a,o),d.getTaxForCountryOrZone(a.trim(),o.trim()).then(E.setTaxes)}}else{var s=void 0,c="",u="";C.debug("get taxes when logged in and not zuora account and not from country change");var f=void 0;f=x.isB2bCheckout&&x.b2bAccountId?m.getB2bAccountById(x.b2bAccountId,!0).then(function(e){return m.mapB2bAccountDetailsToLegacyAccountDetails(e)}):n.getUserDetails(),f.then(function(e){return s=e,s.billingCountry?l.getCountryIsoFromId(s.billingCountry):l.getCountryFromIp()}).then(function(e){if(e)return c=e,l.getCountryZoneIsoFromId(s.billingCountry,s.billingZone)}).then(function(e){return e&&(u=e),d.getTaxForCountryOrZone(c.trim(),u.trim())}).then(E.setTaxes)}},setTaxToVm:function(e){e&&(x.subTotal=e.subTotal,x.taxTotal=e.taxTotal,x.taxPercentage=e.taxPercentage,x.total=e.total)},getDiscountEndDate:function(e,t){var n=new Date,r=void 0;switch(e){case"Annual":r=12*t;break;case"Eighteen_Months":r=18*t;break;case"Two_Years":r=24*t;break;default:r=t}return n.setMonth(n.getMonth()+r),n},setTaxes:function(e){if(C.debug("set taxes:",e),x.hasTax=!!e,x.hasTax){if(x.isDiscounted){var t=l.calculateTaxes(E.subscriptionPriceAfterDiscountEnd,e);x.subscriptionPriceAfterDiscountEnd=t.total}var n=l.calculateTaxes(E.subscriptionPrice,e);C.debug("taxObject:",n),E.setTaxToVm(n)}else{var r={subTotal:E.subscriptionPrice,taxTotal:0,taxPercentage:0,total:E.subscriptionPrice};E.setTaxToVm(r)}},canClaimStacking:function(e){return u.getSubscriptionProductData(e).then(function(e){var t=e.pricing.pricingModel,n=d.isMultiMonthSubscription(t);return x.isStacking=n,n})},addSpinner:function(){x.loading=!0},removeSpinner:function(){x.loading=!1}};E.init()}var a=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(709),s=r(o),c=n(79);i.$inject=["$rootScope","$routeParams","userService","$location","alertService","configService","productService","utilitiesService","subscriptionService","zuoraService","analyticsService","validationService","logManager","featureFlagsService","b2bService","authService","cacheService","$q","$window","b2bSubscriptionsService","vatService","httpService"],angular.module("PacktUnlimited.controllers").controller("checkout",i),i.$inject=["$rootScope","$routeParams","userService","$location","alertService","configService","productService","utilitiesService","subscriptionService","zuoraService","analyticsService","validationService","logManager","featureFlagsService","b2bService","authService","cacheService","$q","$window","b2bSubscriptionsService","vatService","httpService"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o,s){"ngInject";r(this,e),this.$routeParams=t,this.$window=n,this.$route=i,this.$location=a,this.featureFlagsService=o,this.logger=s.create("paypal-checkout-callback"),this.init()}return e.$inject=["$routeParams","$window","$route","$location","featureFlagsService","logManager"],i(e,[{key:"init",value:function(){this.logger.debug("init checkout-callback controller"),"paypal-checkout-callback-cancel"===this.$route.current.$$route.pageType?(this.logger.debug("handle paypal canceling"),this.parsePaypalCancel()):(this.logger.debug("handle parsing paypal token"),this.parsePaypalToken())}},{key:"parsePaypalToken",value:function(){try{this.$routeParams.token&&(this.logger.debug("paypal token:",this.$routeParams.token),this.$window.opener.paypalCallback(this.$routeParams.token),this.$window.close())}catch(e){this.logger.error("error parsing paypal token:",e),this.removeSpinner(),this.$location.path("").search({})}}},{key:"parsePaypalCancel",value:function(){try{this.$window.opener.paypalCancelCallback(),this.$window.close()}catch(e){this.logger.error("error during paypal canceling:",e),this.removeSpinner(),this.$location.path("").search({})}}},{key:"addSpinner",value:function(){this.loading=!0}},{key:"removeSpinner",value:function(){this.loading=!1}}]),e}();angular.module("PacktUnlimited.controllers").controller("paypal-checkout-callback",a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(668),a=n(672),o=n(658),s=n(666),c=r(s),u=n(696),l=n(695),d=n(673),f=n(675),h=n(676),p=n(677),v=n(674),g=n(678),m=n(689),y=n(691),b=n(693),_=r(b),w=n(692),S=r(w),k=(n(665),n(660)),T=n(667),C=r(T),x=n(679),E=r(x),P=n(690),$=r(P),A=n(670),O=n(687),I=r(O),R=n(688),L=r(R),j=n(680),D=r(j),N=n(694),U=r(N),M=n(662),F=r(M),B=n(664),q=r(B),H=n(663),V=r(H),z=n(685),W=r(z),G=n(661),Y=r(G),Q=n(671),X=r(Q),J=n(659),K=r(J);angular.module("PacktUnlimited.components",[]).component("b2bContentUnlockUpsell",K.default).component("horizontalSlider",i.HorizontalSliderComponent).component("libraryProduct",a.LibraryProductComponent).component("mainNav",v.MainNavComponent).component("productSidebar",f.ProductSideBarComponent).component("tabs",p.TabsComponent).component("tabPane",h.TabPaneComponent).component("search",m.SearchComponent).component("sidebarOverlay",g.SideBarOverlayComponent).component("productListing",I.default).component("product",L.default).component("subscriptionPane",y.SubscriptionPaneComponent).component("alertDialog",o.AlertDialogComponent).component("errorDialog",c.default).component("passwordValidationPopup",u.PasswordValidationPopupComponent).component("confirmPasswordPopup",l.ConfirmPasswordPopupComponent).component("subscriptionUpgradeModal",d.SubscriptionUpgradeModalComponent).component("bookmarkProduct",k.BookmarkProductComponent).component("subsFooter",C.default).component("pageIntro",E.default).component("spinner",$.default).component("icons",A.IconsComponent).component("pagination",D.default).component("subsUpsell",U.default).component("contentHardUpsell",F.default).component("contentSoftUpsell",q.default).component("contentLoginBanner",V.default).component("prerenderReady",W.default).component("checkoutStepWizard",Y.default).component("infoPopup",X.default).component("timedUnlockUpsell",_.default).component("timedUnlockSoftUpsell",S.default)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o,s,c,u){var l=this,d={init:function(){e.currentPage="create-account",r.getPreviousPage(),d.redirectIfLoggedIn(),d.initVars(),d.setScopeFunctions(),d.renderCapture(),l.weekContent=0,u.checkTimedUnlockActive().then(function(t){t&&(e.freeWeekend=!0,l.endAt=t.data[0].endAt,l.startAt=t.data[0].startAt,l.weekContent=1)}),o.addFormStartedEvent("create-account-form")},initVars:function(){l.loading=!1,l.baseUrl="",l.packtpubUrl="https://www.packtpub.com",l.cdnUrl="https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878",l.cdnPath="https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/",l.logoUrl=i.cdnUrl("Packt-logo-135.png"),l.maptIoUrl=i.maptIoUrl,l.maptIoFindOutMore="https://subscribe.packtpub.com/",l.maptTermsAndConditions=i.maptTermsAndConditions,l.retryRegistration=!1,l.submitting=!1,l.registerForm={password:{text:"",focus:!1,rules:{oneLower:!1,oneUpper:!1,oneNumber:!1,minEightChars:!1}},confirmPassword:{text:"",focus:!1,rules:{matchText:!1}}}},isValidPassword:function(){return s.areRulesSatisfied(l.registerForm.password.rules)},isValidConfirmPassword:function(){return l.registerForm.confirmPassword.rules.matchText},redirectIfLoggedIn:function(){c.hasJwtAuth()&&t.path("")},renderCapture:function(){angular.element(document).ready(function(){grecaptcha.render($("popup-recaptcha")[0],{sitekey:"6LeAHSgUAAAAAKsn5jo6RUSTLVxGNYyuvUcLMe0_",size:"invisible",callback:d.createAccountWithRecaptcha,"error-callback":d.recaptchaError})})},createAccountWithRecaptcha:function(e){if(!l.submitting)return void grecaptcha.reset();var t=d.collectFormData();t["g-recaptcha-response"]=e,d.createAccount(t)},recaptchaError:function(){a.addAlert("There was an error submitting the recaptcha. Please refresh the page and try again")},collectFormData:function(){var e=$("#create-account-form :input"),t={};return e.each(function(){t[this.name]=$(this).val()}),t["mailing-opt-in"]="true"===document.querySelector('input[name="mailing-opt-in"]:checked').value,t},createAccount:function(e){d.addSpinner();var r={firstName:e["first-name"],lastName:e["last-name"],email:e.email,password:e.password,confirmPassword:e["confirm-password"],newsletters:e["mailing-opt-in"],recaptcha:e["g-recaptcha-response"]};return n.registerUser(r).then(function(e){return n.clearAllUserData(),e.guestRegistration?void t.path(i.getPath("login")).search({guestRegistration:!0}):e.access||e.refresh?(l.submitting=!1,l.retryRegistration=!1,d.redirectAfterRegistration(),o.addRegisterEvent({firstname:r.firstName,lastname:r.lastName,email:r.email}),void o.addFormSubmittedSuccessfullyEvent("create-account-form")):void a.addAlert("This email address is not valid. Please check you have\n              entered it correctly, and that you do not already have\n              an account with that email address.")}).catch(function(e){if(grecaptcha.reset(),"Failed to register with drupal"===e.message)return l.retryRegistration=!0,void grecaptcha.execute();l.submitting=!1,l.retryRegistration=!1;var t=e.data?e.data[0]:e.message;o.addFormErrorsEvent("create-account-form",t),a.addAlert(t)}).finally(function(){return d.removeSpinner()})},redirectAfterRegistration:function(){var e=r.getPreviousPage();if(e)return void t.path(e);t.path("/")},setScopeFunctions:function(){l.monitorRegisterPassword=function(){var e=l.registerForm.password.text;l.registerForm.password.rules.oneLower=s.hasAtLeastOneLowercaseLetter(e),l.registerForm.password.rules.oneUpper=s.hasAtLeastOneUppercaseLetter(e),l.registerForm.password.rules.oneNumber=s.hasAtLeastOneNumber(e),l.registerForm.password.rules.minEightChars=s.hasMinLength(e,8)},l.monitorConfirmRegisterPassword=function(){l.registerForm.confirmPassword.rules.matchText=l.registerForm.confirmPassword.text===l.registerForm.password.text},l.validateAndSubmitForm=function(){var e="";if(o.addFormSubmittedEvent("create-account-form"),d.isValidPassword()||(e+="The password must be at least 8 characters, contain one lowercase character, one uppercase character and one number. <br />"),d.isValidConfirmPassword()||(e+="The passwords must match. <br />"),e)return a.addAlert(e),void o.addFormErrorsEvent("create-account-form",e);l.submitting=!0,grecaptcha.execute()},l.cancel=function(e){e.preventDefault(),r.gotoPreviousPage()}},addSpinner:function(){l.loading=!0},removeSpinner:function(){l.loading=!1}};d.init()}r.$inject=["$rootScope","$location","userService","navigationService","configService","alertService","analyticsService","validationService","authService","timedUnlockService"],angular.module("PacktUnlimited.controllers").controller("createAccount",r),r.$inject=["$rootScope","$location","userService","navigationService","configService","alertService","analyticsService","validationService","authService","timedUnlockService"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(699),a=r(i),o=n(698),s=r(o),c=n(697),u=r(c);angular.module("featureFlags",[]).provider("featureFlagsService",a.default).directive("featureFlag",s.default).directive("featureFlagClass",u.default)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a){"ngInject";r(this,e),this.$rootScope=t,this.configService=n,this.utilitiesService=i,this.b2bService=a,this.init()}return e.$inject=["$rootScope","configService","utilitiesService","b2bService"],i(e,[{key:"init",value:function(){this.$rootScope.currentPage="help",this.pageIntroBackgroundImageName="HG1200xVariable-Help.png",this.utilitiesService.unsetNightmode(),this.faqLink=this.configService.maptIoFaqLink,this.errataLink=this.configService.getPacktUrl()+"/support/errata",this.feedbackLink=this.configService.feedbackLink,this.mailToLink="mailto:"+this.configService.supportEmail,this.setB2bLinks()}},{key:"setB2bLinks",value:function(){var e=this;return this.b2bService.isB2bUser().then(function(t){t&&(e.mailToLink="mailto:"+e.configService.b2bSupportEmail,e.faqLink=e.configService.b2bFaqLink)})}}]),e}();angular.module("PacktUnlimited.controllers").controller("help",a)},function(e,t,n){"use strict";angular.module("PacktUnlimited.controllers").controller("history",["userService","productService","$rootScope","configService",function(e,t,n,r){var i=this,a={init:function(){a.limit=12,a.offset=0,a.currentPage=0,i.loading=!1,n.currentPage="history",a.setProductList(a.limit,a.offset),i.pageIntroBackgroundImageName="HG1200xVariable-History.png",a.setPageTitle("History","Get back to what you were last looking at."),i.changePage=a.changePage,i.changeLimit=a.changeLimit,i.baseUrl=r.baseUrl,$("body").removeClass("nightmode")},setPageTitle:function(e,t){i.jumbotronTitle=e,i.description=t,n.$emit("titleUpdated",{jumbotrontitle:e,description:t})},setProductList:function(n,r){i.loading=!0,t.getBatchedHistory(n,r).then(function(n){if(n){var o=e.getHistoryCount();i.productList=t.addProductList(n),a.setPagination(o,r)}else a.setPagination(0,r)}).finally(function(){i.loading=!1})},setPagination:function(e,t){i.limit=a.limit,i.productListCount=e,i.numberPageTotal=e?Math.ceil(e/a.limit):0,i.currentPage=t?t/this.limit:0,i.pageTotal=new Array(i.numberPageTotal)},changePage:function(e){var t=e*a.limit;a.setProductList(a.limit,t)},changeLimit:function(e){a.limit=e,a.setProductList(a.limit,0)}};a.init()}])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i,a,o,s,c,u,l,d,f,h){"ngInject";r(this,e),this.$rootScope=t,this.$location=n,this.$q=i,this.authService=a,this.userService=o,this.productService=s,this.subscriptionService=c,this.learningPathsService=u,this.curationService=l,this.configService=d,this.utilitiesService=f,this.b2bService=h,this.baseUrl="",this.loadingMsg="Loading...",this.pageIntroBackgroundImageName="HG1200xVariable-Welcome.png",this.isB2b=!1,this.convertTagToBadge=this.utilitiesService.convertTagToBadge,this.init()}return e.$inject=["$rootScope","$location","$q","authService","userService","productService","subscriptionService","learningPathsService","curationService","configService","utilitiesService","b2bService"],a(e,[{key:"init",value:function(){var e=this;this.$rootScope.currentPage="home",this.utilitiesService.unsetNightmode(),this.isLoggedIn=this.authService.hasJwtAuth(),this.loading={header:!0,history:!1,recommendations:!1,curationData:!1},this.technologyBlocks=[{image:"python-logo.png",url:"Python"},{image:"javascript-logo.png",url:"JavaScript"},{image:"cplusplus-logo.png",url:"c++"},{image:"android-logo.png",url:"Android"},{image:"angular-logo.png",url:"Angular "},{image:"unity-logo.png",url:"Unity"}],this.getPath=function(t){return e.configService.getPath(t)},this.cdnUrl=function(t){return e.configService.cdnUrl(t)},this.isLoggedIn?(this.getSubscriptionNameFromUrl(),this.setSubscriptionRelatedMessages(),this.loadLoggedInPageContent()):this.loadLoggedOutContent()}},{key:"loadLoggedInPageContent",value:function(){var e=this;this.userService.getMetaData().catch(function(){return{name:{firstName:"",lastName:""}}}).then(function(t){return e.userFirstName=t?t.name.firstName:"",e.loading.history=!0,e.$q.all([e.getUsersLastRead(),e.getUsersLastLearningPaths(),e.b2bService.isB2bUser()])}).then(function(t){var n=i(t,3),r=n[0],a=n[1],o=n[2];return e.isB2b=o,r&&(e.hasBooksAndVideosHistory=!0),a&&(e.hasLearningPathsHistory=!0),e.hasNoHistory=!e.hasBooksAndVideosHistory&&!e.hasLearningPathsHistory,e.loading.history=!1,e.hasNoHistory?(e.pageTitle=e.userFirstName?"Hello, "+e.userFirstName:"Hello",e.isB2b&&(e.pageTitle=e.userFirstName?"Welcome to Packt for Teams, "+e.userFirstName:"Welcome to Packt for Teams"),e.loading.header=!1,e.showContentWhenNoHistory(r)):(e.pageTitle=e.userFirstName?"Welcome back, "+e.userFirstName:"Welcome back",e.isB2b&&(e.pageTitle=e.userFirstName?"Welcome to Packt for Teams, "+e.userFirstName:"Welcome to Packt for Teams"),e.loading.header=!1,e.showContentWhenHistory(r))}).catch(function(t){e.loading.header=!1,e.loading.history=!1})}},{key:"loadLoggedOutContent",value:function(){this.loading.header=!1,this.hasNoHistory=!0,this.showContentWhenNoHistory()}},{key:"showContentWhenNoHistory",value:function(){var e=this;this.loading.curationData=!0,this.showEngagementBlocks=!0,this.setCurationData().finally(function(){e.loading.curationData=!1})}},{key:"showContentWhenHistory",value:function(e){var t=this;this.hasBooksAndVideosHistory&&!this.hasLearningPathsHistory&&(this.showEngagementBlocks=!0),this.loading.recommendations=!0,this.setUserRecommendations(e).finally(function(){t.loading.recommendations=!1})}},{key:"getUsersLastRead",value:function(){var e=this;return this.productService.getLastReadProducts(4,0).then(function(t){return!(!t||!t.length)&&(e.lastReadProductIsbnList=e.productService.addProductList(t),t)}).catch(function(e){return!1})}},{key:"getUsersLastLearningPaths",value:function(){var e=this;return this.learningPathsService.getUsersLearningPaths().then(function(t){return!(!t||!t.length)&&(e.lastReadLearningPaths=t,t)}).catch(function(e){return!1})}},{key:"setUserRecommendations",value:function(e){var t=this;if(!e||!Array.isArray(e))return this.$q.reject(!1);var n=e.slice(0,3),r=n.map(function(e){return t.productService.getRecommendations(e.isbn13).catch(function(){return!1})});return this.$q.all(r).then(function(e){var r=e.filter(function(e){return Array.isArray(e)&&e.length>0}).map(function(e,r){var i="books"===n[r].type?"read":"watched",a={title:"Recommendations because you "+i+" <strong>"+n[r].title+"</strong>",listName:"Home Products Recommendations"},o=e.slice(0,4);return a.isbns=t.productService.addProductList(o),a});t.recommendationsBlock=r})}},{key:"setCurationData",value:function(){var e=this,t=void 0,n=void 0;return this.curationService.getCuratedData().then(function(r){t=r.trending.productIsbnsList,n=r.popular.productIsbnsList;var i=t.concat(n);return e.productService.getProductsSummary(i)}).then(function(r){var i=e.productService.transformSummaryData(r);e.productService.addProductList(i),e.trendingIsbns=t,e.popularIsbns=n})}},{key:"getSubscriptionNameFromUrl",value:function(){this.subscriptionName=this.$location.search()["new-subscription-name"]||""}},{key:"setSubscriptionRelatedMessages",value:function(){var e=this,t=void 0;this.getUserSubscription().then(function(n){return t=n,e.showAlertForSubscriberWithLegacyPayment(t)}).then(function(){return e.showEngagingUpgradesMessage(t)}).catch(function(){return!1})}},{key:"getUserSubscription",value:function(){return this.subscriptionService.getUserSubscriptions().then(function(e){if("fail"!==e.status&&e.data[0])return e.data[0];throw new Error("No Subscription")})}},{key:"showAlertForSubscriberWithLegacyPayment",value:function(e){var t=this;e&&this.subscriptionService.getPaymentMethods(!0).then(function(n){var r=new Date(e.renewalDate),i=t.utilitiesService.substractDays(e.renewalDate,30),a=new Date,o=a.getTime()>=i.getTime()&&a.getTime()<r.getTime(),s=0===Object.keys(n).length,c=t.authService.getCookie("need_payment_update_live");s&&o&&!c&&(t.isLegacySubsWithoutNewPayment=!0)})}},{key:"showEngagingUpgradesMessage",value:function(e){if(e){var t=new Date,n=this.utilitiesService.addDays(e.contractEffectiveDate,15),r=t.getTime()>=n.getTime(),i=this.authService.getCookie("upgrades_engage_message_live");"Month"===e.pricing.pricingModel&&r&&!i&&(this.showUpgradesEngagementMessage=!0)}}},{key:"setLegacySubsWithoutPaymentCookie",value:function(e){this.authService.setCookie("need_payment_update_live","served",e)}},{key:"setUpgradesEngageMsgCookie",value:function(e){this.authService.setCookie("upgrades_engage_message_live","served",e)}},{key:"demoMode",value:function(){this.isLoggedIn=!0,this.pageTitle="Welcome back",this.loading.header=!1,this.lastReadProductIsbnList=this.productService.addProductList(DemoData.lastReadProductsList),this.lastReadLearningPaths=DemoData.userLastReadLearningPaths,this.hasBooksAndVideosHistory=!0,this.hasLearningPathsHistory=!0}},{key:"constructSearchLinks",value:function(e,t){return this.configService.getPath("search")+"?released=Available"+(e?"&query="+encodeURIComponent(e):"")+(t?"&category="+encodeURIComponent(t):"")}},{key:"baseHref",value:function(e){return this.configService.getPath(e)}}]),e}();angular.module("PacktUnlimited.controllers").controller("homeController",o)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i){"ngInject";r(this,e),this.alertService=n,this.projectsService=t,this.cdnUrl=function(e){return i.cdnUrl(e)},this.cards=t.getInteractiveProjects()}return e.$inject=["projectsService","alertService","configService"],i(e,[{key:"subscribeEmail",value:function(e){var t=this,n=e;this.projectsService.subscribeUserToMailChimp({email_address:n,listId:"4e812be58c"}).then(function(e){if(!e)throw new Error("Failed to Subscribe");t.alertService.addAlert("Successfully Subscribed")}).catch(function(e){t.alertService.addAlert("Failed to Subscribe")})}}]),e}();angular.module("PacktUnlimited.controllers").controller("interactiveCodeProjectsController",a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(701),a=r(i),o=n(700),s=r(o),c=n(702),u=r(c);angular.module("PacktUnlimited.learningPaths",[]).controller("learningPathsListController",a.default).controller("learningPathDetailsController",s.default).service("learningPathsService",u.default)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o,s,c,u,l,d,f,h,p,v){var g=this,m={recaptchaRendered:!1,init:function(){e.currentPage="login",r.clearAllUserData(),m.initVars(),m.addGuestRegistrationMessage(),m.redirectIfLoggedIn(),m.setPreviousPage(),m.setScopeFunctions(),m.checkPasswordStatus(),m.checkIfForgottenPassword()},checkPasswordStatus:function(){s.reset&&"true"===s.reset&&$(".account-updated-message").show()},checkIfForgottenPassword:function(){"forgotten-password"===t.hash()&&g.showForgottenPasswordForm()},setPreviousPage:function(){var e=t.search().redirect;e&&i.setPreviousPage("/"+e)},initVars:function(){g.baseUrl="",g.cdnUrl="https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878",g.cdnPath="https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/",g.logoUrl=o.cdnUrl("Packt-logo-135.png"),g.maptIoFindOutMore="https://subscribe.packtpub.com/"},redirectIfLoggedIn:function(){h.hasJwtAuth()&&m.redirectAfterLogin()},lazyLoadRecaptcha:function(){n.recaptchaCallback=function(){grecaptcha.render($("popup-recaptcha")[0],{sitekey:"6LeAHSgUAAAAAKsn5jo6RUSTLVxGNYyuvUcLMe0_"})},$.getScript("https://www.recaptcha.net/recaptcha/api.js?render=explicit&onload=recaptchaCallback").fail(function(){c.addAlert("Sorry, login is not available right now.")})},renderCapture:function(){grecaptcha.render($("popup-recaptcha")[0],{sitekey:"6LeAHSgUAAAAAKsn5jo6RUSTLVxGNYyuvUcLMe0_"}),m.recaptchaRendered=!0},resetRecaptcha:function(){grecaptcha.reset()},androidRecaptcha:function(){if(d.has("$cordovaRecaptcha")){d.get("$cordovaRecaptcha").verify(void 0).then(function(e){m.recaptchaResponse=e}).catch(function(){c.addAlert("Sorry, login is not available right now.")})}else c.addAlert("Sorry, login is not available right now.")},redirectAfterLogin:function(){var e=i.getPreviousPage()||o.baseUrl;t.url(e)},resetLoginPage:function(){$(".account-updated-message").hide(),$(".login-error").hide(),$(".login-error-not-available").hide(),$("#forgotten-password-email").val(""),g.isForgottenPasswordVisible=!1},addGuestRegistrationMessage:function(){s.guestRegistration&&$("#guest-registration-modal").modal("show")},login:function(e){var t="Sorry, we need to check you are a human with a captcha test",n="Sorry, login is not available right now.",i="Sorry, you entered an invalid email address and password combination.";return r.loginRequest(e).then(m.handleSuccessfulLogin).catch(function(e){var r=void 0;400===e.httpStatus?(r=i,e.message.toLowerCase().indexOf("recaptcha")>-1&&!m.recaptchaRendered?(m.renderCapture(),r=t):m.recaptchaRendered&&m.resetRecaptcha()):r=404===e.httpStatus?"Sorry, your username does not exist.":n,c.addAlert(r)})},handleSuccessfulLogin:function(){r.clearAllUserData(),v.showModal(),m.redirectAfterLogin(),l.addLoginEvent()},setScopeFunctions:function(){g.login=function(){m.addSpinner({login:!0}),m.resetLoginPage();var e=$("#login-input-email").val(),t=$("#login-input-password").val(),n={email:e,password:t};if(m.recaptchaRendered&&(n.recaptcha=grecaptcha.getResponse(),!n.recaptcha)){return c.addAlert("You must complete the reCAPTCHA to log in."),void m.removeSpinner()}m.login(n).finally(m.removeSpinner)},g.showForgottenPasswordForm=function(e){e&&e.preventDefault(),g.isForgottenPasswordVisible=!0},g.submitForgottenPasswordForm=function(){var e=$("#forgotten-password-email").val();if(m.addSpinner({forgotPassword:!0,fullWidth:!0}),!e){return c.addAlert("Email address is not valid."),m.removeSpinner(),u.resolve()}return r.sendForgottenPasswordEmail(e).then(function(){m.resetLoginPage(),c.addAlert("An email has been sent with instructions on how to reset your password.","success")}).catch(function(){c.addAlert("We cannot send a password reset email at this time, please try again later.")}).finally(m.removeSpinner)},g.cancel=function(e){e.preventDefault(),i.gotoPreviousPage()}},addSpinner:function(e){e.forgotPassword&&(g.loadingForgotPassword=!0),e.login&&(g.loadingLogin=!0)},removeSpinner:function(){g.loadingLogin=!1,g.loadingForgotPassword=!1}};m.init()}r.$inject=["$rootScope","$location","$window","userService","navigationService","cacheService","configService","$routeParams","alertService","$q","analyticsService","$injector","subscriptionService","authService","utilitiesService","timedUnlockService"],angular.module("PacktUnlimited.controllers").controller("login",r),r.$inject=["$rootScope","$location","$window","userService","navigationService","cacheService","configService","$routeParams","alertService","$q","analyticsService","$injector","subscriptionService","authService","utilitiesService","timedUnlockService"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function e(t,n){"ngInject";r(this,e),t.addLogoutEvent().finally(function(){n.logout()})};i.$inject=["analyticsService","userService"],angular.module("PacktUnlimited.controllers").controller("logoutController",i)},function(e,t,n){"use strict";function r(e,t){"ngInject";function n(e){return u.test(e)}function r(e){return!l.test(e)}var i=void 0,a=void 0,o=void 0,s=["login","logout","register"],c=[].concat(s,["/book/","/video/"]),u=new RegExp(s.join("|")),l=new RegExp(c.join("|"));return this.setLastPageInHistory=function(e){a=i,n(e)||e&&(i=e,r(e)&&(o=e))},this.setPreviousPage=function(e){a=e},this.getPreviousPage=function(){return a},this.gotoPreviousPage=function(){a?t.path(a):t.path(e.getPath("newHome"))},this.getPreviousPageForProductSidebar=function(){return o},this.resetPreviousPage=function(){i=null,a=null},this}r.$inject=["configService","$location"],angular.module("PacktUnlimited.services").factory("navigationService",r)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o,s,c){"ngInject";r(this,e),this.utilitiesService=t,this.learningPathsService=n,this.productService=i,this.techService=a,this.configService=o,this.$routeParams=s,this.$rootScope=c,this.init()}return e.$inject=["utilitiesService","learningPathsService","productService","techService","configService","$routeParams","$rootScope"],i(e,[{key:"init",value:function(){this.utilitiesService.unsetNightmode(),this.$rootScope.currentPage="tech-detail",this.pageIntroBackgroundImageName="books-and-videos-header-background.jpg",this.showError=!1,this.loadingMsg="Loading...",this.loading=!0,this.ctaHref=this.configService.getPath("tech"),this.isbns=[],this.learningPathsService.getLearningPathsSummary(),this.getTechData()}},{key:"getTechData",value:function(){var e=this,t=this.$routeParams.tech,n=void 0;this.techService.getTechPageData(t).then(function(t){if(!t)throw new Error("no response");n=t;var r=n.products;return e.isbns=r.filter(function(e){return"learning-path"!==e.type}).map(function(e){return e.id}),e.isbns=e.isbns.filter(function(t,n){return e.isbns.indexOf(t)===n}),e.learningPaths=r.filter(function(e){return"learning-path"===e.type}),e.productService.getProductsSummary(e.isbns)}).then(function(t){var r=e.productService.transformSummaryData(t);e.productService.addProductList(r),e.pageTitle=n.displayName,e.pageSubtitle=n.description||"",e.pageIntroBackgroundImageName="books-and-videos-header-background.jpg",e.loading=!1,e.sendPageMetadata()}).catch(function(){e.loading=!1,e.sendPageMetadata(),e.pageTitle="Something went wrong",e.pageSubtitle="Try reloading the page, or pick a different tech"})}},{key:"sendPageMetadata",value:function(){var e=encodeURIComponent(this.$routeParams.tech),t=this.pageTitle?this.pageTitle+" | Packt Subscription":"Packt Subscription",n={pageTitle:t,canonicalUrl:"/tech/"+e,description:this.pageSubtitle||""};this.$rootScope.$emit("metadata",{pageType:"tech-detail",metadata:n})}}]),e}();angular.module("PacktUnlimited.controllers").controller("techDetailController",a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o,s){"ngInject";r(this,e),this.curationService=t,this.utilitiesService=n,this.alertService=i,this.techService=a,this.$location=o,this.$rootScope=s,this.init()}return e.$inject=["curationService","utilitiesService","alertService","techService","$location","$rootScope"],i(e,[{key:"init",value:function(){this.utilitiesService.unsetNightmode(),this.$rootScope.currentPage="tech",this.pageIntroBackgroundImageName="books-and-videos-header-background.jpg",this.pageTitle="Explore All Tech",this.pageSubtitle="Select a tech below to accomplish any goal.",this.showError=!1,this.loadingMsg="Loading tech...",this.loading=!0,this.loadContent()}},{key:"loadContent",value:function(){var e=this;this.techService.getAllTech().then(function(t){if(!t)throw new Error("No tech");e.panels=t}).catch(function(){e.alertService.addAlert("Could not load tech content.","danger"),e.showError=!0}).finally(function(){e.loading=!1}),this.curationService.getBooksAndVideosData().then(function(t){if(!t)throw new Error("No curation");e.curationData=t}).catch(function(){e.alertService.addAlert("Could not load curation content.","danger"),e.showError=!0})}},{key:"redirectToTechPage",value:function(e,t){e.preventDefault(),this.$location.url(this.generateEncodedUrl(t))}},{key:"generateEncodedUrl",value:function(e){return"tech/"+encodeURIComponent(e)}}]),e}();angular.module("PacktUnlimited.controllers").controller("techController",a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(681),a=r(i),o=n(684),s=r(o),c=n(682),u=r(c),l=n(683),d=r(l),f=n(704),h=r(f),p=n(703),v=r(p),g=n(705),m=r(g);angular.module("PacktUnlimited.playlists",[]).controller("playlistsController",h.default).controller("playlistsDetailsController",v.default).service("playlistsService",m.default).component("createPlaylistsModal",a.default).component("renamePlaylistsModal",s.default).component("deletePlaylistsModal",u.default).component("removeProductModal",d.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(44),a=r(i),o=(0,a.default)("book-service:info");angular.module("PacktUnlimited.services").factory("bookService",["httpService","fileService","$q","cacheService","configService","utilitiesService","$filter",function(e,t,n,r,i,a,s){var c=this,u=function(e){$(e).each(function(e,t){var n=$(t),r=n.find("p");n.find("ol").each(function(e,t){var n=$(t),r=n.attr("start");if(!r){var i=n.find("li:first-child");i&&i.length&&i.attr("value")&&(r=i.attr("value"))}if(r){var a=parseInt(r,10);a-=1,n.css("counter-reset","orderlist "+a)}}),n.find("ol ol").attr("type","a"),r.each(function(e,t){var n=$(t),r=n.text(),i=/^\d+\.\s*/;r.match(i)&&n.text(r.replace(i,""))})})},l=function(e){var t=Array.from(e.querySelectorAll("pre"));$(t).each(function(e,t){var n=$(this);n.parent().hasClass("informalexample")||n.wrap('<div class="informalexample"></div>'),n.wrapInner('<code class="language-markup" data-code-index="'+e+'"></code>'),Prism.highlightElement(this.firstChild)})},d=function(e){var t=Array.from(e.querySelectorAll("table"));$(t).each(function(e,t){$(t).attr("width","")})};this.searchProductContent=function(t,n){var r="products/"+t+"?query="+n;return e.microserviceRequest("contentSearch","v1",r,"GET",!1,!0).then(function(e){return e.data})},this.generateSectionMap=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return e.forEach(function(e){e.children.forEach(function(r,i){var a=void 0;t&&0===i?(a=r.id<10?"ch0"+r.id:"ch"+r.id,n[a]=r,n[a].chapterId=e.id,a=r.originalId,n[a]=r,n[a].chapterId=e.id):(a=r.id,n[a]=r,n[a].chapterId=e.id)})}),n};var f=function(e){var t=Array.from(e.querySelectorAll("img"));o("updateImageSources(...):",t.length,"images"),$(t).each(function(e,t){var n=$(t).attr("src");$(t).attr("src",h(n))})},h=function(e){if(o("getImageSource(...):",e),e.indexOf("data:")>-1)return e;if(0===e.indexOf("file:///"))return e.replace("file:///",t.dataDirectory);var n=i.cdnUrl(e);return o("\tUpdated Source:",n),n},p=function(e,t,n){var r=c.generateSectionMap(t,!0);Array.from(e.querySelectorAll("a")).forEach(function(e){var t=e.getAttribute("linkend");if(t){var i=r[t];if(i&&i.seoUrl){var a=i.seoUrl,o=s("canonical_url")(n+"/"+a);e.setAttribute("href",o)}}})};return this.updateHtml=function(e,t,n,r){try{var i=document.createElement("div"),a=$.parseHTML(e.trim());if($(a[0]).find("h1").slice(1).each(function(e,t){t.outerHTML=t.outerHTML.replace(/h1/g,"h2")}),r){var s=$(a[0]).find("h1");s.length>0&&(s[0].innerHTML=r)}return i.appendChild(a[0]),l(a[0]),u(a[0]),d(a[0]),n&&p(a[0],t,n),f(a[0]),i.innerHTML}catch(e){return o("error:",e),parentElement.innerHTML}},this.preCacheImagesFromContent=function(t,r){var i=c.getImgUrlsFromContent(t.content),o=[];return n.all(i.map(function(t){var i=n.defer(),s={config:{responseType:"blob",timeout:i.promise}},u=h(t);return o.push(i),e.get(u,s).then(function(e){return e instanceof Blob&&a.blobToDataUrl(e)}).then(function(e){e&&c.replaceCachedContentImgUrl(r,t,e)}).catch(function(e){return e})})),o},this.getImgUrlsFromContent=function(e){for(var t=/<img[^>]+src="?([^"\s]+)"?/g,n=[],r=void 0;r=t.exec(e);)-1===r[1].indexOf("data:")&&n.push(r[1]);return n},this.replaceCachedContentImgUrl=function(e,t,n){var i=r.getCachedItem("bookContentCache",e);if(i&&!(i.length<2)){i.contentData=i.contentData.replace(t,n),r.setCachedItem("bookContentCache",e,i)}},this}])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(354),o=r(a);angular.module("PacktUnlimited.controllers").controller("productController",["$routeParams","$rootScope","$scope","$location","$window","$q","$timeout","$filter","bookService","videoService","productService","userService","subscriptionService","configService","cacheService","timerService","alertService","utilitiesService","analyticsService","httpService","projectsService","fileService","authService","shareService","dialogsService","metadataService","bookmarksService","entitlementsService","logManager","b2bUsersService","playlistsService","featureFlagsService",function(e,t,n,r,a,s,c,u,l,d,f,h,p,v,g,m,y,b,_,w,S,k,T,C,x,E,P,A,O,I,R,L){var j=O.create("packt:controllers:product"),D=this,N={isbn:e.isbn,category:e.category,chapter:e.chapter,section:e.section_id,productType:e.productType,availableFontSizes:["1.5","1.6","1.7","1.8","1.9","2.0"],init:function(){N.setCommonFeatures().then(function(){N.setUserRelatedData().then(N.doesUserHaveSubscription).then(N.doesUserHavePaidSubscription).then(N.checkOwnerships).then(N.setDiscountedPrintBuyButton).then(N.setFiveDollarBuyButton).then(N.showPage)}),N.setEventListeners()},checkOwnerships:function(){return h.getEntitlementSources(D.isbn).then(function(e){if(D.isFreeLearning=e.includes("free learning"),D.isFreeLearning&&!0===D.hasPaidSubscription)return void(D.owned=!0);D.isFreeLearningOrNotOwned=0===e.filter(function(e){return"free learning"!==e}).length,D.owned=!D.isFreeLearningOrNotOwned})},setEventListeners:function(){$(window).on("visibilitychange",N.contentTimer),n.$on("$destroy",function(){N.abortCachingContentImages(),$(window).off("visibilitychange",N.contentTimer),h.resetHistoryCache(),"video"===N.productType&&d.resetPlayer()})},contentTimer:function(){!1===document.hidden?m.startTimer():m.stopTimer()},currentSectionBookmarked:function(){var e=N.section?N.section:N.chapter;if(D.bookmarks&&D.bookmarks.length>0){return D.bookmarks.findIndex(function(t){return t.id===e})>=0}return!1},setCommonFeatures:function(){return t.currentPage="product",D.loading=!1,D.usingCredit=!1,D.hasPaidSubscription=!1,N.setCommonTemplateVariables(),N.addSpinner(),N.setBuyButtonVisibility(),N.getProductMetadata()},getProductMetadata:function(){return f.getProductMetadata(N.isbn).then(N.processProductMetadata).catch(N.handleProductMetadataError)},processProductMetadata:function(e){D.productMetaData=e,N.setTableOfContents(e.tableOfContents),D.imageUrl=v.cdnUrl(e.imageUrl),D.addToCartUrl="https://www.packtpub.com"+e.shopUrl,D.title=b.convertTagToBadge(e.title),D.earlyAccess=e.earlyAccess,N.earlyAccess=e.earlyAccess,D.digitalNid=e.digitalNid,N.nid=e.nid,N.chapter&&t.$broadcast("content:viewed",{title:D.title,isbn:N.isbn,category:N.category,chapter:N.getChapterName(D.currentChapter),section:N.getSectionName(D.currentChapter,D.currentSection),lastReadPath:r.path(),type:N.productType}),"book"===N.productType?D.productDownloads=e.availableDownloads.productDownloads.map(function(e){var t=void 0;return t="https://account.packtpub.com/getfile/"+N.isbn+"/"+e,{url:t,text:"Download "+D.downloadFormatMap[e]}}):"video"===N.productType&&(D.videoDownloadUrl="https://account.packtpub.com/getfile/"+N.isbn+"/video"),D.showDownloads="video"===N.productType||!!D.productDownloads.length,D.codeDownloadAvailable=!!e.availableDownloads.codeDownloads.length,D.codeDownloadAvailable&&(D.codeDownloadUrl="https://account.packtpub.com/getfile/"+N.isbn+"/code"),D.productBaseUrl=v.baseUrl+"/"+N.productType+"/"+e.seoCategory+"/"+N.isbn,N.isHomePage()||(N.setNextSection(),N.setPreviousSection()),N.checkIfLastPageOfProject(),N.removeSpinner()},handleProductMetadataError:function(e){throw j.error("handleProductMetadata error:",e),N.removeSpinner(),r.path(v.baseUrl),y.addAlert("Sorry, it appears that page doesn't exist!","danger",2e4),y.addAlert("Here's the dashboard instead. Try clicking links to find what you want.","success",2e4),e},confirmCanBeDownloaded:function(){if(!D.loggedIn)return void(D.canBeDownloaded=!1);"book"===N.productType?f.getSignedProductContent(N.isbn).then(function(){D.canBeDownloaded=!0}).catch(function(){D.canBeDownloaded=!1}):"video"===N.productType?h.isEntitledToProduct(N.isbn).then(function(e){D.canBeDownloaded=!!e}).catch(function(){D.canBeDownloaded=!1}):D.canBeDownloaded=!1},processReadAheadToc:function(e,t){if(Array.isArray(e)&&"book"===N.productType)for(var n=!1,r=N.chapter-1;r<e.length&&t>0;r++){var i=e[r];if("chapter"===i.type&&i.children.length>0){var a=void 0;for(n?a=0:N.section?(a=i.children.findIndex(function(e){return e.id===N.section}),i.children[a].cached=!0,a+=1,n=a===i.children.length):(i.children[0].cached=!0,a=1),a;a<i.children.length&&t>0;a++){var o=i.children[a],s=void 0;s=0===a?o.originalId:o.id;var c=f.generateCachedContentPath(N.isbn,i.id,s,N.productType);t--,o.cached||N.processContent(o,N.isbn,i,a,c)}}}},processContent:function(e,t,n,r,i){var a=void 0;a=0===r?e.originalId:e.id,f.getContent(t,n.id,a,N.productType).then(function(t){t&&(e.cached=!0,N.abortCachingImgArr=l.preCacheImagesFromContent(t,i))})},abortCachingContentImages:function(){N.abortCachingImgArr&&N.abortCachingImgArr.forEach(function(e){return e.resolve()})},setUserRelatedData:function(){return N.addSpinner(!0),h.getMetaData().then(function(e){if(e){var t=e.preferences;t?(N.setNightMode(t.nightmode),N.setFontSize(t.fontSize)):h.createUserPreferences({nightmode:!1})}}).catch(function(e){j.error("get metadata error:",e)}),f.getProductUserData([N.isbn],"full").then(N.processUserRelatedProductData).catch(function(){return N.removeSpinner()}).then(function(){return N.setB2bAdminStatus()})},processUserRelatedProductData:function(e){N.setContinueButton(e[N.isbn]),h.getCreditsCount().then(function(e){D.hasCredits=!!e}),D.inCollection=e[N.isbn].collectionStatus,D.price=e[N.isbn].price,D.hasEarlyAccess=h.hasEarlyAccess(e[N.isbn]),D.entitlement=e[N.isbn].entitlement,N.entitlement=e[N.isbn].entitlement,N.updateTableOfContent(e[N.isbn]),D.bookmarked=N.currentSectionBookmarked(),N.removeSpinner(!0)},setB2bAdminStatus:function(){return I.isCustomerAdmin().then(function(e){D.isB2bCustomerAdmin=e})},updateTableOfContent:function(e){var t=e.completedSections,n=e.bookmarks;D.bookmarks=[],D.tableOfContents.forEach(function(e){(t[e.id]||n[e.id])&&(e.children.forEach(function(r){var i=r;t[e.id]&&(i.completed=!!t[e.id].find(function(e){return e===i.id})),n[e.id]&&(i.bookmarked=!!n[e.id].find(function(e){return e===i.id}),i.bookmarked&&(i.bookmarkTitle=i.title,i.chapterId=e.id,D.bookmarks.push(i)))}),e.completed=!e.children.find(function(e){return!e.completed}))})},updateBaseUrlWithSeoCategory:function(){var e="products/"+N.isbn+"/header-metadata";return N.section?e="products/"+N.isbn+"/chapters/"+N.chapter+"/sections/"+N.section+"/metadata":N.chapter&&(e="products/"+N.isbn+"/chapters/"+N.chapter+"/metadata"),E.getMetadata(e).then(function(e){var t=b.getSeoCategory(e.category);D.productBaseUrl=v.baseUrl+"/"+N.productType+"/"+t+"/"+N.isbn}).catch(function(e){return!1})},getInContentSearchQueryFromUrl:function(){var e=r.search();e&&e.query&&(D.inContentSearchText=e.query)},setCommonTemplateVariables:function(){D.loggedIn=T.hasJwtAuth(),D.baseUrl=v.baseUrl,D.productBaseUrl=v.baseUrl+"/"+N.productType+"/"+e.category+"/"+N.isbn,D.isbn=N.isbn,D.productType=N.productType,D.currentChapter=N.chapter,D.productTypeName="book"===N.productType?"eBook":"video",D.availableFontSizes=N.availableFontSizes,D.currentSection=N.section?N.section:N.chapter,D.maptUrl=v.getPacktUrl(),D.downloadFormatMap={pdf:"PDF",epub:"ePub",mobi:"Mobi"},D.getCdnUrl=v.cdnUrl,D.inContentSearchText="",R.loadPlaylists(),D.playlistsService=R,N.getInContentSearchQueryFromUrl(),D.handleProductPlaylist=function(e,t){e.preventDefault();var n=void 0,r=void 0,i=D.productMetaData.title;D.productExistsInPlaylist(t.products,D.isbn)?(n="danger",r=i+' has been removed from\n                <a href="'+R.playlistPath+"/"+t.playlistId+'">'+t.playlistName+"</a>.",R.deleteProductFromPlaylist(t.playlistId,D.isbn)):(n="warning",r=i+' has been added to\n                <a href="'+R.playlistPath+"/"+t.playlistId+'">'+t.playlistName+"</a>.",R.addProductToPlaylist(t.playlistId,D.isbn)),y.addAlert(r,n)},D.productExistsInPlaylist=function(e,t){return!!e.find(function(e){return e.productId===t})},D.completeLastSection=function(e){N.completeSection(N.isbn,N.chapter,N.section),e.preventDefault(),r.path(D.productBaseUrl)},D.claimWithToken=function(){var e;D.usingCredit=!0,N.addSpinner(),A.claimWithToken(N.isbn).then(function(t){if(j.debug("claim credit response:",t),!t)throw"Something went wrong";D.owned=!0,$("#product-claim-modal").modal("hide"),h.unsetMetaData(),N.isHomePage()||(N.setCommonFeatures(),N.showContentPage()),e=f.getAddPurchaseAlert(D.title),y.addAlert(e,"warning"),N.removeSpinner(),D.usingCredit=!1}).catch(function(e){j.error("claim credit error:",e),e&&e.data?D.claimTokenError=e.data.message.replace("tokens","credits"):($("#product-claim-modal").modal("hide"),y.addAlert("Something went wrong. Please try again later...","danger"))}).finally(function(){N.removeSpinner(),D.usingCredit=!1})},D.applyFontSize=function(){N.applyFontSize()},D.toggleSectionBookmark=function(){N.toggleBookmark()},D.toggleNightmode=function(){D.nightmode=!D.nightmode,N.applyNightmode();var e={nightmode:D.nightmode};h.updateUserPreferences(e)},D.toggleFontSize=function(e,t){e.preventDefault();var n={fontSize:t};D.fontSize=t,N.applyFontSize(),h.updateUserPreferences(n)},D.showSummaryTab=function(e,t){t.preventDefault(),$("#"+e).tab("show")},D.navigateToSection=function(e,t,n,i,a){if(e&&"function"==typeof e.preventDefault&&e.preventDefault(),(N.entitlement||!N.earlyAccess)&&void 0!==i){var o=D.productBaseUrl+"/"+i;a&&(o=o+"?query="+a),r.url(o)}},D.facebookShare=function(e){e.preventDefault(),N.share("facebook").then(function(e){N.openSharePopUp(420,350,"http://www.facebook.com/sharer.php?s=100&u="+e)})},D.twitterShare=function(e){e.preventDefault(),N.share("twitter").then(function(e){N.openSharePopUp(590,420,"https://twitter.com/intent/tweet?url="+e+"&via=packtPub&hashtags=packtPub")})},D.redditShare=function(e){e.preventDefault(),N.share("reddit").then(function(e){var t=encodeURIComponent(document.title),n=encodeURIComponent(D.title);N.openSharePopUp(850,705,"http://www.reddit.com/submit?url="+e+"&title="+t+"&bookTitle="+n)})},D.emailShare=function(e){e.preventDefault(),N.share("email").then(function(e){var t="Packt Book: "+D.title,n="Packt Book link: "+e,r="mailto:?Subject="+t+"&body="+n;window.open(r,"_self")})},D.socialShare=function(){N.share("mobile").then(function(e){C.share(e,D.title)})},D.toggleBookmark=function(e){e.preventDefault(),D.bookmarkActive=!D.bookmarkActive},D.downloadCodeFiles=function(){_.addIntercomMetadata({downloaded_code_files:!0}),_.addIntercomEvent("downloaded-code-files",{title:D.title}),a.open(D.codeDownloadUrl,"_blank")},D.completeSection=function(e){N.completeSection(N.isbn,N.chapter,N.section),D.navigateToSection(e,D.nextSection.chapterId,D.nextSection.id,D.nextSection.seoUrl)},D.navigateToPrevSection=function(e){D.navigateToSection(e,D.previousSection.chapterId,D.previousSection.id,D.previousSection.seoUrl)},D.retryGettingContent=function(e){e.preventDefault(),N.addSpinner();var t=N.getCurrentSection();f.getContent(N.isbn,N.chapter,t,N.productType).then(function(e){e&&N.showPage()}).finally(N.removeSpinner)},D.goToHomePage=function(){"video"===N.productType&&d.resetPlayer()},D.buyProduct=function(e){event.preventDefault(),N.sendAddToCartEvent(),a.open(D.addToCartUrl)},D.confirmChunkDownload=function(e,t,n){e.preventDefault();var r="book"===N.productType?"book":"video section";n&&(t.chapterId=n),N.setCurrentChunk(t),x.confirm("Download "+r+"?","Download").then(function(){D.downloadChunk(D.currentChunk)})},D.confirmChunkRemove=function(e,t,n){e.preventDefault();var r="book"===N.productType?"book":"video section";n&&(t.chapterId=n),N.setCurrentChunk(t),x.confirm("Remove "+r+"?","Remove").then(function(){D.removeDownloadedChunk(D.currentChunk)})},D.downloadChunk=function(e){e.downloadInfo=k.handleDownload(N.isbn,e.id,e.chapterId,N.productType)},D.removeDownloadedChunk=function(e){e.downloadInfo=k.handleRemove(N.isbn,e.id,e.chapterId,N.productType)},D.cancelChunkDownload=function(e,t){e.preventDefault(),t.isbn||(t.isbn=N.isbn),t.productType||(t.productType=N.productType),t.downloadInfo=k.cancelDownload(t)},D.inContentSearch=function(e){j.debug("inContentSearch()",e),N.mark(e)},D.cancelInContentSearch=function(){r.search("query",null),D.inContentSearchText="",N.unmark()}},mark:function(e){N.unmark(),j.debug("mark()",e);var t=".book-content",n=document.querySelector(t);if(!D.content||!n)return j.debug("content not loaded yet, setting onFinishLoadBookContent"),void(D.onFinishLoadBookContent=function(){c(function(){j.debug("content loaded, marking",e),N.mark(e)})});j.debug("marking:",n),this.instance=new o.default(n),this.instance.mark(e)},unmark:function(){j.debug("unmark()"),this.instance&&"function"==typeof this.instance.unmark&&this.instance.unmark()},completeSection:function(e,t,n){var r=n||t;D.loggedIn&&(f.updateUserProductCompletedSectionCache(e,t,r,!0),f.completeSection(e,t,r,m.getDuration()).then(function(){var e,n=D.tableOfContents.find(function(e){return e.id===t});n&&(e=n.children.find(function(e){return e.id===r}),e&&(e.completed=!0),n.completed=!n.children.find(function(e){return!e.completed}))}).catch(function(n){f.updateUserProductCompletedSectionCache(e,t,r,!1)}))},openSubMenu:function(){$("#collapse"+N.chapter).collapse("show")},openSharePopUp:function(e,t,n){var r=screen.height/2-t/2,i=screen.width/2-e/2;window.open(n,"sharer","top="+r+", left="+i+", toolbar=0, status=0, width="+e+",height="+t)},share:function(e){return h.getMetaData().then(function(e){var t=e?"?uuid="+e.uuid:"",n=""+r.absUrl()+t;return encodeURIComponent(n)})},toggleBookmark:function(){var e,n,i,a,o,s,c,u=N.section?N.section:N.chapter;$("#bookmarkToggle").attr("disabled",!0),(a=D.tableOfContents.find(function(e){return e.id===N.chapter}))&&(n=a.children.findIndex(function(e){return e.id===u}),i=a.children[n],e=D.bookmarks.findIndex(function(e){return e.id===u}),c=D.bookmarked=!D.bookmarked,t.$broadcast("content:bookmarked",{bookmarked:c,title:D.title,isbn:N.isbn,seoUrl:u.seoUrl,category:N.category,chapter:N.getChapterName(D.currentChapter),section:N.getSectionName(D.currentChapter,D.currentSection),type:N.productType,path:r.path()}),P.updateBookmark(N.isbn,N.chapter,N.section,D.bookmarked).then(function(){c?(i.bookmarked=!0,i.chapterId=a.id,i.bookmarkTitle=i.title,D.bookmarks.push(i),P.increaseBookmarkCount(),o="warning",s=f.getAddBookmarkAlert(i.bookmarkTitle)):(D.bookmarks.splice(e,1),P.decreaseBookmarkCount(),o="danger",s=f.getRemoveBookmarkAlert(i.bookmarkTitle)),y.addAlert(s,o),$("#bookmarkToggle").attr("disabled",!1)}).catch(function(){D.bookmarked=!D.bookmarked,$("#bookmarkToggle").attr("disabled",!1)}))},setNightMode:function(e){D.nightmode=!!e,N.applyNightmode()},applyNightmode:function(){if(D.nightmode)return void $("body").addClass("nightmode");$("body").removeClass("nightmode")},setFontSize:function(e){e&&(D.fontSize=e.toString(),N.applyFontSize())},applyFontSize:function(){$("#reader-content").removeClass(function(e,t){return(t.match(/(^|\s)font-\S+/g)||[]).join(" ")}),D.fontSize&&(D.fontSize=D.fontSize.replace(".","-"),$("#reader-content").addClass("font-"+D.fontSize))},setBuyButtonVisibility:function(){D.showBuyButton=!1,h.getBuyButtonVisibility().then(function(e){D.showBuyButton=e})},setDiscountedPrintBuyButton:function(){D.showDiscountedPrintBuyButton=!1;var e=L.getFlagStatus("discounted-print-book");D.loggedIn&&e&&"video"!==N.productType&&s.all([h.hasFeature("printBookDiscount"),b.getCurrencyAndCountryFromIp().then(function(e){return e.currency}).catch(function(){return"USD"})]).then(function(e){var t=i(e,2),n=t[0],r=t[1],a=b.getStoreUrlByCurrency(r);D.discountedPrintBuyUrl=""+a+D.productMetaData.shopUrl,D.showDiscountedPrintBuyButton=!!n}).catch(function(){D.showDiscountedPrintBuyButton=!1})},setFiveDollarBuyButton:function(){D.showFiveDollarBuyButton=!1;var e=L.getFlagStatus("all-products-five-dollar");D.loggedIn&&e&&s.all([h.hasFeature("allProductsFiveDollar"),b.getCurrencyAndCountryFromIp().then(function(e){return e.currency}).catch(function(){return"USD"})]).then(function(e){var t=i(e,2),n=t[0],r=t[1],a=b.getStoreUrlByCurrency(r),o=b.getCurrencySymbol(r);D.fiveDollarBuyUrl=""+a+D.productMetaData.shopUrl;var s="INR"===r?400:5;D.fiveDollarBuyBtnText="Buy for "+o+s,D.showFiveDollarBuyButton=!!n}).catch(function(){D.showFiveDollarBuyButton=!1})},setContinueButton:function(e){return D.isBtnDisabled=!1,D.tableOfContents.length?!e.entitlement&&N.earlyAccess?(D.continueText="Not available",void(D.isBtnDisabled=!0)):e.entitlement||""!==e.lastRead?""!==e.lastRead?(D.continueText="Resume Learning",void(D.lastRead=e.lastRead)):(D.continueText="Start",void N.setDefaultLastRead()):(D.continueText="Free sample",void N.setDefaultLastRead()):(D.continueText="Coming Soon",void(D.isBtnDisabled=!0))},setDefaultLastRead:function(){if("video"===N.productType)return void(D.lastRead=D.tableOfContents[0].children[0].seoUrl);D.lastRead=D.tableOfContents[0].seoUrl},isHomePage:function(){return!N.chapter},setNextSection:function(){var e,t,n=N.section?N.section:N.chapter,r=D.tableOfContents.find(function(e,n){return t=n,e.id===N.chapter});if(r)return(e=r.children.findIndex(function(e){return e.id===n}))<r.children.length-1?(D.nextSection=r.children[e+1],void(D.nextSection.chapterId=r.id)):t<D.tableOfContents.length-1?(D.nextSection=D.tableOfContents[t+1].children[0],void(D.nextSection.chapterId=D.tableOfContents[t+1].id)):void(D.nextSection=!1)},setPreviousSection:function(){var e,t,n=N.section?N.section:N.chapter,r=D.tableOfContents.find(function(e,n){return t=n,e.id===N.chapter});if(r){if((e=r.children.findIndex(function(e){return e.id===n}))>0)return D.previousSection=r.children[e-1],void(D.previousSection.chapterId=r.id);if(t>0){var i=D.tableOfContents[t-1].children.length;return D.previousSection=D.tableOfContents[t-1].children[i-1],void(D.previousSection.chapterId=D.tableOfContents[t-1].id)}D.previousSection=!1}},showFirstPage:function(){return N.addSpinner(),N.sendProductDataToGTM(),N.showCoverPageUpsell(),N.showB2bContentUnlockUpsell(),t.$broadcast("content:home-viewed",{title:D.title,isbn:N.isbn,category:N.category,path:r.path(),type:N.productType}),f.getProductSummary(N.isbn).then(N.processProductSummary).finally(N.removeSpinner)},processProductSummary:function(e){D.productSummary=e,D.contentView="https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/product/product-home.html",D.firstPage=!0,D.productSummary.publicationDate=b.convertDate(e.publicationDate,"MMMM yyyy"),e&&e.authorList&&(D.productSummary.authorNameText=D.productSummary.authorList.map(function(e){return e.name}).join(", ")),N.metaDescription=e.oneLiner,N.sendPageMetadata()},showContentPage:function(){N.addSpinner(),N.sendProductDataToGTM(),N.openSubMenu(),m.resetTimer();N.getContent()},getContent:function(){var e=N.getCurrentSection();return f.getContent(N.isbn,N.chapter,e,N.productType).then(N.handleShowingContent).then(function(){N.removeSpinner(),j.debug("start processing next section...");var e=v.readAheadPages||2;N.processReadAheadToc(D.tableOfContents,e)}).catch(function(e){logger("getContent error:",e),N.removeSpinner(),N.goToFrontPage()})},handleShowingContent:function(e){var n=N.getSection(N.chapter,N.section),i=void 0;if(j.debug("handleShowingContent - currentSection:",n),f.updateProductLastReadCache(N.isbn,n.seoUrl),n.chapterId=N.chapter,"chapter"===n.type&&(i=n.title),"video"===N.productType&&(D.sectionTitle=n?n.title:"",D.sectionSummary=n?n.summary:"",N.metaDescription=n&&n.metaDescription?n.metaDescription.substr(0,300)+"...":""),D.contentView="https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/product/product-content.html",e){if(D.isTruncatedContent=e.isTruncatedContent,D.isContentAvailable=!0,D.entitled=e.entitled,!D.hasEarlyAccess&&N.earlyAccess)throw{};if(e.content)switch(N.productType){case"video":N.file=e.content.file,e.content.captions&&(N.captions=e.content.captions,D.hasCaptions=!0),N.isVideoElementLoaded()?N.onFinishLoadVideoContent():D.onFinishLoadContent=N.onFinishLoadVideoContent;break;default:D.content=l.updateHtml(e.content,D.tableOfContents,D.productBaseUrl,i),c(function(){"function"==typeof D.onFinishLoadBookContent&&D.onFinishLoadBookContent()}),N.metaDescription=N.getMetaDescription(e.content),$("html,body").animate({scrollTop:0},"slow"),m.startTimer()}else d.resetPlayer();var a=document.querySelector(".sidebar");t.sidebarScroll&&t.sidebarScrollProduct===N.isbn&&c(function(){j.info("Scrolling to %o",t.sidebarScroll),a.scrollTo(0,t.sidebarScroll)}),t.$broadcast("content:viewed",{title:D.title,isbn:N.isbn,seoUrl:n.seoUrl,category:N.category,contentLoaded:!0,chapter:N.getChapterName(D.currentChapter),section:N.getSectionName(D.currentChapter,D.currentSection),lastReadPath:r.path(),type:N.productType}),c(N.addUserView,50)}else D.isContentAvailable=!1;D.firstPage=!1,N.showUpsell(),N.showSoftUpsell(),N.showB2bContentUnlockUpsell(),N.removeSpinner(),N.sendPageMetadata(),j.debug("handleShowingContent finished")},getMetaDescription:function(e){try{var t=160,n=$(e);n.find(":header").remove();var r=u("truncate_text")(n.text(),t);return j.info("Truncated to "+r.length+":",r),r}catch(t){return e}},goToFrontPage:function(){r.path(v.baseUrl+"/"+N.productType+"/"+e.category+"/"+N.isbn)},addUserView:function(){var e=N.section&&"chapter"!==N.section?N.chapter+"/"+N.section:N.chapter;return w.microserviceRequest("usersPacktlib","v2","users/me/products/"+N.isbn+"/view-count","PATCH",{sectionId:e},!0,!1,!1,!1,{queueOffline:!0})},getRecommendations:function(){var e=void 0;f.getRecommendations(N.isbn).then(function(t){if(!t)return s.reject("offline");e=t;var n=t.map(function(e){return e.isbn13});return f.getProductUserData(n,"line")}).then(function(t){e.forEach(function(e){e.lastReadPath=""+v.baseUrl+e.path,t&&t[e.isbn13]&&(""!==t[e.isbn13].lastRead&&(e.lastReadPath+="/"+t[e.isbn13].lastRead),e.price=t[e.isbn13].price)}),D.recommendedList=e})},isVideoElementLoaded:function(){return $("#video-content").length>0},onFinishLoadVideoContent:function(){d.playVideo(N.file,document.title,N.captions,D.completeSection),D.onFinishLoadContent=!1},getSectionName:function(e,t){var n=N.getSection(e,t);return n?n.title:""},getChapterName:function(e){var t=D.tableOfContents.find(function(t){return t.id===e});return t?t.title:""},getSection:function(e,t){var n=D.tableOfContents.find(function(t){return t.id===e});return!!n&&(t?n.children.find(function(e){return e.id===t})||!1:n)},getCurrentSection:function(){var e=N.section;if(!e){var t=N.getSection(N.chapter);e=t?t.children[0].originalId:"chapter"}return j.debug("got current section id %s",e),e},showPage:function(){return N.isHomePage()?N.showFirstPage().then(N.getRecommendations):(!N.entitlement&&N.earlyAccess&&r.path(D.productBaseUrl),N.showContentPage())},sendProductDataToGTM:function(){D.tableOfContents&&_.populateProductPageDataLayers({title:D.title,category:N.category,type:N.productType,chapter:N.getChapterName(D.currentChapter),section:N.getSectionName(D.currentChapter,D.currentSection)})},sendAddToCartEvent:function(){_.addProductsAddedToCartEvent([{title:D.title,isbn13:N.isbn,price:D.price,category:N.category,type:N.productType}])},checkIfLastPageOfProject:function(){var e=S.getProjectWithCurrentLastPage(r.path());if(e){D.projectTitle=e.display_name,S.deletePersistedProject(e);var t=$("#endProjectsModal");return void t.modal("show")}},setTableOfContents:function(e){D.tableOfContents=e},setCurrentChunk:function(e){if("book"===N.productType){D.currentChunk={isbn:N.isbn,productType:"book"};var t=k.getDownloadInfo(N.isbn,"",N.productType);D.currentChunk.downloadInfo=t||{isInProgress:!1,isCancelable:!1,isFinished:!1}}else D.currentChunk=e},addSpinner:function(e){D.loading=!0},removeSpinner:function(e){D.loading=!1},sendPageMetadata:function(){var e={isbn13:N.isbn,title:D.productMetaData.title,description:N.metaDescription||"",filepath:D.imageUrl,productType:N.productType,coverUrl:D.productBaseUrl},n=N.getSection(D.currentChapter,D.currentSection);n?(e.pageTitle=n.title+" - "+D.productMetaData.title,e.canonicalUrl=D.productBaseUrl+"/"+n.seoUrl):(e.pageTitle=D.productMetaData.title,e.canonicalUrl=D.productBaseUrl),D.productMetaData.authorList&&D.productMetaData.authorList.length&&(e.authorList=D.productMetaData.authorList.map(function(e){return e.name})),D.productMetaData.publicationDate&&(e.publicationDate=new Date(D.productMetaData.publicationDate).toISOString()),t.$emit("metadata",{pageType:"product",metadata:e})},doesUserHaveSubscription:function(){return h.userIsSubscribed().then(function(e){D.hasSubscription=e})},doesUserHavePaidSubscription:function(){return h.hasPaidSubscription().then(function(e){D.hasPaidSubscription=e})},showUpsell:function(){D.showUpsell=(!D.loggedIn||!D.entitled)&&("book"===D.productType&&D.isTruncatedContent||"video"===D.productType)&&!D.isB2bCustomerAdmin},showSoftUpsell:function(){D.showSoftUpsell=!(D.showUpsell||D.hasSubscription||D.owned||D.isB2bCustomerAdmin)},showCoverPageUpsell:function(){D.showCoverPageUpsell=!(D.loggedIn&&D.entitlement||D.isB2bCustomerAdmin)},showB2bContentUnlockUpsell:function(){D.showB2bContentUpsell=!D.entitlement&&D.isB2bCustomerAdmin,D.b2bUpsellForFreeSection=D.showB2bContentUpsell&&("video"===D.productType&&D.entitled||"book"===D.productType&&!D.isTruncatedContent)}};N.init()}])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(370),s=r(o),c=n(713),u=r(c);(0,r(n(715)).default)(s.default);var l={autoplay:!0,controls:!0,fluid:!0,persistTextTrackSettings:!0,playbackRates:[.5,.75,1,1.25,1.5,1.75,2],preload:"auto",responsive:!0,textTrackSettings:!0},d={clickArea:"line",showTitle:!1,showTrackSelector:!1,autoscroll:!0,stopScrollWhenInUse:!0},f="#transcript",h=function(){function e(t,n,r,a,o,s,c,u,l,d){i(this,e),this.timerService=t,this.configService=n,this.analyticsService=r,this.$injector=a,this.$rootScope=o,this.$http=s,this.$q=c,this.logManager=u,this.userService=l,this.setVideoSpeedDebounced=d.debounce(this.setVideoSpeed,2e3),this.playerInstance=null,this.log=u.create("packt:video-js")}return e.$inject=["timerService","configService","analyticsService","$injector","$rootScope","$http","$q","logManager","userService","utilitiesService"],a(e,[{key:"playVideo",value:function(e,t,n,r){var i=this;this.lastPosition=0,this.log.debug("playVideo(file, title, captions, onCompleteCallback)",e,t,n,r),this.title=t,this.positionCalculated=!1,this.resetPlayer();var a={poster:null,sources:[{src:e,type:"video/mp4"}]},o=Object.assign({},l,a);this.log.info("using options:",o),this.playerInstance=(0,s.default)("video-content",o),this.playerInstance.ready(function(){return i.playerReady(r)}),n&&this.addCaptions(n).then(function(){return i.showTranscript()})}},{key:"resetPlayer",value:function(){this.playerInstance&&("function"==typeof this.playerInstance.dispose&&this.playerInstance.dispose(),this.playerInstance=null)}},{key:"playerReady",value:function(e){var t=this;this.log.info("player is ready"),this.log.debug("setting playback rate"),this.getVideoSpeed().then(function(e){t.log.debug("Got Playback rate",e),t.playerInstance.playbackRate(e)}),this.log.debug("attaching events",this.playerInstance),this.playerInstance.on("play",function(){t.timerService.startTimer(),t.analyticsService.addVideoPlayEvent(t.title),0===t.lastPosition&&t.analyticsService.addVideoProgressEvent(t.title,"0%")}),this.playerInstance.on("pause",function(){t.timerService.stopTimer(),t.analyticsService.addVideoPauseEvent(t.title)}),this.playerInstance.on("timeupdate",function(){t.checkProgress()}),this.playerInstance.on("ratechange",function(){var e=t.playerInstance.playbackRate();t.log.debug("Rate Changed to ",e),t.setVideoSpeedDebounced(e)}),this.playerInstance.on("ended",function(){t.log.info("video finished, calling complete callback"),e()})}},{key:"addCaptions",value:function(e){var t=this;if(this.log.debug("addCaptions(captions)",e),!e||"function"!=typeof e.forEach)return this.log.error("Could not process captions array",e),this.$q.reject(new Error("Could not process captions array"));var n=[];return e.forEach(function(e){return n.push(t.processCaption(e))}),this.$q.all(n)}},{key:"processCaption",value:function(e){var t=this,n=e.location,r=e.type;return n||this.log.error("no url for caption",n),this.getCaptionsAsBlob(n).then(function(e){return t.convertCaptions(e,r)}).then(function(e){return t.addTrack("captions","en","English",e)}).catch(function(e){t.log.error("could not get webVTT captions",e)})}},{key:"convertCaptions",value:function(e,t){if(!t||"srt"!==t)return this.log.debug("Captions do not need to be converted"),e;var n=new u.default(e);return this.log.debug("converter:",n),n.getURL()}},{key:"addTrack",value:function(e,t,n,r){return this.playerInstance.addRemoteTextTrack({kind:e,language:t,label:n,src:r},!1)}},{key:"getCaptionsAsBlob",value:function(e){var t=this;return this.log.debug("getCaptionsAsBlob(url)",e),this.$http.get(e).then(function(e){if(t.log.debug("Got captions response",e),!e||!e.data)throw new Error("Bad Response: response.data did not exist");var n=e.data;return new Blob([n])})}},{key:"showTranscript",value:function(){var e=Object.assign({},d,{el:document.querySelector(f)});this.log.debug("Adding Video Transcript with options:",e),this.playerInstance.transcript(e)}},{key:"checkProgress",value:function(){var e=this.playerInstance.currentTime(),t=this.playerInstance.duration(),n=this.lastPosition;if(!this.positionCalculated){var r=t/4;this.firstQuarter=r,this.half=2*r,this.thirdQuarter=3*r,this.positionCalculated=!0}n<this.firstQuarter&&e>this.firstQuarter?this.analyticsService.addVideoProgressEvent(this.title,"25%"):n<this.half&&e>this.half?this.analyticsService.addVideoProgressEvent(this.title,"50%"):n<this.thirdQuarter&&e>this.thirdQuarter?this.analyticsService.addVideoProgressEvent(this.title,"75%"):e===t&&this.analyticsService.addVideoProgressEvent(this.title,"100%"),this.lastPosition=e}},{key:"getVideoSpeed",value:function(){var e=this;return this.videoSpeed?this.$q.resolve(this.videoSpeed):this.userService.getMetaData().then(function(t){if(!t||!t.preferences)throw new Error("No metadata returned");var n=t.preferences;if(!n||!n.videoSpeed)throw new Error("User does not yet have a video speed set, using default (1.0)");return e.log.info("Got video speed",n.videoSpeed),e.videoSpeed=n.videoSpeed,n.videoSpeed}).catch(function(t){return e.log.error("Could not get User Preference for Video Speed",t),e.videoSpeed=1,e.log.debug("Using default video speed",1),1})}},{key:"setVideoSpeed",value:function(e){if(this.log.debug("setVideoSpeed():",e),this.videoSpeed===e){var t="User preference for video speed already set to "+e;return this.log.error(t),this.$q.reject(t)}this.videoSpeed=e;var n={videoSpeed:e};return this.log.debug("sending to service",n),this.userService.updateUserPreferences(n)}},{key:"loadStatusBarPlugin",value:function(){this.$cordovaStatusBar||this.$injector.has("$cordovaStatusBar")&&(this.$cordovaStatusBar=this.$injector.get("$cordovaStatusBar"))}},{key:"showStatusbar",value:function(){this.loadStatusBarPlugin(),this.$cordovaStatusBar.hide(),this.$cordovaStatusBar.show()}}]),e}();angular.module("PacktUnlimited.services").service("videoService",h),t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";r(this,e)}return e.$inject=["$injector"],i(e,[{key:"share",value:function(e,t){var n={message:t+" via @packtPub #packtPub",subject:"Packt Book: "+t,url:decodeURIComponent(e)};return this.socialSharingPlugin.shareWithOptions(n)}}]),e}();angular.module("PacktUnlimited.services").service("shareService",a)},function(e,t,n){"use strict";angular.module("PacktUnlimited.services").factory("timerService",function(){var e,t,n=this,r=new Date(0),i=function(){var e=new Date;r=new Date(e-t)};return this.resetTimer=function(){n.stopTimer(),r=new Date(0),t=null},this.startTimer=function(){var n=new Date;t=r?new Date(n-r):n,e=setInterval(i,1e3)},this.stopTimer=function(){clearInterval(e)},this.getDuration=function(){return Math.floor(r.getTime()/1e3)},this})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(708),a=r(i),o=n(706),s=r(o),c=n(707);angular.module("PacktUnlimited.projects",[]).service("projectsService",a.default),angular.module("PacktUnlimited.projects").controller("newProjectsListController",s.default).component("projectEndModal",c.ProjectEndModalComponent)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o,s,c){"ngInject";r(this,e),this.userService=t,this.productService=n,this.utilitiesService=i,this.entitlementsService=a,this.$rootScope=o,this.$q=s,this.analyticsService=c,this.loadingMsg="Loading Purchases",this.pageIntroBackgroundImageName="HG1200xVariable-Purchased.png",this.init()}return e.$inject=["userService","productService","utilitiesService","entitlementsService","$rootScope","$q","analyticsService"],i(e,[{key:"init",value:function(){this.utilitiesService.unsetNightmode(),this.$rootScope.currentPage="purchases",this.limit=12,this.offset=0,this.currentPage=0,this.loading=!0,this.searchString="",this.getPurchasedProducts(this.offset,this.limit,this.searchString),this.analyticsService.addIntercomMetadata({viewed_owned_titles:!0})}},{key:"changePage",value:function(e){this.offset=e*this.limit,this.getPurchasedProducts(this.offset,this.limit,this.searchString)}},{key:"changeLimit",value:function(e){this.limit=e,this.getPurchasedProducts(0,this.limit,this.searchString)}},{key:"setPagination",value:function(e,t){this.productCount=e,this.numberPageTotal=e?Math.ceil(e/this.limit):0,this.currentPage=t?t/this.limit:0,this.pageTotal=new Array(this.numberPageTotal)}},{key:"search",value:function(e,t){e.preventDefault(),this.searchString=t,this.offset=0,this.getPurchasedProducts(this.offset,this.limit,this.searchString)}},{key:"getPurchasedProducts",value:function(e,t,n){var r=this,i=this.$q.resolve();this.loading=!0,i.then(function(){return r.entitlementsService.getBatchedUserOwnedProducts(e,t,"purchased_date","desc",n)}).then(function(t){var n=r.entitlementsService.getPurchasedCount()||0;if(r.setPagination(n,e),!t||!t.length)return void(r.purchasedProducts=[]);r.purchasedProducts=r.productService.addProductList(t)}).finally(function(){r.loading=!1})}}]),e}();angular.module("PacktUnlimited.controllers").controller("purchasesController",a)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o,s){var c=this,u={forgottenPasswordToken:"",init:function(){e.currentPage="password-reset",u.initVars(),u.redirectIfLoggedIn(),u.setScopeFunctions(),u.setToken()},initVars:function(){c.loading=!1,c.baseUrl="",c.cdnUrl="https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878",c.cdnPath="https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/",c.logoUrl=a.cdnUrl("Packt-logo-135.png"),c.maptIoUrl="https://mapt.packtpub.com",c.registerForm={password:{text:"",focus:!1,rules:{oneLower:!1,oneUpper:!1,oneNumber:!1,minEightChars:!1}},confirmPassword:{text:"",focus:!1,rules:{matchText:!1}}}},isValidPassword:function(){return o.areRulesSatisfied(c.registerForm.password.rules)},isValidConfirmPassword:function(){return c.registerForm.confirmPassword.rules.matchText},redirectIfLoggedIn:function(){s.hasJwtAuth()&&t.path("")},setToken:function(){u.forgottenPasswordToken=n.token||"",u.forgottenPasswordToken||t.path("")},setScopeFunctions:function(){c.resetPassword=function(){c.loading=!0;var e=$("#password").val(),n=$("#password-confirmation").val(),o="";if(u.isValidPassword()||(o+="Your password must contain a minimum of 8 characters and at least; one number, one lowercase character and one uppercase character. <br/>"),u.isValidConfirmPassword()||(o+="The passwords do not match. <br/>"),o)return i.addAlert(o,"danger"),void(c.loading=!1);r.resetPassword(u.forgottenPasswordToken,e,n).then(function(){t.path(a.getPath("login")).search({reset:"true"})}).catch(function(e){if(e&&e.message)return void i.addAlert(e.message,"danger");i.addAlert("Reset password is not available right now.","danger")}).finally(function(){c.loading=!1})},c.monitorRegisterPassword=function(){var e=c.registerForm.password.text;c.registerForm.password.rules.oneLower=o.hasAtLeastOneLowercaseLetter(e),c.registerForm.password.rules.oneUpper=o.hasAtLeastOneUppercaseLetter(e),c.registerForm.password.rules.oneNumber=o.hasAtLeastOneNumber(e),c.registerForm.password.rules.minEightChars=o.hasMinLength(e,8)},c.monitorConfirmRegisterPassword=function(){c.registerForm.confirmPassword.rules.matchText=c.registerForm.confirmPassword.text===c.registerForm.password.text}}};u.init()}r.$inject=["$rootScope","$location","$routeParams","userService","alertService","configService","validationService","authService"],angular.module("PacktUnlimited.controllers").controller("resetPassword",r),r.$inject=["$rootScope","$location","$routeParams","userService","alertService","configService","validationService","authService"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o,s,c,u,l){"ngInject";r(this,e),this.userService=t,this.utilitiesService=n,this.configService=i,this.subscriptionService=a,this.b2bService=o,this.authService=s,this.$rootScope=c,this.$q=u,this.log=l.create("rewards-controller"),this.loadingMsg="Loading Rewards...",this.pageIntroBackgroundImageName="HG1200xVariable-Rewards.png",this.init()}return e.$inject=["userService","utilitiesService","configService","subscriptionService","b2bService","authService","$rootScope","$q","logManager"],i(e,[{key:"init",value:function(){var e=this;this.utilitiesService.unsetNightmode(),this.$rootScope.currentPage="rewards",this.getPath=function(t){return e.configService.getPath(t)},this.progressCircleStrokeLength=88,this.showError=!1,this.loading=!0,this.loadPageContent()}},{key:"loadPageContent",value:function(){var e=this;this.userService.getMetaData().then(function(t){if(!t)throw new Error("No user metadata");return e.$q.all([e.setCreditsBlock(),e.setProgressBlock()])}).catch(function(t){e.log.error("Loading page error:",t),e.showError=!0}).finally(function(){e.showCreditsData||e.showProgressData||(e.showError=!0),e.loading=!1})}},{key:"setCreditsBlock",value:function(){var e=this;return this.userService.getCreditsCount().then(function(t){return e.log.debug("Got credits:",t),(0===t||t)&&(e.numberOfCredits=t,e.showCreditsData=!0),t}).catch(function(t){e.log.error("Setting credits error:",t)})}},{key:"setProgressBlock",value:function(){var e=this,t=this.authService.getJwtPayload();return this.userService.hasFeature("monthlyTracker").then(function(n){return n?e.b2bService.isB2bUser().then(function(r){return r&&t.organisationIds&&t.organisationIds.length?(e.pageSubtitle="We will automatically add 1 credit to your account per month until your existing personal subscription has expired",!1):(e.log.debug("Has monthly tracker access:",n),e.pageSubtitle="We automatically add 1 credit to your account per month.",e.subscriptionService.getMonthlyLearning())}):(e.pageSubtitle="See how many credits you have available to use.",!1)}).then(function(t){return t&&(e.log.debug("Got progress data:",t),e.setProgressData(t),e.showProgressData=!0),t}).catch(function(t){e.log.error("Setting progress error:",t)})}},{key:"setProgressData",value:function(e){var t=e.sectionCount||0;this.setSectionProgress(t)}},{key:"setSectionProgress",value:function(e){this.completedSections=e>50?50:e,this.monthlySectionGoal=50,this.remainingSectionsToComplete=50-this.completedSections;var t=0===this.completedSections?0:this.completedSections/50;this.isSectionCompletedGoalAchived=1===t,this.sectionCountStrokeDashOffsetValue=this.progressCircleStrokeLength-t*this.progressCircleStrokeLength}}]),e}();angular.module("PacktUnlimited.controllers").controller("rewardsController",a)},function(e,t,n){"use strict";angular.module("PacktUnlimited.services").factory("alertService",["$timeout",function(e){var t=$("#alertbox"),n=0,r=function(){return"subAlert"+(n+=1)},i=function(e,t,n){return'<div id="'+e+'" class="alert alert-'+t+' alert-dismissable">            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>            <span>'+n+"</span>          </div>"};return this.addAlert=function(n,a,o,s){var c=r();a=a||"warning",s?$("#"+s).append(i(c,a,n)):t.append(i(c,a,n)),!(0===o)&&(o=o||5e3,e(function(){var e=$("#"+c);e.fadeOut(500,function(){e.remove()})},o))},this}])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(79),s=function(){function e(t,n,i,a,o,s,c,u,l,d,f,h,p){"ngInject";r(this,e),this.$window=t,this.$rootScope=n,this.$q=i,this.$route=a,this.$filter=o,this.userService=s,this.authService=c,this.utilitiesService=u,this.subscriptionService=l,this.newslettersService=d,this.intercomService=f,this.$injector=h,this.log=p.create("packt:analytics"),this.userObj={},this.isHeapIdentitySet=!1,this.taxObject={subTotal:0,taxTotal:0,total:0},this.$window.dataLayer=this.$window.dataLayer||[]}return e.$inject=["$window","$rootScope","$q","$route","$filter","userService","authService","utilitiesService","subscriptionService","newslettersService","intercomService","$injector","logManager"],a(e,[{key:"addEvent",value:function(e,t){var n=angular.extend({event:e},t);this.log.debug("adding event to dataLayer:",n),this.$window.dataLayer.push(n)}},{key:"sendMobileEvent",value:function(e){return this.mobileAnalyticsService||(this.mobileAnalyticsService=this.$injector.get("mobileAnalyticsService")),this.mobileAnalyticsService.addEvent(e)}},{key:"addLoginEvent",value:function(){var e=this;return this.getUserObj().then(function(t){return e.addEvent("accountLogIn",{userId:t.uuid})})}},{key:"addLogoutEvent",value:function(){var e=this;return this.getUserObj().then(function(t){return e.addEvent("accountLogOut",{userId:t.uuid})})}},{key:"addRegisterEvent",value:function(e){var t=this;return this.getUserObj().then(function(e){return t.addEvent("accountRegistration",{userId:e.uuid})})}},{key:"addFormStartedEvent",value:function(e){this.addEvent("formView",{eventCategory:"Form",eventAction:"Form view",eventLabel:e})}},{key:"addFormSubmittedEvent",value:function(e){this.addEvent("formSubmitted",{eventCategory:"Form",eventAction:"Form submitted",eventLabel:e})}},{key:"addFormErrorsEvent",value:function(e,t){this.addEvent("formError",{eventCategory:"Form",eventAction:"Errors: "+t,eventLabel:e})}},{key:"addFormSubmittedSuccessfullyEvent",value:function(e){this.addEvent("formSubmittedSuccessfully",{eventCategory:"Form",eventAction:"Successfully completed",eventLabel:e})}},{key:"populatePageDataLayers",value:function(e){var t=this;return this.log.debug("Populating Page Metadata: %o",e),this.$q.all([this.getUserObj(),this.populateSubscriptionObject()]).then(function(n){var r=i(n,2),a=r[0],o=r[1],s=t.populatePageObject(e),c={user:{userId:a.uuid,loginState:a.loginState,existingCustomer:a.existingCustomer,emailAddress:a.emailAddress,customerType:a.customerType,subscribed_to_newsletter:a.subscribed_to_newsletter}},u={subscription:o},l=angular.extend({},c,s,u);t.log.debug("Final Page Data Layer Object %o",l),t.addEvent("pageDataLayerLoaded",l),t.setHeapIdentity(a.uuid)})}},{key:"populateProductPageDataLayers",value:function(e){var t=this;this.log.debug("Populating Product Page Metadata: %o",e);var n={page:{type:"Product Start - Mapt - Developer Skills Delivered",contentTitle:e.title,contentChapterTitle:e.chapter,contentSection:e.section,contentCategory:this.$filter("titlecase")(e.category),contentType:e.type}};return e.chapter&&(n.page.type="Product Content Detail - Mapt - Developer Skills Delivered"),this.$q.all([this.getUserObj(),this.populateSubscriptionObject()]).then(function(e){var r=i(e,2),a=r[0],o=r[1],s={user:{userId:a.uuid,loginState:a.loginState,existingCustomer:a.existingCustomer,emailAddress:a.emailAddress,customerType:a.customerType}},c={subscription:o},u=angular.extend({},s,n,c);t.log.debug("Final Product Page Data Layer %o",u),t.addEvent("pageDataLayerLoaded",u),t.setHeapIdentity(a.uuid)})}},{key:"addIntercomMetadata",value:function(e,t){this.log.debug("addIntercomMetadata()"),this.log.debug("- metadata:",e),this.log.debug("- forceInTrial:",t),this.intercomService.addMetadata(e,!!t)}},{key:"addIntercomEvent",value:function(e,t){this.intercomService.addEvent(e,t)}},{key:"getUserObj",value:function(){return this.authService.hasJwtAuth()?this.populateUserObject():(this.userObj={loginState:"Logged out"},this.intercomService.bootIntercom(),this.$q.resolve(this.userObj))}},{key:"populateUserObject",value:function(){var e=this;return this.$q.all([this.userService.getMetaData(),this.newslettersService.getUsersNewsletters()]).then(function(t){var n=i(t,2),r=n[0],a=n[1];return r?(e.userObj={loginState:"Logged in",uuid:r.uuid,emailAddress:r.mail,existingCustomer:r.subscription.subscribed,subscribed_to_newsletter:a&&a.length>0},e.intercomService.bootIntercom(r),e.userObj):e.$q.reject("No user data available.")})}},{key:"populateSubscriptionObject",value:function(){var e=this,t={};return this.authService.hasJwtAuth()?this.subscriptionService.hasZuoraAccount().then(function(n){return t.hasZuoraAccount=n,n?e.subscriptionService.getSubscriberAccount():t}).then(function(e){if(!e||"success"!==e.status||!e.data)return t;var n=e.data;return t=angular.extend({},t,n)}):this.$q.resolve(t)}},{key:"populatePageObject",value:function(e){var t={page:{}};switch(this.$route.current.$$route.pageType){case"skill-plans-list":t.page.type="Skill Plans List - Mapt - Developer Skills Delivered";break;case"skill-cards-list":t.page.type="Skill Cards List - Mapt - Developer Skills Delivered";break;case"skill-cards":t.page.type="Skill Card Detail - Mapt - Developer Skills Delivered";break;case"skill-plans":t.page.type="Skill Plan Detail - Mapt - Developer Skills Delivered";break;case"login":t.page.type="Login - "+e.pageTitle;break;case"logout":t.page.type="Logout - "+e.pageTitle;break;case"register":t.page.type="Register - "+e.pageTitle;break;case"account":t.page.type="My Account - "+e.pageTitle;break;case"account-details":t.page.type="Account Details - "+e.pageTitle;break;case"account-subscription":t.page.type="Account Subscription - "+e.pageTitle;break;case"email":t.page.type="Email Preferences - "+e.pageTitle;break;case"update-card-details":t.page.type="Card Details - "+e.pageTitle;break;case"account-billing-details":t.page.type="Billing Details - "+e.pageTitle;break;case"checkout":t.page.type="Checkout - "+e.pageTitle;break;case"downloads":t.page.type="Downloads - "+e.pageTitle;break;default:t.page.type=e.pageTitle}return t}},{key:"addSortByEvent",value:function(e){this.addEvent("sortBy",{sortByValue:e})}},{key:"addFilterByEvent",value:function(e,t){var n=this.$filter("ampersand")(e),r=this.$filter("ampersand")(t);this.addEvent("filterBy",{filterCategory:n,filterValue:r})}},{key:"addUnFilterByEvent",value:function(e,t){this.addEvent("unFilterBy",{filterCategory:e,filterValue:t})}},{key:"addCancelSubscriptionEvent",value:function(){var e=this;return this.getUserObj().then(function(t){return e.addEvent("cancelSubscription",{userId:t.uuid,subscriptionType:t.customerType})})}},{key:"addProductListImpressionEvent",value:function(e,t){var n=this,r=this.$route.current.$$route.pageType,i=void 0;switch(r){case"topics-topic":i=t+" - "+this.$route.current.params.category;break;case"topics":i=t+" - All";break;default:i=t}var a=e.map(function(e,t){return{name:e.title,id:e.isbn13,price:e.price?e.price.price:"",brand:"Packt Publishing",category:n.$filter("titlecase")(e.category),list:i,position:t+1,variant:e.type}});this.addEvent("recordProductListImpressionMapt",{ecommerce:{impressions:a}})}},{key:"addProductListClickEvent",value:function(e,t,n){this.addEvent("recordProductListClickMapt",{ecommerce:{click:{actionField:t,products:[{name:e.title,id:e.isbn13,brand:"Packt Publishing",category:this.$filter("titlecase")(e.category),position:n+1,variant:e.type}]}}})}},{key:"addProductsAddedToCartEvent",value:function(e){var t=this,n=e.map(function(e){return{name:e.title,id:e.isbn13,brand:"Packt Publishing",price:e.price?e.price.price:"",category:t.$filter("titlecase")(t.$filter("format_category_field")(e.category)),variant:e.type,quantity:1}});this.addEvent("recordProductAddedToCart",{ecommerce:{add:{products:n}}})}},{key:"addZuoraCheckoutLoginRegisterEvent",value:function(){this.addEvent("maptCheckoutLoginRegister")}},{key:"addZuoraCheckoutAddressEvent",value:function(){this.addEvent("maptCheckoutAddress")}},{key:"addZuoraCheckoutPaymentEvent",value:function(){this.addEvent("maptCheckoutPayment")}},{key:"saveSubscriptionTax",value:function(e){e&&(this.taxObject=e)}},{key:"addZuoraSubscriptionCreatedEvent",value:function(e,t){var n=this;this.userService.getMetaData().then(function(r){var i=n.taxObject,a=i.taxTotal,s=i.total,c=(0,o.get)(r,"name.firstName"),u=(0,o.get)(r,"name.lastName"),l=(0,o.get)(r,"currency"),d=(0,o.get)(r,"mail"),f=(new Date).toISOString();n.addEvent("recordTransactionCompleteSubscription",{firstname:c,surname:u,email:d,order_date:f,ecommerce:{currencyCode:l,purchase:{actionField:{id:e,affiliation:"Subscription",revenue:s,tax:a,shipping:"",action:"purchase"},products:[{name:t.productName,id:t.ratePlanId,price:s,priceAfterDiscount:s,payment:t.rateTitle,brand:"Packt Publishing",category:"Subscription",variant:"subscriptions",quantity:1}]}}})})}},{key:"setHeapIdentity",value:function(e){!this.isHeapIdentitySet&&e&&(this.$window.heap.identify(e),this.isHeapIdentitySet=!0)}},{key:"addVideoPlayEvent",value:function(e){this.log.info("video play",e),this.addEvent("video play",{event_category:"video",event_action:"play",event_label:e})}},{key:"addVideoPauseEvent",value:function(e){this.log.info("video pause",e),this.addEvent("video pause",{event_category:"video",event_action:"pause",event_label:e})}},{key:"addVideoStopEvent",value:function(e){this.log.info("video stop",e),this.addEvent("video stop",{event_category:"video",event_action:"stop",event_label:e})}},{key:"addVideoProgressEvent",value:function(e,t){this.log.info("video ",t,e);var n="video "+t;this.addEvent(n,{event_category:"video",event_action:t,event_label:e})}},{key:"addNewsletterSubscribeEvent",value:function(){this.addEvent("newsletterSignUp")}},{key:"addNewsletterUnsubscribeEvent",value:function(){this.addEvent("newsletterUnSubscribed")}}]),e}();angular.module("PacktUnlimited.services").service("analyticsService",s)},function(e,t,n){"use strict";angular.module("PacktUnlimited.services").factory("authService",["$q",function(e){var t={OK:200,UNAUTHORIZED:401,hasAuth:function(){var e=t.getCookie("token_live");return Boolean(e)},hasJwtAuth:function(){var e=t.getCookie("access_token_live");return Boolean(e)},isAuthenticated:function(){return t.hasJwtAuth()?e.resolve(t.OK):e.reject(t.UNAUTHORIZED)},canAttemptSessionLogin:function(){return t.getCookie("SESS_live")&&t.getCookie("access_token_live")&&t.getCookie("refresh_token_live")},getCookie:function(e){var t,n=e+"=",r=document.cookie.split(";");return r.find(function(e){return t=e.trim(),0===e.trim().indexOf(n)})?t.substring(n.length,t.length):""},shouldSetSecureFlag:function(e){var t=!1;return e&&(t=!0),t},setCookie:function(e,t,n,r,i,a){var o,s="",c="",u=r||"",l=!0===this.shouldSetSecureFlag(a)?" secure;":"";n&&(o=new Date,o.setTime(o.getTime()+24*n*60*60*1e3),s="; expires="+o.toGMTString()),c=e+"="+t+s+";",i||(c+=" domain=.packtpub.com;"),c+=" path=/"+u+";",c+=l,document.cookie=c},unsetAuthentication:function(){t.setCookie("SESS_live","","-1"),t.setCookie("token_live","","-1"),t.setCookie("token_live","","-1","",!0),t.setCookie("access_token_live","","-1"),t.setCookie("refresh_token_live","","-1")},unsetV1Auth:function(){t.setCookie("SESS_live","","-1"),t.setCookie("token_live","","-1"),t.setCookie("token_live","","-1","",!0)},sessionsExist:function(){var e=t.getCookie("access_token_live"),n=t.getCookie("SESS_live");return""!==e&&!angular.isUndefined(e)||""!==n&&!angular.isUndefined(n)},setAuthenticationCookies:function(e,n,r){e&&n&&(t.setCookie("access_token_live",e,30,"",!1,!0),t.setCookie("refresh_token_live",n,30,"",!1,!0)),r&&t.setCookie("token_live",r,30,"",!1,!0)},getAccessTokenMetadata:function(e){if(!e)return{};try{var t=e.split(".")[1];return JSON.parse(atob(t))}catch(e){return{}}},getEmailFromAccessToken:function(){var e=t.getCookie("access_token_live");return t.getAccessTokenMetadata(e).username||""},getJwtPayload:function(){var e=t.getCookie("access_token_live");if(!e)return null;var n=t.getAccessTokenMetadata(e);return n&&Object.keys(n).length?n:null}};return t}])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o={CUSTOMER_ADMIN:"customer-admin",TEAM_MANAGER:"team-manager"},s=function(){function e(t,n,i,a,o){"ngInject";r(this,e),this.httpService=t,this.utilitiesService=n,this.$q=i,this.cacheService=a,this.authService=o}return e.$inject=["httpService","utilitiesService","$q","cacheService","authService"],a(e,[{key:"createB2bAccount",value:function(e){var t=this,n={name:e.name,businessEmail:e.businessEmail};return this.httpService.microserviceRequest("b2b","v1","accounts","POST",n,!0).then(function(e){if(!e||!e.data||!e.data.length)throw new Error("Something went wrong, please retry or get in touch with us!");return t.cacheService.deleteCachedPromise("users/me/roles-and-subjects","microservice/"),t.httpService.getNewAccessToken().then(function(){return e.data[0]})})}},{key:"getB2bAccountById",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.httpService.microserviceRequest("b2b","v1","accounts/"+e,"GET",{},!0,{cachePromiseName:"accounts/"+e}).then(function(e){if(!e||!e.data||!e.data.length)throw new Error("Account details not available right now.");var r=i(e.data,1),a=r[0];return n?t.translateAccountCountryAndStateToIds(a):a})}},{key:"translateAccountCountryAndStateToIds",value:function(e){var t=this,n=Object.assign({},e);return e.country?this.utilitiesService.getCountryIdByName(e.country).then(function(r){return n.country=r,e.state?t.utilitiesService.getZoneIdByName(r,e.state):null}).then(function(e){return e&&(n.state=e),n}):this.$q.resolve(e)}},{key:"getB2bRolesAndSubjects",value:function(){return this.httpService.microserviceRequest("b2b","v1","users/me/roles-and-subjects","GET",{},!0,{cachePromiseName:"users/me/roles-and-subjects"}).then(function(e){return e.data})}},{key:"isB2bUser",value:function(){var e=this.authService.getJwtPayload();return e?e.organisationIds.length>0?this.$q.resolve(!0):this.getB2bRolesAndSubjects().then(function(e){return!(!e||!e.length)}).catch(function(){return!1}):this.$q.resolve(!1)}},{key:"getCustomerAdminAccounts",value:function(){return this.getB2bRolesAndSubjects().then(function(e){if(!e||!e.length)return[];var t=e.find(function(e){return e.identifier===o.CUSTOMER_ADMIN});return t?t.subjects.accounts:[]})}},{key:"getB2bTeamManagementPageUrlForCustomerAdmin",value:function(){return this.getB2bRolesAndSubjects().then(function(e){if(!e||!e.length)return"https://business.packtpub.com";var t=e.find(function(e){return e.identifier===o.CUSTOMER_ADMIN});return t?"https://business.packtpub.com/accounts/"+t.subjects.accounts[0]+"/teams/"+t.subjects.teams[0]:"https://business.packtpub.com"})}},{key:"getB2bCheckoutLandingPageUrl",value:function(){return"https://business.packtpub.com/purchase-confirmation"}},{key:"updateB2bBillingDetails",value:function(e,t){var n=this,r={name:t.organisationName,address1:t.billingStreet1,address2:t.billingStreet2,city:t.billingCity,postcode:t.billingPostalCode,vatNumber:t.billingVat,phoneNumber:t.billingPhoneNumber},i=this.utilitiesService.getCountryFromId(t.billingCountry).then(function(e){r.country=e.name});return t.billingZone?i=i.then(function(){return n.utilitiesService.getCountryZoneFromId(t.billingCountry,t.billingZone)}).then(function(e){r.state=e.name}):r.state="",i.then(function(){return n.httpService.microserviceRequest("b2b","v1","accounts/"+e,"PATCH",r,!0)}).then(function(t){return n.cacheService.deleteCachedPromise("accounts/"+e,"microservice/"),t.data})}},{key:"mapB2bAccountDetailsToLegacyAccountDetails",value:function(e){return{organisationName:e.name,billingStreet1:e.address1,billingStreet2:e.address2||"",billingCity:e.city,billingCountry:e.country,billingZone:e.state,billingPostalCode:e.postcode,billingVat:e.vatNumber,billingPhoneNumber:e.phoneNumber}}},{key:"getB2bRoleMaps",value:function(){return this.httpService.microserviceRequest("b2b","v1","users/me/role-maps","GET",{},!0,{cachePromiseName:"users/me/role-maps"}).then(function(e){return e.data})}},{key:"updateRoleMap",value:function(e,t){var n=this,r={userEmail:t.b2bEmail};return this.httpService.microserviceRequest("b2b","v1","users/me/role-maps/"+e,"PATCH",r,!0).then(function(e){return n.cacheService.deleteCachedPromise("users/me/role-maps","microservice/"),e.data})}}]),e}();angular.module("PacktUnlimited.services").service("b2bService",s)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a){"ngInject";r(this,e),this.httpService=t,this.userService=n,this.subscriptionService=i,this.cacheService=a}return e.$inject=["httpService","userService","subscriptionService","cacheService"],i(e,[{key:"buildPaypalPaymentDetails",value:function(e){var t=this,n={type:"paypal"};return this.userService.getUserDetails().then(function(r){return n.email=r.mail,t.subscriptionService.createPaypalBillingAgreementId(e)}).then(function(e){if("success"!==e.status)throw new Error("Billing agreement acceptance failed");return n.baid=e.data.billingAgreementId,n})}},{key:"buildCardPaymentDetails",value:function(e){return{type:"card",paymentMethodId:e}}},{key:"createOrUpdateSubscriptionAccount",value:function(e,t,n,r,i){var a=this,o=t.id;return this.getSubscriptionAccount(o).catch(function(){return!1}).then(function(t){var s=!!t,c=a.buildCreateOrUpdateSubscripionAccountPayload(e,n,r,i,s);return s?a.updateSubscriptionAccount(o,c):a.createSubscriptionAccount(o,c)})}},{key:"buildCreateOrUpdateSubscripionAccountPayload",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={billingAddress:{firstName:e.firstName,lastName:e.lastName,personalEmail:e.businessEmail},paymentDetails:t};return r&&(a.purchaseOrderNumber=r),i||(a.currency=n),a}},{key:"createSubscriptionAccount",value:function(e,t){return this.httpService.microserviceRequest("b2bSubscriptions","v1","accounts/"+e,"POST",t,!0).then(function(e){return e.data})}},{key:"updateSubscriptionAccount",value:function(e,t){var n=this;return this.httpService.microserviceRequest("b2bSubscriptions","v1","accounts/"+e,"PATCH",t,!0).then(function(t){return n.clearGetSubscriptionAccountCache(e),t.data})}},{key:"getSubscriptionAccount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="accounts/"+e;return t&&(n+="?contact=true"),this.httpService.microserviceRequest("b2bSubscriptions","v1",n,"GET",!1,!0,{cacheName:"generalUserRelatedCache",cache404:!0}).then(function(e){return e.data[0]})}},{key:"clearGetSubscriptionAccountCache",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cacheService.deleteCachedItemStartingWith("generalUserRelatedCache","https://services.packtpub.com/b2b-subscriptions-v"+t+"/accounts/"+e)}},{key:"createSubscription",value:function(e,t){return this.httpService.microserviceRequest("b2bSubscriptions","v1","accounts/"+e+"/subscriptions","POST",t,!0).then(function(e){return e.data})}},{key:"getSubscriptions",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.httpService.microserviceRequest("b2bSubscriptions","v1","accounts/"+e+"/subscriptions","GET",{active:t},!0).then(function(e){return e.data})}},{key:"updateSubscription",value:function(e,t,n){return this.httpService.microserviceRequest("b2bSubscriptions","v1","accounts/"+e+"/subscriptions/"+t,"PATCH",n,!0).then(function(e){return e.data[0]})}},{key:"getActiveSubscription",value:function(e){return this.httpService.microserviceRequest("b2bSubscriptions","v1","accounts/"+e+"/subscriptions","GET",{active:!0},!0).then(function(e){return e.data})}},{key:"getDefaultPaymentMethod",value:function(e){return this.httpService.microserviceRequest("b2bSubscriptions","v1","accounts/"+e+"/default-payment-method","GET",{},!0).then(function(e){return e.data[0]})}}]),e}();angular.module("PacktUnlimited.services").service("b2bSubscriptionsService",a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";r(this,e),this.b2bService=t}return e.$inject=["b2bService"],i(e,[{key:"isCustomerAdmin",value:function(){return this.b2bService.getCustomerAdminAccounts().then(function(e){return e.length>0}).catch(function(){return!1})}}]),e}();angular.module("PacktUnlimited.services").service("b2bUsersService",a)},function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();angular.module("PacktUnlimited.offline").service("batchRequestService",["$q","$localForage","$injector",function(e,t,n){var i=this;this.batchedRequests={v2:[],microservice:[]},this.retryCount=3,this.isSendingBatchedRequestInProgress=!1,this.handleOfflineBatchedRequests=function(){0!==i.retryCount&&(i.isSendingBatchedRequestInProgress=!0,t.getItem("offline").then(function(e){return!(!e||!(e.v2&&e.v2.length>0||e.microservice&&e.microservice.length>0))&&(i.batchedRequests=e,i.sendBatchedRequests(i.batchedRequests))}).then(function(e){if(e&&e.length){var t=r(e,2),a=t[0],o=t[1];i.resetBatchedRequestsQueues({v2:a,microservice:o});n.get("productService").clearAllProductUserDataCache()}}).finally(function(){i.isSendingBatchedRequestInProgress=!1}))},this.hasQueuedRequests=function(){return i.batchedRequests.v2.length>0||i.batchedRequests.microservice.length>0},this.batchOfflineRequest=function(e){if(e.url.indexOf("mapt-rest")>-1){var n={methodUrl:e.url.replace("https://www2.packtpub.com/mapt-rest/",""),httpMethod:e.method,body:e.data};i.batchedRequests.v2.push(n)}else{var r={url:e.url,method:e.method,headers:e.headers||{}};"GET"!==e.method&&(r.data=e.data),i.batchedRequests.microservice.push(r)}t.setItem("offline",i.batchedRequests)},this.sendBatchedRequests=function(t){var n=i.sendV2Batch(t.v2).then(function(){return!0}).catch(function(e){return!1}),r=i.sendMicroserviceBatch(t.microservice).then(function(){return!0}).catch(function(e){return!1});return e.all([n,r])},this.sendV2Batch=function(t){if(!t||!t.length)return e.resolve();var r=n.get("httpService");if(t.length>1)return r.sendRequestV2(!0,{},"GET","batch/limit",!1,{cacheName:"nonUserRelatedCache"}).then(function(e){return i.handleSendV2BatchRequests(t,e.limit,r)});var a=t[0];return r.sendRequestV2(!0,a.body,a.httpMethod,a.methodUrl,!1,!1)},this.handleSendV2BatchRequests=function(t,n,r){var i=t;if(i.length>n){for(var a=[];i.length>0;){var o=i.slice(0,n);i=i.slice(n),a.push(r.sendRequestV2(!0,{requests:o},"POST","batch",!1,!1))}return e.all(a)}return r.sendRequestV2(!0,{requests:i},"POST","batch",!1,!1)},this.sendMicroserviceBatch=function(t){if(!t||!t.length)return e.resolve();var r=n.get("httpService");return t.reduce(function(e,t){return e.then(function(){return r.handleMicroserviceRequest(t)})},e.resolve())},this.resetBatchedRequestsQueues=function(e){e.v2&&(i.batchedRequests.v2=[]),e.microservice&&(i.batchedRequests.microservice=[]),e.v2&&e.microservice?i.retryCount=3:i.retryCount-=1,t.setItem("offline",i.batchedRequests)},this.isSendingRequestsInProgress=function(){return i.isSendingBatchedRequestInProgress},this.handleOfflineBatchedRequests()}])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i,a,o,s){"ngInject";r(this,e),this.httpService=t,this.productService=n,this.$q=i,this.configService=a,this.cacheService=o,this.log=s.create("bookmarks-service"),this.BOOKMARKS_MAX_LIMIT=20,this.bookmarkCount=!1,this.productUserRelatedCacheName="productUserRelatedIsbnMapCache"}return e.$inject=["httpService","productService","$q","configService","cacheService","logManager"],a(e,[{key:"setBookmarkCount",value:function(e){this.bookmarkCount=e}},{key:"increaseBookmarkCount",value:function(){this.bookmarkCount||(this.bookmarkCount=1),this.bookmarkCount+=1}},{key:"decreaseBookmarkCount",value:function(){if(this.bookmarkCount)return void(this.bookmarkCount-=1);this.bookmarkCount=0}},{key:"getBookmarkCount",value:function(){return this.bookmarkCount}},{key:"getBookmarks",value:function(e,t,n){var r=this,a=this.log.tracker(),o={newest:{sort:"modified",order:"DESC"},oldest:{sort:"modified",order:"ASC"}},s=o[n]?o[n]:o.newest,c={offset:e,limit:t};Object.assign(c,s),a.debug("Getting Bookmarks v2");var u={},l=[];return this.httpService.microserviceRequest("usersPacktlib","v2","users/me/bookmarks","GET",c,!0,{cacheName:"generalUserRelatedCache"}).then(function(e){return a.debug("Got Bookmarks:",e),e&&e.data&&e.data.results&&e.data.results.rows?(r.setBookmarkCount(e.data.results.count),e.data.results.rows):[]}).then(function(e){for(var t=0;t<e.length;t+=1){var n=e[t];n.data.sectionId||(n.data.sectionId=n.data.chapterId);var i=n.productId,a=n.data,o=a.chapterId,s=a.sectionId;u[i]?u[i].bookmarks.push(a):(u[i]={productId:i,bookmarks:[{chapterId:o,sectionId:s}]},l.push(i))}var c=r.productService.getProductsSummary(l),d=l.map(function(e){return r.productService.getProductToc(e).catch(function(){return!1})});return r.$q.all([c,r.$q.all(d)])}).then(function(e){var t=i(e,2),n=t[0],o=t[1];return n&&n.length&&n.forEach(function(e){var t=r.productService.transformSummaryData(e),n=i(t,1),a=n[0],o={title:a.title,path:a.path,type:a.type,imagePath:a.imagePath,isbn13:a.productId,category:a.category};u[e.productId].product=o}),l.forEach(function(e,t){if(u[e]&&u[e].bookmarks){var n=o[t];if(!n)return void delete u[e];var r=[];u[e].bookmarks.forEach(function(t){a.debug("Finding bookmark section with isbn %s and chapterId %s and sectionId %s",e,t.chapterId,t.sectionId);var i=n.find(function(e){return e.id===t.chapterId});if(i&&i.children.length){var o=i.children.find(function(e){return e.id===t.sectionId});if(o){var s={sectionId:t.sectionId,chapterId:t.chapterId,contentPath:"/"+o.seoUrl,contentType:o.type,sectionTitle:o.title,title:o.title};r.push(s)}}}),u[e].bookmarks=r}}),a.debug("bookmarkLookup:",u),Object.values(u)}).catch(function(e){throw r.log.error("Get bookmakrs error:",e),e})}},{key:"getBookmarksWithProductUserData",value:function(e,t,n){var r=this,i=void 0;return this.getBookmarks(e,t,n).then(function(e){if(!e||!e.length)return!1;i=e;var t=e.map(function(e){return e.product.isbn13});return r.productService.getProductUserData(t)}).then(function(e){return!(!e||!i.length)&&(i.forEach(function(t){var n=e[t.product.isbn13]||{};t.product.lastReadPath=""+r.configService.baseUrl+t.product.path,t.product.imagePath=r.configService.cdnUrl(t.product.imagePath),n.lastRead&&(t.product.lastReadPath+="/"+n.lastRead),n.price&&(t.product.price=n.price)}),i)})}},{key:"getBatchedBookmarks",value:function(e,t,n){if(t<=this.BOOKMARKS_MAX_LIMIT)return this.getBookmarksWithProductUserData(e,t,n);for(var r=[],i=e,a=this.BOOKMARKS_MAX_LIMIT;t>0;)r.push(this.getBookmarksWithProductUserData(i,a,n)),i+=this.BOOKMARKS_MAX_LIMIT,t-=this.BOOKMARKS_MAX_LIMIT,a=t>this.BOOKMARKS_MAX_LIMIT?this.BOOKMARKS_MAX_LIMIT:t;return this.$q.all(r).then(function(e){return e.filter(function(e){return!!e}).reduce(function(e,t){return e.concat(t)},[])})}},{key:"updateBookmark",value:function(e,t,n,r){var i=this,a=void 0;return a=this.httpService.microserviceRequest("usersPacktlib","v2","users/me/bookmarks","PATCH",{sectionId:n&&n!==t?t+"/"+n:t,productId:e,bookmark:r},!0,!1,!1,!1,{queueOffline:!0}),a.then(function(){return i.resetBookmarks()}).then(function(){return i.updateUserProductBookmarkCache(e,t,n,r)})}},{key:"updateUserProductBookmarkCache",value:function(e,t,n,r){var i=this.productUserRelatedCacheName,a=e+"-full",o=this.cacheService.getCachedItem(i,a);if(o){if(n||(n=t),r)o.bookmarks[t]?o.bookmarks[t].includes(n)||o.bookmarks[t].push(n):o.bookmarks[t]=[n];else if(o.bookmarks[t]){var s=o.bookmarks[t].indexOf(n);s>-1&&o.bookmarks[t].splice(s,1)}this.cacheService.setCachedItem(i,a,o)}}},{key:"resetBookmarks",value:function(){var e=this.httpService.generateRequestUrl("https://users-packtlib-api.packtpub.com/","v2","users/me/bookmarks");this.cacheService.deleteCachedItemStartingWith("generalUserRelatedCache",e)}}]),e}();angular.module("PacktUnlimited.services").service("bookmarksService",o)},function(e,t,n){"use strict";function r(e,t,n){var r=this,i={init:function(){i.setScopeFunctions(),i.generateBreadCrumbs(),n.$on("titleUpdated",function(e,t){r.name=t.jumbotrontitle,i.generateBreadCrumbs()})},setScopeFunctions:function(){r.name="",r.pageType="",r.urlMapping={"skill-plans-list":{pathName:"skillPlans",title:"Skill Plans",parentTitle:"Discover",parentPathName:"discover"},"skill-plans":{pathName:"skillPlans",title:"Skill Plans",parentTitle:"Discover",parentPathName:"discover"},"skill-cards-list":{pathName:"skillCards",title:"Skill Cards",parentTitle:"Discover",parentPathName:"discover"},"skill-cards":{pathName:"skillCards",title:"Skill Cards",parentTitle:"Discover",parentPathName:"discover"},purchases:{pathName:"purchases",title:"Purchases",parentTitle:"Discover",parentPathName:"discover"},history:{pathName:"history",title:"History",parentTitle:"My Library",parentPathName:""},"projects-list":{pathName:"projects",title:"Projects",parentTitle:"Discover",parentPathName:"discover"}},t.current.$$route&&(r.pageType=t.current.$$route.pageType)},generateBreadCrumbs:function(){var t=r.urlMapping[r.pageType],n=[];n.push({title:t.parentTitle,url:e.getPath(t.parentPathName),active:!1}),n.push({title:t.title,url:e.getPath(t.pathName),active:"skill-plans"!==r.pageType&&"skill-cards"!==r.pageType}),"skill-plans"!==r.pageType&&"skill-cards"!==r.pageType||n.push({title:r.name,url:"",active:!0}),r.crumbs=n}};i.init()}r.$inject=["configService","$route","$rootScope"],angular.module("PacktUnlimited.controllers").controller("breadcrumbs",r),r.$inject=["configService","$route","$rootScope"]},function(e,t,n){"use strict";angular.module("PacktUnlimited.services").factory("cacheService",["CacheFactory",function(e){var t=this,n={storagePrefix:"subs-cache-v2.",deleteOnExpire:"aggressive",recycleFreq:6e4,capacity:100,storageMode:"localStorage",maxAge:864e5},r=Object.assign({},n,{storageMode:"memory",capacity:5,maxAge:1296e6}),i=Object.assign({},n,{storageMode:"memory"}),a=Object.assign({},n,{maxAge:1296e6}),o={bookContentCache:r,productUserRelatedIsbnMapCache:i,generalUserRelatedCache:n,nonUserRelatedCache:a},s={};return this.cachePromise=function(e,t,n){var r=n||"";return s[String(r)+e]=t,t},this.getCachedPromise=function(e){return s[e]},this.getAllCachedPromises=function(){return s},this.deleteCachedPromise=function(e,t){delete s[""+(t||"")+e]},this.deleteCachedPromiseStartingWith=function(e,t){var n=t?""+t+e:e;Object.keys(s).forEach(function(e){0===e.indexOf(n)&&delete s[e]})},this.getCache=function(t){return!!o[t]&&(e.get(t)||e.createCache(t,o[t]))},this.getCachedItem=function(e,n){var r=t.getCache(e);if(r)return r.get(n)},this.setCachedItem=function(e,n,r){return t.getCache(e).put(n,r)},this.deleteCachedItem=function(e,n){t.getCache(e).remove(n)},this.deleteCache=function(e){t.getCache(e).destroy()},this.deleteCachedItemStartingWith=function(e,n){var r=t.getCache(e);r.keys().forEach(function(e){0===e.indexOf(n)&&r.remove(e)})},this.destroyAllCaches=function(){e.destroyAll(),s={}},this}])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";r(this,e),this.httpService=t}return e.$inject=["httpService"],i(e,[{key:"getAllCancellationReasons",value:function(){return this.httpService.microserviceRequest("subscriptionsV2","v1","cancellation-reasons","GET",{},!1).then(function(e){return e.data})}},{key:"getCancellationReason",value:function(e){return this.httpService.microserviceRequest("subscriptionsV2","v1","cancellation-reasons","GET",{},!1).then(function(t){return t.data.find(function(t){return t.id===e})})}},{key:"filterCancellationReasons",value:function(e){return this.getAllCancellationReasons().then(function(t){return t.filter(function(t){return t.subscriptionType===e})})}},{key:"createNewCancellation",value:function(e){return this.httpService.microserviceRequest("subscriptionsV2","v1","users/me/cancellations","POST",{userRatePlanId:e},!0).then(function(e){return e.data})}},{key:"editCancellation",value:function(e,t){return this.httpService.microserviceRequest("subscriptionsV2","v1","users/me/cancellations/"+e,"PATCH",t,!0).then(function(e){return e.data})}}]),e}();a.$inject=["httpService"],t.default=a,angular.module("PacktUnlimited.services").service("cancellationService",a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(44),s=r(o),c=(0,s.default)("config-service:info"),u=function(){function e(t){"ngInject";i(this,e),this.featureFlagsService=t,this.pathList={home:"/",history:"/history",skillPlans:"/skill-plans",skillCards:"/skill-cards",projects:"/projects",saved:"?active=saved",newSaved:"/saved",rewards:"?active=progress",newRewards:"/rewards",bookmarks:"?active=bookmarks",newBookmarks:"/bookmarks",purchases:"?active=purchases",newPurchases:"/owned",login:"/login",forgottenPassword:"/login#forgotten-password",discover:"/discover",logout:"/logout",myAccount:"/my-account",accountDetails:"/my-account/account-details",billingDetails:"/my-account/billing-details",emailPreferences:"/my-account/email-preferences",cancellation:"/my-account/cancellation",help:"/help",cardDetails:"/my-account/update-card-details",checkout:"/checkout",orderHistory:"/account/my-order-history",downloads:"/downloads",upgrades:"/my-account/upgrades",search:"/search",interactiveProjects:"/interactive-code-projects",booksAndVideos:"/books-and-videos",learningPaths:"/learning-paths",tech:"/tech",playlists:"/playlists"},this.baseUrl="",this.basePath="/",this.maptIoUrl="https://mapt.packtpub.com",this.supportEmail="subscription.support@packtpub.com",this.maptTermsAndConditions="https://www.packtpub.com/gb/about/terms-and-conditions ",this.b2bSupportEmail="teams.support@packt.com",this.b2bFaqLink="https://subscribe.packtpub.com/teams/faq/",this.skillsCloudfrontUrl="https://d3gnp09177mxuh.cloudfront.net",this.readAheadPages=1,this.cdnHostList=["d1ldz4te4covpm.cloudfront.net","d255esdrn735hr.cloudfront.net","dz13w8afd47il.cloudfront.net"],this.feedbackLink="https://portal.prodpad.com/20415",this.maptIoFaqLink="https://subscribe.packtpub.com/faqs",this.checkoutUrl="/checkout/packt-subscription-monthly-launch-offer?freeTrial",this.checkoutUrlMonthlyOffer="/checkout/packt-subscription-monthly-launch-offer",this.termsConditionsUrl="https://subscribe.packtpub.com/free-weekend-terms-and-conditions/"}return e.$inject=["featureFlagsService"],a(e,[{key:"getDrupalApiUrl",value:function(){return"https://www2.packtpub.com/mapt-rest"}},{key:"isCdnAvailable",value:function(){return!!this.cdnHostList}},{key:"cdnUrl",value:function(e,t){var n="";c("cdnUrl(...):",e,t);var r="https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/images/";if(e.indexOf("cloudfront.net/")>-1||e.indexOf("packt-cdn.com/")>-1)return c("\tCloudfront Url Already"),e;var i=/^\/graphics\/[\d]+\/graphics/g;if(i.test(e))return n="https://static.packt-cdn.com/products/"+e.replace("/graphics/","");if(/^\/sites\/default\/files\//g.test(e)||i.test(e)){if(c("\tIs CDN Image"),!this.isCdnAvailable())return n="https://www.packtpub.com"+e,c("\tNo CDN Available for this env",n),n;for(var a=0,o=0;o<e.length;o++)a=(a<<5)-a+e.charCodeAt(o),a=Math.abs(a&a);var s=a%this.cdnHostList.length;return n="https://"+this.cdnHostList[s]+e,c("\tReturning CDN URL",n),n}return n=r+e,c("Asset Url Fallback:",n),n}},{key:"getCoverImage",value:function(e){return"https://static.packt-cdn.com/products/"+e+"/cover/smaller"}},{key:"getPacktUrl",value:function(){return"https://www.packtpub.com"}},{key:"getPath",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.pathList[e]?t?this.baseUrl+this.pathList[e]:this.pathList[e]:this.baseUrl}}]),e}();angular.module("PacktUnlimited.services").service("configService",u)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){"ngInject";r(this,e),this.$window=t,this.fc={log:function(){},logException:function(){},logPriority:function(){}}}return e.$inject=["$window"],a(e,[{key:"init",value:function(){this.fc=this.$window.FirebaseCrashlytics.initialise()}},{key:"setUserIdentifier",value:function(e){this.fc.setUserIdentifier(e)}},{key:"flattenArguments",value:function(e){var t=this;if(void 0===e||null===e)return"";if(Array.isArray(e))return e.reduce(function(e,n,r){return 0===r?""+e+t.flattenArguments(n):e+" "+t.flattenArguments(n)},"");if("string"==typeof e)return e;if("object"===(void 0===e?"undefined":i(e)))try{return JSON.stringify(e)}catch(t){return this.fc.logException(t.message),e.toString()}return e.toString()}},{key:"log",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this.flattenArguments(n);this.fc.log(e+": "+i)}},{key:"exception",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this.flattenArguments(n);this.fc.logException(e+": "+i)}},{key:"crash",value:function(){this.fc.crash()}},{key:"logPriority",value:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=this.flattenArguments(r);this.fc.logPriority(e,t,t+": "+a)}},{key:"setString",value:function(e,t){this.fc.setString(e,t)}},{key:"setBool",value:function(e,t){this.fc.setBool(e,t)}},{key:"setDouble",value:function(e,t){this.fc.setDouble(e,t)}},{key:"setFloat",value:function(e,t){this.fc.setFloat(e,t)}},{key:"setInt",value:function(e,t){this.fc.setInt(e,t)}}]),e}();angular.module("PacktUnlimited.services").service("crashlyticsService",o)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a){"ngInject";r(this,e),this.httpService=t,this.productService=n,this.$q=i,this.utilitiesService=a,this.booksAndVideosJsonUrl="https://static.packt-cdn.com/books-and-videos-content/books-and-videos.json"}return e.$inject=["httpService","productService","$q","utilitiesService"],i(e,[{key:"getContent",value:function(e){var t=this,n=e.map(function(e){return t.productService.getProductSummary(e.isbn)});return this.$q.all(n)}},{key:"getCuratedData",value:function(){var e={config:{timeout:1e4},cacheName:"nonUserRelatedCache"};return this.httpService.get(this.booksAndVideosJsonUrl,e).then(function(e){if(!e)return!1;var t=1;return e.reduce(function(e,n){return e[n.name]?e[n.name].productIsbnsList.push(n.isbn):(e[n.name]={id:t,name:n.name,displayName:n.displayName,productIsbnsList:[n.isbn],weight:t},t+=1),e},{})})}},{key:"getBooksAndVideosData",value:function(){var e=this,t=void 0;return this.getCuratedData().then(function(n){t=n;var r=Object.keys(n).reduce(function(e,t){return e.concat(n[t].productIsbnsList)},[]);return e.productService.getProductsSummary(r)}).then(function(n){var r=e.productService.transformSummaryData(n);e.productService.addProductList(r);var i=Object.values(t);return e.utilitiesService.sortByWeight(i)})}}]),e}();a.$inject=["httpService","productService","$q","utilitiesService"],t.default=a,angular.module("PacktUnlimited.services").service("curationService",a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1017),s=r(o),c=n(1010),u=(r(c),function(){function e(){"ngInject";i(this,e)}return a(e,[{key:"getDatabase",value:function(e){var t={auto_compaction:!0};return new s.default(e,t)}}]),e}());angular.module("PacktUnlimited.services").service("databaseService",u)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(function(){function e(t,n,i){r(this,e),this.dialogs=t,this.$q=n,this.$rootScope=i}e.$inject=["$cordovaDialogs","$q","$rootScope"],i(e,[{key:"showError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Something went wrong",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Close";return this.dialogs.alert(e,t,n)}},{key:"confirm",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Cancel",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=this.getButtonsInOrder(t,r);return this.dialogs.confirm(e,i,a).then(function(e){return n.parseConfirmResult(a,t,e)})}},{key:"getButtonsInOrder",value:function(e,t){return"iOS"===this.$rootScope.platform?[t,e]:[e,t]}},{key:"parseConfirmResult",value:function(e,t,n){return 0===n?this.$q.reject():e[n-1]===t?this.$q.resolve():this.$q.reject()}}])}(),function(){function e(t){"ngInject";r(this,e),this.$timeout=t,this.error={title:"Something went wrong",message:"Please try again",buttonText:"Close"}}return e.$inject=["$timeout"],i(e,[{key:"showError",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Something went wrong",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Close";this.$timeout(function(){t.error.title=n,t.error.message=e+"<br/>Sorry for the inconvenience.",t.error.buttonText=r,$("#errorModal").modal("show")})}}]),e}());angular.module("PacktUnlimited.services").service("dialogsService",a)},function(e,t,n){"use strict";var r=angular.module("PacktUnlimited.directives",[]);r.directive("readerContainer",function(){return{restrict:"EC",link:function(e,t,n){var r=Array.from(t[0].querySelectorAll("img"));$(r).each(function(){$(this).addClass("img-responsive")})}}}),r.directive("csvFile",["$parse",function(e){return{restrict:"A",link:function(t,n,r){var i=e(r.csvFile),a=i.assign;n.bind("change",function(){t.$apply(function(){a(t,n[0].files[0])})})}}}]),r.directive("recaptcha",["$window","$compile",function(e,t){return{replace:!0,link:function(t,n){function r(){angular.isDefined(e.grecaptcha)&&(t.recaptcha=grecaptcha.render(n[0],{sitekey:i}))}var i="6LeAHSgUAAAAAKsn5jo6RUSTLVxGNYyuvUcLMe0_";r()}}}]),r.directive("ngEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){13===t.keyCode&&(e.$apply(function(){e.$eval(n.ngEnter)}),t.preventDefault())})}}),r.directive("ngHtmlCompile",["$compile",function(e){return{restrict:"A",link:function(t,n,r){t.$watch(r.ngHtmlCompile,function(r,i){n.html(r),e(n.contents())(t)})}}}]),r.directive("jumbotron",["configService",function(e){return{restrict:"E",templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/shared/components/jumbotron-tpl.html",controllerAs:"jumbotronController",controller:["$attrs","$scope","$rootScope","$routeParams","authService","userService","subscriptionService","configService",function(e,t,n,r,i,a,o,s){var c=this;({init:function(){var r=t.$eval(e.eval);if(c.baseUrl=s.baseUrl,n.$on("titleUpdated",function(e,t){c.title=t.jumbotrontitle,c.description=t.description,c.link=t.link,c.linktext=t.linktext}),c.isLoggedIn=i.hasJwtAuth(),c.showSubscriptionUpsell=!1,c.isLoggedIn?a.userIsSubscribed().then(function(e){c.showSubscriptionUpsell=!e}):c.showSubscriptionUpsell=!0,c.hasDescription=function(){return!!c.description},c.hasLink=function(){return c.link&&c.linktext},r)return c.title=t.$eval(e.jumbotrontitle),c.description=t.$eval(e.description),c.link=t.$eval(e.link),void(c.linktext=t.$eval(e.linktext));c.title=e.jumbotrontitle,c.description=e.description,c.link=e.link,c.linktext=e.linktext}}).init()}]}}]),r.directive("skillcard",["configService",function(e){return{restrict:"E",templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/shared/components/skill-card-listing-tpl.html",controllerAs:"skillCardController",controller:["$attrs","$scope","$rootScope","configService","authService",function(e,t,n,r,i){var a=this;({init:function(){var n=t.$eval(e.controller);a.baseUrl=r.baseUrl,a.setCardComplete=function(e){"function"==typeof n.setCardComplete&&n.setCardComplete(e)},a.setCardNotComplete=function(e){"function"==typeof n.setCardNotComplete&&n.setCardNotComplete(e)},a.isLoggedIn=i.hasJwtAuth(),a.card=t.$eval(e.card),a.skillsRole=t.$eval(e.role),a.hideCompleteButton=Boolean(t.$eval(e.hidecomplete))}}).init()}]}}]),r.directive("searchbar",function(){return{restrict:"E",templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/shared/components/search-tpl.html",controllerAs:"searchBarController",controller:["$location","configService",function(e,t){var n=this;({init:function(){n.search=function(n,r){n.preventDefault(),e.path(t.getPath("search")).search({query:r})}}}).init()}]}}),r.directive("breadcrumbs",["configService",function(e){return{restrict:"E",templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/shared/components/breadcrumbs-tpl.html",controller:"breadcrumbs",controllerAs:"breadcrumbsController"}}]),r.directive("paymentDetails",[function(){return{restrict:"E",scope:{b2bPayment:"<",b2bAccountId:"<",b2bPoNumber:"<",b2bSeats:"<",b2bBusinessEmail:"<"},templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/shared/components/payment-details-tpl.html",controller:"paymentDetails",controllerAs:"paymentDetailsController"}}]),r.directive("earlyAccess",function(){return{restrict:"E",templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/shared/components/early-access-tpl.html",link:function(e,t){return}}}),r.directive("autofocus",["$timeout",function(e){return{priority:1,restrict:"A",link:function(t,n){e(function(){n[0].focus()})}}}])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o){"ngInject";r(this,e),this.httpService=t,this.productService=n,this.cacheService=i,this.configService=a,this.$q=o,this.OWNED_PRODUCTS_MAX_LIMIT=20,this.purchasedCount=!1,this.productUserRelatedCacheName="productUserRelatedIsbnMapCache"}return e.$inject=["httpService","productService","cacheService","configService","$q"],i(e,[{key:"setPurchasedCount",value:function(e){this.purchasedCount=e}},{key:"increasePurchasedCount",value:function(){this.purchasedCount||(this.purchasedCount=1),this.purchasedCount+=1}},{key:"getPurchasedCount",value:function(){return this.purchasedCount}},{key:"getUserOwnedProducts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],this),r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]?arguments[4]:"");return this.httpService.microserviceRequest("entitlements","v1","users/me/products","GET",{limit:t,offset:e,search:r},!0,{cacheName:"generalUserRelatedCache"}).then(function(e){if(e&&e.data){n.setPurchasedCount(e.count);var t=[];return e.data.forEach(function(e){t.find(function(t){return t===e.productId})||t.push(e.productId)}),t}return!1}).then(function(e){return n.productService.getProductsSummary(e)}).then(function(e){return!!e&&n.productService.transformSummaryData(e)}).catch(function(e){if(4000031===e.errorCode)return n.setPurchasedCount(0),[];throw e})}},{key:"getBatchedUserOwnedProducts",value:function(e,t,n,r,i){if(t<=this.OWNED_PRODUCTS_MAX_LIMIT)return this.getUserOwnedProducts(e,t,n,r,i);for(var a=[],o=e,s=this.OWNED_PRODUCTS_MAX_LIMIT;t>0;)a.push(this.getUserOwnedProducts(o,s,n,r,i)),o+=this.OWNED_PRODUCTS_MAX_LIMIT,t-=this.OWNED_PRODUCTS_MAX_LIMIT,s=t>this.OWNED_PRODUCTS_MAX_LIMIT?this.OWNED_PRODUCTS_MAX_LIMIT:t;return this.$q.all(a).then(function(e){return e.filter(function(e){return!!e}).reduce(function(e,t){return e.concat(t)},[])})}},{key:"resetPurchasedCache",value:function(){var e=this.httpService.generateRequestUrl("https://services.packtpub.com/entitlements","v1","users/me/products?");this.cacheService.deleteCachedItemStartingWith("generalUserRelatedCache",e)}},{key:"resetEntitlementForProductCache",value:function(e){var t=this.httpService.generateRequestUrl("https://services.packtpub.com/entitlements","v1","users/me/products/"+e+"/entitlement");this.cacheService.deleteCachedItem("generalUserRelatedCache",t)}},{key:"getLegacyPurchaseCount",value:function(){var e=this;return this.httpService.sendRequestV2(!0,{},"GET","users/me/summaries",!1,{cachePromiseName:"users/me/summaries"}).then(function(t){if(t)return t.purchased&&e.setPurchasedCount(t.purchased.count),t})}},{key:"claimWithToken",value:function(e){var t=this,n=void 0;return n=this.httpService.microserviceRequest("credits","v1","users/me/credits","POST",{productId:e},!0),n.then(function(){return t.productService.updateProduct(e,{owned:!0}),t.resetPurchasedCache(),t.resetEntitlementForProductCache(e),t.increasePurchasedCount(),t.clearCachedCredits(),t.cacheService.deleteCache("bookContentCache"),t.updateUserProductOwnedCache(e,!0),!0})}},{key:"updateUserProductOwnedCache",value:function(e,t){var n=this,r=this.productUserRelatedCacheName;[e+"-full",e+"-line"].forEach(function(e){var i=n.cacheService.getCachedItem(r,e);i&&(i.ownership=t,n.cacheService.setCachedItem(r,e,i))})}},{key:"clearCachedCredits",value:function(){this.cacheService.deleteCachedPromise("microservice/users/me/credits/balance")}}]),e}();a.$inject=["httpService","productService","cacheService","configService","$q"],t.default=a,angular.module("PacktUnlimited.services").service("entitlementsService",a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o,s,c,u,l,d,f,h){"ngInject";r(this,e),this.chunkList=[],this.$q=t,this.httpService=n,this.productService=i,this.alert=a,this.configService=o,this.metadataService=s,this.analyticsService=c,this.$timeout=u,this.$window=l,this.$injector=d,this.databaseService=f,this.downloadInProgress=!1,this.dataDirectory="",this.file=this.getOptionalDependency("$cordovaFile"),null!=this.file&&(this.dataDirectory=this.file.dataDirectory.replace("file://","")),this.$cordovaTransfer=this.getOptionalDependency("$cordovaTransfer"),null!=this.$cordovaTransfer&&(this.transfer=new this.$cordovaTransfer),this.log=h.create("file-service")}return e.$inject=["$q","httpService","productService","alertService","configService","metadataService","analyticsService","$timeout","$window","$injector","databaseService","logManager"],i(e,[{key:"getOptionalDependency",value:function(e){return this.$injector.has(e)?this.$injector.get(e):null}},{key:"init",value:function(){var e=this;this.downloads=this.databaseService.getDatabase("downloads"),this.metadata=this.databaseService.getDatabase("metadata"),this.preferences=this.databaseService.getDatabase("preferences"),this.getDownloadedChunkList().then(function(){e.startNextDownload()})}},{key:"getDownloadedChunkList",value:function(){var e=this;return this.downloads.allDocs({include_docs:!0}).then(function(t){t&&t.total_rows>0&&(e.chunkList=t.rows.map(function(e){return e.doc}))})}},{key:"getDownloadedMetadata",value:function(){return this.metadata.allDocs({include_docs:!0}).then(function(e){return e&&e.total_rows>0?e.rows.map(function(e){return e.doc}):[]})}},{key:"startNextDownload",value:function(){var e=this;if(!this.downloadInProgress){var t=this.chunkList.find(function(e){return null!=e.downloadInfo&&e.downloadInfo.isInProgress});t&&this.processDownload(t).then(function(){return e.timeoutNextDownload()}).catch(function(n){return e.downloadOperationFailed(n,t)})}}},{key:"timeoutNextDownload",value:function(){var e=this;this.downloadInProgress=!1,this.$timeout(function(){e.startNextDownload()},5e3)}},{key:"downloadOperationFailed",value:function(t,n){this.log.error("download operation failed: ",t),n.downloadInfo.cancelled||e.canImmediatelyRecover(t)?this.timeoutNextDownload():e.isOfflineError(t)?this.pauseDownloads():(this.handleDownloadError(t,n),this.timeoutNextDownload())}},{key:"pauseDownloads",value:function(){var e=this;this.downloadInProgress=!1,this.$window.addEventListener("online",function(){e.startNextDownload()},{once:!0})}},{key:"processDownload",value:function(e){var t=this;this.downloadInProgress=!0,this.createCancelPromise(e);var n=void 0;return n="book"===e.productType?this.processBookDownload(e):this.processVideoDownload(e),n.then(function(){return t.downloadComplete(e)})}},{key:"createCancelPromise",value:function(e){var t=this;e.downloadInfo.cancelPromise=this.$q.defer(),e.downloadInfo.cancelled=!1,e.downloadInfo.cancelPromise.promise.then(function(){e.downloadInfo.cancelled=!0,t.transfer.abort()})}},{key:"processBookDownload",value:function(e){var t=this,n=this.downloadMetadata(e),r=this.createDirectories(e.isbn);return this.$q.all({metadata:n,directory:r}).then(function(n){return t.downloadBookContent(e,n.metadata,n.directory)})}},{key:"processVideoDownload",value:function(e){var t=this,n=void 0,r=void 0;return this.downloadMetadata(e).then(function(r){return n=r,t.createDirectories(e.isbn)}).then(function(e){return r=e,t.downloadCoverImage(n,r)}).then(function(){return t.downloadVideoContent(r,e)}).then(function(r){return t.addDownloadStateAndLocalPathToToc("file://"+r.fullPath,n,e.chapterId,e.id,e.contentData)})}},{key:"isDownloaded",value:function(e){return void 0!==this.chunkList.find(function(t){return t.isbn===e})}},{key:"getProductMetadata",value:function(e){return this.metadata.get(e).then(function(e){return e.metadata})}},{key:"getProductUserData",value:function(e){return this.metadata.get(e).then(function(e){return e.userMetadata})}},{key:"getProductSummary",value:function(e){return this.$q.when(this.metadata.get(e)).then(function(e){return e.summary})}},{key:"addDownloadStateAndLocalPathToToc",value:function(t,n,r,i,a){var o=this;return this.log.debug("set localPath %s in TOC for chpater %s section %s",t,r,i),this.metadata.get(n._id).then(function(n){var s=e.findSectionInToc(n.metadata.tableOfContents,r,i);return s?(s.downloaded=!0,s.localUrl=t,a&&(s.contentData=a)):o.log("section not found in TOC"),o.metadata.put(n)})}},{key:"getDownloadInfo",value:function(e,t,n){var r=void 0;return r="book"===n?this.chunkList.find(function(t){return t.isbn===e}):this.chunkList.find(function(n){return n.isbn===e&&n.id===t}),r?r.downloadInfo:null}},{key:"handleDownload",value:function(e,t,n,r){var i=this;this.analyticsService.addEvent("download",{event_category:"downloads",event_action:"download",event_label:e});var a={isbn:e,id:t,chapterId:n,productType:r,downloadInfo:{isInProgress:!0,isCancelable:!0,isFinished:!1,cancelPromise:this.$q.defer()}};return this.downloadMetadata(a).then(function(){"book"===r?i.downloadBook(a):i.downloadVideoSection(a)}),this.chunkList.push(a),a.downloadInfo}},{key:"handleRemove",value:function(e,t,n,r){this.analyticsService.addEvent("download",{event_category:"downloads",event_action:"remove",event_label:e});var i={isbn:e,id:t,chapterId:n,productType:r,downloadInfo:{isInProgress:!0,isCancelable:!1,isFinished:!1}};return"book"===r?this.removeBook(i):this.handleRemoveVideoSection(i),i.downloadInfo}},{key:"downloadBook",value:function(e){var t=this;e._id=e.isbn,this.downloads.put(e).then(function(n){e._rev=n.rev,t.startNextDownload()}).catch(function(n){return t.handleDownloadError(n,e)})}},{key:"downloadVideoSection",value:function(e){var t=this;this.log.debug("download video section:",e),e._id=e.isbn+"_"+e.id,this.downloads.put(e).then(function(n){e._rev=n.rev,t.startNextDownload()}).catch(function(n){return t.handleDownloadError(n,e)})}},{key:"downloadVideoContent",value:function(e,t){var n=this;this.log.debug("stared video downloading:",t);var r=t.isbn,i=t.id,a=t.chapterId,o=t.productType,s=void 0;return this.productService.getContent(r,a,i||"chapter",o).then(function(e){return n.rejectIfOffline(e)}).then(function(t){var r=t.content.file,a={directory:"content",path:i+".mp4",url:r};return s=t,n.downloadFile(e,a)}).then(function(e){return n.log.debug("video downloaded"),s.content.file="file://"+e.fullPath,t.contentData=s,e})}},{key:"downloadComplete",value:function(e){var t=this,n=this.$q.defer();return this.$timeout(function(){e.downloadInfo.isInProgress=!1,e.downloadInfo.isCancelable=!1,e.downloadInfo.isFinished=!0,t.downloads.get(e._id).then(function(n){return e._rev=n._rev,t.downloads.put(e)}).then(function(e){return n.resolve(e)}).catch(function(e){return n.reject(e)})}),n.promise}},{key:"handleDownloadError",value:function(e,t){this.log.error("handling download error, remove product",e),this.analyticsService.addEvent("error",{error:e,isbn:t.isbn});var n="Clearing previous download, Try again.";e&&e.httpStatus&&-1===e.httpStatus&&(n="Please check network connectivity then try again"),this.alert.addAlert(n,"danger"),t.downloadInfo.isCancelable=!1,"book"===t.productType?this.removeBook(t):this.handleRemoveVideoSection(t)}},{key:"downloadMetadata",value:function(e){var t=this;return this.metadata.get(e.isbn).catch(function(){return t.downloadAndSaveMetadata(e)})}},{key:"downloadAndSaveMetadata",value:function(t){var n=this;this.log.debug("starting to download and save metadata for chunk:",t);var r=this.productService.getProductMetadata(t.isbn,t.downloadInfo.cancelPromise.promise).then(function(e){return n.rejectIfOffline(e)}),i=this.productService.getProductSummary(t.isbn,t.downloadInfo.cancelPromise.promise).then(function(e){return n.rejectIfOffline(e)}),a=this.productService.getProductUserData([t.isbn],"full",t.downloadInfo.cancelPromise.promise).then(function(e){return n.rejectIfOffline(e)});return this.$q.all({summaryPromise:i,metadataPromise:r,userMetadataPromise:a}).then(function(r){var i=e.normalizeProductUserData(r.userMetadataPromise[t.isbn]),a=r.summaryPromise.type&&"s"===r.summaryPromise.type.slice(-1)?r.summaryPromise.type.slice(0,-1):r.summaryPromise.type,o={isbn13:r.summaryPromise.productId,productType:a,category:r.summaryPromise.seoCategory,earlyAccess:!!r.summaryPromise.earlyAccess,authorList:r.summaryPromise.authorList.map(function(e){return e.name})};r.userMetadataPromise[t.isbn]=i;var s={_id:t.isbn,metadata:r.metadataPromise,summary:r.summaryPromise,userMetadata:r.userMetadataPromise,headerMetadata:o};return n.metadata.put(s).then(function(e){return s._rev=e.rev,s})}).catch(function(e){throw e})}},{key:"downloadBookContent",value:function(e,t,n){var r=this;this.log.debug("download book content with \n chunk: %o \n metadata %o",e,t);var i=void 0;return this.downloadCoverImage(t,n).then(function(){return r.productService.getSignedProductContent(e.isbn,e.downloadInfo.cancelPromise.promise)}).then(function(e){return r.rejectIfOffline(e)}).then(function(e){r.log.debug("got toc with signed urls",e),i=e}).then(function(){return r.downloadGraphics(e,n,i)}).then(function(){return r.downloadBookSections(e,i,t,n)})}},{key:"downloadGraphics",value:function(t,n,r){var i=this;this.log.debug("started to download the graphics");var a=this.$q.when();return r&&r.graphics&&r.graphics.forEach(function(r){var o=e.getFilename(r);t.graphics&&-1!==t.graphics.indexOf(o)||(a=a.then(function(){var e=n+"graphics/"+o,a=r.indexOf(t.isbn),s="https://static.packt-cdn.com/products/"+r.substr(a);return i.log.debug("try downloading graphic from url %s and save to %s",s,e),i.transfer.download(s,e).then(function(){return t.graphics=t.graphics||[],t.graphics.push(o),i.downloads.put(t).then(function(e){return t._rev=e.rev,i.$q.resolve()})})}))}),a}},{key:"downloadBookSections",value:function(t,n,r){var i=this,a=e.getSectionUrlsArray(n),o=r.metadata.tableOfContents;this.log.debug("started to download book sections with toc:",o);var s=this.$q.resolve();try{return o.forEach(function(n){n.children.forEach(function(o){if(!o.downloaded){var c=o.originalId||o.id,u=e.getDownloadUrl(a,c);if(!u)throw new Error("Could not get url for section "+c);var l=e.getFilename(u),d=t.isbn+"/content/"+l;s=s.then(function(){return i.log.debug("section not downloaded, attempt to download from url %s and save to file %s",u,d),i.downloadBookSection(u,t.isbn,d)}).then(function(){return i.addDownloadStateAndLocalPathToToc("file:///"+d,r,n.id,c)})}})}),s}catch(e){return this.$q.reject(e)}}},{key:"downloadBookSection",value:function(e,t,n){var r=this,i=this.file.dataDirectory+n;return this.transfer.download(e,i).then(function(){return r.convertBookContentForOfflineView(t,n)})}},{key:"convertBookContentForOfflineView",value:function(t,n){var r=this;return this.file.readAsText(this.file.dataDirectory,n).then(function(t){return e.extractBody(t)}).then(function(n){return e.replaceImagesSrc(t,n)}).then(function(e){return r.file.writeExistingFile(r.file.dataDirectory,n,e)})}},{key:"downloadCoverImage",value:function(t,n){var r=this;if(!t||!t.metadata)return this.$q.reject("Could not download book cover, metadata not present.");var i=t.metadata.imageUrl;if(this.log.debug("download cover img with url",i),i.match(/^file:\/\//i))return this.log.debug("got cover image from file"),this.$q.resolve(i);i=this.configService.cdnUrl(i);var a=e.getFilename(i),o=n+"graphics/"+a;return this.transfer.download(i,o).then(function(e){r.log.debug("downloaded cover image");var n="file://"+e.fullPath;return r.updateMetadataWithCoverImage(t._id,n)}).catch(function(e){return r.log.error("failed to download cover image, putting default image",e),r.updateMetadataWithCoverImage(t._id,"product-cover.png")})}},{key:"updateMetadataWithCoverImage",value:function(e,t){var n=this;return this.metadata.get(e).then(function(e){return e.metadata.imageUrl=t,n.metadata.put(e)}).then(function(){return t})}},{key:"createDirectories",value:function(e){var t=this,n=void 0;return this.createDirectory(e).then(function(e){n=e.toURL()}).then(function(){return t.$q.all(t.createDirectory(e+"/content"),t.createDirectory(e+"/graphics"))}).then(function(){return n})}},{key:"downloadFile",value:function(e,t){return this.log.debug("downloading section from %s and saving to %s",t.url,t.path),this.transfer.download(t.url,""+e+t.directory+"/"+t.path)}},{key:"removeBook",value:function(e){var t=this;e.downloadInfo.isInProgress=!1,e.downloadInfo.isCancelable=!1,this.chunkList=this.chunkList.filter(function(t){return t.isbn!==e.isbn}),this.file.checkDir(this.file.dataDirectory,e.isbn).then(function(){return t.file.removeRecursively(t.file.dataDirectory,e.isbn)}),this.downloads.get(e.isbn).then(function(e){return t.downloads.remove(e)}),this.metadata.get(e.isbn).then(function(e){return t.metadata.remove(e)})}},{key:"removeVideoSection",value:function(e){var t=this;this.log.debug("remove video section:",e),e._id=e.isbn+"_"+e.id,this.chunkList=this.chunkList.filter(function(t){return t.isbn!==e.isbn||t.id!==e.id});var n=this.removeSectionFromFileSystem(e),r=this.removeSectionFromDownloadsTable(e),i=this.removeSectionFromMetadataTable(e);this.$q.all({fs:n,downloads:r,metadata:i}).then(function(){t.$timeout(function(){e.downloadInfo.isInProgress=!1},0)})}},{key:"removeSectionFromFileSystem",value:function(e){var t=this,n="video"===e.productType?e.id+".mp4":e.id+".html",r=""+this.file.dataDirectory+e.isbn+"/content/";return this.file.checkDir(this.file.dataDirectory,e.isbn).then(function(){return t.file.checkFile(r,n)}).then(function(){return t.file.removeFile(r,n)})}},{key:"removeSectionFromDownloadsTable",value:function(e){var t=this;return this.downloads.get(e._id).then(function(e){return t.downloads.remove(e)})}},{key:"removeSectionFromMetadataTable",value:function(t){var n=this,r=t.chapterId,i=t.id;return this.metadata.get(t.isbn).then(function(t){var a=e.findSectionInToc(t.metadata.tableOfContents,r,i);return a&&(delete a.contentData,delete a.downloaded,delete a.localUrl),n.metadata.put(t)})}},{key:"cancelDownload",value:function(e){return this.analyticsService.addEvent("download",{event_category:"downloads",event_action:"cancel",event_label:e.isbn}),e.downloadInfo.cancelPromise&&e.downloadInfo.cancelPromise.resolve(),this.handleRemove(e.isbn,e.id,e.chapterId,e.productType),{isInProgress:!1,isCancelable:!1,isFinished:!1}}},{key:"createDirectory",value:function(e){var t=this;return this.file.resolveDirectoryUrl(this.file.dataDirectory+e).catch(function(){return t.file.createDir(t.file.dataDirectory,e)})}},{key:"getSectionContentData",value:function(e,t,n,r){return"book"===t?this.getBookSectionContentData(e,n,r):this.getVideoSectionContentData(e,r)}},{key:"getBookSectionContentData",value:function(t,n,r){var i=this;return this.log.debug("get book section content chapterId %s sectionId %s",n,r),this.isDownloaded(t)?this.metadata.get(t).then(function(t){var a=e.findSectionInToc(t.metadata.tableOfContents,n,"chapter"!==r?r:n);return a&&a.downloaded?(i.log.debug("found section:",a),a):i.$q.reject("Section has not finished downloading")}).then(function(e){return i.file.readAsText(i.file.dataDirectory,""+e.localUrl.replace("file:///",""))}).then(function(e){return{entitled:!0,content:e,accessBlocked:!1}}):this.$q.reject("Book has not been downloaded")}},{key:"getVideoSectionContentData",value:function(e,t){this.log.debug("video section content data for isbn %s sectionId %s",e,t);var n=this.$q.defer(),r=void 0;if((r=t?this.chunkList.find(function(n){return n.isbn===e&&n.id===t&&n.downloadInfo.isFinished}):this.chunkList.find(function(t){return t.isbn===e&&t.downloadInfo.isFinished}))&&r.contentData){var i=r.contentData;i.content.file=this.getAbsoluteUrl(i.content.file),n.resolve(i)}else n.reject("Video section not downloaded");return n.promise}},{key:"getAbsoluteUrl",value:function(e){return e.replace("file:///",this.dataDirectory)}},{key:"removeVideo",value:function(e,t){var n=this;return t._id=t.isbn+"_"+t.id,this.chunkList=this.chunkList.filter(function(t){return t.isbn!==e}),this.metadata.get(e).then(function(e){return n.metadata.remove(e)}).then(function(){return n.removeSectionFromDownloadsTable(t)}).then(function(){return n.removeDirectoryFromFileSytem(e)}).then(function(){n.$timeout(function(){t.downloadInfo.isInProgress=!1},0)})}},{key:"removeDirectoryFromFileSytem",value:function(e){var t=this;return this.file.checkDir(this.file.dataDirectory,e).then(function(){return t.file.removeRecursively(t.file.dataDirectory,e)})}},{key:"updateLastReadUrl",value:function(e,t){var n=this;return this.metadata.get(e).then(function(r){if(r.userMetadata[e].lastRead!==t)return r.userMetadata[e].lastRead=t,n.metadata.put(r)}).catch(function(r){409===r.status&&n.updateLastReadUrl(e,t)})}},{key:"addBookmark",value:function(e,t,n){var r=this;return n||(n=t),this.metadata.get(e).then(function(i){var a=i.userMetadata[e].bookmarks;return a[t]?a[t].includes(n)?void 0:(a[t].push(n),r.metadata.put(i)):(a[t]=[n],r.metadata.put(i))}).catch(function(i){409===i.status&&r.addBookmark(e,t,n)})}},{key:"removeBookmark",value:function(e,t,n){var r=this;return n||(n=t),this.metadata.get(e).then(function(i){var a=i.userMetadata[e].bookmarks;if(a[t]){var o=a[t].indexOf(n);if(o>-1)return a[t].splice(o,1),r.metadata.put(i)}}).catch(function(i){409===i.status&&r.removeBookmark(e,t,n)})}},{key:"updateSectionCompleted",value:function(e,t,n){var r=this;return this.metadata.get(e).then(function(i){var a=i.userMetadata[e].completedSections;return a[t]?a[t].includes(n)?void 0:(a[t].push(n),r.metadata.put(i)):(a[t]=[n],r.metadata.put(i))}).catch(function(i){409===i.status&&r.updateSectionCompleted(e,t,n)})}},{key:"getPreference",value:function(e){return this.preferences.get(e).then(function(e){return e.value})}},{key:"createPreference",value:function(e,t){var n={_id:e,value:t};return this.preferences.put(n)}},{key:"createOrUpdatePreference",value:function(e,t){var n=this;return this.preferences.get(e).then(function(e){if(e.value!==t)return e.value=t,n.preferences.put(e)}).catch(function(r){if(404===r.status)return n.createPreference(e,t)})}},{key:"rejectIfOffline",value:function(e){return!1===e?this.$q.reject("offline"):this.$q.resolve(e)}},{key:"handleRemoveVideoSection",value:function(e){var t=this.chunkList.filter(function(t){return t.isbn===e.isbn});t&&t.length>1?this.removeVideoSection(e):this.removeVideo(e.isbn,e)}}],[{key:"canImmediatelyRecover",value:function(e){return e.code&&(3===e.code||1===e.code)&&403===e.http_status}},{key:"isOfflineError",value:function(e){return!navigator.onLine||!!e&&(!(!e.code||3!==e.code||e.http_status&&200!==e.http_status)||!(!e.status||-1!==e.status))}},{key:"findSectionInToc",value:function(e,t,n){var r=e.find(function(e){return e.id===t});if(r){return r.children.find(function(e){return e.originalId===n||e.id===n})}}},{key:"extractBody",value:function(e){var t=e,n=/<body.*?>([\s\S]*)<\/body>/,r=n.exec(e);return r&&r[1]&&(t=r[1]),t}},{key:"replaceImagesSrc",value:function(e,t){var n=/(<img[^>]+src="?)([^"\s]+)("?\s*\/>)/g,r="file:///"+e+"/graphics/";return t.replace(n,function(e,t,n,i){if(n.indexOf("data:image")>-1)return e;var a=n.lastIndexOf("/");return t+(r+n.substr(a+1))+i})}},{key:"getSectionUrlsArray",value:function(t){var n=[];return n=n.concat(e.flattenSectionUrls(t.chapters)),n=n.concat(e.flattenSectionUrls(t.appendices))}},{key:"flattenSectionUrls",value:function(e){var t=[];return e&&e.forEach(function(e){e.sections.forEach(function(e){t.push({id:e.id,url:e.location})})}),t}},{key:"getDownloadUrl",value:function(e,t){var n=e.find(function(e){return e.id===t});return n?n.url:null}},{key:"getFilename",value:function(e){var t=e.indexOf("?");return e.substring(e.lastIndexOf("/")+1,-1!==t?t:e.length)}},{key:"normalizeProductUserData",value:function(e){return Array.isArray(e.completedSections)&&(e.completedSections={}),Array.isArray(e.bookmarks)&&(e.bookmarks={}),e}}]),e}();angular.module("PacktUnlimited.services").service("fileService",a)},function(e,t,n){"use strict";angular.module("common.filters",[]).filter("get_product_type",["$sce",function(e){return function(e){return"books"===e?"book":"videos"===e?"video":void 0}}]).filter("get_chapter",["$sce",function(e){return function(e){return parseInt(e.substr(2,3))}}]).filter("escape",["$sce",function(e){return function(e){return encodeURIComponent(e)}}]).filter("replace_spaces",function(){return function(e){return angular.isString(e)?e.replace(/\u00a0/g," "):e}}).filter("trim_last",["$sce",function(e){return function(e){return"books"==e?"book":"videos"==e?"video":e}}]).filter("cdn_url",["configService",function(e){return function(t){return angular.isString(t)?e.cdnUrl(t):t}}]).filter("to_trusted",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]).filter("add_dot",["$sce",function(e){return function(e){return e+"..."}}]).filter("strip_tags",["$sce",function(e){return function(e){return e.replace(/(<([^>]+)>)/gi,"")}}]).filter("get_product_type",["$sce",function(e){return function(e){return"books"===e?"book":"videos"===e?"video":void 0}}]).filter("format_category_field",["$sce",function(e){return function(e){return!angular.isUndefined(e)&null!=e?e.replace(/\s/g,"-").replace(/&/g,"and"):"General"}}]).filter("replace_ebook",["$sce",function(e){return function(e){return!angular.isUndefined(e)&null!=e?e.replace("[eBook]",""):"General"}}]).filter("format_template_string_to_date",["$sce","$filter",function(e,t){return function(e){var n=new Date(e);return t("date")(n,"MMMM yyyy")}}]).filter("date_with_suffix",["$filter",function(e){var t=function(e){var t=["'th'","'st'","'nd'","'rd'"],n=e<30?e%20:e%30;return"d"+(n<=3?t[n]:t[0])};return function(n,r){r||(r="MMM d, yyyy");var i=/d+((?!\w*(?=')))|d$/g,a=new Date(n),o=a.getDate(),s=t(o);return r=r.replace(i,function(e){return"d"===e?s:e}),e("date")(a,r)}}]).filter("format_template_string_to_date",["$sce","$filter",function(e,t){return function(e){if(e&&e.length>0){n=e.split(" ");var n=new Date(n[0]);return t("date")(n,"MM/yyyy")}return e}}]).filter("remove_spaces",[function(){return function(e){return e.replace(/[\s]/g,"")}}]).filter("titlecase",function(){return function(e){var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;return e.replace(/_|-/g," ").trim().toLowerCase().split(" ").map(function(e,n){return 0===n?e[0].toUpperCase()+e.substr(1):e.search(t)>-1?e:e[0].toUpperCase()+e.substr(1)}).join(" ")}}).filter("ampersand",function(){return function(e){return e?e.replace(/&amp;/,"&"):""}}).filter("canonical_url",function(){return function(e){return e.replace(/%20|%2F/gi,"-")}}).filter("truncate_text",function(){return function(e,t){if(!t)return e;for(var n=[{separator:".",include:!0},{separator:"!",include:!0},{separator:"?",include:!0},{separator:" ",include:!1}],r=0;r<n.length;r+=1){var i=n[r],a=i.separator,o=i.include,s=e.lastIndexOf(a,o?t-1:t);if(-1!==s)return e.slice(0,o?s+1:s)}return e.slice(0,t)}}).filter("truncate_at",["logManager",function(e){var t=e.create("packt:filters:truncate-at");return function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&hellip;";if(t.debug("truncate_at : "+n+" : "+r+" : "+i),"string"!=typeof e||"string"!=typeof n)return e;try{var a=/\s+/g,o=e.replace(a," "),s=new RegExp(".{0,"+r/2+"}"+n+".{0,"+r/2+"}","i"),c=o.match(s);if(c&&c[0])return""+i+c[0]+i;var u=new RegExp(".{"+r+"}","s"),l=o.match(u);return l&&l[0]?""+l[0]+i:""}catch(e){return t.error(e),""}}}]).filter("mark",["logManager",function(e){var t=e.create("packt:filters:surround-with");return function(e,n){return t.debug("mark : "+n),"string"!=typeof e||"string"!=typeof n?e:e.replace(new RegExp(n,"gi"),"<mark>$&</mark>")}}]).filter("date_suffix",["$filter",function(e){var t=function(e){var t=["th","st","nd","rd"],n=e<30?e%20:e%30;return n<=3?t[n]:t[0]};return function(e,n){var r=new Date(e),i=r.getDate();return t(i)}}])},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};angular.module("PacktUnlimited.services").factory("httpService",["$http","$q","authService","cacheService","configService","$location","prerenderReadyService","logManager",function(e,t,n,i,a,o,s,c){var u=c.create("http-service"),l={requestTypeList:["POST","GET","PATCH","PUT","DELETE"],requestingNewAuthTokens:!1,attemptingSessionLogin:!1,setRequestingAuthTokensFlag:function(e){l.requestingNewAuthTokens=!!e},getRequestingAuthTokensFlag:function(){return l.requestingNewAuthTokens},sessionLoginV2:function(){return l.sendRequestV2(!1,{},"GET","users/tokens/sessions",!1,{cachePromiseName:"users/tokens/sessions"}).then(function(e){return!(!e||!e.token)&&(n.setCookie("token_live",e.token,30,"",!1,!0),e.token)}).catch(function(){o.path(a.getPath("logout"))})},requestNotSent:function(){return t(function(e){e(!1)})},sendRequestV2:function(e,t,r,i,a,o){var s,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,d=o&&o.cachePromiseName;return l.checkRequestType(r)?d&&(s=l.getPromiseFromCache(o.cachePromiseName))?s:e&&!n.hasJwtAuth()?l.requestNotSent():(s=l.buildV2Parameters(r,i,t,a,!!o&&o.cacheName,c,u),l.handleRequestv2(s,o)):l.requestNotSent()},handleRequestv2:function(n,r,a){s.reset(),u.error("request to V2",n.url);var o=r&&r.cachePromiseName,c=t(function(e){return e(a?n:l.retry401Request(n))}).then(e).then(function(e){return s.reset(),200===e.status&&e.data.data}).catch(function(e){if(s.reset(),e&&401===e.status&&!a)return l.retry401Request(n,!0).then(function(e){return l.handleRequestv2(e,r,!0)}).then(function(e){return l.setRequestingAuthTokensFlag(!1),e}).catch(function(e){if(l.setRequestingAuthTokensFlag(!1),401===e.status)return l.redirectToLogin();throw e});throw e});return o&&i.cachePromise(r.cachePromiseName,c),c},retry401Request:function(e,t){var n=e;return t&&!l.getRequestingAuthTokensFlag()&&(l.setRequestingAuthTokensFlag(!0),i.cachePromise("newAuthTokens",l.getNewAccessToken())),i.getCachedPromise("newAuthTokens").then(function(e){return e&&(n.headers.Authorization="Bearer "+e.access),n})},getNewAccessToken:function(){var e=n.getCookie("refresh_token_live");return e?l.microserviceRequest("auth","v1","users/me/tokens","POST",{refresh:e},!0).then(function(e){return e&&e.data&&e.data.access&&e.data.refresh&&n.setAuthenticationCookies(e.data.access,e.data.refresh),e.data}).catch(function(e){i.cachePromise("newAuthTokens",t(function(e){return e()})),l.redirectToLogin()}):(i.cachePromise("newAuthTokens",t(function(e){l.redirectToLogin(),e()})),i.getCachedPromise("newAuthTokens"))},buildV2Parameters:function(e,t,r,a,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u={url:"https://www2.packtpub.com/mapt-rest/"+t,method:e,headers:{}};return n.hasJwtAuth()&&(u.headers.Authorization="Bearer "+n.getCookie("access_token_live")),a&&(u.headers["Content-Type"]=void 0),o&&"promiseCache"!==o&&(u.cache=i.getCache(o)),c&&(u.timeout=c),"GET"===e?(u.params=r,u):(u.data=r,u.offlineOptions=s,u)},checkRequestType:function(e){return!!l.requestTypeList.find(function(t){return t===e})},microserviceRequest:function(e,r,i,a,o,s){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,v=void 0;if(c&&c.cachePromiseName&&(v=l.getPromiseFromCache("microservice/"+c.cachePromiseName)))return v;var g=l.generateRequestUrl({auth:"https://services.packtpub.com/auth",subscriptions:"https://subscriptions-api.packtpub.com/",subscriptionsV2:"https://services.packtpub.com/subscriptions",geolocation:"https://geolocation-api.packtpub.com/",readerContent:void 0,usersPacktlib:"https://users-packtlib-api.packtpub.com/",skills:"https://services.packtpub.com/skills",users:"https://services.packtpub.com/users",credits:"https://services.packtpub.com/credits",products:"https://services.packtpub.com/products",entitlements:"https://services.packtpub.com/entitlements",lists:"https://services.packtpub.com/lists",marketing:"https://services.packtpub.com/marketing",contentSearch:"https://services.packtpub.com/content-search",drupalPull:"https://services.packtpub.com/drupal-pull",b2b:"https://services.packtpub.com/b2b-accounts",b2bSubscriptions:"https://services.packtpub.com/b2b-subscriptions",vatLayerProxy:"https://services.packtpub.com/vatlayer-proxy",timedUnlock:"https://services.packtpub.com/timed-unlock"}[e],r,i);if(c&&c.cache404){var m=l.getCached404Response(c.cacheName,g);if(m)return t.reject(m)}if(s&&!n.hasJwtAuth())return u.debug("JWT missing, request %s returning false",g),l.requestNotSent();var y=l.buildMicroserviceRequestObject(e,r,i,a,o,s,!!c&&c.cacheName,d,f,h,p);if(!y)return t.resolve();var b="users/me/tokens"===i;return l.handleMicroserviceRequest(y,c,b)},handleMicroserviceRequest:function(n,r,a){s.reset();var o=r&&r.cachePromiseName,c=t(function(e){return e(a?n:l.retry401Request(n))}).then(e).then(function(e){if(u.debug("response for",n.url,e),s.reset(),!e)return!1;if(e.data=e.data||{},e.data.httpStatus=e.status,e.status.toString().match(/([2-3][0-9][0-9])$/g))return e.data;throw e}).catch(function(e){s.reset(),"string"==typeof e.data?e.data={data:e.data}:e.data=e.data||{},e.data.httpStatus=e.status;var t=401===e.status,c=404===e.status;if(t&&!a)return l.retry401Request(n,!0).then(function(e){return l.handleMicroserviceRequest(e,r,!0)}).then(function(e){return l.setRequestingAuthTokensFlag(!1),e});throw o&&i.deleteCachedPromise(r.cachePromiseName,"microservice/"),c&&r&&r.cache404&&i.setCachedItem(r.cacheName,n.url,e.data),t||c||u.error("error for",n.url,e),e.data});return o&&i.cachePromise(r.cachePromiseName,c,"microservice/"),c},buildMicroserviceRequestObject:function(e,t,a,o,s,c,d,f,h,p,v){if(!{auth:"https://services.packtpub.com/auth",subscriptions:"https://subscriptions-api.packtpub.com/",subscriptionsV2:"https://services.packtpub.com/subscriptions",geolocation:"https://geolocation-api.packtpub.com/",readerContent:void 0,usersPacktlib:"https://users-packtlib-api.packtpub.com/",skills:"https://services.packtpub.com/skills",users:"https://services.packtpub.com/users",credits:"https://services.packtpub.com/credits",products:"https://services.packtpub.com/products",entitlements:"https://services.packtpub.com/entitlements",lists:"https://services.packtpub.com/lists",marketing:"https://services.packtpub.com/marketing",contentSearch:"https://services.packtpub.com/content-search",drupalPull:"https://services.packtpub.com/drupal-pull",b2b:"https://services.packtpub.com/b2b-accounts",b2bSubscriptions:"https://services.packtpub.com/b2b-subscriptions",vatLayerProxy:"https://services.packtpub.com/vatlayer-proxy",timedUnlock:"https://services.packtpub.com/timed-unlock"}[e])return u.warn("Microservice doesn't exist:",e),{};var g={url:l.generateRequestUrl({auth:"https://services.packtpub.com/auth",subscriptions:"https://subscriptions-api.packtpub.com/",subscriptionsV2:"https://services.packtpub.com/subscriptions",geolocation:"https://geolocation-api.packtpub.com/",readerContent:void 0,usersPacktlib:"https://users-packtlib-api.packtpub.com/",skills:"https://services.packtpub.com/skills",users:"https://services.packtpub.com/users",credits:"https://services.packtpub.com/credits",products:"https://services.packtpub.com/products",entitlements:"https://services.packtpub.com/entitlements",lists:"https://services.packtpub.com/lists",marketing:"https://services.packtpub.com/marketing",contentSearch:"https://services.packtpub.com/content-search",drupalPull:"https://services.packtpub.com/drupal-pull",b2b:"https://services.packtpub.com/b2b-accounts",b2bSubscriptions:"https://services.packtpub.com/b2b-subscriptions",vatLayerProxy:"https://services.packtpub.com/vatlayer-proxy",timedUnlock:"https://services.packtpub.com/timed-unlock"}[e],t,a),method:o,headers:f&&"object"===(void 0===f?"undefined":r(f))?f:{}};return h&&(g.responseType=h),g.headers["Content-Type"]=g.headers["Content-Type"]||"application/json",c&&n.hasJwtAuth()&&(g.headers.Authorization="Bearer "+n.getCookie("access_token_live")),d&&(g.cache=i.getCache(d)),p&&(g.offlineOptions=p),v&&(g.timeout=v),"GET"===o?(g.params=s,g):(g.data=s,g)},get:function(t,n){var r={};return n&&(r=n.config,n.cacheName&&(r.cache=i.getCache(n.cacheName))),e.get(t,r).then(function(e){return e.data}).catch(function(){return!1})},put:function(t,n){return e.put(t,n)},getCached404Response:function(e,t){var n=i.getCachedItem(e,t);return!(!n||404!==n.httpStatus)&&n},redirectToLogin:function(){n.unsetAuthentication(),o.path(a.getPath("login"))},initializePromises:function(){i.cachePromise("newAuthTokens",t.resolve()),i.cachePromise("attemptingSessionLogin",t.resolve())},getPromiseFromCache:function(e){if(e){var t=i.getCachedPromise(e);if(t&&t.$$state&&!1!==t.$$state.value)return t}return null},generateRequestUrl:function(e,t,n){var r="";if(!e)throw new Error("Microservice url likely missing from environment configuration file, httpService.generateRequestUrl() called with undefined 'baseUrl'");return r="/"===e[e.length-1]?e.substr(0,e.length-1):e,t&&(r=0===e.indexOf("https://services")?r+"-"+t:r+"/"+t),n&&(r=r+"/"+n),r}};return l.initializePromises(),l}])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(720),c=r(s),u=function(){function e(t,n,r,o,s,u){"ngInject";var l=this;a(this,e),this.$window=t,this.$location=n,this.$q=o,this.userService=s,this.intercomBooted=!1,this.intercomObject=this.createIntercomObject(),this.inTrial=!1,this.bootIntercomCalled=!1,this.eventQueue=[],this.log=u.create("packt:services:intercom"),r.$on("pageChanged",function(){}),r.$on("user:logout",function(){l.intercomObject=l.createIntercomObject(),"function"==typeof l.$window.Intercom&&l.$window.Intercom("shutdown")}),r.$on("content:saved",function(e,t){var n="unsaved";if(t.saved){n="saved";var r={save_title_name:t.title,save_title_image_url:"https://static.packt-cdn.com/products/"+t.isbn+"/cover/smaller",save_title_date_at:Date.now()/1e3,save_title_url:t.path};l.addMetadata(r)}var i={product_title:t.title,category:t.category,image_url:"https://static.packt-cdn.com/products/"+t.isbn+"/cover/smaller"};l.addEvent("content-"+n,i)}),r.$on("content:bookmarked",function(e,t){var n="removed";if(t.bookmarked){n="added";var r=i({bookmark_title_name:t.title,bookmark_title_image_url:"https://static.packt-cdn.com/products/"+t.isbn+"/cover/smaller",bookmark_title_section_url:t.seoUrl,bookmark_title_date_at:Date.now()/1e3,bookmark_title_section_name:t.section||t.chapter},"bookmark_title_section_url",t.path);l.addMetadata(r)}var a={product_title:t.title,category:t.category,image_url:"https://static.packt-cdn.com/products/"+t.isbn+"/cover/smaller",bookmark_url:t.path,section_title:t.section||t.chapter};l.addEvent("bookmark-"+n,a)}),r.$on("content:viewed",function(e,t){if(!t.contentLoaded)return!1;var n={last_section_read_book_title:(0,c.default)(t.title),last_section_read_category:t.category,last_section_read_image_url:"https://static.packt-cdn.com/products/"+t.isbn+"/cover/smaller",last_section_read_url:t.lastReadPath||t.seoUrl,last_section_read_date_at:Date.now()/1e3,last_section_read_name:t.section||t.chapter},r={product_title:t.title,category:t.category,image_url:"https://static.packt-cdn.com/products/"+t.isbn+"/cover/smaller",product_url:t.seoUrl,section_title:t.section||t.chapter};l.addMetadata(n),l.addEvent("content-read",r),l.addEvent("content-read-"+t.category,r)}),r.$on("content:home-viewed",function(e,t){var n={product_title:t.title,category:t.category,image_url:"https://static.packt-cdn.com/products/"+t.isbn+"/cover/smaller",product_url:t.path};l.addEvent("viewed-cover",n)})}return e.$inject=["$window","$location","$rootScope","$q","userService","logManager"],o(e,[{key:"createIntercomObject",value:function(){return{app_id:"e8mdsr07"}}},{key:"bootIntercom",value:function(e){e&&(this.inTrial=e.preferences&&e.preferences.intercomTrial,this.intercomObject.name=e.name.firstName+" "+e.name.lastName,this.intercomObject.email=e.mail,this.intercomObject.user_id=e.uuid),this.bootIntercomCalled=!0,this.triggerIntercom()}},{key:"triggerIntercom",value:function(){var e=this;if(this.log.debug("triggerIntercom()"),this.log.debug("- bootIntercomCalled",this.bootIntercomCalled),this.log.debug("- intercomBooted",this.intercomBooted),this.log.debug("- intercomObject",this.intercomObject),this.bootIntercomCalled){var t=!0===this.intercomBooted?"update":"boot";if(!0!==this.inTrial)return this.intercomObject=this.createIntercomObject(),void("function"==typeof this.$window.Intercom&&this.$window.Intercom("shutdown"));"function"==typeof this.$window.Intercom&&this.$window.Intercom(t,this.intercomObject),this.intercomBooted=!0,this.eventQueue.forEach(function(t,n,r){e.addEvent(t.name,t.metadata)}),this.eventQueue=[]}}},{key:"addEvent",value:function(e,t){return this.intercomBooted||this.eventQueue.push({name:e,metadata:t}),this.inTrial?"function"==typeof this.$window.Intercom?this.$window.Intercom("trackEvent",e,t):null:("function"==typeof this.$window.Intercom&&this.$window.Intercom("shutdown"),!1)}},{key:"addMetadata",value:function(e,t){if(this.log.debug("addMetadata():"),this.log.debug("- metadata:",e),this.log.debug("- forceInTrial:",t),t&&(this.inTrial=t),!this.inTrial)return void("function"==typeof this.$window.Intercom&&this.$window.Intercom("shutdown"));this.intercomObject=Object.assign(this.intercomObject,e),this.log.debug("this.intercomObject:",this.intercomObject),this.triggerIntercom()}}]),e}();angular.module("PacktUnlimited.services").service("intercomService",u)},function(e,t,n){"use strict";function r(e,t,n,r){return this.getInvoices=function(e){return n.microserviceRequest("subscriptions","v1","users/me/invoices?page="+e,"GET",{},!0,{cacheName:"generalUserRelatedCache"})},this.getInvoice=function(e){return n.microserviceRequest("subscriptions","v1","invoices/"+e+"/files","GET",{},!0,!1,{Accept:"application/pdf"},"blob")},this.clearInvoicesCache=function(){r.deleteCachedItemStartingWith("generalUserRelatedCache","https://subscriptions-api.packtpub.com/v1/users/me/invoices")},this}r.$inject=["$rootScope","$q","httpService","cacheService"],angular.module("PacktUnlimited.services").service("invoiceService",r),r.$inject=["$rootScope","$q","httpService","cacheService"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(44),s=r(o),c=n(1108),u=r(c),l=n(711),d=r(l),f=[],h=[],p=["debug","info","warn","error"],v=function(){function e(t){"ngInject";i(this,e),this.LEVELS=p,this.loggers=h}return e.$inject=["$injector"],a(e,[{key:"logFactory",value:function(e,t){var n=this,r=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],(0,s.default)(e));return function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];r.apply(n,t)}}},{key:"create",value:function(e){if(h[e])return h[e];f.push(e);var t=this.createLoggersFor(e);return h[e]=t,t}},{key:"createLoggersFor",value:function(e){for(var t=this,n={},r=function(r){var i=p[r],a=e+":"+i;n[i+"Logger"]="error"===i?t.logFactory(a,i,!0):t.logFactory(a,i),n[""+i]=function(){n[i+"Logger"].apply(n,arguments)},n.tracker=t.createTracker},i=0;i<p.length;i+=1)r(i);return n}},{key:"createTracker",value:function(){for(var t=this,n={logger:t},r=t.trackers?t.trackers.length:0,i=n+"-"+r,a=u.default.unique(i),o=d.default.selectColor(a),s=d.default.getAccessibleTextcolor(o),c={id:i,namespace:n,shorthash:a,hitCount:0,bgColor:o,fgColor:s},l=function(n){var r=p[n];c[r]=function(){for(var n=arguments.length,i=Array(n),l=0;l<n;l++)i[l]=arguments[l];var d=i;d&&d.length&&d.length>=1&&"string"==typeof d[0]?t[r+"Logger"].useColors?(c.hitCount+=1,d[0]=d[0]+" %c "+a+":"+c.hitCount+" ",e.addColor(d,s,o),t[r].apply(t,d)):(c.hitCount+=1,d[0]=d[0]+" - "+u.default+":"+c.hitCount,t[r].apply(t,d)):t[r].apply(t,d.concat([u.default]))}},f=0;f<p.length;f+=1)l(f);return t.trackers?t.trackers.push(c):t.trackers=[c],c}}],[{key:"addColor",value:function(e,t,n){var r=0,i=0;e[0]&&e[0].replace&&"function"==typeof e[0].replace&&(e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r+=1,"%c"===e&&(i=r))}),e.splice(i,0,"color: "+t+"; background: "+n))}},{key:"available",value:function(){return f}}]),e}();v.$inject=["$injector"],t.default=v,angular.module("PacktUnlimited.services").service("logManager",v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(710),a=r(i);angular.module("PacktUnlimited.controllers").controller("metadataController",["$routeParams","$rootScope","$scope","$location","$route","metadataService","configService","$filter","$q","analyticsService","featureFlagsService","logManager",function(e,t,n,r,i,o,s,c,u,l,d,f){var h=this,p=f.create("metadata-controller"),v={init:function(){h.defaultImagePath="https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/images/white-packt.png",h.pageTitle="Packt Subscription | More Tech, More Choice, More Value",h.imagePath=h.defaultImagePath,h.zuoraLib="https://static.zuora.com/Resources/libs/hosted/1.3.0/zuora-min.js",t.$on("pageChanged",function(){v.tryGetMetadataLocally().then(function(e){return v.sendToAnalytics(e)}).catch(function(){return!1})}),t.$on("metadata",function(e,t){p.debug("got metadata:",t.metadata),v.updateMetadata(t.metadata),v.sendToAnalytics(t.metadata)})},tryGetMetadataLocally:function(){var e=i.current.$$route?i.current.$$route.pageType:"";if(e&&a.default[e]){var t=a.default[e];return p.debug("got metadata:",t),v.updateMetadata(t),u.resolve(t)}return u.reject()},sendToAnalytics:function(e){if(i.current.$$route&&i.current.$$route.pageType&&"product"!==i.current.$$route.pageType)return l.populatePageDataLayers(e)},onChangePage:function(){var e=i.current.$$route?i.current.$$route.pageType:"",t="pages/metadata",n=void 0,r=void 0,a=void 0,s=void 0,c=void 0,l=void 0,d=void 0,f=void 0,p=!1,g=!1;switch(e){case"skill-plans":s=i.current.params.career,c=i.current.params.role,t+="/"+e+"/"+s+"/"+c,p=!0;break;case"skill-cards":l=i.current.params.card,r=i.current.params.category,t+="/"+e+"/"+r+"/"+l,p=!0;break;case"topics-topic":r=i.current.params.category.replace(/ /g,"+"),t+="/"+e+"/"+r,p=!0;break;case"product":n=i.current.params.isbn,r=i.current.params.category,a=i.current.params.chapter?i.current.params.chapter:"",d=i.current.params.section_id?i.current.params.section_id:"",t="products/"+n+"/header-metadata",p=!0,d?t="products/"+n+"/chapters/"+a+"/sections/"+d+"/metadata":a&&(t="products/"+n+"/chapters/"+a+"/metadata");break;case"learning-paths-details":f=i.current.params.learningPathName,g=!0;break;default:e&&(t+="/"+e,p=!0)}if(!p&&!g)return u.resolve({pageTitle:h.pageTitle});var m=void 0;return p&&(m=o.getMetadata(t)),g&&(m=o.getLearningPathMetadata(f)),m.then(function(e){return v.updateMetadata(e),e})},updateMetadata:function(e){h.pageTitle=e.pageTitle;var t=c("replace_spaces")(e.description);h.description=c("strip_tags")(t),e&&e.canonicalUrl&&(h.canonicalUrl=v.formatCanonicalUrl(e.canonicalUrl)),e.filepath&&-1===e.filepath.indexOf("http")&&(e.filepath=s.cdnUrl("/"+e.filepath)),h.imagePath=e.filepath?e.filepath:h.defaultImagePath,h.productType=e.productType||"",h.releaseDate=e.publicationDate||"",h.coverUrl=e.coverUrl||"",h.isbn=e.isbn13||"",h.authorList=e.authorList||"",h.authorList&&(h.authorListString=h.authorList.join(", ")),v.removeSchema(),"book"===h.productType?v.addBookSchema():"video"===h.productType&&v.addVideoSchema()},addBookSchema:function(){var e=JSON.stringify({"@context":"https://schema.org","@type":h.productType,author:h.authorList,datePublished:h.releaseDate,image:h.imagePath,name:h.pageTitle,publisher:{"@type":"Organization",name:"Packt",logo:{"@type":"ImageObject",url:h.defaultImagePath}},isPartOf:h.coverUrl,description:h.description,isbn:h.isbn,bookFormat:"https://schema.org/EBook"},null,"\t");$("head").append('<script type="application/ld+json" id="schema">'+e+"<\/script>")},addVideoSchema:function(){var e=JSON.stringify({"@context":"https://schema.org","@type":"VideoObject",author:h.authorList,datePublished:h.releaseDate,image:h.imagePath,inLanguage:"English",name:h.pageTitle,publisher:{"@type":"Organization",name:"Packt",logo:{"@type":"ImageObject",url:h.defaultImagePath}},isPartOf:h.coverUrl,description:h.description,uploadDate:h.releaseDate},null,"\t");$("head").append('<script type="application/ld+json" id="schema">'+e+"<\/script>")},removeSchema:function(){$("head script#schema").remove()},formatCanonicalUrl:function(e){var t=c("canonical_url")(e);return 0===t.indexOf("/mapt")?t.replace("/mapt","https://subscription.packtpub.com"):0===t.indexOf("/")?"https://subscription.packtpub.com"+t:t}};v.init()}])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i){"ngInject";r(this,e),this.httpService=t,this.learningPathsService=n,this.$filter=i}return e.$inject=["httpService","learningPathsService","$filter"],i(e,[{key:"getMetadata",value:function(e,t){return this.httpService.sendRequestV2(!1,{},"GET",e,!1,{cacheName:"nonUserRelatedCache"},null,t)}},{key:"getLearningPathMetadata",value:function(e){var t=this;return this.learningPathsService.getLearningPathByName(e).then(function(t){return{pageTitle:t.displayName+" | Packt Subscription",description:t.oneLiner,canonicalUrl:"/learning-paths/"+e,productType:"learning-path"}}).catch(function(n){return{pageTitle:t.$filter("titleCase")(e)+" | Packt Subscription",canonicalUrl:"/learning-paths/"+e}})}}]),e}();angular.module("PacktUnlimited.services").service("metadataService",a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){"ngInject";r(this,e),this.httpService=t,this.cacheService=n}return e.$inject=["httpService","cacheService"],i(e,[{key:"getNewsletters",value:function(){return this.httpService.microserviceRequest("marketing","v1","lists/c970747b22/categories/ce212218f9","GET",!1,!1,{cacheName:"nonUserRelatedCache"}).then(function(e){return!!(e&&e.data&&e.data.length&&e.data[0].interests)&&e.data[0].interests.map(function(e){return{id:e.id,title:e.name}})})}},{key:"updateNewsletterProfile",value:function(e){var t=this;return this.httpService.microserviceRequest("marketing","v1","users/me/profile","PATCH",e,!0,!1,!1,!1).then(function(){return t.resetUsersNewslettersCache()})}},{key:"getUsersNewsletters",value:function(){return this.httpService.microserviceRequest("marketing","v1","users/me/interests","GET",!1,!0,{cacheName:"generalUserRelatedCache",cache404:!0}).then(function(e){if(e&&e.data){return e.data.map(function(e){return e.id})}return!1}).catch(function(e){if(e&&8000018===e.errorCode)return[];throw e})}},{key:"updateUsersInterests",value:function(e,t){var n=this,r={listId:e,interests:t};return this.httpService.microserviceRequest("marketing","v1","users/me/interests","PUT",r,!0).then(function(){return n.resetUsersNewslettersCache()})}},{key:"addEmailToNewsletter",value:function(e,t,n){var r=this,i={email_address:e,listId:t,interests:n};return this.httpService.microserviceRequest("marketing","v1","submitContact","PUT",i,!1).then(function(){return r.resetUsersNewslettersCache()})}},{key:"resetUsersNewslettersCache",value:function(){this.cacheService.deleteCachedItem("generalUserRelatedCache","https://services.packtpub.com/marketing-v1/users/me/interests")}}]),e}();angular.module("PacktUnlimited.services").service("newslettersService",a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(651),a=r(i);angular.module("PacktUnlimited.offline",[a.default]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","batchRequestService",function(e,t,n){return{request:function(e){return e.cache&&(e.wasCached=!!e.cache.get(e.url)),e},response:function(e){return e.config.wasCached||n.hasQueuedRequests()&&!n.isSendingRequestsInProgress()&&n.handleOfflineBatchedRequests(),e},responseError:function(e){var r=e.config||{};switch(e.status){case-1:return"abort"===e.xhrStatus?t.reject(e):(r.offlineOptions&&r.offlineOptions.queueOffline&&n.batchOfflineRequest(r),t.resolve(!1));default:return t.reject(e)}}}}])}])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,i,a,s,c,u,l,d,f,h,p,v,g,m,y,b,_){var w=this,S=v.create("packt:controllers:payment-details"),k={inCheckoutProcess:!1,isUpgradingSubsWithLegacyPayment:!1,upgradingLegacySubsInfo:{},init:function(){S.debug("init payment details controller"),k.inCheckoutProcess="checkout"===a.current.$$route.pageType,k.isUpgradingSubsWithLegacyPayment="update-card-details"===a.current.$$route.pageType&&p.isUpgradingSubsWithLegacyPayment,k.upgradingLegacySubsInfo=p.upgradingLegacySubsInfo,k.isB2bPayment=b.b2bPayment,s.paypalCallback=function(e){return S.debug("in paypal callback with token:",e),k.addSpinner(!0),k.isB2bPayment?k.handleB2bPaypalCallbackResponse(e):d.getMetaData().then(function(t){return u.createOrUpdateAccountWithPaypal(e,t.currency)}).then(function(){return k.handlePaymentMethodCreated()}).catch(function(e){return S.error("paypal callback error:",e),k.paymentCancelled()}).finally(function(){t.clearGetPaymentMethodsCache(),t.clearGetSubscriptionCache(),k.resetPaymentPanel(),S.debug("paypalCallback finished")})},s.paypalCancelCallback=function(){S.debug("in paypal cancel callback..."),k.paymentCancelled()}},parseZuoraToken:function(e){return S.debug("zuora callback called with response:",e),k.addSpinner(!0),k.isB2bPayment?k.handleB2bZuoraCallbackResponse(e):d.getMetaData().then(function(t){if(!e||!1===e.success)throw S.debug("parsing zuora token failed"),new Error("Parsing Zuora failed");return u.createOrUpdateAccountWithCard(e.refId,t.currency)}).then(function(){return k.handlePaymentMethodCreated()}).catch(function(e){return S.error("parsing zuora token error:",e),k.paymentCancelled()}).finally(function(){t.clearGetPaymentMethodsCache(),t.clearGetSubscriptionCache(),k.resetPaymentPanel(!0),S.debug("parseZuoraToken finished")})},handleB2bZuoraCallbackResponse:function(e){if(!e||!1===e.success){S.debug("parsing zuora token failed"),k.resetPaymentPanel(!0);return n.addAlert("Something went wrong, but no payment was taken! Please retry or get in touch with us!","danger",1e4),_.reject(new Error("Parsing Zuora failed"))}var t=b.b2bAccountId,r=b.b2bSeats,i=y.buildCardPaymentDetails(e.refId);return k.createB2bSubscriptionAccount(i).then(function(){if(k.inCheckoutProcess){var e=l.product;return k.createB2bSubscription(t,e,r)}}).then(function(){return k.handleSuccessfullyCreatedB2bAccountAndSubscription()}).catch(function(e){return S.error("parsing zuora token error:",e),k.handleB2bPaymentError(e)}).finally(function(){y.clearGetSubscriptionAccountCache(t),k.resetPaymentPanel(!0),S.debug("parseZuoraToken finished")})},handleB2bPaypalCallbackResponse:function(e){var t=b.b2bAccountId,n=b.b2bSeats;return y.buildPaypalPaymentDetails(e).then(function(e){return k.createB2bSubscriptionAccount(e)}).then(function(){if(k.inCheckoutProcess){var e=l.product;return k.createB2bSubscription(t,e,n)}}).then(function(){return k.handleSuccessfullyCreatedB2bAccountAndSubscription()}).catch(function(e){return S.error("parsing paypal token error:",e),k.handleB2bPaymentError(e)}).finally(function(){y.clearGetSubscriptionAccountCache(t),k.resetPaymentPanel(),S.debug("parse paypal token finished")})},resetPaymentPanel:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];w.paymentMethod="",k.activatePaymentMethodButtons(),e&&k.resetZuoraPaymentContainer(),k.removeSpinner(),b.$digest()},resetZuoraPaymentContainer:function(){var e=document.getElementById("zuora_payment");e&&(e.innerHTML="",e.style.height="auto")},paymentFailed:function(e){t.handleSubscriptionsRequestError(e)},paymentCancelled:function(){n.addAlert("An error occurred during checkout, no subscription has been added to your account and no payment was taken.","warning",1e4)},handleB2bPaymentError:function(e){if(13000009===e.errorCode)return void n.addAlert("Apologies, there has been an error processing your payment. Your card has not been charged. Please either use an alternative card, or try our secure PayPal payment system. You will receive a receipt and PDF invoice confirming payment regardless of payment gateway selected.","warning",0);k.paymentCancelled()},upgradeSubscription:function(r){return k.addSpinner(),t.upgradeUserSubscription(r.currentSubsId,r.upgradeToSubsRatePlanId).then(function(){k.isUpgradingSubsWithLegacyPayment=!1,c.path(e.getPath("myAccount")).search({upgraded:"true"})}).catch(function(t){S.error("Error during upgrading a legacy subs:",t),n.addAlert("Sorry! Your subscription could not be upgraded, please email us for assistance at "+e.supportEmail+".","danger"),c.path(e.getPath("myAccount"))}).finally(function(){return k.removeSpinner()})},activatePaymentMethodButtons:function(){$(".payment-method-button").removeClass("disabled")},openNewTab:function(){return s.open()},updateTabLocation:function(e,t){e||t.close(),t.location.href=e},createSubscription:function(){var n=l.product,r=l.freeTrial||!1,a="",o=void 0,s=void 0,u=void 0;return i.getSubscriptionProductData(n).then(function(e){if("fail"===e.status)throw new Error("No subscription product data");return s=e,t.createSubscription(s.ratePlanId,r)}).then(function(e){if(u=e,"fail"===u.status)throw new Error("Subscription creation failed");a=s.productName,h.addZuoraSubscriptionCreatedEvent(u.data.subscriptionId,s),o=u.data.subscriptionId}).then(function(){return k.intercomTrial()}).then(function(){return _.all({account:t.getSubscriberAccount(),subscriptions:t.getUserSubscriptions(!0)})}).then(function(e){return k.addSubscriptionMetadata(u,s,e.account,e.subscriptions)}).then(function(){return k.getNewsletters()}).then(function(e){return k.updateSubscriptionInterests(e)}).catch(k.paymentFailed).finally(function(){if(a){d.clearUserCaches(),d.unsetMetaData();var t={"new-subscription-name":a,rateplan:s.rateTitle.replace(/\s/g,"-").toLowerCase(),subid:o};r&&(t.freeTrial=1),c.path(e.baseUrl).search(t)}})},addSubscriptionMetadata:function(e,n,r,i){var a=(0,o.default)(e,"data.subscriptionId"),s=k.getSubscriptionById(i,a),c=(0,o.default)(s,"freeTrial"),u=(0,o.default)(s,"freeTrialLength",0),l=(0,o.default)(r,"data.currency"),d=(0,o.default)(n,"pricing.pricingModel"),f=void 0,p=1;d&&(f=t.getSubscriptionTypeName(d),p=t.getSubscriptionMonthCount(d));var v=new Date;c&&v.setDate(v.getDate()+u);var g=new Date(v);g.setMonth(g.getMonth()+p);var m=c?Date.now()/1e3:"",y={trial_start_date_at:m,sub_start_date_at:v/1e3,sub_expiry_date_at:g/1e3,status:"Active",is_on_trial:c,rate_plan:n.rateTitle,term:f||null,subscription_id:a||null,currency:l||null};h.addIntercomMetadata(y,!0)},getSubscriptionById:function(e,t){if(e&&e.data&&t)return e.data.find(function(e){return e.subscriptionId===t})},intercomTrial:function(){var e={intercomTrial:!0};d.updateUserPreferences(e).catch(function(){return d.createUserPreferences(e)})},getNewsletters:function(){return g.getUsersNewsletters().catch(function(){return[]})},updateSubscriptionInterests:function(e){var t=["da990d125b"].filter(function(t){return-1===e.indexOf(t)}).map(function(e){return{id:e,status:!0}});return t.length?g.updateUsersInterests("c970747b22",t).catch(function(){return!1}):Promise.resolve()},createPrepopulatedZuoraFieldsObject:function(e){var t=(e.firstName||"")+" "+(e.lastName||""),n="";return f.getCountryIsoFromId(e.billingCountry,!0).then(function(t){if(t)return n=t,f.getCountryZoneNameFromId(e.billingCountry,e.billingZone)}).then(function(r){var i="";return r&&(i=r),{field_creditCardHolderName:t,field_creditCardCountry:n,field_creditCardState:i,field_creditCardAddress1:e.billingStreet1,field_creditCardAddress2:e.billingStreet2,field_creditCardCity:e.billingCity,field_creditCardPostalCode:e.billingPostalCode,field_email:e.mail}})},handlePaymentMethodCreated:function(){return k.inCheckoutProcess?k.createSubscription():t.hasLegacySubscription(!0).then(function(e){if(e)return t.cancelLegacySubscription(e)}).then(function(){if(n.addAlert("Payment method updated succesfully","success"),k.isUpgradingSubsWithLegacyPayment)return k.upgradeSubscription(k.upgradingLegacySubsInfo)})},addSpinner:function(){w.loading=!0},removeSpinner:function(){w.loading=!1},createB2bSubscriptionAccount:function(e){var t=void 0,n=void 0,r=b.b2bAccountId,i=b.b2bPoNumber,a=b.b2bBusinessEmail;return m.getB2bAccountById(r).then(function(e){return t=e,d.getUserDetails()}).then(function(e){if(n=e,!a)return m.getB2bRoleMaps().then(function(e){var t=e.find(function(e){return e.accountId===r});n.businessEmail=t?t.userEmail:n.mail});n.businessEmail=a}).then(function(){return f.getCurrencyFromCountryName(t.country)}).then(function(r){return y.createOrUpdateSubscriptionAccount(n,t,e,r,i)})},createB2bSubscription:function(e,t,n){return i.getSubscriptionProductData(t,!0).then(function(t){var r={ratePlanId:t.ratePlanId,ratePlanChargeId:t.ratePlanChargeId,quantity:n};return y.createSubscription(e,r)})},handleSuccessfullyCreatedB2bAccountAndSubscription:function(){k.inCheckoutProcess&&(window.location.href=m.getB2bCheckoutLandingPageUrl())}};w.renderPaymentMethod=function(e){w.paymentMethod=e;var i={};switch(e){case"zuora":S.debug("initializing zuora iframe");var a={},o=void 0;k.addSpinner(),d.getUserDetails().then(function(e){if(k.isB2bPayment){a=e;var t=b.b2bAccountId;return m.getB2bAccountById(t,!0).then(function(e){return m.mapB2bAccountDetailsToLegacyAccountDetails(e)})}return e}).then(function(e){return Object.assign(a,e),f.getCurrencyFromCountryId(a.billingCountry)}).then(function(e){return o=e||"USD",k.createPrepopulatedZuoraFieldsObject(a)}).then(function(e){return e&&(i=e),r.getParameters(o)}).then(function(e){var t=Object.assign(e,i);return t.field_currency=o,r.render(t,i,k.parseZuoraToken)}).then(function(){$("#z-container").height("500px"),$("#zuora_payment").height("500px")}).catch(function(e){S.error("Error rendering Zuora iframe:",e)}).finally(function(){k.removeSpinner()});break;case"paypal":S.debug("initializing paypal"),k.resetZuoraPaymentContainer();var s=k.openNewTab();t.createPaypalBillingAgreementURL().then(function(e){var t=e.data.url;k.updateTabLocation(t,s)});break;default:n.addAlert("Sorry, there's been a problem. The selected payment method could not be found. Please retry or get in touch with us!","danger")}},w.cdnUrl=function(t){return e.cdnUrl(t)},k.init()}var a=n(981),o=r(a);i.$inject=["configService","subscriptionService","alertService","zuoraService","productService","$route","$window","$location","paymentMethodsService","$routeParams","userService","utilitiesService","analyticsService","$rootScope","logManager","newslettersService","b2bService","b2bSubscriptionsService","$scope","$q"],angular.module("PacktUnlimited.controllers").controller("paymentDetails",i),i.$inject=["configService","subscriptionService","alertService","zuoraService","productService","$route","$window","$location","paymentMethodsService","$routeParams","userService","utilitiesService","analyticsService","$rootScope","logManager","newslettersService","b2bService","b2bSubscriptionsService","$scope","$q"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i){"ngInject";r(this,e),this.subscriptionService=t,this.userService=n,this.log=i.create("packt:services:payment-methods"),this.log.debug("constructed",this)}return e.$inject=["subscriptionService","userService","logManager"],i(e,[{key:"buildAndCreateSubscriptionAccount",value:function(e,t,n){var r=this;return this.subscriptionService.buildGeneralSubscriptionUserData(e,t).then(function(e){return r.subscriptionService.createSubscriberAccount(Object.assign(e,n))})}},{key:"createOrUpdateAccountWithCard",value:function(e,t){var n={paymentMethod:"card",paymentMethodId:e};return this.createOrUpdateSubscriptionAccount(n,t)}},{key:"createOrUpdateAccountWithPaypal",value:function(e,t){var n=this,r={paymentMethod:"paypal"};return this.subscriptionService.createPaypalBillingAgreementId(e).then(function(e){if("success"!==e.status)throw new Error("Billing agreement acceptance failed");var i=e.data.billingAgreementId;return r.paypalBaid=i,n.createOrUpdateSubscriptionAccount(r,t)})}},{key:"createOrUpdateSubscriptionAccount",value:function(e,t){var n=this,r=e,i=!1,a=void 0,o=void 0;return this.userService.getUserDetails().then(function(e){return a=e,"paypal"===r.paymentMethod&&(r.paypalEmail=e.mail),n.subscriptionService.hasZuoraAccount()}).then(function(e){return e?n.subscriptionService.buildGeneralSubscriptionUserData(a,t,!0):(i=!0,n.buildAndCreateSubscriptionAccount(a,t,r).catch(function(e){if(n.log.error("error:",e),400===e.httpStatus&&"fail"===e.status&&"This account already exists"===e.data)return n.log.debug("Account exists, reusing existing account"),n.userService.clearUserCaches(),n.subscriptionService.buildGeneralSubscriptionUserData(a,t,!0);throw e}))}).then(function(e){return o=e,n.subscriptionService.hasZuoraAccount()}).then(function(e){if(e&&o&&!i){var t=Object.assign(o,r);return n.subscriptionService.updateSubscriberAccount(t)}return null})}}]),e}();angular.module("PacktUnlimited.services").service("paymentMethodsService",a)},function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};angular.module("PacktUnlimited.services").factory("productService",["$rootScope","$q","httpService","userService","utilitiesService","cacheService","configService","featureFlagsService","authService","logManager",function(e,t,n,a,o,s,c,u,l,d){var f=d.create("packt:product-service"),h={HISTORY_MAX_LIMIT:20,productList:[],productUserRelatedCacheName:"productUserRelatedIsbnMapCache",getProduct:function(e){var t=h.productList.findIndex(function(t){return t.isbn13===e});return-1!==t&&h.productList[t]},addProduct:function(e){var t;if(e.authorList&&angular.extend(e,{author:e.authorList.join(", ")}),!h.getProduct(e.isbn13))return t="books"===e.type?"eBook":"Video",angular.extend(e,{displayType:t,updated:0}),void h.productList.push(e);h.updateProduct(e.isbn13,e)},updateProduct:function(e,t){var n=h.getProduct(e);return!!n&&(angular.extend(n,t),n.updated++,n)},addProductList:function(e){var t=[];return"object"===(void 0===e?"undefined":i(e))&&(e=Object.keys(e).map(function(t){return e[t]})),e&&e.length?(e.forEach(function(e){h.addProduct(e),t.push(e.isbn13)}),t):t},generateCachedContentPath:function(e,t,n){var r=void 0;return r="products/"+e+"/"+t+"/"+("chapter"===n?t:n),f.debug("generateCachedContentPath:",r),r},getRecommendations:function(e){return n.microserviceRequest("products","v1","products/"+e+"/recommendations","GET",{},!1,{cacheName:"nonUserRelatedCache"}).then(function(e){var t=e.data.map(function(e){return e.productId});return h.getProductsSummary(t)}).then(function(e){return h.transformSummaryData(e)})},getProductSummary:function(e,t){return h.getProductsSummary([e],"full",t).then(function(e){return e[0]}).then(function(e){f.debug("got full product summary:",e);var t=h.transformSummaryData(e),n=r(t,1),i=n[0];return e.authors&&e.authors.length&&(i.authorList=e.authors.filter(function(e){return!!e.author}).map(function(e){return{name:e.author,description:e.description}})),i})},getProductMetadata:function(e,n){var i="products/"+e+"/metadata",a=s.getCachedItem("nonUserRelatedCache",i);if(a)return t.resolve(a);var o=[h.getProductSummary(e,n),h.getProductToc(e,n),h.getAvailableFileTypes(e,n)];return t.all(o).then(function(e){var t=r(e,3),n=t[0],a=t[1],o=t[2];if(!n||!a)throw new Error("Coudn't get full product metadata");var c={title:n.title,earlyAccess:n.earlyAccess||!1,imageUrl:n.coverImage,shopUrl:n.shopUrl,publicationDate:n.publicationDate,authorList:n.authorList,seoCategory:n.seoCategory,availableDownloads:o,tableOfContents:a};return f.debug("got product metadata:",c),s.setCachedItem("nonUserRelatedCache",i,c),c})},getAvailableFileTypes:function(e,t){var r={productDownloads:[],codeDownloads:[]};return n.microserviceRequest("products","v1","products/"+e+"/types","GET",{},!1,{cacheName:"nonUserRelatedCache"},!1,!1,!1,t).then(function(e){return e.data[0].fileTypes}).then(function(t){return f.debug("got file types for %s:",e,t),t&&t.length?(t.indexOf("code")>-1&&r.codeDownloads.push("zip"),t.indexOf("pdf")>-1&&r.productDownloads.push("pdf"),t.indexOf("epub")>-1&&r.productDownloads.push("epub"),t.indexOf("mobi")>-1&&r.productDownloads.push("mobi"),r):r}).catch(function(){return r})},getProductToc:function(e,t){var r=this,i="https://static.packt-cdn.com/products/"+e+"/toc",a={config:{timeout:t},cacheName:"nonUserRelatedCache"};return n.get(i,a).then(function(e){if(f.debug("got TOC:",e),!e)return!1;var t=r.transformToc(e);return f.debug("transformed toc:",t),t})},transformToc:function(e){var t=[];e.chapters&&e.chapters.length&&(t=t.concat(e.chapters)),e.appendices&&e.appendices.length&&(t=t.concat(e.appendices));var n=1;return t.map(function(e){var t={id:e.id,title:e.title,index:n};return t.children=e.sections.map(function(r,i){var a={title:r.title,index:n,type:"section",contentType:r.contentType};if(0===i){if("text"===r.contentType)a.id=e.id,a.originalId=r.id,t.seoUrl=e.id,a.seoUrl=t.seoUrl;else if("video"===r.contentType){a.id=r.id,a.originalId=r.id;var s=o.canonicalSectionTitle(r.title);a.seoUrl=t.id+"/"+a.id+"/"+s}r.summary&&(t.summary=r.summary),r.metaDescription&&(t.metaDescription=r.metaDescription)}else{a.id=r.id;var c=o.canonicalSectionTitle(r.title);a.seoUrl=t.id+"/"+a.id+"/"+c}return r.summary&&(a.summary=r.summary),r.metaDescription&&(a.metaDescription=r.metaDescription),n+=1,a}),/^[0-9]+$/.test(e.id)?t.type="chapter":/^copyright|^pref/gi.test(e.id)?t.type="pref":/^back|^app/gi.test(e.id)&&(t.type="appendix"),t})},getSignedProductContent:function(e,t){return n.microserviceRequest("products","v1","products/"+e+"/signed-content","GET",!1,!0,!1,!1,!1,!1,t).then(function(e){return e.data})},getProductUserData:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"line",i=arguments[2],a=h.productUserRelatedCacheName,o=[],c=e.reduce(function(e,t){var n=t+"-"+r,i=s.getCachedItem(a,n);return i?e[t]=i:o.push(t),e},{});if(!o.length)return t.resolve(c);var u=void 0,l=JSON.stringify(o);return u=n.microserviceRequest("users","v1","users/me/products/metadata?isbns="+l,"GET",{detail:r},!0,!1,!1,!1,!1,i).then(function(e){return e.httpStatus&&delete e.httpStatus,e}),u.then(function(e){if(e){Object.keys(e).forEach(function(t){var n=t+"-"+r;s.setCachedItem(a,n,e[t])});return Object.assign(c,e)}return!1})},removeProductUserDataFromCache:function(e,t){if(e&&t){var n=h.productUserRelatedCacheName,r=e+"-"+t;s.deleteCachedItem(n,r)}},clearAllProductUserDataCache:function(){var e=h.productUserRelatedCacheName;s.deleteCache(e)},getHistory:function(e,t){var r=this,i=void 0;return n.microserviceRequest("usersPacktlib","v2","users/me/views/history","GET",{limit:e,offset:t},!0,{cachePromiseName:"users/me/history/"+e+"/"+t}).then(function(e){if(e&&e.data&&e.data.results&&e.data.results.rows){var t=e.data.results.rows.map(function(e){return e.product_id});return i=e.data.results.count,r.getProductsSummary(t)}return!1}).then(function(e){if(e&&e.length>0){var t=r.transformSummaryData(e);return a.setHistoryCount(i),t}return!1})},getLastReadProducts:function(e,t){var n=this,r=[];return this.getHistory(e,t).then(function(e){if(!e)return!1;var t=[];return r=e,e.forEach(function(e){return t.push(e.isbn13)}),n.getProductUserData(t,"line")}).then(function(e){return!(!e||!r.length)&&(r.forEach(function(t){var n=e[t.isbn13]||{};t.lastReadPath=""+c.baseUrl+t.path,n.lastRead&&(t.lastReadPath+="/"+n.lastRead),n.price&&(t.price=n.price)}),r)})},getBatchedHistory:function(e,n){if(e<=this.HISTORY_MAX_LIMIT)return this.getLastReadProducts(e,n);for(var r=[],i=n,a=this.HISTORY_MAX_LIMIT;e>0;)r.push(this.getLastReadProducts(a,i)),i+=this.HISTORY_MAX_LIMIT,e-=this.HISTORY_MAX_LIMIT,a=e>this.HISTORY_MAX_LIMIT?this.HISTORY_MAX_LIMIT:e;return t.all(r).then(function(e){return e.filter(function(e){return!!e}).reduce(function(e,t){return e.concat(t)},[])})},updateProductLastReadCache:function(e,t){var n=h.getProduct(e);n&&(n.lastRead=t,h.updateProduct(e,n));var r=h.productUserRelatedCacheName;[e+"-full",e+"-line"].forEach(function(e){var n=s.getCachedItem(r,e);n&&(n.lastRead=t,s.setCachedItem(r,e,n))})},getContent:function(e,i,o,c){f.debug("getContent(isbn, chapter, section, productType)",e,i,o,c),f.debug("Product Service Version is ",2);var u=void 0;"book"===c?u=a.isEntitledToProduct(e):"video"===c&&(u=t.resolve(!1));var d=void 0,h=void 0,p="chapter"===o?i:o,v="products/"+e+"/"+i+"/"+p;if("book"===c){var g=s.getCachedItem("bookContentCache",v);g&&(f.info("got product from cache:",v,"string"==typeof g?g.substr(0,20):g),h=g.isTruncatedContent,d=t.resolve(g.contentData))}if(!d){var m=l.hasJwtAuth();d=n.microserviceRequest("products","v1",v,"GET",{},m).then(function(e){if(f.debug("got response:",e),!e)throw new Error("No content");if("video"===c){var t={file:e.data,type:"mp4"};return e.captions&&(f.debug("Found Captions",e.captions),t.captions=e.captions),t}var r={config:{headers:{"Content-type":"text/html"}}};return h=e.data.indexOf("truncated")>-1,n.get(e.data,r)}).then(function(e){if(f.info("got content data: ","string"==typeof e?e.substr(0,20):e),!e)throw new Error("No content data");return"book"===c&&(f.info("set book item in cache for path: ",v),s.setCachedItem("bookContentCache",v,{contentData:e,isTruncatedContent:h})),e}).catch(function(e){if(f.error("getContent error for path:",v,e),"video"===c&&e&&(403===e.httpStatus||400===e.httpStatus))return null;throw e})}return t.all([d,u]).then(function(e){var t=r(e,2),n=t[0],i=t[1];return"video"===c&&(i=!(!n||!n.file)),{isTruncatedContent:h,content:n,entitled:i}}).catch(function(e){return f.error("getContent $q.all error for path:",v,e),!1})},deleteProductContentCache:function(e){s.deleteCachedItemStartingWith("bookContentCache",c.getDrupalApiUrl()+"/users/me/products/"+e)},completeSection:function(e,t,r,i){var a=t!==r?t+"/"+r:t,o={productId:e,sectionId:a,timeSpent:i};return n.microserviceRequest("usersPacktlib","v2","users/me/completed","PUT",o,!0,!1,!1,!1,{queueOffline:!0}).then(function(e){return e.data})},updateUserProductCompletedSectionCache:function(e,t,n,r){var i=h.productUserRelatedCacheName,a=e+"-full",o=s.getCachedItem(i,a);if(o){if(o.completedSections[t]?o.completedSections[t].includes(n)||o.completedSections[t].push(n):o.completedSections[t]=[n],r)o.completedSections[t]?o.completedSections[t].includes(n)||o.completedSections[t].push(n):o.completedSections[t]=[n];else if(o.completedSections[t]){var c=o.completedSections[t].indexOf(n);c>-1&&o.completedSections[t].splice(c,1)}s.setCachedItem(i,a,o)}},getCuratedProductList:function(e,t,r){var i=e||"all",a={limit:t||6,offset:r||0};return n.sendRequestV2(!1,a,"GET","products/lists/"+i,!1,{cacheName:"nonUserRelatedCache"})},getAddBookmarkAlert:function(e){return e+' has been added to your <a href="'+c.getPath("newBookmarks")+'">Bookmarks</a>'},getRemoveBookmarkAlert:function(e){return e+' has been removed from your <a href="'+c.getPath("newBookmarks")+'">Bookmarks</a>'},getAddPurchaseAlert:function(e){return e+' has been added to your <a href="'+c.getPath("newPurchases")+'">Purchases</a>'},getSubscriptionProductData:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t?"products/rates/volume/"+e:"products/rates/"+e;return n.microserviceRequest("subscriptionsV2","v1",r,"GET",{},!1,{cacheName:"nonUserRelatedCache"}).then(function(e){if(e&&e.data&&e.data.length&&Object.keys(e.data[0]).length)return e.data[0];throw{status:404,data:{message:"Product not found."}}})},getSectionCountFromToc:function(e){return e&&e.length?e.reduce(function(e,t){return t&&t.children&&(e+=t.children.length),e},0):0},getProductsMetadata:function(e){var n=this,r=e.map(function(e){return n.getProductMetadata(e)});return t.all(r).then(function(e){if(!e||!e.length)throw new Error("Failed to fetch products metadata.");return e})},getProductsSummary:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"line",i=arguments[2];if(!e||!e.length)return t.resolve([]);var a=[],o=e,s=o.reduce(function(e,t){var i="products/"+t+"/summary",o=n.getProductSummaryFromCache(i,r);return o?e[t]=o:a.push(t),e},{});if(!a.length){var u=o.map(function(e){return s[e]});return t.resolve(u)}var l=void 0,d=a.map(function(e){return n.getFullProductSummary(e,i)});return t.all(d).then(function(e){if(!e||!e.length)throw new Error("Failed to fetch products summary.");var t=[];return l=e.map(function(e){var n={},r=e.type,i=e.category,a=e.authors;return r&&(n.type="s"===r[r.length-1]?r.substr(0,r.length-1):r),i&&(n.category=i.replace(/-/g,"_").replace(/&/g,"and")),n.type&&n.category&&(n.baseUrl=c.baseUrl+"/"+n.type+"/"+n.category+"/"+e.productId),a&&a.forEach(function(e){t.find(function(t){return t===e})||t.push(e)}),Object.assign({},e,n)}),n.getAuthorsData(t,i)}).then(function(e){if(!e)return l;var t=e.reduce(function(e,t){return e[t.id]=t,e},{});l.forEach(function(e){if(e.authors){var n=e.authors.map(function(e){return t[e]}).filter(function(e){return!!e});e.authors=n}});var i=l.reduce(function(e,t){var i="products/"+t.productId+"/summary";return n.setProductSummaryInCache(i,r,t),e[t.productId]=t,e},{});return Object.assign(i,s),o.map(function(e){return i[e]})})},getFullProductSummary:function(e,t){var r="https://static.packt-cdn.com/products/"+e+"/summary",i={config:{timeout:t}};return n.get(r,i)},getProductSummaryFromCache:function(e,t){if("line"===t){var n=e+"-line",r=s.getCachedItem("nonUserRelatedCache",n);if(r)return r}var i=e+"-full";return s.getCachedItem("nonUserRelatedCache",i)||!1},setProductSummaryInCache:function(e,t,n){if("line"===t){n.about=null,n.features=null,n.learn=null,n.authors&&n.authors.length&&(n.authors=n.authors.map(function(e){return{id:e.id,author:e.author}}));var r=e+"-line";return s.setCachedItem("nonUserRelatedCache",r,n),n}if("full"===t){var i=e+"-full";s.setCachedItem("nonUserRelatedCache",i,n);var a=e+"-line";return s.getCachedItem("nonUserRelatedCache",a)&&s.deleteCachedItem("nonUserRelatedCache",a),n}},getAuthorsData:function(e,n){var r=this,i=e.map(function(e){return r.getAuthorDetails(e,n).catch(function(){return!1})});return t.all(i).then(function(e){return e.filter(function(e){return!!e})})},getAuthorDetails:function(e,t){var r="https://static.packt-cdn.com/authors/"+e,i={config:{timeout:t}};return n.get(r,i)},transformSummaryData:function(e){return(Array.isArray(e)?e:[e]).map(function(e){var t=Object.assign({},e);return t.type="book"===e.type?"books":"videos",t.imagePath=e.coverImage,t.path=e.baseUrl?e.baseUrl.replace("",""):"",t.seoCategory=o.getSeoCategory(e.category),e.authors&&e.authors.length&&(t.authorList=e.authors.filter(function(e){return!!e.author}).map(function(e){return e.author})),e.publicationDate&&"string"==typeof e.publicationDate&&(t.publicationDate=new Date(e.publicationDate).getTime()),t})}};return h}])},function(e,t,n){"use strict";angular.module("PacktUnlimited.services").factory("spinnerService",["$rootScope",function(e){var t={activeSpinners:[],activeFullWidthSpinner:[],showSpinner:!1,addActiveSpinner:function(n){t.activeSpinners.push(1),n&&t.activeFullWidthSpinner.push(1),t.setSpinnerType(),e.showSpinner=!0},removeActiveSpinner:function(n){t.activeSpinners.pop(),e.showSpinner=t.activeSpinners.length>0,n&&t.activeFullWidthSpinner.pop(),t.setSpinnerType()},setSpinnerType:function(){e.spinnerType=t.activeFullWidthSpinner.length>0?"full-width":""},resetSpinner:function(){t.activeSpinners=[],t.activeFullWidthSpinner=[],t.showSpinner=!1}};return t}])},function(e,t,n){"use strict";angular.module("PacktUnlimited.services").factory("subscriptionService",["$q","httpService","cacheService","utilitiesService","userService","alertService","invoiceService",function(e,t,n,r,i,a,o){var s=this,c=this;this.multiMonthPricingModels=["Annual","Eighteen_Months","Two_Years"],this.pricingModel={month:{name:"Monthly",value:"Month",count:1},annual:{name:"Annual",value:"Annual",count:12},eighteenMonths:{name:"18 Months",value:"Eighteen_Months",count:18},twentyFourMonths:{name:"24 Months",value:"Two_Years",count:24}},this.featuresList=[{id:1,name:"Unlimited eBook access",isAvailableFor:["basic","pro"]},{id:2,name:"Unlimited video access",isAvailableFor:["basic","pro"]},{id:3,name:"Skill management",isAvailableFor:["basic","pro"]},{id:4,name:"Code file downloads",isAvailableFor:["basic","pro"]},{id:5,name:"Early access content",isAvailableFor:["pro"]},{id:6,name:"One DRM-free eBook or video download every month",isAvailableFor:["pro"]},{id:7,name:"Learning progress tracker",isAvailableFor:["pro"]}];var u=function(e){return t.microserviceRequest("subscriptions","v1","users/me/payment-methods","GET",{default:e||!1},!0,{cacheName:"generalUserRelatedCache",cache404:!0})};return this.getTaxesFromMicroservice=function(){return t.microserviceRequest("subscriptions","v1","taxrates","GET",null,!1,{cacheName:"nonUserRelatedCache"})},this.getTaxForCountryOrZone=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c.getTaxesFromMicroservice().then(function(n){var r=void 0;if((r=e.length>2?n.data.find(function(t){return e===t.countryName}):n.data.find(function(t){return e===t.countryIso2}))&&r.zones){var i=void 0;i=t.length>2?r.zones.find(function(e){return t===e.zoneName}):r.zones.find(function(e){return t===e.zoneIso2}),i&&(r=i)}return r&&r.rate?r.rate:0})},this.clearGetPaymentMethodsCache=function(){n.deleteCachedItemStartingWith("generalUserRelatedCache","https://subscriptions-api.packtpub.com/v1/users/me/payment-methods")},this.clearGetSubscriptionCache=function(){n.deleteCachedItemStartingWith("generalUserRelatedCache","https://subscriptions-api.packtpub.com/v1/users/me/subscriptions")},this.getUserSubscriptions=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.microserviceRequest("subscriptions","v1","users/me/subscriptions","GET",{active:e},!0,{cacheName:"generalUserRelatedCache",cache404:!0})},this.getMonthlyLearning=function(){return this.getUserSubscriptions(!0).then(function(e){if(!e||!e.data.length)return!1;var n=new Date(e.data[0].contractEffectiveDate).getTime()/1e3;return t.microserviceRequest("usersPacktlib","v2","users/me/tracker/monthly?subscriptionStartDate="+n,"GET",{},!0).then(function(e){return!!(e&&e.data&&e.data.results)&&e.data.results})})},this.updateUserSubscriptionStatus=function(e,n){return t.microserviceRequest("subscriptions","v1","users/me/subscriptions/"+e,"POST",{packtSubscriptionStatus:n},!0,{})},this.upgradeUserSubscription=function(e,n){return t.microserviceRequest("subscriptions","v1","users/me/subscriptions/"+e,"POST",{ratePlanId:n},!0,{}).then(function(e){if("success"!==e.status)throw new Error("Subscription could not be upgraded")}).then(c.clearUserSubscriptionCache).then(c.clearGetSubscriptionCache).then(o.clearInvoicesCache).then(i.clearAllUserData)},this.unsetUserSubscriptions=function(){n.deleteCachedPromise("users/me/subscriptions")},this.getSubscriberAccount=function(){return t.microserviceRequest("subscriptions","v1","users/me","GET",{},!0,{cacheName:"generalUserRelatedCache",cache404:!0}).catch(function(e){if(404===e.httpStatus||401===e.httpStatus)return!1;throw e})},this.createSubscriberAccount=function(e){return t.microserviceRequest("subscriptions","v1","users/me","POST",e,!0)},this.updateSubscriberAccount=function(e){return t.microserviceRequest("subscriptions","v1","users/me","PATCH",e,!0)},this.createSubscription=function(e,n){var r=void 0;return t.microserviceRequest("subscriptions","v1","users/me/subscriptions","POST",{ratePlanId:e,freeTrial:n},!0).then(function(e){if(r=e,"success"===r.status)return i.clearAllUserData(),c.clearUserSubscriptionCache()}).then(function(){return r})},this.getSubscriptionFeatures=function(e){var t=[],n=JSON.parse(e);return n&&Array.isArray(n.features)&&(t=n.features),t},this.getPaymentMethods=function(e){return e?u(e).then(function(e){if("success"!==e.status){if(404===e.httpStatus)return{};throw new Error(e.data)}if(e.data.paypal){var t=e.data.paypal.find(function(e){return e.defaultPaymentMethod});if(t)return Object.assign(t,{cardType:"paypal"})}if(e.data.creditCards){var n=e.data.creditCards.find(function(e){return e.defaultPaymentMethod});if(n)return n}return{}}):u()},this.createPaypalBillingAgreementURL=function(){return t.microserviceRequest("subscriptions","v1","billing/agreements/url","POST",{},!0)},this.createPaypalBillingAgreementId=function(e){return t.microserviceRequest("subscriptions","v1","billing/agreements","POST",{token:e},!0)},this.createHostedPage=function(e){return t.microserviceRequest("subscriptions","v1","billing/hosted-pages","POST",{hostedPageId:e},!0)},this.buildGeneralSubscriptionUserData=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a={billingAddress:{firstName:t.firstName||"",lastName:t.lastName||"",address1:t.billingStreet1||"",address2:t.billingStreet2||"",city:t.billingCity||"",state:t.billingZone||"",country:t.billingCountry||"",zipCode:t.billingPostalCode||"",personalEmail:t.mail||""},name:t.firstName+" "+t.lastName||""};return t.billingCountry?(i||(a.currency=n||""),r.getCountryFromId(t.billingCountry).then(function(e){if(e&&e.name&&(a.billingAddress.country=e.name,t.billingZone))return r.getCountryZoneFromId(t.billingCountry,t.billingZone)}).then(function(e){return e&&(a.billingAddress.state=e.name),a})):e.resolve(a)},this.hasZuoraAccount=function(){return c.getSubscriberAccount().then(function(e){return!!e&&"success"===e.status})},this.clearUserSubscriptionCache=function(){return t.sendRequestV2(!0,{},"DELETE","users/me/subscriptions/caches",!1,{})},this.getZuoraSubscriptionId=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Array.isArray({pro:[{term:"annual",id:"2c92a0ff5ccf5955015ce56c432b6a84"},{term:"monthly",freeTrialLength:30,id:"2c92a0ff5ccf5955015ce56c433a6a89"},{term:"monthly",freeTrialLength:14,id:"2c92a0fd5fe284cd015fe42d83f0492d"}],basic:[{term:"annual",discountPercentage:50,id:"2c92a0fc5d8298f5015dbd58492f75c2"}]}[e]))return null;var r={pro:[{term:"annual",id:"2c92a0ff5ccf5955015ce56c432b6a84"},{term:"monthly",freeTrialLength:30,id:"2c92a0ff5ccf5955015ce56c433a6a89"},{term:"monthly",freeTrialLength:14,id:"2c92a0fd5fe284cd015fe42d83f0492d"}],basic:[{term:"annual",discountPercentage:50,id:"2c92a0fc5d8298f5015dbd58492f75c2"}]}[e].find(function(e){return e.term===t&&e.freeTrialLength===n.freeTrialLength&&e.discountPercentage===n.discountPercentage});return r&&r.id?r.id:null},this.hasLegacySubscription=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s.getUserSubscriptions(e).then(function(e){if(Array.isArray(e.data)&&e.data.length>0){var t=e.data.find(function(e){return e.legacySubscriptionId});if(t)return t.legacySubscriptionId}return!1}).catch(function(){return!1})},this.cancelLegacySubscription=function(e){return t.sendRequestV2(!0,{},"POST","users/me/subscriptions/"+e+"/cancellations",!1,{})},this.handleSubscriptionsRequestError=function(e){var t="Sorry, there's been a problem. Please retry or get in touch with us!";e&&(e.message?t=e.message:"string"==typeof e.data&&(t=e.data)),a.addAlert(t,"danger")},this.getAvailableSubscriptions=function(e,n){return t.microserviceRequest("subscriptions","v1","products/rates","GET",{limit:e,offset:n},!0,{cacheName:"nonUserRelatedCache",cache404:!0})},this.canUpgrade=function(t){return!t||t.stackedRatePlans||"active"!==t.subscriptionStatus?e.resolve(!1):o.getInvoices(1).then(function(e){var n=e.data.invoices[0];if(n&&n.totalAmount>0&&0!==n.balance)throw new Error("Can't upgrade subscription");if(null!==t.legacySubscriptionId&&!s.canUpgradeLegacy(t))throw new Error("Can't upgrade subscription");return c.getAvailableSubscriptions()}).then(function(e){if(e){var n=0;return e.data.results.forEach(function(e){e.weighting>n&&(n=e.weighting)}),t.weighting<n}throw new Error("Can't upgrade subscription")}).catch(function(){return!1})},this.canUpgradeLegacy=function(e){var t=new Date(e.renewalDate).getTime(),n=new Date,i=r.addMonths(n,12).getTime(),a=t<=i,o=t>n.getTime();return a&&o},this.toMonthlyPriceFromAnnual=function(e){return(e/12).toFixed(2)},this.toMonthlyPriceFromEighteenMonth=function(e){return(e/18).toFixed(2)},this.toMonthlyPriceFromTwentyFourMonths=function(e){return(e/24).toFixed(2)},this.filterSubscriptionsByWeight=function(e,t){return e.filter(function(e){return e.weighting>t})},this.sortSubscriptionsByWeight=function(e,t){switch(t){case"DESC":return e.sort(function(e,t){return t.weighting-e.weighting});default:return e.sort(function(e,t){return e.weighting-t.weighting})}},this.groupSubscriptionsByType=function(e){var t={basic:[],pro:[],exclusive:[]};return e.forEach(function(e){var n=e.productName.toLowerCase(),r=e.pricing.pricingModel;n.indexOf("subscription")>=0?r===c.pricingModel.eighteenMonths.value||r===c.pricingModel.twentyFourMonths.value?t.exclusive.push(e):t.pro.push(e):n.indexOf("subscription")<0&&t.basic.push(e)}),t},this.getMonthlyPrice=function(e,t){switch(e){case s.pricingModel.annual.value:return s.toMonthlyPriceFromAnnual(t);case s.pricingModel.eighteenMonths.value:return s.toMonthlyPriceFromEighteenMonth(t);case s.pricingModel.twentyFourMonths.value:return s.toMonthlyPriceFromTwentyFourMonths(t);default:return t}},this.getPriceDescription=function(e){return e.pricingModel===s.pricingModel.month.value?""+e.currencySymbol+e.price+" a month":""+e.currencySymbol+e.price+" ("+e.currencySymbol+e.monthlyPrice+" a month)"},this.isMultiMonthSubscription=function(e){return s.multiMonthPricingModels.indexOf(e)>-1},this.getSubscriptionTypeName=function(e){var t=Object.keys(s.pricingModel).find(function(t){return s.pricingModel[t].value===e});return s.pricingModel[t].name},this.getSubscriptionMonthCount=function(e){var t=Object.keys(s.pricingModel).find(function(t){return s.pricingModel[t].value===e});return s.pricingModel[t].count},this}])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){"ngInject";r(this,e),this.httpService=t,this.techListJsonUrl="https://static.packt-cdn.com/tech/tech.json"}return e.$inject=["httpService"],i(e,[{key:"getAllTech",value:function(){var e={config:{timeout:1e4},cacheName:"nonUserRelatedCache"};return this.httpService.get("https://static.packt-cdn.com/tech/tech-list.json",e).then(function(e){return e})}},{key:"getTechList",value:function(){return this.httpService.sendRequestV2(!1,[],"GET","tech/categories",!1,{cacheName:"nonUserRelatedCache"})}},{key:"getTechPage",value:function(e){var t=e.replace(/ /g,"+");return this.httpService.sendRequestV2(!1,[],"GET","tech/"+t+"/categories",!1,{cacheName:"nonUserRelatedCache"})}},{key:"getTechPageData",value:function(e){var t={config:{timeout:1e4},cacheName:"nonUserRelatedCache"},n="https://static.packt-cdn.com/tech/"+e+".json";return this.httpService.get(n,t).then(function(e){return e})}}]),e}();a.$inject=["httpService"],t.default=a,angular.module("PacktUnlimited.services").service("techService",a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a){"ngInject";r(this,e),this.httpService=n,this.userService=a,this.authService=t,this.newslettersService=i}return e.$inject=["authService","httpService","newslettersService","userService"],i(e,[{key:"checkTimedUnlockActive",value:function(){return this.httpService.microserviceRequest("timedUnlock","v0","timed-unlock/current","GET",!1,!1,{cachePromiseName:"timed-unlock/current"}).then(function(e){var t=Object.assign(e);return t.data[0].endAt=t.data[0].endAt.replace("T23:59:59.999Z","T00:00:00.000Z"),t})}},{key:"claimTimedUnlock",value:function(){var e=this,t=void 0,n=!0,r=void 0;return this.httpService.microserviceRequest("timedUnlock","v0","timed-unlock/users/me","POST",{},!0).then(function(){return e.userService.getMetaData()}).then(function(n){return t=n,e.newslettersService.getUsersNewsletters().catch(function(){return!1})}).then(function(t){return t&&t.length||(n=!1),r=t||[],["da990d125b"].forEach(function(e){r.includes(e)||(n=!1,r.push(e))}),e.checkTimedUnlockActive()}).then(function(i){var a={listId:"c970747b22",mergeFields:{userId:t.uuid,firstName:t.name.firstName,lastName:t.name.lastName,source:"Subscription - Time Unlock",unlockEnd:i.data[0].endAt}};return n||(a.interests=r.map(function(e){return{id:e,status:!0}})),e.newslettersService.updateNewsletterProfile(a)})}},{key:"autoLogin",value:function(){return this.userService.clearAllUserData(),this.httpService.getNewAccessToken()}},{key:"showModal",value:function(){this.authService.setCookie("timed_unlock_live","true",3)}},{key:"hideModal",value:function(){this.authService.setCookie("timed_unlock_live","false",3)}},{key:"getShowModal",value:function(){var e=!0;return"false"===this.authService.getCookie("timed_unlock_live")&&(e=!1),e}}]),e}();a.$inject=["authService","httpService","newslettersService","userService"],t.default=a,angular.module("PacktUnlimited.services").service("timedUnlockService",a)},function(e,t,n){"use strict";"function"==typeof Symbol&&Symbol.iterator;angular.module("PacktUnlimited.services").factory("userService",["$location","$q","$rootScope","$route","$window","alertService","authService","cacheService","configService","httpService","logManager","navigationService","newslettersService","utilitiesService",function(e,t,n,r,i,a,o,s,c,u,l,d,f,h){var p=this,v=l.create("user-service"),g=this;g.SAVED_PRODUCTS_MAX_LIMIT=20,g.productUserRelatedCacheName="productUserRelatedIsbnMapCache",g.showMissingUserDetailsAlert=!0;var m={bookmark:!1,collection:!1,purchased:!1,totalHistory:!1};return this.setHistoryCount=function(e){m.totalHistory=e},this.clearUserCaches=function(){s.deleteCache("bookContentCache"),s.deleteCache("productUserRelatedIsbnMapCache"),s.deleteCache("generalUserRelatedCache")},this.getHistoryCount=function(){return m.totalHistory},this.getFreeTokens=function(){return g.getMetaData().then(function(e){return!!e&&(e.freeTokens||0)})},this.updateUserPreferences=function(e){return u.microserviceRequest("usersPacktlib","v2","users/me/preferences/packtlib","PATCH",e,!0,!1,!1,!1,{queueOffline:!0}).then(g.unsetMetaData)},this.createUserPreferences=function(e){return u.microserviceRequest("usersPacktlib","v2","users/me/preferences/packtlib","PUT",e,!0,!1,!1,!1,{queueOffline:!0})},this.loginRequest=function(e){return o.unsetAuthentication(),e.username=e.email,delete e.email,u.microserviceRequest("auth","v1","users/tokens","POST",e,!1).then(function(e){return o.setAuthenticationCookies(e.data.access,e.data.refresh),n.$emit("user:authenticated"),e.data})},this.logout=function(){v.debug("Logging out"),n.$emit("user:logout"),v.debug("navigationService.resetPreviousPage"),d.resetPreviousPage(),v.debug("authService.unsetAuthentication"),o.unsetAuthentication(),v.debug("cacheService.destroyAllCaches"),s.destroyAllCaches(),v.debug("httpService.initializePromises"),u.initializePromises(),v.debug("Remove nightmode class"),document.body.classList.remove("nightmode");var t="login",i=c.getPath(t);v.debug("Try Redirect to ",i),p.checkSamePath(e.path(),i)?(v.debug("Redirecting to:",i),e.path(i)):(v.debug("Already on ",i," reloading"),r.reload())},this.checkSamePath=function(e,t){return"function"==typeof e.replace&&"function"==typeof e.replace&&(""===c.basePath?e===t:e.replace(c.basePath,"")===t.replace(c.basePath,""))},this.registerUser=function(e){o.unsetAuthentication();var r=void 0,i={username:e.email,password:e.password,passwordConfirmation:e.confirmPassword,recaptcha:e.recaptcha};return u.microserviceRequest("auth","v1","users","POST",i,!1).then(function(e){return o.setAuthenticationCookies(e.data.access,e.data.refresh),r=e.data,r.userId}).then(function(n){var r=[],i={firstName:e.firstName,lastName:e.lastName},a=u.microserviceRequest("users","v1","users/"+n,"PUT",i,!0);if(r.push(a),e.newsletters){var o=["da990d125b"].map(function(e){return{id:e,status:!0}}),s=f.updateUsersInterests("c970747b22",o).catch(function(){return!1});r.push(s)}return t.all(r)}).then(function(){return n.$emit("user:authenticated"),r})},this.getLastViewed=function(){return u.sendRequestV2(!0,{limit:1,offset:0},"GET","users/me/history",!1,{cacheName:"generalUserRelatedCache"})},this.resetHistoryCache=function(){s.deleteCachedPromiseStartingWith("users/me/history","microservice/")},this.userIsSubscribed=function(){return this.getMetaData().then(function(e){return!!e.subscription&&e.subscription.subscribed})},this.getAllCounts=function(){return u.sendRequestV2(!0,{},"GET","users/me/summaries",!1,{cachePromiseName:"users/me/summaries"}).then(function(e){if(e)return e})},this.getMetaData=function(){return u.microserviceRequest("users","v1","users/me/metadata","GET",!1,!0,{cachePromiseName:"users/me/metadata"}).catch(function(e){if(e&&404===e.httpStatus&&g.showMissingUserDetailsAlert){a.addAlert('\n                    Your account is missing some details.\n                    Please go <a href="'+"https://account.packtpub.com/account/details"+'">here</a> to update them.\n                  ',"danger"),g.showMissingUserDetailsAlert=!1}throw e})},this.unsetMetaData=function(){s.deleteCachedPromise("users/me/metadata"),s.deleteCachedPromise("microservice/users/me/metadata")},this.unsetUserDetails=function(){s.deleteCachedPromise("users/me/details"),s.deleteCachedPromise("microservice/users/me/details")},this.hasFeature=function(e){return g.getMetaData().then(function(t){return!(!t||!t.maptFeatures.length)&&!!t.maptFeatures.find(function(t){return t===e})})},this.getBuyButtonVisibility=function(){return g.getMetaData().then(function(e){return!e||(!e.subscription.subscribed||e.subscription.freeTrial)&&!e.freeTokens})},this.clearAllUserData=function(){g.clearUserCaches(),s.deleteCachedPromiseStartingWith("users/me"),s.deleteCachedPromiseStartingWith("microservice/users/me")},this.resetPassword=function(e,t,n){return u.microserviceRequest("auth","v1","users/reset-password","POST",{token:e,password:t,passwordConfirmation:n},!1)},this.sendForgottenPasswordEmail=function(e){return u.microserviceRequest("auth","v1","users/password-reset-tokens","POST",{username:e,origin:"mapt"},!1)},this.getUserDetails=function(){return u.microserviceRequest("users","v1","users/me","GET",{},!0,{cachePromiseName:"users/me/details"}).then(function(e){return!!(e&&e.data&&e.data.length)&&e.data[0]}).then(function(e){if(!e)return!1;var t={firstName:e.firstName,lastName:e.lastName,mail:o.getEmailFromAccessToken()};if(e.addresses&&e.addresses.length){var n=e.addresses.find(function(e){return!0===e.defaultBilling});n||(n=e.addresses[0]);var r={billingAddressId:n.id,billingCity:n.city,billingCompany:n.company,billingCountry:n.country,billingPostalCode:n.postalCode,billingStreet1:n.line1,billingStreet2:n.line2,billingZone:n.state};Object.assign(t,r)}return t.billingCountry?h.getCountryAndZoneNamesFromIds(t.billingCountry,t.billingZone).then(function(e){return t.billingCountry=e.countryId,t.billingZone=e.zoneId,t}):t})},this.updateUserDetails=function(e){var n={username:e.mail},r=!1;o.getEmailFromAccessToken()!==e.mail?(r=!0,n.oldPassword=e.currentPassword,e.password||e.confirmPassword?(n.password=e.password,n.passwordConfirmation=e.confirmPassword):(n.password=e.currentPassword,n.passwordConfirmation=e.currentPassword)):e.password!==e.currentPassword&&(r=!0,n.oldPassword=e.currentPassword,n.password=e.password,n.passwordConfirmation=e.confirmPassword);var i=[];if(r){var a=u.microserviceRequest("auth","v1","users/me/credentials","POST",n,!0).then(function(e){var t=e.data,n=t.access,r=t.refresh;return o.setAuthenticationCookies(n,r),u.getNewAccessToken()});i.push(a)}var s=u.microserviceRequest("users","v1","users/me","PATCH",{firstName:e.firstName,lastName:e.lastName},!0);i.push(s);var c=g.createOrUpdateAddress(e);return i.push(c),t.all(i).then(function(e){return g.unsetUserDetails(),g.unsetMetaData(),e})},this.createOrUpdateAddress=function(e){var t=Object.assign({},e),n=h.getCountryFromId(e.billingCountry).then(function(e){t.billingCountry=e.name});return e.billingZone&&(n=n.then(function(){return h.getCountryZoneFromId(e.billingCountry,e.billingZone)}).then(function(e){t.billingZone=e.name})),n=t.billingAddressId?n.then(function(){return g.updateUserAddress(t.billingAddressId,t)}):n.then(function(){return g.createUserAddress(t)})},this.createUserAddress=function(e){var t={contactName:e.firstName+" "+e.lastName,company:e.billingCompany,line1:e.billingStreet1,line2:e.billingStreet2,city:e.billingCity,state:e.billingZone,postalCode:e.billingPostalCode,country:e.billingCountry};return u.microserviceRequest("users","v1","users/me/addresses","POST",t,!0).then(function(e){return g.unsetMetaData(),g.unsetUserDetails(),e})},this.updateUserAddress=function(e,t){var n={contactName:t.firstName+" "+t.lastName,company:t.billingCompany,line1:t.billingStreet1,line2:t.billingStreet2,city:t.billingCity,state:t.billingZone,postalCode:t.billingPostalCode,country:t.billingCountry};return u.microserviceRequest("users","v1","users/me/addresses/"+e,"PATCH",n,!0).then(function(e){return g.unsetMetaData(),g.unsetUserDetails(),e})},this.hasEarlyAccess=function(e){var t=e.entitlement,n=g.userIsSubscribed();return!!t||!n},this.getUserCompletedSectionCount=function(e){var t=Array.isArray(e)?e:[e],n=JSON.stringify(t);return u.microserviceRequest("usersPacktlib","v2","users/me/sections/completed-counts?isbns="+n,"GET",!0,{cacheName:"generalUserRelatedCache"}).then(function(e){return e.data})},this.isEntitledToProduct=function(e){return!!o.hasJwtAuth()&&u.microserviceRequest("entitlements","v1","users/me/products/"+e+"/entitlement","GET",{},!0,{cacheName:"generalUserRelatedCache"}).then(function(e){return!!(e&&e.data&&e.data[0].entitlement)&&e.data[0].entitlement}).catch(function(e){return v.error("isEntitledToProduct error:",e),!1})},this.getEntitlementSources=function(e){return o.hasJwtAuth()?u.microserviceRequest("entitlements","v1","users/me/products/"+e+"/entitlement","GET",{},!0,{cacheName:"generalUserRelatedCache"}).then(function(e){return e&&e.data?e.data[0].ownerships.map(function(e){return e.entitlementSource}):[]}).catch(function(e){return v.error("getEntitlementSources error:",e),[]}):t.resolve([])},this.getCreditsCount=function(){var e="microservice/users/me/credits/balance",n=s.getCachedPromise(e);return n?(v.debug("got credits balance from cache"),n):(v.debug("getting credits balance from server"),u.microserviceRequest("credits","v1","users/me/credits/balance","GET",{},!0).then(function(n){if(n&&n.data&&n.data.message>0){v.debug("saving credits balance to cache");var r=t.resolve(n.data.message);return s.cachePromise(e,r),n.data.message}return 0}).catch(function(e){if(e&&2000014===e.errorCode)return 0;throw e}))},this.hasPaidSubscription=function(){return p.getMetaData().then(function(e){return!!e.subscription&&(e.subscription.subscribed&&!e.subscription.freeTrial)})},this}])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(259),a=n(257),o=r(a);angular.module("PacktUnlimited.services").factory("utilitiesService",["$filter","$q","httpService",function(e,t,n){return{convertDate:function(t,n){var r=void 0,i=n||"MMM yyyy";return t?(r=new Date(t),e("date")(r,i)):""},blobToDataUrl:function(e){return t(function(t,n){var r=new FileReader;r.onloadend=function(){t(r.result)},r.onerror=function(e){n(e.target.error.code)},r.readAsDataURL(e)})},unsetNightmode:function(){$("body").removeClass("nightmode")},formatArrayForUrl:function(e,t){var n=[];return t.forEach(function(t){n.push(e+"[]="+t)}),n.join("&")},getCountries:function(){var e={config:{timeout:1e4},cacheName:"nonUserRelatedCache"};return n.get("https://static.packt-cdn.com/countries/countries.json",e)},getCountryIdByName:function(e){return this.getCountries().then(function(t){var n=t.find(function(t){return t.name===e});return!!n&&n.id})},getZoneIdByName:function(e,t){return this.getCountryFromId(e).then(function(e){var n=e.zones.find(function(e){return e.name===t});return!!n&&n.id})},getCountryAndZoneNamesFromIds:function(e,t){var n=this,r=void 0,i=void 0,a=this.getCountryIdByName(e).then(function(e){r=e});return t&&(a=a.then(function(){return n.getZoneIdByName(r,t)}).then(function(e){i=e})),a.then(function(){return{countryId:r,zoneId:i}})},getCountryFromIso2Code:function(e){return this.getCountries().then(function(t){return t.find(function(t){return t.iso2Code===e})})},getCountryFromId:function(e){return this.getCountries().then(function(t){return t.find(function(t){return t.id===parseInt(e)})})},getCountryZoneFromId:function(e,t){return this.getCountryZones(e).then(function(e){return e.find(function(e){return e.id===parseInt(t)})})},getCountryIsoFromId:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?this.getCountryFromId(e).then(function(e){return t?e.iso3Code:e.iso2Code}):""},getCountryZoneNameFromId:function(e,t){return e&&t?this.getCountryZoneFromId(e,t).then(function(e){return e.name}):""},getCountryZoneIsoFromId:function(e,t){return e&&t?this.getCountryZoneFromId(e,t).then(function(e){return e.code}):""},getCountryZones:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getCountryFromId(e).then(function(e){return e.zones})},getCurrencySymbol:function(e){return{GBP:"&pound;",USD:"&#36;",EUR:"&euro;",AUD:"AU&#36;",INR:"&#8377;"}[e]||""},getStoreUrlByCurrency:function(e){var t={GBP:"/gb",EUR:"/eu",AUD:"/au",INR:"/in"};return t[e]?"https://www.packtpub.com"+t[e]:"https://www.packtpub.com"},getPaymentIcon:function(e){switch(e){case"americanexpress":return"fa-cc-amex";case"paypal":return"fa-paypal";default:return"fa-cc-"+e}},getCountryFromIp:function(){return n.microserviceRequest("geolocation","v1","location","GET",!1,!1,{cacheName:"nonUserRelatedCache"}).then(function(e){return e.countryCode})},getCurrencyAndCountryFromIp:function(){var e=this,t={};return this.getCountryFromIp().then(function(n){return t.country=n,e.getCurrencyFromCountry(n)}).then(function(e){return t.currency=e,t})},getCurrencyFromCountry:function(e){return this.getCountryFromIso2Code(e).then(function(e){return e.currency})},roundUp:function(e,t){var n=Math.pow(10,t),r=e*n;return Math.round(r)/n},calculateTaxes:function(e,t){var n=this.roundUp(e,2),r=this.roundUp(n*t,2);return{subTotal:n,taxTotal:r,taxPercentage:100*t,total:n+r}},addDays:function(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n},addMonths:function(e,t){var n=new Date(e);return n.setMonth(n.getMonth()+t),n},substractDays:function(e,t){var n=new Date(e);return n.setDate(n.getDate()-t),n},getPriceWithTax:function(e,t){if(t){return this.calculateTaxes(e,t).total.toFixed(2)}return e.toFixed(2)},isPacktEmail:function(e){return/@packtpub\.com$/.test(e)},debounce:function(e,t,n){var r=void 0;return function(){var i=this,a=arguments,o=function(){r=null,n||e.apply(i,a)},s=n&&!r;return clearTimeout(r),r=setTimeout(o,t),!!s&&e.apply(i,a)}},getSeoCategory:function(e){return e&&"string"==typeof e?e.trim().toLowerCase().replace(/\s/g,"_").replace(/&/,"and"):""},sortByWeight:function(e){return e.sort(function(e,t){return parseInt(e.weight,10)-parseInt(t.weight,10)})},getDaysLeftThisMonth:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()-e.getDate()},truncateText:function(e,t){if(e.length<=t)return e;var n=e.indexOf("<em>"),r=e.indexOf("</em>");return-1===n||t<n||t>r?e.substring(0,t)+"&hellip;":e.substring(0,r+5)+"&hellip;"},canonicalSectionTitle:function(e){return e?e.toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]/gi,"-").replace(/-+/g,"-").replace(/-*$/,""):""},removeHtmlFromString:o.default,convertTagToBadge:i.TagToBadge,removeTag:i.RemoveTag,getCurrencyFromCountryId:function(e){var t=this;return this.getCountryIsoFromId(e).then(function(e){return t.getCurrencyFromCountry(e)})},getCurrencyFromCountryName:function(e){var t=this;return this.getCountryIdByName(e).then(function(e){return t.getCurrencyFromCountryId(e)})}}}])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){"ngInject";r(this,e)}return i(e,[{key:"hasAtLeastOneLowercaseLetter",value:function(e){return!(!e||"string"!=typeof e)&&/[a-z]/g.test(e)}},{key:"hasAtLeastOneUppercaseLetter",value:function(e){return!(!e||"string"!=typeof e)&&/[A-Z]/g.test(e)}},{key:"hasAtLeastOneNumber",value:function(e){return!(!e||"string"!=typeof e)&&/[0-9]/g.test(e)}},{key:"hasMinLength",value:function(e,t){return!(!e||"string"!=typeof e)&&e.length>=t}},{key:"areRulesSatisfied",value:function(e){return Object.keys(e).every(function(t){return!0===e[t]})}}]),e}();angular.module("PacktUnlimited.services").service("validationService",a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){"ngInject";r(this,e),this.httpService=t,this.utilitiesService=n}return e.$inject=["httpService","utilitiesService"],i(e,[{key:"validateVatNumber",value:function(e){var t=e.replace(/\s+/g,"");return this.httpService.microserviceRequest("vatLayerProxy","v1","validate/"+t,"GET",!1,!0,{cachePromiseName:"validate/"+e}).then(function(e){return e.data})}},{key:"getVatExemptionStatusByCountryId",value:function(e){return this.utilitiesService.getCountryFromId(e).then(function(e){return!!e&&!!e.businessesExemptFromVat})}}]),e}();angular.module("PacktUnlimited.services").service("vatService",a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.categoryWeightings={programming:1,"web-development":2,data:3,mobile:4,"game-development":5,"iot-and-hardware":6,security:7,"cloud-and-networking":8}}return i(e,[{key:"getCategoryWeight",value:function(e){return this.categoryWeightings[e]}}]),e}();a.$inject=[],t.default=a,angular.module("PacktUnlimited.services").service("weightingService",a)},function(e,t,n){"use strict";function r(e,t,n){return this.render=function(t,n,r){return e(function(e){Z.render(t,n,r),Z.runAfterRender(function(){return e()})})},this.getParameters=function(e){var n=this.getHostedPageIdByCurrency(e);return t.createHostedPage(n).then(function(e){return e.data})},this.getHostedPageIdByCurrency=function(e){return[{currencies:["GBP","INR","AUD"],id:"2c92a0fd668ad08d0166b07852065e9a"},{currencies:["USD"],id:"2c92a0ff668ad0b10166b087f9043da2"},{currencies:["EUR"],id:"2c92a008668ad0a40166b0832dac11de"}].find(function(t){return t.currencies.includes(e)}).id},this.convertToZuoraObject=function(e){var t="";return n.getCountryIsoFromId(e.billingCountry).then(function(r){return r&&(t=r),n.getCountryZoneNameFromId(e.billingCountry,e.billingZone)}).then(function(n){return{billingAddress:{firstName:e.firstName||"",lastName:e.lastName||"",address1:e.billingStreet1||"",address2:e.billingStreet2||"",city:e.billingCity||"",state:n||"",country:t,zipCode:e.billingPostalCode||"",personalEmail:e.mail||""},name:(e.firstName?e.firstName:"")+" "+(e.lastName?e.lastName:"")}})},this}r.$inject=["$q","subscriptionService","utilitiesService"],angular.module("PacktUnlimited.services").service("zuoraService",r),r.$inject=["$q","subscriptionService","utilitiesService"]},function(e,t,n){"use strict";!function(){if("undefined"!=typeof self&&self.Prism&&self.document){var e=n(712),t=Prism.plugins.addCopyBtn=function(t){function n(e){var t=setTimeout(function(){e.textContent="Copy",clearTimeout(t)},1e3)}var r=t.element.parentElement,i=r.parentElement,a=i.querySelector(".toolbar"),o=t.element.dataset.codeIndex,s="copyCode-"+o,c=document.createElement("button");c.id=s,c.className="copy-to-clipboard",c.textContent="Copy",a?a.appendChild(c):(a=document.createElement("div"),a.className="toolbar clearfix",a.appendChild(c),i.insertBefore(a,i.firstChild));var u=new e("#"+s,{text:function(){return t.code}});u.on("success",function(e){e.trigger.textContent="Copied to clipboard!",n(e.trigger)}),u.on("error",function(e){e.trigger.textContent="Press Ctrl+C to copy",n(e.trigger)})};Prism.hooks.add("complete",t)}}()},function(e,t,n){"use strict"},function(e,t,n){"use strict";!function(e,t,n,r,i,a){e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:"982604",hjsv:"6"},i=t.getElementsByTagName("head")[0],a=t.createElement("script"),a.async=1,a.src=n+e._hjSettings.hjid+r+e._hjSettings.hjsv,i.appendChild(a)}(window,document,"//static.hotjar.com/c/hotjar-",".js?sv="),window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var n=t.forceSSL||"https:"===document.location.protocol,r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=(n?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i);for(var a=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},o=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],s=0;s<o.length;s++)heap[o[s]]=a(o[s])},heap.load("34805961")},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
 * Bootstrap v3.3.4 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(e){function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.4",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){o.detach().trigger("closed.bs.alert").remove()}var i=e(this),a=i.attr("data-target");a||(a=i.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var o=e(a);t&&t.preventDefault(),o.length||(o=i.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),function(e){function t(t){return this.each(function(){var i=e(this),a=i.data("bs.button"),o="object"==(void 0===t?"undefined":r(t))&&t;a||i.data("bs.button",a=new n(this,o)),"toggle"==t?a.toggle():t&&a.setState(t)})}var n=function t(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.4",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",a=r.data();t+="Text",null==a.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==a[t]?this.options[t]:a[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(e){function t(t){return this.each(function(){var i=e(this),a=i.data("bs.carousel"),o=e.extend({},n.DEFAULTS,i.data(),"object"==(void 0===t?"undefined":r(t))&&t),s="string"==typeof t?t:o.slide;a||i.data("bs.carousel",a=new n(this,o)),"number"==typeof t?a.to(t):s?a[s]():o.interval&&a.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t);if(("prev"==e&&0===n||"next"==e&&n==this.$items.length-1)&&!this.options.wrap)return t;var r="prev"==e?-1:1,i=(n+r)%this.$items.length;return this.$items.eq(i)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),a=r||this.getItemForDirection(t,i),o=this.interval,s="next"==t?"left":"right",c=this;if(a.hasClass("active"))return this.sliding=!1;var u=a[0],l=e.Event("slide.bs.carousel",{relatedTarget:u,direction:s});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(a)]);d&&d.addClass("active")}var f=e.Event("slid.bs.carousel",{relatedTarget:u,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(a.addClass(t),a[0].offsetWidth,i.addClass(s),a.addClass(s),i.one("bsTransitionEnd",function(){a.removeClass([t,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger(f)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(f)),o&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var a=function(n){var r,i=e(this),a=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(a.hasClass("carousel")){var o=e.extend({},a.data(),i.data()),s=i.attr("data-slide-to");s&&(o.interval=!1),t.call(a,o),s&&a.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),function(e){function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),a=n.data("bs.collapse"),o=e.extend({},i.DEFAULTS,n.data(),"object"==(void 0===t?"undefined":r(t))&&t);!a&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),a||n.data("bs.collapse",a=new i(this,o)),"string"==typeof t&&a[t]()})}var i=function t(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.$trigger=e('[data-toggle="collapse"][href="#'+n.id+'"],[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.4",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(t=r.data("bs.collapse"))&&t.transitioning)){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){r&&r.length&&(n.call(r,"hide"),t||r.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var c=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[o](this.$element[0][c])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return r.call(this);this.$element[n](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var a=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=a,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var a=t(i),o=a.data("bs.collapse"),s=o?"toggle":i.data();n.call(a,s)})}(jQuery),function(e){function t(t){t&&3===t.which||(e(i).remove(),e(a).each(function(){var r=e(this),i=n(r),a={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",a)),t.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",a)))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",a='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.4",o.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var a=n(i),o=a.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var s={relatedTarget:this};if(a.trigger(r=e.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},o.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),o=i.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&i.find(a).trigger("focus"),r.trigger("click");var s=" li:not(.disabled):visible a",c=i.find('[role="menu"]'+s+', [role="listbox"]'+s);if(c.length){var u=c.index(t.target);38==t.which&&u>0&&u--,40==t.which&&u<c.length-1&&u++,~u||(u=0),c.eq(u).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,o.prototype.toggle).on("keydown.bs.dropdown.data-api",a,o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',o.prototype.keydown)}(jQuery),function(e){function t(t,i){return this.each(function(){var a=e(this),o=a.data("bs.modal"),s=e.extend({},n.DEFAULTS,a.data(),"object"==(void 0===t?"undefined":r(t))&&t);o||a.data("bs.modal",o=new n(this,s)),"string"==typeof t?o[t](i):s.show&&o.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(a)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){if(this.ignoreBackdropClick)return void(this.ignoreBackdropClick=!1);e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),a=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},a.data(),r.data());r.is("a")&&n.preventDefault(),a.one("show.bs.modal",function(e){e.isDefaultPrevented()||a.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(a,o,this)})}(jQuery),function(e){function t(t){return this.each(function(){var i=e(this),a=i.data("bs.tooltip"),o="object"==(void 0===t?"undefined":r(t))&&t;!a&&/destroy|hide/.test(t)||(a||i.data("bs.tooltip",a=new n(this,o)),"string"==typeof t&&a[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),a=i.length;a--;){var o=i[a];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",c="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(c+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,a=this.tip(),o=this.getUID(this.type);this.setContent(),a.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&a.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,u=c.test(s);u&&(s=s.replace(c,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);var l=this.getPosition(),d=a[0].offsetWidth,f=a[0].offsetHeight;if(u){var h=s,p=this.options.container?e(this.options.container):this.$element.parent(),v=this.getPosition(p);s="bottom"==s&&l.bottom+f>v.bottom?"top":"top"==s&&l.top-f<v.top?"bottom":"right"==s&&l.right+d>v.width?"left":"left"==s&&l.left-d<v.left?"right":s,a.removeClass(h).addClass(s)}var g=this.getCalculatedOffset(s,l,d,f);this.applyPlacement(g,s);var m=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,a=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),t.top=t.top+o,t.left=t.left+s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var c=r[0].offsetWidth,u=r[0].offsetHeight;"top"==n&&u!=a&&(t.top=t.top+a-u);var l=this.getViewportAdjustedDelta(n,t,c,u);l.left?t.left+=l.left:t.top+=l.top;var d=/top|bottom/.test(n),f=d?2*l.left-i+c:2*l.top-a+u,h=d?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(f,r[0][h],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&a.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,a=e(this.$tip),o=e.Event("hide.bs."+this.type);if(this.$element.trigger(o),!o.isDefaultPrevented())return a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var a=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,o,s,a)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var a=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-a-o.scroll,c=t.top+a-o.scroll+r;s<o.top?i.top=o.top-s:c>o.top+o.height&&(i.top=o.top+o.height-c)}else{var u=t.left-a,l=t.left+a+n;u<o.left?i.left=o.left-u:l>o.width&&(i.left=o.left+o.width-l)}return i},n.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},n.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),function(e){function t(t){return this.each(function(){var i=e(this),a=i.data("bs.popover"),o="object"==(void 0===t?"undefined":r(t))&&t;!a&&/destroy|hide/.test(t)||(a||i.data("bs.popover",a=new n(this,o)),"string"==typeof t&&a[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.4",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),function(e){function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),a=i.data("bs.scrollspy"),o="object"==(void 0===n?"undefined":r(n))&&n;a||i.data("bs.scrollspy",a=new t(this,o)),"string"==typeof n&&a[n]()})}t.VERSION="3.3.4",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),a=/^#./.test(i)&&e(i);return a&&a.length&&a.is(":visible")&&[[a[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,a=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return o!=(e=a[a.length-1])&&this.activate(e);if(o&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)o!=a[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(a[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),a=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(a),t.trigger(o),!o.isDefaultPrevented()&&!a.isDefaultPrevented()){var s=e(r);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function a(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var o=r.find("> .active"),s=i&&e.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);o.length&&s?o.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a(),o.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),function(e){function t(t){return this.each(function(){var i=e(this),a=i.data("bs.affix"),o="object"==(void 0===t?"undefined":r(t))&&t;a||i.data("bs.affix",a=new n(this,o)),"string"==typeof t&&a[t]()})}var n=function t(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.4",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),a=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return i<n&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=a.top)&&"bottom":!(i+o<=e-r)&&"bottom";var s=null==this.affixed,c=s?i:a.top,u=s?o:t;return null!=n&&i<=n?"top":null!=r&&c+u>=e-r&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,a=i.top,o=i.bottom,s=e(document.body).height();"object"!=(void 0===i?"undefined":r(i))&&(o=a=i),"function"==typeof a&&(a=i.top(this.$element)),"function"==typeof o&&(o=i.bottom(this.$element));var c=this.getState(s,t,a,o);if(this.affixed!=c){null!=this.unpin&&this.$element.css("top","");var u="affix"+(c?"-"+c:""),l=e.Event(u+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=c,this.unpin="bottom"==c?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(u).trigger(u.replace("affix","affixed")+".bs.affix")}"bottom"==c&&this.$element.offset({top:s-t-o})}};var i=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery)},function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/**
 * @license
 * Fuse - Lightweight fuzzy-search
 *
 * Copyright (c) 2012-2016 Kirollos Risk <kirollos@gmail.com>.
 * All Rights Reserved. Apache Software License 2.0
 *
 * Licensed under the Apache License, Version 2.0 (the "License")
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(a){function o(){console.log.apply(console,arguments)}function s(e,t){var n;this.list=e,this.options=t=t||{};for(n in d)d.hasOwnProperty(n)&&("boolean"==typeof d[n]?this.options[n]=n in t?t[n]:d[n]:this.options[n]=t[n]||d[n])}function c(e,t,n){var r,i,a,o,s,l;if(t){if(a=t.indexOf("."),-1!==a?(r=t.slice(0,a),i=t.slice(a+1)):r=t,null!==(o=e[r])&&void 0!==o)if(i||"string"!=typeof o&&"number"!=typeof o)if(u(o))for(s=0,l=o.length;l>s;s++)c(o[s],i,n);else i&&c(o,i,n);else n.push(o)}else n.push(e);return n}function u(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e,t){t=t||{},this.options=t,this.options.location=t.location||l.defaultOptions.location,this.options.distance="distance"in t?t.distance:l.defaultOptions.distance,this.options.threshold="threshold"in t?t.threshold:l.defaultOptions.threshold,this.options.maxPatternLength=t.maxPatternLength||l.defaultOptions.maxPatternLength,this.pattern=t.caseSensitive?e:e.toLowerCase(),this.patternLen=e.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var d={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:l,sortFn:function(e,t){return e.score-t.score},getFn:c,keys:[],verbose:!1,tokenize:!1,matchAllTokens:!1,tokenSeparator:/ +/g,minMatchCharLength:1,findAllMatches:!1};s.VERSION="2.6.0",s.prototype.set=function(e){return this.list=e,e},s.prototype.search=function(e){return this.options.verbose&&o("\nSearch term:",e,"\n"),this.pattern=e,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort(),this._format()},s.prototype._prepareSearchers=function(){var e=this.options,t=this.pattern,n=e.searchFn,r=t.split(e.tokenSeparator),i=0,a=r.length;if(this.options.tokenize)for(this.tokenSearchers=[];a>i;i++)this.tokenSearchers.push(new n(r[i],e));this.fullSeacher=new n(t,e)},s.prototype._startSearch=function(){var e,t,n,r,i=this.options,a=i.getFn,o=this.list,s=o.length,c=this.options.keys,u=c.length,l=null;if("string"==typeof o[0])for(n=0;s>n;n++)this._analyze("",o[n],n,n);else for(this._keyMap={},n=0;s>n;n++)for(l=o[n],r=0;u>r;r++){if("string"!=typeof(e=c[r])){if(t=1-e.weight||1,this._keyMap[e.name]={weight:t},e.weight<=0||e.weight>1)throw new Error("Key weight has to be > 0 and <= 1");e=e.name}else this._keyMap[e]={weight:1};this._analyze(e,a(l,e,[]),l,n)}},s.prototype._analyze=function(e,t,n,r){var i,a,s,c,l,d,f,h,p,v,g,m,y,b,_,w=this.options,S=!1;if(void 0!==t&&null!==t){a=[];var k=0;if("string"==typeof t){if(i=t.split(w.tokenSeparator),w.verbose&&o("---------\nKey:",e),this.options.tokenize){for(b=0;b<this.tokenSearchers.length;b++){for(h=this.tokenSearchers[b],w.verbose&&o("Pattern:",h.pattern),p=[],m=!1,_=0;_<i.length;_++){v=i[_],g=h.search(v);var T={};g.isMatch?(T[v]=g.score,S=!0,m=!0,a.push(g.score)):(T[v]=1,this.options.matchAllTokens||a.push(1)),p.push(T)}m&&k++,w.verbose&&o("Token scores:",p)}for(c=a[0],d=a.length,b=1;d>b;b++)c+=a[b];c/=d,w.verbose&&o("Token score average:",c)}f=this.fullSeacher.search(t),w.verbose&&o("Full text score:",f.score),l=f.score,void 0!==c&&(l=(l+c)/2),w.verbose&&o("Score average:",l),y=!this.options.tokenize||!this.options.matchAllTokens||k>=this.tokenSearchers.length,w.verbose&&o("Check Matches",y),(S||f.isMatch)&&y&&(s=this.resultMap[r],s?s.output.push({key:e,score:l,matchedIndices:f.matchedIndices}):(this.resultMap[r]={item:n,output:[{key:e,score:l,matchedIndices:f.matchedIndices}]},this.results.push(this.resultMap[r])))}else if(u(t))for(b=0;b<t.length;b++)this._analyze(e,t[b],n,r)}},s.prototype._computeScore=function(){var e,t,n,r,i,a,s,c,u,l=this._keyMap,d=this.results;for(this.options.verbose&&o("\n\nComputing score:\n"),e=0;e<d.length;e++){for(n=0,r=d[e].output,i=r.length,c=1,t=0;i>t;t++)a=r[t].score,s=l?l[r[t].key].weight:1,u=a*s,1!==s?c=Math.min(c,u):(n+=u,r[t].nScore=u);d[e].score=1===c?n/i:c,this.options.verbose&&o(d[e])}},s.prototype._sort=function(){var e=this.options;e.shouldSort&&(e.verbose&&o("\n\nSorting...."),this.results.sort(e.sortFn))},s.prototype._format=function(){var e,t,n,r,i,a=this.options,s=a.getFn,c=[],u=this.results,l=a.include;for(a.verbose&&o("\n\nOutput:\n\n",u),r=a.id?function(e){u[e].item=s(u[e].item,a.id,[])[0]}:function(){},i=function(e){var t,n,r,i,a,o=u[e];if(l.length>0){if(t={item:o.item},-1!==l.indexOf("matches"))for(r=o.output,t.matches=[],n=0;n<r.length;n++)i=r[n],a={indices:i.matchedIndices},i.key&&(a.key=i.key),t.matches.push(a);-1!==l.indexOf("score")&&(t.score=u[e].score)}else t=o.item;return t},t=0,n=u.length;n>t;t++)r(t),e=i(t),c.push(e);return c},l.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},l.prototype._calculatePatternAlphabet=function(){var e={},t=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]|=1<<this.pattern.length-t-1;return e},l.prototype._bitapScore=function(e,t){var n=e/this.patternLen,r=Math.abs(this.options.location-t);return this.options.distance?n+r/this.options.distance:r?1:n},l.prototype.search=function(e){var t,n,r,i,a,o,s,c,u,l,d,f,h,p,v,g,m,y,b,_,w,S,k,T=this.options;if(e=T.caseSensitive?e:e.toLowerCase(),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};if(this.patternLen>T.maxPatternLength){if(y=e.match(new RegExp(this.pattern.replace(T.tokenSeparator,"|"))),b=!!y)for(w=[],t=0,S=y.length;S>t;t++)k=y[t],w.push([e.indexOf(k),k.length-1]);return{isMatch:b,score:b?.5:1,matchedIndices:w}}for(i=T.findAllMatches,a=T.location,r=e.length,o=T.threshold,s=e.indexOf(this.pattern,a),_=[],t=0;r>t;t++)_[t]=0;for(-1!=s&&(o=Math.min(this._bitapScore(0,s),o),-1!=(s=e.lastIndexOf(this.pattern,a+this.patternLen))&&(o=Math.min(this._bitapScore(0,s),o))),s=-1,g=1,m=[],l=this.patternLen+r,t=0;t<this.patternLen;t++){for(c=0,u=l;u>c;)this._bitapScore(t,a+u)<=o?c=u:l=u,u=Math.floor((l-c)/2+c);for(l=u,d=Math.max(1,a-u+1),f=i?r:Math.min(a+u,r)+this.patternLen,h=Array(f+2),h[f+1]=(1<<t)-1,n=f;n>=d;n--)if(v=this.patternAlphabet[e.charAt(n-1)],v&&(_[n-1]=1),h[n]=0===t?(h[n+1]<<1|1)&v:(h[n+1]<<1|1)&v|(p[n+1]|p[n])<<1|1|p[n+1],h[n]&this.matchmask&&(g=this._bitapScore(t,n-1),o>=g)){if(o=g,s=n-1,m.push(s),!(s>a))break;d=Math.max(1,2*a-s)}if(this._bitapScore(t+1,a)>o)break;p=h}return w=this._getMatchedIndices(_),{isMatch:s>=0,score:0===g?.001:g,matchedIndices:w}},l.prototype._getMatchedIndices=function(e){for(var t,n=[],r=-1,i=-1,a=0,o=e.length;o>a;a++)t=e[a],t&&-1===r?r=a:t||-1===r||(i=a-1,i-r+1>=this.options.minMatchCharLength&&n.push([r,i]),r=-1);return e[a-1]&&a-1-r+1>=this.options.minMatchCharLength&&n.push([r,a-1]),n},"object"==i(t)?e.exports=s:void 0!==(r=function(){return s}.call(t,n,t,e))&&(e.exports=r)}()},function(e,t,n){"use strict";(function(e){var r,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! jQuery v1.11.3 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(t,n){"object"==a(e)&&"object"==a(e.exports)?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:void 0,function(o,s){function c(e){var t="length"in e&&e.length,n=le.type(e);return"function"!==n&&!le.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}function u(e,t,n){if(le.isFunction(t))return le.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return le.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ye.test(t))return le.filter(t,e,n);t=le.filter(t,e)}return le.grep(e,function(e){return le.inArray(e,t)>=0!==n})}function l(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function d(e){var t=Ce[e]={};return le.each(e.match(Te)||[],function(e,n){t[n]=!0}),t}function f(){_e.addEventListener?(_e.removeEventListener("DOMContentLoaded",h,!1),o.removeEventListener("load",h,!1)):(_e.detachEvent("onreadystatechange",h),o.detachEvent("onload",h))}function h(){(_e.addEventListener||"load"===event.type||"complete"===_e.readyState)&&(f(),le.ready())}function p(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(Ae,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:$e.test(n)?le.parseJSON(n):n)}catch(e){}le.data(e,t,n)}else n=void 0}return n}function v(e){var t;for(t in e)if(("data"!==t||!le.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function g(e,t,n,r){if(le.acceptData(e)){var i,o,s=le.expando,c=e.nodeType,u=c?le.cache:e,l=c?e[s]:e[s]&&s;if(l&&u[l]&&(r||u[l].data)||void 0!==n||"string"!=typeof t)return l||(l=c?e[s]=ee.pop()||le.guid++:s),u[l]||(u[l]=c?{}:{toJSON:le.noop}),("object"==(void 0===t?"undefined":a(t))||"function"==typeof t)&&(r?u[l]=le.extend(u[l],t):u[l].data=le.extend(u[l].data,t)),o=u[l],r||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[le.camelCase(t)]=n),"string"==typeof t?null==(i=o[t])&&(i=o[le.camelCase(t)]):i=o,i}}function m(e,t,n){if(le.acceptData(e)){var r,i,a=e.nodeType,o=a?le.cache:e,s=a?e[le.expando]:le.expando;if(o[s]){if(t&&(r=n?o[s]:o[s].data)){le.isArray(t)?t=t.concat(le.map(t,le.camelCase)):t in r?t=[t]:(t=le.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!v(r):!le.isEmptyObject(r))return}(n||(delete o[s].data,v(o[s])))&&(a?le.cleanData([e],!0):ce.deleteExpando||o!=o.window?delete o[s]:o[s]=null)}}}function y(){return!0}function b(){return!1}function _(){try{return _e.activeElement}catch(e){}}function w(e){var t=Be.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function S(e,t){var n,r,i=0,o=a(e.getElementsByTagName)!==Pe?e.getElementsByTagName(t||"*"):a(e.querySelectorAll)!==Pe?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||le.nodeName(r,t)?o.push(r):le.merge(o,S(r,t));return void 0===t||t&&le.nodeName(e,t)?le.merge([e],o):o}function k(e){je.test(e.type)&&(e.defaultChecked=e.checked)}function T(e,t){return le.nodeName(e,"table")&&le.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function C(e){return e.type=(null!==le.find.attr(e,"type"))+"/"+e.type,e}function x(e){var t=Ke.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function E(e,t){for(var n,r=0;null!=(n=e[r]);r++)le._data(n,"globalEval",!t||le._data(t[r],"globalEval"))}function P(e,t){if(1===t.nodeType&&le.hasData(e)){var n,r,i,a=le._data(e),o=le._data(t,a),s=a.events;if(s){delete o.handle,o.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)le.event.add(t,n,s[n][r])}o.data&&(o.data=le.extend({},o.data))}}function $(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ce.noCloneEvent&&t[le.expando]){i=le._data(t);for(r in i.events)le.removeEvent(t,r,i.handle);t.removeAttribute(le.expando)}"script"===n&&t.text!==e.text?(C(t).text=e.text,x(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ce.html5Clone&&e.innerHTML&&!le.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&je.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function A(e,t){var n,r=le(t.createElement(e)).appendTo(t.body),i=o.getDefaultComputedStyle&&(n=o.getDefaultComputedStyle(r[0]))?n.display:le.css(r[0],"display");return r.detach(),i}function O(e){var t=_e,n=it[e];return n||(n=A(e,t),"none"!==n&&n||(rt=(rt||le("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(rt[0].contentWindow||rt[0].contentDocument).document,t.write(),t.close(),n=A(e,t),rt.detach()),it[e]=n),n}function I(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function R(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=mt.length;i--;)if((t=mt[i]+n)in e)return t;return r}function L(e,t){for(var n,r,i,a=[],o=0,s=e.length;s>o;o++)r=e[o],r.style&&(a[o]=le._data(r,"olddisplay"),n=r.style.display,t?(a[o]||"none"!==n||(r.style.display=""),""===r.style.display&&Re(r)&&(a[o]=le._data(r,"olddisplay",O(r.nodeName)))):(i=Re(r),(n&&"none"!==n||!i)&&le._data(r,"olddisplay",i?n:le.css(r,"display"))));for(o=0;s>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?a[o]||"":"none"));return e}function j(e,t,n){var r=ht.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function D(e,t,n,r,i){for(var a=n===(r?"border":"content")?4:"width"===t?1:0,o=0;4>a;a+=2)"margin"===n&&(o+=le.css(e,n+Ie[a],!0,i)),r?("content"===n&&(o-=le.css(e,"padding"+Ie[a],!0,i)),"margin"!==n&&(o-=le.css(e,"border"+Ie[a]+"Width",!0,i))):(o+=le.css(e,"padding"+Ie[a],!0,i),"padding"!==n&&(o+=le.css(e,"border"+Ie[a]+"Width",!0,i)));return o}function N(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,a=at(e),o=ce.boxSizing&&"border-box"===le.css(e,"boxSizing",!1,a);if(0>=i||null==i){if(i=ot(e,t,a),(0>i||null==i)&&(i=e.style[t]),ct.test(i))return i;r=o&&(ce.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+D(e,t,n||(o?"border":"content"),r,a)+"px"}function U(e,t,n,r,i){return new U.prototype.init(e,t,n,r,i)}function M(){return setTimeout(function(){yt=void 0}),yt=le.now()}function F(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Ie[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function B(e,t,n){for(var r,i=(Tt[t]||[]).concat(Tt["*"]),a=0,o=i.length;o>a;a++)if(r=i[a].call(n,t,e))return r}function q(e,t,n){var r,i,a,o,s,c,u,l=this,d={},f=e.style,h=e.nodeType&&Re(e),p=le._data(e,"fxshow");n.queue||(s=le._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--,le.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=le.css(e,"display"),"inline"===("none"===u?le._data(e,"olddisplay")||O(e.nodeName):u)&&"none"===le.css(e,"float")&&(ce.inlineBlockNeedsLayout&&"inline"!==O(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",ce.shrinkWrapBlocks()||l.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],_t.exec(i)){if(delete t[r],a=a||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!p||void 0===p[r])continue;h=!0}d[r]=p&&p[r]||le.style(e,r)}else u=void 0;if(le.isEmptyObject(d))"inline"===("none"===u?O(e.nodeName):u)&&(f.display=u);else{p?"hidden"in p&&(h=p.hidden):p=le._data(e,"fxshow",{}),a&&(p.hidden=!h),h?le(e).show():l.done(function(){le(e).hide()}),l.done(function(){var t;le._removeData(e,"fxshow");for(t in d)le.style(e,t,d[t])});for(r in d)o=B(h?p[r]:0,r,l),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function H(e,t){var n,r,i,a,o;for(n in e)if(r=le.camelCase(n),i=t[r],a=e[n],le.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(o=le.cssHooks[r])&&"expand"in o){a=o.expand(a),delete e[r];for(n in a)n in e||(e[n]=a[n],t[n]=i)}else t[r]=i}function V(e,t,n){var r,i,a=0,o=kt.length,s=le.Deferred().always(function(){delete c.elem}),c=function(){if(i)return!1;for(var t=yt||M(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,a=1-r,o=0,c=u.tweens.length;c>o;o++)u.tweens[o].run(a);return s.notifyWith(e,[u,a,n]),1>a&&c?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:le.extend({},t),opts:le.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:yt||M(),duration:n.duration,tweens:[],createTween:function(t,n){var r=le.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),l=u.props;for(H(l,u.opts.specialEasing);o>a;a++)if(r=kt[a].call(u,e,l,u.opts))return r;return le.map(l,B,u),le.isFunction(u.opts.start)&&u.opts.start.call(e,u),le.fx.timer(le.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function z(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(Te)||[];if(le.isFunction(n))for(;r=a[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function W(e,t,n,r){function i(s){var c;return a[s]=!0,le.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||o||a[u]?o?!(c=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),c}var a={},o=e===Yt;return i(t.dataTypes[0])||!a["*"]&&i("*")}function G(e,t){var n,r,i=le.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&le.extend(!0,e,n),e}function Y(e,t,n){for(var r,i,a,o,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){c.unshift(o);break}if(c[0]in n)a=c[0];else{for(o in n){if(!c[0]||e.converters[o+" "+c[0]]){a=o;break}r||(r=o)}a=a||r}return a?(a!==c[0]&&c.unshift(a),n[a]):void 0}function Q(e,t,n,r){var i,a,o,s,c,u={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(a=l.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=a,a=l.shift())if("*"===a)a=c;else if("*"!==c&&c!==a){if(!(o=u[c+" "+a]||u["* "+a]))for(i in u)if(s=i.split(" "),s[1]===a&&(o=u[c+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[i]:!0!==u[i]&&(a=s[0],l.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+c+" to "+a}}}return{state:"success",data:t}}function X(e,t,n,r){var i;if(le.isArray(t))le.each(t,function(t,i){n||Jt.test(e)?r(e,i):X(e+"["+("object"==(void 0===i?"undefined":a(i))?t:"")+"]",i,n,r)});else if(n||"object"!==le.type(t))r(e,t);else for(i in t)X(e+"["+i+"]",t[i],n,r)}function J(){try{return new o.XMLHttpRequest}catch(e){}}function K(){try{return new o.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function Z(e){return le.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var ee=[],te=ee.slice,ne=ee.concat,re=ee.push,ie=ee.indexOf,ae={},oe=ae.toString,se=ae.hasOwnProperty,ce={},ue="1.11.3",le=function e(t,n){return new e.fn.init(t,n)},de=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,fe=/^-ms-/,he=/-([\da-z])/gi,pe=function(e,t){return t.toUpperCase()};le.fn=le.prototype={jquery:ue,constructor:le,selector:"",length:0,toArray:function(){return te.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:te.call(this)},pushStack:function(e){var t=le.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return le.each(this,e,t)},map:function(e){return this.pushStack(le.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:re,sort:ee.sort,splice:ee.splice},le.extend=le.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},c=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[c]||{},c++),"object"==(void 0===s?"undefined":a(s))||le.isFunction(s)||(s={}),c===u&&(s=this,c--);u>c;c++)if(null!=(i=arguments[c]))for(r in i)e=s[r],n=i[r],s!==n&&(l&&n&&(le.isPlainObject(n)||(t=le.isArray(n)))?(t?(t=!1,o=e&&le.isArray(e)?e:[]):o=e&&le.isPlainObject(e)?e:{},s[r]=le.extend(l,o,n)):void 0!==n&&(s[r]=n));return s},le.extend({expando:"jQuery"+(ue+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===le.type(e)},isArray:Array.isArray||function(e){return"array"===le.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!le.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==le.type(e)||e.nodeType||le.isWindow(e))return!1;try{if(e.constructor&&!se.call(e,"constructor")&&!se.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(ce.ownLast)for(t in e)return se.call(e,t);for(t in e);return void 0===t||se.call(e,t)},type:function(e){return null==e?e+"":"object"==(void 0===e?"undefined":a(e))||"function"==typeof e?ae[oe.call(e)]||"object":void 0===e?"undefined":a(e)},globalEval:function(e){e&&le.trim(e)&&(o.execScript||function(e){o.eval.call(o,e)})(e)},camelCase:function(e){return e.replace(fe,"ms-").replace(he,pe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r=0,i=e.length,a=c(e);if(n){if(a)for(;i>r&&!1!==t.apply(e[r],n);r++);else for(r in e)if(!1===t.apply(e[r],n))break}else if(a)for(;i>r&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(de,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(c(Object(e))?le.merge(n,"string"==typeof e?[e]:e):re.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(ie)return ie.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;)e[i++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,a=e.length,o=!n;a>i;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i=0,a=e.length,o=c(e),s=[];if(o)for(;a>i;i++)null!=(r=t(e[i],i,n))&&s.push(r);else for(i in e)null!=(r=t(e[i],i,n))&&s.push(r);return ne.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(i=e[t],t=e,e=i),le.isFunction(e)?(n=te.call(arguments,2),r=function(){return e.apply(t||this,n.concat(te.call(arguments)))},r.guid=e.guid=e.guid||le.guid++,r):void 0},now:function(){return+new Date},support:ce}),le.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){ae["[object "+t+"]"]=t.toLowerCase()});var ve=function(e){function t(e,t,n,r){var i,a,o,s,c,u,d,h,p,v;if((t?t.ownerDocument||t:F)!==I&&O(t),t=t||I,n=n||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!r&&L){if(11!==s&&(i=ye.exec(e)))if(o=i[1]){if(9===s){if(!(a=t.getElementById(o))||!a.parentNode)return n;if(a.id===o)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&U(t,a)&&a.id===o)return n.push(a),n}else{if(i[2])return K.apply(n,t.getElementsByTagName(e)),n;if((o=i[3])&&w.getElementsByClassName)return K.apply(n,t.getElementsByClassName(o)),n}if(w.qsa&&(!j||!j.test(e))){if(h=d=M,p=t,v=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=C(e),(d=t.getAttribute("id"))?h=d.replace(_e,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",c=u.length;c--;)u[c]=h+f(u[c]);p=be.test(e)&&l(t.parentNode)||t,v=u.join(",")}if(v)try{return K.apply(n,p.querySelectorAll(v)),n}catch(e){}finally{d||t.removeAttribute("id")}}}return E(e.replace(ce,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>S.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[M]=!0,e}function i(e){var t=I.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),r=e.length;r--;)S.attrHandle[n[r]]=t}function o(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))})})}function l(e){return e&&void 0!==e.getElementsByTagName&&e}function d(){}function f(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=n&&"parentNode"===r,a=q++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,a)}:function(t,n,o){var s,c,u=[B,a];if(o){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,o))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(c=t[M]||(t[M]={}),(s=c[r])&&s[0]===B&&s[1]===a)return u[2]=s[2];if(c[r]=u,u[2]=e(t,n,o))return!0}}}function p(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function v(e,n,r){for(var i=0,a=n.length;a>i;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var a,o=[],s=0,c=e.length,u=null!=t;c>s;s++)(a=e[s])&&(!n||n(a,r,i))&&(o.push(a),u&&t.push(s));return o}function m(e,t,n,i,a,o){return i&&!i[M]&&(i=m(i)),a&&!a[M]&&(a=m(a,o)),r(function(r,o,s,c){var u,l,d,f=[],h=[],p=o.length,m=r||v(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?m:g(m,f,e,s,c),b=n?a||(r?e:p||i)?[]:o:y;if(n&&n(y,b,s,c),i)for(u=g(b,h),i(u,[],s,c),l=u.length;l--;)(d=u[l])&&(b[h[l]]=!(y[h[l]]=d));if(r){if(a||e){if(a){for(u=[],l=b.length;l--;)(d=b[l])&&u.push(y[l]=d);a(null,b=[],u,c)}for(l=b.length;l--;)(d=b[l])&&(u=a?ee(r,d):f[l])>-1&&(r[u]=!(o[u]=d))}}else b=g(b===o?b.splice(p,b.length):b),a?a(null,o,b,c):K.apply(o,b)})}function y(e){for(var t,n,r,i=e.length,a=S.relative[e[0].type],o=a||S.relative[" "],s=a?1:0,c=h(function(e){return e===t},o,!0),u=h(function(e){return ee(t,e)>-1},o,!0),l=[function(e,n,r){var i=!a&&(r||n!==P)||((t=n).nodeType?c(e,n,r):u(e,n,r));return t=null,i}];i>s;s++)if(n=S.relative[e[s].type])l=[h(p(l),n)];else{if(n=S.filter[e[s].type].apply(null,e[s].matches),n[M]){for(r=++s;i>r&&!S.relative[e[r].type];r++);return m(s>1&&p(l),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ce,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&f(e))}l.push(n)}return p(l)}function b(e,n){var i=n.length>0,a=e.length>0,o=function(r,o,s,c,u){var l,d,f,h=0,p="0",v=r&&[],m=[],y=P,b=r||a&&S.find.TAG("*",u),_=B+=null==y?1:Math.random()||.1,w=b.length;for(u&&(P=o!==I&&o);p!==w&&null!=(l=b[p]);p++){if(a&&l){for(d=0;f=e[d++];)if(f(l,o,s)){c.push(l);break}u&&(B=_)}i&&((l=!f&&l)&&h--,r&&v.push(l))}if(h+=p,i&&p!==h){for(d=0;f=n[d++];)f(v,m,o,s);if(r){if(h>0)for(;p--;)v[p]||m[p]||(m[p]=X.call(c));m=g(m)}K.apply(c,m),u&&!r&&m.length>0&&h+n.length>1&&t.uniqueSort(c)}return u&&(B=_,P=y),v};return i?r(o):o}var _,w,S,k,T,C,x,E,P,$,A,O,I,R,L,j,D,N,U,M="sizzle"+1*new Date,F=e.document,B=0,q=0,H=n(),V=n(),z=n(),W=function(e,t){return e===t&&(A=!0),0},G=1<<31,Y={}.hasOwnProperty,Q=[],X=Q.pop,J=Q.push,K=Q.push,Z=Q.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=re.replace("w","w#"),ae="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ce=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(oe),he=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ve=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,_e=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Se=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},ke=function(){O()};try{K.apply(Q=Z.call(F.childNodes),F.childNodes),Q[F.childNodes.length].nodeType}catch(e){K={apply:Q.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},O=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:F;return r!==I&&9===r.nodeType&&r.documentElement?(I=r,R=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",ke,!1):n.attachEvent&&n.attachEvent("onunload",ke)),L=!T(r),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=me.test(r.getElementsByClassName),w.getById=i(function(e){return R.appendChild(e).id=M,!r.getElementsByName||!r.getElementsByName(M).length}),w.getById?(S.find.ID=function(e,t){if(void 0!==t.getElementById&&L){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},S.filter.ID=function(e){var t=e.replace(we,Se);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var t=e.replace(we,Se);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),S.find.TAG=w.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},S.find.CLASS=w.getElementsByClassName&&function(e,t){return L?t.getElementsByClassName(e):void 0},D=[],j=[],(w.qsa=me.test(r.querySelectorAll))&&(i(function(e){R.appendChild(e).innerHTML="<a id='"+M+"'></a><select id='"+M+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&j.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||j.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+M+"-]").length||j.push("~="),e.querySelectorAll(":checked").length||j.push(":checked"),e.querySelectorAll("a#"+M+"+*").length||j.push(".#.+[+~]")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&j.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||j.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),j.push(",.*:")})),(w.matchesSelector=me.test(N=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&i(function(e){w.disconnectedMatch=N.call(e,"div"),N.call(e,"[s!='']:x"),D.push("!=",oe)}),j=j.length&&new RegExp(j.join("|")),D=D.length&&new RegExp(D.join("|")),t=me.test(R.compareDocumentPosition),U=t||me.test(R.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===F&&U(F,e)?-1:t===r||t.ownerDocument===F&&U(F,t)?1:$?ee($,e)-ee($,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,i=0,a=e.parentNode,s=t.parentNode,c=[e],u=[t];if(!a||!s)return e===r?-1:t===r?1:a?-1:s?1:$?ee($,e)-ee($,t):0;if(a===s)return o(e,t);for(n=e;n=n.parentNode;)c.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;c[i]===u[i];)i++;return i?o(c[i],u[i]):c[i]===F?-1:u[i]===F?1:0},r):I},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==I&&O(e),n=n.replace(de,"='$1']"),!(!w.matchesSelector||!L||D&&D.test(n)||j&&j.test(n)))try{var r=N.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,I,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==I&&O(e),U(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==I&&O(e);var n=S.attrHandle[t.toLowerCase()],r=n&&Y.call(S.attrHandle,t.toLowerCase())?n(e,t,!L):void 0;return void 0!==r?r:w.attributes||!L?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(A=!w.detectDuplicates,$=!w.sortStable&&e.slice(0),e.sort(W),A){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return $=null,e},k=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=k(t);return n},S=t.selectors={cacheLength:50,createPseudo:r,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Se),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Se),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=C(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Se).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var a=t.attr(i,e);return null==a?"!="===n:!n||(a+="","="===n?a===r:"!="===n?a!==r:"^="===n?r&&0===a.indexOf(r):"*="===n?r&&a.indexOf(r)>-1:"$="===n?r&&a.slice(-r.length)===r:"~="===n?(" "+a.replace(se," ")+" ").indexOf(r)>-1:"|="===n&&(a===r||a.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var u,l,d,f,h,p,v=a!==o?"nextSibling":"previousSibling",g=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!c&&!s;if(g){if(a){for(;v;){for(d=t;d=d[v];)if(s?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;p=v="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?g.firstChild:g.lastChild],o&&y){for(l=g[M]||(g[M]={}),u=l[e]||[],h=u[0]===B&&u[1],f=u[0]===B&&u[2],d=h&&g.childNodes[h];d=++h&&d&&d[v]||(f=h=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){l[e]=[B,h,f];break}}else if(y&&(u=(t[M]||(t[M]={}))[e])&&u[0]===B)f=u[1];else for(;(d=++h&&d&&d[v]||(f=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++f||(y&&((d[M]||(d[M]={}))[e]=[B,f]),d!==t)););return(f-=i)===r||f%r==0&&f/r>=0}}},PSEUDO:function(e,n){var i,a=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[M]?a(n):a.length>1?(i=[e,e,"",n],S.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=a(e,n),o=i.length;o--;)r=ee(e,i[o]),e[r]=!(t[r]=i[o])}):function(e){return a(e,0,i)}):a}},pseudos:{not:r(function(e){var t=[],n=[],i=x(e.replace(ce,"$1"));return i[M]?r(function(e,t,n,r){for(var a,o=i(e,null,r,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,r,a){return t[0]=e,i(t,null,a,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,Se),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:r(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Se).toLowerCase(),function(t){var n;do{if(n=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===R},focus:function(e){return e===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return ve.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},S.pseudos.nth=S.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[_]=s(_);for(_ in{submit:!0,reset:!0})S.pseudos[_]=c(_);return d.prototype=S.filters=S.pseudos,S.setFilters=new d,C=t.tokenize=function(e,n){var r,i,a,o,s,c,u,l=V[e+" "];if(l)return n?0:l.slice(0);for(s=e,c=[],u=S.preFilter;s;){(!r||(i=ue.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),c.push(a=[])),r=!1,(i=le.exec(s))&&(r=i.shift(),a.push({value:r,type:i[0].replace(ce," ")}),s=s.slice(r.length));for(o in S.filter)!(i=pe[o].exec(s))||u[o]&&!(i=u[o](i))||(r=i.shift(),a.push({value:r,type:o,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):V(e,c).slice(0)},x=t.compile=function(e,t){var n,r=[],i=[],a=z[e+" "];if(!a){for(t||(t=C(e)),n=t.length;n--;)a=y(t[n]),a[M]?r.push(a):i.push(a);a=z(e,b(i,r)),a.selector=e}return a},E=t.select=function(e,t,n,r){var i,a,o,s,c,u="function"==typeof e&&e,d=!r&&C(e=u.selector||e);if(n=n||[],1===d.length){if(a=d[0]=d[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&w.getById&&9===t.nodeType&&L&&S.relative[a[1].type]){if(!(t=(S.find.ID(o.matches[0].replace(we,Se),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(i=pe.needsContext.test(e)?0:a.length;i--&&(o=a[i],!S.relative[s=o.type]);)if((c=S.find[s])&&(r=c(o.matches[0].replace(we,Se),be.test(a[0].type)&&l(t.parentNode)||t))){if(a.splice(i,1),!(e=r.length&&f(a)))return K.apply(n,r),n;break}}return(u||x(e,d))(r,t,!L,n,be.test(e)&&l(t.parentNode)||t),n},w.sortStable=M.split("").sort(W).join("")===M,w.detectDuplicates=!!A,O(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(I.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||a(te,function(e,t,n){var r;return n?void 0:!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(o);le.find=ve,le.expr=ve.selectors,le.expr[":"]=le.expr.pseudos,le.unique=ve.uniqueSort,le.text=ve.getText,le.isXMLDoc=ve.isXML,le.contains=ve.contains;var ge=le.expr.match.needsContext,me=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ye=/^.[^:#\[\.,]*$/;le.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?le.find.matchesSelector(r,e)?[r]:[]:le.find.matches(e,le.grep(t,function(e){return 1===e.nodeType}))},le.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(le(e).filter(function(){for(t=0;i>t;t++)if(le.contains(r[t],this))return!0}));for(t=0;i>t;t++)le.find(e,r[t],n);return n=this.pushStack(i>1?le.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(u(this,e||[],!1))},not:function(e){return this.pushStack(u(this,e||[],!0))},is:function(e){return!!u(this,"string"==typeof e&&ge.test(e)?le(e):e||[],!1).length}});var be,_e=o.document,we=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(le.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:we.exec(e))||!n[1]&&t)return!t||t.jquery?(t||be).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof le?t[0]:t,le.merge(this,le.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:_e,!0)),me.test(n[1])&&le.isPlainObject(t))for(n in t)le.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((r=_e.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return be.find(e);this.length=1,this[0]=r}return this.context=_e,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):le.isFunction(e)?void 0!==be.ready?be.ready(e):e(le):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),le.makeArray(e,this))}).prototype=le.fn,be=le(_e);var Se=/^(?:parents|prev(?:Until|All))/,ke={children:!0,contents:!0,next:!0,prev:!0};le.extend({dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!le(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),le.fn.extend({has:function(e){var t,n=le(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(le.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,a=[],o=ge.test(e)||"string"!=typeof e?le(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&le.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?le.unique(a):a)},index:function(e){return e?"string"==typeof e?le.inArray(this[0],le(e)):le.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(le.unique(le.merge(this.get(),le(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),le.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return le.dir(e,"parentNode")},parentsUntil:function(e,t,n){return le.dir(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return le.dir(e,"nextSibling")},prevAll:function(e){return le.dir(e,"previousSibling")},nextUntil:function(e,t,n){return le.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return le.dir(e,"previousSibling",n)},siblings:function(e){return le.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return le.sibling(e.firstChild)},contents:function(e){return le.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:le.merge([],e.childNodes)}},function(e,t){le.fn[e]=function(n,r){var i=le.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=le.filter(r,i)),this.length>1&&(ke[e]||(i=le.unique(i)),Se.test(e)&&(i=i.reverse())),this.pushStack(i)}});var Te=/\S+/g,Ce={};le.Callbacks=function(e){e="string"==typeof e?Ce[e]||d(e):le.extend({},e);var t,n,r,i,a,o,s=[],c=!e.once&&[],u=function u(d){for(n=e.memory&&d,r=!0,a=o||0,o=0,i=s.length,t=!0;s&&i>a;a++)if(!1===s[a].apply(d[0],d[1])&&e.stopOnFalse){n=!1;break}t=!1,s&&(c?c.length&&u(c.shift()):n?s=[]:l.disable())},l={add:function(){if(s){var r=s.length;!function t(n){le.each(n,function(n,r){var i=le.type(r);"function"===i?e.unique&&l.has(r)||s.push(r):r&&r.length&&"string"!==i&&t(r)})}(arguments),t?i=s.length:n&&(o=r,u(n))}return this},remove:function(){return s&&le.each(arguments,function(e,n){for(var r;(r=le.inArray(n,s,r))>-1;)s.splice(r,1),t&&(i>=r&&i--,a>=r&&a--)}),this},has:function(e){return e?le.inArray(e,s)>-1:!(!s||!s.length)},empty:function(){return s=[],i=0,this},disable:function(){return s=c=n=void 0,this},disabled:function(){return!s},lock:function(){return c=void 0,n||l.disable(),this},locked:function(){return!c},fireWith:function(e,n){return!s||r&&!c||(n=n||[],n=[e,n.slice?n.slice():n],t?c.push(n):u(n)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},le.extend({Deferred:function(e){var t=[["resolve","done",le.Callbacks("once memory"),"resolved"],["reject","fail",le.Callbacks("once memory"),"rejected"],["notify","progress",le.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return le.Deferred(function(n){le.each(t,function(t,a){var o=le.isFunction(e[t])&&e[t];i[a[1]](function(){var e=o&&o.apply(this,arguments);e&&le.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?le.extend(e,r):r}},i={};return r.pipe=r.then,le.each(t,function(e,a){var o=a[2],s=a[3];r[a[1]]=o.add,s&&o.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[a[0]]=function(){return i[a[0]+"With"](this===i?r:this,arguments),this},i[a[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,a=te.call(arguments),o=a.length,s=1!==o||e&&le.isFunction(e.promise)?o:0,c=1===s?e:le.Deferred(),u=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?te.call(arguments):i,r===t?c.notifyWith(n,r):--s||c.resolveWith(n,r)}};if(o>1)for(t=new Array(o),n=new Array(o),r=new Array(o);o>i;i++)a[i]&&le.isFunction(a[i].promise)?a[i].promise().done(u(i,r,a)).fail(c.reject).progress(u(i,n,t)):--s;return s||c.resolveWith(r,a),c.promise()}});var xe;le.fn.ready=function(e){return le.ready.promise().done(e),this},le.extend({isReady:!1,readyWait:1,holdReady:function(e){e?le.readyWait++:le.ready(!0)},ready:function(e){if(!0===e?!--le.readyWait:!le.isReady){if(!_e.body)return setTimeout(le.ready);le.isReady=!0,!0!==e&&--le.readyWait>0||(xe.resolveWith(_e,[le]),le.fn.triggerHandler&&(le(_e).triggerHandler("ready"),le(_e).off("ready")))}}}),le.ready.promise=function(e){if(!xe)if(xe=le.Deferred(),"complete"===_e.readyState)setTimeout(le.ready);else if(_e.addEventListener)_e.addEventListener("DOMContentLoaded",h,!1),o.addEventListener("load",h,!1);else{_e.attachEvent("onreadystatechange",h),o.attachEvent("onload",h);var t=!1;try{t=null==o.frameElement&&_e.documentElement}catch(e){}t&&t.doScroll&&function e(){if(!le.isReady){try{t.doScroll("left")}catch(t){return setTimeout(e,50)}f(),le.ready()}}()}return xe.promise(e)};var Ee,Pe="undefined";for(Ee in le(ce))break;ce.ownLast="0"!==Ee,ce.inlineBlockNeedsLayout=!1,le(function(){var e,t,n,r;(n=_e.getElementsByTagName("body")[0])&&n.style&&(t=_e.createElement("div"),r=_e.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),a(t.style.zoom)!==Pe&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ce.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=_e.createElement("div");if(null==ce.deleteExpando){ce.deleteExpando=!0;try{delete e.test}catch(e){ce.deleteExpando=!1}}e=null}(),le.acceptData=function(e){var t=le.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var $e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ae=/([A-Z])/g;le.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?le.cache[e[le.expando]]:e[le.expando])&&!v(e)},data:function(e,t,n){return g(e,t,n)},removeData:function(e,t){return m(e,t)},_data:function(e,t,n){return g(e,t,n,!0)},_removeData:function(e,t){return m(e,t,!0)}}),le.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=le.data(o),1===o.nodeType&&!le._data(o,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=le.camelCase(r.slice(5)),p(o,r,i[r])));le._data(o,"parsedAttrs",!0)}return i}return"object"==(void 0===e?"undefined":a(e))?this.each(function(){le.data(this,e)}):arguments.length>1?this.each(function(){le.data(this,e,t)}):o?p(o,e,le.data(o,e)):void 0},removeData:function(e){return this.each(function(){le.removeData(this,e)})}}),le.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=le._data(e,t),n&&(!r||le.isArray(n)?r=le._data(e,t,le.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=le.queue(e,t),r=n.length,i=n.shift(),a=le._queueHooks(e,t),o=function(){le.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,o,a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return le._data(e,n)||le._data(e,n,{empty:le.Callbacks("once memory").add(function(){le._removeData(e,t+"queue"),le._removeData(e,n)})})}}),le.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?le.queue(this[0],e):void 0===t?this:this.each(function(){var n=le.queue(this,e,t);le._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&le.dequeue(this,e)})},dequeue:function(e){return this.each(function(){le.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=le.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=le._data(a[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ie=["Top","Right","Bottom","Left"],Re=function(e,t){return e=t||e,"none"===le.css(e,"display")||!le.contains(e.ownerDocument,e)},Le=le.access=function(e,t,n,r,i,a,o){var s=0,c=e.length,u=null==n;if("object"===le.type(n)){i=!0;for(s in n)le.access(e,t,s,n[s],!0,a,o)}else if(void 0!==r&&(i=!0,le.isFunction(r)||(o=!0),u&&(o?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(le(e),n)})),t))for(;c>s;s++)t(e[s],n,o?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):c?t(e[0],n):a},je=/^(?:checkbox|radio)$/i;!function(){var e=_e.createElement("input"),t=_e.createElement("div"),n=_e.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ce.leadingWhitespace=3===t.firstChild.nodeType,ce.tbody=!t.getElementsByTagName("tbody").length,ce.htmlSerialize=!!t.getElementsByTagName("link").length,ce.html5Clone="<:nav></:nav>"!==_e.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),ce.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ce.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ce.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ce.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ce.deleteExpando){ce.deleteExpando=!0;try{delete t.test}catch(e){ce.deleteExpando=!1}}}(),function(){var e,t,n=_e.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(ce[e+"Bubbles"]=t in o)||(n.setAttribute(t,"t"),ce[e+"Bubbles"]=!1===n.attributes[t].expando);n=null}();var De=/^(?:input|select|textarea)$/i,Ne=/^key/,Ue=/^(?:mouse|pointer|contextmenu)|click/,Me=/^(?:focusinfocus|focusoutblur)$/,Fe=/^([^.]*)(?:\.(.+)|)$/;le.event={global:{},add:function(e,t,n,r,i){var o,s,c,u,l,d,f,h,p,v,g,m=le._data(e);if(m){for(n.handler&&(u=n,n=u.handler,i=u.selector),n.guid||(n.guid=le.guid++),(s=m.events)||(s=m.events={}),(d=m.handle)||(d=m.handle=function(e){return(void 0===le?"undefined":a(le))===Pe||e&&le.event.triggered===e.type?void 0:le.event.dispatch.apply(d.elem,arguments)},d.elem=e),t=(t||"").match(Te)||[""],c=t.length;c--;)o=Fe.exec(t[c])||[],p=g=o[1],v=(o[2]||"").split(".").sort(),p&&(l=le.event.special[p]||{},p=(i?l.delegateType:l.bindType)||p,l=le.event.special[p]||{},f=le.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&le.expr.match.needsContext.test(i),namespace:v.join(".")},u),(h=s[p])||(h=s[p]=[],h.delegateCount=0,l.setup&&!1!==l.setup.call(e,r,v,d)||(e.addEventListener?e.addEventListener(p,d,!1):e.attachEvent&&e.attachEvent("on"+p,d))),l.add&&(l.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,f):h.push(f),le.event.global[p]=!0);e=null}},remove:function(e,t,n,r,i){var a,o,s,c,u,l,d,f,h,p,v,g=le.hasData(e)&&le._data(e);if(g&&(l=g.events)){for(t=(t||"").match(Te)||[""],u=t.length;u--;)if(s=Fe.exec(t[u])||[],h=v=s[1],p=(s[2]||"").split(".").sort(),h){for(d=le.event.special[h]||{},h=(r?d.delegateType:d.bindType)||h,f=l[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=a=f.length;a--;)o=f[a],!i&&v!==o.origType||n&&n.guid!==o.guid||s&&!s.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(f.splice(a,1),o.selector&&f.delegateCount--,d.remove&&d.remove.call(e,o));c&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,p,g.handle)||le.removeEvent(e,h,g.handle),delete l[h])}else for(h in l)le.event.remove(e,h+t[u],n,r,!0);le.isEmptyObject(l)&&(delete g.handle,le._removeData(e,"events"))}},trigger:function(e,t,n,r){var i,s,c,u,l,d,f,h=[n||_e],p=se.call(e,"type")?e.type:e,v=se.call(e,"namespace")?e.namespace.split("."):[];if(c=d=n=n||_e,3!==n.nodeType&&8!==n.nodeType&&!Me.test(p+le.event.triggered)&&(p.indexOf(".")>=0&&(v=p.split("."),p=v.shift(),v.sort()),s=p.indexOf(":")<0&&"on"+p,e=e[le.expando]?e:new le.Event(p,"object"==(void 0===e?"undefined":a(e))&&e),e.isTrigger=r?2:3,e.namespace=v.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:le.makeArray(t,[e]),l=le.event.special[p]||{},r||!l.trigger||!1!==l.trigger.apply(n,t))){if(!r&&!l.noBubble&&!le.isWindow(n)){for(u=l.delegateType||p,Me.test(u+p)||(c=c.parentNode);c;c=c.parentNode)h.push(c),d=c;d===(n.ownerDocument||_e)&&h.push(d.defaultView||d.parentWindow||o)}for(f=0;(c=h[f++])&&!e.isPropagationStopped();)e.type=f>1?u:l.bindType||p,i=(le._data(c,"events")||{})[e.type]&&le._data(c,"handle"),i&&i.apply(c,t),(i=s&&c[s])&&i.apply&&le.acceptData(c)&&(e.result=i.apply(c,t),!1===e.result&&e.preventDefault());if(e.type=p,!r&&!e.isDefaultPrevented()&&(!l._default||!1===l._default.apply(h.pop(),t))&&le.acceptData(n)&&s&&n[p]&&!le.isWindow(n)){d=n[s],d&&(n[s]=null),le.event.triggered=p;try{n[p]()}catch(e){}le.event.triggered=void 0,d&&(n[s]=d)}return e.result}},dispatch:function(e){e=le.event.fix(e);var t,n,r,i,a,o=[],s=te.call(arguments),c=(le._data(this,"events")||{})[e.type]||[],u=le.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(o=le.event.handlers.call(this,e,c),t=0;(i=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,a=0;(r=i.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,void 0!==(n=((le.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,s))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,a,o=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(!0!==c.disabled||"click"!==e.type)){for(i=[],a=0;s>a;a++)r=t[a],n=r.selector+" ",void 0===i[n]&&(i[n]=r.needsContext?le(n,this).index(c)>=0:le.find(n,this,null,[c]).length),i[n]&&i.push(r);i.length&&o.push({elem:c,handlers:i})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},fix:function(e){if(e[le.expando])return e;var t,n,r,i=e.type,a=e,o=this.fixHooks[i];for(o||(this.fixHooks[i]=o=Ue.test(i)?this.mouseHooks:Ne.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new le.Event(a),t=r.length;t--;)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||_e),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,a=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||_e,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==_()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return le.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return le.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=le.extend(new le.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?le.event.trigger(i,null,t):le.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},le.removeEvent=_e.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(a(e[r])===Pe&&(e[r]=null),e.detachEvent(r,n))},le.Event=function(e,t){return this instanceof le.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?y:b):this.type=e,t&&le.extend(this,t),this.timeStamp=e&&e.timeStamp||le.now(),void(this[le.expando]=!0)):new le.Event(e,t)},le.Event.prototype={isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=y,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=y,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=y,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},le.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){le.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,a=e.handleObj;return(!i||i!==r&&!le.contains(r,i))&&(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),ce.submitBubbles||(le.event.special.submit={setup:function(){return!le.nodeName(this,"form")&&void le.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=le.nodeName(t,"input")||le.nodeName(t,"button")?t.form:void 0;n&&!le._data(n,"submitBubbles")&&(le.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),le._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&le.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!le.nodeName(this,"form")&&void le.event.remove(this,"._submit")}}),ce.changeBubbles||(le.event.special.change={setup:function(){return De.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(le.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),le.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),le.event.simulate("change",this,e,!0)})),!1):void le.event.add(this,"beforeactivate._change",function(e){var t=e.target;De.test(t.nodeName)&&!le._data(t,"changeBubbles")&&(le.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||le.event.simulate("change",this.parentNode,e,!0)}),le._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return le.event.remove(this,"._change"),!De.test(this.nodeName)}}),ce.focusinBubbles||le.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){le.event.simulate(t,e.target,le.event.fix(e),!0)};le.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=le._data(r,t);i||r.addEventListener(e,n,!0),le._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=le._data(r,t)-1;i?le._data(r,t,i):(r.removeEventListener(e,n,!0),le._removeData(r,t))}}}),le.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==(void 0===e?"undefined":a(e))){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),!1===r)r=b;else if(!r)return this;return 1===i&&(s=r,r=function(e){return le().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=le.guid++)),this.each(function(){le.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,le(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==(void 0===e?"undefined":a(e))){for(i in e)this.off(i,t,e[i]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=b),this.each(function(){le.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){le.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?le.event.trigger(e,t,n,!0):void 0}});var Be="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qe=/ jQuery\d+="(?:null|\d+)"/g,He=new RegExp("<(?:"+Be+")[\\s/>]","i"),Ve=/^\s+/,ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,We=/<([\w:]+)/,Ge=/<tbody/i,Ye=/<|&#?\w+;/,Qe=/<(?:script|style|link)/i,Xe=/checked\s*(?:[^=]|=\s*.checked.)/i,Je=/^$|\/(?:java|ecma)script/i,Ke=/^true\/(.*)/,Ze=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,et={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ce.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},tt=w(_e),nt=tt.appendChild(_e.createElement("div"));et.optgroup=et.option,et.tbody=et.tfoot=et.colgroup=et.caption=et.thead,et.th=et.td,le.extend({clone:function(e,t,n){var r,i,a,o,s,c=le.contains(e.ownerDocument,e);if(ce.html5Clone||le.isXMLDoc(e)||!He.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(nt.innerHTML=e.outerHTML,nt.removeChild(a=nt.firstChild)),!(ce.noCloneEvent&&ce.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||le.isXMLDoc(e)))for(r=S(a),s=S(e),o=0;null!=(i=s[o]);++o)r[o]&&$(i,r[o]);if(t)if(n)for(s=s||S(e),r=r||S(a),o=0;null!=(i=s[o]);o++)P(i,r[o]);else P(e,a);return r=S(a,"script"),r.length>0&&E(r,!c&&S(e,"script")),r=s=i=null,a},buildFragment:function(e,t,n,r){for(var i,a,o,s,c,u,l,d=e.length,f=w(t),h=[],p=0;d>p;p++)if((a=e[p])||0===a)if("object"===le.type(a))le.merge(h,a.nodeType?[a]:a);else if(Ye.test(a)){for(s=s||f.appendChild(t.createElement("div")),c=(We.exec(a)||["",""])[1].toLowerCase(),l=et[c]||et._default,s.innerHTML=l[1]+a.replace(ze,"<$1></$2>")+l[2],i=l[0];i--;)s=s.lastChild;if(!ce.leadingWhitespace&&Ve.test(a)&&h.push(t.createTextNode(Ve.exec(a)[0])),!ce.tbody)for(a="table"!==c||Ge.test(a)?"<table>"!==l[1]||Ge.test(a)?0:s:s.firstChild,i=a&&a.childNodes.length;i--;)le.nodeName(u=a.childNodes[i],"tbody")&&!u.childNodes.length&&a.removeChild(u);for(le.merge(h,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else h.push(t.createTextNode(a));for(s&&f.removeChild(s),ce.appendChecked||le.grep(S(h,"input"),k),p=0;a=h[p++];)if((!r||-1===le.inArray(a,r))&&(o=le.contains(a.ownerDocument,a),s=S(f.appendChild(a),"script"),o&&E(s),n))for(i=0;a=s[i++];)Je.test(a.type||"")&&n.push(a);return s=null,f},cleanData:function(e,t){for(var n,r,i,o,s=0,c=le.expando,u=le.cache,l=ce.deleteExpando,d=le.event.special;null!=(n=e[s]);s++)if((t||le.acceptData(n))&&(i=n[c],o=i&&u[i])){if(o.events)for(r in o.events)d[r]?le.event.remove(n,r):le.removeEvent(n,r,o.handle);u[i]&&(delete u[i],l?delete n[c]:a(n.removeAttribute)!==Pe?n.removeAttribute(c):n[c]=null,ee.push(i))}}}),le.fn.extend({text:function(e){return Le(this,function(e){return void 0===e?le.text(this):this.empty().append((this[0]&&this[0].ownerDocument||_e).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){T(this,e).appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=T(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?le.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||le.cleanData(S(n)),n.parentNode&&(t&&le.contains(n.ownerDocument,n)&&E(S(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&le.cleanData(S(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&le.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return le.clone(this,e,t)})},html:function(e){return Le(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(qe,""):void 0;if(!("string"!=typeof e||Qe.test(e)||!ce.htmlSerialize&&He.test(e)||!ce.leadingWhitespace&&Ve.test(e)||et[(We.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(ze,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(le.cleanData(S(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,le.cleanData(S(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=ne.apply([],e);var n,r,i,a,o,s,c=0,u=this.length,l=this,d=u-1,f=e[0],h=le.isFunction(f);if(h||u>1&&"string"==typeof f&&!ce.checkClone&&Xe.test(f))return this.each(function(n){var r=l.eq(n);h&&(e[0]=f.call(this,n,r.html())),r.domManip(e,t)});if(u&&(s=le.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(a=le.map(S(s,"script"),C),i=a.length;u>c;c++)r=s,c!==d&&(r=le.clone(r,!0,!0),i&&le.merge(a,S(r,"script"))),t.call(this[c],r,c);if(i)for(o=a[a.length-1].ownerDocument,le.map(a,x),c=0;i>c;c++)r=a[c],Je.test(r.type||"")&&!le._data(r,"globalEval")&&le.contains(o,r)&&(r.src?le._evalUrl&&le._evalUrl(r.src):le.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Ze,"")));s=n=null}return this}}),le.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){le.fn[e]=function(e){for(var n,r=0,i=[],a=le(e),o=a.length-1;o>=r;r++)n=r===o?this:this.clone(!0),le(a[r])[t](n),re.apply(i,n.get());return this.pushStack(i)}});var rt,it={};!function(){var e;ce.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return n=_e.getElementsByTagName("body")[0],n&&n.style?(t=_e.createElement("div"),r=_e.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),a(t.style.zoom)!==Pe&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(_e.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var at,ot,st=/^margin/,ct=new RegExp("^("+Oe+")(?!px)[a-z%]+$","i"),ut=/^(top|right|bottom|left)$/;o.getComputedStyle?(at=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):o.getComputedStyle(e,null)},ot=function(e,t,n){var r,i,a,o,s=e.style;return n=n||at(e),o=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==o||le.contains(e.ownerDocument,e)||(o=le.style(e,t)),ct.test(o)&&st.test(t)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a)),void 0===o?o:o+""}):_e.documentElement.currentStyle&&(at=function(e){return e.currentStyle},ot=function(e,t,n){var r,i,a,o,s=e.style;return n=n||at(e),o=n?n[t]:void 0,null==o&&s&&s[t]&&(o=s[t]),ct.test(o)&&!ut.test(t)&&(r=s.left,i=e.runtimeStyle,a=i&&i.left,a&&(i.left=e.currentStyle.left),s.left="fontSize"===t?"1em":o,o=s.pixelLeft+"px",s.left=r,a&&(i.left=a)),void 0===o?o:o+""||"auto"}),!function(){var e,t,n,r,i,a,s;if(e=_e.createElement("div"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=e.getElementsByTagName("a")[0],t=n&&n.style){var c=function(){var e,t,n,c;(t=_e.getElementsByTagName("body")[0])&&t.style&&(e=_e.createElement("div"),n=_e.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=i=!1,s=!0,o.getComputedStyle&&(r="1%"!==(o.getComputedStyle(e,null)||{}).top,i="4px"===(o.getComputedStyle(e,null)||{width:"4px"}).width,c=e.appendChild(_e.createElement("div")),c.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",e.style.width="1px",s=!parseFloat((o.getComputedStyle(c,null)||{}).marginRight),e.removeChild(c)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c=e.getElementsByTagName("td"),c[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===c[0].offsetHeight,a&&(c[0].style.display="",c[1].style.display="none",a=0===c[0].offsetHeight),t.removeChild(n))};t.cssText="float:left;opacity:.5",ce.opacity="0.5"===t.opacity,ce.cssFloat=!!t.cssFloat,e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",ce.clearCloneStyle="content-box"===e.style.backgroundClip,ce.boxSizing=""===t.boxSizing||""===t.MozBoxSizing||""===t.WebkitBoxSizing,le.extend(ce,{reliableHiddenOffsets:function(){return null==a&&c(),a},boxSizingReliable:function(){return null==i&&c(),i},pixelPosition:function(){return null==r&&c(),r},reliableMarginRight:function(){return null==s&&c(),s}})}}(),le.swap=function(e,t,n,r){var i,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];i=n.apply(e,r||[]);for(a in t)e.style[a]=o[a];return i};var lt=/alpha\([^)]*\)/i,dt=/opacity\s*=\s*([^)]*)/,ft=/^(none|table(?!-c[ea]).+)/,ht=new RegExp("^("+Oe+")(.*)$","i"),pt=new RegExp("^([+-])=("+Oe+")","i"),vt={position:"absolute",visibility:"hidden",display:"block"},gt={letterSpacing:"0",fontWeight:"400"},mt=["Webkit","O","Moz","ms"];le.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ot(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:ce.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,c=le.camelCase(t),u=e.style;if(t=le.cssProps[c]||(le.cssProps[c]=R(u,c)),s=le.cssHooks[t]||le.cssHooks[c],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t];if(o=void 0===n?"undefined":a(n),"string"===o&&(i=pt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(le.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||le.cssNumber[c]||(n+="px"),ce.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(e,n,r)))))try{u[t]=n}catch(e){}}},css:function(e,t,n,r){var i,a,o,s=le.camelCase(t);return t=le.cssProps[s]||(le.cssProps[s]=R(e.style,s)),o=le.cssHooks[t]||le.cssHooks[s],o&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=ot(e,t,r)),"normal"===a&&t in gt&&(a=gt[t]),""===n||n?(i=parseFloat(a),!0===n||le.isNumeric(i)?i||0:a):a}}),le.each(["height","width"],function(e,t){le.cssHooks[t]={get:function(e,n,r){return n?ft.test(le.css(e,"display"))&&0===e.offsetWidth?le.swap(e,vt,function(){return N(e,t,r)}):N(e,t,r):void 0},set:function(e,n,r){var i=r&&at(e);return j(e,n,r?D(e,t,r,ce.boxSizing&&"border-box"===le.css(e,"boxSizing",!1,i),i):0)}}}),ce.opacity||(le.cssHooks.opacity={get:function(e,t){return dt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=le.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===le.trim(a.replace(lt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=lt.test(a)?a.replace(lt,i):a+" "+i)}}),le.cssHooks.marginRight=I(ce.reliableMarginRight,function(e,t){return t?le.swap(e,{display:"inline-block"},ot,[e,"marginRight"]):void 0}),le.each({margin:"",padding:"",border:"Width"},function(e,t){le.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Ie[r]+t]=a[r]||a[r-2]||a[0];return i}},st.test(e)||(le.cssHooks[e+t].set=j)}),le.fn.extend({css:function(e,t){return Le(this,function(e,t,n){var r,i,a={},o=0;if(le.isArray(t)){for(r=at(e),i=t.length;i>o;o++)a[t[o]]=le.css(e,t[o],!1,r);return a}return void 0!==n?le.style(e,t,n):le.css(e,t)},e,t,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Re(this)?le(this).show():le(this).hide()})}}),le.Tween=U,U.prototype={constructor:U,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(le.cssNumber[n]?"":"px")},cur:function(){var e=U.propHooks[this.prop];return e&&e.get?e.get(this):U.propHooks._default.get(this)},run:function(e){var t,n=U.propHooks[this.prop];return this.options.duration?this.pos=t=le.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):U.propHooks._default.set(this),this}},U.prototype.init.prototype=U.prototype,U.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=le.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){le.fx.step[e.prop]?le.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[le.cssProps[e.prop]]||le.cssHooks[e.prop])?le.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},le.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},le.fx=U.prototype.init,le.fx.step={};var yt,bt,_t=/^(?:toggle|show|hide)$/,wt=new RegExp("^(?:([+-])=|)("+Oe+")([a-z%]*)$","i"),St=/queueHooks$/,kt=[q],Tt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=wt.exec(t),a=i&&i[3]||(le.cssNumber[e]?"":"px"),o=(le.cssNumber[e]||"px"!==a&&+r)&&wt.exec(le.css(n.elem,e)),s=1,c=20;if(o&&o[3]!==a){a=a||o[3],i=i||[],o=+r||1;do{s=s||".5",o/=s,le.style(n.elem,e,o+a)}while(s!==(s=n.cur()/r)&&1!==s&&--c)}return i&&(o=n.start=+o||+r||0,n.unit=a,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};le.Animation=le.extend(V,{tweener:function(e,t){le.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],Tt[n]=Tt[n]||[],Tt[n].unshift(t)},prefilter:function(e,t){t?kt.unshift(e):kt.push(e)}}),le.speed=function(e,t,n){var r=e&&"object"==(void 0===e?"undefined":a(e))?le.extend({},e):{complete:n||!n&&t||le.isFunction(e)&&e,duration:e,easing:n&&t||t&&!le.isFunction(t)&&t};return r.duration=le.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in le.fx.speeds?le.fx.speeds[r.duration]:le.fx.speeds._default,(null==r.queue||!0===r.queue)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){le.isFunction(r.old)&&r.old.call(this),r.queue&&le.dequeue(this,r.queue)},r},le.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Re).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=le.isEmptyObject(e),a=le.speed(t,n,r),o=function(){var t=V(this,le.extend({},e),a);(i||le._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",a=le.timers,o=le._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&St.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));(t||!n)&&le.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=le._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=le.timers,o=r?r.length:0;for(n.finish=!0,le.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),le.each(["toggle","show","hide"],function(e,t){var n=le.fn[t];le.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(F(t,!0),e,r,i)}}),le.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){le.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),le.timers=[],le.fx.tick=function(){var e,t=le.timers,n=0;for(yt=le.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||le.fx.stop(),yt=void 0},le.fx.timer=function(e){le.timers.push(e),e()?le.fx.start():le.timers.pop()},le.fx.interval=13,le.fx.start=function(){bt||(bt=setInterval(le.fx.tick,le.fx.interval))},le.fx.stop=function(){clearInterval(bt),bt=null},le.fx.speeds={slow:600,fast:200,_default:400},le.fn.delay=function(e,t){return e=le.fx?le.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;t=_e.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=_e.createElement("select"),i=n.appendChild(_e.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",ce.getSetAttribute="t"!==t.className,ce.style=/top/.test(r.getAttribute("style")),ce.hrefNormalized="/a"===r.getAttribute("href"),ce.checkOn=!!e.value,ce.optSelected=i.selected,ce.enctype=!!_e.createElement("form").enctype,n.disabled=!0,ce.optDisabled=!i.disabled,e=_e.createElement("input"),e.setAttribute("value",""),ce.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ce.radioValue="t"===e.value}();var Ct=/\r/g;le.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=le.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,le(this).val()):e,null==i?i="":"number"==typeof i?i+="":le.isArray(i)&&(i=le.map(i,function(e){return null==e?"":e+""})),(t=le.valHooks[this.type]||le.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=le.valHooks[i.type]||le.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(Ct,""):null==n?"":n)):void 0}}),le.extend({valHooks:{option:{get:function(e){var t=le.find.attr(e,"value");return null!=t?t:le.trim(le.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,a="select-one"===e.type||0>i,o=a?null:[],s=a?i+1:r.length,c=0>i?s:a?i:0;s>c;c++)if(n=r[c],!(!n.selected&&c!==i||(ce.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&le.nodeName(n.parentNode,"optgroup"))){if(t=le(n).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var n,r,i=e.options,a=le.makeArray(t),o=i.length;o--;)if(r=i[o],le.inArray(le.valHooks.option.get(r),a)>=0)try{r.selected=n=!0}catch(e){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),le.each(["radio","checkbox"],function(){le.valHooks[this]={set:function(e,t){return le.isArray(t)?e.checked=le.inArray(le(e).val(),t)>=0:void 0}},ce.checkOn||(le.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var xt,Et,Pt=le.expr.attrHandle,$t=/^(?:checked|selected)$/i,At=ce.getSetAttribute,Ot=ce.input;le.fn.extend({attr:function(e,t){return Le(this,le.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){le.removeAttr(this,e)})}}),le.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return a(e.getAttribute)===Pe?le.prop(e,t,n):(1===o&&le.isXMLDoc(e)||(t=t.toLowerCase(),r=le.attrHooks[t]||(le.expr.match.bool.test(t)?Et:xt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=le.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void le.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,a=t&&t.match(Te);if(a&&1===e.nodeType)for(;n=a[i++];)r=le.propFix[n]||n,le.expr.match.bool.test(n)?Ot&&At||!$t.test(n)?e[r]=!1:e[le.camelCase("default-"+n)]=e[r]=!1:le.attr(e,n,""),e.removeAttribute(At?n:r)},attrHooks:{type:{set:function(e,t){if(!ce.radioValue&&"radio"===t&&le.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Et={set:function(e,t,n){return!1===t?le.removeAttr(e,n):Ot&&At||!$t.test(n)?e.setAttribute(!At&&le.propFix[n]||n,n):e[le.camelCase("default-"+n)]=e[n]=!0,n}},le.each(le.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Pt[t]||le.find.attr;Pt[t]=Ot&&At||!$t.test(t)?function(e,t,r){var i,a;return r||(a=Pt[t],Pt[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,Pt[t]=a),i}:function(e,t,n){return n?void 0:e[le.camelCase("default-"+t)]?t.toLowerCase():null}}),Ot&&At||(le.attrHooks.value={set:function(e,t,n){return le.nodeName(e,"input")?void(e.defaultValue=t):xt&&xt.set(e,t,n)}}),At||(xt={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Pt.id=Pt.name=Pt.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},le.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:xt.set},le.attrHooks.contenteditable={set:function(e,t,n){xt.set(e,""!==t&&t,n)}},le.each(["width","height"],function(e,t){le.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ce.style||(le.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var It=/^(?:input|select|textarea|button|object)$/i,Rt=/^(?:a|area)$/i;le.fn.extend({prop:function(e,t){return Le(this,le.prop,e,t,arguments.length>1)},removeProp:function(e){return e=le.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),le.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var r,i,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return a=1!==o||!le.isXMLDoc(e),a&&(t=le.propFix[t]||t,i=le.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=le.find.attr(e,"tabindex");return t?parseInt(t,10):It.test(e.nodeName)||Rt.test(e.nodeName)&&e.href?0:-1}}}}),ce.hrefNormalized||le.each(["href","src"],function(e,t){le.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ce.optSelected||(le.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),le.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){le.propFix[this.toLowerCase()]=this}),ce.enctype||(le.propFix.enctype="encoding");var Lt=/[\t\r\n\f]/g;le.fn.extend({addClass:function(e){var t,n,r,i,a,o,s=0,c=this.length,u="string"==typeof e&&e;if(le.isFunction(e))return this.each(function(t){le(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(Te)||[];c>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Lt," "):" ")){for(a=0;i=t[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=le.trim(r),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,r,i,a,o,s=0,c=this.length,u=0===arguments.length||"string"==typeof e&&e;if(le.isFunction(e))return this.each(function(t){le(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(Te)||[];c>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Lt," "):"")){for(a=0;i=t[a++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");o=e?le.trim(r):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(e,t){var n=void 0===e?"undefined":a(e);return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(le.isFunction(e)?function(n){le(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,i=le(this),a=e.match(Te)||[];t=a[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===Pe||"boolean"===n)&&(this.className&&le._data(this,"__className__",this.className),this.className=this.className||!1===e?"":le._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Lt," ").indexOf(t)>=0)return!0;return!1}}),le.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){le.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),le.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var jt=le.now(),Dt=/\?/,Nt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;le.parseJSON=function(e){if(o.JSON&&o.JSON.parse)return o.JSON.parse(e+"");var t,n=null,r=le.trim(e+"");return r&&!le.trim(r.replace(Nt,function(e,r,i,a){return t&&r&&(n=0),0===n?e:(t=i||r,n+=!a-!i,"")}))?Function("return "+r)():le.error("Invalid JSON: "+e)},le.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{o.DOMParser?(n=new DOMParser,t=n.parseFromString(e,"text/xml")):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||le.error("Invalid XML: "+e),t};var Ut,Mt,Ft=/#.*$/,Bt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Vt=/^(?:GET|HEAD)$/,zt=/^\/\//,Wt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Gt={},Yt={},Qt="*/".concat("*");try{Mt=location.href}catch(e){Mt=_e.createElement("a"),Mt.href="",Mt=Mt.href}Ut=Wt.exec(Mt.toLowerCase())||[],le.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt,type:"GET",isLocal:Ht.test(Ut[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":le.parseJSON,"text xml":le.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?G(G(e,le.ajaxSettings),t):G(le.ajaxSettings,e)},ajaxPrefilter:z(Gt),ajaxTransport:z(Yt),ajax:function(e,t){function n(e,t,n,r){var i,a,d,y,b,w=t;2!==_&&(_=2,c&&clearTimeout(c),l=void 0,s=r||"",S.readyState=e>0?4:0,i=e>=200&&300>e||304===e,n&&(y=Y(f,S,n)),y=Q(f,y,S,i),i?(f.ifModified&&(b=S.getResponseHeader("Last-Modified"),b&&(le.lastModified[o]=b),(b=S.getResponseHeader("etag"))&&(le.etag[o]=b)),204===e||"HEAD"===f.type?w="nocontent":304===e?w="notmodified":(w=y.state,a=y.data,d=y.error,i=!d)):(d=w,(e||!w)&&(w="error",0>e&&(e=0))),S.status=e,S.statusText=(t||w)+"",i?v.resolveWith(h,[a,w,S]):v.rejectWith(h,[S,w,d]),S.statusCode(m),m=void 0,u&&p.trigger(i?"ajaxSuccess":"ajaxError",[S,f,i?a:d]),g.fireWith(h,[S,w]),u&&(p.trigger("ajaxComplete",[S,f]),--le.active||le.event.trigger("ajaxStop")))}"object"==(void 0===e?"undefined":a(e))&&(t=e,e=void 0),t=t||{};var r,i,o,s,c,u,l,d,f=le.ajaxSetup({},t),h=f.context||f,p=f.context&&(h.nodeType||h.jquery)?le(h):le.event,v=le.Deferred(),g=le.Callbacks("once memory"),m=f.statusCode||{},y={},b={},_=0,w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!d)for(d={};t=qt.exec(s);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return _||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||w;return l&&l.abort(t),n(0,t),this}};if(v.promise(S).complete=g.add,S.success=S.done,S.error=S.fail,f.url=((e||f.url||Mt)+"").replace(Ft,"").replace(zt,Ut[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=le.trim(f.dataType||"*").toLowerCase().match(Te)||[""],null==f.crossDomain&&(r=Wt.exec(f.url.toLowerCase()),f.crossDomain=!(!r||r[1]===Ut[1]&&r[2]===Ut[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(Ut[3]||("http:"===Ut[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=le.param(f.data,f.traditional)),W(Gt,f,t,S),2===_)return S;u=le.event&&f.global,u&&0==le.active++&&le.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Vt.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(Dt.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(f.url=Bt.test(o)?o.replace(Bt,"$1_="+jt++):o+(Dt.test(o)?"&":"?")+"_="+jt++)),f.ifModified&&(le.lastModified[o]&&S.setRequestHeader("If-Modified-Since",le.lastModified[o]),le.etag[o]&&S.setRequestHeader("If-None-Match",le.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&S.setRequestHeader("Content-Type",f.contentType),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Qt+"; q=0.01":""):f.accepts["*"]);for(i in f.headers)S.setRequestHeader(i,f.headers[i]);if(f.beforeSend&&(!1===f.beforeSend.call(h,S,f)||2===_))return S.abort();w="abort";for(i in{success:1,error:1,complete:1})S[i](f[i]);if(l=W(Yt,f,t,S)){S.readyState=1,u&&p.trigger("ajaxSend",[S,f]),f.async&&f.timeout>0&&(c=setTimeout(function(){S.abort("timeout")},f.timeout));try{_=1,l.send(y,n)}catch(e){if(!(2>_))throw e;n(-1,e)}}else n(-1,"No Transport");return S},getJSON:function(e,t,n){return le.get(e,t,n,"json")},getScript:function(e,t){return le.get(e,void 0,t,"script")}}),le.each(["get","post"],function(e,t){le[t]=function(e,n,r,i){return le.isFunction(n)&&(i=i||r,r=n,n=void 0),le.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),le._evalUrl=function(e){return le.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},le.fn.extend({wrapAll:function(e){if(le.isFunction(e))return this.each(function(t){le(this).wrapAll(e.call(this,t))});if(this[0]){var t=le(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(le.isFunction(e)?function(t){le(this).wrapInner(e.call(this,t))}:function(){var t=le(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=le.isFunction(e);return this.each(function(n){le(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){le.nodeName(this,"body")||le(this).replaceWith(this.childNodes)}).end()}}),le.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ce.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||le.css(e,"display"))},le.expr.filters.visible=function(e){return!le.expr.filters.hidden(e)};var Xt=/%20/g,Jt=/\[\]$/,Kt=/\r?\n/g,Zt=/^(?:submit|button|image|reset|file)$/i,en=/^(?:input|select|textarea|keygen)/i;le.param=function(e,t){var n,r=[],i=function(e,t){t=le.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=le.ajaxSettings&&le.ajaxSettings.traditional),le.isArray(e)||e.jquery&&!le.isPlainObject(e))le.each(e,function(){i(this.name,this.value)});else for(n in e)X(n,e[n],t,i);return r.join("&").replace(Xt,"+")},le.fn.extend({serialize:function(){return le.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=le.prop(this,"elements");return e?le.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!le(this).is(":disabled")&&en.test(this.nodeName)&&!Zt.test(e)&&(this.checked||!je.test(e))}).map(function(e,t){var n=le(this).val();return null==n?null:le.isArray(n)?le.map(n,function(e){return{name:t.name,value:e.replace(Kt,"\r\n")}}):{name:t.name,value:n.replace(Kt,"\r\n")}}).get()}}),le.ajaxSettings.xhr=void 0!==o.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&J()||K()}:J;var tn=0,nn={},rn=le.ajaxSettings.xhr();o.attachEvent&&o.attachEvent("onunload",function(){for(var e in nn)nn[e](void 0,!0)}),ce.cors=!!rn&&"withCredentials"in rn,(rn=ce.ajax=!!rn)&&le.ajaxTransport(function(e){if(!e.crossDomain||ce.cors){var t;return{send:function(n,r){var i,a=e.xhr(),o=++tn;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)a[i]=e.xhrFields[i];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&a.setRequestHeader(i,n[i]+"");a.send(e.hasContent&&e.data||null),t=function(n,i){var s,c,u;if(t&&(i||4===a.readyState))if(delete nn[o],t=void 0,a.onreadystatechange=le.noop,i)4!==a.readyState&&a.abort();else{u={},s=a.status,"string"==typeof a.responseText&&(u.text=a.responseText);try{c=a.statusText}catch(e){c=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&r(s,c,u,a.getAllResponseHeaders())},e.async?4===a.readyState?setTimeout(t):a.onreadystatechange=nn[o]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),le.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return le.globalEval(e),e}}}),le.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),le.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=_e.head||le("head")[0]||_e.documentElement;return{send:function(r,i){t=_e.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var an=[],on=/(=)\?(?=&|$)|\?\?/;le.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=an.pop()||le.expando+"_"+jt++;return this[e]=!0,e}}),le.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,a,s=!1!==e.jsonp&&(on.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&on.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=le.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(on,"$1"+r):!1!==e.jsonp&&(e.url+=(Dt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||le.error(r+" was not called"),a[0]},e.dataTypes[0]="json",i=o[r],o[r]=function(){a=arguments},n.always(function(){o[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,an.push(r)),a&&le.isFunction(i)&&i(a[0]),a=i=void 0}),"script"):void 0}),le.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||_e;var r=me.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=le.buildFragment([e],t,i),i&&i.length&&le(i).remove(),le.merge([],r.childNodes))};var sn=le.fn.load;le.fn.load=function(e,t,n){if("string"!=typeof e&&sn)return sn.apply(this,arguments);var r,i,o,s=this,c=e.indexOf(" ");return c>=0&&(r=le.trim(e.slice(c,e.length)),e=e.slice(0,c)),le.isFunction(t)?(n=t,t=void 0):t&&"object"==(void 0===t?"undefined":a(t))&&(o="POST"),s.length>0&&le.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,s.html(r?le("<div>").append(le.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,i||[e.responseText,t,e])}),this},le.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){le.fn[t]=function(e){return this.on(t,e)}}),le.expr.filters.animated=function(e){return le.grep(le.timers,function(t){return e===t.elem}).length};var cn=o.document.documentElement;le.offset={setOffset:function(e,t,n){var r,i,a,o,s,c,u,l=le.css(e,"position"),d=le(e),f={};"static"===l&&(e.style.position="relative"),s=d.offset(),a=le.css(e,"top"),c=le.css(e,"left"),u=("absolute"===l||"fixed"===l)&&le.inArray("auto",[a,c])>-1,u?(r=d.position(),o=r.top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(c)||0),le.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+o),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):d.css(f)}},le.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){le.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;return o?(t=o.documentElement,le.contains(t,i)?(a(i.getBoundingClientRect)!==Pe&&(r=i.getBoundingClientRect()),n=Z(o),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===le.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),le.nodeName(e[0],"html")||(n=e.offset()),n.top+=le.css(e[0],"borderTopWidth",!0),n.left+=le.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-le.css(r,"marginTop",!0),left:t.left-n.left-le.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||cn;e&&!le.nodeName(e,"html")&&"static"===le.css(e,"position");)e=e.offsetParent;return e||cn})}}),le.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);le.fn[e]=function(r){return Le(this,function(e,r,i){var a=Z(e);return void 0===i?a?t in a?a[t]:a.document.documentElement[r]:e[r]:void(a?a.scrollTo(n?le(a).scrollLeft():i,n?i:le(a).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),le.each(["top","left"],function(e,t){le.cssHooks[t]=I(ce.pixelPosition,function(e,n){return n?(n=ot(e,t),ct.test(n)?le(e).position()[t]+"px":n):void 0})}),le.each({Height:"height",Width:"width"},function(e,t){le.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){le.fn[r]=function(r,i){var a=arguments.length&&(n||"boolean"!=typeof r),o=n||(!0===r||!0===i?"margin":"border");return Le(this,function(t,n,r){var i;return le.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?le.css(t,n,o):le.style(t,n,r,o)},t,a?r:void 0,a,null)}})}),le.fn.size=function(){return this.length},le.fn.andSelf=le.fn.addBack,n(1120)&&(r=[],void 0!==(i=function(){return le}.apply(t,r))&&(e.exports=i));var un=o.jQuery,ln=o.$;return le.noConflict=function(e){return o.$===le&&(o.$=ln),e&&o.jQuery===le&&(o.jQuery=un),le},(void 0===s?"undefined":a(s))===Pe&&(o.jQuery=o.$=le),le})}).call(t,n(30)(e))},function(e,t,n){"use strict";!function(){"undefined"!=typeof self&&self.Prism&&self.document&&document.createRange&&(Prism.plugins.KeepMarkup=!0,Prism.hooks.add("before-highlight",function(e){if(e.element.children.length){var t=0,n=[];(function e(r,i){var a={};i||(a.clone=r.cloneNode(!1),a.posOpen=t,n.push(a));for(var o=0,s=r.childNodes.length;s>o;o++){var c=r.childNodes[o];1===c.nodeType?e(c):3===c.nodeType&&(t+=c.data.length)}i||(a.posClose=t)})(e.element,!0),n&&n.length&&(e.keepMarkup=n)}}),Prism.hooks.add("after-highlight",function(e){if(e.keepMarkup&&e.keepMarkup.length){var t=function e(t,n){for(var r=0,i=t.childNodes.length;i>r;r++){var a=t.childNodes[r];if(1===a.nodeType){if(!e(a,n))return!1}else 3===a.nodeType&&(!n.nodeStart&&n.pos+a.data.length>n.node.posOpen&&(n.nodeStart=a,n.nodeStartPos=n.node.posOpen-n.pos),n.nodeStart&&n.pos+a.data.length>=n.node.posClose&&(n.nodeEnd=a,n.nodeEndPos=n.node.posClose-n.pos),n.pos+=a.data.length);if(n.nodeStart&&n.nodeEnd){var o=document.createRange();return o.setStart(n.nodeStart,n.nodeStartPos),o.setEnd(n.nodeEnd,n.nodeEndPos),n.node.clone.appendChild(o.extractContents()),o.insertNode(n.node.clone),o.detach(),!1}}return!0};e.keepMarkup.forEach(function(n){t(e.element,{node:n,pos:0})})}}))}()},function(e,t,n){"use strict";(function(t){var n="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},r=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,r=n.Prism={util:{encode:function(e){return e instanceof i?new i(e.type,r.util.encode(e.content),e.alias):"Array"===r.util.type(e)?e.map(r.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){switch(r.util.type(e)){case"Object":var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=r.util.clone(e[n]));return t;case"Array":return e.map&&e.map(function(e){return r.util.clone(e)})}return e}},languages:{extend:function(e,t){var n=r.util.clone(r.languages[e]);for(var i in t)n[i]=t[i];return n},insertBefore:function(e,t,n,i){i=i||r.languages;var a=i[e];if(2==arguments.length){n=arguments[1];for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o]);return a}var s={};for(var c in a)if(a.hasOwnProperty(c)){if(c==t)for(var o in n)n.hasOwnProperty(o)&&(s[o]=n[o]);s[c]=a[c]}return r.languages.DFS(r.languages,function(t,n){n===i[e]&&t!=e&&(this[t]=s)}),i[e]=s},DFS:function(e,t,n,i){i=i||{};for(var a in e)e.hasOwnProperty(a)&&(t.call(e,a,e[a],n||a),"Object"!==r.util.type(e[a])||i[r.util.objId(e[a])]?"Array"!==r.util.type(e[a])||i[r.util.objId(e[a])]||(i[r.util.objId(e[a])]=!0,r.languages.DFS(e[a],t,a,i)):(i[r.util.objId(e[a])]=!0,r.languages.DFS(e[a],t,null,i)))}},plugins:{},highlightAll:function(e,t){var n={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",n);for(var i,a=n.elements||document.querySelectorAll(n.selector),o=0;i=a[o++];)r.highlightElement(i,!0===e,n.callback)},highlightElement:function(t,i,a){for(var o,s,c=t;c&&!e.test(c.className);)c=c.parentNode;c&&(o=(c.className.match(e)||[,""])[1],s=r.languages[o]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+o,c=t.parentNode,/pre/i.test(c.nodeName)&&(c.className=c.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var u=t.textContent,l={element:t,language:o,grammar:s,code:u};if(!u||!s)return void r.hooks.run("complete",l);if(r.hooks.run("before-highlight",l),i&&n.Worker){var d=new Worker(r.filename);d.onmessage=function(e){l.highlightedCode=e.data,r.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,a&&a.call(l.element),r.hooks.run("after-highlight",l),r.hooks.run("complete",l)},d.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else l.highlightedCode=r.highlight(l.code,l.grammar,l.language),r.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,a&&a.call(t),r.hooks.run("after-highlight",l),r.hooks.run("complete",l)},highlight:function(e,t,n){var a=r.tokenize(e,t);return i.stringify(r.util.encode(a),n)},tokenize:function(e,t){var n=r.Token,i=[e],a=t.rest;if(a){for(var o in a)t[o]=a[o];delete t.rest}e:for(var o in t)if(t.hasOwnProperty(o)&&t[o]){var s=t[o];s="Array"===r.util.type(s)?s:[s];for(var c=0;c<s.length;++c){var u=s[c],l=u.inside,d=!!u.lookbehind,f=!!u.greedy,h=0,p=u.alias;u=u.pattern||u;for(var v=0;v<i.length;v++){var g=i[v];if(i.length>e.length)break e;if(!(g instanceof n)){u.lastIndex=0;var m=u.exec(g),y=1;if(!m&&f&&v!=i.length-1){var b=i[v+1].matchedStr||i[v+1],_=g+b;if(v<i.length-2&&(_+=i[v+2].matchedStr||i[v+2]),u.lastIndex=0,!(m=u.exec(_)))continue;var w=m.index+(d?m[1].length:0);if(w>=g.length)continue;var S=m.index+m[0].length,k=g.length+b.length;if(y=3,k>=S){if(i[v+1].greedy)continue;y=2,_=_.slice(0,k)}g=_}if(m){d&&(h=m[1].length);var w=m.index+h,m=m[0].slice(h),S=w+m.length,T=g.slice(0,w),C=g.slice(S),x=[v,y];T&&x.push(T);var E=new n(o,l?r.tokenize(m,l):m,p,m,f);x.push(E),C&&x.push(C),Array.prototype.splice.apply(i,x)}}}}}return i},hooks:{all:{},add:function(e,t){var n=r.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=r.hooks.all[e];if(n&&n.length)for(var i,a=0;i=n[a++];)i(t)}}},i=r.Token=function(e,t,n,r,i){this.type=e,this.content=t,this.alias=n,this.matchedStr=r||null,this.greedy=!!i};if(i.stringify=function(e,t,n){if("string"==typeof e)return e;if("Array"===r.util.type(e))return e.map(function(n){return i.stringify(n,t,e)}).join("");var a={type:e.type,content:i.stringify(e.content,t,n),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:n};if("comment"==a.type&&(a.attributes.spellcheck="true"),e.alias){var o="Array"===r.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(a.classes,o)}r.hooks.run("wrap",a);var s="";for(var c in a.attributes)s+=(s?" ":"")+c+'="'+(a.attributes[c]||"")+'"';return"<"+a.tag+' class="'+a.classes.join(" ")+'" '+s+">"+a.content+"</"+a.tag+">"},!n.document)return n.addEventListener?(n.addEventListener("message",function(e){var t=JSON.parse(e.data),i=t.language,a=t.code,o=t.immediateClose;n.postMessage(r.highlight(a,r.languages[i],i)),o&&n.close()},!1),n.Prism):n.Prism;var a=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return a&&(r.filename=a.src,document.addEventListener&&!a.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",r.highlightAll)),n.Prism}();void 0!==e&&e.exports&&(e.exports=r),void 0!==t&&(t.Prism=r),r.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=.$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},r.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),r.languages.xml=r.languages.markup,r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup}).call(t,n(6))},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";var r=n(1008);n.d(t,"c",function(){return p}),n.d(t,"a",function(){return v}),n.d(t,"b",function(){return f});var i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},c=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],r=t[4],i=n[4],a=void 0,o=void 0,s=void 0,c=[],u=[],l=void 0,d=void 0,f=void 0,h=void 0,p=void 0,v=void 0;for(a=0;a<256;a++)u[(c[a]=a<<1^283*(a>>7))^a]=a;for(o=s=0;!r[o];o^=l||1,s=u[s]||1)for(h=s^s<<1^s<<2^s<<3^s<<4,h=h>>8^255&h^99,r[o]=h,i[h]=o,f=c[d=c[l=c[o]]],v=16843009*f^65537*d^257*l^16843008*o,p=257*c[h]^16843008*h,a=0;a<4;a++)t[a][o]=p=p<<24^p>>>8,n[a][h]=v=v<<24^v>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e},u=null,l=function(){function e(t){i(this,e),u||(u=c()),this._tables=[[u[0][0].slice(),u[0][1].slice(),u[0][2].slice(),u[0][3].slice(),u[0][4].slice()],[u[1][0].slice(),u[1][1].slice(),u[1][2].slice(),u[1][3].slice(),u[1][4].slice()]];var n=void 0,r=void 0,a=void 0,o=void 0,s=void 0,l=this._tables[0][4],d=this._tables[1],f=t.length,h=1;if(4!==f&&6!==f&&8!==f)throw new Error("Invalid aes key size");for(o=t.slice(0),s=[],this._key=[o,s],n=f;n<4*f+28;n++)a=o[n-1],(n%f==0||8===f&&n%f==4)&&(a=l[a>>>24]<<24^l[a>>16&255]<<16^l[a>>8&255]<<8^l[255&a],n%f==0&&(a=a<<8^a>>>24^h<<24,h=h<<1^283*(h>>7))),o[n]=o[n-f]^a;for(r=0;n;r++,n--)a=o[3&r?n:n-4],s[r]=n<=4||r<4?a:d[0][l[a>>>24]]^d[1][l[a>>16&255]]^d[2][l[a>>8&255]]^d[3][l[255&a]]}return e.prototype.decrypt=function(e,t,n,r,i,a){var o=this._key[1],s=e^o[0],c=r^o[1],u=n^o[2],l=t^o[3],d=void 0,f=void 0,h=void 0,p=o.length/4-2,v=void 0,g=4,m=this._tables[1],y=m[0],b=m[1],_=m[2],w=m[3],S=m[4];for(v=0;v<p;v++)d=y[s>>>24]^b[c>>16&255]^_[u>>8&255]^w[255&l]^o[g],f=y[c>>>24]^b[u>>16&255]^_[l>>8&255]^w[255&s]^o[g+1],h=y[u>>>24]^b[l>>16&255]^_[s>>8&255]^w[255&c]^o[g+2],l=y[l>>>24]^b[s>>16&255]^_[c>>8&255]^w[255&u]^o[g+3],g+=4,s=d,c=f,u=h;for(v=0;v<4;v++)i[(3&-v)+a]=S[s>>>24]<<24^S[c>>16&255]<<16^S[u>>8&255]<<8^S[255&l]^o[g++],d=s,s=c,c=u,u=l,l=d},e}(),d=function(){function e(){i(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),n>-1},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,i)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),f=function(e){function t(){i(this,t);var n=s(this,e.call(this,d));return n.jobs=[],n.delay=1,n.timeout_=null,n}return o(t,e),t.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},t.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(d),h=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},p=function(e,t,n){var r=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),i=new l(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),o=new Int32Array(a.buffer),s=void 0,c=void 0,u=void 0,d=void 0,f=void 0,p=void 0,v=void 0,g=void 0,m=void 0;for(s=n[0],c=n[1],u=n[2],d=n[3],m=0;m<r.length;m+=4)f=h(r[m]),p=h(r[m+1]),v=h(r[m+2]),g=h(r[m+3]),i.decrypt(f,p,v,g,o,m),o[m]=h(o[m]^s),o[m+1]=h(o[m+1]^c),o[m+2]=h(o[m+2]^u),o[m+3]=h(o[m+3]^d),s=f,c=p,u=v,d=g;return a},v=function(){function e(t,a,o,s){i(this,e);var c=e.STEP,u=new Int32Array(t.buffer),l=new Uint8Array(t.byteLength),d=0;for(this.asyncStream_=new f,this.asyncStream_.push(this.decryptChunk_(u.subarray(d,d+c),a,o,l)),d=c;d<u.length;d+=c)o=new Uint32Array([h(u[d-4]),h(u[d-3]),h(u[d-2]),h(u[d-1])]),this.asyncStream_.push(this.decryptChunk_(u.subarray(d,d+c),a,o,l));this.asyncStream_.push(function(){s(null,n.i(r.a)(l))})}return e.prototype.decryptChunk_=function(e,t,n,r){return function(){var i=p(e,t,n);r.set(i,e.byteOffset)}},a(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}()},function(e,t,n){var r=n(31),i=n(8),a=r(i,"DataView");e.exports=a},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(554),a=n(555),o=n(556),s=n(557),c=n(558);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t,n){var r=n(31),i=n(8),a=r(i,"Promise");e.exports=a},function(e,t,n){var r=n(31),i=n(8),a=r(i,"Set");e.exports=a},function(e,t){function n(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}e.exports=n},function(e,t){function n(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t){function n(e){return e.split("")}e.exports=n},function(e,t,n){function r(e,t){return e&&i(t,a(t),e)}var i=n(37),a=n(19);e.exports=r},function(e,t,n){function r(e,t){return e&&i(t,a(t),e)}var i=n(37),a=n(63);e.exports=r},function(e,t){function n(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}e.exports=n},function(e,t,n){function r(e,t,n,R,L,j){var D,N=t&C,U=t&x,M=t&E;if(n&&(D=L?n(e,R,L,j):n(e)),void 0!==D)return D;if(!S(e))return e;var F=b(e);if(F){if(D=g(e),!N)return l(e,D)}else{var B=v(e),q=B==$||B==A;if(_(e))return u(e,N);if(B==O||B==P||q&&!L){if(D=U||q?{}:y(e),!N)return U?f(e,c(D,e)):d(e,s(D,e))}else{if(!I[B])return L?e:{};D=m(e,B,N)}}j||(j=new i);var H=j.get(e);if(H)return H;if(j.set(e,D),k(e))return e.forEach(function(i){D.add(r(i,t,n,i,e,j))}),D;if(w(e))return e.forEach(function(i,a){D.set(a,r(i,t,n,a,e,j))}),D;var V=M?U?p:h:U?keysIn:T,z=F?void 0:V(e);return a(z||e,function(i,a){z&&(a=i,i=e[a]),o(D,a,r(i,t,n,a,e,j))}),D}var i=n(83),a=n(128),o=n(130),s=n(489),c=n(490),u=n(210),l=n(88),d=n(532),f=n(533),h=n(220),p=n(136),v=n(56),g=n(559),m=n(560),y=n(223),b=n(5),_=n(59),w=n(605),S=n(10),k=n(607),T=n(19),C=1,x=2,E=4,P="[object Arguments]",$="[object Function]",A="[object GeneratorFunction]",O="[object Object]",I={};I[P]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object DataView]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Map]"]=I["[object Number]"]=I[O]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object Symbol]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I["[object Error]"]=I[$]=I["[object WeakMap]"]=!1,e.exports=r},function(e,t,n){function r(e,t){var n=[];return i(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}var i=n(86);e.exports=r},function(e,t,n){function r(e,t,n,o,s){var c=-1,u=e.length;for(n||(n=a),s||(s=[]);++c<u;){var l=e[c];t>0&&n(l)?t>1?r(l,t-1,n,o,s):i(s,l):o||(s[s.length]=l)}return s}var i=n(129),a=n(562);e.exports=r},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function r(e,t,n){for(var r=n?o:a,d=e[0].length,f=e.length,h=f,p=Array(f),v=1/0,g=[];h--;){var m=e[h];h&&t&&(m=s(m,c(t))),v=l(m.length,v),p[h]=!n&&(t||d>=120&&m.length>=120)?new i(h&&m):void 0}m=e[0];var y=-1,b=p[0];e:for(;++y<d&&g.length<v;){var _=m[y],w=t?t(_):_;if(_=n||0!==_?_:0,!(b?u(b,w):r(g,w,n))){for(h=f;--h;){var S=p[h];if(!(S?u(S,w):r(e[h],w,n)))continue e}b&&b.push(w),g.push(_)}}return g}var i=n(193),a=n(197),o=n(485),s=n(22),c=n(54),u=n(208),l=Math.min;e.exports=r},function(e,t,n){function r(e,t,n,r){return i(e,function(e,i,a){t(r,n(e),i,a)}),r}var i=n(52);e.exports=r},function(e,t,n){function r(e){return a(e)&&i(e)==o}var i=n(23),a=n(11),o="[object Arguments]";e.exports=r},function(e,t,n){function r(e,t,n,r,g,y){var b=u(e),_=u(t),w=b?p:c(e),S=_?p:c(t);w=w==h?v:w,S=S==h?v:S;var k=w==v,T=S==v,C=w==S;if(C&&l(e)){if(!l(t))return!1;b=!0,k=!1}if(C&&!k)return y||(y=new i),b||d(e)?a(e,t,n,r,g,y):o(e,t,w,n,r,g,y);if(!(n&f)){var x=k&&m.call(e,"__wrapped__"),E=T&&m.call(t,"__wrapped__");if(x||E){var P=x?e.value():e,$=E?t.value():t;return y||(y=new i),g(P,$,n,r,y)}}return!!C&&(y||(y=new i),s(e,t,n,r,g,y))}var i=n(83),a=n(217),o=n(545),s=n(546),c=n(56),u=n(5),l=n(59),d=n(95),f=1,h="[object Arguments]",p="[object Array]",v="[object Object]",g=Object.prototype,m=g.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){return a(e)&&i(e)==o}var i=n(56),a=n(11),o="[object Map]";e.exports=r},function(e,t,n){function r(e,t,n,r){var c=n.length,u=c,l=!r;if(null==e)return!u;for(e=Object(e);c--;){var d=n[c];if(l&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++c<u;){d=n[c];var f=d[0],h=e[f],p=d[1];if(l&&d[2]){if(void 0===h&&!(f in e))return!1}else{var v=new i;if(r)var g=r(h,p,f,e,t,v);if(!(void 0===g?a(p,h,o|s,r,v):g))return!1}}return!0}var i=n(83),a=n(131),o=1,s=2;e.exports=r},function(e,t){function n(e){return e!==e}e.exports=n},function(e,t,n){function r(e){return!(!o(e)||a(e))&&(i(e)?p:u).test(s(e))}var i=n(42),a=n(565),o=n(10),s=n(234),c=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,f=l.toString,h=d.hasOwnProperty,p=RegExp("^"+f.call(h).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){return a(e)&&i(e)==o}var i=n(56),a=n(11),o="[object Set]";e.exports=r},function(e,t,n){function r(e){return o(e)&&a(e.length)&&!!s[i(e)]}var i=n(23),a=n(144),o=n(11),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=r},function(e,t,n){function r(e){if(!i(e))return o(e);var t=a(e),n=[];for(var r in e)("constructor"!=r||!t&&c.call(e,r))&&n.push(r);return n}var i=n(10),a=n(91),o=n(580),s=Object.prototype,c=s.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=a(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}var i=n(501),a=n(548),o=n(226);e.exports=r},function(e,t,n){function r(e,t){return s(e)&&c(t)?u(l(e),t):function(n){var r=a(n,e);return void 0===r&&r===t?o(n,e):i(t,r,d|f)}}var i=n(131),a=n(238),o=n(239),s=n(139),c=n(225),u=n(226),l=n(39),d=1,f=2;e.exports=r},function(e,t,n){function r(e,t,n,d,f){e!==t&&o(t,function(o,u){if(c(o))f||(f=new i),s(e,t,u,n,r,d,f);else{var h=d?d(l(e,u),o,u+"",e,t,f):void 0;void 0===h&&(h=o),a(e,u,h)}},u)}var i=n(83),a=n(199),o=n(201),s=n(510),c=n(10),u=n(63),l=n(230);e.exports=r},function(e,t,n){function r(e,t,n,r,b,_,w){var S=m(e,n),k=m(t,n),T=w.get(k);if(T)return void i(e,n,T);var C=_?_(S,k,n+"",e,t,w):void 0,x=void 0===C;if(x){var E=l(k),P=!E&&f(k),$=!E&&!P&&g(k);C=k,E||P||$?l(S)?C=S:d(S)?C=s(S):P?(x=!1,C=a(k,!0)):$?(x=!1,C=o(k,!0)):C=[]:v(k)||u(k)?(C=S,u(S)?C=y(S):(!p(S)||r&&h(S))&&(C=c(k))):x=!1}x&&(w.set(k,C),b(C,k,r,_,w),w.delete(k)),i(e,n,C)}var i=n(199),a=n(210),o=n(211),s=n(88),c=n(223),u=n(58),l=n(5),d=n(241),f=n(59),h=n(42),p=n(10),v=n(145),g=n(95),m=n(230),y=n(622);e.exports=r},function(e,t,n){function r(e,t,n){var r=-1;t=i(t.length?t:[l],c(a));var d=o(e,function(e,n,a){return{criteria:i(t,function(t){return t(e)}),index:++r,value:e}});return s(d,function(e,t){return u(e,t,n)})}var i=n(22),a=n(17),o=n(204),s=n(518),c=n(54),u=n(531),l=n(32);e.exports=r},function(e,t,n){function r(e,t){return i(e,t,function(t,n){return a(e,n)})}var i=n(205),a=n(239);e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function r(e){return function(t){return i(t,e)}}var i=n(87);e.exports=r},function(e,t){function n(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}e.exports=n},function(e,t,n){function r(e,t,n,r){if(!s(e))return e;t=a(t,e);for(var u=-1,l=t.length,d=l-1,f=e;null!=f&&++u<l;){var h=c(t[u]),p=n;if(u!=d){var v=f[h];p=r?r(v,h,f):void 0,void 0===p&&(p=s(v)?v:o(t[u+1])?[]:{})}i(f,h,p),f=f[h]}return e}var i=n(130),a=n(36),o=n(57),s=n(10),c=n(39);e.exports=r},function(e,t,n){var r=n(235),i=n(216),a=n(32),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=o},function(e,t){function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}e.exports=n},function(e,t){function n(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);void 0!==a&&(n=void 0===n?a:n+a)}return n}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e,t){return t=i(t,e),null==(e=o(e,t))||delete e[s(a(t))]}var i=n(36),a=n(244),o=n(582),s=n(39);e.exports=r},function(e,t,n){function r(e,t){return i(t,function(t){return e[t]})}var i=n(22);e.exports=r},function(e,t,n){function r(e){return i(e)?e:[]}var i=n(241);e.exports=r},function(e,t,n){function r(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:i(e,t,n)}var i=n(207);e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--&&i(t,e[n],0)>-1;);return n}var i=n(53);e.exports=r},function(e,t,n){function r(e,t){for(var n=-1,r=e.length;++n<r&&i(t,e[n],0)>-1;);return n}var i=n(53);e.exports=r},function(e,t,n){function r(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var i=n(134);e.exports=r},function(e,t){function n(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}var r=/\w*$/;e.exports=n},function(e,t,n){function r(e){return o?Object(o.call(e)):{}}var i=n(34),a=i?i.prototype:void 0,o=a?a.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t){if(e!==t){var n=void 0!==e,r=null===e,a=e===e,o=i(e),s=void 0!==t,c=null===t,u=t===t,l=i(t);if(!c&&!l&&!o&&e>t||o&&s&&u&&!c&&!l||r&&s&&u||!n&&u||!a)return 1;if(!r&&!o&&!l&&e<t||l&&n&&a&&!r&&!o||c&&n&&a||!s&&a||!u)return-1}return 0}var i=n(62);e.exports=r},function(e,t,n){function r(e,t,n){for(var r=-1,a=e.criteria,o=t.criteria,s=a.length,c=n.length;++r<s;){var u=i(a[r],o[r]);if(u){if(r>=c)return u;return u*("desc"==n[r]?-1:1)}}return e.index-t.index}var i=n(530);e.exports=r},function(e,t,n){function r(e,t){return i(e,a(e),t)}var i=n(37),a=n(138);e.exports=r},function(e,t,n){function r(e,t){return i(e,a(e),t)}var i=n(37),a=n(222);e.exports=r},function(e,t,n){var r=n(8),i=r["__core-js_shared__"];e.exports=i},function(e,t){function n(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}e.exports=n},function(e,t,n){function r(e){return i(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&a(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var c=n[r];c&&e(t,c,r,o)}return t})}var i=n(35),a=n(224);e.exports=r},function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!i(n))return e(n,r);for(var a=n.length,o=t?a:-1,s=Object(n);(t?o--:++o<a)&&!1!==r(s[o],o,s););return n}}var i=n(18);e.exports=r},function(e,t){function n(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(!1===n(a[c],c,a))break}return t}}e.exports=n},function(e,t,n){function r(e,t,n){function r(){return(this&&this!==a&&this instanceof r?c:e).apply(s?n:this,arguments)}var s=t&o,c=i(e);return r}var i=n(89),a=n(8),o=1;e.exports=r},function(e,t,n){function r(e,t,n){function r(){for(var a=arguments.length,f=Array(a),h=a,p=c(r);h--;)f[h]=arguments[h];var v=a<3&&f[0]!==p&&f[a-1]!==p?[]:u(f,p);return(a-=v.length)<n?s(e,t,o,r.placeholder,void 0,f,v,void 0,void 0,n-a):i(this&&this!==l&&this instanceof r?d:e,this,f)}var d=a(e);return r}var i=n(127),a=n(89),o=n(214),s=n(215),c=n(55),u=n(38),l=n(8);e.exports=r},function(e,t,n){function r(e){return function(t,n,r){var s=Object(t);if(!a(t)){var c=i(n,3);t=o(t),n=function(e){return c(s[e],e,s)}}var u=e(t,n,r);return u>-1?s[c?t[u]:u]:void 0}}var i=n(17),a=n(18),o=n(19);e.exports=r},function(e,t,n){function r(e,t){return function(n,r){return i(n,e,t(r),{})}}var i=n(497);e.exports=r},function(e,t,n){function r(e,t,n,r){function c(){for(var t=-1,a=arguments.length,s=-1,d=r.length,f=Array(d+a),h=this&&this!==o&&this instanceof c?l:e;++s<d;)f[s]=r[s];for(;a--;)f[s++]=arguments[++t];return i(h,u?n:this,f)}var u=t&s,l=a(e);return c}var i=n(127),a=n(89),o=n(8),s=1;e.exports=r},function(e,t,n){function r(e){return i(e)?void 0:e}var i=n(145);e.exports=r},function(e,t,n){function r(e,t,n,r,i,k,C){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!k(new a(e),new a(t)));case f:case h:case g:return o(+e,+t);case p:return e.name==t.name&&e.message==t.message;case m:case b:return e==t+"";case v:var x=c;case y:var E=r&l;if(x||(x=u),e.size!=t.size&&!E)return!1;var P=C.get(e);if(P)return P==t;r|=d,C.set(e,t);var $=s(x(e),x(t),r,i,k,C);return C.delete(e),$;case _:if(T)return T.call(e)==T.call(t)}return!1}var i=n(34),a=n(194),o=n(40),s=n(217),c=n(576),u=n(587),l=1,d=2,f="[object Boolean]",h="[object Date]",p="[object Error]",v="[object Map]",g="[object Number]",m="[object RegExp]",y="[object Set]",b="[object String]",_="[object Symbol]",w="[object ArrayBuffer]",S="[object DataView]",k=i?i.prototype:void 0,T=k?k.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t,n,r,o,c){var u=n&a,l=i(e),d=l.length;if(d!=i(t).length&&!u)return!1;for(var f=d;f--;){var h=l[f];if(!(u?h in t:s.call(t,h)))return!1}var p=c.get(e);if(p&&c.get(t))return p==t;var v=!0;c.set(e,t),c.set(t,e);for(var g=u;++f<d;){h=l[f];var m=e[h],y=t[h];if(r)var b=u?r(y,m,h,t,e,c):r(m,y,h,e,t,c);if(!(void 0===b?m===y||o(m,y,n,r,c):b)){v=!1;break}g||(g="constructor"==h)}if(v&&!g){var _=e.constructor,w=t.constructor;_!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(v=!1)}return c.delete(e),c.delete(t),v}var i=n(220),a=1,o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){for(var t=e.name+"",n=i[t],r=o.call(i,t)?n.length:0;r--;){var a=n[r],s=a.func;if(null==s||s==e)return a.name}return t}var i=n(583),a=Object.prototype,o=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){for(var t=a(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,i(o)]}return t}var i=n(225),a=n(19);e.exports=r},function(e,t,n){function r(e){var t=o.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[c]=n:delete e[c]),i}var i=n(34),a=Object.prototype,o=a.hasOwnProperty,s=a.toString,c=i?i.toStringTag:void 0;e.exports=r},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t){function n(e){var t=e.match(r);return t?t[1].split(i):[]}var r=/\{\n\/\* \[wrapped with (.+)\] \*/,i=/,? & /;e.exports=n},function(e,t,n){function r(e,t,n){t=i(t,e);for(var r=-1,l=t.length,d=!1;++r<l;){var f=u(t[r]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++r!=l?d:!!(l=null==e?0:e.length)&&c(l)&&s(f,l)&&(o(e)||a(e))}var i=n(36),a=n(58),o=n(5),s=n(57),c=n(144),u=n(39);e.exports=r},function(e,t){function n(e){return l.test(e)}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",s=i+a+o,c="\\ufe0e\\ufe0f",u="\\u200d",l=RegExp("["+u+r+s+c+"]");e.exports=n},function(e,t,n){function r(){this.__data__=i?i(null):{},this.size=0}var i=n(92);e.exports=r},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(i){var n=t[e];return n===a?void 0:n}return s.call(t,e)?t[e]:void 0}var i=n(92),a="__lodash_hash_undefined__",o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return i?void 0!==t[e]:o.call(t,e)}var i=n(92),a=Object.prototype,o=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?a:t,this}var i=n(92),a="__lodash_hash_undefined__";e.exports=r},function(e,t){function n(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&i.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var r=Object.prototype,i=r.hasOwnProperty;e.exports=n},function(e,t,n){function r(e,t,n){var r=e.constructor;switch(t){case m:return i(e);case u:case l:return new r(+e);case y:return a(e,n);case b:case _:case w:case S:case k:case T:case C:case x:case E:return c(e,n);case d:return new r;case f:case v:return new r(e);case h:return o(e);case p:return new r;case g:return s(e)}}var i=n(134),a=n(527),o=n(528),s=n(529),c=n(211),u="[object Boolean]",l="[object Date]",d="[object Map]",f="[object Number]",h="[object RegExp]",p="[object Set]",v="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",b="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",S="[object Int16Array]",k="[object Int32Array]",T="[object Uint8Array]",C="[object Uint8ClampedArray]",x="[object Uint16Array]",E="[object Uint32Array]";e.exports=r},function(e,t){function n(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(r,"{\n/* [wrapped with "+t+"] */\n")}var r=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=n},function(e,t,n){function r(e){return o(e)||a(e)||!!(s&&e&&e[s])}var i=n(34),a=n(58),o=n(5),s=i?i.isConcatSpreadable:void 0;e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){var t=o(e),n=s[t];if("function"!=typeof n||!(t in i.prototype))return!1;if(e===n)return!0;var r=a(n);return!!r&&e===r[0]}var i=n(124),a=n(221),o=n(547),s=n(624);e.exports=r},function(e,t,n){function r(e){return!!a&&a in e}var i=n(534),a=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=i(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}var i=n(84),a=Array.prototype,o=a.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}var i=n(84);e.exports=r},function(e,t,n){function r(e){return i(this.__data__,e)>-1}var i=n(84);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var i=n(84);e.exports=r},function(e,t,n){function r(){this.size=0,this.__data__={hash:new i,map:new(o||a),string:new i}}var i=n(482),a=n(82),o=n(125);e.exports=r},function(e,t,n){function r(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}var i=n(90);e.exports=r},function(e,t,n){function r(e){return i(this,e).get(e)}var i=n(90);e.exports=r},function(e,t,n){function r(e){return i(this,e).has(e)}var i=n(90);e.exports=r},function(e,t,n){function r(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var i=n(90);e.exports=r},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}e.exports=n},function(e,t,n){function r(e){var t=i(e,function(e){return n.size===a&&n.clear(),e}),n=t.cache;return t}var i=n(610),a=500;e.exports=r},function(e,t,n){function r(e,t){var n=e[1],r=t[1],v=n|r,g=v<(c|u|f),m=r==f&&n==d||r==f&&n==h&&e[7].length<=t[8]||r==(f|h)&&t[7].length<=t[8]&&n==d;if(!g&&!m)return e;r&c&&(e[2]=t[2],v|=n&c?0:l);var y=t[3];if(y){var b=e[3];e[3]=b?i(b,y,t[4]):y,e[4]=b?o(e[3],s):t[4]}return y=t[5],y&&(b=e[5],e[5]=b?a(b,y,t[6]):y,e[6]=b?o(e[5],s):t[6]),y=t[7],y&&(e[7]=y),r&f&&(e[8]=null==e[8]?t[8]:p(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=v,e}var i=n(212),a=n(213),o=n(38),s="__lodash_placeholder__",c=1,u=2,l=4,d=8,f=128,h=256,p=Math.min;e.exports=r},function(e,t,n){var r=n(228),i=r(Object.keys,Object);e.exports=i},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t){function n(e){return i.call(e)}var r=Object.prototype,i=r.toString;e.exports=n},function(e,t,n){function r(e,t){return t.length<2?e:i(e,a(t,0,-1))}var i=n(87),a=n(207);e.exports=r},function(e,t){var n={};e.exports=n},function(e,t,n){function r(e,t){for(var n=e.length,r=o(t.length,n),s=i(e);r--;){var c=t[r];e[r]=a(c,n)?s[c]:void 0}return e}var i=n(88),a=n(57),o=Math.min;e.exports=r},function(e,t){function n(e){return this.__data__.set(e,r),this}var r="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function r(){this.__data__=new i,this.size=0}var i=n(82);e.exports=r},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!a||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(r)}return n.set(e,t),this.size=n.size,this}var i=n(82),a=n(125),o=n(126),s=200;e.exports=r},function(e,t){function n(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}e.exports=n},function(e,t,n){function r(e){return a(e)?o(e):i(e)}var i=n(488),a=n(553),o=n(596);e.exports=r},function(e,t,n){var r=n(577),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)}),t});e.exports=o},function(e,t){function n(e){return e.match(S)||[]}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",s=i+a+o,c="\\ufe0e\\ufe0f",u="["+r+"]",l="["+s+"]",d="\\ud83c[\\udffb-\\udfff]",f="(?:"+l+"|"+d+")",h="[^"+r+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",m=f+"?",y="["+c+"]?",b="(?:"+g+"(?:"+[h,p,v].join("|")+")"+y+m+")*",_=y+m+b,w="(?:"+[h+l+"?",l,p,v,u].join("|")+")",S=RegExp(d+"(?="+d+")|"+w+_,"g");e.exports=n},function(e,t,n){function r(e,t){return i(v,function(n){var r="_."+n[0];t&n[1]&&!a(e,r)&&e.push(r)}),e.sort()}var i=n(128),a=n(197),o=1,s=2,c=8,u=16,l=32,d=64,f=128,h=256,p=512,v=[["ary",f],["bind",o],["bindKey",s],["curry",c],["curryRight",u],["flip",p],["partial",l],["partialRight",d],["rearg",h]];e.exports=r},function(e,t,n){function r(e){if(e instanceof i)return e.clone();var t=new a(e.__wrapped__,e.__chain__);return t.__actions__=o(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var i=n(124),a=n(192),o=n(88);e.exports=r},function(e,t,n){var r=n(35),i=n(135),a=n(55),o=n(38),s=1,c=32,u=r(function(e,t,n){var r=s;if(n.length){var l=o(n,a(u));r|=c}return i(e,r,t,n,l)});u.placeholder={},e.exports=u},function(e,t){function n(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i}e.exports=n},function(e,t,n){function r(e,t){return e&&i(e,a(t))}var i=n(52),a=n(209);e.exports=r},function(e,t,n){function r(e,t,n,r){e=a(e)?e:c(e),n=n&&!r?s(n):0;var l=e.length;return n<0&&(n=u(l+n,0)),o(e)?n<=l&&e.indexOf(t,n)>-1:!!l&&i(e,t,n)>-1}var i=n(53),a=n(18),o=n(61),s=n(65),c=n(623),u=Math.max;e.exports=r},function(e,t,n){var r=n(22),i=n(496),a=n(35),o=n(523),s=a(function(e){var t=r(e,o);return t.length&&t[0]===e[0]?i(t):[]});e.exports=s},function(e,t,n){function r(e,t){return i(e,t)}var i=n(131);e.exports=r},function(e,t,n){var r=n(500),i=n(54),a=n(140),o=a&&a.isMap,s=o?i(o):r;e.exports=s},function(e,t,n){function r(e){return i(e)&&e!=+e}var i=n(242);e.exports=r},function(e,t,n){var r=n(504),i=n(54),a=n(140),o=a&&a.isSet,s=o?i(o):r;e.exports=s},function(e,t,n){function r(e,t){var n={};return t=o(t,3),a(e,function(e,r,a){i(n,t(e,r,a),e)}),n}var i=n(51),a=n(52),o=n(17);e.exports=r},function(e,t,n){function r(e,t){var n={};return t=o(t,3),a(e,function(e,r,a){i(n,r,t(e,r,a))}),n}var i=n(51),a=n(52),o=n(17);e.exports=r},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(r.Cache||i),n}var i=n(126),a="Expected a function";r.Cache=i,e.exports=r},function(e,t){function n(){}e.exports=n},function(e,t,n){var r=n(35),i=n(135),a=n(55),o=n(38),s=32,c=r(function(e,t){var n=o(t,a(c));return i(e,s,void 0,t,n)});c.placeholder={},e.exports=c},function(e,t,n){var r=n(35),i=n(135),a=n(55),o=n(38),s=64,c=r(function(e,t){var n=o(t,a(c));return i(e,s,void 0,t,n)});c.placeholder={},e.exports=c},function(e,t,n){var r=n(512),i=n(218),a=i(function(e,t){return null==e?{}:r(e,t)});e.exports=a},function(e,t,n){function r(e,t){if(null==e)return{};var n=i(s(e),function(e){return[e]});return t=a(t),o(e,n,function(e,n){return t(e,n[0])})}var i=n(22),a=n(17),o=n(205),s=n(136);e.exports=r},function(e,t,n){function r(e){return o(e)?i(s(e)):a(e)}var i=n(513),a=n(514),o=n(139),s=n(39);e.exports=r},function(e,t,n){function r(e,t,n){return e=s(e),n=null==n?0:i(o(n),0,e.length),t=a(t),e.slice(n,n+t.length)==t}var i=n(491),a=n(133),o=n(65),s=n(147);e.exports=r},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e,t){return e&&e.length?a(e,i(t,2)):0}var i=n(17),a=n(519);e.exports=r},function(e,t,n){function r(e){if(!e)return 0===e?e:0;if((e=i(e))===a||e===-a){return(e<0?-1:1)*o}return e===e?e:0}var i=n(621),a=1/0,o=1.7976931348623157e308;e.exports=r},function(e,t,n){function r(e){if("number"==typeof e)return e;if(a(e))return o;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=u.test(e);return n||l.test(e)?d(e.slice(2),n?2:8):c.test(e)?o:+e}var i=n(10),a=n(62),o=NaN,s=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;e.exports=r},function(e,t,n){function r(e){return i(e,a(e))}var i=n(37),a=n(63);e.exports=r},function(e,t,n){function r(e){return null==e?[]:i(e,a(e))}var i=n(522),a=n(19);e.exports=r},function(e,t,n){function r(e){if(c(e)&&!s(e)&&!(e instanceof i)){if(e instanceof a)return e;if(d.call(e,"__wrapped__"))return u(e)}return new a(e)}var i=n(124),a=n(192),o=n(132),s=n(5),c=n(11),u=n(598),l=Object.prototype,d=l.hasOwnProperty;r.prototype=o.prototype,r.prototype.constructor=r,e.exports=r},function(e,t,n){"use strict";var r=n(627),i=n(626),a=n(249);e.exports={formats:a,parse:i,stringify:r}},function(e,t,n){"use strict";var r=n(148),i=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},o=function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,s=r.split(t.delimiter,o),c=0;c<s.length;++c){var u,l,d=s[c],f=d.indexOf("]="),h=-1===f?d.indexOf("="):f+1;-1===h?(u=t.decoder(d,a.decoder),l=t.strictNullHandling?null:""):(u=t.decoder(d.slice(0,h),a.decoder),l=t.decoder(d.slice(h+1),a.decoder)),i.call(n,u)?n[u]=[].concat(n[u]).concat(l):n[u]=l}return n},s=function(e,t,n){for(var r=t,i=e.length-1;i>=0;--i){var a,o=e[i];if("[]"===o)a=[],a=a.concat(r);else{a=n.plainObjects?Object.create(null):{};var s="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(s,10);!isNaN(c)&&o!==s&&String(c)===s&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(a=[],a[c]=r):a[s]=r}r=a}return r},c=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,c=a.exec(r),u=c?r.slice(0,c.index):r,l=[];if(u){if(!n.plainObjects&&i.call(Object.prototype,u)&&!n.allowPrototypes)return;l.push(u)}for(var d=0;null!==(c=o.exec(r))&&d<n.depth;){if(d+=1,!n.plainObjects&&i.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(c[1])}return c&&l.push("["+r.slice(c.index)+"]"),s(l,t,n)}};e.exports=function(e,t){var n=t?r.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:a.delimiter,n.depth="number"==typeof n.depth?n.depth:a.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:a.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:a.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:a.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:a.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:a.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:a.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:a.strictNullHandling,""===e||null===e||void 0===e)return n.plainObjects?Object.create(null):{};for(var i="string"==typeof e?o(e,n):e,s=n.plainObjects?Object.create(null):{},u=Object.keys(i),l=0;l<u.length;++l){var d=u[l],f=c(d,i[d],n);s=r.merge(s,f,n)}return r.compact(s)}},function(e,t,n){"use strict";var r=n(148),i=n(249),a={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return o.call(e)},skipNulls:!1,strictNullHandling:!1},c=function e(t,n,i,a,o,c,u,l,d,f,h,p){var v=t;if("function"==typeof u)v=u(n,v);else if(v instanceof Date)v=f(v);else if(null===v){if(a)return c&&!p?c(n,s.encoder):n;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||r.isBuffer(v)){if(c){return[h(p?n:c(n,s.encoder))+"="+h(c(v,s.encoder))]}return[h(n)+"="+h(String(v))]}var g=[];if(void 0===v)return g;var m;if(Array.isArray(u))m=u;else{var y=Object.keys(v);m=l?y.sort(l):y}for(var b=0;b<m.length;++b){var _=m[b];o&&null===v[_]||(g=Array.isArray(v)?g.concat(e(v[_],i(n,_),i,a,o,c,u,l,d,f,h,p)):g.concat(e(v[_],n+(d?"."+_:"["+_+"]"),i,a,o,c,u,l,d,f,h,p)))}return g};e.exports=function(e,t){var n=e,o=t?r.assign({},t):{};if(null!==o.encoder&&void 0!==o.encoder&&"function"!=typeof o.encoder)throw new TypeError("Encoder has to be a function.");var u=void 0===o.delimiter?s.delimiter:o.delimiter,l="boolean"==typeof o.strictNullHandling?o.strictNullHandling:s.strictNullHandling,d="boolean"==typeof o.skipNulls?o.skipNulls:s.skipNulls,f="boolean"==typeof o.encode?o.encode:s.encode,h="function"==typeof o.encoder?o.encoder:s.encoder,p="function"==typeof o.sort?o.sort:null,v=void 0!==o.allowDots&&o.allowDots,g="function"==typeof o.serializeDate?o.serializeDate:s.serializeDate,m="boolean"==typeof o.encodeValuesOnly?o.encodeValuesOnly:s.encodeValuesOnly;if(void 0===o.format)o.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,o.format))throw new TypeError("Unknown format option provided.");var y,b,_=i.formatters[o.format];"function"==typeof o.filter?(b=o.filter,n=b("",n)):Array.isArray(o.filter)&&(b=o.filter,y=b);var w=[];if("object"!=typeof n||null===n)return"";var S;S=o.arrayFormat in a?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":"indices";var k=a[S];y||(y=Object.keys(n)),p&&y.sort(p);for(var T=0;T<y.length;++T){var C=y[T];d&&null===n[C]||(w=w.concat(c(n[C],C,k,l,d,f?h:null,b,p,v,g,_,m)))}var x=w.join(u),E=!0===o.addQueryPrefix?"?":"";return x.length>0?E+x:""}},function(e,t,n){"use strict";function r(e,t){this.main=e,this.fn=t,this.lastResults=null}var i=n(369),a=n(68);i.inherits(r,a.EventEmitter),r.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},r.prototype.getModifiedState=function(e){return this.fn(e)},e.exports=r},function(e,t,n){"use strict";var r=n(243),i=n(61),a=n(42),o=n(60),s=n(142),c=n(64),u=n(143),l=n(245),d={addRefinement:function(e,t,n){if(d.isRefined(e,t,n))return e;var r=""+n,i=e[t]?e[t].concat(r):[r],a={};return a[t]=i,s({},a,e)},removeRefinement:function(e,t,n){if(r(n))return d.clearRefinement(e,t);var i=""+n;return d.clearRefinement(e,function(e,n){return t===n&&i===e})},toggleRefinement:function(e,t,n){if(r(n))throw new Error("toggleRefinement should be used with a value");return d.isRefined(e,t,n)?d.removeRefinement(e,t,n):d.addRefinement(e,t,n)},clearRefinement:function(e,t,n){if(r(t))return o(e)?e:{};if(i(t))return o(e[t])?e:l(e,t);if(a(t)){var s=!1,d=c(e,function(e,r,i){var a=u(r,function(e){return!t(e,i,n)});return o(a)?s=!0:(a.length!==r.length&&(s=!0),e[i]=a),e},{});return s?d:e}},isRefined:function(e,t,i){var a=n(94),o=!!e[t]&&e[t].length>0;if(r(i)||!o)return o;var s=""+i;return-1!==a(e[t],s)}};e.exports=d},function(e,t,n){"use strict";function r(e,t){var n={},r=a(t,function(e){return-1!==e.indexOf("attribute:")}),u=o(r,function(e){return e.split(":")[1]});-1===c(u,"*")?i(u,function(t){e.isConjunctiveFacet(t)&&e.isFacetRefined(t)&&(n.facetsRefinements||(n.facetsRefinements={}),n.facetsRefinements[t]=e.facetsRefinements[t]),e.isDisjunctiveFacet(t)&&e.isDisjunctiveFacetRefined(t)&&(n.disjunctiveFacetsRefinements||(n.disjunctiveFacetsRefinements={}),n.disjunctiveFacetsRefinements[t]=e.disjunctiveFacetsRefinements[t]),e.isHierarchicalFacet(t)&&e.isHierarchicalFacetRefined(t)&&(n.hierarchicalFacetsRefinements||(n.hierarchicalFacetsRefinements={}),n.hierarchicalFacetsRefinements[t]=e.hierarchicalFacetsRefinements[t]);var r=e.getNumericRefinements(t);s(r)||(n.numericRefinements||(n.numericRefinements={}),n.numericRefinements[t]=e.numericRefinements[t])}):(s(e.numericRefinements)||(n.numericRefinements=e.numericRefinements),s(e.facetsRefinements)||(n.facetsRefinements=e.facetsRefinements),s(e.disjunctiveFacetsRefinements)||(n.disjunctiveFacetsRefinements=e.disjunctiveFacetsRefinements),s(e.hierarchicalFacetsRefinements)||(n.hierarchicalFacetsRefinements=e.hierarchicalFacetsRefinements));var l=a(t,function(e){return-1===e.indexOf("attribute:")});return i(l,function(t){n[t]=e[t]}),n}var i=n(41),a=n(143),o=n(24),s=n(60),c=n(94);e.exports=r},function(e,t,n){"use strict";var r=n(240),i=n(19),a={advancedSyntax:"aS",allowTyposOnNumericTokens:"aTONT",analyticsTags:"aT",analytics:"a",aroundLatLngViaIP:"aLLVIP",aroundLatLng:"aLL",aroundPrecision:"aP",aroundRadius:"aR",attributesToHighlight:"aTH",attributesToRetrieve:"aTR",attributesToSnippet:"aTS",disjunctiveFacetsRefinements:"dFR",disjunctiveFacets:"dF",distinct:"d",facetsExcludes:"fE",facetsRefinements:"fR",facets:"f",getRankingInfo:"gRI",hierarchicalFacetsRefinements:"hFR",hierarchicalFacets:"hF",highlightPostTag:"hPoT",highlightPreTag:"hPrT",hitsPerPage:"hPP",ignorePlurals:"iP",index:"idx",insideBoundingBox:"iBB",insidePolygon:"iPg",length:"l",maxValuesPerFacet:"mVPF",minimumAroundRadius:"mAR",minProximity:"mP",minWordSizefor1Typo:"mWS1T",minWordSizefor2Typos:"mWS2T",numericFilters:"nF",numericRefinements:"nR",offset:"o",optionalWords:"oW",page:"p",queryType:"qT",query:"q",removeWordsIfNoResults:"rWINR",replaceSynonymsInHighlight:"rSIH",restrictSearchableAttributes:"rSA",synonyms:"s",tagFilters:"tF",tagRefinements:"tR",typoTolerance:"tT",optionalTagFilters:"oTF",optionalFacetFilters:"oFF",snippetEllipsisText:"sET",disableExactOnAttributes:"dEOA",enableExactOnSingleWordQuery:"eEOSWQ"},o=r(a);e.exports={ENCODED_PARAMETERS:i(o),decode:function(e){return o[e]},encode:function(e){return a[e]}}},function(e,t,n){"use strict";function r(e){return function(t,n){var r=e.hierarchicalFacets[n],a=e.hierarchicalFacetsRefinements[r.name]&&e.hierarchicalFacetsRefinements[r.name][0]||"",o=e._getHierarchicalFacetSeparator(r),s=e._getHierarchicalRootPath(r),c=e._getHierarchicalShowParentLevel(r),l=p(e._getHierarchicalFacetSortBy(r)),d=i(l,o,s,c,a),f=t;return s&&(f=t.slice(s.split(o).length)),u(f,d,{name:e.hierarchicalFacets[n].name,count:null,isRefined:!0,path:null,data:null})}}function i(e,t,n,r,i){return function(s,u,d){var p=s;if(d>0){var v=0;for(p=s;v<d;)p=p&&f(p.data,{isRefined:!0}),v++}if(p){var g=a(p.path||n,i,t,n,r);p.data=l(c(h(u.data,g),o(t,i)),e[0],e[1])}return s}}function a(e,t,n,r,i){return function(a,o){return(!r||0===o.indexOf(r)&&r!==o)&&(!r&&-1===o.indexOf(n)||r&&o.split(n).length-r.split(n).length==1||-1===o.indexOf(n)&&-1===t.indexOf(n)||0===t.indexOf(o)||0===o.indexOf(e+n)&&(i||0===o.indexOf(t)))}}function o(e,t){return function(n,r){return{name:d(s(r.split(e))),path:r,count:n,isRefined:t===r||0===t.indexOf(r+e),data:null}}}e.exports=r;var s=n(244),c=n(24),u=n(64),l=n(246),d=n(248),f=n(93),h=n(615),p=n(251)},function(e,t,n){"use strict";function r(e,t,n){e.addAlgoliaAgent&&!o(e)&&e.addAlgoliaAgent("JS Helper "+y),this.setClient(e);var r=n||{};r.index=t,this.state=s.make(r),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}function i(e){if(e<0)throw new Error("Page requested below 0.");return this._change(this.state.setPage(e)),this}function a(){return this.state.page}function o(e){var t=e._ua;return!!t&&-1!==t.indexOf("JS Helper")}var s=n(149),c=n(250),u=n(628),l=n(635),d=n(369),f=n(68),h=n(237),p=n(41),v=n(60),g=n(24),m=n(150),y=n(252);d.inherits(r,f.EventEmitter),r.prototype.search=function(){return this._search(),this},r.prototype.getQuery=function(){var e=this.state;return l._getHitsSearchParams(e)},r.prototype.searchOnce=function(e,t){var n=e?this.state.setQueryParameters(e):this.state,r=l._getQueries(n.index,n),i=this;return this._currentNbQueries++,this.emit("searchOnce",n),t?void this.client.search(r).then(function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(null,new c(n,e.results),n)}).catch(function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(e,null,n)}):this.client.search(r).then(function(e){return i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),{content:new c(n,e.results),state:n,_originalResponse:e}},function(e){throw i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),e})},r.prototype.searchForFacetValues=function(e,t,n,r){var i=this.state.setQueryParameters(r||{}),a=i.isDisjunctiveFacet(e),o=l.getSearchForFacetQuery(e,t,n,i);this._currentNbQueries++;var s=this;return this.emit("searchForFacetValues",i,e,t),("function"==typeof this.client.searchForFacetValues?this.client.searchForFacetValues([{indexName:i.index,params:o}]):this.client.initIndex(i.index).searchForFacetValues(o)).then(function(t){return s._currentNbQueries--,0===s._currentNbQueries&&s.emit("searchQueueEmpty"),t=Array.isArray(t)?t[0]:t,t.facetHits=p(t.facetHits,function(t){t.isRefined=a?i.isDisjunctiveFacetRefined(e,t.value):i.isFacetRefined(e,t.value)}),t},function(e){throw s._currentNbQueries--,0===s._currentNbQueries&&s.emit("searchQueueEmpty"),e})},r.prototype.setQuery=function(e){return this._change(this.state.setPage(0).setQuery(e)),this},r.prototype.clearRefinements=function(e){return this._change(this.state.setPage(0).clearRefinements(e)),this},r.prototype.clearTags=function(){return this._change(this.state.setPage(0).clearTags()),this},r.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change(this.state.setPage(0).addDisjunctiveFacetRefinement(e,t)),this},r.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},r.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change(this.state.setPage(0).addHierarchicalFacetRefinement(e,t)),this},r.prototype.addNumericRefinement=function(e,t,n){return this._change(this.state.setPage(0).addNumericRefinement(e,t,n)),this},r.prototype.addFacetRefinement=function(e,t){return this._change(this.state.setPage(0).addFacetRefinement(e,t)),this},r.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},r.prototype.addFacetExclusion=function(e,t){return this._change(this.state.setPage(0).addExcludeRefinement(e,t)),this},r.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},r.prototype.addTag=function(e){return this._change(this.state.setPage(0).addTagRefinement(e)),this},r.prototype.removeNumericRefinement=function(e,t,n){return this._change(this.state.setPage(0).removeNumericRefinement(e,t,n)),this},r.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change(this.state.setPage(0).removeDisjunctiveFacetRefinement(e,t)),this},r.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},r.prototype.removeHierarchicalFacetRefinement=function(e){return this._change(this.state.setPage(0).removeHierarchicalFacetRefinement(e)),this},r.prototype.removeFacetRefinement=function(e,t){return this._change(this.state.setPage(0).removeFacetRefinement(e,t)),this},r.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},r.prototype.removeFacetExclusion=function(e,t){return this._change(this.state.setPage(0).removeExcludeRefinement(e,t)),this},r.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},r.prototype.removeTag=function(e){return this._change(this.state.setPage(0).removeTagRefinement(e)),this},r.prototype.toggleFacetExclusion=function(e,t){return this._change(this.state.setPage(0).toggleExcludeFacetRefinement(e,t)),this},r.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},r.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},r.prototype.toggleFacetRefinement=function(e,t){return this._change(this.state.setPage(0).toggleFacetRefinement(e,t)),this},r.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},r.prototype.toggleTag=function(e){return this._change(this.state.setPage(0).toggleTagRefinement(e)),this},r.prototype.nextPage=function(){return this.setPage(this.state.page+1)},r.prototype.previousPage=function(){return this.setPage(this.state.page-1)},r.prototype.setCurrentPage=i,r.prototype.setPage=i,r.prototype.setIndex=function(e){return this._change(this.state.setPage(0).setIndex(e)),this},r.prototype.setQueryParameter=function(e,t){return this._change(this.state.setPage(0).setQueryParameter(e,t)),this},r.prototype.setState=function(e){return this._change(s.make(e)),this},r.prototype.getState=function(e){return void 0===e?this.state:this.state.filter(e)},r.prototype.getStateAsQueryString=function(e){var t=e&&e.filters||["query","attribute:*"],n=this.getState(t);return m.getQueryStringFromState(n,e)},r.getConfigurationFromQueryString=m.getStateFromQueryString,r.getForeignConfigurationInQueryString=m.getUnrecognizedParametersInQueryString,r.prototype.setStateFromQueryString=function(e,t){var n=t&&t.triggerChange||!1,r=m.getStateFromQueryString(e,t),i=this.state.setQueryParameters(r);n?this.setState(i):this.overrideStateWithoutTriggeringChangeEvent(i)},r.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new s(e),this},r.prototype.isRefined=function(e,t){if(this.state.isConjunctiveFacet(e))return this.state.isFacetRefined(e,t);if(this.state.isDisjunctiveFacet(e))return this.state.isDisjunctiveFacetRefined(e,t);throw new Error(e+" is not properly defined in this helper configuration(use the facets or disjunctiveFacets keys to configure it)")},r.prototype.hasRefinements=function(e){return!v(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},r.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},r.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},r.prototype.hasTag=function(e){return this.state.isTagRefined(e)},r.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},r.prototype.getIndex=function(){return this.state.index},r.prototype.getCurrentPage=a,r.prototype.getPage=a,r.prototype.getTags=function(){return this.state.tagRefinements},r.prototype.getQueryParameter=function(e){return this.state.getQueryParameter(e)},r.prototype.getRefinements=function(e){var t=[];if(this.state.isConjunctiveFacet(e)){var n=this.state.getConjunctiveRefinements(e);p(n,function(e){t.push({value:e,type:"conjunctive"})});var r=this.state.getExcludeRefinements(e);p(r,function(e){t.push({value:e,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(e)){var i=this.state.getDisjunctiveRefinements(e);p(i,function(e){t.push({value:e,type:"disjunctive"})})}var a=this.state.getNumericRefinements(e);return p(a,function(e,n){t.push({value:e,operator:n,type:"numeric"})}),t},r.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},r.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},r.prototype._search=function(){var e=this.state,t=l._getQueries(e.index,e),n=[{state:e,queriesCount:t.length,helper:this}];this.emit("search",e,this.lastResults);var r=g(this.derivedHelpers,function(t){var r=t.getModifiedState(e),i=l._getQueries(r.index,r);return n.push({state:r,queriesCount:i.length,helper:t}),t.emit("search",r,t.lastResults),i}),i=t.concat(h(r)),a=this._queryId++;this._currentNbQueries++;try{this.client.search(i).then(this._dispatchAlgoliaResponse.bind(this,n,a)).catch(this._dispatchAlgoliaError.bind(this,a))}catch(e){this.emit("error",e)}},r.prototype._dispatchAlgoliaResponse=function(e,t,n){if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty");var r=n.results;p(e,function(e){var t=e.state,n=e.queriesCount,i=e.helper,a=r.splice(0,n),o=i.lastResults=new c(t,a);i.emit("result",o,t)})}},r.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",t),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},r.prototype.containsRefinement=function(e,t,n,r){return e||0!==t.length||0!==n.length||0!==r.length},r.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&this.state.disjunctiveRefinements[e].length>0},r.prototype._change=function(e){e!==this.state&&(this.state=e,this.emit("change",this.state,this.lastResults))},r.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},r.prototype.setClient=function(e){return this.client===e?this:(e.addAlgoliaAgent&&!o(e)&&e.addAlgoliaAgent("JS Helper "+y),this.client=e,this)},r.prototype.getClient=function(){return this.client},r.prototype.derive=function(e){var t=new u(this,e);return this.derivedHelpers.push(t),t},r.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(-1===t)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)},r.prototype.hasPendingRequests=function(){return this._currentNbQueries>0},e.exports=r},function(e,t,n){"use strict";function r(e){if(a(e))return e;if(o(e))return parseFloat(e);if(Array.isArray(e))return i(e,r);throw new Error("The value should be a number, a parseable string or an array of those.")}var i=n(24),a=n(242),o=n(61);e.exports=r},function(e,t,n){"use strict";var r=n(41),i=n(24),a=n(64),o=n(146),s={_getQueries:function(e,t){var n=[];return n.push({indexName:e,params:s._getHitsSearchParams(t)}),r(t.getRefinedDisjunctiveFacets(),function(r){n.push({indexName:e,params:s._getDisjunctiveFacetSearchParams(t,r)})}),r(t.getRefinedHierarchicalFacets(),function(r){var i=t.getHierarchicalFacetByName(r),a=t.getHierarchicalRefinement(r),o=t._getHierarchicalFacetSeparator(i);a.length>0&&a[0].split(o).length>1&&n.push({indexName:e,params:s._getDisjunctiveFacetSearchParams(t,r,!0)})}),n},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(s._getHitsHierarchicalFacetsAttributes(e)),n=s._getFacetFilters(e),r=s._getNumericFilters(e),i=s._getTagFilters(e),a={facets:t,tagFilters:i};return n.length>0&&(a.facetFilters=n),r.length>0&&(a.numericFilters=r),o(e.getQueryParams(),a)},_getDisjunctiveFacetSearchParams:function(e,t,n){var r=s._getFacetFilters(e,t,n),i=s._getNumericFilters(e,t),a=s._getTagFilters(e),c={hitsPerPage:1,page:0,attributesToRetrieve:[],attributesToHighlight:[],attributesToSnippet:[],tagFilters:a,analytics:!1,clickAnalytics:!1},u=e.getHierarchicalFacetByName(t);return c.facets=u?s._getDisjunctiveHierarchicalFacetAttribute(e,u,n):t,i.length>0&&(c.numericFilters=i),r.length>0&&(c.facetFilters=r),o(e.getQueryParams(),c)},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var n=[];return r(e.numericRefinements,function(e,a){r(e,function(e,o){t!==a&&r(e,function(e){if(Array.isArray(e)){var t=i(e,function(e){return a+o+e});n.push(t)}else n.push(a+o+e)})})}),n},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(e,t,n){var i=[];return r(e.facetsRefinements,function(e,t){r(e,function(e){i.push(t+":"+e)})}),r(e.facetsExcludes,function(e,t){r(e,function(e){i.push(t+":-"+e)})}),r(e.disjunctiveFacetsRefinements,function(e,n){if(n!==t&&e&&0!==e.length){var a=[];r(e,function(e){a.push(n+":"+e)}),i.push(a)}}),r(e.hierarchicalFacetsRefinements,function(r,a){var o=r[0];if(void 0!==o){var s,c,u=e.getHierarchicalFacetByName(a),l=e._getHierarchicalFacetSeparator(u),d=e._getHierarchicalRootPath(u);if(t===a){if(-1===o.indexOf(l)||!d&&!0===n||d&&d.split(l).length===o.split(l).length)return;d?(c=d.split(l).length-1,o=d):(c=o.split(l).length-2,o=o.slice(0,o.lastIndexOf(l))),s=u.attributes[c]}else c=o.split(l).length-1,s=u.attributes[c];s&&i.push([s+":"+o])}}),i},_getHitsHierarchicalFacetsAttributes:function(e){var t=[];return a(e.hierarchicalFacets,function(t,n){var r=e.getHierarchicalRefinement(n.name)[0];if(!r)return t.push(n.attributes[0]),t;var i=e._getHierarchicalFacetSeparator(n),a=r.split(i).length,o=n.attributes.slice(0,a+1);return t.concat(o)},t)},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,n){var r=e._getHierarchicalFacetSeparator(t);if(!0===n){var i=e._getHierarchicalRootPath(t),a=0;return i&&(a=i.split(r).length),[t.attributes[a]]}var o=e.getHierarchicalRefinement(t.name)[0]||"",s=o.split(r).length-1;return t.attributes.slice(0,s+1)},getSearchForFacetQuery:function(e,t,n,r){var i=r.isDisjunctiveFacet(e)?r.clearRefinements(e):r,a={facetQuery:t,facetName:e};return"number"==typeof n&&(a.maxFacetHits=n),o(s._getHitsSearchParams(i),a)}};e.exports=s},function(e,t,n){function r(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function i(e){function n(){if(n.enabled){var e=n,r=+new Date,i=r-(u||r);e.diff=i,e.prev=u,e.curr=r,u=r;for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var s=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;s++;var i=t.formatters[r];if("function"==typeof i){var o=a[s];n=i.call(e,o),a.splice(s,1),s--}return n}),t.formatArgs.call(e,a);(n.log||t.log||console.log.bind(console)).apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=r(e),"function"==typeof t.init&&t.init(n),n}function a(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&(e=n[i].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function o(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=i.debug=i.default=i,t.coerce=c,t.disable=o,t.enable=a,t.enabled=s,t.humanize=n(355),t.names=[],t.skips=[],t.formatters={};var u},function(e,t,n){(function(t){function r(e,t,r){var a=n(66)("algoliasearch"),o=n(43),s=n(96),u=n(98),l="Usage: algoliasearch(applicationID, apiKey, opts)";if(!0!==r._allowEmptyCredentials&&!e)throw new c.AlgoliaSearchError("Please provide an application ID. "+l);if(!0!==r._allowEmptyCredentials&&!t)throw new c.AlgoliaSearchError("Please provide an API key. "+l);this.applicationID=e,this.apiKey=t,this.hosts={read:[],write:[]},r=r||{},this._timeouts=r.timeouts||{connect:1e3,read:2e3,write:3e4},r.timeout&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=r.timeout);var d=r.protocol||"https:";if(/:$/.test(d)||(d+=":"),"http:"!==d&&"https:"!==d)throw new c.AlgoliaSearchError("protocol must be `http:` or `https:` (was `"+r.protocol+"`)");if(this._checkAppIdData(),r.hosts)s(r.hosts)?(this.hosts.read=o(r.hosts),this.hosts.write=o(r.hosts)):(this.hosts.read=o(r.hosts.read),this.hosts.write=o(r.hosts.write));else{var f=u(this._shuffleResult,function(t){return e+"-"+t+".algolianet.com"}),h=(!1===r.dsn?"":"-dsn")+".algolia.net";this.hosts.read=[this.applicationID+h].concat(f),this.hosts.write=[this.applicationID+".algolia.net"].concat(f)}this.hosts.read=u(this.hosts.read,i(d)),this.hosts.write=u(this.hosts.write,i(d)),this.extraHeaders={},this.cache=r._cache||{},this._ua=r._ua,this._useCache=!(void 0!==r._useCache&&!r._cache)||r._useCache,this._useFallback=void 0===r.useFallback||r.useFallback,this._setTimeout=r._setTimeout,a("init done, %j",this)}function i(e){return function(t){return e+"//"+t.toLowerCase()}}function a(e){if(void 0===Array.prototype.toJSON)return JSON.stringify(e);var t=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(e);return Array.prototype.toJSON=t,n}function o(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),r-=1,t=e[r],e[r]=e[n],e[n]=t;return e}function s(e){var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;r="x-algolia-api-key"===n||"x-algolia-application-id"===n?"**hidden for security purposes**":e[n],t[n]=r}return t}e.exports=r;var c=n(97),u=n(645),l=n(638),d=n(648),f=t.env.RESET_APP_DATA_TIMER&&parseInt(t.env.RESET_APP_DATA_TIMER,10)||12e4;r.prototype.initIndex=function(e){return new l(this,e)},r.prototype.setExtraHeader=function(e,t){this.extraHeaders[e.toLowerCase()]=t},r.prototype.getExtraHeader=function(e){return this.extraHeaders[e.toLowerCase()]},r.prototype.unsetExtraHeader=function(e){delete this.extraHeaders[e.toLowerCase()]},r.prototype.addAlgoliaAgent=function(e){-1===this._ua.indexOf(";"+e)&&(this._ua+=";"+e)},r.prototype._jsonRequest=function(e){function t(n,u){function m(e){var t=e&&e.body&&e.body.message&&e.body.status||e.statusCode||e&&e.body&&200;o("received response: statusCode: %s, computed statusCode: %d, headers: %j",e.statusCode,t,e.headers);var n=2===Math.floor(t/100),a=new Date;if(g.push({currentHost:k,headers:s(i),content:r||null,contentLength:void 0!==r?r.length:null,method:u.method,timeouts:u.timeouts,url:u.url,startTime:S,endTime:a,duration:a-S,statusCode:t}),n)return f._useCache&&d&&(d[w]=e.responseText),e.body;if(4!==Math.floor(t/100))return h+=1,b();o("unrecoverable error");var l=new c.AlgoliaSearchError(e.body&&e.body.message,{debugData:g,statusCode:t});return f._promise.reject(l)}function y(t){o("error: %s, stack: %s",t.message,t.stack);var n=new Date;return g.push({currentHost:k,headers:s(i),content:r||null,contentLength:void 0!==r?r.length:null,method:u.method,timeouts:u.timeouts,url:u.url,startTime:S,endTime:n,duration:n-S}),t instanceof c.AlgoliaSearchError||(t=new c.Unknown(t&&t.message,t)),h+=1,t instanceof c.Unknown||t instanceof c.UnparsableJSON||h>=f.hosts[e.hostType].length&&(p||!v)?(t.debugData=g,f._promise.reject(t)):t instanceof c.RequestTimeout?_():b()}function b(){return o("retrying request"),f._incrementHostIndex(e.hostType),t(n,u)}function _(){return o("retrying request with higher timeout"),f._incrementHostIndex(e.hostType),f._incrementTimeoutMultipler(),u.timeouts=f._getTimeoutsForRequest(e.hostType),t(n,u)}f._checkAppIdData();var w,S=new Date;if(f._useCache&&(w=e.url),f._useCache&&r&&(w+="_body_"+u.body),f._useCache&&d&&void 0!==d[w])return o("serving response from cache"),f._promise.resolve(JSON.parse(d[w]));if(h>=f.hosts[e.hostType].length)return!v||p?(o("could not get any response"),f._promise.reject(new c.AlgoliaSearchError("Cannot connect to the AlgoliaSearch API. Send an email to support@algolia.com to report and resolve the issue. Application id was: "+f.applicationID,{debugData:g}))):(o("switching to fallback"),h=0,u.method=e.fallback.method,u.url=e.fallback.url,u.jsonBody=e.fallback.body,u.jsonBody&&(u.body=a(u.jsonBody)),i=f._computeRequestHeaders({additionalUA:l,headers:e.headers}),u.timeouts=f._getTimeoutsForRequest(e.hostType),f._setHostIndexByType(0,e.hostType),p=!0,t(f._request.fallback,u));var k=f._getHostByType(e.hostType),T=k+u.url,C={body:u.body,jsonBody:u.jsonBody,method:u.method,headers:i,timeouts:u.timeouts,debug:o};return o("method: %s, url: %s, headers: %j, timeouts: %d",C.method,T,C.headers,C.timeouts),n===f._request.fallback&&o("using fallback"),n.call(f,T,C).then(m,y)}this._checkAppIdData();var r,i,o=n(66)("algoliasearch:"+e.url),l=e.additionalUA||"",d=e.cache,f=this,h=0,p=!1,v=f._useFallback&&f._request.fallback&&e.fallback;this.apiKey.length>500&&void 0!==e.body&&(void 0!==e.body.params||void 0!==e.body.requests)?(e.body.apiKey=this.apiKey,i=this._computeRequestHeaders({additionalUA:l,withApiKey:!1,headers:e.headers})):i=this._computeRequestHeaders({additionalUA:l,headers:e.headers}),void 0!==e.body&&(r=a(e.body)),o("request start");var g=[],m=t(f._request,{url:e.url,method:e.method,body:r,jsonBody:e.body,timeouts:f._getTimeoutsForRequest(e.hostType)});if("function"!=typeof e.callback)return m;m.then(function(t){u(function(){e.callback(null,t)},f._setTimeout||setTimeout)},function(t){u(function(){e.callback(t)},f._setTimeout||setTimeout)})},r.prototype._getSearchParams=function(e,t){if(void 0===e||null===e)return t;for(var n in e)null!==n&&void 0!==e[n]&&e.hasOwnProperty(n)&&(t+=""===t?"":"&",t+=n+"="+encodeURIComponent("[object Array]"===Object.prototype.toString.call(e[n])?a(e[n]):e[n]));return t},r.prototype._computeRequestHeaders=function(e){var t=n(45),r=e.additionalUA?this._ua+";"+e.additionalUA:this._ua,i={"x-algolia-agent":r,"x-algolia-application-id":this.applicationID};return!1!==e.withApiKey&&(i["x-algolia-api-key"]=this.apiKey),this.userToken&&(i["x-algolia-usertoken"]=this.userToken),this.securityTags&&(i["x-algolia-tagfilters"]=this.securityTags),t(this.extraHeaders,function(e,t){i[t]=e}),e.headers&&t(e.headers,function(e,t){i[t]=e}),i},r.prototype.search=function(e,t,r){var i=n(96),a=n(98);if(!i(e))throw new Error("Usage: client.search(arrayOfQueries[, callback])");"function"==typeof t?(r=t,t={}):void 0===t&&(t={});var o=this,s={requests:a(e,function(e){var t="";return void 0!==e.query&&(t+="query="+encodeURIComponent(e.query)),{indexName:e.indexName,params:o._getSearchParams(e.params,t)}})},c=a(s.requests,function(e,t){return t+"="+encodeURIComponent("/1/indexes/"+encodeURIComponent(e.indexName)+"?"+e.params)}).join("&"),u="/1/indexes/*/queries";return void 0!==t.strategy&&(u+="?strategy="+t.strategy),this._jsonRequest({cache:this.cache,method:"POST",url:u,body:s,hostType:"read",fallback:{method:"GET",url:"/1/indexes/*",body:{params:c}},callback:r})},r.prototype.searchForFacetValues=function(e){var t=n(96),r=n(98),i="Usage: client.searchForFacetValues([{indexName, params: {facetName, facetQuery, ...params}}, ...queries])";if(!t(e))throw new Error(i);var a=this;return Promise.all(r(e,function(e){if(!e||void 0===e.indexName||void 0===e.params.facetName||void 0===e.params.facetQuery)throw new Error(i);var t=n(43),r=n(254),o=e.indexName,s=e.params,c=s.facetName,u=r(t(s),function(e){return"facetName"===e}),l=a._getSearchParams(u,"");return a._jsonRequest({cache:a.cache,method:"POST",url:"/1/indexes/"+encodeURIComponent(o)+"/facets/"+encodeURIComponent(c)+"/query",hostType:"read",body:{params:l}})}))},r.prototype.setSecurityTags=function(e){if("[object Array]"===Object.prototype.toString.call(e)){for(var t=[],n=0;n<e.length;++n)if("[object Array]"===Object.prototype.toString.call(e[n])){for(var r=[],i=0;i<e[n].length;++i)r.push(e[n][i]);t.push("("+r.join(",")+")")}else t.push(e[n]);e=t.join(",")}this.securityTags=e},r.prototype.setUserToken=function(e){this.userToken=e},r.prototype.clearCache=function(){this.cache={}},r.prototype.setRequestTimeout=function(e){e&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=e)},r.prototype.setTimeouts=function(e){this._timeouts=e},r.prototype.getTimeouts=function(){return this._timeouts},r.prototype._getAppIdData=function(){var e=d.get(this.applicationID);return null!==e&&this._cacheAppIdData(e),e},r.prototype._setAppIdData=function(e){return e.lastChange=(new Date).getTime(),this._cacheAppIdData(e),d.set(this.applicationID,e)},r.prototype._checkAppIdData=function(){var e=this._getAppIdData(),t=(new Date).getTime();return null===e||t-e.lastChange>f?this._resetInitialAppIdData(e):e},r.prototype._resetInitialAppIdData=function(e){var t=e||{};return t.hostIndexes={read:0,write:0},t.timeoutMultiplier=1,t.shuffleResult=t.shuffleResult||o([1,2,3]),this._setAppIdData(t)},r.prototype._cacheAppIdData=function(e){this._hostIndexes=e.hostIndexes,this._timeoutMultiplier=e.timeoutMultiplier,this._shuffleResult=e.shuffleResult},r.prototype._partialAppIdDataUpdate=function(e){var t=n(45),r=this._getAppIdData();return t(e,function(e,t){r[t]=e}),this._setAppIdData(r)},r.prototype._getHostByType=function(e){return this.hosts[e][this._getHostIndexByType(e)]},r.prototype._getTimeoutMultiplier=function(){return this._timeoutMultiplier},r.prototype._getHostIndexByType=function(e){return this._hostIndexes[e]},r.prototype._setHostIndexByType=function(e,t){var r=n(43),i=r(this._hostIndexes);return i[t]=e,this._partialAppIdDataUpdate({hostIndexes:i}),e},r.prototype._incrementHostIndex=function(e){return this._setHostIndexByType((this._getHostIndexByType(e)+1)%this.hosts[e].length,e)},r.prototype._incrementTimeoutMultipler=function(){var e=Math.max(this._timeoutMultiplier+1,4);return this._partialAppIdDataUpdate({timeoutMultiplier:e})},r.prototype._getTimeoutsForRequest=function(e){return{connect:this._timeouts.connect*this._timeoutMultiplier,complete:this._timeouts[e]*this._timeoutMultiplier}}}).call(t,n(9))},function(e,t,n){function r(e,t){this.indexName=t,this.as=e,this.typeAheadArgs=null,this.typeAheadValueOption=null,this.cache={}}var i=n(253),a=n(643),o=n(644);e.exports=r,r.prototype.clearCache=function(){this.cache={}},r.prototype.search=i("query"),r.prototype.similarSearch=i("similarQuery"),r.prototype.browse=function(e,t,r){var i,a,o=n(646),s=this;0===arguments.length||1===arguments.length&&"function"==typeof arguments[0]?(i=0,r=arguments[0],e=void 0):"number"==typeof arguments[0]?(i=arguments[0],"number"==typeof arguments[1]?a=arguments[1]:"function"==typeof arguments[1]&&(r=arguments[1],a=void 0),e=void 0,t=void 0):"object"==typeof arguments[0]?("function"==typeof arguments[1]&&(r=arguments[1]),t=arguments[0],e=void 0):"string"==typeof arguments[0]&&"function"==typeof arguments[1]&&(r=arguments[1],t=void 0),t=o({},t||{},{page:i,hitsPerPage:a,query:e});var c=this.as._getSearchParams(t,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(s.indexName)+"/browse",body:{params:c},hostType:"read",callback:r})},r.prototype.browseFrom=function(e,t){return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse",body:{cursor:e},hostType:"read",callback:t})},r.prototype.searchForFacetValues=function(e,t){var r=n(43),i=n(254);if(void 0===e.facetName||void 0===e.facetQuery)throw new Error("Usage: index.searchForFacetValues({facetName, facetQuery, ...params}[, callback])");var a=e.facetName,o=i(r(e),function(e){return"facetName"===e}),s=this.as._getSearchParams(o,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/facets/"+encodeURIComponent(a)+"/query",hostType:"read",body:{params:s},callback:t})},r.prototype.searchFacet=a(function(e,t){return this.searchForFacetValues(e,t)},o("index.searchFacet(params[, callback])","index.searchForFacetValues(params[, callback])")),r.prototype._search=function(e,t,n,r){return this.as._jsonRequest({cache:this.cache,method:"POST",url:t||"/1/indexes/"+encodeURIComponent(this.indexName)+"/query",body:{params:e},hostType:"read",fallback:{method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName),body:{params:e}},callback:n,additionalUA:r})},r.prototype.getObject=function(e,t,n){var r=this;1!==arguments.length&&"function"!=typeof t||(n=t,t=void 0);var i="";if(void 0!==t){i="?attributes=";for(var a=0;a<t.length;++a)0!==a&&(i+=","),i+=t[a]}return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/"+encodeURIComponent(e)+i,hostType:"read",callback:n})},r.prototype.getObjects=function(e,t,r){var i=n(96),a=n(98);if(!i(e))throw new Error("Usage: index.getObjects(arrayOfObjectIDs[, callback])");var o=this;1!==arguments.length&&"function"!=typeof t||(r=t,t=void 0);var s={requests:a(e,function(e){var n={indexName:o.indexName,objectID:e};return t&&(n.attributesToRetrieve=t.join(",")),n})};return this.as._jsonRequest({method:"POST",url:"/1/indexes/*/objects",hostType:"read",body:s,callback:r})},r.prototype.as=null,r.prototype.indexName=null,r.prototype.typeAheadArgs=null,r.prototype.typeAheadValueOption=null},function(e,t,n){"use strict";var r=n(637),i=n(640);e.exports=i(r,"(lite) ")},function(e,t,n){"use strict";(function(t){var r=n(69),i=r.Promise||n(722).Promise;e.exports=function(e,a){function o(e,t,r){return r=n(43)(r||{}),r._ua=r._ua||o.ua,new s(e,t,r)}function s(){e.apply(this,arguments)}var c=n(70),u=n(97),l=n(641),d=n(642),f=n(647);a=a||"","debug"===t.env.NODE_ENV&&n(66).enable("algoliasearch*"),o.version=n(649),o.ua="Algolia for vanilla JavaScript "+a+o.version,o.initPlaces=f(o),r.__algolia={debug:n(66),algoliasearch:o};var h={hasXMLHttpRequest:"XMLHttpRequest"in r,hasXDomainRequest:"XDomainRequest"in r};return h.hasXMLHttpRequest&&(h.cors="withCredentials"in new XMLHttpRequest),c(s,e),s.prototype._request=function(e,t){return new i(function(n,r){function i(){if(!p){clearTimeout(f);var e;try{e={body:JSON.parse(g.responseText),responseText:g.responseText,statusCode:g.status,headers:g.getAllResponseHeaders&&g.getAllResponseHeaders()||{}}}catch(t){e=new u.UnparsableJSON({more:g.responseText})}e instanceof u.UnparsableJSON?r(e):n(e)}}function a(e){p||(clearTimeout(f),r(new u.Network({more:e})))}function o(){p=!0,g.abort(),r(new u.RequestTimeout)}function s(){m=!0,clearTimeout(f),f=setTimeout(o,t.timeouts.complete)}function c(){m||s()}function d(){!m&&g.readyState>1&&s()}if(!h.cors&&!h.hasXDomainRequest)return void r(new u.Network("CORS not supported"));e=l(e,t.headers);var f,p,v=t.body,g=h.cors?new XMLHttpRequest:new XDomainRequest,m=!1;f=setTimeout(o,t.timeouts.connect),g.onprogress=c,"onreadystatechange"in g&&(g.onreadystatechange=d),g.onload=i,g.onerror=a,g instanceof XMLHttpRequest?g.open(t.method,e,!0):g.open(t.method,e),h.cors&&(v&&("POST"===t.method?g.setRequestHeader("content-type","application/x-www-form-urlencoded"):g.setRequestHeader("content-type","application/json")),g.setRequestHeader("accept","application/json")),g.send(v)})},s.prototype._request.fallback=function(e,t){return e=l(e,t.headers),new i(function(n,r){d(e,t,function(e,t){if(e)return void r(e);n(t)})})},s.prototype._promise={reject:function(e){return i.reject(e)},resolve:function(e){return i.resolve(e)},delay:function(e){return new i(function(t){setTimeout(t,e)})}},o}}).call(t,n(9))},function(e,t,n){"use strict";function r(e,t){return/\?/.test(e)?e+="&":e+="?",e+i(t)}e.exports=r;var i=n(1031)},function(e,t,n){"use strict";function r(e,t,n){function r(){t.debug("JSONP: success"),g||f||(g=!0,d||(t.debug("JSONP: Fail. Script loaded but did not call the callback"),s(),n(new i.JSONPScriptFail)))}function o(){"loaded"!==this.readyState&&"complete"!==this.readyState||r()}function s(){clearTimeout(m),p.onload=null,p.onreadystatechange=null,p.onerror=null,h.removeChild(p)}function c(){try{delete window[v],delete window[v+"_loaded"]}catch(e){window[v]=window[v+"_loaded"]=void 0}}function u(){t.debug("JSONP: Script timeout"),f=!0,s(),n(new i.RequestTimeout)}function l(){t.debug("JSONP: Script error"),g||f||(s(),n(new i.JSONPScriptError))}if("GET"!==t.method)return void n(new Error("Method "+t.method+" "+e+" is not supported by JSONP."));t.debug("JSONP: start");var d=!1,f=!1;a+=1;var h=document.getElementsByTagName("head")[0],p=document.createElement("script"),v="algoliaJSONP_"+a,g=!1;window[v]=function(e){if(c(),f)return void t.debug("JSONP: Late answer, ignoring");d=!0,s(),n(null,{body:e})},e+="&callback="+v,t.jsonBody&&t.jsonBody.params&&(e+="&"+t.jsonBody.params);var m=setTimeout(u,t.timeouts.complete);p.onreadystatechange=o,p.onload=r,p.onerror=l,p.async=!0,p.defer=!0,p.src=e,h.appendChild(p)}e.exports=r;var i=n(97),a=0},function(e,t){e.exports=function(e,t){function n(){return r||(console.warn(t),r=!0),e.apply(this,arguments)}var r=!1;return n}},function(e,t){e.exports=function(e,t){return"algoliasearch: `"+e+"` was replaced by `"+t+"`. Please see https://github.com/algolia/algoliasearch-client-javascript/wiki/Deprecated#"+e.toLowerCase().replace(/[\.\(\)]/g,"")}},function(e,t){e.exports=function(e,t){t(e,0)}},function(e,t,n){var r=n(45);e.exports=function e(t){var n=Array.prototype.slice.call(arguments);return r(n,function(n){for(var r in n)n.hasOwnProperty(r)&&("object"==typeof t[r]&&"object"==typeof n[r]?t[r]=e({},t[r],n[r]):void 0!==n[r]&&(t[r]=n[r]))}),t}},function(e,t,n){function r(e){return function(t,r,a){var o=n(43);a=a&&o(a)||{},a.hosts=a.hosts||["places-dsn.algolia.net","places-1.algolianet.com","places-2.algolianet.com","places-3.algolianet.com"],0!==arguments.length&&"object"!=typeof t&&void 0!==t||(t="",r="",a._allowEmptyCredentials=!0);var s=e(t,r,a),c=s.initIndex("places");return c.search=i("query","/1/places/query"),c.getObject=function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/places/"+encodeURIComponent(e),hostType:"read",callback:t})},c}}e.exports=r;var i=n(253)},function(e,t,n){(function(t){function r(e,t){return c("localStorage failed with",t),o(),s=l,s.get(e)}function i(e,t){return 1===arguments.length?s.get(e):s.set(e,t)}function a(){try{return"localStorage"in t&&null!==t.localStorage&&(t.localStorage[u]||t.localStorage.setItem(u,JSON.stringify({})),!0)}catch(e){return!1}}function o(){try{t.localStorage.removeItem(u)}catch(e){}}var s,c=n(66)("algoliasearch:src/hostIndexState.js"),u="algoliasearch-client-js",l={state:{},set:function(e,t){return this.state[e]=t,this.state[e]},get:function(e){return this.state[e]||null}},d={set:function(e,n){l.set(e,n);try{var i=JSON.parse(t.localStorage[u]);return i[e]=n,t.localStorage[u]=JSON.stringify(i),i[e]}catch(t){return r(e,t)}},get:function(e){try{return JSON.parse(t.localStorage[u])[e]||null}catch(t){return r(e,t)}}};s=a()?d:l,e.exports={get:i,set:i,supportsLocalStorage:a}}).call(t,n(6))},function(e,t,n){"use strict";e.exports="3.27.0"},function(e,t){/**
 * @license AngularJS v1.6.10
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";function n(e,n,r){function i(e,r,i){var o,s;i=i||{},s=i.expires,o=t.isDefined(i.path)?i.path:a,t.isUndefined(r)&&(s="Thu, 01 Jan 1970 00:00:00 GMT",r=""),t.isString(s)&&(s=new Date(s));var c=encodeURIComponent(e)+"="+encodeURIComponent(r);c+=o?";path="+o:"",c+=i.domain?";domain="+i.domain:"",c+=s?";expires="+s.toUTCString():"",c+=i.secure?";secure":"";var u=c.length+1;return u>4096&&n.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+u+" > 4096 bytes)!"),c}var a=r.baseHref(),o=e[0];return function(e,t,n){o.cookie=i(e,t,n)}}t.module("ngCookies",["ng"]).info({angularVersion:"1.6.10"}).provider("$cookies",[function(){function e(e){return e?t.extend({},n,e):n}var n=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(n,r){return{get:function(e){return n()[e]},getObject:function(e){var n=this.get(e);return n?t.fromJson(n):n},getAll:function(){return n()},put:function(t,n,i){r(t,n,e(i))},putObject:function(e,n,r){this.put(e,t.toJson(n),r)},remove:function(t,n){r(t,void 0,e(n))}}}]}]),t.module("ngCookies").factory("$cookieStore",["$cookies",function(e){return{get:function(t){return e.getObject(t)},put:function(t,n){e.putObject(t,n)},remove:function(t){e.remove(t)}}}]),n.$inject=["$document","$log","$browser"],t.module("ngCookies").provider("$$cookieWriter",function(){this.$get=n})}(window,window.angular)},function(e,t,n){var r,i;/**
 * angular-localforage - Angular service & directive for https://github.com/mozilla/localForage (Offline storage, improved.)
 * @version v1.3.8
 * @link https://github.com/ocombe/angular-localForage
 * @license MIT
 * @author Olivier Combe <olivier.combe@gmail.com>
 */
!function(a,o){"use strict";var s=a&&a.angular||window&&window.angular;r=[n(943)],void 0!==(i=function(e){return o(s,e)}.apply(t,r))&&(e.exports=i)}(this,function(e,t,n){"use strict";var r=e.module("LocalForageModule",["ng"]);return r.provider("$localForage",function(){var n={},r={name:"lf"},i={setItem:!1,removeItem:!1},a={};this.setNotify=function(e,t){i={setItem:e,removeItem:t}},this.config=function(t){if(!e.isObject(t))throw new Error("The config parameter should be an object");e.extend(r,t)},this.$get=["$rootScope","$q","$parse",function(o,s,c){function u(t,n){return function(r){if((e.isObject(r)&&r.name?"InvalidStateError"===r.name:e.isString(r)&&"InvalidStateError"===r)&&"asyncStorage"===this.driver()||e.isObject(r)&&r.code&&5===r.code){var i=this;return i.setDriver("localStorageWrapper").then(function(){return n.apply(i,t)})}return s.reject(r)}}var l=function(n){e.isDefined(n)?this._localforage=t.createInstance(n):(this._localforage=t,t.config(r))};l.prototype.createInstance=function(t){if(e.isObject(t)){if(t=e.extend({},r,t),e.isDefined(n[t.name]))throw new Error("A localForage instance with the name "+t.name+" is already defined.");return n[t.name]=new l(t),n[t.name]}throw new Error("The parameter should be a config object.")},l.prototype.instance=function(t){if(e.isUndefined(t))return n[r.name];if(e.isString(t)){if(e.isDefined(n[t]))return n[t];throw new Error("No localForage instance of that name exists.")}throw new Error("The parameter should be a string.")},l.prototype.setDriver=function(e){return this._localforage.setDriver(e)},l.prototype.driver=function(){return this._localforage.driver()},l.prototype.defineDriver=function(e){return this._localforage.defineDriver(e)},l.prototype.setItem=function(t,n){function r(t){var n;return e.isArray(t)?t.map(r):e.isObject(t)&&t.constructor===Object?(n=e.extend({},t),e.isDefined(n.$promise)&&delete n.$promise,e.isDefined(n.$$hashKey)&&delete n.$$hashKey,Object.keys(n).reduce(function(e,t){return e[t]=r(n[t]),e},{})):t}if(e.isUndefined(t))throw new Error("You must define a key to set");var a,c=this,l=arguments;if(e.isArray(t)){if(!e.isArray(n))throw new Error("If you set an array of keys, the values should be an array too");return s.all(t.map(function(e,t){return c.setItem(e,n[t])}))}return a=r(n),c._localforage.setItem(c.prefix()+t,a).then(function(){return i.setItem&&o.$broadcast("LocalForageModule.setItem",{key:t,newvalue:a,driver:c.driver()}),a}).catch(u(l,c.setItem))},l.prototype.getItem=function(t,n){if(e.isUndefined(t))throw new Error("You must define a key to get");var r,i=s.defer(),a=arguments,o=this;if(e.isArray(t)){var c=[],u=0;r=o._localforage.iterate(function(e,n){var r=t.indexOf(o.prefix()+n);if(r>-1&&(c[r]=e,u++),u===t.length)return c}).then(function(){for(var r=!0,a=0;a<t.length;a++)e.isUndefined(c[a])&&(c[a]=null,r=!1);r||!n?i.resolve(c):i.reject(c)})}else r=o._localforage.getItem(o.prefix()+t).then(function(e){n&&null===e?i.reject(e):i.resolve(e)});return r.then(null,function(e){o.onError(e,a,o.getItem,i)}),i.promise},l.prototype.iterate=function(t){if(e.isUndefined(t))throw new Error("You must define a callback to iterate");var n=s.defer(),r=arguments,i=this;return i._localforage.iterate(t).then(function(e){n.resolve(e)},function(e){i.onError(e,r,i.iterate,n)}),n.promise},l.prototype.removeItem=function(t){if(e.isUndefined(t))throw new Error("You must define a key to remove");var n=this;if(e.isArray(t)){var r=[];return e.forEach(t,function(e,t){r.push(n.removeItem(e))}),s.all(r)}var a=s.defer(),c=arguments;return n._localforage.removeItem(n.prefix()+t).then(function(){i.removeItem&&o.$broadcast("LocalForageModule.removeItem",{key:t,driver:n.driver()}),a.resolve()},function(e){n.onError(e,c,n.removeItem,a)}),a.promise},l.prototype.pull=function(t){var n,r=this;if(e.isUndefined(t))throw new Error("You must define a key to pull");return r.getItem(t).then(function(e){return n=e,r.removeItem(t)}).then(function(){return n})},l.prototype.clear=function(){var e=s.defer(),t=arguments,n=this;return n._localforage.clear().then(function(t){e.resolve()},function(r){n.onError(r,t,n.clear,e)}),e.promise},l.prototype.key=function(t){if(e.isUndefined(t))throw new Error("You must define a position to get for the key function");var n=s.defer(),r=arguments,i=this;return i._localforage.key(t).then(function(e){n.resolve(e)},function(e){i.onError(e,r,i.key,n)}),n.promise};var d=function(){var e=s.defer(),t=arguments,n=this;return n._localforage.keys().then(function(t){if(r.oldPrefix&&"localStorageWrapper"===n.driver()){for(var i=[],a=0,o=t.length;a<o;a++)i.push(t[a].substr(n.prefix().length,t[a].length));t=i}e.resolve(t)},function(r){n.onError(r,t,n.keys,e)}),e.promise};return l.prototype.keys=d,l.prototype.getKeys=d,l.prototype.length=function(){var e=s.defer(),t=arguments,n=this;return n._localforage.length().then(function(t){e.resolve(t)},function(r){n.onError(r,t,length,e)}),e.promise},l.prototype.bind=function(t,i){if(e.isString(i))i={key:i};else if(!e.isObject(i)||e.isUndefined(i.key))throw new Error("You must define a key to bind");var o={defaultValue:"",name:r.name};i=e.extend({},o,i);var s=n[i.name];if(e.isUndefined(s))throw new Error("You must use the name of an existing instance");var u=i.scopeKey||i.key,l=c(u);return s.getItem(i.key,!0).then(function(e){return l.assign(t,e),e}).catch(function(){return l.assign(t,i.defaultValue),s.setItem(i.key,i.defaultValue)}).then(function(n){return e.isDefined(a[i.key])&&a[i.key](),a[i.key]=t.$watch(u,function(t){e.isDefined(t)&&s.setItem(i.key,t)},!0),n})},l.prototype.unbind=function(t,i){if(e.isString(i))i={key:i};else if(!e.isObject(i)||e.isUndefined(i.key))throw new Error("You must define a key to unbind");var o={scopeKey:i.key,name:r.name};i=e.extend({},o,i);var s=n[i.name];if(e.isUndefined(s))throw new Error("You must use the name of an existing instance");return c(i.scopeKey).assign(t,null),e.isDefined(a[i.key])&&(a[i.key](),delete a[i.key]),s.removeItem(i.key)},l.prototype.prefix=function(){return"localStorageWrapper"===this.driver()&&r.oldPrefix?this._localforage.config().name+".":""},l.prototype.onError=function(t,n,r,i){if((e.isObject(t)&&t.name?"InvalidStateError"===t.name:e.isString(t)&&"InvalidStateError"===t)&&"asyncStorage"===this.driver()||e.isObject(t)&&t.code&&5===t.code){var a=this;a.setDriver("localStorageWrapper").then(function(){r.apply(a,n).then(function(e){i.resolve(e)},function(e){i.reject(e)})},function(){i.reject(t)})}else i.reject(t)},n[r.name]=new l,n[r.name]}]}),r.directive("localForage",["$localForage",function(t){return{restrict:"A",link:function(n,r,i){var a=n.$eval(i.localForage);e.isObject(a)&&e.isDefined(a.key)?t.bind(n,a):t.bind(n,i.localForage)}}}]),r.name})},function(e,t){/**
 * @license AngularJS v1.6.10
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";function n(e,t){if(c(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(u(e)){t=t||{};for(var i in e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i])}return t||e}function r(){function e(e,n){return t.extend(Object.create(e),n)}function r(e,t){var n=t.caseInsensitiveMatch,r={originalPath:e,regexp:e},i=r.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(e,t,n,r){var a="?"===r||"*?"===r?"?":null,o="*"===r||"*?"===r?"*":null;return i.push({name:n,optional:!!a}),t=t||"",(a?"":t)+"(?:"+(a?t:"")+(o&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$*])/g,"\\$1"),r.regexp=new RegExp("^"+e+"$",n?"i":""),r}c=t.isArray,u=t.isObject,l=t.isDefined,d=t.noop;var i={};this.when=function(e,a){var o=n(a);if(t.isUndefined(o.reloadOnSearch)&&(o.reloadOnSearch=!0),t.isUndefined(o.caseInsensitiveMatch)&&(o.caseInsensitiveMatch=this.caseInsensitiveMatch),i[e]=t.extend(o,e&&r(e,o)),e){var s="/"===e[e.length-1]?e.substr(0,e.length-1):e+"/";i[s]=t.extend({redirectTo:e},r(s,o))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},f=!0,this.eagerInstantiationEnabled=function(e){return l(e)?(f=e,this):f},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(n,r,a,o,s,c,u,l){function f(e,t){var n=t.keys,r={};if(!t.regexp)return null;var i=t.regexp.exec(e);if(!i)return null;for(var a=1,o=i.length;a<o;++a){var s=n[a-1],c=i[a];s&&c&&(r[s.name]=c)}return r}function h(e){var r=C.current;S=_(),(k=S&&r&&S.$$route===r.$$route&&t.equals(S.pathParams,r.pathParams)&&!S.reloadOnSearch&&!T)||!r&&!S||n.$broadcast("$routeChangeStart",S,r).defaultPrevented&&e&&e.preventDefault()}function v(){var e=C.current,r=S;if(k)e.params=r.params,t.copy(e.params,a),n.$broadcast("$routeUpdate",e);else if(r||e){T=!1,C.current=r;var i=o.resolve(r);l.$$incOutstandingRequestCount(),i.then(g).then(m).then(function(o){return o&&i.then(y).then(function(i){r===C.current&&(r&&(r.locals=i,t.copy(r.params,a)),n.$broadcast("$routeChangeSuccess",r,e))})}).catch(function(t){r===C.current&&n.$broadcast("$routeChangeError",r,e,t)}).finally(function(){l.$$completeOutstandingRequest(d)})}}function g(e){var n={route:e,hasRedirection:!1};if(e)if(e.redirectTo)if(t.isString(e.redirectTo))n.path=w(e.redirectTo,e.params),n.search=e.params,n.hasRedirection=!0;else{var i=r.path(),a=r.search(),c=e.redirectTo(e.pathParams,i,a);t.isDefined(c)&&(n.url=c,n.hasRedirection=!0)}else if(e.resolveRedirectTo)return o.resolve(s.invoke(e.resolveRedirectTo)).then(function(e){return t.isDefined(e)&&(n.url=e,n.hasRedirection=!0),n});return n}function m(e){var t=!0;if(e.route!==C.current)t=!1;else if(e.hasRedirection){var n=r.url(),i=e.url;i?r.url(i).replace():i=r.path(e.path).search(e.search).replace().url(),i!==n&&(t=!1)}return t}function y(e){if(e){var n=t.extend({},e.resolve);t.forEach(n,function(e,r){n[r]=t.isString(e)?s.get(e):s.invoke(e,null,null,r)});var r=b(e);return t.isDefined(r)&&(n.$template=r),o.all(n)}}function b(e){var n,r;return t.isDefined(n=e.template)?t.isFunction(n)&&(n=n(e.params)):t.isDefined(r=e.templateUrl)&&(t.isFunction(r)&&(r=r(e.params)),t.isDefined(r)&&(e.loadedTemplateUrl=u.valueOf(r),n=c(r))),n}function _(){var n,a;return t.forEach(i,function(i,o){!a&&(n=f(r.path(),i))&&(a=e(i,{params:t.extend({},r.search(),n),pathParams:n}),a.$$route=i)}),a||i[null]&&e(i[null],{params:{},pathParams:{}})}function w(e,n){var r=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)r.push(e);else{var i=e.match(/(\w+)(?:[?*])?(.*)/),a=i[1];r.push(n[a]),r.push(i[2]||""),delete n[a]}}),r.join("")}var S,k,T=!1,C={routes:i,reload:function(){T=!0;var e={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,T=!1}};n.$evalAsync(function(){h(e),e.defaultPrevented||v()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw p("norout","Tried updating route with no current route");e=t.extend({},this.current.params,e),r.path(w(this.current.$$route.originalPath,e)),r.search(e)}};return n.$on("$locationChangeStart",h),n.$on("$locationChangeSuccess",v),C}]}function i(e){f&&e.get("$route")}function a(){this.$get=function(){return{}}}function o(e,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(i,a,o,s,c){function u(){h&&(r.cancel(h),h=null),d&&(d.$destroy(),d=null),f&&(h=r.leave(f),h.done(function(e){!1!==e&&(h=null)}),f=null)}function l(){var o=e.current&&e.current.locals,s=o&&o.$template;if(t.isDefined(s)){var l=i.$new(),h=e.current,g=c(l,function(e){r.enter(e,null,f||a).done(function(e){!1===e||!t.isDefined(p)||p&&!i.$eval(p)||n()}),u()});f=g,d=h.scope=l,d.$emit("$viewContentLoaded"),d.$eval(v)}else u()}var d,f,h,p=o.autoscroll,v=o.onload||"";i.$on("$routeChangeSuccess",l),l()}}}function s(e,t,n){return{restrict:"ECA",priority:-400,link:function(r,i){var a=n.current,o=a.locals;i.html(o.$template);var s=e(i.contents());if(a.controller){o.$scope=r;var c=t(a.controller,o);a.controllerAs&&(r[a.controllerAs]=c),i.data("$ngControllerController",c),i.children().data("$ngControllerController",c)}r[a.resolveAs||"$resolve"]=o,s(r)}}}var c,u,l,d,f,h=t.module("ngRoute",[]).info({angularVersion:"1.6.10"}).provider("$route",r).run(i),p=t.$$minErr("ngRoute");i.$inject=["$injector"],h.provider("$routeParams",a),h.directive("ngView",o),h.directive("ngView",s),o.$inject=["$route","$anchorScroll","$animate"],s.$inject=["$compile","$controller","$route"]}(window,window.angular)},function(e,t){/**
 * @license AngularJS v1.6.10
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";function n(){function n(e,t){return r(e.split(","),t)}function r(e,t){var n,r={};for(n=0;n<e.length;n++)r[t?u(e[n]):e[n]]=!0;return r}function v(e,t){t&&t.length&&a(e,r(t))}function g(e,t){null===e||void 0===e?e="":"string"!=typeof e&&(e=""+e);var n=M(e);if(!n)return"";var r=5;do{if(0===r)throw p("uinput","Failed to sanitize html because the input is unstable");r--,e=n.innerHTML,n=M(e)}while(e!==n.innerHTML);for(var i=n.firstChild;i;){switch(i.nodeType){case 1:t.start(i.nodeName.toLowerCase(),m(i.attributes));break;case 3:t.chars(i.textContent)}var a;if(!((a=i.firstChild)||(1===i.nodeType&&t.end(i.nodeName.toLowerCase()),a=w("nextSibling",i))))for(;null==a&&(i=w("parentNode",i))!==n;)a=w("nextSibling",i),1===i.nodeType&&t.end(i.nodeName.toLowerCase());i=a}for(;i=n.firstChild;)n.removeChild(i)}function m(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}function y(e){return e.replace(/&/g,"&amp;").replace(T,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(C,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b(e,t){var n=!1,r=i(e,e.push);return{start:function(e,i){e=u(e),!n&&R[e]&&(n=e),n||!0!==L[e]||(r("<"),r(e),o(i,function(n,i){var a=u(i),o="img"===e&&"src"===a||"background"===a;!0!==U[a]||!0===j[a]&&!t(n,o)||(r(" "),r(i),r('="'),r(y(n)),r('"'))}),r(">"))},end:function(e){e=u(e),n||!0!==L[e]||!0===x[e]||(r("</"),r(e),r(">")),e==n&&(n=!1)},chars:function(e){n||r(y(e))}}}function _(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,i=n.length;r<i;r++){var a=n[r],o=a.name.toLowerCase();"xmlns:ns1"!==o&&0!==o.lastIndexOf("ns1:",0)||(t.removeAttributeNode(a),r--,i--)}var s=t.firstChild;s&&_(s),t=w("nextSibling",t)}}function w(e,t){var n=t[e];if(n&&d.call(t,n))throw p("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText);return n}var S=!1,k=!1;this.$get=["$$sanitizeUri",function(e){return S=!0,k&&a(L,I),function(t){var n=[];return f(t,h(n,function(t,n){return!/^unsafe:/.test(e(t,n))})),n.join("")}}],this.enableSvg=function(e){return c(e)?(k=e,this):k},this.addValidElements=function(e){return S||(s(e)&&(e={htmlElements:e}),v(I,e.svgElements),v(x,e.htmlVoidElements),v(L,e.htmlVoidElements),v(L,e.htmlElements)),this},this.addValidAttrs=function(e){return S||a(U,r(e,!0)),this},i=t.bind,a=t.extend,o=t.forEach,s=t.isArray,c=t.isDefined,u=t.lowercase,l=t.noop,f=g,h=b,d=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var T=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C=/([^#-~ |!])/g,x=n("area,br,col,hr,img,wbr"),E=n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),P=n("rp,rt"),$=a({},P,E),A=a({},E,n("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),O=a({},P,n("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),I=n("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),R=n("script,style"),L=a({},x,A,O,$),j=n("background,cite,href,longdesc,src,xlink:href,xml:base"),D=n("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),N=n("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),U=a({},j,N,D),M=function(e,t){function n(t){t="<remove></remove>"+t;try{t=encodeURI(t)}catch(e){return}var n=new e.XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+t,!1),n.send(null);var r=n.response.body;return r.firstChild.remove(),r}function r(t){t="<remove></remove>"+t;try{var n=(new e.DOMParser).parseFromString(t,"text/html").body;return n.firstChild.remove(),n}catch(e){return}}function i(e){return o.innerHTML=e,t.documentMode&&_(o),o}var a;if(!t||!t.implementation)throw p("noinert","Can't create an inert html document");a=t.implementation.createHTMLDocument("inert");var o=(a.documentElement||a.getDocumentElement()).querySelector("body");return o.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',o.querySelector("svg")?(o.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',o.querySelector("svg img")?r:i):n}(e,e.document)}function r(e){var t=[];return h(t,l).chars(e),t.join("")}var i,a,o,s,c,u,l,d,f,h,p=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",n).info({angularVersion:"1.6.10"}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,a=t.$$minErr("linky"),o=t.isDefined,s=t.isFunction,c=t.isObject,u=t.isString;return function(t,l,d){function f(e){e&&b.push(r(e))}function h(e,t){var n,r=m(e);b.push("<a ");for(n in r)b.push(n+'="'+r[n]+'" ');!o(l)||"target"in r||b.push('target="',l,'" '),b.push('href="',e.replace(/"/g,"&quot;"),'">'),f(t),b.push("</a>")}if(null==t||""===t)return t;if(!u(t))throw a("notstring","Expected string but received: {0}",t);for(var p,v,g,m=s(d)?d:c(d)?function(){return d}:function(){return{}},y=t,b=[];p=y.match(n);)v=p[0],p[2]||p[4]||(v=(p[3]?"http://":"mailto:")+v),g=p.index,f(y.substr(0,g)),h(v,p[0].replace(i,"")),y=y.substring(g+p[0].length);return f(y),e(b.join(""))}}])}(window,window.angular)},function(e,t){/**
 * @license AngularJS v1.6.10
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e){"use strict";function t(e){if(!w(e))return ti;_(e.objectMaxDepth)&&(ti.objectMaxDepth=n(e.objectMaxDepth)?e.objectMaxDepth:NaN)}function n(e){return T(e)&&e>0}function r(e,t){t=t||Error;var n="https://errors.angularjs.org/1.6.10/",r=n.replace(".","\\.")+"[\\s\\S]*",i=new RegExp(r,"g");return function(){var r,a,o=arguments[0],s=arguments[1],c="["+(e?e+":":"")+o+"] ",u=G(arguments,2).map(function(e){return Ce(e,ti.objectMaxDepth)});for(c+=s.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t<u.length?u[t].replace(i,""):e}),c+="\n"+n+(e?e+"/":"")+o,a=0,r="?";a<u.length;a++,r="&")c+=r+"p"+a+"="+encodeURIComponent(u[a]);return new t(c)}}function i(e){if(null==e||$(e))return!1;if(Si(e)||k(e)||li&&e instanceof li)return!0;var t="length"in Object(e)&&e.length;return T(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function a(e,t,n){var r,o;if(e)if(E(e))for(r in e)"prototype"!==r&&"length"!==r&&"name"!==r&&e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else if(Si(e)||i(e)){var s="object"!=typeof e;for(r=0,o=e.length;r<o;r++)(s||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==a)e.forEach(t,n,e);else if(S(e))for(r in e)t.call(n,e[r],r,e);else if("function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)ii.call(e,r)&&t.call(n,e[r],r,e);return e}function o(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function s(e){return function(t,n){e(n,t)}}function c(){return++_i}function u(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function l(e,t,n){for(var r=e.$$hashKey,i=0,a=t.length;i<a;++i){var o=t[i];if(w(o)||E(o))for(var s=Object.keys(o),c=0,d=s.length;c<d;c++){var f=s[c],h=o[f];n&&w(h)?C(h)?e[f]=new Date(h.valueOf()):P(h)?e[f]=new RegExp(h):h.nodeName?e[f]=h.cloneNode(!0):U(h)?e[f]=h.clone():(w(e[f])||(e[f]=Si(h)?[]:{}),l(e[f],[h],!0)):e[f]=h}}return u(e,r),e}function d(e){return l(e,hi.call(arguments,1),!1)}function f(e){return l(e,hi.call(arguments,1),!0)}function h(e){return parseInt(e,10)}function p(e,t){return d(Object.create(e),t)}function v(){}function g(e){return e}function m(e){return function(){return e}}function y(e){return E(e.toString)&&e.toString!==gi}function b(e){return void 0===e}function _(e){return void 0!==e}function w(e){return null!==e&&"object"==typeof e}function S(e){return null!==e&&"object"==typeof e&&!mi(e)}function k(e){return"string"==typeof e}function T(e){return"number"==typeof e}function C(e){return"[object Date]"===gi.call(e)}function x(e){switch(gi.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function E(e){return"function"==typeof e}function P(e){return"[object RegExp]"===gi.call(e)}function $(e){return e&&e.window===e}function A(e){return e&&e.$evalAsync&&e.$watch}function O(e){return"[object File]"===gi.call(e)}function I(e){return"[object FormData]"===gi.call(e)}function R(e){return"[object Blob]"===gi.call(e)}function L(e){return"boolean"==typeof e}function j(e){return e&&E(e.then)}function D(e){return e&&T(e.length)&&ki.test(gi.call(e))}function N(e){return"[object ArrayBuffer]"===gi.call(e)}function U(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function M(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function F(e){return ai(e.nodeName||e[0]&&e[0].nodeName)}function B(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function q(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function H(e,t,r){function i(e,t,n){if(--n<0)return"...";var r,i=t.$$hashKey;if(Si(e))for(var a=0,s=e.length;a<s;a++)t.push(o(e[a],n));else if(S(e))for(r in e)t[r]=o(e[r],n);else if(e&&"function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&(t[r]=o(e[r],n));else for(r in e)ii.call(e,r)&&(t[r]=o(e[r],n));return u(t,i),t}function o(e,t){if(!w(e))return e;var n=c.indexOf(e);if(-1!==n)return l[n];if($(e)||A(e))throw yi("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,a=s(e);return void 0===a&&(a=Si(e)?[]:Object.create(mi(e)),r=!0),c.push(e),l.push(a),r?i(e,a,t):a}function s(e){switch(gi.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(o(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(E(e.cloneNode))return e.cloneNode(!0)}var c=[],l=[];if(r=n(r)?r:NaN,t){if(D(t)||N(t))throw yi("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw yi("cpi","Can't copy! Source and destination are identical.");return Si(t)?t.length=0:a(t,function(e,n){"$$hashKey"!==n&&delete t[n]}),c.push(e),l.push(t),i(e,t,r)}return o(e,r)}function V(e,t){return e===t||e!==e&&t!==t}function z(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,r,i,a=typeof e,o=typeof t;if(a===o&&"object"===a){if(!Si(e)){if(C(e))return!!C(t)&&V(e.getTime(),t.getTime());if(P(e))return!!P(t)&&e.toString()===t.toString();if(A(e)||A(t)||$(e)||$(t)||Si(t)||C(t)||P(t))return!1;i=_e();for(r in e)if("$"!==r.charAt(0)&&!E(e[r])){if(!z(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&_(t[r])&&!E(t[r]))return!1;return!0}if(!Si(t))return!1;if((n=e.length)===t.length){for(r=0;r<n;r++)if(!z(e[r],t[r]))return!1;return!0}}return!1}function W(e,t,n){return e.concat(hi.call(t,n))}function G(e,t){return hi.call(e,t||0)}function Y(e,t){var n=arguments.length>2?G(arguments,2):[];return!E(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,W(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function Q(t,n){var r=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=void 0:$(n)?r="$WINDOW":n&&e.document===n?r="$DOCUMENT":A(n)&&(r="$SCOPE"),r}function X(e,t){if(!b(e))return T(t)||(t=t?2:null),JSON.stringify(e,Q,t)}function J(e){return k(e)?JSON.parse(e):e}function K(e,t){e=e.replace(Pi,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return wi(n)?t:n}function Z(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function ee(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset();return Z(e,n*(K(t,r)-r))}function te(e){e=li(e).clone().empty();var t=li("<div></div>").append(e).html();try{return e[0].nodeType===ji?ai(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+ai(t)})}catch(e){return ai(t)}}function ne(e){try{return decodeURIComponent(e)}catch(e){}}function re(e){var t={};return a((e||"").split("&"),function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),-1!==n&&(r=e.substring(0,n),i=e.substring(n+1)),r=ne(r),_(r)&&(i=!_(i)||ne(i),ii.call(t,r)?Si(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))}),t}function ie(e){var t=[];return a(e,function(e,n){Si(e)?a(e,function(e){t.push(oe(n,!0)+(!0===e?"":"="+oe(e,!0)))}):t.push(oe(n,!0)+(!0===e?"":"="+oe(e,!0)))}),t.length?t.join("&"):""}function ae(e){return oe(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function oe(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function se(e,t){var n,r,i=$i.length;for(r=0;r<i;++r)if(n=$i[r]+t,k(n=e.getAttribute(n)))return n;return null}function ce(t){var n=t.currentScript;if(!n)return!0;if(!(n instanceof e.HTMLScriptElement||n instanceof e.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every(function(e){if(!e)return!0;if(!e.value)return!1;var n=t.createElement("a");if(n.href=e.value,t.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}function ue(t,n){var r,i,o={};if(a($i,function(e){var n=e+"app";!r&&t.hasAttribute&&t.hasAttribute(n)&&(r=t,i=t.getAttribute(n))}),a($i,function(e){var n,a=e+"app";!r&&(n=t.querySelector("["+a.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(a))}),r){if(!Ai)return void e.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==se(r,"strict-di"),n(r,i?[i]:[],o)}}function le(t,n,r){w(r)||(r={}),r=d({strictDi:!1},r);var i=function(){if(t=li(t),t.injector()){var i=t[0]===e.document?"document":te(t);throw yi("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[],n.unshift(["$provide",function(e){e.value("$rootElement",t)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var a=ft(n,r.strictDi);return a.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),a},o=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(e&&o.test(e.name)&&(r.debugInfoEnabled=!0,e.name=e.name.replace(o,"")),e&&!s.test(e.name))return i();e.name=e.name.replace(s,""),bi.resumeBootstrap=function(e){return a(e,function(e){n.push(e)}),i()},E(bi.resumeDeferredBootstrap)&&bi.resumeDeferredBootstrap()}function de(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function fe(e){var t=bi.element(e).injector();if(!t)throw yi("test","no injector found for element argument to getTestability");return t.get("$$testability")}function he(e,t){return t=t||"_",e.replace(Oi,function(e,n){return(n?t:"")+e.toLowerCase()})}function pe(){var t;if(!Ii){var n=Ei();di=b(n)?e.jQuery:n?e[n]:void 0,di&&di.fn.on?(li=di,d(di.fn,{scope:Ki.scope,isolateScope:Ki.isolateScope,controller:Ki.controller,injector:Ki.injector,inheritedData:Ki.inheritedData}),t=di.cleanData,di.cleanData=function(e){for(var n,r,i=0;null!=(r=e[i]);i++)(n=di._data(r,"events"))&&n.$destroy&&di(r).triggerHandler("$destroy");t(e)}):li=Ne,bi.element=li,Ii=!0}}function ve(e,t,n){if(!e)throw yi("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function ge(e,t,n){return n&&Si(e)&&(e=e[e.length-1]),ve(E(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function me(e,t){if("hasOwnProperty"===e)throw yi("badname","hasOwnProperty is not a valid {0} name",t)}function ye(e,t,n){if(!t)return e;for(var r,i=t.split("."),a=e,o=i.length,s=0;s<o;s++)r=i[s],e&&(e=(a=e)[r]);return!n&&E(e)?Y(a,e):e}function be(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=li(hi.call(e,0,i))),t.push(n));return t||e}function _e(){return Object.create(null)}function we(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!y(e)||Si(e)||C(e)?X(e):e.toString()}return e}function Se(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=r("$injector"),i=r("ng"),a=t(e,"angular",Object);return a.$$minErr=a.$$minErr||r,t(a,"module",function(){var e={};return function(r,a,o){var s={};return function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)}(r,"module"),a&&e.hasOwnProperty(r)&&(e[r]=null),t(e,r,function(){function e(e,t,n,r){return r||(r=c),function(){return r[n||"push"]([e,t,arguments]),f}}function t(e,t,n){return n||(n=c),function(i,a){return a&&E(a)&&(a.$$moduleName=r),n.push([e,t,arguments]),f}}if(!a)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var c=[],u=[],l=[],d=e("$injector","invoke","push",u),f={_invokeQueue:c,_configBlocks:u,_runBlocks:l,info:function(e){if(_(e)){if(!w(e))throw i("aobj","Argument '{0}' must be an object","value");return s=e,this}return s},requires:a,name:r,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:t("$provide","decorator",u),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),component:t("$compileProvider","component"),config:d,run:function(e){return l.push(e),this}};return o&&d(o),f})}})}function ke(e,t){if(Si(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(w(e)){t=t||{};for(var i in e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i])}return t||e}function Te(e,t){var r=[];return n(t)&&(e=bi.copy(e,null,t)),JSON.stringify(e,function(e,t){if(t=Q(e,t),w(t)){if(r.indexOf(t)>=0)return"...";r.push(t)}return t})}function Ce(e,t){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):b(e)?"undefined":"string"!=typeof e?Te(e,t):e}function xe(n){d(n,{errorHandlingConfig:t,bootstrap:le,copy:H,extend:d,merge:f,equals:z,element:li,forEach:a,injector:ft,noop:v,bind:Y,toJson:X,fromJson:J,identity:g,isUndefined:b,isDefined:_,isString:k,isFunction:E,isObject:w,isNumber:T,isElement:U,isArray:Si,version:Mi,isDate:C,lowercase:ai,uppercase:oi,callbacks:{$$counter:0},getTestability:fe,reloadWithDebugInfo:de,$$minErr:r,$$csp:xi,$$encodeUriSegment:ae,$$encodeUriQuery:oe,$$stringify:we}),fi=Se(e),fi("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Dn}),e.provider("$compile",kt).directive({a:co,input:$o,textarea:$o,form:vo,script:ks,select:xs,option:Es,ngBind:Io,ngBindHtml:Lo,ngBindTemplate:Ro,ngClass:Do,ngClassEven:Uo,ngClassOdd:No,ngCloak:Mo,ngController:Fo,ngForm:go,ngHide:gs,ngIf:Ho,ngInclude:Vo,ngInit:Wo,ngNonBindable:ss,ngPluralize:ds,ngRepeat:fs,ngShow:vs,ngStyle:ms,ngSwitch:ys,ngSwitchWhen:bs,ngSwitchDefault:_s,ngOptions:ls,ngTransclude:Ss,ngModel:is,ngList:Go,ngChange:jo,pattern:$s,ngPattern:$s,required:Ps,ngRequired:Ps,minlength:Os,ngMinlength:Os,maxlength:As,ngMaxlength:As,ngValue:Oo,ngModelOptions:os}).directive({ngInclude:zo}).directive(uo).directive(Bo),e.provider({$anchorScroll:ht,$animate:ga,$animateCss:ba,$$animateJs:pa,$$animateQueue:va,$$AnimateRunner:ya,$$animateAsyncRun:ma,$browser:bt,$cacheFactory:_t,$controller:$t,$document:At,$$isDocumentHidden:Ot,$exceptionHandler:It,$filter:Zn,$$forceReflow:xa,$interpolate:Wt,$interval:Gt,$http:qt,$httpParamSerializer:Lt,$httpParamSerializerJQLike:jt,$httpBackend:Vt,$xhrFactory:Ht,$jsonpCallbacks:La,$location:ln,$log:dn,$parse:En,$rootScope:jn,$q:Pn,$$q:$n,$sce:Bn,$sceDelegate:Fn,$sniffer:qn,$templateCache:wt,$templateRequest:Hn,$$testability:Vn,$timeout:zn,$window:Xn,$$rAF:Ln,$$jqLite:at,$$Map:ia,$$cookieReader:Kn})}]).info({angularVersion:"1.6.10"})}function Ee(){return++Bi}function Pe(e){return Ae(e.replace(Hi,"ms-"))}function $e(e,t){return t.toUpperCase()}function Ae(e){return e.replace(qi,$e)}function Oe(e){return!Gi.test(e)}function Ie(e){var t=e.nodeType;return t===Ri||!t||t===Ni}function Re(e){for(var t in Fi[e.ng339])return!0;return!1}function Le(e,t){var n,r,i,o,s=t.createDocumentFragment(),c=[];if(Oe(e))c.push(t.createTextNode(e));else{for(n=s.appendChild(t.createElement("div")),r=(Yi.exec(e)||["",""])[1].toLowerCase(),i=Xi[r]||Xi._default,n.innerHTML=i[1]+e.replace(Qi,"<$1></$2>")+i[2],o=i[0];o--;)n=n.lastChild;c=W(c,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",a(c,function(e){s.appendChild(e)}),s}function je(t,n){n=n||e.document;var r;return(r=Wi.exec(t))?[n.createElement(r[1])]:(r=Le(t,n))?r.childNodes:[]}function De(e,t){var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)}function Ne(e){if(e instanceof Ne)return e;var t;if(k(e)&&(e=Ti(e),t=!0),!(this instanceof Ne)){if(t&&"<"!==e.charAt(0))throw zi("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ne(e)}t?Ge(this,je(e)):E(e)?Ze(e):Ge(this,e)}function Ue(e){return e.cloneNode(!0)}function Me(e,t){!t&&Ie(e)&&li.cleanData([e]),e.querySelectorAll&&li.cleanData(e.querySelectorAll("*"))}function Fe(e,t,n,r){if(_(r))throw zi("offargs","jqLite#off() does not support the `selector` argument");var i=qe(e),o=i&&i.events,s=i&&i.handle;if(s)if(t){var c=function(t){var r=o[t];_(n)&&q(r||[],n),_(n)&&r&&r.length>0||(e.removeEventListener(t,s),delete o[t])};a(t.split(" "),function(e){c(e),Vi[e]&&c(Vi[e])})}else for(t in o)"$destroy"!==t&&e.removeEventListener(t,s),delete o[t]}function Be(e,t){var n=e.ng339,r=n&&Fi[n];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Fe(e)),delete Fi[n],e.ng339=void 0}}function qe(e,t){var n=e.ng339,r=n&&Fi[n];return t&&!r&&(e.ng339=n=Ee(),r=Fi[n]={events:{},data:{},handle:void 0}),r}function He(e,t,n){if(Ie(e)){var r,i=_(n),a=!i&&t&&!w(t),o=!t,s=qe(e,!a),c=s&&s.data;if(i)c[Ae(t)]=n;else{if(o)return c;if(a)return c&&c[Ae(t)];for(r in t)c[Ae(r)]=t[r]}}}function Ve(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function ze(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;a(t.split(" "),function(e){e=Ti(e),r=r.replace(" "+e+" "," ")}),r!==n&&e.setAttribute("class",Ti(r))}}function We(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;a(t.split(" "),function(e){e=Ti(e),-1===r.indexOf(" "+e+" ")&&(r+=e+" ")}),r!==n&&e.setAttribute("class",Ti(r))}}function Ge(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Ye(e,t){return Qe(e,"$"+(t||"ngController")+"Controller")}function Qe(e,t,n){e.nodeType===Ni&&(e=e.documentElement);for(var r=Si(t)?t:[t];e;){for(var i=0,a=r.length;i<a;i++)if(_(n=li.data(e,r[i])))return n;e=e.parentNode||e.nodeType===Ui&&e.host}}function Xe(e){for(Me(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Je(e,t){t||Me(e);var n=e.parentNode;n&&n.removeChild(e)}function Ke(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):li(n).on("load",t)}function Ze(t){function n(){e.document.removeEventListener("DOMContentLoaded",n),e.removeEventListener("load",n),t()}"complete"===e.document.readyState?e.setTimeout(t):(e.document.addEventListener("DOMContentLoaded",n),e.addEventListener("load",n))}function et(e,t){var n=Zi[t.toLowerCase()];return n&&ea[F(e)]&&n}function tt(e){return ta[e]}function nt(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],a=i?i.length:0;if(a){if(b(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||rt;a>1&&(i=ke(i));for(var c=0;c<a;c++)n.isImmediatePropagationStopped()||s(e,n,i[c])}};return n.elem=e,n}function rt(e,t,n){n.call(e,t)}function it(e,t,n){var r=t.relatedTarget;r&&(r===e||Ji.call(e,r))||n.call(e,t)}function at(){this.$get=function(){return d(Ne,{hasClass:function(e,t){return e.attr&&(e=e[0]),Ve(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),We(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),ze(e,t)}})}}function ot(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"===r||"object"===r&&null!==e?e.$$hashKey=r+":"+(t||c)():r+":"+e}function st(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function ct(e){return Function.prototype.toString.call(e)}function ut(e){var t=ct(e).replace(ua,"");return t.match(aa)||t.match(oa)}function lt(e){var t=ut(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function dt(e,t,n){var r,i,o;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw k(n)&&n||(n=e.name||lt(e)),la("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);i=ut(e),a(i[1].split(sa),function(e){e.replace(ca,function(e,t,n){r.push(n)})})}e.$inject=r}}else Si(e)?(o=e.length-1,ge(e[o],"fn"),r=e.slice(0,o)):ge(e,"fn",!0);return r}function ft(e,t){function n(e){return function(t,n){if(!w(t))return e(t,n);a(t,s(e))}}function r(e,t){if(me(e,"service"),(E(t)||Si(t))&&(t=S.instantiate(t)),!t.$get)throw la("pget","Provider '{0}' must define $get factory method.",e);return _[e+v]=t}function i(e,t){return function(){var n=x.invoke(t,this);if(b(n))throw la("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function o(e,t,n){return r(e,{$get:!1!==n?i(e,t):t})}function c(e,t){return o(e,["$injector",function(e){return e.instantiate(t)}])}function u(e,t){return o(e,m(t),!1)}function l(e,t){me(e,"constant"),_[e]=t,T[e]=t}function d(e,t){var n=S.get(e+v),r=n.$get;n.$get=function(){var e=x.invoke(r,n);return x.invoke(t,null,{$delegate:e})}}function f(e){ve(b(e)||Si(e),"modulesToLoad","not an array");var t,n=[];return a(e,function(e){function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=S.get(r[0]);i[r[1]].apply(i,r[2])}}if(!y.get(e)){y.set(e,!0);try{k(e)?(t=fi(e),x.modules[e]=t,n=n.concat(f(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):E(e)?n.push(S.invoke(e)):Si(e)?n.push(S.invoke(e)):ge(e,"module")}catch(t){throw Si(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),la("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}}),n}function h(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===p)throw la("cdep","Circular dependency found: {0}",t+" <- "+g.join(" <- "));return e[t]}try{return g.unshift(t),e[t]=p,e[t]=n(t,r),e[t]}catch(n){throw e[t]===p&&delete e[t],n}finally{g.shift()}}function i(e,n,i){for(var a=[],o=ft.$$annotate(e,t,i),s=0,c=o.length;s<c;s++){var u=o[s];if("string"!=typeof u)throw la("itkn","Incorrect injection token! Expected service name as string, got {0}",u);a.push(n&&n.hasOwnProperty(u)?n[u]:r(u,i))}return a}function a(e){if(ui||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return L(t)||(t=e.$$ngIsClass=/^(?:class\b|constructor\()/.test(ct(e))),t}function o(e,t,n,r){"string"==typeof n&&(r=n,n=null);var o=i(e,n,r);return Si(e)&&(e=e[e.length-1]),a(e)?(o.unshift(null),new(Function.prototype.bind.apply(e,o))):e.apply(t,o)}function s(e,t,n){var r=Si(e)?e[e.length-1]:e,a=i(e,t,n);return a.unshift(null),new(Function.prototype.bind.apply(r,a))}return{invoke:o,instantiate:s,get:r,annotate:ft.$$annotate,has:function(t){return _.hasOwnProperty(t+v)||e.hasOwnProperty(t)}}}t=!0===t;var p={},v="Provider",g=[],y=new ra,_={$provide:{provider:n(r),factory:n(o),service:n(c),value:n(u),constant:n(l),decorator:d}},S=_.$injector=h(_,function(e,t){throw bi.isString(t)&&g.push(t),la("unpr","Unknown provider: {0}",g.join(" <- "))}),T={},C=h(T,function(e,t){var n=S.get(e+v,t);return x.invoke(n.$get,n,void 0,e)}),x=C;_["$injector"+v]={$get:m(C)},x.modules=S.modules=_e();var P=f(e);return x=C.get("$injector"),x.strictDi=t,a(P,function(e){e&&x.invoke(e)}),x.loadNewModules=function(e){a(f(e),function(e){e&&x.invoke(e)})},x}function ht(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){if("a"===F(e))return t=e,!0}),t}function a(){var e=s.yOffset;if(E(e))e=e();else if(U(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else T(e)||(e=0);return e}function o(e){if(e){e.scrollIntoView();var n=a();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){e=k(e)?e:T(e)?e.toString():n.hash();var t;e?(t=c.getElementById(e))?o(t):(t=i(c.getElementsByName(e)))?o(t):"top"===e&&o(null):o(null)}var c=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){e===t&&""===e||Ke(function(){r.$evalAsync(s)})}),s}]}function pt(e,t){return e||t?e?t?(Si(e)&&(e=e.join(" ")),Si(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function vt(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===fa)return n}}function gt(e){k(e)&&(e=e.split(" "));var t=_e();return a(e,function(e){e.length&&(t[e]=!0)}),t}function mt(e){return w(e)?e:{}}function yt(e,t,n,r){function i(e){try{e.apply(null,G(arguments,1))}finally{if(0===--m)for(;y.length;)try{y.pop()()}catch(e){n.error(e)}}}function o(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}function s(){T=null,u()}function c(){_=C(),_=b(_)?null:_,z(_,P)&&(_=P),P=_,w=_}function u(){var e=w;c(),S===l.url()&&e===_||(S=l.url(),w=_,a(x,function(e){e(l.url(),_)}))}var l=this,d=e.location,f=e.history,h=e.setTimeout,p=e.clearTimeout,g={};l.isMock=!1;var m=0,y=[];l.$$completeOutstandingRequest=i,l.$$incOutstandingRequestCount=function(){m++},l.notifyWhenNoOutstandingRequests=function(e){0===m?e():y.push(e)};var _,w,S=d.href,k=t.find("base"),T=null,C=r.history?function(){try{return f.state}catch(e){}}:v;c(),l.url=function(t,n,i){if(b(i)&&(i=null),d!==e.location&&(d=e.location),f!==e.history&&(f=e.history),t){var a=w===i;if(S===t&&(!r.history||a))return l;var s=S&&en(S)===en(t);return S=t,w=i,!r.history||s&&a?(s||(T=t),n?d.replace(t):s?d.hash=o(t):d.href=t,d.href!==t&&(T=t)):(f[n?"replaceState":"pushState"](i,"",t),c()),T&&(T=t),l}return T||d.href.replace(/%27/g,"'")},l.state=function(){return _};var x=[],E=!1,P=null;l.onUrlChange=function(t){return E||(r.history&&li(e).on("popstate",s),li(e).on("hashchange",s),E=!0),x.push(t),t},l.$$applicationDestroyed=function(){li(e).off("hashchange popstate",s)},l.$$checkUrlChange=u,l.baseHref=function(){var e=k.attr("href");return e?e.replace(/^(https?:)?\/\/[^\/]*/,""):""},l.defer=function(e,t){var n;return m++,n=h(function(){delete g[n],i(e)},t||0),g[n]=!0,n},l.defer.cancel=function(e){return!!g[e]&&(delete g[e],p(e),i(v),!0)}}function bt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new yt(e,r,t,n)}]}function _t(){this.$get=function(){function e(e,n){function i(e){e!==f&&(h?h===e&&(h=e.n):h=e,a(e.n,e.p),a(e,f),f=e,f.n=null)}function a(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var o=0,s=d({},n,{id:e}),c=_e(),u=n&&n.capacity||Number.MAX_VALUE,l=_e(),f=null,h=null;return t[e]={put:function(e,t){if(!b(t)){if(u<Number.MAX_VALUE){i(l[e]||(l[e]={key:e}))}return e in c||o++,c[e]=t,o>u&&this.remove(h.key),t}},get:function(e){if(u<Number.MAX_VALUE){var t=l[e];if(!t)return;i(t)}return c[e]},remove:function(e){if(u<Number.MAX_VALUE){var t=l[e];if(!t)return;t===f&&(f=t.p),t===h&&(h=t.n),a(t.n,t.p),delete l[e]}e in c&&(delete c[e],o--)},removeAll:function(){c=_e(),o=0,l=_e(),f=h=null},destroy:function(){c=null,s=null,l=null,delete t[e]},info:function(){return d({},s,{size:o})}}}var t={};return e.info=function(){var e={};return a(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function wt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function St(){}function kt(t,n){function r(e,t,n){var r=/^([@&<]|=(\*?))(\??)\s*([\w$]*)$/,i=_e();return a(e,function(e,a){if((e=e.trim())in P)return void(i[a]=P[e]);var o=e.match(r);if(!o)throw _a("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,a,e,n?"controller bindings definition":"isolate scope definition");i[a]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||a},o[4]&&(P[e]=i[a])}),i}function i(e,t){var n={isolateScope:null,bindToController:null};if(w(e.scope)&&(!0===e.bindToController?(n.bindToController=r(e.scope,t,!0),n.isolateScope={}):n.isolateScope=r(e.scope,t,!1)),w(e.bindToController)&&(n.bindToController=r(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw _a("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}function o(e){var t=e.charAt(0);if(!t||t!==ai(t))throw _a("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw _a("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}function c(e){var t=e.require||e.controller&&e.name;return!Si(t)&&w(t)&&a(t,function(e,n){var r=e.match(T);e.substring(r[0].length)||(t[n]=r[0]+n)}),t}function u(e,t){if(e&&(!k(e)||!/[EACM]/.test(e)))throw _a("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}var l={},f="Directive",h=/^\s*directive:\s*([\w-]+)\s+(.*)$/,y=/(([\w-]+)(?::([^;]+))?;?)/,S=M("ngSrc,ngSrcset,src,srcset"),T=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,C=/^(on[a-z]+|formaction)$/,P=_e();this.directive=function e(n,r){return ve(n,"name"),me(n,"directive"),k(n)?(o(n),ve(r,"directiveFactory"),l.hasOwnProperty(n)||(l[n]=[],t.factory(n+f,["$injector","$exceptionHandler",function(e,t){var r=[];return a(l[n],function(i,a){try{var o=e.invoke(i);E(o)?o={compile:m(o)}:!o.compile&&o.link&&(o.compile=m(o.link)),o.priority=o.priority||0,o.index=a,o.name=o.name||n,o.require=c(o),o.restrict=u(o.restrict,n),o.$$moduleName=i.$$moduleName,r.push(o)}catch(e){t(e)}}),r}])),l[n].push(r)):a(n,s(e)),this},this.component=function e(t,n){function r(e){function t(t){return E(t)||Si(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var r=n.template||n.templateUrl?n.template:"",o={controller:i,controllerAs:Pt(n.controller)||n.controllerAs||"$ctrl",template:t(r),templateUrl:t(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return a(n,function(e,t){"$"===t.charAt(0)&&(o[t]=e)}),o}if(!k(t))return a(t,s(Y(this,e))),this;var i=n.controller||function(){};return a(n,function(e,t){"$"===t.charAt(0)&&(r[t]=e,E(i)&&(i[t]=e))}),r.$inject=["$injector"],this.directive(t,r)},this.aHrefSanitizationWhitelist=function(e){return _(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return _(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var $=!0;this.debugInfoEnabled=function(e){return _(e)?($=e,this):$};var O=!1;this.preAssignBindingsEnabled=function(e){return _(e)?(O=e,this):O};var I=!1;this.strictComponentBindingsEnabled=function(e){return _(e)?(I=e,this):I};var R=10;this.onChangesTtl=function(e){return arguments.length?(R=e,this):R};var j=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(j=e,this):j};var D=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(D=e,this):D},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(t,n,r,o,s,c,u,m,P,N){function U(){try{if(!--Re)throw Ee=void 0,_a("infchng","{0} $onChanges() iterations reached. Aborting!\n",R);u.$apply(function(){for(var e=0,t=Ee.length;e<t;++e)try{Ee[e]()}catch(e){r(e)}Ee=void 0})}finally{Re++}}function M(e,t){if(t){var n,r,i,a=Object.keys(t);for(n=0,r=a.length;n<r;n++)i=a[n],this[i]=t[i]}else this.$attr={};this.$$element=e}function B(e,t,n){$e.innerHTML="<span "+t+">";var r=$e.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,e.attributes.setNamedItem(i)}function H(e,t){try{e.addClass(t)}catch(e){}}function W(e,t,n,r,i){e instanceof li||(e=li(e));var a=X(e,t,e,n,r,i);W.$$addScopeClass(e);var o=null;return function(t,n,r){if(!e)throw _a("multilink","This element has already been linked.");ve(t,"scope"),i&&i.needsNewScope&&(t=t.$parent.$new()),r=r||{};var s=r.parentBoundTranscludeFn,c=r.transcludeControllers,u=r.futureParentElement;s&&s.$$boundTransclude&&(s=s.$$boundTransclude),o||(o=Q(u));var l;if(l="html"!==o?li(ye(o,li("<div></div>").append(e).html())):n?Ki.clone.call(e):e,c)for(var d in c)l.data("$"+d+"Controller",c[d].instance);return W.$$addScopeInfo(l,t),n&&n(l,t),a&&a(t,l,l,s),n||(e=a=null),l}}function Q(e){var t=e&&e[0];return t&&"foreignobject"!==F(t)&&gi.call(t).match(/SVG/)?"svg":"html"}function X(e,t,n,r,i,a){function o(e,n,r,i){var a,o,s,c,u,l,d,f,v;if(h){var g=n.length;for(v=new Array(g),u=0;u<p.length;u+=3)d=p[u],v[d]=n[d]}else v=n;for(u=0,l=p.length;u<l;)s=v[p[u++]],a=p[u++],o=p[u++],a?(a.scope?(c=e.$new(),W.$$addScopeInfo(li(s),c)):c=e,f=a.transcludeOnThisElement?K(e,a.transclude,i):!a.templateOnThisElement&&i?i:!i&&t?K(e,t):null,a(o,c,s,r,f)):o&&o(e,s.childNodes,void 0,i)}for(var s,c,u,l,d,f,h,p=[],v=Si(e)||e instanceof li,g=0;g<e.length;g++)s=new M,11===ui&&J(e,g,v),c=Z(e[g],[],s,0===g?r:void 0,i),u=c.length?ae(c,e[g],s,t,n,null,[],[],a):null,u&&u.scope&&W.$$addScopeClass(s.$$element),d=u&&u.terminal||!(l=e[g].childNodes)||!l.length?null:X(l,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),(u||d)&&(p.push(g,u,d),f=!0,h=h||u),a=null;return f?o:null}function J(e,t,n){var r,i=e[t],a=i.parentNode;if(i.nodeType===ji)for(;;){if(!(r=a?i.nextSibling:e[t+1])||r.nodeType!==ji)break;i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===e[t+1]&&e.splice(t+1,1)}}function K(e,t,n){function r(r,i,a,o,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:a,futureParentElement:o})}var i=r.$$slots=_e();for(var a in t.$$slots)t.$$slots[a]?i[a]=K(e,t.$$slots[a],n):i[a]=null;return r}function Z(e,t,n,r,i){var a,o,s,c=e.nodeType,u=n.$attr;switch(c){case Ri:o=F(e),ue(t,Ct(o),"E",r,i);for(var l,d,f,h,p,v,g=e.attributes,m=0,b=g&&g.length;m<b;m++){var _=!1,S=!1;l=g[m],d=l.name,p=l.value,h=Ct(d),v=Ne.test(h),v&&(d=d.replace(Sa,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var T=h.match(Me);T&&le(T[1])&&(_=d,S=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),f=Ct(d.toLowerCase()),u[f]=d,!v&&n.hasOwnProperty(f)||(n[f]=p,et(e,f)&&(n[f]=!0)),we(e,t,p,f,v),ue(t,f,"A",r,i,_,S)}if("input"===o&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!Ie)break;if(s=e.className,w(s)&&(s=s.animVal),k(s)&&""!==s)for(;a=y.exec(s);)f=Ct(a[2]),ue(t,f,"C",r,i)&&(n[f]=Ti(a[3])),s=s.substr(a.index+a[0].length);break;case ji:me(t,e.nodeValue);break;case Di:if(!Ae)break;ee(e,t,n,r,i)}return t.sort(pe),t}function ee(e,t,n,r,i){try{var a=h.exec(e.nodeValue);if(a){var o=Ct(a[1]);ue(t,o,"M",r,i)&&(n[o]=Ti(a[2]))}}catch(e){}}function ne(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw _a("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===Ri&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0);else r.push(e);return li(r)}function re(e,t,n){return function(r,i,a,o,s){return i=ne(i[0],t,n),e(r,i,a,o,s)}}function ie(e,t,n,r,i,a){var o;return e?W(t,n,r,i,a):function(){return o||(o=W(t,n,r,i,a),t=n=a=null),o.apply(this,arguments)}}function ae(e,t,n,i,o,s,c,u,l){function f(e,t,n,r){e&&(n&&(e=re(e,n,r)),e.require=p.require,e.directiveName=v,(T===p||p.$$isolateScope)&&(e=ke(e,{isolateScope:!0})),c.push(e)),t&&(n&&(t=re(t,n,r)),t.require=p.require,t.directiveName=v,(T===p||p.$$isolateScope)&&(t=ke(t,{isolateScope:!0})),u.push(t))}function h(e,i,o,s,l){function f(e,t,n,r){var i;if(A(e)||(r=n,n=t,t=e,e=void 0),I&&(i=y),n||(n=I?x.parent():x),!r)return l(e,t,i,n,U);var a=l.$$slots[r];if(a)return a(e,t,i,n,U);if(b(a))throw _a("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,te(x))}var h,p,v,g,m,y,_,x,P,$;t===o?(P=n,x=n.$$element):(x=li(o),P=new M(x,n)),m=i,T?g=i.$new(!0):S&&(m=i.$parent),l&&(_=f,_.$$boundTransclude=l,_.isSlotFilled=function(e){return!!l.$$slots[e]}),k&&(y=se(x,P,_,k,g,i,T)),T&&(W.$$addScopeInfo(x,g,!0,!(C&&(C===T||C===T.$$originalDirective))),W.$$addScopeClass(x,!0),g.$$isolateBindings=T.$$isolateBindings,$=xe(i,P,g,g.$$isolateBindings,T),$.removeWatches&&g.$on("$destroy",$.removeWatches));for(var R in y){var L=k[R],j=y[R],D=L.$$bindings.bindToController;if(O){j.bindingInfo=D?xe(m,P,j.instance,D,L):{};var N=j();N!==j.instance&&(j.instance=N,x.data("$"+L.name+"Controller",N),j.bindingInfo.removeWatches&&j.bindingInfo.removeWatches(),j.bindingInfo=xe(m,P,j.instance,D,L))}else j.instance=j(),x.data("$"+L.name+"Controller",j.instance),j.bindingInfo=xe(m,P,j.instance,D,L)}for(a(k,function(e,t){var n=e.require;e.bindToController&&!Si(n)&&w(n)&&d(y[t].instance,oe(t,n,x,y))}),a(y,function(e){var t=e.instance;if(E(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){r(e)}if(E(t.$onInit))try{t.$onInit()}catch(e){r(e)}E(t.$doCheck)&&(m.$watch(function(){t.$doCheck()}),t.$doCheck()),E(t.$onDestroy)&&m.$on("$destroy",function(){t.$onDestroy()})}),h=0,p=c.length;h<p;h++)v=c[h],Te(v,v.isolateScope?g:i,x,P,v.require&&oe(v.directiveName,v.require,x,y),_);var U=i;for(T&&(T.template||null===T.templateUrl)&&(U=g),e&&e(U,o.childNodes,void 0,l),h=u.length-1;h>=0;h--)v=u[h],Te(v,v.isolateScope?g:i,x,P,v.require&&oe(v.directiveName,v.require,x,y),_);a(y,function(e){var t=e.instance;E(t.$postLink)&&t.$postLink()})}l=l||{};for(var p,v,g,m,y,_=-Number.MAX_VALUE,S=l.newScopeDirective,k=l.controllerDirectives,T=l.newIsolateScopeDirective,C=l.templateDirective,x=l.nonTlbTranscludeDirective,P=!1,$=!1,I=l.hasElementTranscludeDirective,R=n.$$element=li(t),L=s,j=i,D=!1,N=!1,U=0,B=e.length;U<B;U++){p=e[U];var q=p.$$start,H=p.$$end;if(q&&(R=ne(t,q,H)),g=void 0,_>p.priority)break;if(y=p.scope,y&&(p.templateUrl||(w(y)?(ge("new/isolated scope",T||S,p,R),T=p):ge("new/isolated scope",T,p,R)),S=S||p),v=p.name,!D&&(p.replace&&(p.templateUrl||p.template)||p.transclude&&!p.$$tlb)){for(var V,z=U+1;V=e[z++];)if(V.transclude&&!V.$$tlb||V.replace&&(V.templateUrl||V.template)){N=!0;break}D=!0}if(!p.templateUrl&&p.controller&&(k=k||_e(),ge("'"+v+"' controller",k[v],p,R),k[v]=p),y=p.transclude)if(P=!0,p.$$tlb||(ge("transclusion",x,p,R),x=p),"element"===y)I=!0,_=p.priority,g=R,R=n.$$element=li(W.$$createComment(v,n[v])),t=R[0],Se(o,G(g),t),g[0].$$parentNode=g[0].parentNode,j=ie(N,g,i,_,L&&L.name,{nonTlbTranscludeDirective:x});else{var Q=_e();if(w(y)){g=[];var X=_e(),J=_e();a(y,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,X[e]=t,Q[t]=null,J[t]=n}),a(R.contents(),function(e){var t=X[Ct(F(e))];t?(J[t]=!0,Q[t]=Q[t]||[],Q[t].push(e)):g.push(e)}),a(J,function(e,t){if(!e)throw _a("reqslot","Required transclusion slot `{0}` was not filled.",t)});for(var K in Q)Q[K]&&(Q[K]=ie(N,Q[K],i))}else g=li(Ue(t)).contents();R.empty(),j=ie(N,g,i,void 0,void 0,{needsNewScope:p.$$isolateScope||p.$$newScope}),j.$$slots=Q}if(p.template)if($=!0,ge("template",C,p,R),C=p,y=E(p.template)?p.template(R,n):p.template,y=De(y),p.replace){if(L=p,g=Oe(y)?[]:Et(ye(p.templateNamespace,Ti(y))),t=g[0],1!==g.length||t.nodeType!==Ri)throw _a("tplrt","Template for directive '{0}' must have exactly one root element. {1}",v,"");Se(o,R,t);var ee={$attr:{}},ae=Z(t,[],ee),ue=e.splice(U+1,e.length-(U+1));(T||S)&&ce(ae,T,S),e=e.concat(ae).concat(ue),de(n,ee),B=e.length}else R.html(y);if(p.templateUrl)$=!0,ge("template",C,p,R),C=p,p.replace&&(L=p),h=fe(e.splice(U,e.length-U),R,n,o,P&&j,c,u,{controllerDirectives:k,newScopeDirective:S!==p&&S,newIsolateScopeDirective:T,templateDirective:C,nonTlbTranscludeDirective:x}),B=e.length;else if(p.compile)try{m=p.compile(R,n,j);var le=p.$$originalDirective||p;E(m)?f(null,Y(le,m),q,H):m&&f(Y(le,m.pre),Y(le,m.post),q,H)}catch(e){r(e,te(R))}p.terminal&&(h.terminal=!0,_=Math.max(_,p.priority))}return h.scope=S&&!0===S.scope,h.transcludeOnThisElement=P,h.templateOnThisElement=$,h.transclude=j,l.hasElementTranscludeDirective=I,h}function oe(e,t,n,r){var i;if(k(t)){var o=t.match(T),s=t.substring(o[0].length),c=o[1]||o[3],u="?"===o[2];if("^^"===c?n=n.parent():(i=r&&r[s],i=i&&i.instance),!i){var l="$"+s+"Controller";i=c?n.inheritedData(l):n.data(l)}if(!i&&!u)throw _a("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,e)}else if(Si(t)){i=[];for(var d=0,f=t.length;d<f;d++)i[d]=oe(e,t[d],n,r)}else w(t)&&(i={},a(t,function(t,a){i[a]=oe(e,t,n,r)}));return i||null}function se(e,t,n,r,i,a,o){var s=_e();for(var u in r){var l=r[u],d={$scope:l===o||l.$$isolateScope?i:a,$element:e,$attrs:t,$transclude:n},f=l.controller;"@"===f&&(f=t[l.name]);var h=c(f,d,!0,l.controllerAs);s[l.name]=h,e.data("$"+l.name+"Controller",h.instance)}return s}function ce(e,t,n){for(var r=0,i=e.length;r<i;r++)e[r]=p(e[r],{$$isolateScope:t,$$newScope:n})}function ue(e,n,r,a,o,s,c){if(n===o)return null;var u=null;if(l.hasOwnProperty(n))for(var d,h=t.get(n+f),v=0,g=h.length;v<g;v++)if(d=h[v],(b(a)||a>d.priority)&&-1!==d.restrict.indexOf(r)){if(s&&(d=p(d,{$$start:s,$$end:c})),!d.$$bindings){var m=d.$$bindings=i(d,d.name);w(m.isolateScope)&&(d.$$isolateBindings=m.isolateScope)}e.push(d),u=d}return u}function le(e){if(l.hasOwnProperty(e))for(var n,r=t.get(e+f),i=0,a=r.length;i<a;i++)if(n=r[i],n.multiElement)return!0;return!1}function de(e,t){var n=t.$attr,r=e.$attr;a(e,function(r,i){"$"!==i.charAt(0)&&(t[i]&&t[i]!==r&&(r.length?r+=("style"===i?";":" ")+t[i]:r=t[i]),e.$set(i,r,!0,n[i]))}),a(t,function(t,i){e.hasOwnProperty(i)||"$"===i.charAt(0)||(e[i]=t,"class"!==i&&"style"!==i&&(r[i]=n[i]))})}function fe(e,t,n,i,s,c,u,l){var d,f,h=[],v=t[0],g=e.shift(),m=p(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),y=E(g.templateUrl)?g.templateUrl(t,n):g.templateUrl,b=g.templateNamespace;return t.empty(),o(y).then(function(r){var o,p,_,S;if(r=De(r),g.replace){if(_=Oe(r)?[]:Et(ye(b,Ti(r))),o=_[0],1!==_.length||o.nodeType!==Ri)throw _a("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,y);p={$attr:{}},Se(i,t,o);var k=Z(o,[],p);w(g.scope)&&ce(k,!0),e=k.concat(e),de(n,p)}else o=v,t.html(r);for(e.unshift(m),d=ae(e,o,n,s,t,g,c,u,l),a(i,function(e,n){e===o&&(i[n]=t[0])}),f=X(t[0].childNodes,s);h.length;){var T=h.shift(),C=h.shift(),x=h.shift(),E=h.shift(),P=t[0];if(!T.$$destroyed){if(C!==v){var $=C.className;l.hasElementTranscludeDirective&&g.replace||(P=Ue(o)),Se(x,li(C),P),H(li(P),$)}S=d.transcludeOnThisElement?K(T,d.transclude,E):E,d(f,T,P,i,S)}}h=null}).catch(function(e){x(e)&&r(e)}),function(e,t,n,r,i){var a=i;t.$$destroyed||(h?h.push(t,n,r,a):(d.transcludeOnThisElement&&(a=K(t,d.transclude,i)),d(f,t,n,r,a)))}}function pe(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function ge(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw _a("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,te(r))}function me(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&W.$$addBindingClass(t),function(e,t){var i=t.parent();n||W.$$addBindingClass(i),W.$$addBindingInfo(i,r.expressions),e.$watch(r,function(e){t[0].nodeValue=e})}}})}function ye(t,n){switch(t=ai(t||"html")){case"svg":case"math":var r=e.document.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function be(e,t){if("srcdoc"===t)return m.HTML;var n=F(e);if("src"===t||"ngSrc"===t){if(-1===["img","video","audio","source","track"].indexOf(n))return m.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t||"link"===n&&"href"===t)return m.RESOURCE_URL}function we(e,t,r,i,a){var o=be(e,i),s=!a,c=S[i]||a,u=n(r,s,o,c);if(u){if("multiple"===i&&"select"===F(e))throw _a("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",te(e));if(C.test(i))throw _a("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");t.push({priority:100,compile:function(){return{pre:function(e,t,a){var s=a.$$observers||(a.$$observers=_e()),l=a[i];l!==r&&(u=l&&n(l,!0,o,c),r=l),u&&(a[i]=u(e),(s[i]||(s[i]=[])).$$inter=!0,(a.$$observers&&a.$$observers[i].$$scope||e).$watch(u,function(e,t){"class"===i&&e!==t?a.$updateClass(e,t):a.$set(i,e)}))}}}})}}function Se(t,n,r){var i,a,o=n[0],s=n.length,c=o.parentNode;if(t)for(i=0,a=t.length;i<a;i++)if(t[i]===o){t[i++]=r;for(var u=i,l=u+s-1,d=t.length;u<d;u++,l++)l<d?t[u]=t[l]:delete t[u];t.length-=s-1,t.context===o&&(t.context=r);break}c&&c.replaceChild(r,o);var f=e.document.createDocumentFragment();for(i=0;i<s;i++)f.appendChild(n[i]);for(li.hasData(o)&&(li.data(r,li.data(o)),li(o).off("$destroy")),li.cleanData(f.querySelectorAll("*")),i=1;i<s;i++)delete n[i];n[0]=r,n.length=1}function ke(e,t){return d(function(){return e.apply(null,arguments)},e,t)}function Te(e,t,n,i,a,o){try{e(t,n,i,a,o)}catch(e){r(e,te(n))}}function Ce(e,t){if(I)throw _a("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",e,t)}function xe(e,t,r,i,o){function c(t,n,i){E(r.$onChanges)&&!V(n,i)&&(Ee||(e.$$postDigest(U),Ee=[]),l||(l={},Ee.push(u)),l[t]&&(i=l[t].previousValue),l[t]=new Tt(i,n))}function u(){r.$onChanges(l),l=void 0}var l,d=[],f={};return a(i,function(i,a){var u,l,h,p,g,m=i.attrName,y=i.optional,b=i.mode;switch(b){case"@":y||ii.call(t,m)||(Ce(m,o.name),r[a]=t[m]=void 0),g=t.$observe(m,function(e){if(k(e)||L(e)){var t=r[a];c(a,e,t),r[a]=e}}),t.$$observers[m].$$scope=e,u=t[m],k(u)?r[a]=n(u)(e):L(u)&&(r[a]=u),f[a]=new Tt(wa,r[a]),d.push(g);break;case"=":if(!ii.call(t,m)){if(y)break;Ce(m,o.name),t[m]=void 0}if(y&&!t[m])break;l=s(t[m]),p=l.literal?z:V,h=l.assign||function(){throw u=r[a]=l(e),_a("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[m],m,o.name)},u=r[a]=l(e);var _=function(t){return p(t,r[a])||(p(t,u)?h(e,t=r[a]):r[a]=t),u=t};_.$stateful=!0,g=i.collection?e.$watchCollection(t[m],_):e.$watch(s(t[m],_),null,l.literal),d.push(g);break;case"<":if(!ii.call(t,m)){if(y)break;Ce(m,o.name),t[m]=void 0}if(y&&!t[m])break;l=s(t[m]);var w=l.literal,S=r[a]=l(e);f[a]=new Tt(wa,r[a]),g=e.$watch(l,function(e,t){if(t===e){if(t===S||w&&z(t,S))return;t=S}c(a,e,t),r[a]=e},w),d.push(g);break;case"&":if(y||ii.call(t,m)||Ce(m,o.name),(l=t.hasOwnProperty(m)?s(t[m]):v)===v&&y)break;r[a]=function(t){return l(e,t)}}}),{initialChanges:f,removeWatches:d.length&&function(){for(var e=0,t=d.length;e<t;++e)d[e]()}}}var Ee,Pe=/^\w/,$e=e.document.createElement("div"),Ae=j,Ie=D,Re=R;M.prototype={$normalize:Ct,$addClass:function(e){e&&e.length>0&&P.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&P.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=xt(e,t);n&&n.length&&P.addClass(this.$$element,n);var r=xt(t,e);r&&r.length&&P.removeClass(this.$$element,r)},$set:function(e,t,n,i){var o,s=this.$$element[0],c=et(s,e),u=tt(e),l=e;if(c?(this.$$element.prop(e,t),i=c):u&&(this[u]=t,l=u),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e])||(this.$attr[e]=i=he(e,"-")),"a"===(o=F(this.$$element))&&("href"===e||"xlinkHref"===e)||"img"===o&&"src"===e)this[e]=t=null==t?t:N(t,"src"===e);else if("img"===o&&"srcset"===e&&_(t)){for(var d="",f=Ti(t),h=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(f)?h:/(,)/,v=f.split(p),g=Math.floor(v.length/2),m=0;m<g;m++){var y=2*m;d+=N(Ti(v[y]),!0),d+=" "+Ti(v[y+1])}var b=Ti(v[2*m]).split(/\s/);d+=N(Ti(b[0]),!0),2===b.length&&(d+=" "+Ti(b[1])),this[e]=t=d}!1!==n&&(null==t?this.$$element.removeAttr(i):Pe.test(i)?this.$$element.attr(i,t):B(this.$$element[0],i,t));var w=this.$$observers;w&&a(w[l],function(e){try{e(t)}catch(e){r(e)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=_e()),i=r[e]||(r[e]=[]);return i.push(t),u.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||b(n[e])||t(n[e])}),function(){q(i,t)}}};var Le=n.startSymbol(),je=n.endSymbol(),De="{{"===Le&&"}}"===je?g:function(e){return e.replace(/\{\{/g,Le).replace(/}}/g,je)},Ne=/^ngAttr[A-Z]/,Me=/^(.+)Start$/;return W.$$addBindingInfo=$?function(e,t){var n=e.data("$binding")||[];Si(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:v,W.$$addBindingClass=$?function(e){H(e,"ng-binding")}:v,W.$$addScopeInfo=$?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:v,W.$$addScopeClass=$?function(e,t){H(e,t?"ng-isolate-scope":"ng-scope")}:v,W.$$createComment=function(t,n){var r="";return $&&(r=" "+(t||"")+": ",n&&(r+=n+" ")),e.document.createComment(r)},W}]}function Tt(e,t){this.previousValue=e,this.currentValue=t}function Ct(e){return e.replace(Sa,"").replace(ka,function(e,t,n){return n?t.toUpperCase():t})}function xt(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var a=0;a<r.length;a++){for(var o=r[a],s=0;s<i.length;s++)if(o===i[s])continue e;n+=(n.length>0?" ":"")+o}return n}function Et(e){e=li(e);var t=e.length;if(t<=1)return e;for(;t--;){var n=e[t];(n.nodeType===Di||n.nodeType===ji&&""===n.nodeValue.trim())&&pi.call(e,t,1)}return e}function Pt(e,t){if(t&&k(t))return t;if(k(e)){var n=Ca.exec(e);if(n)return n[3]}}function $t(){var e={},t=!1;this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){me(t,"controller"),w(t)?d(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(n,i){function a(e,t,n,i){if(!e||!w(e.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}return function(r,o,s,c){var u,l,f,h;if(s=!0===s,c&&k(c)&&(h=c),k(r)){if(!(l=r.match(Ca)))throw Ta("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);if(f=l[1],h=h||l[3],!(r=e.hasOwnProperty(f)?e[f]:ye(o.$scope,f,!0)||(t?ye(i,f,!0):void 0)))throw Ta("ctrlreg","The controller with the name '{0}' is not registered.",f);ge(r,f,!0)}if(s){var p=(Si(r)?r[r.length-1]:r).prototype;return u=Object.create(p||null),h&&a(o,h,u,f||r.name),d(function(){var e=n.invoke(r,u,o,f);return e!==u&&(w(e)||E(e))&&(u=e,h&&a(o,h,u,f||r.name)),u},{instance:u,identifier:h})}return u=n.instantiate(r,o,f),h&&a(o,h,u,f||r.name),u}}]}function At(){this.$get=["$window",function(e){return li(e.document)}]}function Ot(){this.$get=["$document","$rootScope",function(e,t){function n(){i=r.hidden}var r=e[0],i=r&&r.hidden;return e.on("visibilitychange",n),t.$on("$destroy",function(){e.off("visibilitychange",n)}),function(){return i}}]}function It(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function Rt(e){return w(e)?C(e)?e.toISOString():X(e):e}function Lt(){this.$get=function(){return function(e){if(!e)return"";var t=[];return o(e,function(e,n){null===e||b(e)||E(e)||(Si(e)?a(e,function(e){t.push(oe(n)+"="+oe(Rt(e)))}):t.push(oe(n)+"="+oe(Rt(e))))}),t.join("&")}}}function jt(){this.$get=function(){return function(e){function t(e,r,i){null===e||b(e)||(Si(e)?a(e,function(e,n){t(e,r+"["+(w(e)?n:"")+"]")}):w(e)&&!C(e)?o(e,function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))}):n.push(oe(r)+"="+oe(Rt(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function Dt(e,t){if(k(e)){var n=e.replace(Oa,"").trim();if(n){var r=t("Content-Type"),i=r&&0===r.indexOf(Ea);if(i||Nt(n))try{e=J(n)}catch(t){if(!i)return e;throw Ia("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',e,t)}}}return e}function Nt(e){var t=e.match($a);return t&&Aa[t[0]].test(e)}function Ut(e){function t(e,t){e&&(r[e]=r[e]?r[e]+", "+t:t)}var n,r=_e();return k(e)?a(e.split("\n"),function(e){n=e.indexOf(":"),t(ai(Ti(e.substr(0,n))),Ti(e.substr(n+1)))}):w(e)&&a(e,function(e,n){t(ai(n),Ti(e))}),r}function Mt(e){var t;return function(n){if(t||(t=Ut(e)),n){var r=t[ai(n)];return void 0===r&&(r=null),r}return t}}function Ft(e,t,n,r){return E(r)?r(e,t,n):(a(r,function(r){e=r(e,t,n)}),e)}function Bt(e){return 200<=e&&e<300}function qt(){var e=this.defaults={transformResponse:[Dt],transformRequest:[function(e){return!w(e)||O(e)||R(e)||I(e)?e:X(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ke(Pa),put:ke(Pa),patch:ke(Pa)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},t=!1;this.useApplyAsync=function(e){return _(e)?(t=!!e,this):t};var n=this.interceptors=[],i=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,s,c,u,l,f,h,p){function g(t){function n(e,t){for(var n=0,r=t.length;n<r;){var i=t[n++],a=t[n++];e=e.then(i,a)}return t.length=0,e}function i(){o.$$completeOutstandingRequest(v)}function s(e,t){var n,r={};return a(e,function(e,i){E(e)?null!=(n=e(t))&&(r[i]=n):r[i]=e}),r}function c(t){var n,r,i,a=e.headers,o=d({},t.headers);a=d({},a.common,a[ai(t.method)]);e:for(n in a){r=ai(n);for(i in o)if(ai(i)===r)continue e;o[n]=a[n]}return s(o,ke(t))}function u(t){var n=t.headers,r=Ft(t.data,Mt(n),void 0,t.transformRequest);return b(r)&&a(n,function(e,t){"content-type"===ai(t)&&delete n[t]}),b(t.withCredentials)&&!b(e.withCredentials)&&(t.withCredentials=e.withCredentials),S(t,r).then(l,l)}function l(e){var t=d({},e);return t.data=Ft(e.data,e.headers,e.status,g.transformResponse),Bt(e.status)?t:f.reject(t)}if(!w(t))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);if(!k(p.valueOf(t.url)))throw r("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",t.url);var g=d({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer,jsonpCallbackParam:e.jsonpCallbackParam},t);g.headers=c(t),g.method=oi(g.method),g.paramSerializer=k(g.paramSerializer)?h.get(g.paramSerializer):g.paramSerializer,o.$$incOutstandingRequestCount();var m=[],y=[],_=f.resolve(g);return a(P,function(e){(e.request||e.requestError)&&m.unshift(e.request,e.requestError),(e.response||e.responseError)&&y.push(e.response,e.responseError)}),_=n(_,m),_=_.then(u),_=n(_,y),_=_.finally(i)}function m(e){a(arguments,function(e){g[e]=function(t,n){return g(d({},n||{},{method:e,url:t}))}})}function y(e){a(arguments,function(e){g[e]=function(t,n,r){return g(d({},r||{},{method:e,url:t,data:n}))}})}function S(n,r){function i(e){if(e){var n={};return a(e,function(e,r){n[r]=function(n){function r(){e(n)}t?l.$applyAsync(r):l.$$phase?r():l.$apply(r)}}),n}}function o(e,n,r,i,a){function o(){u(n,e,r,i,a)}v&&(Bt(e)?v.put(A,[e,n,Ut(r),i,a]):v.remove(A)),t?l.$applyAsync(o):(o(),l.$$phase||l.$apply())}function u(e,t,r,i,a){t=t>=-1?t:0,(Bt(t)?y.resolve:y.reject)({data:e,status:t,headers:Mt(r),config:n,statusText:i,xhrStatus:a})}function d(e){u(e.data,e.status,ke(e.headers()),e.statusText,e.xhrStatus)}function h(){var e=g.pendingRequests.indexOf(n);-1!==e&&g.pendingRequests.splice(e,1)}var v,m,y=f.defer(),S=y.promise,E=n.headers,P="jsonp"===ai(n.method),A=n.url;if(P?A=p.getTrustedResourceUrl(A):k(A)||(A=p.valueOf(A)),A=T(A,n.paramSerializer(n.params)),P&&(A=C(A,n.jsonpCallbackParam)),g.pendingRequests.push(n),S.then(h,h),!n.cache&&!e.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(v=w(n.cache)?n.cache:w(e.cache)?e.cache:x),v&&(m=v.get(A),_(m)?j(m)?m.then(d,d):Si(m)?u(m[1],m[0],ke(m[2]),m[3],m[4]):u(m,200,{},"OK","complete"):v.put(A,S)),b(m)){var O=$(n.url)?c()[n.xsrfCookieName||e.xsrfCookieName]:void 0;O&&(E[n.xsrfHeaderName||e.xsrfHeaderName]=O),s(n.method,A,r,o,E,n.timeout,n.withCredentials,n.responseType,i(n.eventHandlers),i(n.uploadEventHandlers))}return S}function T(e,t){return t.length>0&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}function C(e,t){var n=e.split("?");if(n.length>2)throw Ia("badjsonp",'Illegal use more than one "?", in url, "{1}"',e);return a(re(n[1]),function(n,r){if("JSON_CALLBACK"===n)throw Ia("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e);if(r===t)throw Ia("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e)}),e+=(-1===e.indexOf("?")?"?":"&")+t+"=JSON_CALLBACK"}var x=u("$http");e.paramSerializer=k(e.paramSerializer)?h.get(e.paramSerializer):e.paramSerializer;var P=[];a(n,function(e){P.unshift(k(e)?h.get(e):h.invoke(e))});var $=Yn(i);return g.pendingRequests=[],m("get","delete","head","jsonp"),y("post","put","patch"),g.defaults=e,g}]}function Ht(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function Vt(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return zt(e,r,e.defer,t,n[0])}]}function zt(e,t,n,r,i){function o(e,t,n){e=e.replace("JSON_CALLBACK",t);var a=i.createElement("script"),o=null;return a.type="text/javascript",a.src=e,a.async=!0,o=function(e){a.removeEventListener("load",o),a.removeEventListener("error",o),i.body.removeChild(a),a=null;var s=-1,c="unknown";e&&("load"!==e.type||r.wasCalled(t)||(e={type:"error"}),c=e.type,s="error"===e.type?404:200),n&&n(s,c)},a.addEventListener("load",o),a.addEventListener("error",o),i.body.appendChild(a),o}return function(i,s,c,u,l,d,f,h,p,v){function g(e){k="timeout"===e,w&&w(),S&&S.abort()}function m(e,t,r,i,a,o){_(E)&&n.cancel(E),w=S=null,e(t,r,i,a,o)}if(s=s||e.url(),"jsonp"===ai(i))var y=r.createCallback(s),w=o(s,y,function(e,t){var n=200===e&&r.getResponse(y);m(u,e,n,"",t,"complete"),r.removeCallback(y)});else{var S=t(i,s),k=!1;S.open(i,s,!0),a(l,function(e,t){_(e)&&S.setRequestHeader(t,e)}),S.onload=function(){var e=S.statusText||"",t="response"in S?S.response:S.responseText,n=1223===S.status?204:S.status;0===n&&(n=t?200:"file"===Wn(s).protocol?404:0),m(u,n,t,S.getAllResponseHeaders(),e,"complete")};var T=function(){m(u,-1,null,null,"","error")},C=function(){m(u,-1,null,null,"",k?"timeout":"abort")},x=function(){m(u,-1,null,null,"","timeout")};if(S.onerror=T,S.ontimeout=x,S.onabort=C,a(p,function(e,t){S.addEventListener(t,e)}),a(v,function(e,t){S.upload.addEventListener(t,e)}),f&&(S.withCredentials=!0),h)try{S.responseType=h}catch(e){if("json"!==h)throw e}S.send(b(c)?null:c)}if(d>0)var E=n(function(){g("timeout")},d);else j(d)&&d.then(function(){g(_(d.$$timeoutId)?"timeout":"abort")})}}function Wt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function a(e){return"\\\\\\"+e}function o(n){return n.replace(f,e).replace(h,t)}function s(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function c(a,c,f,h){function p(e){try{return e=$(e),h&&!_(e)?e:we(e)}catch(e){r(Ra.interr(a,e))}}if(!a.length||-1===a.indexOf(e)){var v;if(!c){v=m(o(a)),v.exp=a,v.expressions=[],v.$$watchDelegate=s}return v}h=!!h;for(var g,y,w,S=0,k=[],T=[],C=a.length,x=[],E=[];S<C;){if(-1===(g=a.indexOf(e,S))||-1===(y=a.indexOf(t,g+u))){S!==C&&x.push(o(a.substring(S)));break}S!==g&&x.push(o(a.substring(S,g))),w=a.substring(g+u,y),k.push(w),T.push(n(w,p)),S=y+l,E.push(x.length),x.push("")}if(f&&x.length>1&&Ra.throwNoconcat(a),!c||k.length){var P=function(e){for(var t=0,n=k.length;t<n;t++){if(h&&b(e[t]))return;x[E[t]]=e[t]}return x.join("")},$=function(e){return f?i.getTrusted(f,e):i.valueOf(e)};return d(function(e){var t=0,n=k.length,i=new Array(n);try{for(;t<n;t++)i[t]=T[t](e);return P(i)}catch(e){r(Ra.interr(a,e))}},{exp:a,expressions:k,$$watchDelegate:function(e,t){var n;return e.$watchGroup(T,function(r,i){var a=P(r);t.call(this,a,r!==i?n:a,e),n=a})}})}}var u=e.length,l=t.length,f=new RegExp(e.replace(/./g,a),"g"),h=new RegExp(t.replace(/./g,a),"g");return c.startSymbol=function(){return e},c.endSymbol=function(){return t},c}]}function Gt(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,n,r,i){function a(a,s,c,u){function l(){d?a.apply(null,f):a(v)}var d=arguments.length>4,f=d?G(arguments,4):[],h=t.setInterval,p=t.clearInterval,v=0,g=_(u)&&!u,m=(g?r:n).defer(),y=m.promise;return c=_(c)?c:0,y.$$intervalId=h(function(){g?i.defer(l):e.$evalAsync(l),m.notify(v++),c>0&&v>=c&&(m.resolve(v),p(y.$$intervalId),delete o[y.$$intervalId]),g||e.$apply()},s),o[y.$$intervalId]=m,y}var o={};return a.cancel=function(e){return!!(e&&e.$$intervalId in o)&&(Rn(o[e.$$intervalId].promise),o[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete o[e.$$intervalId],!0)},a}]}function Yt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=ae(t[n].replace(/%2F/g,"/"));return t.join("/")}function Qt(e,t){for(var n=e.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),t&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}function Xt(e,t){var n=Wn(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=h(n.port)||Da[n.protocol]||null}function Jt(e,t,n){if(Ua.test(e))throw Na("badpath",'Invalid url "{0}".',e);var r="/"!==e.charAt(0);r&&(e="/"+e);var i=Wn(e),a=r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;t.$$path=Qt(a,n),t.$$search=re(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Kt(e,t){return e.slice(0,t.length)===t}function Zt(e,t){if(Kt(t,e))return t.substr(e.length)}function en(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function tn(e){return e.replace(/(#.+)|#$/,"$1")}function nn(e){return e.substr(0,en(e).lastIndexOf("/")+1)}function rn(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function an(e,t,n){this.$$html5=!0,n=n||"",Xt(e,this),this.$$parse=function(e){var n=Zt(t,e);if(!k(n))throw Na("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Jt(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=ie(this.$$search),n=this.$$hash?"#"+ae(this.$$hash):"";this.$$url=Yt(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var a,o,s;return _(a=Zt(e,r))?(o=a,s=n&&_(a=Zt(n,a))?t+(Zt("/",a)||a):e+o):_(a=Zt(t,r))?s=t+a:t===r+"/"&&(s=t),s&&this.$$parse(s),!!s}}function on(e,t,n){Xt(e,this),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return Kt(t,n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var a,o=Zt(e,r)||Zt(t,r);b(o)||"#"!==o.charAt(0)?this.$$html5?a=o:(a="",b(o)&&(e=r,this.replace())):(a=Zt(n,o),b(a)&&(a=o)),Jt(a,this,!1),this.$$path=i(this.$$path,a,e),this.$$compose()},this.$$compose=function(){var t=ie(this.$$search),r=this.$$hash?"#"+ae(this.$$hash):"";this.$$url=Yt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(t,n){return en(e)===en(t)&&(this.$$parse(t),!0)}}function sn(e,t,n){this.$$html5=!0,on.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var a,o;return e===en(r)?a=r:(o=Zt(t,r))?a=e+n+o:t===r+"/"&&(a=t),a&&this.$$parse(a),!!a},this.$$compose=function(){var t=ie(this.$$search),r=this.$$hash?"#"+ae(this.$$hash):"";this.$$url=Yt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url,this.$$urlUpdatedByLocation=!0}}function cn(e){return function(){return this[e]}}function un(e,t){return function(n){return b(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function ln(){var e="!",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return _(t)?(e=t,this):e},this.html5Mode=function(e){return L(e)?(t.enabled=e,this):w(e)?(L(e.enabled)&&(t.enabled=e.enabled),L(e.requireBase)&&(t.requireBase=e.requireBase),(L(e.rewriteLinks)||k(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,a,o){function s(e,t,n){var i=u.url(),a=u.$$state;try{r.url(e,t,n),u.$$state=r.state()}catch(e){throw u.url(i),u.$$state=a,e}}function c(e,t){n.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}var u,l,d,f=r.baseHref(),h=r.url();if(t.enabled){if(!f&&t.requireBase)throw Na("nobase","$location in HTML5 mode requires a <base> tag to be present!");d=rn(h)+(f||"/"),l=i.history?an:sn}else d=en(h),l=on;var p=nn(d);u=new l(d,p,"#"+e),u.$$parseLinkUrl(h,h),u.$$state=r.state();var v=/^\s*(javascript|mailto):/i;a.on("click",function(e){var i=t.rewriteLinks;if(i&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var s=li(e.target);"a"!==F(s[0]);)if(s[0]===a[0]||!(s=s.parent())[0])return;if(!k(i)||!b(s.attr(i))){var c=s.prop("href"),l=s.attr("href")||s.attr("xlink:href");w(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=Wn(c.animVal).href),v.test(c)||!c||s.attr("target")||e.isDefaultPrevented()||u.$$parseLinkUrl(c,l)&&(e.preventDefault(),u.absUrl()!==r.url()&&(n.$apply(),o.angular["ff-684208-preventDefault"]=!0))}}}),tn(u.absUrl())!==tn(h)&&r.url(u.absUrl(),!0);var g=!0;return r.onUrlChange(function(e,t){if(!Kt(e,p))return void(o.location.href=e);n.$evalAsync(function(){var r,i=u.absUrl(),a=u.$$state;e=tn(e),u.$$parse(e),u.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,a).defaultPrevented,u.absUrl()===e&&(r?(u.$$parse(i),u.$$state=a,s(i,!1,a)):(g=!1,c(i,a)))}),n.$$phase||n.$digest()}),n.$watch(function(){if(g||u.$$urlUpdatedByLocation){u.$$urlUpdatedByLocation=!1;var e=tn(r.url()),t=tn(u.absUrl()),a=r.state(),o=u.$$replace,l=e!==t||u.$$html5&&i.history&&a!==u.$$state;(g||l)&&(g=!1,n.$evalAsync(function(){var t=u.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,u.$$state,a).defaultPrevented;u.absUrl()===t&&(r?(u.$$parse(e),u.$$state=a):(l&&s(t,o,a===u.$$state?null:u.$$state),c(e,a)))}))}u.$$replace=!1}),u}]}function dn(){var e=!0,t=this;this.debugEnabled=function(t){return _(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return x(e)&&(e.stack&&o?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||v;return function(){var e=[];return a(arguments,function(t){e.push(r(t))}),Function.prototype.apply.call(i,t,e)}}var o=ui||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function fn(e){return e+""}function hn(e,t){return void 0!==e?e:t}function pn(e,t){return void 0===e?t:void 0===t?e:e+t}function vn(e,t){return!e(t).$stateful}function gn(e,t){switch(e.type){case za.MemberExpression:if(e.computed)return!1;break;case za.UnaryExpression:return Wa;case za.BinaryExpression:return"+"!==e.operator&&Wa;case za.CallExpression:return!1}return void 0===t?Ga:t}function mn(e,t,n){var r,i,o,s=e.isPure=gn(e,n);switch(e.type){case za.Program:r=!0,a(e.body,function(e){mn(e.expression,t,s),r=r&&e.expression.constant}),e.constant=r;break;case za.Literal:e.constant=!0,e.toWatch=[];break;case za.UnaryExpression:mn(e.argument,t,s),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case za.BinaryExpression:mn(e.left,t,s),mn(e.right,t,s),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case za.LogicalExpression:mn(e.left,t,s),mn(e.right,t,s),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case za.ConditionalExpression:mn(e.test,t,s),mn(e.alternate,t,s),mn(e.consequent,t,s),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case za.Identifier:e.constant=!1,e.toWatch=[e];break;case za.MemberExpression:mn(e.object,t,s),e.computed&&mn(e.property,t,s),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=e.constant?[]:[e];break;case za.CallExpression:o=!!e.filter&&vn(t,e.callee.name),r=o,i=[],a(e.arguments,function(e){mn(e,t,s),r=r&&e.constant,i.push.apply(i,e.toWatch)}),e.constant=r,e.toWatch=o?i:[e];break;case za.AssignmentExpression:mn(e.left,t,s),mn(e.right,t,s),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case za.ArrayExpression:r=!0,i=[],a(e.elements,function(e){mn(e,t,s),r=r&&e.constant,i.push.apply(i,e.toWatch)}),e.constant=r,e.toWatch=i;break;case za.ObjectExpression:r=!0,i=[],a(e.properties,function(e){mn(e.value,t,s),r=r&&e.value.constant,i.push.apply(i,e.value.toWatch),e.computed&&(mn(e.key,t,!1),r=r&&e.key.constant,i.push.apply(i,e.key.toWatch))}),e.constant=r,e.toWatch=i;break;case za.ThisExpression:case za.LocalsExpression:e.constant=!1,e.toWatch=[]}}function yn(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function bn(e){return e.type===za.Identifier||e.type===za.MemberExpression}function _n(e){if(1===e.body.length&&bn(e.body[0].expression))return{type:za.AssignmentExpression,left:e.body[0].expression,right:{type:za.NGValueParameter},operator:"="}}function wn(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===za.Literal||e.body[0].expression.type===za.ArrayExpression||e.body[0].expression.type===za.ObjectExpression)}function Sn(e){return e.constant}function kn(e){this.$filter=e}function Tn(e){this.$filter=e}function Cn(e,t,n){this.ast=new za(e,n),this.astCompiler=n.csp?new Tn(t):new kn(t)}function xn(e){return E(e.valueOf)?e.valueOf():Ba.call(e)}function En(){var e,t,n=_e(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){r[e]=t},this.setIdentifierFns=function(n,r){return e=n,t=r,this},this.$get=["$filter",function(i){function o(e,t){var r,a;switch(typeof e){case"string":if(e=e.trim(),a=e,!(r=n[a])){r=new Cn(new Va(g),i,g).parse(e),r.constant?r.$$watchDelegate=f:r.oneTime?r.$$watchDelegate=r.literal?d:l:r.inputs&&(r.$$watchDelegate=u),n[a]=r}return h(r,t);case"function":return h(e,t);default:return h(v,t)}}function s(e){return new Cn(new Va(g),i,g).getAst(e).ast}function c(e,t,n){return null==e||null==t?e===t:!("object"==typeof e&&"object"==typeof(e=xn(e))&&!n)&&(e===t||e!==e&&t!==t)}function u(e,t,n,r,i){var a,o=r.inputs;if(1===o.length){var s=c;return o=o[0],e.$watch(function(e){var t=o(e);return c(t,s,o.isPure)||(a=r(e,void 0,void 0,[t]),s=t&&xn(t)),a},t,n,i)}for(var u=[],l=[],d=0,f=o.length;d<f;d++)u[d]=c,l[d]=null;return e.$watch(function(e){for(var t=!1,n=0,i=o.length;n<i;n++){var s=o[n](e);(t||(t=!c(s,u[n],o[n].isPure)))&&(l[n]=s,u[n]=s&&xn(s))}return t&&(a=r(e,void 0,void 0,l)),a},t,n,i)}function l(e,t,n,r,i){function a(e){return r(e)}function o(e,n,r){c=e,E(t)&&t(e,n,r),_(e)&&r.$$postDigest(function(){_(c)&&s()})}var s,c;return s=r.inputs?u(e,o,n,r,i):e.$watch(a,o,n)}function d(e,t,n,r){function i(e){var t=!0;return a(e,function(e){_(e)||(t=!1)}),t}var o,s;return o=e.$watch(function(e){return r(e)},function(e,n,r){s=e,E(t)&&t(e,n,r),i(e)&&r.$$postDigest(function(){i(s)&&o()})},n)}function f(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function h(e,t){if(!t)return e;var n=e.$$watchDelegate,r=!1,i=n!==d&&n!==l,a=i?function(n,i,a,o){var s=r&&o?o[0]:e(n,i,a,o);return t(s,n,i)}:function(n,r,i,a){var o=e(n,r,i,a),s=t(o,n,r);return _(o)?s:o};return r=!e.inputs,n&&n!==u?(a.$$watchDelegate=n,a.inputs=e.inputs):t.$stateful||(a.$$watchDelegate=u,a.inputs=e.inputs?e.inputs:[e]),a.inputs&&(a.inputs=a.inputs.map(function(e){return e.isPure===Ga?function(t){return e(t)}:e})),a}var p=xi().noUnsafeEval,g={csp:p,literals:H(r),isIdentifierStart:E(e)&&e,isIdentifierContinue:E(t)&&t};return o.$$getAst=s,o}]}function Pn(){var e=!0;this.$get=["$rootScope","$exceptionHandler",function(t,n){return An(function(e){t.$evalAsync(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return _(t)?(e=t,this):e}}function $n(){var e=!0;this.$get=["$browser","$exceptionHandler",function(t,n){return An(function(e){t.defer(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return _(t)?(e=t,this):e}}function An(e,t,n){function i(){return new o}function o(){var e=this.promise=new s;this.resolve=function(t){f(e,t)},this.reject=function(t){p(e,t)},this.notify=function(t){g(e,t)}}function s(){this.$$state={status:0}}function c(r){var i,a,o;o=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var s=0,c=o.length;s<c;++s){In(r),a=o[s][0],i=o[s][r.status];try{E(i)?f(a,i(r.value)):1===r.status?f(a,r.value):p(a,r.value)}catch(e){p(a,e),e&&!0===e.$$passToExceptionHandler&&t(e)}}}finally{--P,n&&0===P&&e(u)}}function u(){for(;!P&&$.length;){var e=$.shift();if(!On(e)){In(e);var n="Possibly unhandled rejection: "+Ce(e.value);x(e.value)?t(e.value,n):t(n)}}}function l(t){!n||t.pending||2!==t.status||On(t)||(0===P&&0===$.length&&e(u),$.push(t)),!t.processScheduled&&t.pending&&(t.processScheduled=!0,++P,e(function(){c(t)}))}function f(e,t){e.$$state.status||(t===e?v(e,C("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):h(e,t))}function h(e,t){function n(t){o||(o=!0,h(e,t))}function r(t){o||(o=!0,v(e,t))}function i(t){g(e,t)}var a,o=!1;try{(w(t)||E(t))&&(a=t.then),E(a)?(e.$$state.status=-1,a.call(t,n,r,i)):(e.$$state.value=t,e.$$state.status=1,l(e.$$state))}catch(e){r(e)}}function p(e,t){e.$$state.status||v(e,t)}function v(e,t){e.$$state.value=t,e.$$state.status=2,l(e.$$state)}function g(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&e(function(){for(var e,n,a=0,o=i.length;a<o;a++){n=i[a][0],e=i[a][3];try{g(n,E(e)?e(r):r)}catch(e){t(e)}}})}function m(e){var t=new s;return p(t,e),t}function y(e,t,n){var r=null;try{E(n)&&(r=n())}catch(e){return m(e)}return j(r)?r.then(function(){return t(e)},m):t(e)}function _(e,t,n,r){var i=new s;return f(i,e),i.then(t,n,r)}function S(e){var t=new s,n=0,r=Si(e)?[]:{};return a(e,function(e,i){n++,_(e).then(function(e){r[i]=e,--n||f(t,r)},function(e){p(t,e)})}),0===n&&f(t,r),t}function k(e){var t=i();return a(e,function(e){_(e).then(t.resolve,t.reject)}),t.promise}function T(e){function t(e){f(r,e)}function n(e){p(r,e)}if(!E(e))throw C("norslvr","Expected resolverFn, got '{0}'",e);var r=new s;return e(t,n),r}var C=r("$q",TypeError),P=0,$=[];d(s.prototype,{then:function(e,t,n){if(b(e)&&b(t)&&b(n))return this;var r=new s;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&l(this.$$state),r},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then(function(t){return y(t,A,e)},function(t){return y(t,m,e)},t)}});var A=_;return T.prototype=s.prototype,T.defer=i,T.reject=m,T.when=_,T.resolve=A,T.all=S,T.race=k,T}function On(e){return!!e.pur}function In(e){e.pur=!0}function Rn(e){In(e.$$state)}function Ln(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,a=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return a.supported=i,a}]}function jn(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=c(),this.$$ChildScope=null,this.$$suspended=!1}return t.prototype=e,t}var t=10,n=r("$rootScope"),o=null,s=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(r,u,l){function d(e){e.currentScope.$$destroyed=!0}function f(e){9===ui&&(e.$$childHead&&f(e.$$childHead),e.$$nextSibling&&f(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function h(){this.$id=c(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function p(e){if(T.$$phase)throw n("inprog","{0} already in progress",T.$$phase);T.$$phase=e}function g(){T.$$phase=null}function m(e,t){do{e.$$watchersCount+=t}while(e=e.$parent)}function y(e,t,n){do{e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n]}while(e=e.$parent)}function _(){}function S(){for(;P.length;)try{P.shift()()}catch(e){r(e)}s=null}function k(){null===s&&(s=l.defer(function(){T.$apply(S)}))}h.prototype={constructor:h,$new:function(t,n){var r;return n=n||this,t?(r=new h,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!==this)&&r.$on("$destroy",d),r},$watch:function(e,t,n,r){var i=u(e),a=E(t)?t:v;if(i.$$watchDelegate)return i.$$watchDelegate(this,a,n,i,e);var s=this,c=s.$$watchers,l={fn:a,last:_,get:i,exp:r||e,eq:!!n};return o=null,c||(c=s.$$watchers=[],c.$$digestWatchIndex=-1),c.unshift(l),c.$$digestWatchIndex++,m(this,1),function(){var e=q(c,l);e>=0&&(m(s,-1),e<c.$$digestWatchIndex&&c.$$digestWatchIndex--),o=null}},$watchGroup:function(e,t){function n(){c=!1,u?(u=!1,t(i,i,s)):t(i,r,s)}var r=new Array(e.length),i=new Array(e.length),o=[],s=this,c=!1,u=!0;if(!e.length){var l=!0;return s.$evalAsync(function(){l&&t(i,i,s)}),function(){l=!1}}return 1===e.length?this.$watch(e[0],function(e,n,a){i[0]=e,r[0]=n,t(i,e===n?i:r,a)}):(a(e,function(e,t){var a=s.$watch(e,function(e,a){i[t]=e,r[t]=a,c||(c=!0,s.$evalAsync(n))});o.push(a)}),function(){for(;o.length;)o.shift()()})},$watchCollection:function(e,t){function n(e){a=e;var t,n,r,s;if(!b(a)){if(w(a))if(i(a)){o!==h&&(o=h,g=o.length=0,d++),t=a.length,g!==t&&(d++,o.length=g=t);for(var c=0;c<t;c++)s=o[c],r=a[c],s!==s&&r!==r||s===r||(d++,o[c]=r)}else{o!==p&&(o=p={},g=0,d++),t=0;for(n in a)ii.call(a,n)&&(t++,r=a[n],s=o[n],n in o?s!==s&&r!==r||s===r||(d++,o[n]=r):(g++,o[n]=r,d++));if(g>t){d++;for(n in o)ii.call(a,n)||(g--,delete o[n])}}else o!==a&&(o=a,d++);return d}}function r(){if(v?(v=!1,t(a,a,c)):t(a,s,c),l)if(w(a))if(i(a)){s=new Array(a.length);for(var e=0;e<a.length;e++)s[e]=a[e]}else{s={};for(var n in a)ii.call(a,n)&&(s[n]=a[n])}else s=a}n.$stateful=!0;var a,o,s,c=this,l=t.length>1,d=0,f=u(e,n),h=[],p={},v=!0,g=0;return this.$watch(f,r)},$digest:function(){var e,i,a,c,u,d,f,h,v,m,y,b=t,w=this,k=[];p("$digest"),l.$$checkUrlChange(),this===T&&null!==s&&(l.defer.cancel(s),S()),o=null;do{f=!1,v=w;for(var P=0;P<C.length;P++){try{y=C[P],c=y.fn,c(y.scope,y.locals)}catch(e){r(e)}o=null}C.length=0;e:do{if(d=!v.$$suspended&&v.$$watchers)for(d.$$digestWatchIndex=d.length;d.$$digestWatchIndex--;)try{if(e=d[d.$$digestWatchIndex])if(u=e.get,(i=u(v))===(a=e.last)||(e.eq?z(i,a):wi(i)&&wi(a))){if(e===o){f=!1;break e}}else f=!0,o=e,e.last=e.eq?H(i,null):i,c=e.fn,c(i,a===_?i:a,v),b<5&&(m=4-b,k[m]||(k[m]=[]),k[m].push({msg:E(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:i,oldVal:a}))}catch(e){r(e)}if(!(h=!v.$$suspended&&v.$$watchersCount&&v.$$childHead||v!==w&&v.$$nextSibling))for(;v!==w&&!(h=v.$$nextSibling);)v=v.$parent}while(v=h);if((f||C.length)&&!b--)throw g(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,k)}while(f||C.length);for(g();$<x.length;)try{x[$++]()}catch(e){r(e)}x.length=$=0,l.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===T&&l.$$applicationDestroyed(),m(this,-this.$$watchersCount);for(var t in this.$$listenerCount)y(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=v,this.$on=this.$watch=this.$watchGroup=function(){return v},this.$$listeners={},this.$$nextSibling=null,f(this)}},$eval:function(e,t){return u(e)(this,t)},$evalAsync:function(e,t){T.$$phase||C.length||l.defer(function(){C.length&&T.$digest()}),C.push({scope:this,fn:u(e),locals:t})},$$postDigest:function(e){x.push(e)},$apply:function(e){try{p("$apply");try{return this.$eval(e)}finally{g()}}catch(e){r(e)}finally{try{T.$digest()}catch(e){throw r(e),e}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&P.push(t),e=u(e),k()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do{r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(delete n[r],y(i,1,e))}},$emit:function(e,t){var n,i,a,o=[],s=this,c=!1,u={name:e,targetScope:s,stopPropagation:function(){c=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},l=W([u],arguments,1);do{for(n=s.$$listeners[e]||o,u.currentScope=s,i=0,a=n.length;i<a;i++)if(n[i])try{n[i].apply(null,l)}catch(e){r(e)}else n.splice(i,1),i--,a--;if(c)break;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(e,t){var n=this,i=n,a=n,o={name:e,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return o;for(var s,c,u,l=W([o],arguments,1);i=a;){for(o.currentScope=i,s=i.$$listeners[e]||[],c=0,u=s.length;c<u;c++)if(s[c])try{s[c].apply(null,l)}catch(e){r(e)}else s.splice(c,1),c--,u--;if(!(a=i.$$listenerCount[e]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(a=i.$$nextSibling);)i=i.$parent}return o.currentScope=null,o}};var T=new h,C=T.$$asyncQueue=[],x=T.$$postDigestQueue=[],P=T.$$applyAsyncQueue=[],$=0;return T}]}function Dn(){var e=/^\s*(https?|s?ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return _(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return _(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,a=r?t:e;return i=Wn(n&&n.trim()).href,""===i||i.match(a)?n:"unsafe:"+i}}}function Nn(e){return e.replace(Xa,$e)}function Un(e){if("self"===e)return e;if(k(e)){if(e.indexOf("***")>-1)throw Ya("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Ci(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(P(e))return new RegExp("^"+e.source+"$");throw Ya("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Mn(e){var t=[];return _(e)&&a(e,function(e){t.push(Un(e))}),t}function Fn(){this.SCE_CONTEXTS=Qa;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Mn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Mn(e)),t},this.$get=["$injector",function(n){function r(e,t){return"self"===e?Gn(t):!!e.exec(t.href)}function i(n){var i,a,o=Wn(n.toString()),s=!1;for(i=0,a=e.length;i<a;i++)if(r(e[i],o)){s=!0;break}if(s)for(i=0,a=t.length;i<a;i++)if(r(t[i],o)){s=!1;break}return s}function a(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function o(e,t){var n=d.hasOwnProperty(e)?d[e]:null;if(!n)throw Ya("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||b(t)||""===t)return t;if("string"!=typeof t)throw Ya("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function s(e){return e instanceof l?e.$$unwrapTrustedValue():e}function c(e,t){if(null===t||b(t)||""===t)return t;var n=d.hasOwnProperty(e)?d[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===Qa.RESOURCE_URL){if(i(t))return t;throw Ya("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Qa.HTML)return u(t);throw Ya("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function(e){throw Ya("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(u=n.get("$sanitize"));var l=a(),d={};return d[Qa.HTML]=a(l),d[Qa.CSS]=a(l),d[Qa.URL]=a(l),d[Qa.JS]=a(l),d[Qa.RESOURCE_URL]=a(d[Qa.URL]),{trustAs:o,getTrusted:c,valueOf:s}}]}function Bn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&ui<8)throw Ya("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=ke(Qa);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=g),r.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:t(n,function(t){return r.getTrusted(e,t)})};var i=r.parseAs,o=r.getTrusted,s=r.trustAs;return a(Qa,function(e,t){var n=ai(t);r[Nn("parse_as_"+n)]=function(t){return i(e,t)},r[Nn("get_trusted_"+n)]=function(t){return o(e,t)},r[Nn("trust_as_"+n)]=function(t){return s(e,t)}}),r}]}function qn(){this.$get=["$window","$document",function(e,t){var n={},r=e.nw&&e.nw.process,i=!r&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id),a=!i&&e.history&&e.history.pushState,o=h((/android (\d+)/.exec(ai((e.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((e.navigator||{}).userAgent),c=t[0]||{},u=c.body&&c.body.style,l=!1,d=!1;return u&&(l=!!("transition"in u||"webkitTransition"in u),d=!!("animation"in u||"webkitAnimation"in u)),{history:!(!a||o<4||s),hasEvent:function(e){if("input"===e&&ui)return!1;if(b(n[e])){var t=c.createElement("div");n[e]="on"+e in t}return n[e]},csp:xi(),transitions:l,animations:d,android:o}}]}function Hn(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(t,n,r,i,a){function o(s,c){function u(e){return c||(e=Ja("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,e.status,e.statusText),t(e)),i.reject(e)}o.totalPendingRequests++,k(s)&&!b(n.get(s))||(s=a.getTrustedResourceUrl(s));var l=r.defaults&&r.defaults.transformResponse;return Si(l)?l=l.filter(function(e){return e!==Dt}):l===Dt&&(l=null),r.get(s,d({cache:n,transformResponse:l},e)).finally(function(){o.totalPendingRequests--}).then(function(e){return n.put(s,e.data),e.data},u)}return o.totalPendingRequests=0,o}]}function Vn(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={};return r.findBindings=function(e,t,n){var r=e.getElementsByClassName("ng-binding"),i=[];return a(r,function(e){var r=bi.element(e).data("$binding");r&&a(r,function(r){if(n){new RegExp("(^|\\s)"+Ci(t)+"(\\s|\\||$)").test(r)&&i.push(e)}else-1!==r.indexOf(t)&&i.push(e)})}),i},r.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var a=n?"=":"*=",o="["+r[i]+"model"+a+'"'+t+'"]',s=e.querySelectorAll(o);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},r.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},r}]}function zn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function a(a,s,c){E(a)||(c=s,s=a,a=v);var u,l=G(arguments,3),d=_(c)&&!c,f=(d?r:n).defer(),h=f.promise;return u=t.defer(function(){try{f.resolve(a.apply(null,l))}catch(e){f.reject(e),i(e)}finally{delete o[h.$$timeoutId]}d||e.$apply()},s),h.$$timeoutId=u,o[u]=f,h}var o={};return a.cancel=function(e){return!!(e&&e.$$timeoutId in o)&&(Rn(o[e.$$timeoutId].promise),o[e.$$timeoutId].reject("canceled"),delete o[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},a}]}function Wn(e){if(!k(e))return e;var t=e;return ui&&(Ka.setAttribute("href",t),t=Ka.href),Ka.setAttribute("href",t),{href:Ka.href,protocol:Ka.protocol?Ka.protocol.replace(/:$/,""):"",host:Ka.host,search:Ka.search?Ka.search.replace(/^\?/,""):"",hash:Ka.hash?Ka.hash.replace(/^#/,""):"",hostname:Ka.hostname,port:Ka.port,pathname:"/"===Ka.pathname.charAt(0)?Ka.pathname:"/"+Ka.pathname}}function Gn(e){return Qn(e,Za)}function Yn(e){var t=[Za].concat(e.map(Wn));return function(e){var n=Wn(e);return t.some(Qn.bind(null,n))}}function Qn(e,t){return e=Wn(e),t=Wn(t),e.protocol===t.protocol&&e.host===t.host}function Xn(){this.$get=m(e)}function Jn(e){function t(e){try{return e.cookie||""}catch(e){return""}}function n(e){try{return decodeURIComponent(e)}catch(t){return e}}var r=e[0]||{},i={},a="";return function(){var e,o,s,c,u,l=t(r);if(l!==a)for(a=l,e=a.split("; "),i={},s=0;s<e.length;s++)o=e[s],(c=o.indexOf("="))>0&&(u=n(o.substring(0,c)),b(i[u])&&(i[u]=n(o.substring(c+1))));return i}}function Kn(){this.$get=Jn}function Zn(e){function t(r,i){if(w(r)){var o={};return a(r,function(e,n){o[n]=t(n,e)}),o}return e.factory(r+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",ir),t("date",br),t("filter",er),t("json",_r),t("limitTo",wr),t("lowercase",oo),t("number",ar),t("orderBy",kr),t("uppercase",so)}function er(){return function(e,t,n,a){if(!i(e)){if(null==e)return e;throw r("filter")("notarray","Expected array but received: {0}",e)}a=a||"$";var o,s,c=rr(t);switch(c){case"function":o=t;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":o=tr(t,n,a,s);break;default:return e}return Array.prototype.filter.call(e,o)}}function tr(e,t,n,r){var i=w(e)&&n in e;return!0===t?t=z:E(t)||(t=function(e,t){return!b(e)&&(null===e||null===t?e===t:!(w(t)||w(e)&&!y(e))&&(e=ai(""+e),t=ai(""+t),-1!==e.indexOf(t)))}),function(a){return i&&!w(a)?nr(a,e[n],t,n,!1):nr(a,e,t,n,r)}}function nr(e,t,n,r,i,a){var o=rr(e),s=rr(t);if("string"===s&&"!"===t.charAt(0))return!nr(e,t.substring(1),n,r,i);if(Si(e))return e.some(function(e){return nr(e,t,n,r,i)});switch(o){case"object":var c;if(i){for(c in e)if(c.charAt&&"$"!==c.charAt(0)&&nr(e[c],t,n,r,!0))return!0;return!a&&nr(e,t,n,r,!1)}if("object"===s){for(c in t){var u=t[c];if(!E(u)&&!b(u)){var l=c===r;if(!nr(l?e:e[c],u,n,r,l,l))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function rr(e){return null===e?"null":typeof e}function ir(e){var t=e.NUMBER_FORMATS;return function(e,n,r){b(n)&&(n=t.CURRENCY_SYM),b(r)&&(r=t.PATTERNS[1].maxFrac);var i=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==e?e:cr(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(i,n)}}function ar(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:cr(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function or(e){var t,n,r,i,a,o=0;for((n=e.indexOf(to))>-1&&(e=e.replace(to,"")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charAt(r)===no;r++);if(r===(a=e.length))t=[0],n=1;else{for(a--;e.charAt(a)===no;)a--;for(n-=r,t=[],i=0;r<=a;r++,i++)t[i]=+e.charAt(r)}return n>eo&&(t=t.splice(0,eo-1),o=n-1,n=1),{d:t,e:o,i:n}}function sr(e,t,n,r){var i=e.d,a=i.length-e.i;t=b(t)?Math.min(Math.max(n,a),r):+t;var o=t+e.i,s=i[o];if(o>0){i.splice(Math.max(e.i,o));for(var c=o;c<i.length;c++)i[c]=0}else{a=Math.max(0,a),e.i=1,i.length=Math.max(1,o=t+1),i[0]=0;for(var u=1;u<o;u++)i[u]=0}if(s>=5)if(o-1<0){for(var l=0;l>o;l--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[o-1]++;for(;a<Math.max(0,t);a++)i.push(0);var d=i.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0);d&&(i.unshift(d),e.i++)}function cr(e,t,n,r,i){if(!k(e)&&!T(e)||isNaN(e))return"";var a,o=!isFinite(e),s=!1,c=Math.abs(e)+"",u="";if(o)u="∞";else{a=or(c),sr(a,i,t.minFrac,t.maxFrac);var l=a.d,d=a.i,f=a.e,h=[];for(s=l.reduce(function(e,t){return e&&!t},!0);d<0;)l.unshift(0),d++;d>0?h=l.splice(d,l.length):(h=l,l=[0]);var p=[];for(l.length>=t.lgSize&&p.unshift(l.splice(-t.lgSize,l.length).join(""));l.length>t.gSize;)p.unshift(l.splice(-t.gSize,l.length).join(""));l.length&&p.unshift(l.join("")),u=p.join(n),h.length&&(u+=r+h.join("")),f&&(u+="e+"+f)}return e<0&&!s?t.negPre+u+t.negSuf:t.posPre+u+t.posSuf}function ur(e,t,n,r){var i="";for((e<0||r&&e<=0)&&(r?e=1-e:(e=-e,i="-")),e=""+e;e.length<t;)e=no+e;return n&&(e=e.substr(e.length-t)),i+e}function lr(e,t,n,r,i){return n=n||0,function(a){var o=a["get"+e]();return(n>0||o>-n)&&(o+=n),0===o&&-12===n&&(o=12),ur(o,t,r,i)}}function dr(e,t,n){return function(r,i){var a=r["get"+e]();return i[oi((n?"STANDALONE":"")+(t?"SHORT":"")+e)][a]}}function fr(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=ur(Math[r>0?"floor":"ceil"](r/60),2)+ur(Math.abs(r%60),2)}function hr(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function pr(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function vr(e){return function(t){var n=hr(t.getFullYear()),r=pr(t),i=+r-+n;return ur(1+Math.round(i/6048e5),e)}}function gr(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function mr(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function yr(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function br(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,a=0,o=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=h(t[9]+t[10]),a=h(t[9]+t[11])),o.call(r,h(t[1]),h(t[2])-1,h(t[3]));var c=h(t[4]||0)-i,u=h(t[5]||0)-a,l=h(t[6]||0),d=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,c,u,l,d),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var o,s,c="",u=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,k(n)&&(n=ao.test(n)?h(n):t(n)),T(n)&&(n=new Date(n)),!C(n)||!isFinite(n.getTime()))return n;for(;r;)s=io.exec(r),s?(u=W(u,s,1),r=u.pop()):(u.push(r),r=null);var l=n.getTimezoneOffset();return i&&(l=K(i,l),n=ee(n,i,!0)),a(u,function(t){o=ro[t],c+=o?o(n,e.DATETIME_FORMATS,l):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}}function _r(){return function(e,t){return b(t)&&(t=2),X(e,t)}}function wr(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):h(t),wi(t)?e:(T(e)&&(e=e.toString()),i(e)?(n=!n||isNaN(n)?0:h(n),n=n<0?Math.max(0,e.length+n):n,t>=0?Sr(e,n,n+t):0===n?Sr(e,t,e.length):Sr(e,Math.max(0,n+t),n)):e)}}function Sr(e,t,n){return k(e)?e.slice(t,n):hi.call(e,t,n)}function kr(e){function t(t){return t.map(function(t){var n=1,r=g;if(E(t))r=t;else if(k(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t),r.constant))){var i=r();r=function(e){return e[i]}}return{get:r,descending:n}})}function n(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function a(e){return E(e.valueOf)&&(e=e.valueOf(),n(e))?e:(y(e)&&(e=e.toString(),n(e)),e)}function o(e,t){var n=typeof e;return null===e?(n="string",e="null"):"object"===n&&(e=a(e)),{value:e,type:n,index:t}}function s(e,t){var n=0,r=e.type,i=t.type;if(r===i){var a=e.value,o=t.value;"string"===r?(a=a.toLowerCase(),o=o.toLowerCase()):"object"===r&&(w(a)&&(a=e.index),w(o)&&(o=t.index)),a!==o&&(n=a<o?-1:1)}else n=r<i?-1:1;return n}return function(e,n,a,c){function u(e,t){return{value:e,tieBreaker:{value:t,type:"number",index:t},predicateValues:d.map(function(n){return o(n.get(e),t)})}}function l(e,t){for(var n=0,r=d.length;n<r;n++){var i=h(e.predicateValues[n],t.predicateValues[n]);if(i)return i*d[n].descending*f}return(h(e.tieBreaker,t.tieBreaker)||s(e.tieBreaker,t.tieBreaker))*f}if(null==e)return e;if(!i(e))throw r("orderBy")("notarray","Expected array but received: {0}",e);Si(n)||(n=[n]),0===n.length&&(n=["+"]);var d=t(n),f=a?-1:1,h=E(c)?c:s,p=Array.prototype.map.call(e,u);return p.sort(l),e=p.map(function(e){return e.value})}}function Tr(e){return E(e)&&(e={link:e}),e.restrict=e.restrict||"AC",m(e)}function Cr(e,t){e.$name=t}function xr(e,t,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=lo,this.$$element=e,this.$$animate=r,Er(this)}function Er(e){e.$$classCache={},e.$$classCache[Qo]=!(e.$$classCache[Yo]=e.$$element.hasClass(Yo))}function Pr(e){function t(e,t,n,r){e[t]||(e[t]={}),o(e[t],n,r)}function n(e,t,n,r){e[t]&&s(e[t],n,r),$r(e[t])&&(e[t]=void 0)}function r(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function i(e,t,n){t=t?"-"+he(t,"-"):"",r(e,Yo+t,!0===n),r(e,Qo+t,!1===n)}var a=e.clazz,o=e.set,s=e.unset;a.prototype.$setValidity=function(e,a,c){b(a)?t(this,"$pending",e,c):n(this,"$pending",e,c),L(a)?a?(s(this.$error,e,c),o(this.$$success,e,c)):(o(this.$error,e,c),s(this.$$success,e,c)):(s(this.$error,e,c),s(this.$$success,e,c)),this.$pending?(r(this,fo,!0),this.$valid=this.$invalid=void 0,i(this,"",null)):(r(this,fo,!1),this.$valid=$r(this.$error),this.$invalid=!this.$valid,i(this,"",this.$valid));var u;u=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null),i(this,e,u),this.$$parentForm.$setValidity(e,u,this)}}function $r(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Ar(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function Or(e,t,n,r,i,a){Ir(e,t,n,r,i,a),Ar(r)}function Ir(e,t,n,r,i,a){var o=ai(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionupdate",function(e){(b(e.data)||""===e.data)&&(s=!1)}),t.on("compositionend",function(){s=!1,u()})}var c,u=function(e){if(c&&(a.defer.cancel(c),c=null),!s){var i=t.val(),u=e&&e.type;"password"===o||n.ngTrim&&"false"===n.ngTrim||(i=Ti(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))t.on("input",u);else{var l=function(e,t,n){c||(c=a.defer(function(){c=null,t&&t.value===n||u(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||l(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut drop",l)}t.on("change",u),Eo[o]&&r.$$hasNativeValidators&&o===n.type&&t.on(xo,function(e){if(!c){var t=this[ri],n=t.badInput,r=t.typeMismatch;c=a.defer(function(){c=null,t.badInput===n&&t.typeMismatch===r||u(e)})}}),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function Rr(e,t){if(C(e))return e;if(k(e)){ko.lastIndex=0;var n=ko.exec(e);if(n){var r=+n[1],i=+n[2],a=0,o=0,s=0,c=0,u=hr(r),l=7*(i-1);return t&&(a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),c=t.getMilliseconds()),new Date(r,0,u.getDate()+l,a,o,s,c)}}return NaN}function Lr(e,t){return function(n,r){var i,o;if(C(n))return n;if(k(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),mo.test(n))return new Date(n);if(e.lastIndex=0,i=e.exec(n))return i.shift(),o=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},a(i,function(e,n){n<t.length&&(o[t[n]]=+e)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return NaN}}function jr(e,t,n,r){return function(i,a,o,s,c,u,l){function d(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function f(e){return _(e)&&!C(e)?h(e)||void 0:e}function h(e,t){var r=s.$options.getOption("timezone");v&&v!==r&&(t=Z(t,K(v)));var i=n(e,t);return!isNaN(i)&&r&&(i=ee(i,r)),i}Dr(i,a,o,s),Ir(i,a,o,s,c,u);var p,v;if(s.$$parserName=e,s.$parsers.push(function(e){return s.$isEmpty(e)?null:t.test(e)?h(e,p):void 0}),s.$formatters.push(function(e){if(e&&!C(e))throw ns("datefmt","Expected `{0}` to be a date",e);if(d(e)){p=e;var t=s.$options.getOption("timezone");return t&&(v=t,p=ee(p,t,!0)),l("date")(e,r,t)}return p=null,v=null,""}),_(o.min)||o.ngMin){var g;s.$validators.min=function(e){return!d(e)||b(g)||n(e)>=g},o.$observe("min",function(e){g=f(e),s.$validate()})}if(_(o.max)||o.ngMax){var m;s.$validators.max=function(e){return!d(e)||b(m)||n(e)<=m},o.$observe("max",function(e){m=f(e),s.$validate()})}}}function Dr(e,t,n,r){var i=t[0];(r.$$hasNativeValidators=w(i.validity))&&r.$parsers.push(function(e){var n=t.prop(ri)||{};return n.badInput||n.typeMismatch?void 0:e})}function Nr(e){e.$$parserName="number",e.$parsers.push(function(t){return e.$isEmpty(t)?null:_o.test(t)?parseFloat(t):void 0}),e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!T(t))throw ns("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t})}function Ur(e){return _(e)&&!T(e)&&(e=parseFloat(e)),wi(e)?void 0:e}function Mr(e){return(0|e)===e}function Fr(e){var t=e.toString(),n=t.indexOf(".");if(-1===n){if(-1<e&&e<1){var r=/e-(\d+)$/.exec(t);if(r)return Number(r[1])}return 0}return t.length-n-1}function Br(e,t,n){var r=Number(e),i=!Mr(r),a=!Mr(t),o=!Mr(n);if(i||a||o){var s=i?Fr(r):0,c=a?Fr(t):0,u=o?Fr(n):0,l=Math.max(s,c,u),d=Math.pow(10,l);r*=d,t*=d,n*=d,i&&(r=Math.round(r)),a&&(t=Math.round(t)),o&&(n=Math.round(n))}return(r-t)%n==0}function qr(e,t,n,r,i,a){Dr(e,t,n,r),Nr(r),Ir(e,t,n,r,i,a);var o,s;if((_(n.min)||n.ngMin)&&(r.$validators.min=function(e){return r.$isEmpty(e)||b(o)||e>=o},n.$observe("min",function(e){o=Ur(e),r.$validate()})),(_(n.max)||n.ngMax)&&(r.$validators.max=function(e){return r.$isEmpty(e)||b(s)||e<=s},n.$observe("max",function(e){s=Ur(e),r.$validate()})),_(n.step)||n.ngStep){var c;r.$validators.step=function(e,t){return r.$isEmpty(t)||b(c)||Br(t,o||0,c)},n.$observe("step",function(e){c=Ur(e),r.$validate()})}}function Hr(e,t,n,r,i,a){function o(e,r){t.attr(e,n[e]),n.$observe(e,r)}function s(e){if(d=Ur(e),!wi(r.$modelValue))if(l){var n=t.val();d>n&&(n=d,t.val(n)),r.$setViewValue(n)}else r.$validate()}function c(e){if(f=Ur(e),!wi(r.$modelValue))if(l){var n=t.val();f<n&&(t.val(f),n=f<d?d:f),r.$setViewValue(n)}else r.$validate()}function u(e){h=Ur(e),wi(r.$modelValue)||(l&&r.$viewValue!==t.val()?r.$setViewValue(t.val()):r.$validate())}Dr(e,t,n,r),Nr(r),Ir(e,t,n,r,i,a);var l=r.$$hasNativeValidators&&"range"===t[0].type,d=l?0:void 0,f=l?100:void 0,h=l?1:void 0,p=t[0].validity,v=_(n.min),g=_(n.max),m=_(n.step),y=r.$render;r.$render=l&&_(p.rangeUnderflow)&&_(p.rangeOverflow)?function(){y(),r.$setViewValue(t.val())}:y,v&&(r.$validators.min=l?function(){return!0}:function(e,t){return r.$isEmpty(t)||b(d)||t>=d},o("min",s)),g&&(r.$validators.max=l?function(){return!0}:function(e,t){return r.$isEmpty(t)||b(f)||t<=f},o("max",c)),m&&(r.$validators.step=l?function(){return!p.stepMismatch}:function(e,t){return r.$isEmpty(t)||b(h)||Br(t,d||0,h)},o("step",u))}function Vr(e,t,n,r,i,a){Ir(e,t,n,r,i,a),Ar(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||yo.test(n)}}function zr(e,t,n,r,i,a){Ir(e,t,n,r,i,a),Ar(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||bo.test(n)}}function Wr(e,t,n,r){var i=!n.ngTrim||"false"!==Ti(n.ngTrim);b(n.name)&&t.attr("name",c());var a=function(e){var a;t[0].checked&&(a=n.value,i&&(a=Ti(a)),r.$setViewValue(a,e&&e.type))};t.on("click",a),r.$render=function(){var e=n.value;i&&(e=Ti(e)),t[0].checked=e===r.$viewValue},n.$observe("value",r.$render)}function Gr(e,t,n,r,i){var a;if(_(r)){if(a=e(r),!a.constant)throw ns("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return a(t)}return i}function Yr(e,t,n,r,i,a,o,s){var c=Gr(s,e,"ngTrueValue",n.ngTrueValue,!0),u=Gr(s,e,"ngFalseValue",n.ngFalseValue,!1),l=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",l),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return!1===e},r.$formatters.push(function(e){return z(e,c)}),r.$parsers.push(function(e){return e?c:u})}function Qr(e,t){function n(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],a=0;a<t.length;a++)if(i===t[a])continue e;n.push(i)}return n}function r(e){return e&&e.split(" ")}function i(e){var t=e;return Si(e)?t=e.map(i).join(" "):w(e)&&(t=Object.keys(e).filter(function(t){return e[t]}).join(" ")),t}function o(e){var t=e;if(Si(e))t=e.map(o);else if(w(e)){var n=!1;t=Object.keys(e).filter(function(t){var r=e[t];return!n&&b(r)&&(n=!0),r}),n&&t.push(void 0)}return t}e="ngClass"+e;var s;return["$parse",function(c){return{restrict:"AC",link:function(u,l,d){function f(e){e=v(r(e),1),d.$addClass(e)}function h(e){e=v(r(e),-1),d.$removeClass(e)}function p(e,t){var i=r(e),a=r(t),o=n(i,a),s=n(a,i),c=v(o,-1),u=v(s,1);d.$addClass(u),d.$removeClass(c)}function v(e,t){var n=[];return a(e,function(e){(t>0||C[e])&&(C[e]=(C[e]||0)+t,C[e]===+(t>0)&&n.push(e))}),n.join(" ")}function g(e){e===t?f(b):h(b),x=e}function m(e){var t=i(e);t!==b&&y(t)}function y(e){x===t&&p(b,e),b=e}var b,_=d[e].trim(),w=":"===_.charAt(0)&&":"===_.charAt(1),S=w?o:i,k=c(_,S),T=w?m:y,C=l.data("$classCounts"),x=!0;C||(C=_e(),l.data("$classCounts",C)),"ngClass"!==e&&(s||(s=c("$index",function(e){return 1&e})),u.$watch(s,g)),u.$watch(k,T,w)}}}]}function Xr(e,t,n,r,i,a,o,s,c){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(e),this.$$parentForm=lo,this.$options=rs,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:e}),this.$$attr=n,this.$$element=r,this.$$animate=a,this.$$timeout=o,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=t,Er(this),Jr(this)}function Jr(e){e.$$scope.$watch(function(t){var n=e.$$ngModelGet(t);return n===e.$modelValue||e.$modelValue!==e.$modelValue&&n!==n||e.$$setModelValue(n),n})}function Kr(e){this.$$options=e}function Zr(e,t){a(t,function(t,n){_(e[n])||(e[n]=t)})}function ei(e,t){e.prop("selected",t),e.attr("selected",t)}var ti={objectMaxDepth:5},ni=/^\/(.+)\/([a-z]*)$/,ri="validity",ii=Object.prototype.hasOwnProperty,ai=function(e){return k(e)?e.toLowerCase():e},oi=function(e){return k(e)?e.toUpperCase():e},si=function(e){return k(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},ci=function(e){return k(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(ai=si,oi=ci);var ui,li,di,fi,hi=[].slice,pi=[].splice,vi=[].push,gi=Object.prototype.toString,mi=Object.getPrototypeOf,yi=r("ng"),bi=e.angular||(e.angular={}),_i=0;ui=e.document.documentMode;var wi=Number.isNaN||function(e){return e!==e};v.$inject=[],g.$inject=[];var Si=Array.isArray,ki=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,Ti=function(e){return k(e)?e.trim():e},Ci=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},xi=function(){function t(){try{return new Function(""),!1}catch(e){return!0}}if(!_(xi.rules)){var n=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");xi.rules={noUnsafeEval:!r||-1!==r.indexOf("no-unsafe-eval"),noInlineStyle:!r||-1!==r.indexOf("no-inline-style")}}else xi.rules={noUnsafeEval:t(),noInlineStyle:!1}}return xi.rules},Ei=function(){if(_(Ei.name_))return Ei.name_;var t,n,r,i,a=$i.length;for(n=0;n<a;++n)if(r=$i[n],t=e.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=t.getAttribute(r+"jq");break}return Ei.name_=i},Pi=/:/g,$i=["ng-","data-ng-","ng:","x-ng-"],Ai=ce(e.document),Oi=/[A-Z]/g,Ii=!1,Ri=1,Li=2,ji=3,Di=8,Ni=9,Ui=11,Mi={full:"1.6.10",major:1,minor:6,dot:10,codeName:"crystalline-persuasion"};Ne.expando="ng339";var Fi=Ne.cache={},Bi=1;Ne._data=function(e){return this.cache[e[this.expando]]||{}};var qi=/-([a-z])/g,Hi=/^-ms-/,Vi={mouseleave:"mouseout",mouseenter:"mouseover"},zi=r("jqLite"),Wi=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Gi=/<|&#?\w+;/,Yi=/<([\w:-]+)/,Qi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Xi={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xi.optgroup=Xi.option,Xi.tbody=Xi.tfoot=Xi.colgroup=Xi.caption=Xi.thead,Xi.th=Xi.td;var Ji=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},Ki=Ne.prototype={ready:Ze,toString:function(){var e=[];return a(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return li(e>=0?this[e]:this[this.length+e])},length:0,push:vi,sort:[].sort,splice:[].splice},Zi={};a("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Zi[ai(e)]=e});var ea={};a("input,select,option,textarea,button,form,details".split(","),function(e){ea[e]=!0});var ta={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};a({data:He,removeData:Be,hasData:Re,cleanData:function(e){for(var t=0,n=e.length;t<n;t++)Be(e[t])}},function(e,t){Ne[t]=e}),a({data:He,inheritedData:Qe,scope:function(e){return li.data(e,"$scope")||Qe(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return li.data(e,"$isolateScope")||li.data(e,"$isolateScopeNoTemplate")},controller:Ye,injector:function(e){return Qe(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Ve,css:function(e,t,n){if(t=Pe(t),!_(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var r,i=e.nodeType;if(i!==ji&&i!==Li&&i!==Di&&e.getAttribute){var a=ai(t),o=Zi[a];if(!_(n))return r=e.getAttribute(t),o&&null!==r&&(r=a),null===r?void 0:r;null===n||!1===n&&o?e.removeAttribute(t):e.setAttribute(t,o?a:n)}},prop:function(e,t,n){if(!_(n))return e[t];e[t]=n},text:function(){function e(e,t){if(b(t)){var n=e.nodeType;return n===Ri||n===ji?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(b(t)){if(e.multiple&&"select"===F(e)){var n=[];return a(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n}return e.value}e.value=t},html:function(e,t){if(b(t))return e.innerHTML;Me(e,!0),e.innerHTML=t},empty:Xe},function(e,t){Ne.prototype[t]=function(t,n){var r,i,a=this.length;if(e!==Xe&&b(2===e.length&&e!==Ve&&e!==Ye?t:n)){if(w(t)){for(r=0;r<a;r++)if(e===He)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var o=e.$dv,s=b(o)?Math.min(a,1):a,c=0;c<s;c++){var u=e(this[c],t,n);o=o?o+u:u}return o}for(r=0;r<a;r++)e(this[r],t,n);return this}}),a({removeData:Be,on:function(e,t,n,r){if(_(r))throw zi("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Ie(e)){var i=qe(e,!0),a=i.events,o=i.handle;o||(o=i.handle=nt(e,a));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],c=s.length,u=function(t,r,i){var s=a[t];s||(s=a[t]=[],s.specialHandlerWrapper=r,"$destroy"===t||i||e.addEventListener(t,o)),s.push(n)};c--;)t=s[c],Vi[t]?(u(Vi[t],it),u(t,void 0,!0)):u(t)}},off:Fe,one:function(e,t,n){e=li(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;Me(e),a(new Ne(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return a(e.childNodes,function(e){e.nodeType===Ri&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===Ri||n===Ui){t=new Ne(t);for(var r=0,i=t.length;r<i;r++){var a=t[r];e.appendChild(a)}}},prepend:function(e,t){if(e.nodeType===Ri){var n=e.firstChild;a(new Ne(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){De(e,li(t).eq(0).clone()[0])},remove:Je,detach:function(e){Je(e,!0)},after:function(e,t){var n=e,r=e.parentNode;if(r){t=new Ne(t);for(var i=0,a=t.length;i<a;i++){var o=t[i];r.insertBefore(o,n.nextSibling),n=o}}},addClass:We,removeClass:ze,toggleClass:function(e,t,n){t&&a(t.split(" "),function(t){var r=n;b(r)&&(r=!Ve(e,t)),(r?We:ze)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Ui?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Ue,triggerHandler:function(e,t,n){var r,i,o,s=t.type||t,c=qe(e),u=c&&c.events,l=u&&u[s];l&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:v,type:s,target:e},t.type&&(r=d(r,t)),i=ke(l),o=n?[r].concat(n):[r],a(i,function(t){r.isImmediatePropagationStopped()||t.apply(e,o)}))}},function(e,t){Ne.prototype[t]=function(t,n,r){for(var i,a=0,o=this.length;a<o;a++)b(i)?(i=e(this[a],t,n,r),_(i)&&(i=li(i))):Ge(i,e(this[a],t,n,r));return _(i)?i:this}}),Ne.prototype.bind=Ne.prototype.on,Ne.prototype.unbind=Ne.prototype.off;var na=Object.create(null);st.prototype={_idx:function(e){return e===this._lastKey?this._lastIndex:(this._lastKey=e,this._lastIndex=this._keys.indexOf(e),this._lastIndex)},_transformKey:function(e){return wi(e)?na:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(-1!==t)return this._values[t]},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);return-1!==t&&(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var ra=st,ia=[function(){this.$get=[function(){return ra}]}],aa=/^([^(]+?)=>/,oa=/^[^(]*\(\s*([^)]*)\)/m,sa=/,/,ca=/^\s*(_?)(\S+?)\1\s*$/,ua=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,la=r("$injector");ft.$$annotate=dt;var da=r("$animate"),fa=1,ha="ng-animate",pa=function(){this.$get=v},va=function(){var e=new ra,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function i(e,t,n){var r=!1;return t&&(t=k(t)?t.split(" "):Si(t)?t:[],a(t,function(t){t&&(r=!0,e[t]=n)})),r}function o(){a(t,function(t){var n=e.get(t);if(n){var r=gt(t.attr("class")),i="",o="";a(n,function(e,t){e!==!!r[t]&&(e?i+=(i.length?" ":"")+t:o+=(o.length?" ":"")+t)}),a(t,function(e){i&&We(e,i),o&&ze(e,o)}),e.delete(t)}}),t.length=0}function s(n,a,s){var c=e.get(n)||{},u=i(c,a,!0),l=i(c,s,!1);(u||l)&&(e.set(n,c),t.push(n),1===t.length&&r.$$postDigest(o))}return{enabled:v,on:v,off:v,pin:v,push:function(e,t,r,i){i&&i(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&s(e,r.addClass,r.removeClass);var a=new n;return a.complete(),a}}}]},ga=["$provide",function(e){var t=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw da("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.customFilter=function(e){return 1===arguments.length&&(r=E(e)?e:null),r},this.classNameFilter=function(e){if(1===arguments.length&&(n=e instanceof RegExp?e:null)){if(new RegExp("[(\\s|\\/)]"+ha+"[(\\s|\\/)]").test(n.toString()))throw n=null,da("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',ha)}return n},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=vt(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,a){return r=r&&li(r),i=i&&li(i),r=r||i.parent(),t(n,r,i),e.push(n,"enter",mt(a))},move:function(n,r,i,a){return r=r&&li(r),i=i&&li(i),r=r||i.parent(),t(n,r,i),e.push(n,"move",mt(a))},leave:function(t,n){return e.push(t,"leave",mt(n),function(){t.remove()})},addClass:function(t,n,r){return r=mt(r),r.addClass=pt(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=mt(r),r.removeClass=pt(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return i=mt(i),i.addClass=pt(i.addClass,n),i.removeClass=pt(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,a){return a=mt(a),a.from=a.from?d(a.from,n):n,a.to=a.to?d(a.to,r):r,i=i||"ng-inline-animate",a.tempClasses=pt(a.tempClasses,i),e.push(t,"animate",a)}}}]}],ma=function(){this.$get=["$$rAF",function(e){function t(t){n.push(t),n.length>1||e(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}var n=[];return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}]},ya=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,n,r,i){function o(e){this.setHost(e);var t=n(),a=function(e){i(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){r()?a(e):t(e)},this._state=0}var s=2;return o.chain=function(e,t){function n(){if(r===e.length)return void t(!0);e[r](function(e){if(!1===e)return void t(!1);r++,n()})}var r=0;n()},o.all=function(e,t){function n(n){i=i&&n,++r===e.length&&t(i)}var r=0,i=!0;a(e,function(e){e.done(n)})},o.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===s?e():this._doneCallbacks.push(e)},progress:v,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){!1===t?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick(function(){t._resolve(e)}))},_resolve:function(e){this._state!==s&&(a(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=s)}},o}]},ba=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){function i(){return e(function(){a(),s||c.complete(),s=!0}),c}function a(){o.addClass&&(t.addClass(o.addClass),o.addClass=null),o.removeClass&&(t.removeClass(o.removeClass),o.removeClass=null),o.to&&(t.css(o.to),o.to=null)}var o=r||{};o.$$prepared||(o=H(o)),o.cleanupStyles&&(o.from=o.to=null),o.from&&(t.css(o.from),o.from=null);var s,c=new n;return{start:i,end:i}}}]},_a=r("$compile"),wa=new St;kt.$inject=["$provide","$$sanitizeUriProvider"],Tt.prototype.isFirstChange=function(){return this.previousValue===wa};var Sa=/^((?:x|data)[:\-_])/i,ka=/[:\-_]+(.)/g,Ta=r("$controller"),Ca=/^(\S+)(\s+as\s+([\w$]+))?$/,xa=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof li&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},Ea="application/json",Pa={"Content-Type":Ea+";charset=utf-8"},$a=/^\[|^\{(?!\{)/,Aa={"[":/]$/,"{":/}$/},Oa=/^\)]\}',?\n/,Ia=r("$http"),Ra=bi.$interpolateMinErr=r("$interpolate");Ra.throwNoconcat=function(e){throw Ra("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},Ra.interr=function(e,t){return Ra("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var La=function(){this.$get=function(){function e(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}var t=bi.callbacks,n={};return{createCallback:function(r){var i="_"+(t.$$counter++).toString(36),a="angular.callbacks."+i,o=e(i);return n[a]=t[i]=o,a},wasCalled:function(e){return n[e].called},getResponse:function(e){return n[e].data},removeCallback:function(e){var r=n[e];delete t[r.id],delete n[e]}}}},ja=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Da={http:80,https:443,ftp:21},Na=r("$location"),Ua=/^\s*[\\\/]{2,}/,Ma={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:cn("$$absUrl"),url:function(e){if(b(e))return this.$$url;var t=ja.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:cn("$$protocol"),host:cn("$$host"),port:cn("$$port"),path:un("$$path",function(e){return e=null!==e?e.toString():"","/"===e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(k(e)||T(e))e=e.toString(),this.$$search=re(e);else{if(!w(e))throw Na("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=H(e,{}),a(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:b(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:un("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};a([sn,on,an],function(e){e.prototype=Object.create(Ma),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==an||!this.$$html5)throw Na("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=b(t)?null:t,this.$$urlUpdatedByLocation=!0,this}});var Fa=r("$parse"),Ba={}.constructor.prototype.valueOf,qa=_e();a("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){qa[e]=!0});var Ha={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Va=function(e){this.options=e};Va.prototype={constructor:Va,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=qa[t],a=qa[n],o=qa[r];if(i||a||o){var s=o?r:a?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=_(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Fa("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=ai(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(r+=a,i){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{n+=Ha[a]||a}i=!1}else if("\\"===a)i=!0;else{if(a===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",t)}};var za=function(e,t){this.lexer=e,this.options=t};za.Program="Program",za.ExpressionStatement="ExpressionStatement",za.AssignmentExpression="AssignmentExpression",za.ConditionalExpression="ConditionalExpression",za.LogicalExpression="LogicalExpression",za.BinaryExpression="BinaryExpression",za.UnaryExpression="UnaryExpression",za.CallExpression="CallExpression",za.MemberExpression="MemberExpression",za.Identifier="Identifier",za.Literal="Literal",za.ArrayExpression="ArrayExpression",za.Property="Property",za.ObjectExpression="ObjectExpression",za.ThisExpression="ThisExpression",za.LocalsExpression="LocalsExpression",za.NGValueParameter="NGValueParameter",za.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:za.Program,body:e}},expressionStatement:function(){return{type:za.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!bn(e))throw Fa("lval","Trying to assign a value to a non l-value");e={type:za.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:za.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:za.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:za.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:za.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:za.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:za.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:za.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:za.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=H(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:za.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:za.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:za.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:za.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:za.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do{e.push(this.filterChain())}while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:za.Identifier,name:e.text}},constant:function(){return{type:za.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:za.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:za.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:za.ObjectExpression,properties:t}},throwError:function(e,t){throw Fa("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Fa("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Fa("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var a=this.tokens[e],o=a.text;if(o===t||o===n||o===r||o===i||!t&&!n&&!r&&!i)return a}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:za.ThisExpression},$locals:{type:za.LocalsExpression}}};var Wa=1,Ga=2;kn.prototype={compile:function(e){var t=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},mn(e,t.$filter);var n,r="";if(this.stage="assign",n=_n(e)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var o=yn(e.body);t.stage="inputs",a(o,function(e,n){var r="fn"+n;t.state[r]={vars:[],body:[],own:{}},t.state.computing=r;var i=t.nextId();t.recurse(e,i),t.return_(i),t.state.inputs.push({name:r,isPure:e.isPure}),e.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(e);var s='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",c=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,fn,hn,pn);return this.state=this.stage=void 0,c},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return a(t,function(t){e.push("var "+t.name+"="+n.generateFunction(t.name,"s")),t.isPure&&e.push(t.name,".isPure="+JSON.stringify(t.isPure)+";")}),t.length&&e.push("fn.inputs=["+t.map(function(e){return e.name}).join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return a(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,r,i,o){var s,c,u,l,d,f=this;if(r=r||v,!o&&_(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,r,i,!0));switch(e.type){case za.Program:a(e.body,function(t,n){f.recurse(t.expression,void 0,void 0,function(e){c=e}),n!==e.body.length-1?f.current().body.push(c,";"):f.return_(c)});break;case za.Literal:l=this.escape(e.value),this.assign(t,l),r(t||l);break;case za.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){c=e}),l=e.operator+"("+this.ifDefined(c,0)+")",this.assign(t,l),r(l);break;case za.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){s=e}),this.recurse(e.right,void 0,void 0,function(e){c=e}),l="+"===e.operator?this.plus(s,c):"-"===e.operator?this.ifDefined(s,0)+e.operator+this.ifDefined(c,0):"("+s+")"+e.operator+"("+c+")",this.assign(t,l),r(l);break;case za.LogicalExpression:t=t||this.nextId(),f.recurse(e.left,t),f.if_("&&"===e.operator?t:f.not(t),f.lazyRecurse(e.right,t)),r(t);break;case za.ConditionalExpression:t=t||this.nextId(),f.recurse(e.test,t),f.if_(t,f.lazyRecurse(e.alternate,t),f.lazyRecurse(e.consequent,t)),r(t);break;case za.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===f.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),f.if_("inputs"===f.stage||f.not(f.getHasOwnProperty("l",e.name)),function(){f.if_("inputs"===f.stage||"s",function(){i&&1!==i&&f.if_(f.isNull(f.nonComputedMember("s",e.name)),f.lazyAssign(f.nonComputedMember("s",e.name),"{}")),f.assign(t,f.nonComputedMember("s",e.name))})},t&&f.lazyAssign(t,f.nonComputedMember("l",e.name))),r(t);break;case za.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),f.recurse(e.object,s,void 0,function(){f.if_(f.notNull(s),function(){e.computed?(c=f.nextId(),f.recurse(e.property,c),f.getStringValue(c),i&&1!==i&&f.if_(f.not(f.computedMember(s,c)),f.lazyAssign(f.computedMember(s,c),"{}")),l=f.computedMember(s,c),f.assign(t,l),n&&(n.computed=!0,n.name=c)):(i&&1!==i&&f.if_(f.isNull(f.nonComputedMember(s,e.property.name)),f.lazyAssign(f.nonComputedMember(s,e.property.name),"{}")),l=f.nonComputedMember(s,e.property.name),f.assign(t,l),n&&(n.computed=!1,n.name=e.property.name))},function(){f.assign(t,"undefined")}),r(t)},!!i);break;case za.CallExpression:t=t||this.nextId(),e.filter?(c=f.filter(e.callee.name),u=[],a(e.arguments,function(e){var t=f.nextId();f.recurse(e,t),u.push(t)}),l=c+"("+u.join(",")+")",f.assign(t,l),r(t)):(c=f.nextId(),s={},u=[],f.recurse(e.callee,c,s,function(){f.if_(f.notNull(c),function(){a(e.arguments,function(t){f.recurse(t,e.constant?void 0:f.nextId(),void 0,function(e){u.push(e)})}),l=s.name?f.member(s.context,s.name,s.computed)+"("+u.join(",")+")":c+"("+u.join(",")+")",f.assign(t,l)},function(){f.assign(t,"undefined")}),r(t)}));break;case za.AssignmentExpression:c=this.nextId(),s={},this.recurse(e.left,void 0,s,function(){f.if_(f.notNull(s.context),function(){f.recurse(e.right,c),l=f.member(s.context,s.name,s.computed)+e.operator+c,f.assign(t,l),r(t||l)})},1);break;case za.ArrayExpression:u=[],a(e.elements,function(t){f.recurse(t,e.constant?void 0:f.nextId(),void 0,function(e){u.push(e)})}),l="["+u.join(",")+"]",this.assign(t,l),r(t||l);break;case za.ObjectExpression:u=[],d=!1,a(e.properties,function(e){e.computed&&(d=!0)}),d?(t=t||this.nextId(),this.assign(t,"{}"),a(e.properties,function(e){e.computed?(s=f.nextId(),f.recurse(e.key,s)):s=e.key.type===za.Identifier?e.key.name:""+e.key.value,c=f.nextId(),f.recurse(e.value,c),f.assign(f.member(t,s,e.computed),c)})):(a(e.properties,function(t){f.recurse(t.value,e.constant?void 0:f.nextId(),void 0,function(e){u.push(f.escape(t.key.type===za.Identifier?t.key.name:""+t.key.value)+":"+e)})}),l="{"+u.join(",")+"}",this.assign(t,l)),r(t||l);break;case za.ThisExpression:this.assign(t,"s"),r(t||"s");break;case za.LocalsExpression:this.assign(t,"l"),r(t||"l");break;case za.NGValueParameter:this.assign(t,"v"),r(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var n=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,r=/[^$_a-zA-Z0-9]/g;return n.test(t)?e+"."+t:e+'["'+t.replace(r,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,r,i,a){var o=this;return function(){o.recurse(e,t,n,r,i,a)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(k(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(T(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw Fa("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},Tn.prototype={compile:function(e){var t=this;mn(e,t.$filter);var n,r;(n=_n(e))&&(r=this.recurse(n));var i,o=yn(e.body);o&&(i=[],a(o,function(e,n){var r=t.recurse(e);r.isPure=e.isPure,e.input=r,i.push(r),e.watchId=n}));var s=[];a(e.body,function(e){s.push(t.recurse(e.expression))});var c=0===e.body.length?v:1===e.body.length?s[0]:function(e,t){var n;return a(s,function(r){n=r(e,t)}),n};return r&&(c.assign=function(e,t,n){return r(e,n,t)}),i&&(c.inputs=i),c},recurse:function(e,t,n){var r,i,o,s=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case za.Literal:return this.value(e.value,t);case za.UnaryExpression:return i=this.recurse(e.argument),this["unary"+e.operator](i,t);case za.BinaryExpression:case za.LogicalExpression:return r=this.recurse(e.left),i=this.recurse(e.right),this["binary"+e.operator](r,i,t);case za.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case za.Identifier:return s.identifier(e.name,t,n);case za.MemberExpression:return r=this.recurse(e.object,!1,!!n),e.computed||(i=e.property.name),e.computed&&(i=this.recurse(e.property)),e.computed?this.computedMember(r,i,t,n):this.nonComputedMember(r,i,t,n);case za.CallExpression:return o=[],a(e.arguments,function(e){o.push(s.recurse(e))}),e.filter&&(i=this.$filter(e.callee.name)),e.filter||(i=this.recurse(e.callee,!0)),e.filter?function(e,n,r,a){for(var s=[],c=0;c<o.length;++c)s.push(o[c](e,n,r,a));var u=i.apply(void 0,s,a);return t?{context:void 0,name:void 0,value:u}:u}:function(e,n,r,a){var s,c=i(e,n,r,a);if(null!=c.value){for(var u=[],l=0;l<o.length;++l)u.push(o[l](e,n,r,a));s=c.value.apply(c.context,u)}return t?{value:s}:s};case za.AssignmentExpression:return r=this.recurse(e.left,!0,1),i=this.recurse(e.right),function(e,n,a,o){var s=r(e,n,a,o),c=i(e,n,a,o);return s.context[s.name]=c,t?{value:c}:c};case za.ArrayExpression:return o=[],a(e.elements,function(e){o.push(s.recurse(e))}),function(e,n,r,i){for(var a=[],s=0;s<o.length;++s)a.push(o[s](e,n,r,i));return t?{value:a}:a};case za.ObjectExpression:return o=[],a(e.properties,function(e){e.computed?o.push({key:s.recurse(e.key),computed:!0,value:s.recurse(e.value)}):o.push({key:e.key.type===za.Identifier?e.key.name:""+e.key.value,computed:!1,value:s.recurse(e.value)})}),function(e,n,r,i){for(var a={},s=0;s<o.length;++s)o[s].computed?a[o[s].key(e,n,r,i)]=o[s].value(e,n,r,i):a[o[s].key]=o[s].value(e,n,r,i);return t?{value:a}:a};case za.ThisExpression:return function(e){return t?{value:e}:e};case za.LocalsExpression:return function(e,n){return t?{value:n}:n};case za.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,a){var o=e(n,r,i,a);return o=_(o)?+o:0,t?{value:o}:o}},"unary-":function(e,t){return function(n,r,i,a){var o=e(n,r,i,a);return o=_(o)?-o:-0,t?{value:o}:o}},"unary!":function(e,t){return function(n,r,i,a){var o=!e(n,r,i,a);return t?{value:o}:o}},"binary+":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o),c=t(r,i,a,o),u=pn(s,c);return n?{value:u}:u}},"binary-":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o),c=t(r,i,a,o),u=(_(s)?s:0)-(_(c)?c:0);return n?{value:u}:u}},"binary*":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)*t(r,i,a,o);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)/t(r,i,a,o);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)%t(r,i,a,o);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)===t(r,i,a,o);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)!==t(r,i,a,o);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)==t(r,i,a,o);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)!=t(r,i,a,o);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)<t(r,i,a,o);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)>t(r,i,a,o);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)<=t(r,i,a,o);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)>=t(r,i,a,o);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)&&t(r,i,a,o);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)||t(r,i,a,o);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,a,o,s){var c=e(i,a,o,s)?t(i,a,o,s):n(i,a,o,s);return r?{value:c}:c}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n){return function(r,i,a,o){var s=i&&e in i?i:r;n&&1!==n&&s&&null==s[e]&&(s[e]={});var c=s?s[e]:void 0;return t?{context:s,name:e,value:c}:c}},computedMember:function(e,t,n,r){return function(i,a,o,s){var c,u,l=e(i,a,o,s);return null!=l&&(c=t(i,a,o,s),c=fn(c),r&&1!==r&&l&&!l[c]&&(l[c]={}),u=l[c]),n?{context:l,name:c,value:u}:u}},nonComputedMember:function(e,t,n,r){return function(i,a,o,s){var c=e(i,a,o,s);r&&1!==r&&c&&null==c[t]&&(c[t]={});var u=null!=c?c[t]:void 0;return n?{context:c,name:t,value:u}:u}},inputs:function(e,t){return function(n,r,i,a){return a?a[t]:e(n,r,i)}}},Cn.prototype={constructor:Cn,parse:function(e){var t=this.getAst(e),n=this.astCompiler.compile(t.ast);return n.literal=wn(t.ast),n.constant=Sn(t.ast),n.oneTime=t.oneTime,n},getAst:function(e){var t=!1;return e=e.trim(),":"===e.charAt(0)&&":"===e.charAt(1)&&(t=!0,e=e.substring(2)),{ast:this.ast.ast(e),oneTime:t}}};var Ya=r("$sce"),Qa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Xa=/_([a-z])/g,Ja=r("$compile"),Ka=e.document.createElement("a"),Za=Wn(e.location.href);Jn.$inject=["$document"],Zn.$inject=["$provide"];var eo=22,to=".",no="0";ir.$inject=["$locale"],ar.$inject=["$locale"];var ro={yyyy:lr("FullYear",4,0,!1,!0),yy:lr("FullYear",2,0,!0,!0),y:lr("FullYear",1,0,!1,!0),MMMM:dr("Month"),MMM:dr("Month",!0),MM:lr("Month",2,1),M:lr("Month",1,1),LLLL:dr("Month",!1,!0),dd:lr("Date",2),d:lr("Date",1),HH:lr("Hours",2),H:lr("Hours",1),hh:lr("Hours",2,-12),h:lr("Hours",1,-12),mm:lr("Minutes",2),m:lr("Minutes",1),ss:lr("Seconds",2),s:lr("Seconds",1),sss:lr("Milliseconds",3),EEEE:dr("Day"),EEE:dr("Day",!0),a:gr,Z:fr,ww:vr(2),w:vr(1),G:mr,GG:mr,GGG:mr,GGGG:yr},io=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,ao=/^-?\d+$/;br.$inject=["$locale"];var oo=m(ai),so=m(oi);kr.$inject=["$parse"];var co=m({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===gi.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),uo={};a(Zi,function(e,t){function n(e,n,i){e.$watch(i[r],function(e){i.$set(t,!!e)})}if("multiple"!==e){var r=Ct("ng-"+t),i=n;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[r]&&n(e,t,i)}),uo[r]=function(){return{restrict:"A",priority:100,link:i}}}}),a(ta,function(e,t){uo[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(ni);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),a(["src","srcset","href"],function(e){var t=Ct("ng-"+e);uo[t]=function(){return{priority:99,link:function(n,r,i){var a=e,o=e;"href"===e&&"[object SVGAnimatedString]"===gi.call(r.prop("href"))&&(o="xlinkHref",i.$attr[o]="xlink:href",a=null),i.$observe(t,function(t){if(!t)return void("href"===e&&i.$set(o,null));i.$set(o,t),ui&&a&&r.prop(a,i[o])})}}}});var lo={$addControl:v,$$renameControl:Cr,$removeControl:v,$setValidity:v,$setDirty:v,$setPristine:v,$setSubmitted:v},fo="ng-pending",ho="ng-submitted";xr.$inject=["$element","$attrs","$scope","$animate","$interpolate"],xr.prototype={$rollbackViewValue:function(){a(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){a(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){me(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],this[t]=e,e.$name=t},$removeControl:function(e){e.$name&&this[e.$name]===e&&delete this[e.$name],a(this.$pending,function(t,n){this.$setValidity(n,null,e)},this),a(this.$error,function(t,n){this.$setValidity(n,null,e)},this),a(this.$$success,function(t,n){this.$setValidity(n,null,e)},this),q(this.$$controls,e),e.$$parentForm=lo},$setDirty:function(){this.$$animate.removeClass(this.$$element,Xo),this.$$animate.addClass(this.$$element,Jo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Xo,Jo+" "+ho),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,a(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){a(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,ho),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},Pr({clazz:xr,set:function(e,t,n){var r=e[t];if(r){-1===r.indexOf(n)&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(q(r,n),0===r.length&&delete e[t])}});var po=function(e){return["$timeout","$parse",function(t,n){function r(e){return""===e?n('this[""]').assign:n(e).assign||v}return{name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:xr,compile:function(n,i){n.addClass(Xo).addClass(Yo);var a=i.name?"name":!(!e||!i.ngForm)&&"ngForm";return{pre:function(e,n,i,o){var s=o[0];if(!("action"in i)){var c=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault()};n[0].addEventListener("submit",c),n.on("$destroy",function(){t(function(){n[0].removeEventListener("submit",c)},0,!1)})}(o[1]||s.$$parentForm).$addControl(s);var u=a?r(s.$name):v;a&&(u(e,s),i.$observe(a,function(t){s.$name!==t&&(u(e,void 0),s.$$parentForm.$$renameControl(s,t),(u=r(s.$name))(e,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),u(e,void 0),d(s,lo)})}}}}}]},vo=po(),go=po(!0),mo=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,yo=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,bo=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,_o=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,wo=/^(\d{4,})-(\d{2})-(\d{2})$/,So=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ko=/^(\d{4,})-W(\d\d)$/,To=/^(\d{4,})-(\d\d)$/,Co=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,xo="keydown wheel mousedown",Eo=_e();a("date,datetime-local,month,time,week".split(","),function(e){Eo[e]=!0});var Po={text:Or,date:jr("date",wo,Lr(wo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":jr("datetimelocal",So,Lr(So,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:jr("time",Co,Lr(Co,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:jr("week",ko,Rr,"yyyy-Www"),month:jr("month",To,Lr(To,["yyyy","MM"]),"yyyy-MM"),number:qr,url:Vr,email:zr,radio:Wr,range:Hr,checkbox:Yr,hidden:v,button:v,submit:v,reset:v,file:v},$o=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,a,o,s){s[0]&&(Po[ai(o.type)]||Po.text)(i,a,o,s[0],t,e,n,r)}}}}],Ao=/^(true|false|\d+)$/,Oo=function(){function e(e,t,n){var r=_(n)?n:9===ui?"":null;e.prop("value",r),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(t,n){return Ao.test(n.ngValue)?function(t,n,r){e(n,r,t.$eval(r.ngValue))}:function(t,n,r){t.$watch(r.ngValue,function(t){e(n,r,t)})}}}},Io=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,function(e){n.textContent=we(e)})}}}}],Ro=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var a=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,a.expressions),r=r[0],i.$observe("ngBindTemplate",function(e){r.textContent=b(e)?"":e})}}}}],Lo=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var a=t(i.ngBindHtml),o=t(i.ngBindHtml,function(t){return e.valueOf(t)});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(o,function(){var n=a(t);r.html(e.getTrustedHtml(n)||"")})}}}}],jo=m({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Do=Qr("",!0),No=Qr("Odd",0),Uo=Qr("Even",1),Mo=Tr({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Fo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Bo={},qo={blur:!0,focus:!0};a("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Ct("ng-"+e);Bo[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,a){var o=n(a[t]);return function(t,n){n.on(e,function(n){var i=function(){o(t,{$event:n})};qo[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var Ho=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,a,o){var s,c,u;n.$watch(i.ngIf,function(n){n?c||o(function(n,a){c=a,n[n.length++]=t.$$createComment("end ngIf",i.ngIf),s={clone:n},e.enter(n,r.parent(),r)}):(u&&(u.remove(),u=null),c&&(c.$destroy(),c=null),s&&(u=be(s.clone),e.leave(u).done(function(e){!1!==e&&(u=null)}),s=null))})}}}],Vo=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:bi.noop,compile:function(r,i){var a=i.ngInclude||i.src,o=i.onload||"",s=i.autoscroll;return function(r,i,c,u,l){var d,f,h,p=0,v=function(){f&&(f.remove(),f=null),d&&(d.$destroy(),d=null),h&&(n.leave(h).done(function(e){!1!==e&&(f=null)}),f=h,h=null)};r.$watch(a,function(a){var c=function(e){!1===e||!_(s)||s&&!r.$eval(s)||t()},f=++p;a?(e(a,!0).then(function(e){if(!r.$$destroyed&&f===p){var t=r.$new();u.template=e;var s=l(t,function(e){v(),n.enter(e,null,i).done(c)});d=t,h=s,d.$emit("$includeContentLoaded",a),r.$eval(o)}},function(){r.$$destroyed||f===p&&(v(),r.$emit("$includeContentError",a))}),r.$emit("$includeContentRequested",a)):(v(),u.template=null)})}}}}],zo=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,a){if(gi.call(r[0]).match(/SVG/))return r.empty(),void t(Le(a.template,e.document).childNodes)(n,function(e){r.append(e)},{futureParentElement:r});r.html(a.template),t(r.contents())(n)}}}],Wo=Tr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Go=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,r){var i=n.ngList||", ",o="false"!==n.ngTrim,s=o?Ti(i):i,c=function(e){if(!b(e)){var t=[];return e&&a(e.split(s),function(e){e&&t.push(o?Ti(e):e)}),t}};r.$parsers.push(c),r.$formatters.push(function(e){if(Si(e))return e.join(i)}),r.$isEmpty=function(e){return!e||!e.length}}}},Yo="ng-valid",Qo="ng-invalid",Xo="ng-pristine",Jo="ng-dirty",Ko="ng-untouched",Zo="ng-touched",es="ng-empty",ts="ng-not-empty",ns=r("ngModel");Xr.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Xr.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var e=this.$$parse(this.$$attr.ngModel+"()"),t=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var n=this.$$parsedNgModel(t);return E(n)&&(n=e(t)),n},this.$$ngModelSet=function(e,n){E(this.$$parsedNgModel(e))?t(e,{$$$p:n}):this.$$parsedNgModelAssign(e,n)}}else if(!this.$$parsedNgModel.assign)throw ns("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,te(this.$$element))},$render:v,$isEmpty:function(e){return b(e)||""===e||null===e||e!==e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,ts),this.$$animate.addClass(this.$$element,es)):(this.$$animate.removeClass(this.$$element,es),this.$$animate.addClass(this.$$element,ts))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Jo),this.$$animate.addClass(this.$$element,Xo)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Xo),this.$$animate.addClass(this.$$element,Jo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Ko,Zo)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Zo,Ko)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!wi(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),a=this;this.$$runValidators(t,e,function(e){i||n===e||(a.$modelValue=e?t:void 0,a.$modelValue!==r&&a.$$writeModelToScope())})}},$$runValidators:function(e,t,n){function r(){var e=l.$$parserName||"parse";return b(l.$$parserValid)?(s(e,null),!0):(l.$$parserValid||(a(l.$validators,function(e,t){s(t,null)}),a(l.$asyncValidators,function(e,t){s(t,null)})),s(e,l.$$parserValid),l.$$parserValid)}function i(){var n=!0;return a(l.$validators,function(r,i){var a=Boolean(r(e,t));n=n&&a,s(i,a)}),!!n||(a(l.$asyncValidators,function(e,t){s(t,null)}),!1)}function o(){var n=[],r=!0;a(l.$asyncValidators,function(i,a){var o=i(e,t);if(!j(o))throw ns("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",o);s(a,void 0),n.push(o.then(function(){s(a,!0)},function(){r=!1,s(a,!1)}))}),n.length?l.$$q.all(n).then(function(){c(r)},v):c(!0)}function s(e,t){u===l.$$currentValidationRunId&&l.$setValidity(e,t)}function c(e){u===l.$$currentValidationRunId&&n(e)}this.$$currentValidationRunId++;var u=this.$$currentValidationRunId,l=this;return r()&&i()?void o():void c(!1)},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){function e(){r.$modelValue!==a&&r.$$writeModelToScope()}var t=this.$$lastCommittedViewValue,n=t,r=this;if(this.$$parserValid=!b(n)||void 0,this.$$parserValid)for(var i=0;i<this.$parsers.length;i++)if(n=this.$parsers[i](n),b(n)){this.$$parserValid=!1;break}wi(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var a=this.$modelValue,o=this.$options.getOption("allowInvalid");this.$$rawModelValue=n,o&&(this.$modelValue=n,e()),this.$$runValidators(n,this.$$lastCommittedViewValue,function(t){o||(r.$modelValue=t?n:void 0,e())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),a(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");T(t[e])?t=t[e]:T(t.default)&&(t=t.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;t>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},t):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e),this.$$setUpdateOnEvents()},$processModelValue:function(){var e=this.$$format();this.$viewValue!==e&&(this.$$updateEmptyClasses(e),this.$viewValue=this.$$lastCommittedViewValue=e,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,v))},$$format:function(){for(var e=this.$formatters,t=e.length,n=this.$modelValue;t--;)n=e[t](n);return n},$$setModelValue:function(e){this.$modelValue=this.$$rawModelValue=e,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(e){this.$$debounceViewValueCommit(e&&e.type)}},Pr({clazz:Xr,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var rs,is=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Xr,priority:1,compile:function(t){return t.addClass(Xo).addClass(Ko).addClass(Yo),{pre:function(e,t,n,r){var i=r[0],a=r[1]||i.$$parentForm,o=r[2];o&&(i.$options=o.$options),i.$$initGetterSetters(),a.$addControl(i),n.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(t,n,r,i){function a(){o.$setTouched()}var o=i[0];o.$$setUpdateOnEvents(),n.on("blur",function(){o.$touched||(e.$$phase?t.$evalAsync(a):t.$apply(a))})}}}}}],as=/(\s+|^)default(\s+|$)/;Kr.prototype={getOption:function(e){return this.$$options[e]},createChild:function(e){var t=!1;return e=d({},e),a(e,function(n,r){"$inherit"===n?"*"===r?t=!0:(e[r]=this.$$options[r],"updateOn"===r&&(e.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(e.updateOnDefault=!1,e[r]=Ti(n.replace(as,function(){return e.updateOnDefault=!0," "})))},this),t&&(delete e["*"],Zr(e,this.$$options)),Zr(e,rs.$$options),new Kr(e)}},rs=new Kr({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var os=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:rs,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}},ss=Tr({terminal:!0,priority:1e3}),cs=r("ngOptions"),us=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ls=["$compile","$document","$parse",function(t,n,r){function o(e,t,n){function a(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function o(e){var t;if(!u&&i(e))t=e;else{t=[];for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n)}return t}var s=e.match(us);if(!s)throw cs("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,te(t));var c=s[5]||s[7],u=s[6],l=/ as /.test(s[0])&&s[1],d=s[9],f=r(s[2]?s[1]:c),h=l&&r(l),p=h||f,v=d&&r(d),g=d?function(e,t){return v(n,t)}:function(e){return ot(e)},m=function(e,t){return g(e,k(e,t))},y=r(s[2]||s[1]),b=r(s[3]||""),_=r(s[4]||""),w=r(s[8]),S={},k=u?function(e,t){return S[u]=t,S[c]=e,S}:function(e){return S[c]=e,S};return{trackBy:d,getTrackByValue:m,getWatchables:r(w,function(e){var t=[];e=e||[];for(var r=o(e),i=r.length,a=0;a<i;a++){var c=e===r?a:r[a],u=e[c],l=k(u,c),d=g(u,l);if(t.push(d),s[2]||s[1]){var f=y(n,l);t.push(f)}if(s[4]){var h=_(n,l);t.push(h)}}return t}),getOptions:function(){for(var e=[],t={},r=w(n)||[],i=o(r),s=i.length,c=0;c<s;c++){var u=r===i?c:i[c],l=r[u],f=k(l,u),h=p(n,f),v=g(h,f),S=y(n,f),T=b(n,f),C=_(n,f),x=new a(v,h,S,T,C);e.push(x),t[v]=x}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[m(e)]},getViewValueFromOption:function(e){return d?H(e.viewValue):e.viewValue}}}}}function s(e,r,i,s){function l(e,t){var n=c.cloneNode(!1);t.appendChild(n),f(e,n)}function d(e){var t=S.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}function f(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),t.value=e.selectValue}function h(){var e=S&&p.readValue();if(S)for(var t=S.items.length-1;t>=0;t--){var n=S.items[t];Je(_(n.group)?n.element.parentNode:n.element)}S=k.getOptions();var i={};if(S.items.forEach(function(e){var t;_(e.group)?(t=i[e.group],t||(t=u.cloneNode(!1),T.appendChild(t),t.label=null===e.group?"null":e.group,i[e.group]=t),l(e,t)):l(e,T)}),r[0].appendChild(T),v.$render(),!v.$isEmpty(e)){var a=p.readValue();(k.trackBy||g?z(e,a):e===a)||(v.$setViewValue(a),v.$render())}}for(var p=s[0],v=s[1],g=i.multiple,m=0,y=r.children(),b=y.length;m<b;m++)if(""===y[m].value){p.hasEmptyOption=!0,p.emptyOption=y.eq(m);break}r.empty();var w=!!p.emptyOption;li(c.cloneNode(!1)).val("?");var S,k=o(i.ngOptions,r,e),T=n[0].createDocumentFragment();p.generateUnknownOptionValue=function(e){return"?"},g?(p.writeValue=function(e){if(S){var t=e&&e.map(d)||[];S.items.forEach(function(e){e.element.selected&&!B(t,e)&&(e.element.selected=!1)})}},p.readValue=function(){var e=r.val()||[],t=[];return a(e,function(e){var n=S.selectValueMap[e];n&&!n.disabled&&t.push(S.getViewValueFromOption(n))}),t},k.trackBy&&e.$watchCollection(function(){if(Si(v.$viewValue))return v.$viewValue.map(function(e){return k.getTrackByValue(e)})},function(){v.$render()})):(p.writeValue=function(e){if(S){var t=r[0].options[r[0].selectedIndex],n=S.getOptionFromViewValue(e);t&&t.removeAttribute("selected"),n?(r[0].value!==n.selectValue&&(p.removeUnknownOption(),r[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):p.selectUnknownOrEmptyOption(e)}},p.readValue=function(){var e=S.selectValueMap[r.val()];return e&&!e.disabled?(p.unselectEmptyOption(),p.removeUnknownOption(),S.getViewValueFromOption(e)):null},k.trackBy&&e.$watch(function(){return k.getTrackByValue(v.$viewValue)},function(){v.$render()})),w&&(t(p.emptyOption)(e),r.prepend(p.emptyOption),p.emptyOption[0].nodeType===Di?(p.hasEmptyOption=!1,p.registerOption=function(e,t){""===t.val()&&(p.hasEmptyOption=!0,p.emptyOption=t,p.emptyOption.removeClass("ng-scope"),v.$render(),t.on("$destroy",function(){var e=p.$isEmptyOptionSelected();p.hasEmptyOption=!1,p.emptyOption=void 0,e&&v.$render()}))}):p.emptyOption.removeClass("ng-scope")),e.$watchCollection(k.getWatchables,h)}var c=e.document.createElement("option"),u=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=v},post:s}}}],ds=["$locale","$interpolate","$log",function(e,t,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(o,s,c){function u(e){s.text(e||"")}var l,d=c.count,f=c.$attr.when&&s.attr(c.$attr.when),h=c.offset||0,p=o.$eval(f)||{},g={},m=t.startSymbol(),y=t.endSymbol(),_=m+d+"-"+h+y,w=bi.noop;a(c,function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+ai(n[2]);p[r]=s.attr(c.$attr[t])}}),a(p,function(e,n){g[n]=t(e.replace(r,_))}),o.$watch(d,function(t){var r=parseFloat(t),i=wi(r);if(i||r in p||(r=e.pluralCat(r-h)),!(r===l||i&&wi(l))){w();var a=g[r];b(a)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+f),w=v,u()):w=o.$watch(a,u),l=r}})}}}],fs=["$parse","$animate","$compile",function(e,t,n){var o="$$NG_REMOVED",s=r("ngRepeat"),c=function(e,t,n,r,i,a,o){e[n]=r,i&&(e[i]=a),e.$index=t,e.$first=0===t,e.$last=t===o-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))},u=function(e){return e.clone[0]},l=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,d){var f=d.ngRepeat,h=n.$$createComment("end ngRepeat",f),p=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);var v=p[1],g=p[2],m=p[3],y=p[4];if(!(p=v.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",v);var b=p[3]||p[1],_=p[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))throw s("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",m);var w,S,k,T,C={$id:ot};return y?w=e(y):(k=function(e,t){return ot(t)},T=function(e){return e}),function(e,n,r,d,p){w&&(S=function(t,n,r){return _&&(C[_]=t),C[b]=n,C.$index=r,w(e,C)});var v=_e();e.$watchCollection(g,function(r){var d,g,y,w,C,x,E,P,$,A,O,I,R=n[0],L=_e();if(m&&(e[m]=r),i(r))$=r,P=S||k;else{P=S||T,$=[];for(var j in r)ii.call(r,j)&&"$"!==j.charAt(0)&&$.push(j)}for(w=$.length,O=new Array(w),d=0;d<w;d++)if(C=r===$?d:$[d],x=r[C],E=P(C,x,d),v[E])A=v[E],delete v[E],L[E]=A,O[d]=A;else{if(L[E])throw a(O,function(e){e&&e.scope&&(v[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",f,E,x);O[d]={id:E,scope:void 0,clone:void 0},L[E]=!0}for(var D in v){if(A=v[D],I=be(A.clone),t.leave(I),I[0].parentNode)for(d=0,g=I.length;d<g;d++)I[d][o]=!0;A.scope.$destroy()}for(d=0;d<w;d++)if(C=r===$?d:$[d],x=r[C],A=O[d],A.scope){y=R;do{y=y.nextSibling}while(y&&y[o]);u(A)!==y&&t.move(be(A.clone),null,R),R=l(A),c(A.scope,d,b,x,_,C,w)}else p(function(e,n){A.scope=n;var r=h.cloneNode(!1);e[e.length++]=r,t.enter(e,null,R),R=r,A.clone=e,L[A.id]=A,c(A.scope,d,b,x,_,C,w)});v=L})}}}}],hs="ng-hide",ps="ng-hide-animate",vs=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,hs,{tempClasses:ps})})}}}],gs=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,hs,{tempClasses:ps})})}}}],ms=Tr(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&a(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),ys=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,o){var s=i.ngSwitch||i.on,c=[],u=[],l=[],d=[],f=function(e,t){return function(n){!1!==n&&e.splice(t,1)}};n.$watch(s,function(n){for(var r,i;l.length;)e.cancel(l.pop());for(r=0,i=d.length;r<i;++r){var s=be(u[r].clone);d[r].$destroy();(l[r]=e.leave(s)).done(f(l,r))}u.length=0,d.length=0,(c=o.cases["!"+n]||o.cases["?"])&&a(c,function(n){n.transclude(function(r,i){d.push(i);var a=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var o={clone:r};u.push(o),e.enter(r,a.parent(),a)})})})}}}],bs=Tr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){a(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e}),function(e){r.cases["!"+e]=r.cases["!"+e]||[],r.cases["!"+e].push({transclude:i,element:t})})}}),_s=Tr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),ws=r("ngTransclude"),Ss=["$compile",function(e){return{restrict:"EAC",compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,r,i,a){function o(e,n){e.length&&c(e)?t.append(e):(s(),n.$destroy())}function s(){n(e,function(e){t.append(e)})}function c(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.nodeType!==ji||r.nodeValue.trim())return!0}}if(!a)throw ws("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",te(t));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var u=r.ngTransclude||r.ngTranscludeSlot;a(o,null,u),u&&!a.isSlotFilled(u)&&s()}}}}],ks=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],Ts={$setViewValue:v,$render:v},Cs=["$element","$scope",function(t,n){function r(){s||(s=!0,n.$$postDigest(function(){s=!1,a.ngModelCtrl.$render()}))}function i(e){c||(c=!0,n.$$postDigest(function(){n.$$destroyed||(c=!1,a.ngModelCtrl.$setViewValue(a.readValue()),e&&a.ngModelCtrl.$render())}))}var a=this,o=new ra;a.selectValueMap={},a.ngModelCtrl=Ts,a.multiple=!1,a.unknownOption=li(e.document.createElement("option")),a.hasEmptyOption=!1,a.emptyOption=void 0,a.renderUnknownOption=function(e){var n=a.generateUnknownOptionValue(e);a.unknownOption.val(n),t.prepend(a.unknownOption),ei(a.unknownOption,!0),t.val(n)},a.updateUnknownOption=function(e){var n=a.generateUnknownOptionValue(e);a.unknownOption.val(n),ei(a.unknownOption,!0),t.val(n)},a.generateUnknownOptionValue=function(e){return"? "+ot(e)+" ?"},a.removeUnknownOption=function(){a.unknownOption.parent()&&a.unknownOption.remove()},a.selectEmptyOption=function(){a.emptyOption&&(t.val(""),ei(a.emptyOption,!0))},a.unselectEmptyOption=function(){a.hasEmptyOption&&ei(a.emptyOption,!1)},n.$on("$destroy",function(){a.renderUnknownOption=v}),a.readValue=function(){var e=t.val(),n=e in a.selectValueMap?a.selectValueMap[e]:e;return a.hasOption(n)?n:null},a.writeValue=function(e){var n=t[0].options[t[0].selectedIndex];if(n&&ei(li(n),!1),a.hasOption(e)){a.removeUnknownOption();var r=ot(e);t.val(r in a.selectValueMap?r:e);var i=t[0].options[t[0].selectedIndex];ei(li(i),!0)}else a.selectUnknownOrEmptyOption(e)},a.addOption=function(e,t){if(t[0].nodeType!==Di){me(e,'"option value"'),""===e&&(a.hasEmptyOption=!0,a.emptyOption=t);var n=o.get(e)||0;o.set(e,n+1),r()}},a.removeOption=function(e){var t=o.get(e);t&&(1===t?(o.delete(e),""===e&&(a.hasEmptyOption=!1,a.emptyOption=void 0)):o.set(e,t-1))},a.hasOption=function(e){return!!o.get(e)},a.$hasEmptyOption=function(){return a.hasEmptyOption},a.$isUnknownOptionSelected=function(){return t[0].options[0]===a.unknownOption[0]},a.$isEmptyOptionSelected=function(){return a.hasEmptyOption&&t[0].options[t[0].selectedIndex]===a.emptyOption[0]},a.selectUnknownOrEmptyOption=function(e){null==e&&a.emptyOption?(a.removeUnknownOption(),a.selectEmptyOption()):a.unknownOption.parent().length?a.updateUnknownOption(e):a.renderUnknownOption(e)};var s=!1,c=!1;a.registerOption=function(e,t,n,o,s){if(n.$attr.ngValue){var c,u=NaN;n.$observe("value",function(e){var n,r=t.prop("selected");_(u)&&(a.removeOption(c),delete a.selectValueMap[u],n=!0),u=ot(e),c=e,a.selectValueMap[u]=e,a.addOption(e,t),t.attr("value",u),n&&r&&i()})}else o?n.$observe("value",function(e){a.readValue();var n,r=t.prop("selected");_(c)&&(a.removeOption(c),n=!0),c=e,a.addOption(e,t),n&&r&&i()}):s?e.$watch(s,function(e,r){n.$set("value",e);var o=t.prop("selected");r!==e&&a.removeOption(r),a.addOption(e,t),r&&o&&i()}):a.addOption(n.value,t);n.$observe("disabled",function(e){("true"===e||e&&t.prop("selected"))&&(a.multiple?i(!0):(a.ngModelCtrl.$setViewValue(null),a.ngModelCtrl.$render()))}),t.on("$destroy",function(){var e=a.readValue(),t=n.value;a.removeOption(t),r(),(a.multiple&&e&&-1!==e.indexOf(t)||e===t)&&i(!0)})}}],xs=function(){function e(e,t,n,r){var i=r[0],o=r[1];if(!o)return void(i.registerOption=v);if(i.ngModelCtrl=o,t.on("change",function(){i.removeUnknownOption(),e.$apply(function(){o.$setViewValue(i.readValue())})}),n.multiple){i.multiple=!0,i.readValue=function(){var e=[];return a(t.find("option"),function(t){if(t.selected&&!t.disabled){var n=t.value;e.push(n in i.selectValueMap?i.selectValueMap[n]:n)}}),e},i.writeValue=function(e){a(t.find("option"),function(t){var n=!!e&&(B(e,t.value)||B(e,i.selectValueMap[t.value]));n!==t.selected&&ei(li(t),n)})};var s,c=NaN;e.$watch(function(){c!==o.$viewValue||z(s,o.$viewValue)||(s=ke(o.$viewValue),o.$render()),c=o.$viewValue}),o.$isEmpty=function(e){return!e||0===e.length}}}function t(e,t,n,r){var i=r[1];if(i){var a=r[0];i.$render=function(){a.writeValue(i.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:Cs,priority:1,link:{pre:e,post:t}}},Es=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){var r,i;return _(n.ngValue)||(_(n.value)?r=e(n.value,!0):(i=e(t.text(),!0))||n.$set("value",t.text())),function(e,t,n){var a="$selectController",o=t.parent(),s=o.data(a)||o.parent().data(a);s&&s.registerOption(e,t,n,r,i)}}}}],Ps=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},$s=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var a,o=n.ngPattern||n.pattern;n.$observe("pattern",function(e){if(k(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",o,e,te(t));a=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||b(a)||a.test(t)}}}}},As=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=h(e);i=wi(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return i<0||r.$isEmpty(t)||t.length<=i}}}}},Os=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=h(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};if(e.angular.bootstrap)return void(e.console&&console.log("WARNING: Tried to load AngularJS more than once."));pe(),xe(bi),bi.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function n(e,n){var r=n;void 0===r&&(r=Math.min(t(e),3));var i=Math.pow(10,r);return{v:r,f:(e*i|0)%i}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var i=0|e,a=n(e,t);return 1==i&&0==a.v?r.ONE:r.OTHER}})}]),li(function(){ue(e.document,le)})}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(759),c=r(s),u=n(762),l=n(783),d=n(271),f=n(256),h=function(){function e(t,n,r,i,o,s,c,u,l,d){"ngInject";a(this,e),this.$rootScope=t,this.$location=n,this.$timeout=r,this.authService=i,this.configService=o,this.utilitiesService=s,this.algoliaSearchService=c,this.templatesService=u,this.iconService=l,this.analyticsService=d,this.init()}return e.$inject=["$rootScope","$location","$timeout","authService","configService","utilitiesService","algoliaSearchService","templatesService","iconService","analyticsService"],o(e,[{key:"init",value:function(){this.limitObject={highlightedTextLimit:105,titleLimit:91,authorLimit:20},this.view="grid",this.utilitiesService.unsetNightmode(),this.$rootScope.currentPage="search",this.$rootScope.$emit("pageChanged"),this.currentPageIsbnList=null,this.areFiltersHiddenOnMobile=!0,this.noSearchResults=!0,this.instantiateSearch(),this.addWidgets(),this.bindEvents(),this.search.start(),this.analyticsService.addIntercomMetadata({viewed_browse_all:!0})}},{key:"instantiateSearch",value:function(){var e=this,t=this.configService.getPath("search");this.search=(0,c.default)({appId:"VIVZZXFQG1",apiKey:"945b46c99f0be80981c40d1fb3c7db74",indexName:"subscription_search-prod",searchFunction:function(n){-1!==e.$location.absUrl().indexOf(t)&&(e.currentPageIsbnList=null,n.search())},routing:{router:(0,u.history)({createURL:function(e){var n=e.qsModule,r=e.routeState,i=n.stringify(r,{addQueryPrefix:!0});return""+t+i},parseURL:function(e){var t=e.qsModule,n=e.location,r=n.href.split("search")[1];return t.parse(r,{delimiter:"&",ignoreQueryPrefix:!0,allowDots:!1})},writeDelay:199}),stateMapping:{stateToRoute:function(e){return{query:e.query,products:e.refinementList&&e.refinementList.product_type&&e.refinementList.product_type.join("~"),released:e.refinementList&&e.refinementList.released&&e.refinementList.released.join("~"),category:e.refinementList&&e.refinementList.category&&e.refinementList.category.join("~"),concept:e.refinementList&&e.refinementList.concept&&e.refinementList.concept.join("~"),tool:e.refinementList&&e.refinementList.tool&&e.refinementList.tool.join("~"),language:e.refinementList&&e.refinementList.language&&e.refinementList.language.join("~"),page:e.page}},routeToState:function(e){return{query:e.query,refinementList:{product_type:e.products&&e.products.split("~"),released:e.released&&e.released.split("~"),category:e.category&&e.category.split("~"),concept:e.concept&&e.concept.split("~"),tool:e.tool&&e.tool.split("~"),language:e.language&&e.language.split("~")},page:e.page}}}},searchParameters:{hitsPerPage:12,filters:'product_type:"Video" OR product_type:"Book" OR product_type:"Project" OR product_type:"Learning Path"'}})}},{key:"addWidgets",value:function(){var e=this,t=function(e,t){t(e)};this.search.addWidget((0,l.searchBox)({container:"#search-input",queryHook:this.utilitiesService.debounce(t,500),magnifier:!1,wrapInput:!1}));var n=this.templatesService.getHitCssClasses();this.search.addWidget((0,l.hits)({container:"#hits",templates:{item:function(t){return e.templatesService.getHitTemplate(t,e.configService)},empty:'We didn\'t find any results for the search <b>"{{query}}"</b>'},transformData:function(t){if(e.noSearchResults=0===t.nbHits,"Book"!==t.product_type&&"Video"!==t.product_type||(e.currentPageIsbnList=e.currentPageIsbnList?[].concat(i(e.currentPageIsbnList),[t.isbn13]):[t.isbn13]),t.published_on&&-1===t.published_on.indexOf("/")&&8===t.published_on.length&&(t.published_on=e.algoliaSearchService.formatDate(t.published_on)),t._highlightResult&&t._highlightResult.description&&t._highlightResult.description.value&&(t._highlightResult.description.truncatedValue=e.utilitiesService.truncateText(t._highlightResult.description.value,e.limitObject.highlightedTextLimit)),t._highlightResult&&t._highlightResult.title&&t._highlightResult.title.value&&(t._highlightResult.title.truncatedValue=e.utilitiesService.truncateText(t._highlightResult.title.value,e.limitObject.titleLimit)),t._highlightResult&&t._highlightResult.author&&t._highlightResult.author.value&&(t._highlightResult.author.truncatedValue=e.utilitiesService.truncateText(t._highlightResult.author.value,e.limitObject.authorLimit)),t.product_type)switch(t.product_type){case"Learning Path":t.product_type_image=e.iconService.getIcon("learningPath");break;case"Project":t.product_type_image=e.iconService.getIcon("project");break;default:t.product_type_image=e.iconService.getIcon(t.product_type.toLowerCase())}return t._highlightResult&&!t._highlightResult.title&&(t._highlightResult.title={value:"",matchLevel:"none",matchedWords:[]}),t._highlightResult&&!t._highlightResult.description&&(t._highlightResult.description={value:"",matchLevel:"none",matchedWords:[]}),t._highlightResult&&!t._highlightResult.author&&(t._highlightResult.author={value:"",matchLevel:"none",matchedWords:[]}),t},cssClasses:n}));var r=this.templatesService.getPaginationCssClasses();this.search.addWidget((0,l.pagination)({container:"#pagination1",padding:1,showFirstLast:!1,cssClasses:r})),this.search.addWidget((0,l.pagination)({container:"#pagination2",padding:1,showFirstLast:!1,cssClasses:r})),this.search.addWidget((0,l.stats)({container:"#stats",templates:{body:function(e){return"<strong>Showing "+e.nbHits+" results</strong>"}}}));var a=(0,d.connectHitsPerPage)(this.algoliaSearchService.hitsPerPageRenderFn);this.search.addWidget(a({container:"#hits-per-page-selector",items:[{value:12,label:"12 per page",default:!0},{value:24,label:"24 per page"},{value:48,label:"48 per page"}]})),this.search.addWidget({init:function(e){["product_type","released","category","concept","tool","language"].some(function(t){return e.helper.hasRefinements(t)})||e.helper.toggleRefinement("released","Available")}});var o=this.templatesService.getRefinementListCssClasses();this.search.addWidget((0,l.refinementList)({container:"#product_type",attributeName:"product_type",operator:"or",limit:10,templates:{header:function(){return e.templatesService.getFacetHeaderTemplate("Product Type")},item:function(t){return e.templatesService.getFacetTemplate(t)}},sortBy:["count:desc","name:asc"],autoHideContainer:!0,collapsible:!0,cssClasses:o})),this.search.addWidget((0,l.refinementList)({container:"#released",attributeName:"released",operator:"or",limit:10,templates:{header:function(){return e.templatesService.getFacetHeaderTemplate("Released")},item:function(t){return e.templatesService.getFacetTemplate(t)}},sortBy:["count:desc","name:asc"],autoHideContainer:!0,collapsible:!0,cssClasses:o})),this.search.addWidget((0,l.refinementList)({container:"#category",attributeName:"category",operator:"or",limit:10,templates:{header:function(){return e.templatesService.getFacetHeaderTemplate("Category")},item:function(t){return e.templatesService.getFacetTemplate(t)}},sortBy:["count:desc","name:asc"],autoHideContainer:!0,collapsible:!0,cssClasses:o})),this.search.addWidget((0,l.refinementList)({container:"#concept",attributeName:"concept",operator:"or",limit:10,templates:{header:function(){return e.templatesService.getFacetHeaderTemplate("Skillset")},item:function(t){return e.templatesService.getFacetTemplate(t)}},sortBy:["count:desc","name:asc"],autoHideContainer:!0,collapsible:{collapsed:!0},cssClasses:o})),this.search.addWidget((0,l.refinementList)({container:"#tool",attributeName:"tool",operator:"or",limit:10,templates:{header:function(){return e.templatesService.getFacetHeaderTemplate("Tool")},item:function(t){return e.templatesService.getFacetTemplate(t)}},sortBy:["count:desc","name:asc"],autoHideContainer:!0,collapsible:{collapsed:!0},cssClasses:o})),this.search.addWidget((0,l.refinementList)({container:"#language",attributeName:"language",operator:"or",limit:10,templates:{header:function(){return e.templatesService.getFacetHeaderTemplate("Language")},item:function(t){return e.templatesService.getFacetTemplate(t)}},sortBy:["count:desc","name:asc"],autoHideContainer:!0,collapsible:{collapsed:!0},cssClasses:o}));var s=["subscriptions"];this.search.addWidget((0,l.configure)({ruleContexts:s})),this.search.addWidget((0,l.currentRefinedValues)({container:"#current-refined-values",clearAll:"before",templates:{header:"Current Filters",item:f.currentRefinedValueItemTemplate,clearAll:f.currentRefinedValueClearAllTemplate}}))}},{key:"bindEvents",value:function(){var e=this;this.search.on("render",function(){return e.onRender()}),this.$rootScope.$on("search",function(t,n){return e.triggerSerchByValue(n.searchValue)})}},{key:"onRender",value:function(){if(this.$timeout(function(){},200),this.authService.hasJwtAuth()&&this.currentPageIsbnList&&!this.noSearchResults){this.algoliaSearchService.getProductUserData(this.currentPageIsbnList).then(function(e){e&&Array.from(document.getElementById("hits").querySelectorAll(".search-hit__inner")).forEach(function(t){var n=t.getAttribute("data-id");if(n&&e[n]&&e[n].lastRead){var r=t.querySelector(".btn-info");r.innerHTML="Resume";var i=r.href.replace(/^\/mapt/,"");r.href=i+"/"+e[n].lastRead}})}).catch(function(e){return!1})}}},{key:"triggerSerchByValue",value:function(e){this.search.helper.setQuery(e).search()}},{key:"toggleFilters",value:function(){this.areFiltersHiddenOnMobile=!this.areFiltersHiddenOnMobile}},{key:"submitForm",value:function(e){e.preventDefault(),document.activeElement.blur()}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i){"ngInject";r(this,e),this.$q=t,this.configService=n,this.productService=i,this.cancelInProgressRequest=null,this.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}return e.$inject=["$q","configService","productService"],i(e,[{key:"getProductUserData",value:function(e){return this.cancelInProgressRequest&&this.cancelInProgressRequest.resolve(),this.cancelInProgressRequest=this.$q.defer(),this.productService.getProductUserData(e,"line",this.cancelInProgressRequest.promise)}},{key:"buildProductBaseHref",value:function(e,t,n){var r=e.trim().toLowerCase(),i=Array.isArray(t)?t[0]:t,a=i.toLowerCase().replace(/\s/g,"_").replace(/&/,"and");return this.configService.baseUrl+"/"+r+"/"+a+"/"+n}},{key:"formatDate",value:function(e){var t=e.match(/(\d{4})(\d{2})(\d{2})/),n=parseInt(t[2],10)-1;return this.monthNames[n]+" "+t[1]}},{key:"hitsPerPageRenderFn",value:function(e,t){var n=e.widgetParams.container,r=e.items,i=e.refine,a=document.querySelector(n);t&&(a.innerHTML='<div class="hits-per-page"></div>');var o=a.querySelector(".hits-per-page");if(e.hasNoResults)return void(o.innerHTML="");var s=r.map(function(e){var t=e.value;e.label;return'\n      <a href="#"\n        data-value="'+t+'"\n        class="link hits-per-page__selector '+(e.isRefined?"selected":"")+'">\n        '+t+"\n      </a>\n    "}).join("");o.innerHTML=s,o.addEventListener("click",function(e){if(e.target.matches(".hits-per-page__selector")){e.preventDefault();var t=e.target.getAttribute("data-value")||12;i(t)}})}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(256),s=r(o),c=function(){function e(t){"ngInject";i(this,e),this.featureFlagsService=t}return e.$inject=["featureFlagsService"],a(e,[{key:"getFacetHeaderTemplate",value:function(e){return s.subsFacetHeader(e)}},{key:"getFacetTemplate",value:function(e){return s.facetTemplate(e)}},{key:"getHitTemplate",value:function(e,t){switch(e.product_type){case"Learning Path":return s.learningPathHitTemplate(e);case"Project":return s.projectHitTemplate(e);case"Book":case"Video":default:return e.imageUrl=t.getCoverImage(e.isbn13),s.defaultSubsHitTemplate(e)}}},{key:"getHitCssClasses",value:function(){return{item:"search-hit"}}},{key:"getPaginationCssClasses",value:function(){return{root:"pagination mt0 mb0",item:"page-item",link:"page-link",disabled:"disabled",active:"active"}}},{key:"getSortByCssClasses",value:function(){return{select:"custom-algolia-select"}}},{key:"getRefinementListCssClasses",value:function(){return{header:"filter-heading"}}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.AlertDialogComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1032),s=r(o),c=function(){function e(){"ngInject";i(this,e)}return a(e,[{key:"close",value:function(){this.onClose&&this.onClose()}}]),e}();t.AlertDialogComponent={template:s.default,bindings:{type:"@",titleIcon:"@",onClose:"&"},transclude:{title:"?alertDialogTitle",body:"?alertDialogBody"},controller:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1033),s=r(o);n(723);var c=function(){function e(t,n){"ngInject";i(this,e),this.configService=t,this.b2bService=n}return e.$inject=["configService","b2bService"],a(e,[{key:"$onInit",value:function(){var e=this;this.loading=!0,this.cdnUrl=function(t){return e.configService.cdnUrl(t)},this.iconSrc=this.configService.cdnUrl("GCFB-icon.png"),this.b2bService.getB2bTeamManagementPageUrlForCustomerAdmin().then(function(t){e.userManagementLink=t,e.loading=!1}).catch(function(){e.loading=!1})}}]),e}(),u={template:s.default,bindings:{freeSection:"<"},controller:c};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.BookmarkProductComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1034),s=r(o),c=function(){function e(t,n,r){"ngInject";i(this,e),this.configService=t,this.$location=n,this.utilitiesService=r,this.convertTagToBadge=this.utilitiesService.convertTagToBadge}return e.$inject=["configService","$location","utilitiesService"],a(e,[{key:"$onInit",value:function(){this.baseUrl=this.configService.baseUrl}},{key:"removeBookmark",value:function(e,t){t&&t.preventDefault(),this.onRemoveBookmark({isbn:this.product.product.isbn13,bookmark:e})}},{key:"resumeFromBookmark",value:function(e,t){e.preventDefault();var n=""+this.baseUrl+this.product.product.path+t;this.$location.path(n)}}]),e}();t.BookmarkProductComponent={template:s.default,bindings:{product:"<",onRemoveBookmark:"&"},controller:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1035),o=r(a),s=function e(t){"ngInject";i(this,e),this.iconService=t};s.$inject=["iconService"],t.default={template:o.default,bindings:{step:"@",isB2bCheckout:"<"},controller:s}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1036),o=r(a);n(724);var s=function e(t){"ngInject";i(this,e),this.checkoutUrl=t.checkoutUrl,this.packtArrowSrc=t.cdnUrl("packt-arrow.png"),this.sideImageSrc=t.cdnUrl("hard-upsell-banner.png")};s.$inject=["configService"];var c={template:o.default,controller:s};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1037),o=r(a);n(725);var s=function e(t){"ngInject";i(this,e),this.checkoutUrl=t.checkoutUrl,this.loginUrl=t.getPath("login")};s.$inject=["configService"];var c={template:o.default,controller:s};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1038),o=r(a);n(726);var s=function e(t){"ngInject";i(this,e),this.checkoutUrl=t.checkoutUrl,this.padlockIconSrc=t.cdnUrl("padlock-icon.png")};s.$inject=["configService"];var c={template:o.default,controller:s};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Download=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1039),s=r(o),c=function(){function e(t,n,r,a,o){"ngInject";i(this,e),this.categoryFilter=t("format_category_field"),this.fileService=n,this.configService=r,this.utilitiesService=a,this.$rootScope=o}return e.$inject=["$filter","fileService","configService","utilitiesService","$rootScope"],a(e,[{key:"$onInit",value:function(){this.buildViewModel(),this.setProductBaseUrl(),this.setLastReadUrl(),this.setFirstSectionUrl(),this.setContinueText(),"book"===this.productType?this.setDownloadInfo():this.setTableOfContents()}},{key:"buildViewModel",value:function(){var e=this.download.headerMetadata,t=this.download.metadata,n=this.download.summary;this.isbn=e.isbn13,this.type=e.productType+"s",this.productType=e.productType,this.title=t.title,this.oneLiner=n.oneLiner,this.imagePath=this.configService.cdnUrl(t.imageUrl,this.fileService.dataDirectory),this.category=e.category,this.publicationDate=this.utilitiesService.convertDate(n.publicationDate),this.earlyAccess=t.earlyAccess,this.length=n.length,this.authors=e.authorList.join(", ")}},{key:"setProductBaseUrl",value:function(){var e=this.configService.baseUrl,t=this.categoryFilter(this.category);this.productBaseUrl=e+"/"+this.productType+"/"+t+"/"+this.isbn}},{key:"setLastReadUrl",value:function(){this.download.userMetadata&&this.download.userMetadata[this.isbn]&&this.download.userMetadata[this.isbn].lastRead&&(this.lastReadUrl=this.productBaseUrl+"/"+this.download.userMetadata[this.isbn].lastRead)}},{key:"setFirstSectionUrl",value:function(){if("video"===this.productType)return void(this.firstSectionUrl=this.productBaseUrl+"/"+this.download.metadata.tableOfContents[0].children[0].seoUrl);this.firstSectionUrl=this.productBaseUrl+"/"+this.download.metadata.tableOfContents[0].seoUrl}},{key:"setContinueText",value:function(){this.continueText=this.lastReadUrl?"Resume":"Start"}},{key:"setDownloadInfo",value:function(){this.downloadInfo=this.fileService.getDownloadInfo(this.isbn,null,this.productType)}},{key:"setTableOfContents",value:function(){var e=this,t=this.download.metadata.tableOfContents;this.toc=t.map(function(t){return t.children=t.children.map(function(n){if("section"===n.type){var r=e.fileService.getDownloadInfo(e.isbn,n.id,e.productType);if(r)return angular.extend(n,{downloadInfo:r,productType:e.productType,chapterId:t.id,isbn:e.isbn})}return n}),t})}},{key:"hasSectionsWithDownloadInfo",value:function(e){return void 0!==e.children.find(function(e){return e.downloadInfo})}},{key:"toggleToc",value:function(e){e.preventDefault(),this.tocOpen=!this.tocOpen}},{key:"cancelDownload",value:function(e){this.onCancel({chunk:e||this})}},{key:"removeDownload",value:function(e){this.onRemove({chunk:e||this})}}]),e}();t.Download={bindings:{download:"<value",onCancel:"&",onRemove:"&"},template:s.default,controller:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1040),o=r(a),s=function e(t){"ngInject";i(this,e),this.dialogsService=t};s.$inject=["dialogsService"];var c={template:o.default,controller:s};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1041),s=r(o),c=function(){function e(t,n,r,a,o,s){"ngInject";var c=this;i(this,e),this.configService=s,this.newslettersService=o,this.$timeout=a,t.$on("footer:open",function(e,t){c.hideFooter=t&&t.footerIsHidden}),this.email="",this.displayMessage="",this.loading=!1,this.footerTechnologies=[{name:"Web Development"},{name:"Programming"},{name:"Data"},{name:"Cloud & Networking"},{name:"Mobile"},{name:"Security"},{name:"IoT & Hardware"},{name:"Game Development"},{name:"Business & Other"}],this.usefulFooterLinks=[{name:"Books",url:"https://subscription.packtpub.com/search?products=Book&released=Available"},{name:"Videos",url:"https://subscription.packtpub.com/search?products=Video&released=Available"},{name:"Learning Paths",url:"https://subscription.packtpub.com/learning-paths"}],t.isIOS||(this.usefulFooterLinks.push({name:"Code Downloads",url:"https://www.packtpub.com/support/code-downloads"}),this.usefulFooterLinks.push({name:"Contact Us",url:"https://www.packtpub.com/contact"})),this.currentYear=(new Date).getFullYear()}return e.$inject=["$rootScope","$scope","$document","$timeout","newslettersService","configService"],a(e,[{key:"cdnUrl",value:function(e){return this.configService.cdnUrl(e)}},{key:"subscribeToSubscriptionUpdates",value:function(){var e=this;this.loading=!0;var t=[{id:["da990d125b"][0],status:!0}];this.newslettersService.addEmailToNewsletter(this.email,"c970747b22",t).then(function(){e.displayMessage="Email address successfully submitted!"}).catch(function(){e.displayMessage="Incorrect email address. Please try again."}).finally(function(){e.loading=!1,e.$timeout(function(){e.displayMessage=""},5e3)})}},{key:"constructSearchLinks",value:function(e,t){return this.configService.getPath("search")+"?released=Available"+(e?"&query="+encodeURIComponent(e):"")+(t?"&category="+encodeURIComponent(t):"")}},{key:"baseHref",value:function(e){return this.configService.getPath(e)}}]),e}(),u={template:s.default,controller:c};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.HorizontalSliderComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1042),s=r(o);n(727);var c=function(){function e(t){"ngInject";i(this,e),this.analyticsService=t}return e.$inject=["analyticsService"],a(e,[{key:"$onChanges",value:function(e){e.items&&e.items.currentValue&&this.analyticsService.addProductListImpressionEvent(e.items.currentValue,this.listName)}},{key:"handleProductClick",value:function(e,t){this.analyticsService.addProductListClickEvent(e,this.listName,t)}}]),e}();t.HorizontalSliderComponent={template:s.default,bindings:{items:"<",listName:"<"},controller:c}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.icons={timedUnlock:n(1077),learning:n(1062),saved:n(1073),bookmarks:n(1046),rewards:n(1071),purchases:n(1070),books:n(365),book:n(365),videos:n(367),video:n(367),night:n(1065),search:n(1074),home:n(1060),learningPath:n(366),chevron:n(1050),font:n(1056),course:n(1052),rightArrow:n(1072),checkout:n(1049),help:n(1059),account:n(1044),download:n(1055),mute:n(1064),play:n(1066),fullscreen:n(1057),stopwatch:n(1076),calendar:n(1048),project:n(1069),blackboard:n(1045),user:n(1078),creditCard:n(1053),"Web Development":n(1080),Data:n(1054),Programming:n(1068),"Cloud & Networking":n(1051),"View All Technologies":n(1079),"Business & Other":n(1047),"Game Development":n(1058),"IoT & Hardware":n(1061),Mobile:n(1063),Security:n(1075),"Learning Paths":n(366),playlist:n(1067)}}return i(e,[{key:"getIcon",value:function(e){return this.icons[e]}}]),e}();angular.module("PacktUnlimited.services").service("iconService",a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.IconsComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1043),s=r(o);n(669),n(728);var c=function(){function e(t){"ngInject";i(this,e),this.iconService=t,this.icon=""}return e.$inject=["iconService"],a(e,[{key:"$onInit",value:function(){this.icon=this.iconService.getIcon(this.iconName)}}]),e}();t.IconsComponent={template:s.default,bindings:{iconName:"@"},controller:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1081),a=r(i);t.default={template:a.default,bindings:{text:"<"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LibraryProductComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1082),s=r(o),c=function(){function e(t,n){"ngInject";i(this,e),this.$filter=t,this.configService=n}return e.$inject=["$filter","configService"],a(e,[{key:"$onInit",value:function(){this.title=this.product.title,this.imagePath=this.configService.getCoverImage(this.product.isbn13),this.productHref=this.product.lastReadPath?this.product.lastReadPath:this.buildProductHref(this.product)}},{key:"buildProductHref",value:function(e){var t=this.$filter("trim_last");return this.configService.baseUrl+"/"+t(e.type)+"/"+e.category+"/"+e.isbn13}}]),e}();t.LibraryProductComponent={template:s.default,bindings:{product:"<"},controller:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionUpgradeModalComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1083),s=r(o),c=function(){function e(t,n,r){"ngInject";i(this,e),this.$rootScope=t,this.$location=n,this.configService=r}return e.$inject=["$rootScope","$location","configService"],a(e,[{key:"upgradeSubscription",value:function(){this.closeModal(),this.hasLegacyPayment?(this.$rootScope.isUpgradingSubsWithLegacyPayment=!0,this.$rootScope.upgradingLegacySubsInfo={currentSubsId:this.currentSubsId,upgradeToSubsRatePlanId:this.upgradeToSubs.ratePlanId},this.$location.path(this.configService.getPath("cardDetails"))):this.onUpgrade()}},{key:"closeModal",value:function(){$("#subscriptionUpgradeModal").modal("toggle")}}]),e}();t.SubscriptionUpgradeModalComponent={template:s.default,bindings:{currentSubsId:"<",upgradeToSubs:"<",subscription:"<",hasLegacyPayment:"<",onUpgrade:"&"},controller:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MainNavComponent=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1084),c=r(s),u=/@(packt\.com|packtpub\.com)$/i,l=function(){function e(t,n,r,i,o,s,c,u,l,d,f,h,p,v,g,m,y){"ngInject";var b=this;a(this,e),this.authService=t,this.cacheService=r,this.configService=n,this.$rootScope=i,this.$timeout=o,this.$location=s,this.$route=c,this.$element=u,this.$window=l,this.cdnUrl=function(e){return n.cdnUrl(e)},this.productService=d,this.utilitiesService=f,this.httpService=h,this.userService=p,this.navigationService=v,this.analyticsService=g,this.b2bService=m,this.featureFlagsService=y,this.baseUrl="",this.accountPortalUrl="https://account.packtpub.com",this.b2bPortalUrl="https://business.packtpub.com",i.mainMenuOpen=!1,this.isNewUsersService=!0,this.mainOpen=!1,this.searchOpen=!1,this.accountOpen=!1,this.overlayOpen=!1,this.b2bRole="",this.b2bEnabled=y.getFlagStatus("b2b"),this.Submenus={"Web Development":!0,Data:!1,Programming:!1,"Cloud & Networking":!1,all:!1},this.subMenuTechnologies={"Web Development":{Books:[{name:"JavaScript"},{name:"Angular"},{name:"React"},{name:"Node.js"},{name:"Django"}],Videos:[{name:"React"},{name:"Angular"},{name:"Vue"},{name:"Flask"},{name:"Node.js"}],Paths:[{name:"Getting Started with JavaScript",url:"getting-started-with-javascript"},{name:"Getting Started with Angular",url:"getting-started-with-angular"},{name:"Getting Started with React",url:"getting-started-with-react"}]},Data:{Books:[{name:"Python"},{name:"Data Science"},{name:"Machine Learning"},{name:"Big Data"},{name:"R"}],Videos:[{name:"Python"},{name:"TensorFlow"},{name:"Machine Learning"},{name:"Deep Learning"},{name:"Data Science"}],Paths:[{name:"Getting Started with Python Data Science",url:"getting-started-with-python-data-science"},{name:"Getting Started with Python Machine Learning",url:"getting-started-with-python-machine-learning"},{name:"Getting Started with TensorFlow",url:"getting-started-with-tensorflow"}]},Programming:{Books:[{name:"Python"},{name:"Go"},{name:"Java"},{name:"Android"},{name:"C#"}],Videos:[{name:"Python"},{name:"Java"},{name:"Flutter"},{name:"Spring"},{name:"Git"}],Paths:[{name:"Getting Started with Python",url:"getting-started-with-python"},{name:"Improving your Python Skills",url:"improving-your-python-skills"},{name:"Getting Started with Go",url:"getting-started-with-go"}]},"Cloud & Networking":{Books:[{name:"Docker"},{name:"Kubernetes"},{name:"Ansible"},{name:"AWS"},{name:"Linux"}],Videos:[{name:"Docker"},{name:"AWS"},{name:"Kubernetes"},{name:"Linux"},{name:"Azure"}],Paths:[{name:"Getting Started with AWS",url:"getting-started-with-aws"},{name:"Getting Started with Azure",url:"getting-started-with-azure"},{name:"Getting Started with Linux",url:"getting-started-with-linux"}]}},this.viewAllTechnologies=[{name:"Web Development"},{name:"Programming"},{name:"Security"},{name:"Mobile"},{name:"IoT & Hardware"},{name:"Data"},{name:"Cloud & Networking"},{name:"Game Development"},{name:"Business & Other"}],this.productTypes=[{name:"Books"},{name:"Videos"}],this.isLoggedIn=this.authService.hasJwtAuth(),this.data={lastViewedProducts:[]},i.$on("user:authenticated",function(){b.getLastViewed(),b.isLoggedIn=b.authService.hasJwtAuth(),b.setInternalUser()}),i.$on("user:logout",function(){b.resetLastViewedProducts(),b.b2bRole="",b.isLoggedIn=!1,b.toggleCollapse(),b.setInternalUser()}),i.$on("content:viewed",function(e,t){return b.updateRecentListWhileInContent(t)}),i.$on("mainnav:open",function(e,t){b.inCheckout=t&&t.isInCheckout,b.b2bEnabled&&b.getB2bRole(),b.show()}),this.isLoggedIn&&this.getLastViewed(),this.windowScroll(),this.setInternalUser()}return e.$inject=["authService","configService","cacheService","$rootScope","$timeout","$location","$route","$element","$window","productService","utilitiesService","httpService","userService","navigationService","analyticsService","b2bService","featureFlagsService"],o(e,[{key:"setInternalUser",value:function(){var e=this;return this.authService.hasJwtAuth()||this.$timeout(function(){e.internalUser=!1,e.$rootScope.internalUser=!1}),this.userService.getUserDetails().then(function(t){var n=t.mail;u.test(n)?e.$timeout(function(){e.internalUser=!0,e.$rootScope.internalUser=!0}):e.$timeout(function(){e.internalUser=!1,e.$rootScope.internalUser=!1})}).catch(function(t){return e.log.error(t)})}},{key:"windowScroll",value:function(){var e=this,t=0,n=function(){var n=e.$window,r=n.scrollY,i=n.innerHeight;if(!(r>document.body.scrollHeight-i)){var a=r>t;r>e.$element[0].children[0].clientHeight&&a&&e.$route.current.$$route&&e.$route.current.$$route.pageType&&"product"===e.$route.current.$$route.pageType&&e.hide(),a||e.show(),t=r+(a?0:1)}};this.$window.addEventListener("scroll",n)}},{key:"getLastViewed",value:function(){var e=this;this.productService.getLastReadProducts(6,0).then(function(t){t&&(t.forEach(function(t){t.title=e.utilitiesService.removeTag(t.title)}),e.data.lastViewedProducts=t||[])})}},{key:"getB2bRole",value:function(){var e=this;this.b2bService.getB2bRolesAndSubjects().then(function(t){if(t&&t[0]&&t[0].identifier){e.b2bRole=t[0].identifier;var n=t[0].subjects.accounts[0],r=t[0].subjects.teams[0];e.b2bOrganisationDetailsUrl="https://business.packtpub.com/accounts/"+n+"/details",e.b2bUserManagementUrl="https://business.packtpub.com/accounts/"+n+"/teams/"+r}})}},{key:"redirectToStore",value:function(e){e.preventDefault(),this.$window.open(this.getStoreUrl(),"_blank")}},{key:"getStoreUrl",value:function(){return this.configService.getPacktUrl()+"/all"}},{key:"resetLastViewedProducts",value:function(){this.data.lastViewedProducts=[]}},{key:"updateRecentListWhileInContent",value:function(e){var t=Object.assign({},e);if(t.title=this.utilitiesService.removeTag(e.title),this.data.lastViewedProducts.length)if(this.data.lastViewedProducts[0].title===t.title)this.data.lastViewedProducts[0].lastReadPath=t.lastReadPath;else{var n=this.data.lastViewedProducts.filter(function(e){return e.title!==t.title});this.data.lastViewedProducts=[t].concat(i(n)).slice(0,6)}else this.data.lastViewedProducts=[t]}},{key:"initiateSearch",value:function(e,t){e.preventDefault(),document.activeElement.blur();var n=this.configService.getPath("search");if(this.$location.path()===n)return this.$rootScope.$emit("search",{searchValue:t});this.$location.path(n).search({query:t}),this.toggleCollapse()}},{key:"isVisible",value:function(){return"login"!==this.$rootScope.currentPage&&"create-account"!==this.$rootScope.currentPage&&"password-reset"!==this.$rootScope.currentPage}},{key:"baseHref",value:function(e){return this.configService.getPath(e)}},{key:"navigateTo",value:function(e,t){if(!this.$rootScope.isOffline||"downloads"===e){var n=t?e:this.baseHref(e);this.toggleCollapse(),this.$location.url(n)}}},{key:"toggleCollapse",value:function(){this.overlayOpen=!1,this.mainOpen=!1,this.searchOpen=!1,this.accountOpen=!1}},{key:"isCurrentLocation",value:function(e){var t=this.configService.getPath(e).replace(/^#!|\/$/g,"");return this.$location.path().replace(/^#!|\/$/g,"")===t}},{key:"hide",value:function(){this.$element.addClass("out"),$(".toggle-nav").addClass("nav-out"),$("#sidebar-wrapper").addClass("nav-out")}},{key:"show",value:function(){this.$element.removeClass("out"),$(".toggle-nav").removeClass("nav-out"),$("#sidebar-wrapper").removeClass("nav-out")}},{key:"isFirstLevelPage",value:function(){return this.isCurrentLocation("newSaved")||this.isCurrentLocation("newBookmarks")||this.isCurrentLocation("newRewards")||this.isCurrentLocation("newPurchases")||this.isCurrentLocation("history")||this.isCurrentLocation("booksAndVideos")||this.isCurrentLocation("learningPaths")||this.isCurrentLocation("projects")||this.isCurrentLocation("downloads")||this.isCurrentLocation("search")||this.isCurrentLocation("myAccount")||this.isCurrentLocation("help")||this.isCurrentLocation("playlists")}},{key:"canGoBack",value:function(){return!1}},{key:"goHome",value:function(){var e="home";if(this.$rootScope.isOffline)return void this.navigateTo("downloads");this.navigateTo(e)}},{key:"goBackToMainAppPage",value:function(){this.$rootScope.isOffline?this.navigateTo("downloads"):this.goHome()}},{key:"goBack",value:function(){this.isFirstLevelPage()?this.goBackToMainAppPage():this.$window.history.back(),this.toggleCollapse()}},{key:"openDropdownMobile",value:function(e){if(this[e])this[e]=!1,this.overlayOpen=!1;else{if(this.mainOpen=!1,this.searchOpen=!1,this.accountOpen=!1,!e)return void(this.overlayOpen=!1);this[e]=!0,this.overlayOpen=!0}}},{key:"handleLogout",value:function(e){var t=this;e.preventDefault(),this.analyticsService.addLogoutEvent().finally(function(){t.userService.logout()})}},{key:"constructHref",value:function(e,t,n){var r=void 0;switch(t){case"Books":r="Book";break;case"Videos":r="Video";break;case"Paths":r="Learning Path";break;case"Projects":r="Project";break;default:r=""}var i=["flutter","django","android"],a=encodeURIComponent(e).toLocaleLowerCase();return i.includes(a)&&(n=""),this.configService.getPath("search")+"?released=Available"+(e?"&query="+encodeURIComponent(e):"")+(t?"&products="+encodeURIComponent(r):"")+(n?"&category="+encodeURIComponent(n):"")}},{key:"constructLearningPathHref",value:function(e){return this.configService.getPath("learningPaths")+"/"+e}},{key:"showSubmenu",value:function(e,t){var n=this;Object.keys(this.Submenus).forEach(function(e){n.Submenus[e]=!1}),this.Submenus[t]=!0,e.stopPropagation()}}]),e}();t.MainNavComponent={template:c.default,controller:l}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ProductSideBarComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(354),s=(r(o),n(1085)),c=r(s),u=function(){function e(t,n,r,a,o,s,c,u,l,d,f,h,p){"ngInject";function v(e,t){for(var n=t.parentNode;n;){if(n===e)return!0;n=n.parentNode}return!1}var g=this;i(this,e),this.searchResults=[],this.showSearchResults=!1,this.loading=!1,this.bookService=t,this.$rootScope=n,this.$element=r,this.$location=a,this.navigationService=o,this.videoService=s,this.configService=c,this.fileService=u,this.utilitiesService=l,this.cacheService=p,this.isPrerender=d.isPrerender(),this.analyticsService=f,this.analyticsStack={},this.searchValue="",this.log=h.create("packt:controllers:product-sidebar"),this.convertTagToBadge=this.utilitiesService.convertTagToBadge,this.$rootScope.$on("sidebar:close",function(){g.$element.removeClass("open"),$("body").removeClass("sidebar-open"),g.$rootScope.showSideBarOverlay=!1}),this.$rootScope.$on("sidebar:open",function(){g.$element.addClass("open"),$("body").addClass("sidebar-open"),g.$rootScope.showSideBarOverlay=!0});var m=document.querySelector(".sidebar");angular.element(m).bind("scroll",function(e){g.$rootScope.sidebarScroll=e.target.scrollTop,g.$rootScope.sidebarScrollProduct=g.isbn}),$(document).on("touchmove",function(e){var t=document.getElementById("sidebar-wrapper");document.body.classList.contains("sidebar-open")&&!v(t,e.target)&&e.preventDefault()})}return e.$inject=["bookService","$rootScope","$element","$location","navigationService","videoService","configService","fileService","utilitiesService","prerenderReadyService","analyticsService","logManager","cacheService"],a(e,[{key:"searchTitle",value:function(e,t){var n=this;"function"==typeof this.onSearch&&this.onSearch(t),this.loading=!0,this.noResults=!1,this.searchValue=t,this.log.debug("searchTitle()",t),this.bookService.searchProductContent(this.isbn,t).then(function(e){var t=[];n.sectionMap||(n.sectionMap=n.bookService.generateSectionMap(n.metaData.tableOfContents,!0)),e.forEach(function(e){n.sectionMap[e.location]&&(angular.extend(e,n.sectionMap[e.location]),t.push(e))}),t.length>0?(n.showSearchResults=!0,n.searchResults=t):(n.showSearchResults=!1,n.noResults=!0)}).finally(function(){n.loading=!1}),this.analyticsStack={productId:this.isbn,query:t},this.analyticsService.addEvent("in-content-search",this.analyticsStack)}},{key:"searchLibrary",value:function(e){e.preventDefault();var t=this.configService.getPath("search");this.$location.path(t).search({query:this.searchValue})}},{key:"cancelSearchTitle",value:function(){this.searchValue="",this.onCancelSearch&&"function"==typeof this.onCancelSearch&&this.onCancelSearch(),this.showSearchResults=!1}},{key:"getSortedSearchResults",value:function(e){return e.sort(function(e,t){return e.location<t.location?-1:e.location>t.location?1:0})}},{key:"goHome",value:function(e){e.preventDefault(),window.innerWidth<1301&&this.$element.hasClass("open")&&document.body.classList.remove("sidebar-open"),this.$location.path(this.productBaseUrl)}},{key:"getCdnUrl",value:function(e){return this.configService.cdnUrl(e)}},{key:"$onInit",value:function(){var e=this;if(this.searchValue=this.searchText,this.searchValue&&this.searchTitle(null,this.searchValue),this.navigate=function(t,n,r,i){window.innerWidth<1301&&(e.$rootScope.showSideBarOverlay=!1,e.toggle()),"function"==typeof e.onNavigate&&e.onNavigate(t,n,r,i,e.searchValue)},this.sidebarBackButton=function(t){t.preventDefault();var n=e.navigationService.getPreviousPageForProductSidebar(),r=""+e.configService.baseUrl+n;e.videoService.resetPlayer(),e.$location.url(r)},this.toggle=function(){e.$element.toggleClass("open"),document.body.classList.toggle("sidebar-open"),e.$rootScope.showSideBarOverlay=e.$element.hasClass("open");var t=e.cacheService.getCachedItem("generalUserRelatedCache","sidebar-status")||{};t[e.isbn]=e.$element.hasClass("open"),e.cacheService.setCachedItem("generalUserRelatedCache","sidebar-status",t)},window.innerWidth>=1301){var t=this.cacheService.getCachedItem("generalUserRelatedCache","sidebar-status");t&&0==t[this.isbn]||this.$rootScope.$emit("sidebar:open")}}},{key:"$onChanges",value:function(e){e&&e.productBaseUrl&&e.productBaseUrl.currentValue&&(this.productBaseUrl=e.productBaseUrl.currentValue)}}]),e}();t.ProductSideBarComponent={bindings:{isbn:"<",productType:"<",metaData:"<",productBaseUrl:"<",currentSection:"=",currentChapter:"=",onNavigate:"<",bookmarks:"=",isEarlyAccessProduct:"<",hasEarlyAccessEntitlement:"<",searchText:"<",onSearch:"<",onCancelSearch:"<"},template:c.default,controller:u}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.TabPaneComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1086),s=r(o),c=function(){function e(){i(this,e)}return a(e,[{key:"$onInit",value:function(){this.tabsCtrl.addPane(this)}}]),e}();t.TabPaneComponent={transclude:!0,template:s.default,require:{tabsCtrl:"^tabs"},bindings:{tabTitle:"@",tabIcon:"@"},controller:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.TabsComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1087),s=r(o),c=function(){function e(){i(this,e),this.panes=[]}return a(e,[{key:"select",value:function(e){angular.forEach(this.panes,function(e){e.selected=!1}),e.selected=!0}},{key:"addPane",value:function(e){0===this.panes.length&&this.select(e),this.panes.push(e)}}]),e}();t.TabsComponent={transclude:!0,template:s.default,bindings:{tabsClass:"@",tabsId:"@"},controller:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SideBarOverlayComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1088),s=r(o),c=function(){function e(t){"ngInject";i(this,e),this.$rootScope=t}return e.$inject=["$rootScope"],a(e,[{key:"closeSidebar",value:function(e){e.preventDefault(),this.$rootScope.$emit("sidebar:close")}}]),e}();t.SideBarOverlayComponent={bindings:{show:"<"},template:s.default,controller:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1089),c=r(s),u=function(){function e(t,n,r,a,o,s){"ngInject";i(this,e),this.configService=t,this.userService=n,this.authService=r,this.analyticsService=a,this.$q=o,this.b2bUsersService=s}return e.$inject=["configService","userService","authService","analyticsService","$q","b2bUsersService"],o(e,[{key:"$onInit",value:function(){var e=this;if(void 0===this.visibleWhenLoggedOut&&(this.visibleWhenLoggedOut=!0),this.hasSelect)if(this.selectOptions&&this.selectOptions.length>0){var t=a(this.selectOptions,1);this.selectSelectedOption=t[0]}else this.hasSelect=!1;if(this.backgroundImageName){var n=this.configService.cdnUrl(this.backgroundImageName);this.backgroundImageStyle={"background-image":"url("+n+")","background-position":"bottom"}}this.isLoggedIn=this.authService.hasJwtAuth(),this.alwaysHideUpsell?this.showSubscriptionUpsell=!1:this.isLoggedIn?this.$q.all([this.userService.userIsSubscribed(),this.b2bUsersService.isCustomerAdmin()]).then(function(t){var n=a(t,2),r=n[0],i=n[1];e.showSubscriptionUpsell=!i&&!r,e.showB2bContentUnlockUpsell=i&&!r}):this.showSubscriptionUpsell=!0,this.isLoggedIn||this.visibleWhenLoggedOut||(this.showSubscriptionUpsell=!1,this.pageIntroBackgroundImageName=!1,this.backgroundImageStyle=!1)}},{key:"$onChanges",value:function(e){if(e&&e.selectOptions&&e.selectOptions.currentValue&&e.selectOptions.currentValue.length>0){this.selectOptions=e.selectOptions.currentValue;var t=a(this.selectOptions,1);this.selectSelectedOption=t[0],this.hasSelect=!0}}},{key:"selectChanged",value:function(e){this.onSelectChange({selectValue:e})}},{key:"submitSearchForm",value:function(e){this.onSearch({event:e,searchValue:this.searchText}),this.analyticsService.addIntercomMetadata({used_library_search:!0,search_last_query:this.searchText}),this.analyticsService.addIntercomEvent("peformed_library_search",{query:this.searchText})}},{key:"preventSearchSubmit",value:function(e){e.preventDefault()}},{key:"searchQueryChanged",value:function(){this.onSearch({searchValue:this.searchText})}},{key:"changePage",value:function(e){this.onChangePage({pageNumber:e})}},{key:"changeLimit",value:function(e){this.onChangeLimit({pageLimit:e})}}]),e}(),l={template:c.default,bindings:{pageTitle:"<",pageSubtitle:"<",pageDescription:"<",backgroundImageName:"<",hasSelect:"<",selectLabel:"@",visibleWhenLoggedOut:"<",selectOptions:"<",onSelectChange:"&",hasSearch:"<",triggerSearchOnSubmit:"<",searchPlaceholder:"@",onSearch:"&",searchFullLength:"<",hasCta:"<",ctaText:"@",ctaHref:"<",cssClasses:"@",hasPagination:"<",totalNumberOfPages:"<",currentPage:"<",currentLimit:"<",pagesArray:"<",onChangePage:"&",onChangeLimit:"&",hasLink:"<",linkText:"<",linkHref:"<",alwaysHideUpsell:"<"},controller:u};t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1090),s=r(o),c=function(){function e(){"ngInject";i(this,e)}return a(e,[{key:"changePage",value:function(e,t){e.preventDefault(),t!==this.currentPage&&(scroll(0,0),this.onChangePage({pageNumber:t}))}},{key:"changeLimit",value:function(e,t){e.preventDefault(),t!==this.currentLimit&&(scroll(0,0),this.onChangeLimit({pageLimit:t}))}}]),e}(),u={template:s.default,bindings:{totalNumberOfPages:"<",currentPage:"<",currentLimit:"<",pagesArray:"<",onChangePage:"&",onChangeLimit:"&"},controller:c};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1091),s=r(o),c=function(){function e(t){"ngInject";i(this,e),this.playlistsService=t}return e.$inject=["playlistsService"],a(e,[{key:"$onInit",value:function(){this.createNewPlaylistTitle=""}},{key:"createNewPlaylist",value:function(){this.createNewPlaylistTitle&&this.onConfirm({name:this.createNewPlaylistTitle}),this.closeModal()}},{key:"closeModal",value:function(){this.createNewPlaylistTitle="",this.playlistsService.createModal.hide()}}]),e}(),u={template:s.default,bindings:{onConfirm:"&"},controller:c};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1092),s=r(o),c=function(){function e(t,n){"ngInject";i(this,e),this.$timeout=t,this.playlistsService=n}return e.$inject=["$timeout","playlistsService"],a(e,[{key:"deletePlaylist",value:function(e){e&&e.preventDefault(),this.onConfirm(),this.closeModal()}},{key:"closeModal",value:function(){this.playlistsService.deleteModal.hide()}}]),e}(),u={template:s.default,bindings:{playlistName:"<",onConfirm:"&"},controller:c};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1093),s=r(o),c=function(){function e(t){"ngInject";i(this,e),this.playlistsService=t}return e.$inject=["playlistsService"],a(e,[{key:"confirm",value:function(e){e&&e.preventDefault(),this.onConfirm()}},{key:"closeModal",value:function(e){e&&e.preventDefault(),this.playlistsService.removeProductModal.hide()}}]),e}();t.default={template:s.default,bindings:{productTitle:"@",playlistName:"@",onConfirm:"&"},controller:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1094),s=r(o);n(729);var c=function(){function e(t,n,r){"ngInject";i(this,e),this.$timeout=t,this.playlistsService=n,this.log=r.create("packt:playlists:rename-playlist-modal")}return e.$inject=["$timeout","playlistsService","logManager"],a(e,[{key:"$onInit",value:function(){this.newPlaylistTitle=""}},{key:"$onChanges",value:function(e){var t=this;this.log.debug("changes:",e),e.playlistName&&this.$timeout(function(){t.log.debug("Changing to",e.playlistName.currentValue),t.newPlaylistTitle=e.playlistName.currentValue})}},{key:"renamePlaylistTitle",value:function(e){e.preventDefault(),this.newPlaylistTitle&&this.onConfirm({newName:this.newPlaylistTitle}),this.closeModal()}},{key:"closeModal",value:function(){this.playlistsService.renameModal.hide()}}]),e}(),u={bindings:{playlistName:"<",onConfirm:"&"},template:s.default,controller:c};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1095),o=r(a);n(686);var s=function e(t){"ngInject";i(this,e),this.service=t,this.service.reset()};s.$inject=["prerenderReadyService"];var c={template:o.default,controller:s};t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=1e3,o=function(){function e(t,n){"ngInject";r(this,e),this.$window=t,this.log=n.create("packt:prerender-service"),this.log.debug("Debounce Rate:",1e3),this.reset()}return e.$inject=["$window","logManager"],i(e,[{key:"reset",value:function(){var e=this;this.log.info("Reset"),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.$window.prerenderReady=!1,this.timeout=setTimeout(function(){e.ready()},a)}},{key:"ready",value:function(){this.log.info("Ready"),this.$window.prerenderReady=!0}},{key:"isPrerender",value:function(){var e=this.$window.navigator.userAgent;return e&&-1!==e.indexOf("Prerender")}}]),e}();o.$inject=["$window","logManager"],t.default=o,angular.module("PacktUnlimited.services").service("prerenderReadyService",o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1096),s=r(o),c=function(){function e(t,n,r,a,o){"ngInject";i(this,e),this.$filter=t,this.productService=n,this.utilitiesService=r,this.configService=a,this.analyticsService=o}return e.$inject=["$filter","productService","utilitiesService","configService","analyticsService"],a(e,[{key:"$onInit",value:function(){this.learningPaths&&this.setLearningPathsList(this.learningPaths)}},{key:"setLearningPathsList",value:function(e){var t=this;this.productList=e.map(function(e){return{id:e.id,title:e.displayName,category:e.category,oneLiner:e.oneLiner,type:"learning-path",imagePath:e.iconUrl,length:e.duration,href:t.configService.baseUrl+"/learning-paths/"+encodeURIComponent(e.name),booksCount:e.booksCount,videosCount:e.videosCount,colorCode:e.colorCode,isItStarted:e.isStarted}})}},{key:"setProductList",value:function(e){var t=this;e.forEach(function(e){var n=t.productService.getProduct(e);n.id=n.isbn13,n.href=t.buildProductHref(n.type,n.category,e),t.addProduct(n)})}},{key:"updateProductList",value:function(e){var t=this;return this.productService.getProductUserData(e,"line").then(function(e){t.productList=t.productList.map(function(n){var r=angular.copy(n),i=r.isbn13;return t.productService.updateProduct(n.isbn13,e[n.isbn13]),r.href=t.buildProductHref(r.type,r.category,i,e[i].lastRead),r.price=e[n.isbn13].price,r.isItStarted=!!e[i].lastRead,r}),t.analyticsService.addProductListImpressionEvent(t.productList,t.listName)})}},{key:"addProduct",value:function(e){this.productList.push(e)}},{key:"buildProductHref",value:function(e,t,n,r){var i=this.$filter("trim_last"),a=this.$filter("format_category_field"),o=r?"/"+r:"",s=this.configService.baseUrl+"/"+i(e)+"/"+a(t)+"/"+n;return this.$filter("canonical_url")(""+s+o)}},{key:"$onChanges",value:function(e){e.isbnList&&e.isbnList.currentValue&&e.isbnList.currentValue.length>0&&(this.productList=[],this.setProductList(this.isbnList),this.updateProductList(this.isbnList))}},{key:"handleProductClick",value:function(e,t){this.analyticsService.addProductListClickEvent(e,this.listName,t)}}]),e}(),u={template:s.default,bindings:{isbnList:"<",learningPaths:"<",listName:"@",hasSidebar:"<",filterByName:"<"},controller:c};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1097),s=r(o),c=function(){function e(t,n,r){"ngInject";i(this,e),this.utilitiesService=t,this.configService=n,this.$location=r}return e.$inject=["utilitiesService","configService","$location"],a(e,[{key:"$onInit",value:function(){this.limitObject={authorLimit:20},this.setProduct(this.product)}},{key:"setTextLength",value:function(e){if(e&&e.length>75){var t=e.match(/^(\b.{0,74})(?=\s)\b/m);return t&&t.length?t[0]+"&hellip;":e.slice(0,74)+"&hellip;"}return e}},{key:"setProduct",value:function(e){switch(this.type=e.type,this.title=this.utilitiesService.convertTagToBadge(this.setTextLength(e.title),e.type),this.oneLiner=this.product.oneLiner,this.imagePath=e.imagePath,this.length=this.utilitiesService.removeHtmlFromString(e.length),this.category=e.category,this.productHref=e.href,this.isItStarted=e.isItStarted,this.pages=e.pages,this.oneLiner&&this.oneLiner.length>100&&(this.oneLiner=this.oneLiner.match(/^(\b.{0,99})(?=\s)\b/m)[0]+"&hellip;"),e.type){case"learning-path":this.id=e.id,this.rootUrl=e.href,this.booksCount=e.booksCount,this.videosCount=e.videosCount,this.colorCode=e.colorCode;break;case"books":case"videos":default:this.id=e.isbn13,this.isbn13=e.isbn13,this.author=e.author,this.available="Available"===e.availability,this.publicationDate=this.utilitiesService.convertDate(e.publicationDate),this.earlyAccess=e.earlyAccess,this.rootUrl="/"+("books"===this.type?"book":"video")+"/"+this.category+"/"+this.isbn13,this.author=this.utilitiesService.truncateText(this.author,this.limitObject.authorLimit)}}}]),e}(),u={template:s.default,bindings:{product:"<value"},controller:c,controllerAs:"productLineViewCtrl"};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1098),s=r(o),c=function(){function e(t,n){"ngInject";i(this,e),this.searchText="",this.analyticsService=t,this.log=n.create("packt:controllers:search")}return e.$inject=["analyticsService","logManager"],a(e,[{key:"clearSearch",value:function(){this.searchText="",this.cancelSearch()}},{key:"monitorChange",value:function(){""===this.searchText&&this.cancelSearch()}},{key:"submitSearch",value:function(e){e.preventDefault(),this.log.debug("submitSearch()",this.searchText),this.onSubmit({event:e,value:this.searchText}),this.analyticsService.addIntercomMetadata({used_title_search:!0}),this.clearSearchAfterSubmit&&(this.searchText="")}},{key:"cancelSearch",value:function(){this.searchText="","function"==typeof this.onCancel&&this.onCancel()}}]),e}();t.SearchComponent={bindings:{placeholder:"@",wrapperClass:"@",clearSearchAfterSubmit:"<",onSubmit:"&",onCancel:"&",searchText:"<",showCancelBtn:"@",showSearchBtn:"@"},template:s.default,controller:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1099),o=r(a),s=function e(t){"ngInject";i(this,e),this.configService=t};s.$inject=["configService"];var c={template:o.default,bindings:{message:"<"},controller:s};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionPaneComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1100),s=r(o),c=function(){function e(t){"ngInject";i(this,e),this.subscriptionService=t}return e.$inject=["subscriptionService"],a(e,[{key:"$onInit",value:function(){this.setRadioList(),this.setFeatureList(),this.setActivePlan(),this.isCurrentPlan="current"===this.pane.id,this.isExclusive="exclusive"===this.pane.id}},{key:"setRadioList",value:function(){var e=this;1!==this.pane.subscriptionList.length&&(this.radioList={id:this.pane.id},this.radioList.options=this.pane.subscriptionList.map(function(t){return{id:t.ratePlanId,name:e.subscriptionService.getSubscriptionTypeName(t.priceInfo.pricingModel),plan:t}}))}},{key:"setFeatureList",value:function(){var e=this;this.featuresList=this.subscriptionService.featuresList.map(function(t){return{id:t.id,name:t.name,isCrossed:-1===t.isAvailableFor.indexOf(e.pane.type)}})}},{key:"setActivePlan",value:function(e){var t=this;if(e)this.activePlan=e;else{var n=this.pane.subscriptionList.findIndex(function(e){return e.pricing.pricingModel===t.subscriptionService.pricingModel.annual.value});this.activePlan=n>=0?this.pane.subscriptionList[n]:this.pane.subscriptionList[0]}this.activePlan.productName=this.activePlan.productName.replace(/mapt\s+/gi,""),this.activeRadioOption=this.activePlan.ratePlanId}},{key:"upgrade",value:function(e){e.preventDefault(),this.onUpgrade({subscription:this.activePlan})}}]),e}();t.SubscriptionPaneComponent={template:s.default,bindings:{pane:"<",onUpgrade:"&"},controller:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1101),o=r(a),s=function e(t,n){"ngInject";var r=this;i(this,e),this.checkoutUrl=t.checkoutUrlMonthlyOffer,this.iconSrc=t.cdnUrl("GCFB-icon.png"),this.showUpsell=!1,n.getMetaData().then(function(e){!0===e.subscription.subscribed&&!0===e.subscription.timedUnlock&&(r.showUpsell=!0)})};s.$inject=["configService","userService"];var c={template:o.default,controller:s};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1102),s=r(o),c=function(){function e(t,n,r,a,o,s,c,u,l,d,f,h){"ngInject";i(this,e),this.configService=r,this.$rootScope=c,this.$location=u,this.$window=l,this.userService=o,this.utilitiesService=s,this.authService=t,this.alertService=n,this.timedUnlockService=a,this.$interval=d,this.log=f.create("packt:timed-unlock"),this.$timeout=h}return e.$inject=["authService","alertService","configService","timedUnlockService","userService","utilitiesService","$rootScope","$location","$window","$interval","logManager","$timeout"],a(e,[{key:"$onInit",value:function(){var e=this;this.log.debug("$onInit fired"),this.timer="00:00:00",this.showTimedUnlock=!0,this.loading=!0,this.baseUrl="",this.canRegister=!1,this.canClaim=!1,this.timedUnlockUser=!1,this.signUpText="remaining",this.currentPage=this.$rootScope.currentPage,this.checkoutUrl=this.configService.checkoutUrlMonthlyOffer,this.termsConditionsUrl=this.configService.termsConditionsUrl,this.isLoggedIn=this.authService.hasJwtAuth(),this.timedUnlockService.checkTimedUnlockActive().then(function(t){return e.endAt=t.data[0].endAt,e.startAt=t.data[0].startAt,e.name=t.data[0].name,e.offerTimer(),e.isLoggedIn?(e.signUpText="left of the",e.userService.getMetaData().then(function(t){!1===t.subscription.subscribed&&!1===t.subscription.freeTrial?(e.canClaim=!0,e.showModal()):!0===t.subscription.timedUnlock?e.timedUnlockUser=!0:e.showTimedUnlock=!1})):(e.signUpText="to join the",e.canRegister=!0,e.showModal()),new Date(e.endAt.replace("T00:00:00.000Z","T23:59:59.999Z")).getTime()-(new Date).getTime()>=3456e5&&(e.timer="",e.signUpText=""),e.utilitiesService.getCurrencyAndCountryFromIp()}).then(function(t){e.currency=e.utilitiesService.getCurrencySymbol(t.currency),e.priceValue="INR"===t.currency?400:9.99}).catch(function(){e.showTimedUnlock=!1})}},{key:"showModal",value:function(){var e=this;this.$timeout(function(){if(e.timedUnlockService.getShowModal()){e.log.debug("Showing modal");var t=$("#timed-unlock-modal");t.length>0?(e.log.debug("$modal found"),t.modal({backdrop:"static",keyboard:!1}),delete e.shouldShowModal):(e.log.debug("$modal not found"),e.shouldShowModal=!0)}})}},{key:"$postLink",value:function(){this.log.debug("$postLink fired, showing modal"),this.shouldShowModal&&this.showModal()}},{key:"navigateToRegister",value:function(){this.$location.url(this.baseUrl+"/register")}},{key:"claimTimedUnlock",value:function(){var e=this;this.loading=!0,this.timedUnlockService.claimTimedUnlock().then(function(){$("#timed-unlock-modal").modal("hide"),e.loading=!1,$("#success-timed-unlock-claim-modal").modal({backdrop:"static",keyboard:!1})}).then(function(){return e.timedUnlockService.autoLogin()}).then(function(){e.$window.location.reload()}).catch(function(){e.alertService.addAlert("Something went wrong while claiming the offer, Please try again..."),$("#timed-unlock-modal").modal("hide")})}},{key:"offerTimer",value:function(){var e=this;this.calculateTimer(),this.loading=!1,this.$interval(function(){return e.calculateTimer()},1e3)}},{key:"calculateTimer",value:function(){var e=new Date(this.endAt.replace("T00:00:00.000Z","T23:59:59.999Z")),t=new Date,n=e.getTime()-t.getTime();if(!(n>=3456e5))if(n<1)this.showTimedUnlock=!1;else{var r=Math.floor(n/36e5),i=Math.floor(n%36e5/6e4),a=Math.floor(n%6e4/1e3);r=r<10?"0"+r:r,i=i<10?"0"+i:i,a=a<10?"0"+a:a,this.timer=r+":"+i+":"+a}}}]),e}(),u={template:s.default,controller:c};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1103),s=r(o),c=function(){function e(t,n){"ngInject";i(this,e),this.configService=t,this.$rootScope=n}return e.$inject=["configService","$rootScope"],a(e,[{key:"$onInit",value:function(){var e=this;this.isProductPage="product"===this.$rootScope.currentPage,this.checkoutPathLink=this.configService.checkoutUrl,this.findOutMoreLink="https://subscribe.packtpub.com/",this.cdnUrl=function(t){return e.configService.cdnUrl(t)}}}]),e}(),u={template:s.default,controller:c};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmPasswordPopupComponent=void 0;var i=n(1104),a=r(i);t.ConfirmPasswordPopupComponent={template:a.default,bindings:{rules:"<"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordValidationPopupComponent=void 0;var i=n(1105),a=r(i);t.PasswordValidationPopupComponent={template:a.default,bindings:{rules:"<"}}},function(e,t,n){"use strict";function r(e,t){"ngInject";var n=function(t,n){var r=n.featureId;return e.getFlagStatus(r)?t[0].classList.add(r):t[0].classList.remove(r)};return{restrict:"A",compile:function(){return function(e,r,i){t.$on("featureUpdated",function(){return n(r,i)}),n(r,i)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.$inject=["featureFlagsService","$rootScope"]},function(e,t,n){"use strict";function r(e,t){"ngInject";var n=function(t,n){var r=e.getFlagStatus(n.featureId);return("true"===n.featureInverted?!r:r)?t[0].classList.remove("ng-hide"):t[0].classList.add("ng-hide")};return{restrict:"AE",compile:function(){return function(e,r,i){t.$on("featureUpdated",function(){return n(r,i)}),n(r,i)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.$inject=["featureFlagsService","$rootScope"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(e){Array.isArray(e)&&0!==e.length?(e.forEach(function(e){if(void 0===e.id||void 0===e.active)throw new Error('The feature flags array is not valid. Make sure each feature is like [{ id: "feature-id", active: true|false }]')}),this.featureFlagsList=e):this.featureFlagsList=[]}},{key:"$get",value:["$q","$rootScope",function(e,t){"ngInject";var n=this.featureFlagsList,r=function(e){return n.find(function(t){return t.id===e})},i=function(e){var t=r(e);return!!t&&t.active};return{getFlagStatus:i,setFlagStatus:function(e,n){var i=r(e);return!(!i||"boolean"!=typeof n)&&(i.active=n,t.$broadcast("featureUpdated",e),!0)},getAllFlags:function(){return n},guardRoute:function(t){return e(function(e,n){return(Array.isArray(t)?t:[t]).every(function(e){return!0===i(e)})?e("All feature flags are active."):n("Not all feature flags are active.")})}}}]}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o,s,c,u,l,d,f,h,p,v){"ngInject";r(this,e),this.learningPathsService=c,this.authService=u,this.$routeParams=n,this.utilitiesService=d,this.$rootScope=t,this.$q=i,this.productService=l,this.$location=o,this.$filter=s,this.$window=a,this.configService=f,this.dialogsService=h,this.userService=p,this.analyticsService=v,this.convertTagToBadge=this.utilitiesService.convertTagToBadge,this.init()}return e.$inject=["$rootScope","$routeParams","$q","$window","$location","$filter","learningPathsService","authService","productService","utilitiesService","configService","dialogsService","userService","analyticsService"],i(e,[{key:"init",value:function(){this.utilitiesService.unsetNightmode(),this.$rootScope.currentPage="learning-path-details",this.loadingMsg="Loading learning paths...",this.learningPathsListingLink=this.configService.getPath("learningPaths"),this.loading={learningPathDetails:!0,products:!0},this.errors={learningPathDetails:!1,products:!1},this.isLoggedIn=this.authService.hasJwtAuth(),this.loadPageContent()}},{key:"loadPageContent",value:function(){var e=this;return this.getLearningPath(this.$routeParams.learningPathName).then(function(t){return e.learningPath=t,e.getProductsData(t.products)}).then(function(t){e.products=t}).catch(function(t){e.loading.learningPathDetails=!1,e.loading.products=!1}).finally(function(){e.sendPageMetadata()})}},{key:"getLearningPath",value:function(e){var t=this;return this.loadingMsg="Loading learning paths...",this.analyticsService.addIntercomMetadata({viewed_unique_learning_path:!0}),this.analyticsService.addIntercomEvent("viewed-unique-learning-path",{name:e}),this.learningPathsService.getLearningPathByName(e).then(function(e){if(!e)throw new Error("Fetching learning path failed.");return t.loading.learningPathDetails=!1,e}).catch(function(e){throw t.errors.learningPathDetails=!0,new Error("Fetching learning path failed.")})}},{key:"getProductsData",value:function(e){var t=this;return this.loadingMsg="Loading products...",this.learningPathsService.getLearningPathProductsData(e).then(function(e){if(!e)throw new Error("Fetching products data failed.");return t.loading.products=!1,e}).catch(function(e){throw t.errors.products=!0,new Error("Fetching products data failed.")})}},{key:"navigateToProduct",value:function(e,t){e.preventDefault(),this.analyticsService.addIntercomMetadata({learning_path_url:this.$location.path(),learning_path_date_at:Date.now()/1e3,learning_path_name:this.learningPath.displayName}),this.analyticsService.addIntercomEvent("viewed-learning-path",{learning_path_url:this.$location.path(),learning_path_date_at:Date.now()/1e3,learning_path_name:this.learningPath.displayName}),this.learningPathsService.updateUsersLastViewedLearningPath(this.learningPath.id).catch(function(e){return!1}),this.$location.path(t)}},{key:"navigateToLearningPathsHome",value:function(e){e.preventDefault(),this.$location.path(this.learningPathsListingLink)}},{key:"sendPageMetadata",value:function(){var e=encodeURIComponent(this.$routeParams.learningPathName),t=this.learningPath?this.learningPath.displayName+" | Packt Subscription":this.$filter("titleCase")(this.$routeParams.learningPathName),n={pageTitle:t,canonicalUrl:"/learning-paths/"+e,description:this.learningPath&&this.learningPath.oneLiner,productType:"learning-path"};this.$rootScope.$emit("metadata",{pageType:"learning-path-details",metadata:n})}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i,a,o,s,c){"ngInject";r(this,e),this.learningPathsService=t,this.utilitiesService=n,this.$rootScope=i,this.$q=a,this.$location=o,this.$anchorScroll=s,this.analyticsService=c,this.init()}return e.$inject=["learningPathsService","utilitiesService","$rootScope","$q","$location","$anchorScroll","analyticsService"],a(e,[{key:"init",value:function(){this.utilitiesService.unsetNightmode(),this.$rootScope.currentPage="learning-paths-list",this.pageIntroTitle="Learning Paths",this.pageIntroSubtitle="Learn new skills on the latest tech, improve existing<br />ones, or master technologies from Python and<br />Angular to R and .NET with Learning Paths.",this.pageIntroBackgroundImageName="HG1200xVariable-LP.png",this.loadingMsg="Loading learning paths...",this.loading=!0,this.loadPageContent(),this.analyticsService.addIntercomMetadata({viewed_learning_paths:!0}),this.analyticsService.addIntercomEvent("viewed-learning-paths-list")}},{key:"loadPageContent",value:function(){var e=this;this.$q.all([this.getLearningPathsSummary(),this.getUsersLearningPaths()]).then(function(t){var n=i(t,2),r=n[0],a=n[1];if(a&&a.length>0){var o=a.map(function(e){return e.id});r.forEach(function(e){e.learningPaths.forEach(function(e){e.isStarted=o.indexOf(e.id)>-1})}),e.usersLearningPaths=a}else e.usersLearningPaths=[];e.setLearningPathsSummary(r),e.loading=!1}).catch(function(t){e.loading=!1})}},{key:"triggerSearch",value:function(e){this.searchModel=e}},{key:"filterCategoriesBy",value:function(e){"all"===e.name?this.filteredCategories=this.categories:this.filteredCategories=this.categories.filter(function(t){return t.name===e.name})}},{key:"getLearningPathsSummary",value:function(){return this.learningPathsService.getLearningPathsSummary()}},{key:"setLearningPathsSummary",value:function(e){this.categories=e,this.filteredCategories=e,this.categoriesSelectOptions=e.map(function(e){return{id:e.id,name:e.name,displayName:e.displayName}}),this.categoriesSelectOptions.unshift({id:"0",name:"all",displayName:"All"})}},{key:"getUsersLearningPaths",value:function(){return this.learningPathsService.getUsersLearningPaths().catch(function(e){return!1})}},{key:"scrollToBottom",value:function(){this.$location.hash("my-learning-paths"),this.$anchorScroll()}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o,s,c){"ngInject";r(this,e),this.httpService=t,this.utilitiesService=n,this.userService=i,this.productService=a,this.$q=o,this.authService=s,this.cacheService=c}return e.$inject=["httpService","utilitiesService","userService","productService","$q","authService","cacheService"],i(e,[{key:"getLearningPathsSummary",value:function(){var e=this;return this.httpService.microserviceRequest("skills","v1","learning-paths/summary","GET",{},!1,{cacheName:"nonUserRelatedCache"}).then(function(t){if(t&&t.data&&t.data.length>0){var n=t.data.filter(function(e){return e.count>0}),r=e.utilitiesService.sortByWeight(n);return r.forEach(function(t){t.learningPaths=e.utilitiesService.sortByWeight(t.learningPaths)}),r}return[]})}},{key:"getLearningPathByName",value:function(e){var t=encodeURIComponent(e);return this.httpService.microserviceRequest("skills","v1","learning-paths/name/"+t,"GET",{},!1,{cacheName:"nonUserRelatedCache"}).then(function(e){if(e&&e.data&&e.data.length>0)return e.data[0];throw new Error("Learning path doesn't exists")})}},{key:"getLearningPathProductsData",value:function(e){var t=this.authService.hasJwtAuth(),n=[this.getProductsSummary(e),this.getProductsMetadata(e)];return t&&(n.push(this.getProductsUserData(e)),n.push(this.getProductsCompletedSectionCount(e))),this.$q.all(n).then(function(n){if(!n||!n.length)return{};var r=n[0]||{},i=n[1]||{},a=t?n[2]:{},o=t?n[3]:{};return e.map(function(e){var t=Object.assign({id:e},r[e],i[e],a[e],o[e]);return t.sectionCount&&t.sectionCompletedCount?t.progress=Math.round(t.sectionCompletedCount/t.sectionCount*100):t.progress=0,t.isCompleted=100===t.progress,t.lastRead&&(t.lastReadUrl=t.baseUrl+"/"+t.lastRead),t})})}},{key:"getProductsSummary",value:function(e){return this.productService.getProductsSummary(e).then(function(t){return e.reduce(function(e,n,r){return e[n]={title:t[r].title,imageUrl:t[r].coverImage,oneLiner:t[r].oneLiner,publicationDate:t[r].publicationDate,duration:t[r].length,type:t[r].type,baseUrl:t[r].baseUrl},t[r].authors&&(e[n].authorsNamesText=t[r].authors.map(function(e){return e.author}).join(", ")),e},{})})}},{key:"getProductsMetadata",value:function(e){var t=this;return this.productService.getProductsMetadata(e).then(function(n){return e.reduce(function(e,r,i){return e[r]={sectionCount:t.productService.getSectionCountFromToc(n[i].tableOfContents)},e},{})})}},{key:"getProductsUserData",value:function(e){return this.productService.getProductUserData(e,"line").then(function(t){return t?e.reduce(function(e,n){return e[n]={lastRead:t[n].lastRead},e},{}):{}})}},{key:"getProductsCompletedSectionCount",value:function(e){return this.userService.getUserCompletedSectionCount(e).then(function(e){return e&&e.results&&e.results.length?e.results.reduce(function(e,t){return e[t.productId]={sectionCompletedCount:t.count},e},{}):{}})}},{key:"getUsersLearningPaths",value:function(){return this.httpService.microserviceRequest("skills","v1","users/me/learning-paths","GET",{},!0,{cacheName:"generalUserRelatedCache",cache404:!0}).then(function(e){if(!e||!e.data)return!1;var t=e.data;return t.forEach(function(e){e.isStarted=!0}),t})}},{key:"updateUsersLastViewedLearningPath",value:function(e){var t=this;return this.httpService.microserviceRequest("skills","v1","users/me/learning-paths/"+e,"PUT",{},!0).then(function(){return t.resetUsersLearningPaths()})}},{key:"resetUsersLearningPaths",value:function(){this.cacheService.deleteCachedItem("generalUserRelatedCache","https://services.packtpub.com/skills-v1/users/me/learning-paths")}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(258),s=r(o),c=function(){function e(t,n,r,a,o,s,c,u,l,d){"ngInject";i(this,e),this.$routeParams=n,this.utilitiesService=s,this.$rootScope=t,this.productService=o,this.$location=a,this.$window=r,this.configService=c,this.dialogsService=u,this.playlistsService=d,this.log=l.create("packt:playlists:details"),this.convertTagToBadge=this.utilitiesService.convertTagToBadge,this.init()}return e.$inject=["$rootScope","$routeParams","$window","$location","productService","utilitiesService","configService","dialogsService","logManager","playlistsService"],a(e,[{key:"init",value:function(){this.playlistId=this.$routeParams.playlistId,this.log.debug("init():",this.playlistId),this.itemToDelete={},this.showSubscriptionUpsell=!1,this.products=[],this.playlist=null,this.utilitiesService.unsetNightmode(),this.$rootScope.currentPage="playlists-details",this.loadingMsg="Loading playlist details...",this.playlistsListingLink=this.configService.getPath("playlists"),this.errors={products:!1},this.getPlaylist()}},{key:"getCtaText",value:function(e,t){return(0,s.default)(e,!1,t)}},{key:"getPlaylist",value:function(){var e=this,t=this.$routeParams.playlistId;this.playlistsService.getPlaylistIndexById(t).then(function(t){e.log.debug("Got Index:",t),e.log.debug("Playlist:",e.playlistsService.playlists[t]),e.playlistIndex=t}).then(function(){e.playlistsService.loadFullProducts(e.playlistIndex)})}},{key:"getProductsData",value:function(e){var t=this;return this.loadingMsg="Loading products...",this.playlistsService.getPlaylistsProductsData(e).then(function(e){if(!e)throw new Error("Fetching products data failed.");return e}).catch(function(){throw t.errors.products=!0,new Error("Fetching products data failed.")})}},{key:"removePlaylistModal",value:function(e){e&&e.preventDefault(),this.playlistsService.deleteModal.show()}},{key:"renamePlaylistModal",value:function(e){e&&e.preventDefault(),this.playlistsService.renameModal.show()}},{key:"showModalToDelItem",value:function(e){this.itemToDelete={id:e.productId,title:e.title},this.playlistsService.removeProductModal.show()}},{key:"deleteItemFromPlaylist",value:function(){var e=this;this.playlistsService.removeProductModal.hide();var t=this.itemToDelete.id;return this.log.debug("Removing",this.itemToDelete,"from",this.playlistId),this.playlistsService.deleteProductFromPlaylist(this.playlistId,t).then(function(){e.itemToDelete={}}).catch(function(){throw e.itemToDelete={},e.errors.products=!0,new Error("Deleting product failed.")})}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o,s){"ngInject";r(this,e),this.utilitiesService=n,this.configService=i,this.$rootScope=a,this.log=o.create("playlists-controller"),this.pageIntroBackgroundImageName="HG1200xVariable-Rewards.png",this.playlistsService=s,this.productService=t,this.init()}return e.$inject=["productService","utilitiesService","configService","$rootScope","logManager","playlistsService"],i(e,[{key:"init",value:function(){var e=this;this.thePlaylistName="",this.thePlaylistId="",this.utilitiesService.unsetNightmode(),this.$rootScope.currentPage="playlists",this.getPath=function(t){return e.configService.getPath(t)},this.cdnUrl=function(t){return e.configService.cdnUrl(t)},this.showError=!1,this.playlistsService.loadPlaylists()}},{key:"toggleRenamePlaylistModal",value:function(e,t,n){e.preventDefault(),this.thePlaylistId=t,this.thePlaylistName=n,this.playlistsService.renameModal.show()}},{key:"toggleRemovePlaylistModal",value:function(e,t,n){e.preventDefault(),t&&(this.thePlaylistId=t,this.thePlaylistName=n,this.playlistsService.deleteModal.show())}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(79),s=n(735).AllHtmlEntities,c=function(){function e(t,n,i,a,o,c,u,l,d,f,h){"ngInject";var p=this;r(this,e),this.$location=t,this.$q=n,this.$rootScope=i,this.$route=a,this.$timeout=o,this.alertService=c,this.cacheService=u,this.configService=l,this.httpService=d,this.productService=h,this.$q=n,this.configService=l,this.cacheService=u,this.alertService=c,this.htmlEncoder=new s,this.log=f.create("packt:playlists:service"),this.playlists=null;var v=function(e){var t=function(){var t=document.querySelector(e),n=$(t);return p.log.debug("$el",n),n};return{show:function(){return t().modal("show")},hide:function(){return t().modal("hide")},toggle:function(){return t().modal("toggle")}}};this.renameModal=v("#playlistRenameModal"),this.deleteModal=v("#playlistDeleteModal"),this.createModal=v("#playlistCreateModal"),this.removeProductModal=v("#removeProductModal"),this.loading=!0,this.loadingMsg="Loading Playlists...",this.PLAYLIST_NAME_MAX_LIMIT=255,this.searchPath=this.configService.getPath("search"),this.playlistPath=this.configService.getPath("playlists"),this.$rootScope.$on("user:logout",function(){p.reset()})}return e.$inject=["$location","$q","$rootScope","$route","$timeout","alertService","cacheService","configService","httpService","logManager","productService"],a(e,[{key:"loadPlaylists",value:function(){var e=this;return this.log.debug("loadPlaylists()"),this.playlists?(this.loading=!1,this.$q.resolve(this.playlists)):(this.log.debug("initial loadPlaylists() call"),this.loading=!0,this.getPlaylists().then(function(t){if(!t||!t.data||!t.data.length)throw new Error("No playlists");e.playlists=t.data,e.log.debug("playlists loaded:",e.playlists)}).then(function(){return e.loadSummaryProducts()}).then(function(){return e.log.debug("playlists:",e.playlists),e.loading=!1,e.playlists}).catch(function(t){e.log.error("Error loading playlists",t),e.loading=!1,e.playlists=null}))}},{key:"loadSummaryProducts",value:function(){var e=this;this.log.debug("Loading products for",this.playlists),this.playlists.forEach(function(t){e.log.debug("Processing",t),t.products&&t.products.length>0&&t.products.forEach(function(e){e.imageSrc="https://static.packt-cdn.com/products/"+e.productId+"/cover/smaller"})})}},{key:"loadFullProducts",value:function(e){var t=this,n=[];return"function"!=typeof this.playlists[e].products.forEach?this.$q.resolve(!0):(this.playlists[e].products.forEach(function(r,i){if(!r.loaded){var a=t.loadProduct(r.productId).then(function(n){t.playlists[e].products[i]=Object.assign({},r,n,{loaded:!0})});n.push(a)}}),this.$q.all(n).then(function(){return!0}))}},{key:"loadProduct",value:function(e){return this.$q.all([this.getProductsSummary([e]),this.getProductsUserData([e])]).then(function(t){return Object.assign({},t[0][e],t[1][e])})}},{key:"toggleNewPlaylistModal",value:function(e){e&&e.preventDefault(),this.createModal.show()}},{key:"createNewPlaylist",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.loading=!0;var a={playlistName:e};return i&&(a.productIds=[i]),this.httpService.microserviceRequest("lists","v1","users/me/playlists","POST",a,!0).then(function(a){if(a&&t){var o=r.configService.getPath("playlists");a.data[0]&&a.data[0].playlistId&&(o+="/"+a.data[0].playlistId),r.$location.path(o)}else{r.loadPlaylists();var s=r.htmlEncoder.encode(e);if(i&&n){var c=n+" has been added to new playlist, "+s+".";r.alertService.addAlert(c,"warning")}}return{created:!0}})}},{key:"getPlaylists",value:function(){return this.httpService.microserviceRequest("lists","v1","users/me/playlists","GET",{},!0)}},{key:"getPlaylist",value:function(e){var t="users/me/playlists/"+e;return this.httpService.microserviceRequest("lists","v1",t,"GET",{},!0)}},{key:"updatePlaylists",value:function(e,t){var n="users/me/playlists/"+e;return this.httpService.microserviceRequest("lists","v1",n,"PATCH",{playlistName:t},!0)}},{key:"create",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.log.debug("Creating",e);var r={playlistName:e};return n&&(r.productIds=[n]),this.httpService.microserviceRequest("lists","v1","users/me/playlists","POST",r,!0).then(function(r){t.log.debug("Got Respones:",r);var i=(0,o.get)(r,"data[0].playlistId");if(!i)throw new Error("Failed to create new playlist");var a={playlistId:i,playlistName:e,products:[]};n&&a.products.push({productId:n,imageSrc:"https://static.packt-cdn.com/products/"+n+"/cover/smaller",insertedDate:(new Date).toISOString()}),t.playlists||(t.playlists=[]),t.playlists.push(a)}).catch(function(e){t.log.debug("Got Err:",e)})}},{key:"rename",value:function(e,t){var n=this;this.log.debug("Renaming",e,"to",t);var r="users/me/playlists/"+e;return this.httpService.microserviceRequest("lists","v1",r,"PATCH",{playlistName:t},!0).then(function(e){n.log.debug("Got Response:",e)}).then(function(){return n.getPlaylistIndexById(e)}).then(function(e){n.playlists[e].playlistName=t}).catch(function(e){n.log.error("Got Error:",e)})}},{key:"delete",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.log.debug("Deleting",e);var r="users/me/playlists/"+e;return this.httpService.microserviceRequest("lists","v1",r,"DELETE",{},!0).then(function(e){t.log.debug("Got Response:",e)}).then(function(){return t.getPlaylistIndexById(e)}).then(function(e){t.log.debug("Deleting from list:",e),t.playlists.splice(e,1),n&&t.$location.path(t.configService.getPath("playlists"))}).catch(function(e){t.log.error("Got Error:",e)})}},{key:"deletePlaylist",value:function(e,t){var n=this,r="users/me/playlists/"+e;return this.httpService.microserviceRequest("lists","v1",r,"DELETE",{},!0).then(function(){return t?(n.$location.path(n.configService.getPath("playlists")),{deleted:!0}):n.removePlaylist(e).then(function(){return{deleted:!0}})})}},{key:"removePlaylist",value:function(e){this.log.debug("Removing",e,"from",this.playlists);var t=this.getPlaylistIndexById(e);return this.log.debug("Found Index",t),this.playlists.splice(t,1),this.$q.resolve(!0)}},{key:"getPlaylistIndexById",value:function(e){var t=this;return this.log.debug("Getting index of",e),this.loadPlaylists().then(function(){var n=t.playlists.findIndex(function(t){return t.playlistId===e});if(-1===n)throw new Error("Could not find loaded playlist");return t.log.debug("Got index",n),n})}},{key:"hasPlaylists",value:function(){return this.playlists&&this.playlists.length>0}},{key:"addProductToPlaylist",value:function(e,t){var n=this,r="users/me/playlists/"+e+"/products";return this.httpService.microserviceRequest("lists","v1",r,"POST",{productIds:[t]},!0).then(function(e){return n.log.debug("Got Response:",e)}).then(function(){return n.getPlaylistIndexById(e)}).then(function(e){var r={productId:t,imageSrc:"https://static.packt-cdn.com/products/"+t+"/cover/smaller",insertedDate:(new Date).toISOString()};n.playlists[e].products.push(r)})}},{key:"deleteProductFromPlaylist",value:function(e,t){var n=this,r="users/me/playlists/"+e+"/products/"+t;return this.httpService.microserviceRequest("lists","v1",r,"DELETE",{},!0).then(function(e){n.log.debug("Got response:",e)}).then(function(){return n.$q.all([n.getPlaylistIndexById(e),n.getProductIndexById(e,t)])}).then(function(e){var t=i(e,2),r=t[0],a=t[1];return n.playlists[r].products.splice(a,1)})}},{key:"getProductIndexById",value:function(e,t){var n=this;return this.getPlaylistIndexById(e).then(function(e){return n.playlists[e].products.findIndex(function(e){return e.productId===t})})}},{key:"getPlaylistsProductsData",value:function(e){var t=[this.getProductsSummary(e),this.getProductsUserData(e)];return this.$q.all(t).then(function(t){if(!t||!t.length)return{};var n=t[0]||{},r=t[1]||{};return e.map(function(e){var t=Object.assign({id:e},n[e],r[e]);return t.lastRead&&(t.lastReadUrl=t.baseUrl+"/"+t.lastRead),t})})}},{key:"getProductsSummary",value:function(e){return this.productService.getProductsSummary(e).then(function(t){return e.reduce(function(e,n,r){return e[n]=t[r],t[r].authors&&(e[n].authorsNamesText=t[r].authors.map(function(e){return e.author}).join(", ")),e},{})})}},{key:"getProductsUserData",value:function(e){return this.productService.getProductUserData(e,"line").then(function(t){return t?e.reduce(function(e,n){return e[n]={lastRead:t[n].lastRead},e},{}):{}})}},{key:"reset",value:function(){this.playlists=null}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i,a,o){"ngInject";r(this,e),this.projectsService=t,this.utilitiesService=n,this.$rootScope=i,this.$location=a,this.analyticsService=o,this.init()}return e.$inject=["projectsService","utilitiesService","$rootScope","$location","analyticsService"],i(e,[{key:"init",value:function(){this.utilitiesService.unsetNightmode(),this.$rootScope.currentPage="new-projects-list",this.pageIntroTitle="Projects",this.pageIntroSubtitle="Build real world projects on everything from mobile<br/>apps and chat bots to stockmarket forecasting<br/>with tech such as Python, React, and Blockchain.",this.pageIntroBackgroundImageName="HG1200xVariable-Projects.png",this.loadingMsg="Loading projects...",this.loading=!0,this.getProjectsSummary(),this.analyticsService.addIntercomMetadata({viewed_projects:!0})}},{key:"triggerSearch",value:function(e){this.searchModel=e}},{key:"filterCategoriesBy",value:function(e){"all"===e.name?this.filteredCategories=this.categories:this.filteredCategories=this.categories.filter(function(t){return t.name===e.name})}},{key:"navigateToProject",value:function(e,t){e.preventDefault(),this.projectsService.persistProject(t),this.$location.path(t.start_url)}},{key:"getProjectsSummary",value:function(){var e=this;this.projectsService.getProjectsSummary().then(function(t){e.categories=t.sort(function(e,t){return e.weight-t.weight}),e.filteredCategories=t,e.categoriesSelectOptions=t.map(function(e){return{id:e.id,name:e.name,displayName:e.displayName}}),e.categoriesSelectOptions.unshift({id:"0",name:"all",displayName:"All"}),e.loading=!1}).catch(function(t){e.loading=!1})}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectEndModalComponent=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1106),s=r(o),c=function(){function e(t,n){"ngInject";i(this,e),this.$location=t,this.configService=n}return e.$inject=["$location","configService"],a(e,[{key:"$onInit",value:function(){this.modalElem=$("#endProjectsModal")}},{key:"closeModal",value:function(){this.modalElem.modal("toggle")}},{key:"navigateTo",value:function(e,t){e.preventDefault();var n=this.configService.getPath(t);this.closeModal(),this.$location.path(n)}}]),e}();t.ProjectEndModalComponent={template:s.default,bindings:{projectTitle:"<"},controller:c}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,r,a,o){"ngInject";i(this,e),this.httpService=t,this.$window=n,this.utilitiesService=r,this.projectsJsonUrl="https://static.packt-cdn.com/projects/projects-list.json",this.configService=a,this.weightingService=o,this.cachedProjects=null}return e.$inject=["httpService","$window","utilitiesService","configService","weightingService"],a(e,[{key:"getProjectsMetadata",value:function(){var e=this,t={config:{timeout:1e4},cacheName:"nonUserRelatedCache"};return this.httpService.get(this.projectsJsonUrl,t).then(function(t){var n=e.getCategoriesFromProjects(t.projects),r=e.sortProjects(t.projects);return{projects:r,categories:n,totalCount:r.length}})}},{key:"sortProjects",value:function(e){return e.sort(function(e,t){var n=+e.weight,r=+t.weight;return n<r?-1:n>r?1:0})}},{key:"getCategoriesFromProjects",value:function(e){var t=e.reduce(function(e,t){var n=t.technology;return e[n]?e[n]+=1:e[n]=1,e},{});return Object.keys(t).reduce(function(e,n){var i={name:n,displayName:n,count:t[n]};return[].concat(r(e),[i])},[])}},{key:"getProjectWithCurrentLastPage",value:function(e){return this.getPersistedProjects().find(function(t){return t.end_url===e})}},{key:"persistProject",value:function(e){var t=this.getPersistedProjects();t.some(function(t){return t.project_name===e.project_name})||(t.push(e),this.cachedProjects=t,this.$window.localStorage.setItem("projects",JSON.stringify(t)))}},{key:"getPersistedProjects",value:function(){if(this.cachedProjects)return this.cachedProjects;var e=this.$window.localStorage.getItem("projects");return e?JSON.parse(e):[]}},{key:"deletePersistedProject",value:function(e){var t=this.getPersistedProjects(),n=t.filter(function(t){return t.project_name!==e.project_name});this.cachedProjects=n,this.$window.localStorage.setItem("projects",JSON.stringify(n))}},{key:"groupProjectByCategory",value:function(e){return e.reduce(function(e,t){return e[t.category]?(e[t.category].push(t),e):(e[t.category]=[t],e)},{})}},{key:"getProjectsSummary",value:function(){var e=this,t={config:{timeout:1e4},cacheName:"nonUserRelatedCache"};return this.httpService.get(this.projectsJsonUrl,t).then(function(t){if(!t||!t.projects||!t.projects.length)return[];var n=void 0;n="/mapt"!==e.configService.baseUrl?e.formatProjectsUrlForMobile(t.projects):t.projects;var r=e.utilitiesService.sortByWeight(n),i=e.groupProjectByCategory(r);return Object.keys(i).map(function(t,n){var r={id:n+1,displayName:t,name:t.toLowerCase().replace(/\s/g,"-").replace(/&/g,"and"),projects:i[t]};return r.weight=e.weightingService.getCategoryWeight(r.name),r})})}},{key:"formatProjectsUrlForMobile",value:function(e){return e.forEach(function(e){"string"==typeof e.start_url&&(e.start_url=e.start_url.replace(/^\/mapt/,"")),"string"==typeof e.end_url&&(e.end_url=e.end_url.replace(/^\/mapt/,""))}),e}},{key:"getInteractiveProjects",value:function(){return[{title:"Analyzing text data with Python",icon:"Artboard-14.svg"},{title:"Building a Speech Recognizer with Python",icon:"Artboard-14.svg"},{title:"Building an Image Recognizer with Python",icon:"Artboard-14.svg"},{title:"Text Processing with Python",icon:"Artboard-14.svg"},{title:"Building a Weather App with Kotlin",icon:"Artboard-15.svg"},{title:"Building an Uber App with React Native",icon:"Artboard-16.svg"}]}},{key:"subscribeUserToMailChimp",value:function(e){return this.httpService.put("https://services.packtpub.com/mapt-email-capture-v1/submitContact",e)}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.manuallyRaised=!0,n}return a(t,e),t}(Error);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={login:{pageTitle:"Login | Packt Subscription",description:"Log in to Packt Subscription to access your account where you will find 6,500+ eBooks and Videos, plus Learning Paths, Projects and Bookmarks",canonicalUrl:"https://subscription.packtpub.com/login"},register:{pageTitle:"Register | Packt Subscription",description:"Register to Packt Subscription to access your account where you will find 6,500+ eBooks and Videos, plus Learning Paths, Projects and Bookmarks",canonicalUrl:"https://subscription.packtpub.com/register"},"password-reset":{pageTitle:"Password Reset | Packt Subscription",description:"Reset your password to access your account where you will find 6,500+ eBooks and Videos, plus Learning Paths, Projects and Bookmarks",canonicalUrl:"https://subscription.packtpub.com/password-reset"},home:{pageTitle:"Packt Subscription | More Tech, More Choice, More Value",description:"Access over 6,500 Programming & Development eBooks and videos to advance your IT skills. Enjoy unlimited access to over 100 new titles every month on the latest technologies and trends",canonicalUrl:"https://subscription.packtpub.com"},history:{pageTitle:"History | Packt Subscription",description:"View your Packt Subscription viewing history, where you can read and view over 6,500 Programming & Development eBooks and videos to advance your IT skills",canonicalUrl:"https://subscription.packtpub.com/history"},playlists:{pageTitle:"Playlists | Packt Subscription",description:"View your playlists on Packt Subscription, where you can read and view over 6,500 Programming & Development eBooks and videos to advance your IT skills",canonicalUrl:"https://subscription.packtpub.com/playlists"},bookmarks:{pageTitle:"Bookmarks | Packt Subscription",description:"View your bookmarks on Packt Subscription, where you can read and view over 6,500 Programming & Development eBooks and videos to advance your IT skills",canonicalUrl:"https://subscription.packtpub.com/bookmarks"},purchases:{pageTitle:"Owned | Packt Subscription",description:"View your latest purchases on Packt Subscription, where you can read and view over 6,500 Programming & Development eBooks and videos to advance your IT skills",canonicalUrl:"https://subscription.packtpub.com/owned"},rewards:{pageTitle:"Rewards | Packt Subscription",description:"View your rewards and track your progress on Packt Subscription, where you can earn a free credit each month to get a free eBook or Video",canonicalUrl:"https://subscription.packtpub.com/rewards"},search:{pageTitle:"Search 6,500+ Programming & Development eBooks & Videos | Packt Subscription",description:"Search over 6,500 Programming & Development eBooks and videos to advance your IT skills, including Web Development, Application Development and Networking",canonicalUrl:"https://subscription.packtpub.com/search"},"projects-list":{pageTitle:"Projects | Developer & Programming Projects | Packt Subscription",description:"Build real world apps, test your skills and solve development and programming problems with short 2 hour projects available on Packt Subscription",canonicalUrl:"https://subscription.packtpub.com/projects"},"books-and-videos":{pageTitle:"Books & Videos | More Tech, More Choice, More Value | Packt Subscription",description:"Browse 6,500+ eBooks and Videos across more than 1000 technologies including Python, Angular, AWS, JavaScript, Artificial Intelligence and much more",canonicalUrl:"https://subscription.packtpub.com/books-and-videos"},"learning-paths-list":{pageTitle:"Learning Paths | Programming & Development Courses | Packt Subscription",description:"When technology changes quickly, you need to be prepared. Our comprehensive Learning Paths enable you to develop your skillset from start to finish",canonicalUrl:"https://subscription.packtpub.com/learning-paths"},downloads:{pageTitle:"Downloads | Packt Subscription",description:"View your latest downloads on Packt Subscription, where you can read and view over 6,500 Programming & Development eBooks and videos to advance your IT skills",canonicalUrl:"https://subscription.packtpub.com/downloads"},checkout:{pageTitle:"Checkout | Packt Subscription",description:"View your cart and check out on Packt Subscription, where you can read and view over 6,500 Programming & Development eBooks and videos to advance your IT skills",canonicalUrl:"https://subscription.packtpub.com/checkout"},help:{pageTitle:"Help & Support | Packt Subscription",description:"Get help and support on the Packt Subscription platform, whether you're looking to find our FAQ's or would like to speak to one of our team",canonicalUrl:"https://subscription.packtpub.com/help"},account:{pageTitle:"Subscription Settings | Packt Subscription",description:"View your account on Packt Subscription, where you can adjust your email preferences, billing details and upgrade your account",canonicalUrl:"https://subscription.packtpub.com/my-account"},email:{pageTitle:"Email Preferences | My Account | Packt Subscription",description:"View your email preferences on Packt Subscription, where you can read and view over 6,500 Programming & Development eBooks and videos to advance your IT skills",canonicalUrl:"https://subscription.packtpub.com/my-account/email-preferences"},"account-details":{pageTitle:"Account Details | My Account | Packt Subscription",description:"View your account details on Packt Subscription, where you can read and view over 6,500 Programming & Development eBooks and videos to advance your IT skills",canonicalUrl:"https://subscription.packtpub.com/my-account/account-details"},"account-billing-details":{pageTitle:"Billing Details | My Account | Packt Subscription",description:"View your billing details on Packt Subscription, where you can read and view over 6,500 Programming & Development eBooks and videos to advance your IT skills",canonicalUrl:"https://subscription.packtpub.com/my-account/billing-details"},"update-card-details":{pageTitle:"Update Card Details | My Account | Packt Subscription",description:"Update your card details on Packt Subscription, where you can read and view over 6,500 Programming & Development eBooks and videos to advance your IT skills",canonicalUrl:"https://subscription.packtpub.com/my-account/update-card-details"},upgrades:{pageTitle:"Upgrades | My Account | Packt Subscription",description:"Upgrade your account on Packt Subscription, where you can read and view over 6,500 Programming & Development eBooks and videos to advance your IT skills",canonicalUrl:"https://subscription.packtpub.com/my-account/upgrades"},"interactive-code-projects":{pageTitle:"Interactive Code Projects | Packt Subscription",description:"Use our interactive coding projects to test your learning as you go, with a wide range of projects available for programmers and developers",canonicalUrl:"https://subscription.packtpub.com/interactive-code-projects"},logout:{pageTitle:"Log Out | Packt Subscription",description:"Log out from your Packt Subscription account, where you can read and view over 6,500 programming and development eBooks and Videos",canonicalUrl:"https://subscription.packtpub.com/logout"},tech:{pageTitle:"Technology Topics | Packt Subscription",description:"Browse books, videos and learning paths by tech topic, curated and recommended by our editorial team",canonicalUrl:"https://subscription.packtpub.com/tech"}};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(44),l=r(u),d=l.default.colors,f=function(){function e(){o(this,e)}return c(e,null,[{key:"getAccessibleTextcolor",value:function(e){var t=function(e,t){try{return parseInt(e.substring(2*t,2*(t+1)),16)}catch(e){return 0}},n="#"===e.charAt(0)?e.slice(1,7):e;return(299*t(n,0)+587*t(n,1)+114*t(n,2))/1e3>130?"#000000":"#ffffff"}},{key:"selectColor",value:function(e){var t=0,n=void 0;for(n in e)t=(t<<5)-t+e.charCodeAt(n),t|=0;return d[Math.abs(t)%d.length]}},{key:"flattenObject",value:function(e){return Object.assign.apply(Object,[{}].concat(a(this.flattenObjectLayer(e))))}},{key:"flattenObjectLayer",value:function(e){var t,n=this;return(t=[]).concat.apply(t,a(Object.keys(e).map(function(t){return"object"===s(e[t])?n.flattenObjectLayer(e[t]):i({},t,e[t])})))}}]),e}();t.default=f},function(e,t,n){"use strict";var r,i,a,o,o,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
 * clipboard.js v1.6.1
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT © Zeno Rocha
 */
!function(n){if("object"==s(t)&&void 0!==e)e.exports=n();else{i=[],r=n,void 0!==(a="function"==typeof r?r.apply(t,i):r)&&(e.exports=a)}}(function(){var e;return function e(t,n,r){function i(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof o&&o;if(!c&&u)return o(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return i(n||e)},d,d.exports,e,t,n,r)}return n[s].exports}for(var a="function"==typeof o&&o,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){function r(e,t){for(;e&&e.nodeType!==i;){if(e.matches(t))return e;e=e.parentNode}}var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}t.exports=r},{}],2:[function(e,t,n){function r(e,t,n,r,a){var o=i.apply(this,arguments);return e.addEventListener(n,o,a),{destroy:function(){e.removeEventListener(n,o,a)}}}function i(e,t,n,r){return function(n){n.delegateTarget=a(n.target,t),n.delegateTarget&&r.call(e,n)}}var a=e("./closest");t.exports=r},{"./closest":1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],4:[function(e,t,n){function r(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return i(e,t,n);if(s.nodeList(e))return a(e,t,n);if(s.string(e))return o(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function a(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function o(e,t,n){return c(document.body,e,t,n)}var s=e("./is"),c=e("delegate");t.exports=r},{"./is":3,delegate:2}],5:[function(e,t,n){function r(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),i=document.createRange();i.selectNodeContents(e),r.removeAllRanges(),r.addRange(i),t=r.toString()}return t}t.exports=r},{}],6:[function(e,t,n){function r(){}r.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){i.off(e,r),t.apply(n,arguments)}var i=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;for(r;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var a=0,o=r.length;a<o;a++)r[a].fn!==t&&r[a].fn._!==t&&i.push(r[a]);return i.length?n[e]=i:delete n[e],this}},t.exports=r},{}],7:[function(t,n,r){!function(i,a){if("function"==typeof e&&e.amd)e(["module","select"],a);else if(void 0!==r)a(n,t("select"));else{var o={exports:{}};a(o,i.select),i.clipboardAction=o.exports}}(this,function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(t),a="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(){function e(t){r(this,e),this.resolveOptions(t),this.initSelection()}return o(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":a(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=c})},{select:5}],8:[function(t,n,r){!function(i,a){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],a);else if(void 0!==r)a(n,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var o={exports:{}};a(o,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=o.exports}}(this,function(e,t,n,r){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var l=i(t),d=i(n),f=i(r),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return c(t,e),h(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,f.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l.default({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return u("action",e)}},{key:"defaultTarget",value:function(e){var t=u("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return u("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(d.default);e.exports=p})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.resource=t}return i(e,[{key:"blobToBuffer",value:function(){var e=this;return new Promise(function(t,n){var r=new FileReader;r.addEventListener("loadend",function(e){var n=e.target.result;t(new Uint8Array(n))}),r.addEventListener("error",function(){return n("Error while reading the Blob object")}),r.readAsArrayBuffer(e.resource)})}},{key:"getURL",value:function(){var t=this;return new Promise(function(n,r){return t.resource instanceof Blob?FileReader?TextDecoder?e.blobToString(t.resource,function(r){var i="WEBVTT FILE\r\n\r\n",a=i.concat(e.toVTT(r)),o=new Blob([a],{type:"text/vtt"});return t.objectURL=URL.createObjectURL(o),n(t.objectURL)},function(){t.blobToBuffer().then(function(r){var i=new TextDecoder("utf-8").decode(r),a="WEBVTT FILE\r\n\r\n",o=a.concat(e.toVTT(i)),s=new Blob([o],{type:"text/vtt"});return t.objectURL=URL.createObjectURL(s),n(t.objectURL)})}):r("No TextDecoder constructor found"):r("No FileReader constructor found"):r("Expecting resource to be a Blob but something else found.")})}},{key:"release",value:function(){URL.createObjectURL(this.objectURL)}}],[{key:"blobToString",value:function(e,t,n){var r=new FileReader;r.addEventListener("loadend",function(e){var n=e.target.result;t(n)}),r.addEventListener("error",function(){return n()}),r.readAsText(e)}},{key:"toVTT",value:function(e){return e.replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").concat("\r\n\r\n")}},{key:"toTypedArray",value:function(e){var t=[];return e.split("").forEach(function(e){t.push(parseInt(e.charCodeAt(),16))}),Uint8Array.from(t)}}]),e}();window.WebVTTConverter=a,t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={handlers_:[],on:function(e,t,n){if("function"!=typeof n)throw new TypeError("Callback is not a function.");this.handlers_.push([e,t,n])},trigger:function(e,t){this.handlers_.forEach(function(n){n[0]===e&&n[1]===t&&n[2].apply()})}};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e.registerPlugin?e.registerPlugin("transcript",f):e.plugin("transcript",f)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(370),o=r(a),s=n(67),c=n(717),u=r(c),l=n(719),d=r(l),f=function(e){var t=this;this.ready(function(){s.my.player=t,s.my.validTracks=u.default.get(),s.my.currentTrack=u.default.active(s.my.validTracks),s.my.settings=o.default.mergeOptions(s.defaults,e),s.my.widget=d.default.create();var n=function(){s.my.widget.setCue(s.my.player.currentTime())},r=function(){s.my.currentTrack=u.default.active(s.my.validTracks),s.my.widget.setTrack(s.my.currentTrack)};if(!(s.my.validTracks.length>0))throw new Error("videojs-transcript: No tracks found!");r(),s.my.player.on("timeupdate",n),s.my.settings.followPlayerTrack&&(s.my.player.on("captionstrackchange",r),s.my.player.on("subtitlestrackchange",r)),e.el.appendChild(s.my.widget.el())})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(67),i=function(e){var t=function(e){var t=this;e.addEventListener("scroll",function(){t.isAutoScrolling?t.isAutoScrolling=!1:(t.userIsScrolling=!0,e.classList.add("is-inuse"))}),e.addEventListener("mouseenter",function(){t.mouseIsOverTranscript=!0}),e.addEventListener("mouseleave",function(){t.mouseIsOverTranscript=!1,setTimeout(function(){t.mouseIsOverTranscript||(t.userIsScrolling=!1,e.classList.remove("is-inuse"))},1e3)})},n=function(e,t,n,r){return t+n*Math.sin(Math.min(1,e/r)*(Math.PI/2))},r=function(e,t,r){var i=Date.now(),a=e.scrollTop,o=this;t=Math.max(0,t),t=Math.min(e.scrollHeight-e.clientHeight,t);var s=t-a,c=function c(){var u=Date.now(),l=u-i;o.isAutoScrolling=!0,e.scrollTop=n(l,a,s,r),e.scrollTop!==t&&requestAnimationFrame(c,e)};requestAnimationFrame(c,e)};return{init:function(e,n){return this.element=e,this.userIsScrolling=!1,this.mouseIsOverTranscript=!0,this.isAutoScrolling=!0,t.call(this,this.element),this},to:function(e){if(this.canScroll()){var t,n=e.parentElement,i=n.offsetTop+n.clientHeight,a=e.offsetTop+e.clientHeight,o=e.offsetTop-n.offsetTop,s=e.offsetTop+e.clientHeight-n.offsetTop;o<n.scrollTop?t=e.offsetTop-n.offsetTop:s>n.scrollTop+n.clientHeight&&(t=a-i),void 0!==t&&n.scrollTop!==t&&r.call(this,n,t,400)}},canScroll:function(){var e=this.element;return e.scrollHeight>e.offsetHeight},inUse:function(){return this.userIsScrolling}}}(r.my),a=function(e){return Object.create(i).init(e)};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(67),i=function(e){var t;return{get:function(){var e,t,n=[];for(r.my.tracks=r.my.player.textTracks(),e=0;e<r.my.tracks.length;e++)t=r.my.tracks[e],"captions"!==t.kind&&"subtitles"!==t.kind||(r.my.player.options_.transcript&&r.my.player.options_.transcript.downloads&&(t.download=r.my.player.options_.transcript.downloads[t.label]),n.push(t));return n},active:function(e){var n,i;for(n=0;n<r.my.tracks.length;n++)if(i=r.my.tracks[n],"showing"===i.mode)return t=i,i;return t||e[0]}}}(r.my);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(67),a=function(e){return{secondsToTime:function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%60);return r=r<10?"0"+r:r,n=t>0&&n<10?"0"+n:n,t>0?t+":"+n+":"+r:n+":"+r},localize:function(e){return e},createEl:function(t,n){n=n||"";var r=document.createElement(t);return r.className=e.prefix+n,r},extend:function(e){var t=void 0===e?"undefined":r(e);if(!("function"===t||"object"===t&&e))return e;for(var n,i,a=1,o=arguments.length;a<o;a++){n=arguments[a];for(i in n)e[i]=n[i]}return e}}}(i.my);t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(67),o=n(718),s=r(o),c=n(716),u=r(c),l=n(714),d=r(l),f=function(e){var t={};t.element={},t.body={};var n=function(e,t){d.default.on(this,e,t)},r=function(e){d.default.trigger(this,e)},a=function(){var e=s.default.createEl("header","-header");return e.textContent=s.default.localize("Transcript"),e},o=function(t){var n=s.default.createEl("select","-selector");return e.validTracks.forEach(function(e,r){var i=document.createElement("option");i.value=r,0==r&&void 0!=e.download&&""!=e.download&&(t.style.display="inline-block"),i.setAttribute("data-download",e.download),i.textContent=e.label,n.appendChild(i)}),n.addEventListener("change",function(t){var n=document.querySelector("#"+e.prefix+"-"+e.player.id()+" option:checked");n.dataset.download&&void 0!=n.dataset.download&&"undefined"!=n.dataset.download?document.querySelector(".transcript-download-btn").style.display="inline-block":document.querySelector(".transcript-download-btn").style.display="none",v(document.querySelector("#"+e.prefix+"-"+e.player.id()+" option:checked").value),r("trackchanged")}),n},c=function(){var e=s.default.createEl("a","-download-btn"),t=document.createTextNode("download");return e.setAttribute("target","_blank"),e.style.display="none",e.appendChild(t),e.addEventListener("click",function(e){this.setAttribute("download",document.querySelector(".transcript-selector option:checked").innerHTML),this.setAttribute("href",document.querySelector(".transcript-selector option:checked").dataset.download)}),e},l=function(t){var n=t.target.classList,r=t.target.getAttribute("data-begin")||t.target.parentElement.getAttribute("data-begin");void 0!==r&&null!==r&&("line"===e.settings.clickArea||"timestamp"===e.settings.clickArea&&n.contains(e.prefix+"-timestamp")||"text"===e.settings.clickArea&&n.contains(e.prefix+"-text"))&&e.player.currentTime(r)},f=function(e){var t=s.default.createEl("div","-line"),n=s.default.createEl("span","-timestamp"),r=s.default.createEl("span","-text");return t.setAttribute("data-begin",e.startTime),n.textContent=s.default.secondsToTime(e.startTime),r.innerHTML=e.text,t.appendChild(n),t.appendChild(r),t},h=function n(r){"object"!==(void 0===r?"undefined":i(r))&&(r=e.player.textTracks()[r]);var a,o,c=s.default.createEl("div","-body"),d=document.createDocumentFragment();if(!r||!r.activeCues||r.cues&&0==r.cues.length)r&&"showing"!==r.mode&&(r.mode="hidden"),window.setTimeout(function(){n(r)},100);else{var h=r.cues;for(o=0;o<h.length;o++)a=f(h[o]),d.appendChild(a);c.innerHTML="",c.appendChild(d),c.setAttribute("lang",r.language),c.scroll=(0,u.default)(c),c.addEventListener("click",l),t.element.replaceChild(c,t.body),t.body=c}},p=function(){var n=document.createElement("div"),r=s.default.createEl("div","-header-container");if(t.element=n,n.setAttribute("id",e.prefix+"-"+e.player.id()),e.settings.showTitle){var i=a();r.appendChild(i)}var u=c();if(e.settings.showTrackSelector){var l=o(u);r.appendChild(l),r.appendChild(u)}return t.body=s.default.createEl("div","-body"),n.appendChild(r),n.appendChild(t.body),v(e.currentTrack),this},v=function(e,t){h(e,t)};return{create:p,setTrack:v,setCue:function(n){var r,i,a,o,s=t.body.children;for(r=0;r<s.length;r++)i=s[r],a=i.getAttribute("data-begin"),o=r<s.length-1?s[r+1].getAttribute("data-begin"):e.player.duration()||1/0,n>a&&n<o?i.classList.contains("is-active")||(i.classList.add("is-active"),!e.settings.autoscroll||e.settings.stopScrollWhenInUse&&t.body.scroll.inUse()||t.body.scroll.to(i)):i.classList.remove("is-active")},el:function(){return t.element},on:n,trigger:r}}(a.my);t.default=f},function(e,t,n){"use strict";var r;"function"==typeof Symbol&&Symbol.iterator;!function(i){function a(e,t,n){return e=e||"",t=t||[],n=n||"",c(e,s(t,n))}function o(e,t){e=e||[],t=t||"";var n=s(e,t);return function(e){return c(e||"",n)}}function s(e,t){return e=u(e),{allowable_tags:e,tag_replacement:t,state:f,tag_buffer:"",depth:0,in_quote_char:""}}function c(e,t){for(var n=t.allowable_tags,r=t.tag_replacement,i=t.state,a=t.tag_buffer,o=t.depth,s=t.in_quote_char,c="",u=0,d=e.length;u<d;u++){var v=e[u];if(i===f)switch(v){case"<":i=h,a+=v;break;default:c+=v}else if(i===h)switch(v){case"<":if(s)break;o++;break;case">":if(s)break;if(o){o--;break}s="",i=f,a+=">",n.has(l(a))?c+=a:c+=r,a="";break;case'"':case"'":s=v===s?"":s||v,a+=v;break;case"-":"<!-"===a&&(i=p),a+=v;break;case" ":case"\n":if("<"===a){i=f,c+="< ",a="";break}a+=v;break;default:a+=v}else if(i===p)switch(v){case">":"--"==a.slice(-2)&&(i=f),a="";break;default:a+=v}}return t.state=i,t.tag_buffer=a,t.depth=o,t.in_quote_char=s,c}function u(e){var t=new Set;if("string"==typeof e)for(var n=void 0;n=v.exec(e);)t.add(n[1]);else d.nonNative||"function"!=typeof e[d.iterator]?"function"==typeof e.forEach&&e.forEach(t.add,t):t=new Set(e);return t}function l(e){var t=g.exec(e);return t?t[1].toLowerCase():null}if("function"!=typeof d){var d=function(e){return e};d.nonNative=!0}var f=d("plaintext"),h=d("html"),p=d("comment"),v=/<(\w*)>/g,g=/<\/?([^\s\/>]+)/;a.init_streaming_mode=o,void 0!==(r=function(){return a}.call(t,n,t,e))&&(e.exports=r)}()},function(e,t,n){function r(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function i(e){function n(){if(n.enabled){var e=n,r=+new Date,a=r-(i||r);e.diff=a,e.prev=i,e.curr=r,i=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var a=o[c];n=i.call(e,a),o.splice(c,1),c--}return n}),t.formatArgs.call(e,o);(n.log||t.log||console.log.bind(console)).apply(e,o)}}var i;return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=r(e),n.destroy=a,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function a(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function o(e){t.save(e),t.names=[],t.skips=[];var n,r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&(e=r[n].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}}function s(){t.enable("")}function c(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=i.debug=i.default=i,t.coerce=u,t.disable=s,t.enable=o,t.enabled=c,t.humanize=n(355),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){(function(t,n){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.4+314e4831
 */
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function r(e){return"function"==typeof e}function i(e){z=e}function a(e){W=e}function o(){return function(){return t.nextTick(d)}}function s(){return void 0!==V?function(){V(d)}:l()}function c(){var e=0,t=new Q(d),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function u(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function l(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;e<H;e+=2){(0,K[e])(K[e+1]),K[e]=void 0,K[e+1]=void 0}H=0}function f(){try{var e=Function("return this")().require("vertx");return V=e.runOnLoop||e.runOnContext,s()}catch(e){return l()}}function h(e,t){var n=this,r=new this.constructor(v);void 0===r[ee]&&R(r);var i=n._state;if(i){var a=arguments[i-1];W(function(){return A(i,r,a,n._result)})}else E(n,r,e,t);return r}function p(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(v);return k(n,e),n}function v(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function y(e){try{return e.then}catch(e){return ie.error=e,ie}}function b(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function _(e,t,n){W(function(e){var r=!1,i=b(n,t,function(n){r||(r=!0,t!==n?k(e,n):C(e,n))},function(t){r||(r=!0,x(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,x(e,i))},e)}function w(e,t){t._state===ne?C(e,t._result):t._state===re?x(e,t._result):E(t,void 0,function(t){return k(e,t)},function(t){return x(e,t)})}function S(e,t,n){t.constructor===e.constructor&&n===h&&t.constructor.resolve===p?w(e,t):n===ie?(x(e,ie.error),ie.error=null):void 0===n?C(e,t):r(n)?_(e,t,n):C(e,t)}function k(t,n){t===n?x(t,g()):e(n)?S(t,n,y(n)):C(t,n)}function T(e){e._onerror&&e._onerror(e._result),P(e)}function C(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&W(P,e))}function x(e,t){e._state===te&&(e._state=re,e._result=t,W(T,e))}function E(e,t,n,r){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+ne]=n,i[a+re]=r,0===a&&e._state&&W(P,e)}function P(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?A(n,r,i,a):i(a);e._subscribers.length=0}}function $(e,t){try{return e(t)}catch(e){return ie.error=e,ie}}function A(e,t,n,i){var a=r(n),o=void 0,s=void 0,c=void 0,u=void 0;if(a){if(o=$(n,i),o===ie?(u=!0,s=o.error,o.error=null):c=!0,t===o)return void x(t,m())}else o=i,c=!0;t._state!==te||(a&&c?k(t,o):u?x(t,s):e===ne?C(t,o):e===re&&x(t,o))}function O(e,t){try{t(function(t){k(e,t)},function(t){x(e,t)})}catch(t){x(e,t)}}function I(){return ae++}function R(e){e[ee]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(){return new Error("Array Methods must be provided an Array")}function j(e){return new oe(this,e).promise}function D(e){var t=this;return new t(q(e)?function(n,r){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function N(e){var t=this,n=new t(v);return x(n,e),n}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function M(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=se}var B=void 0;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var q=B,H=0,V=void 0,z=void 0,W=function(e,t){K[H]=e,K[H+1]=t,2===(H+=2)&&(z?z(d):Z())},G="undefined"!=typeof window?window:void 0,Y=G||{},Q=Y.MutationObserver||Y.WebKitMutationObserver,X="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,K=new Array(1e3),Z=void 0;Z=X?o():Q?c():J?u():void 0===G?f():l();var ee=Math.random().toString(36).substring(2),te=void 0,ne=1,re=2,ie={error:null},ae=0,oe=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[ee]||R(this.promise),q(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&C(this.promise,this._result))):x(this.promise,L())}return e.prototype._enumerate=function(e){for(var t=0;this._state===te&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===p){var i=y(e);if(i===h&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===se){var a=new n(v);S(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===te&&(this._remaining--,e===re?x(r,n):this._result[t]=n),0===this._remaining&&C(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;E(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(re,t,e)})},e}(),se=function(){function e(t){this[ee]=I(),this._result=this._state=void 0,this._subscribers=[],v!==t&&("function"!=typeof t&&U(),this instanceof e?O(this,t):M())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this,n=t.constructor;return t.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})},e}();return se.prototype.then=h,se.all=j,se.race=D,se.resolve=p,se.reject=N,se._setScheduler=i,se._setAsap=a,se._asap=W,se.polyfill=F,se.Promise=se,se})}).call(t,n(9),n(6))},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";var r=n(940),i=Object.prototype.toString,a=Object.prototype.hasOwnProperty,o=function(e,t,n){for(var r=0,i=e.length;r<i;r++)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},s=function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)},c=function(e,t,n){for(var r in e)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},u=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),"[object Array]"===i.call(e)?o(e,t,a):"string"==typeof e?s(e,t,a):c(e,t,a)};e.exports=u},function(e,t,n){(function(t){var r,i=void 0!==t?t:"undefined"!=typeof window?window:{},a=n(1123);"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=r}).call(t,n(6))},function(e,t,n){!function(e){function t(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function n(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function r(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;r<i;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}function i(t,n,r,s){var c=[],u=null,l=null,d=null;for(l=r[r.length-1];t.length>0;){if(d=t.shift(),l&&"<"==l.tag&&!(d.tag in w))throw new Error("Illegal content in < super tag.");if(e.tags[d.tag]<=e.tags.$||a(d,s))r.push(d),d.nodes=i(t,d.tag,r,s);else{if("/"==d.tag){if(0===r.length)throw new Error("Closing tag without opener: /"+d.n);if(u=r.pop(),d.n!=u.n&&!o(d.n,u.n,s))throw new Error("Nesting error: "+u.n+" vs. "+d.n);return u.end=d.i,c}"\n"==d.tag&&(d.last=0==t.length||"\n"==t[0].tag)}c.push(d)}if(r.length>0)throw new Error("missing closing tag: "+r.pop().n);return c}function a(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].o==e.n)return e.tag="#",!0}function o(e,t,n){for(var r=0,i=n.length;r<i;r++)if(n[r].c==e&&n[r].o==t)return!0}function s(e){var t=[];for(var n in e)t.push('"'+u(n)+'": function(c,p,t,i) {'+e[n]+"}");return"{ "+t.join(",")+" }"}function c(e){var t=[];for(var n in e.partials)t.push('"'+u(n)+'":{name:"'+u(e.partials[n].name)+'", '+c(e.partials[n])+"}");return"partials: {"+t.join(",")+"}, subs: "+s(e.subs)}function u(e){return e.replace(y,"\\\\").replace(v,'\\"').replace(g,"\\n").replace(m,"\\r").replace(b,"\\u2028").replace(_,"\\u2029")}function l(e){return~e.indexOf(".")?"d":"f"}function d(e,t){var n="<"+(t.prefix||""),r=n+e.n+S++;return t.partials[r]={name:e.n,partials:{}},t.code+='t.b(t.rp("'+u(r)+'",c,p,"'+(e.indent||"")+'"));',r}function f(e,t){t.code+="t.b(t.t(t."+l(e.n)+'("'+u(e.n)+'",c,p,0)));'}function h(e){return"t.b("+e+");"}var p=/\S/,v=/\"/g,g=/\n/g,m=/\r/g,y=/\\/g,b=/\u2028/,_=/\u2029/;e.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},e.scan=function(i,a){function o(){m.length>0&&(y.push({tag:"_t",text:new String(m)}),m="")}function s(){for(var t=!0,n=w;n<y.length;n++)if(!(t=e.tags[y[n].tag]<e.tags._v||"_t"==y[n].tag&&null===y[n].text.match(p)))return!1;return t}function c(e,t){if(o(),e&&s())for(var n,r=w;r<y.length;r++)y[r].text&&((n=y[r+1])&&">"==n.tag&&(n.indent=y[r].text.toString()),y.splice(r,1));else t||y.push({tag:"\n"});b=!1,w=y.length}function u(e,t){var r="="+k,i=e.indexOf(r,t),a=n(e.substring(e.indexOf("=",t)+1,i)).split(" ");return S=a[0],k=a[a.length-1],i+r.length-1}var l=i.length,d=0,f=1,h=d,v=null,g=null,m="",y=[],b=!1,_=0,w=0,S="{{",k="}}";for(a&&(a=a.split(" "),S=a[0],k=a[1]),_=0;_<l;_++)h==d?r(S,i,_)?(--_,o(),h=f):"\n"==i.charAt(_)?c(b):m+=i.charAt(_):h==f?(_+=S.length-1,g=e.tags[i.charAt(_+1)],v=g?i.charAt(_+1):"_v","="==v?(_=u(i,_),h=d):(g&&_++,h=2),b=_):r(k,i,_)?(y.push({tag:v,n:n(m),otag:S,ctag:k,i:"/"==v?b-S.length:_+k.length}),m="",_+=k.length-1,h=d,"{"==v&&("}}"==k?_++:t(y[y.length-1]))):m+=i.charAt(_);return c(b,!0),y};var w={_t:!0,"\n":!0,$:!0,"/":!0};e.stringify=function(t,n,r){return"{code: function (c,p,i) { "+e.wrapMain(t.code)+" },"+c(t)+"}"};var S=0;e.generate=function(t,n,r){S=0;var i={code:"",subs:{},partials:{}};return e.walk(t,i),r.asString?this.stringify(i,n,r):this.makeTemplate(i,n,r)},e.wrapMain=function(e){return'var t=this;t.b(i=i||"");'+e+"return t.fl();"},e.template=e.Template,e.makeTemplate=function(e,t,n){var r=this.makePartials(e);return r.code=new Function("c","p","i",this.wrapMain(e.code)),new this.template(r,t,this,n)},e.makePartials=function(e){var t,n={subs:{},partials:e.partials,name:e.name};for(t in n.partials)n.partials[t]=this.makePartials(n.partials[t]);for(t in e.subs)n.subs[t]=new Function("c","p","t","i",e.subs[t]);return n},e.codegen={"#":function(t,n){n.code+="if(t.s(t."+l(t.n)+'("'+u(t.n)+'",c,p,1),c,p,0,'+t.i+","+t.end+',"'+t.otag+" "+t.ctag+'")){t.rs(c,p,function(c,p,t){',e.walk(t.nodes,n),n.code+="});c.pop();}"},"^":function(t,n){n.code+="if(!t.s(t."+l(t.n)+'("'+u(t.n)+'",c,p,1),c,p,1,0,0,"")){',e.walk(t.nodes,n),n.code+="};"},">":d,"<":function(t,n){var r={partials:{},code:"",subs:{},inPartial:!0};e.walk(t.nodes,r);var i=n.partials[d(t,n)];i.subs=r.subs,i.partials=r.partials},$:function(t,n){var r={subs:{},code:"",partials:n.partials,prefix:t.n};e.walk(t.nodes,r),n.subs[t.n]=r.code,n.inPartial||(n.code+='t.sub("'+u(t.n)+'",c,p,i);')},"\n":function(e,t){t.code+=h('"\\n"'+(e.last?"":" + i"))},_v:function(e,t){t.code+="t.b(t.v(t."+l(e.n)+'("'+u(e.n)+'",c,p,0)));'},_t:function(e,t){t.code+=h('"'+u(e.text)+'"')},"{":f,"&":f},e.walk=function(t,n){for(var r,i=0,a=t.length;i<a;i++)(r=e.codegen[t[i].tag])&&r(t[i],n);return n},e.parse=function(e,t,n){return n=n||{},i(e,"",[],n.sectionTags||[])},e.cache={},e.cacheKey=function(e,t){return[e,!!t.asString,!!t.disableLambda,t.delimiters,!!t.modelGet].join("||")},e.compile=function(t,n){n=n||{};var r=e.cacheKey(t,n),i=this.cache[r];if(i){var a=i.partials;for(var o in a)delete a[o].instance;return i}return i=this.generate(this.parse(this.scan(t,n.delimiters),t,n),t,n),this.cache[r]=i}}(t)},function(e,t,n){var r=n(732);r.Template=n(734).Template,r.template=r.Template,e.exports=r},function(e,t,n){!function(e){function t(e,t,n){var r;return t&&"object"==typeof t&&(void 0!==t[e]?r=t[e]:n&&t.get&&"function"==typeof t.get&&(r=t.get(e))),r}function n(e,t,n,r,i,a){function o(){}function s(){}o.prototype=e,s.prototype=e.subs;var c,u=new o;u.subs=new s,u.subsText={},u.buf="",r=r||{},u.stackSubs=r,u.subsText=a;for(c in t)r[c]||(r[c]=t[c]);for(c in r)u.subs[c]=r[c];i=i||{},u.stackPartials=i;for(c in n)i[c]||(i[c]=n[c]);for(c in i)u.partials[c]=i[c];return u}function r(e){return String(null===e||void 0===e?"":e)}function i(e){return e=r(e),l.test(e)?e.replace(a,"&amp;").replace(o,"&lt;").replace(s,"&gt;").replace(c,"&#39;").replace(u,"&quot;"):e}e.Template=function(e,t,n,r){e=e||{},this.r=e.code||this.r,this.c=n,this.options=r||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.buf=""},e.Template.prototype={r:function(e,t,n){return""},v:i,t:r,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},ep:function(e,t){var r=this.partials[e],i=t[r.name];if(r.instance&&r.base==i)return r.instance;if("string"==typeof i){if(!this.c)throw new Error("No compiler available.");i=this.c.compile(i,this.options)}if(!i)return null;if(this.partials[e].base=i,r.subs){t.stackText||(t.stackText={});for(key in r.subs)t.stackText[key]||(t.stackText[key]=void 0!==this.activeSub&&t.stackText[this.activeSub]?t.stackText[this.activeSub]:this.text);i=n(i,r.subs,r.partials,this.stackSubs,this.stackPartials,t.stackText)}return this.partials[e].instance=i,i},rp:function(e,t,n,r){var i=this.ep(e,n);return i?i.ri(t,n,r):""},rs:function(e,t,n){var r=e[e.length-1];if(!d(r))return void n(e,t,this);for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop()},s:function(e,t,n,r,i,a,o){var s;return(!d(e)||0!==e.length)&&("function"==typeof e&&(e=this.ms(e,t,n,r,i,a,o)),s=!!e,!r&&s&&t&&t.push("object"==typeof e?e:t[t.length-1]),s)},d:function(e,n,r,i){var a,o=e.split("."),s=this.f(o[0],n,r,i),c=this.options.modelGet,u=null;if("."===e&&d(n[n.length-2]))s=n[n.length-1];else for(var l=1;l<o.length;l++)a=t(o[l],s,c),void 0!==a?(u=s,s=a):s="";return!(i&&!s)&&(i||"function"!=typeof s||(n.push(u),s=this.mv(s,n,r),n.pop()),s)},f:function(e,n,r,i){for(var a=!1,o=null,s=!1,c=this.options.modelGet,u=n.length-1;u>=0;u--)if(o=n[u],void 0!==(a=t(e,o,c))){s=!0;break}return s?(i||"function"!=typeof a||(a=this.mv(a,n,r)),a):!i&&""},ls:function(e,t,n,i,a){var o=this.options.delimiters;return this.options.delimiters=a,this.b(this.ct(r(e.call(t,i)),t,n)),this.options.delimiters=o,!1},ct:function(e,t,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,n)},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ms:function(e,t,n,r,i,a,o){var s,c=t[t.length-1],u=e.call(c);return"function"==typeof u?!!r||(s=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(u,c,n,s.substring(i,a),o)):u},mv:function(e,t,n){var i=t[t.length-1],a=e.call(i);return"function"==typeof a?this.ct(r(a.call(i)),i,n):a},sub:function(e,t,n,r){var i=this.subs[e];i&&(this.activeSub=e,i(t,n,this,r),this.activeSub=!1)}};var a=/&/g,o=/</g,s=/>/g,c=/\'/g,u=/\"/g,l=/[&<>\"\']/,d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(t)},function(e,t,n){e.exports={XmlEntities:n(737),Html4Entities:n(736),Html5Entities:n(261),AllHtmlEntities:n(261)}},function(e,t){function n(){}for(var r=["apos","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","Agrave","Aacute","Acirc","Atilde","Auml","Aring","Aelig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","times","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","divide","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","quot","amp","lt","gt","OElig","oelig","Scaron","scaron","Yuml","circ","tilde","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","permil","lsaquo","rsaquo","euro","fnof","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","bull","hellip","prime","Prime","oline","frasl","weierp","image","real","trade","alefsym","larr","uarr","rarr","darr","harr","crarr","lArr","uArr","rArr","dArr","hArr","forall","part","exist","empty","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","prop","infin","ang","and","or","cap","cup","int","there4","sim","cong","asymp","ne","equiv","le","ge","sub","sup","nsub","sube","supe","oplus","otimes","perp","sdot","lceil","rceil","lfloor","rfloor","lang","rang","loz","spades","clubs","hearts","diams"],i=[39,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,34,38,60,62,338,339,352,353,376,710,732,8194,8195,8201,8204,8205,8206,8207,8211,8212,8216,8217,8218,8220,8221,8222,8224,8225,8240,8249,8250,8364,402,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,977,978,982,8226,8230,8242,8243,8254,8260,8472,8465,8476,8482,8501,8592,8593,8594,8595,8596,8629,8656,8657,8658,8659,8660,8704,8706,8707,8709,8711,8712,8713,8715,8719,8721,8722,8727,8730,8733,8734,8736,8743,8744,8745,8746,8747,8756,8764,8773,8776,8800,8801,8804,8805,8834,8835,8836,8838,8839,8853,8855,8869,8901,8968,8969,8970,8971,9001,9002,9674,9824,9827,9829,9830],a={},o={},s=0,c=r.length;s<c;){var u=r[s],l=i[s];a[u]=String.fromCharCode(l),o[l]=u,s++}n.prototype.decode=function(e){return e&&e.length?e.replace(/&(#?[\w\d]+);?/g,function(e,t){var n;if("#"===t.charAt(0)){var r="x"===t.charAt(1).toLowerCase()?parseInt(t.substr(2),16):parseInt(t.substr(1));isNaN(r)||r<-32768||r>65535||(n=String.fromCharCode(r))}else n=a[t];return n||e}):""},n.decode=function(e){return(new n).decode(e)},n.prototype.encode=function(e){if(!e||!e.length)return"";for(var t=e.length,n="",r=0;r<t;){var i=o[e.charCodeAt(r)];n+=i?"&"+i+";":e.charAt(r),r++}return n},n.encode=function(e){return(new n).encode(e)},n.prototype.encodeNonUTF=function(e){if(!e||!e.length)return"";for(var t=e.length,n="",r=0;r<t;){var i=e.charCodeAt(r),a=o[i];n+=a?"&"+a+";":i<32||i>126?"&#"+i+";":e.charAt(r),r++}return n},n.encodeNonUTF=function(e){return(new n).encodeNonUTF(e)},n.prototype.encodeNonASCII=function(e){if(!e||!e.length)return"";for(var t=e.length,n="",r=0;r<t;){var i=e.charCodeAt(r);i<=255?n+=e[r++]:(n+="&#"+i+";",r++)}return n},n.encodeNonASCII=function(e){return(new n).encodeNonASCII(e)},e.exports=n},function(e,t){function n(){}var r={"&lt":"<","&gt":">","&quot":'"',"&apos":"'","&amp":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&amp;":"&"},i={60:"lt",62:"gt",34:"quot",39:"apos",38:"amp"},a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","&":"&amp;"};n.prototype.encode=function(e){return e&&e.length?e.replace(/<|>|"|'|&/g,function(e){return a[e]}):""},n.encode=function(e){return(new n).encode(e)},n.prototype.decode=function(e){return e&&e.length?e.replace(/&#?[0-9a-zA-Z]+;?/g,function(e){if("#"===e.charAt(1)){var t="x"===e.charAt(2).toLowerCase()?parseInt(e.substr(3),16):parseInt(e.substr(2));return isNaN(t)||t<-32768||t>65535?"":String.fromCharCode(t)}return r[e]||e}):""},n.decode=function(e){return(new n).decode(e)},n.prototype.encodeNonUTF=function(e){if(!e||!e.length)return"";for(var t=e.length,n="",r=0;r<t;){var a=e.charCodeAt(r),o=i[a];o?(n+="&"+o+";",r++):(n+=a<32||a>126?"&#"+a+";":e.charAt(r),r++)}return n},n.encodeNonUTF=function(e){return(new n).encodeNonUTF(e)},n.prototype.encodeNonASCII=function(e){if(!e||!e.length)return"";for(var t=e.length,n="",r=0;r<t;){var i=e.charCodeAt(r);i<=255?n+=e[r++]:(n+="&#"+i+";",r++)}return n},n.encodeNonASCII=function(e){return(new n).encodeNonASCII(e)},e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n(3),c=n.n(s),u=n(14),l=n(15),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=(c.a.arrayOf(c.a.shape({name:c.a.string,value:c.a.string})),function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),f(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.createURL,r=t.items,i=t.refine,a=t.cssClasses,s=r.map(function(t,s){var c=s===r.length-1,l=c?o.default.createElement("a",{className:a.disabledLabel+" "+a.label},t.name):o.default.createElement("a",{className:a.label,href:n(t.value),onClick:function(e){e.preventDefault(),i(t.value)}},t.name);return[o.default.createElement(u.a,d({key:t.name+s,rootProps:{className:a.separator},templateKey:"separator"},e.props.templateProps)),l]}),c=r.length>0?[a.home,a.label]:[a.disabledLabel,a.home,a.label],l=function(e){e.preventDefault(),i(null)},f=n(null);return o.default.createElement("div",{className:a.root},o.default.createElement("a",{className:c.join(" "),href:f,onClick:l},o.default.createElement(u.a,d({templateKey:"home"},this.props.templateProps))),s)}}]),t}(o.PureComponent));t.a=n.i(l.a)(h)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(3),s=(n.n(o),n(1)),c=n(14),u=n(0),l=n(15),d=n(20),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),h(t,[{key:"componentWillMount",value:function(){this.handleClick=this.handleClick.bind(this)}},{key:"shouldComponentUpdate",value:function(e){return this.props.url!==e.url||this.props.hasRefinements!==e.hasRefinements}},{key:"handleClick",value:function(e){n.i(u.n)(e)||(e.preventDefault(),this.props.refine())}},{key:"render",value:function(){var e=this.props,t=e.hasRefinements,n=e.cssClasses,r={hasRefinements:t};return s.default.createElement("a",{className:t?n.link:n.link+" "+n.link+"-disabled",href:this.props.url,onClick:this.handleClick},s.default.createElement(c.a,f({data:r,templateKey:"link"},this.props.templateProps)))}}]),t}(s.Component);t.a=n.i(l.a)(n.i(d.a)(p))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){var t={};return void 0!==e.template&&(t.templates={item:e.template}),void 0!==e.transformData&&(t.transformData=e.transformData),t}function s(e,t,n){var r=y()(t);return r.cssClasses=n,void 0!==e.label&&(r.label=e.label),void 0!==r.operator&&(r.displayOperator=r.operator,">="===r.operator&&(r.displayOperator="&ge;"),"<="===r.operator&&(r.displayOperator="&le;")),r}function c(e){return function(t){n.i(p.n)(t)||(t.preventDefault(),e())}}var u=n(3),l=(n.n(u),n(1)),d=n(14),f=n(20),h=n(15),p=n(0),v=n(179),g=n.n(v),m=n(336),y=n.n(m),b=n(16),_=n.n(b),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),S(t,[{key:"shouldComponentUpdate",value:function(e){return!_()(this.props.refinements,e.refinements)}},{key:"_clearAllElement",value:function(e,t){if(t===e){var n=this.props,r=n.refinements,i=n.cssClasses;return l.default.createElement("a",{className:r&&r.length>0?i.clearAll:i.clearAll+" "+i.clearAll+"-disabled",href:this.props.clearAllURL,onClick:c(this.props.clearAllClick)},l.default.createElement(d.a,w({templateKey:"clearAll"},this.props.templateProps)))}}},{key:"_refinementElement",value:function(e,t){var n=this.props.attributes[e.attributeName]||{},r=s(n,e,this.props.cssClasses),i=o(n),a=e.attributeName+(e.operator?e.operator:":")+(e.exclude?e.exclude:"")+e.name;return l.default.createElement("div",{className:this.props.cssClasses.item,key:a},l.default.createElement("a",{className:this.props.cssClasses.link,href:this.props.clearRefinementURLs[t],onClick:c(this.props.clearRefinementClicks[t])},l.default.createElement(d.a,w({data:r,templateKey:"item"},this.props.templateProps,i))))}},{key:"render",value:function(){var e=this,t=g()(this.props.refinements,function(t,n){return e._refinementElement(t,n)});return l.default.createElement("div",null,this._clearAllElement("before",this.props.clearAllPosition),l.default.createElement("div",{className:this.props.cssClasses.list},t),this._clearAllElement("after",this.props.clearAllPosition))}}]),t}(l.Component);t.a=n.i(h.a)(n.i(f.a)(k))},function(e,t,n){"use strict";var r=n(1),i=n(3),a=(n.n(i),function(e){var t=e.className,n=e.disabled,i=e.onClick,a=e.children;return r.default.createElement("button",{className:t,onClick:i,disabled:n},a)});a.defaultProps={disabled:!1},t.a=a},function(e,t,n){"use strict";var r=n(1),i=n(3),a=n.n(i),o=n(2),s=n.n(o),c=n(14),u=n(741),l=n(743),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(e){var t=e.cssClasses,n=e.enableRefineControl,i=e.enableClearMapRefinement,a=e.isRefineOnMapMove,o=e.isRefinedWithMap,f=e.hasMapMoveSinceLastRefine,h=e.onRefineToggle,p=e.onRefineClick,v=e.onClearClick,g=e.templateProps;return r.default.createElement("div",null,n&&r.default.createElement("div",{className:t.control},a||!f?r.default.createElement(l.a,{classNameLabel:s()(t.toggleLabel,a&&t.toggleLabelActive),classNameInput:t.toggleInput,checked:a,onToggle:h},r.default.createElement(c.a,d({},g,{templateKey:"toggle",rootTagName:"span"}))):r.default.createElement(u.a,{className:t.redo,disabled:!f,onClick:p},r.default.createElement(c.a,d({},g,{templateKey:"redo",rootTagName:"span"})))),!n&&!a&&r.default.createElement("div",{className:t.control},r.default.createElement(u.a,{className:t.redo,disabled:!f,onClick:p},r.default.createElement(c.a,d({},g,{templateKey:"redo",rootTagName:"span"})))),i&&o&&r.default.createElement(u.a,{className:t.clear,onClick:v},r.default.createElement(c.a,d({},g,{templateKey:"clear",rootTagName:"span"}))))};a.a.shape({control:a.a.string.isRequired,toggleLabel:a.a.string.isRequired,toggleLabelActive:a.a.string.isRequired,toggleInput:a.a.string.isRequired,redo:a.a.string.isRequired,clear:a.a.string.isRequired});t.a=f},function(e,t,n){"use strict";var r=n(1),i=n(3),a=(n.n(i),function(e){var t=e.classNameLabel,n=e.classNameInput,i=e.checked,a=e.onToggle,o=e.children;return r.default.createElement("label",{className:t},r.default.createElement("input",{className:n,type:"checkbox",checked:i,onChange:a}),o)});t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(3),s=(n.n(o),n(1)),c=n(262),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.cssClasses,n=e.hits,r=e.results,i=e.showMore,a=e.showMoreLabel,o=e.templateProps,u=this.props.isLastPage?s.default.createElement("button",{disabled:!0},a):s.default.createElement("button",{onClick:i},a);return s.default.createElement("div",null,s.default.createElement(c.a,{cssClasses:t,hits:n,results:r,templateProps:o}),s.default.createElement("div",{className:t.showmore},u))}}]),t}(s.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n(3),c=(n.n(s),n(14)),u=n(15),l=n(20),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handleSelectChange=function(e){var t=e.target.value;a.props.refine(t)},o=n,i(a,o)}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.cssClasses,n=e.templateProps,r=e.items,i=r.find(function(e){return e.isRefined})||{value:""},a=i.value;return o.default.createElement("select",{className:t.select,value:a,onChange:this.handleSelectChange},o.default.createElement("option",{value:"",className:t.option},o.default.createElement(c.a,d({templateKey:"seeAllOption"},n))),r.map(function(e){return o.default.createElement("option",{key:e.value,value:e.value,className:t.option},o.default.createElement(c.a,d({data:e,templateKey:"item"},n)))}))}}]),t}(o.Component);t.a=n.i(u.a)(n.i(l.a)(h))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(3),s=(n.n(o),n(1)),c=n(918),u=n.n(c),l=n(0),d=n(15),f=n(747),h=n(2),p=n.n(h),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u()(e,t.defaultProps)));return n.handleClick=n.handleClick.bind(n),n}return a(t,e),v(t,[{key:"pageLink",value:function(e){var t=e.label,n=e.ariaLabel,r=e.pageNumber,i=e.additionalClassName,a=void 0===i?null:i,o=e.isDisabled,c=void 0!==o&&o,u=e.isActive,l=void 0!==u&&u,d=e.createURL,h={item:p()(this.props.cssClasses.item,a),link:p()(this.props.cssClasses.link)};c?h.item=p()(h.item,this.props.cssClasses.disabled):l&&(h.item=p()(h.item,this.props.cssClasses.active));var v=d&&!c?d(r):"#";return s.default.createElement(f.a,{ariaLabel:n,cssClasses:h,handleClick:this.handleClick,isDisabled:c,key:t+r+n,label:t,pageNumber:r,url:v})}},{key:"previousPageLink",value:function(e){var t=e.isFirstPage,n=e.currentPage,r=e.createURL;return this.pageLink({ariaLabel:"Previous",additionalClassName:this.props.cssClasses.previous,isDisabled:0===this.props.nbHits||t,label:this.props.labels.previous,pageNumber:n-1,createURL:r})}},{key:"nextPageLink",value:function(e){var t=e.isLastPage,n=e.currentPage,r=e.createURL;return this.pageLink({ariaLabel:"Next",additionalClassName:this.props.cssClasses.next,isDisabled:0===this.props.nbHits||t,label:this.props.labels.next,pageNumber:n+1,createURL:r})}},{key:"firstPageLink",value:function(e){var t=e.isFirstPage,n=e.createURL;return this.pageLink({ariaLabel:"First",additionalClassName:this.props.cssClasses.first,isDisabled:0===this.props.nbHits||t,label:this.props.labels.first,pageNumber:0,createURL:n})}},{key:"lastPageLink",value:function(e){var t=e.isLastPage,n=e.nbPages,r=e.createURL;return this.pageLink({ariaLabel:"Last",additionalClassName:this.props.cssClasses.last,isDisabled:0===this.props.nbHits||t,label:this.props.labels.last,pageNumber:n-1,createURL:r})}},{key:"pages",value:function(e){var t=this,n=e.currentPage,r=e.pages,i=e.createURL;return r.map(function(e){return t.pageLink({ariaLabel:e+1,additionalClassName:t.props.cssClasses.page,isActive:e===n,label:e+1,pageNumber:e,createURL:i})})}},{key:"handleClick",value:function(e,t){n.i(l.n)(t)||(t.preventDefault(),this.props.setCurrentPage(e))}},{key:"render",value:function(){return s.default.createElement("ul",{className:this.props.cssClasses.root},this.props.showFirstLast&&this.firstPageLink(this.props),this.previousPageLink(this.props),this.pages(this.props),this.nextPageLink(this.props),this.props.showFirstLast&&this.lastPageLink(this.props))}}]),t}(s.Component);g.defaultProps={nbHits:0,currentPage:0,nbPages:0},t.a=n.i(d.a)(g)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(3),s=(n.n(o),n(1)),c=n(16),u=n.n(c),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),d(t,[{key:"componentWillMount",value:function(){this.handleClick=this.handleClick.bind(this)}},{key:"shouldComponentUpdate",value:function(e){return!u()(this.props,e)}},{key:"handleClick",value:function(e){this.props.handleClick(this.props.pageNumber,e)}},{key:"render",value:function(){var e=this.props,t=e.cssClasses,n=e.label,r=e.ariaLabel,i=e.url,a=e.isDisabled,o="span",c={className:t.link,dangerouslySetInnerHTML:{__html:n}};a||(o="a",c=l({},c,{"aria-label":r,href:i,onClick:this.handleClick}));var u=s.default.createElement(o,c);return s.default.createElement("li",{className:t.item},u)}}]),t}(s.Component);t.a=f},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),c=(n.n(s),n(1)),u=n(14),l=n(749),d=n(2),f=n.n(d),h=n(16),p=n.n(h),v=n(15),g=n(20),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),y(t,[{key:"componentWillMount",value:function(){this.refine=this.refine.bind(this)}},{key:"shouldComponentUpdate",value:function(e){return!p()(this.props.facetValues,e.facetValues)}},{key:"getForm",value:function(){var e=m({currency:this.props.currency},this.props.labels),t=void 0;return t=1===this.props.facetValues.length?{from:void 0!==this.props.facetValues[0].from?this.props.facetValues[0].from:"",to:void 0!==this.props.facetValues[0].to?this.props.facetValues[0].to:""}:{from:"",to:""},c.default.createElement(l.a,{cssClasses:this.props.cssClasses,currentRefinement:t,labels:e,refine:this.refine})}},{key:"getItemFromFacetValue",value:function(e){var t=this,n=f()(this.props.cssClasses.item,r({},this.props.cssClasses.active,e.isRefined)),i=e.from+"_"+e.to,a=function(n){return t.refine(e,n)},o=m({currency:this.props.currency},e);return c.default.createElement("div",{className:n,key:i},c.default.createElement("a",{className:this.props.cssClasses.link,href:e.url,onClick:a},c.default.createElement(u.a,m({data:o,templateKey:"item"},this.props.templateProps))))}},{key:"refine",value:function(e,t){t.preventDefault(),this.props.refine(e)}},{key:"render",value:function(){var e=this;return c.default.createElement("div",null,c.default.createElement("div",{className:this.props.cssClasses.list},this.props.facetValues.map(function(t){return e.getItemFromFacetValue(t)})),this.getForm())}}]),t}(c.Component);b.defaultProps={cssClasses:{}},t.a=n.i(v.a)(n.i(g.a)(b))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),c=(n.n(s),n(1)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={from:e.currentRefinement.from,to:e.currentRefinement.to},n}return o(t,e),u(t,[{key:"componentWillMount",value:function(){this.handleSubmit=this.handleSubmit.bind(this)}},{key:"componentWillReceiveProps",value:function(e){this.setState({from:e.currentRefinement.from,to:e.currentRefinement.to})}},{key:"getInput",value:function(e){var t=this;return c.default.createElement("label",{className:this.props.cssClasses.label},c.default.createElement("span",{className:this.props.cssClasses.currency},this.props.labels.currency," "),c.default.createElement("input",{className:this.props.cssClasses.input,onChange:function(n){return t.setState(r({},e,n.target.value))},ref:function(n){return t[e]=n},type:"number",value:this.state[e]}))}},{key:"handleSubmit",value:function(e){var t=""!==this.from.value?parseInt(this.from.value,10):void 0,n=""!==this.to.value?parseInt(this.to.value,10):void 0;this.props.refine({from:t,to:n},e)}},{key:"render",value:function(){var e=this,t=this.getInput("from"),n=this.getInput("to"),r=this.handleSubmit;return c.default.createElement("form",{className:this.props.cssClasses.form,onSubmit:r,ref:function(t){return e.form=t}},t,c.default.createElement("span",{className:this.props.cssClasses.separator}," ",this.props.labels.separator," "),n,c.default.createElement("button",{className:this.props.cssClasses.button,type:"submit"},this.props.labels.button))}}]),t}(c.Component);l.defaultProps={cssClasses:{},labels:{}},t.a=l},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),c=n(3),u=(n.n(c),n(15)),l=n(20),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=function(e){return function(t){n.setState(r({},e,t.currentTarget.value))}},n.onSubmit=function(e){e.preventDefault(),n.props.refine([n.state.min,n.state.max])},n.state={min:e.values.min,max:e.values.max},n}return o(t,e),d(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({min:e.values.min,max:e.values.max})}},{key:"render",value:function(){var e=this.state,t=e.min,n=e.max,r=this.props,i=r.min,a=r.max,o=r.step,c=r.cssClasses,u=r.labels,l=i>=a;return s.default.createElement("form",{className:c.form,onSubmit:this.onSubmit},s.default.createElement("fieldset",{className:c.fieldset},s.default.createElement("label",{className:c.labelMin},s.default.createElement("input",{className:c.inputMin,type:"number",min:i,max:a,step:o,value:t,onChange:this.onChange("min"),placeholder:i,disabled:l})),s.default.createElement("span",{className:c.separator},u.separator),s.default.createElement("label",{className:c.labelMax},s.default.createElement("input",{className:c.inputMax,type:"number",min:i,max:a,step:o,value:n,onChange:this.onChange("max"),placeholder:a,disabled:l})),s.default.createElement("button",{role:"button",className:c.submit,disabled:l},u.submit)))}}]),t}(s.Component);t.a=n.i(u.a)(n.i(l.a)(f))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(3),s=(n.n(o),n(1)),c=n(14),u=n(16),l=n.n(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),f(t,[{key:"componentWillMount",value:function(){this.handleClick=this.handleClick.bind(this)}},{key:"shouldComponentUpdate",value:function(e){return!l()(this.props,e)}},{key:"handleClick",value:function(e){this.props.handleClick({facetValueToRefine:this.props.facetValueToRefine,isRefined:this.props.isRefined,originalEvent:e})}},{key:"render",value:function(){return s.default.createElement("div",{className:this.props.itemClassName,onClick:this.handleClick},s.default.createElement(c.a,d({data:this.props.templateData,templateKey:this.props.templateKey},this.props.templateProps)),this.props.subItems)}}]),t}(s.Component);t.a=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(3),s=(n.n(o),n(1)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=s.default.createElement("symbol",{xmlns:"http://www.w3.org/2000/svg",id:"sbx-icon-search-12",viewBox:"0 0 40 41"},s.default.createElement("path",{d:"M30.967 27.727l-.03-.03c-.778-.777-2.038-.777-2.815 0l-1.21 1.21c-.78.78-.778 2.04 0 2.817l.03.03 4.025-4.027zm1.083 1.084L39.24 36c.778.778.78 2.037 0 2.816l-1.21 1.21c-.777.778-2.038.78-2.816 0l-7.19-7.19 4.026-4.025zM15.724 31.45c8.684 0 15.724-7.04 15.724-15.724C31.448 7.04 24.408 0 15.724 0 7.04 0 0 7.04 0 15.724c0 8.684 7.04 15.724 15.724 15.724zm0-3.93c6.513 0 11.793-5.28 11.793-11.794 0-6.513-5.28-11.793-11.793-11.793C9.21 3.93 3.93 9.21 3.93 15.725c0 6.513 5.28 11.793 11.794 11.793z",fillRule:"evenodd"})),l=s.default.createElement("symbol",{xmlns:"http://www.w3.org/2000/svg",id:"sbx-icon-clear-2",viewBox:"0 0 20 20"},s.default.createElement("path",{d:"M8.96 10L.52 1.562 0 1.042 1.04 0l.522.52L10 8.96 18.438.52l.52-.52L20 1.04l-.52.522L11.04 10l8.44 8.438.52.52L18.96 20l-.522-.52L10 11.04l-8.438 8.44-.52.52L0 18.96l.52-.522L8.96 10z",fillRule:"evenodd"})),d=s.default.createElement("button",{type:"submit",title:"Submit your search query.",className:"sbx-sffv__submit"},s.default.createElement("svg",{role:"img","aria-label":"Search"},s.default.createElement("use",{xlinkHref:"#sbx-icon-search-12"}))),f=s.default.createElement("button",{type:"reset",title:"Clear the search query.",className:"sbx-sffv__reset"},s.default.createElement("svg",{role:"img","aria-label":"Reset"},s.default.createElement("use",{xlinkHref:"#sbx-icon-clear-2"}))),h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,[{key:"clearInput",value:function(){this.input&&(this.input.value="")}},{key:"validateSearch",value:function(e){if(e.preventDefault(),this.input){this.input.value&&this.props.onValidate()}}},{key:"render",value:function(){var e=this,t=this.props,n=t.placeholder,r=t.onChange,i=this.props.disabled?"sbx-sffv__input sbx-sffv__input-disabled":"sbx-sffv__input",a=this.props.disabled?"searchbox sbx-sffv sbx-sffv-disabled":"searchbox sbx-sffv";return s.default.createElement("form",{noValidate:"novalidate",className:a,onReset:function(){r("")},onSubmit:function(t){return e.validateSearch(t)}},s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"none"}},u,l),s.default.createElement("div",{role:"search",className:"sbx-sffv__wrapper"},s.default.createElement("input",{type:"search",name:"search",placeholder:n,autoComplete:"off",required:"required",className:i,onChange:function(e){return r(e.target.value)},ref:function(t){e.input=t},disabled:this.props.disabled}),d,f))}}]),t}(s.Component);t.a=h},function(e,t,n){"use strict";var r=n(1),i=n(3),a=(n.n(i),n(339)),o=n.n(a),s=n(2),c=n.n(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(e){var t=e.style,n=e.children,i=Math.round(parseFloat(t.left)),a=o()([0,50,100],i),s=Array.isArray(n)?n[0]:n,l=Math.round(100*parseFloat(s))/100;return r.default.createElement("div",{style:u({},t,{marginLeft:100===i?"-2px":0}),className:c()("ais-range-slider--marker ais-range-slider--marker-horizontal",{"ais-range-slider--marker-large":a})},a?r.default.createElement("div",{className:"ais-range-slider--value"},l):null)};t.a=l},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(930),c=n.n(s),u=n(345),l=n.n(u),d=n(338),f=n.n(d),h=n(3),p=(n.n(h),n(1)),v=n(1024),g=n.n(v),m=n(2),y=n.n(m),b=n(753),_=n(15),w=n(20),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=function(e){function t(){var e,n,r,o;i(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.handleChange=function(e){var t=e.values;r.isDisabled||r.props.refine(t)},r.createHandleComponent=function(e){return function(t){var n=Math.round(100*parseFloat(t["aria-valuenow"]))/100,r=f()(e,"format")?e.format(n):n,i=y()("ais-range-slider--handle",t.className,{"ais-range-slider--handle-lower":0===t["data-handle-key"],"ais-range-slider--handle-upper":1===t["data-handle-key"]});return p.default.createElement("div",S({},t,{className:i}),e?p.default.createElement("div",{className:"ais-range-slider--tooltip"},r):null)}},o=n,a(r,o)}return o(t,e),k(t,[{key:"computeDefaultPitPoints",value:function(e){var t=e.min,n=e.max,i=n-t,a=34,o=i/a;return[t].concat(r(c()(a-1,function(e){return t+o*(e+1)})),[n])}},{key:"computeSnapPoints",value:function(e){var t=e.min,n=e.max,i=e.step;if(i)return[].concat(r(l()(t,n,i)),[n])}},{key:"render",value:function(){var e=this.props,t=e.tooltips,n=e.step,r=e.pips,i=e.values,a=this.isDisabled?{min:this.props.min,max:this.props.max+.001}:this.props,o=a.min,s=a.max,c=this.computeSnapPoints({min:o,max:s,step:n}),u=!1===r?[]:this.computeDefaultPitPoints({min:o,max:s});return p.default.createElement("div",{className:this.isDisabled?"ais-range-slider--disabled":""},p.default.createElement(g.a,{handle:this.createHandleComponent(t),onChange:this.handleChange,min:o,max:s,pitComponent:b.a,pitPoints:u,snap:!0,snapPoints:c,values:this.isDisabled?[o,s]:i,disabled:this.isDisabled}))}},{key:"isDisabled",get:function(){return this.props.min>=this.props.max}}]),t}(p.Component);t.a=n.i(_.a)(n.i(w.a)(T))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(3),s=(n.n(o),n(1)),c=n(14),u=n(15),l=n(20),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),f(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.nbHits!==e.nbHits||this.props.processingTimeMS!==e.processingTimeMS}},{key:"render",value:function(){var e={hasManyResults:this.props.nbHits>1,hasNoResults:0===this.props.nbHits,hasOneResult:1===this.props.nbHits,hitsPerPage:this.props.hitsPerPage,nbHits:this.props.nbHits,nbPages:this.props.nbPages,page:this.props.page,processingTimeMS:this.props.processingTimeMS,query:this.props.query,cssClasses:this.props.cssClasses};return s.default.createElement(c.a,d({data:e,templateKey:"body"},this.props.templateProps))}}]),t}(s.Component);t.a=n.i(u.a)(n.i(l.a)(h))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(345),a=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t){r(this,e),this.currentPage=t.currentPage,this.total=t.total,this.padding=t.padding}return o(e,[{key:"pages",value:function(){var e=this.total,t=this.currentPage,n=this.padding;if(0===e)return[0];var r=this.nbPagesDisplayed(n,e);if(r===e)return a()(0,e);var i=this.calculatePaddingLeft(t,n,e,r),o=r-i,s=t-i,c=t+o;return a()(s,c)}},{key:"nbPagesDisplayed",value:function(e,t){return Math.min(2*e+1,t)}},{key:"calculatePaddingLeft",value:function(e,t,n,r){return e<=t?e:e>=n-t?r-(n-e):t}},{key:"isLastPage",value:function(){return this.currentPage===this.total-1}},{key:"isFirstPage",value:function(){return 0===this.currentPage}}]),e}();t.a=s},function(e,t,n){"use strict";function r(e,t){var n=Math.round(e/t)*t;return n<1&&(n=1),n}function i(e){if(e.min===e.max)return[];var t=void 0;t=e.avg<100?1:e.avg<1e3?10:100;for(var n=r(Math.round(e.avg),t),i=Math.ceil(e.min),a=r(Math.floor(e.max),t);a>e.max;)a-=t;var o=void 0,s=void 0,c=[];if(i!==a){for(o=i,c.push({to:o});o<n;)s=c[c.length-1].to,o=r(s+(n-i)/3,t),o<=s&&(o=s+1),c.push({from:s,to:o});for(;o<a;)s=c[c.length-1].to,o=r(s+(a-n)/3,t),o<=s&&(o=s+1),c.push({from:s,to:o});1===c.length&&o!==n&&(c.push({from:o,to:n}),o=n),1===c.length?(c[0].from=e.min,c[0].to=e.max):delete c[c.length-1].to}return c}t.a=i},function(e,t,n){"use strict";var r=n(0),i=n(99);t.a=n.i(r.e)(i.a,"'connectRangeSlider' was replaced by 'connectRange'.\n  Please see https://community.algolia.com/instantsearch.js/v2/connectors/connectRange.html")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(81),i=n.n(r),a=n(1110),o=n.n(a),s=n(283),c=n(286),u=o()(s.b);u.version=c.a,u.createQueryString=i.a.url.getQueryStringFromState,Object.defineProperty(u,"widgets",{get:function(){throw new ReferenceError("You can't access 'instantsearch.widgets' directly from the ES6 build.\nImport the widgets this way: 'import {SearchBox} from \"instantsearch.js/es/widgets\"'")}}),Object.defineProperty(u,"connectors",{get:function(){throw new ReferenceError("You can't access 'instantsearch.connectors' directly from the ES6 build.\nImport the connectors this way: 'import {connectSearchBox} from \"instantsearch.js/es/connectors\"'")}}),t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(81),a=n.n(i),o=n(16),s=n.n(o),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.instantSearchInstance,i=t.router,a=t.stateMapping;r(this,e),this.originalConfig=null,this.firstRender=!0,this.router=i,this.stateMapping=a,this.instantSearchInstance=n,this.originalUIState=this.stateMapping.routeToState(this.router.read())}return u(e,[{key:"init",value:function(e){var t=e.state;this.initState=this.getAllUIStates({searchParameters:t})}},{key:"getConfiguration",value:function(e){return this.originalConfig=a()({},e.index,e).state,c({},this.getAllSearchParameters({currentSearchParameters:this.originalConfig,uiState:this.originalUIState}))}},{key:"render",value:function(e){var t=e.state;this.firstRender&&(this.firstRender=!1,this.setupRouting(t))}},{key:"setupRouting",value:function(e){var t=this,n=this.instantSearchInstance.helper;this.router.onUpdate(function(r){var i=t.stateMapping.routeToState(r),a=t.getAllUIStates({searchParameters:n.state});if(!s()(i,a)){var o=t.getAllSearchParameters({currentSearchParameters:e,instantSearchInstance:t.instantSearchInstance,uiState:i}),u=c({},t.originalConfig,o);s()(u,o)||n.overrideStateWithoutTriggeringChangeEvent(o).search()}}),this.renderURLFromState=function(e){var n=t.getAllUIStates({searchParameters:e}),r=t.stateMapping.stateToRoute(n);t.router.write(r)},n.on("change",this.renderURLFromState);var r=this.getAllUIStates({searchParameters:e});if(!s()(this.initState,r)){var i=this.stateMapping.stateToRoute(r);this.router.write(i)}}},{key:"dispose",value:function(){this.renderURLFromState&&this.instantSearchInstance.helper.removeListener("change",this.renderURLFromState),this.router.dispose()}},{key:"getAllSearchParameters",value:function(e){var t=e.currentSearchParameters,n=e.uiState;return this.instantSearchInstance.widgets.reduce(function(e,t){return t.getWidgetSearchParameters?t.getWidgetSearchParameters(e,{uiState:n}):e},t)}},{key:"getAllUIStates",value:function(e){var t=e.searchParameters,n=this.instantSearchInstance,r=n.widgets,i=n.helper;return r.filter(function(e){return Boolean(e.getWidgetState)}).reduce(function(e,n){return n.getWidgetState(e,{helper:i,searchParameters:t})},{})}},{key:"createURL",value:function(e){var t=this.getAllUIStates({searchParameters:e}),n=this.stateMapping.stateToRoute(t);return this.router.createURL(n)}},{key:"onHistoryChange",value:function(e){var t=this,n=this.instantSearchInstance.helper;this.router.onUpdate(function(r){var i=t.stateMapping.routeToState(r),a=t.getAllUIStates({searchParameters:n.state});if(!s()(i,a)){var o=t.getAllSearchParameters({currentSearchParameters:n.state,instantSearchInstance:t.instantSearchInstance,uiState:i}),u=c({},t.originalConfig,o);e(u)}})}}]),e}();t.a=l},function(e,t,n){"use strict";t.a=function(e){var t=e.numberLocale;return{formatNumber:function(e,n){return Number(n(e)).toLocaleString(t)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(284);n.d(t,"history",function(){return r.a})},function(e,t,n){"use strict";t.a={active:'<a class="ais-show-more ais-show-more__active">Show less</a>',inactive:'<a class="ais-show-more ais-show-more__inactive">Show more</a>'}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,[{key:"stateToRoute",value:function(e){return e}},{key:"routeToState",value:function(e){return e}}]),e}();t.a=function(){return new a}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return a()+window.location.pathname+e}function a(){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useHash||!1,n=e.urlUtils;return new y(n||(t?g:m),e)}var s=n(81),c=n.n(s),u=n(150),l=n.n(u),d=n(16),f=n.n(d),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=c.a.AlgoliaSearchHelper,g={ignoreNextPopState:!1,character:"#",onpopstate:function(e){var t=this;this._onHashChange=function(n){if(t.ignoreNextPopState)return void(t.ignoreNextPopState=!1);e(n)},window.addEventListener("hashchange",this._onHashChange)},pushState:function(e){this.ignoreNextPopState=!0,window.location.assign(i(this.createURL(e)))},createURL:function(e){return window.location.search+this.character+e},readUrl:function(){return window.location.hash.slice(1)},dispose:function(){window.removeEventListener("hashchange",this._onHashChange),window.location.assign(i(""))}},m={character:"?",onpopstate:function(e){this._onPopState=function(){return e.apply(void 0,arguments)},window.addEventListener("popstate",this._onPopState)},pushState:function(e,t){var n=t.getHistoryState;window.history.pushState(n(),"",i(this.createURL(e)))},createURL:function(e){return this.character+e+document.location.hash},readUrl:function(){return window.location.search.slice(1)},dispose:function(){window.removeEventListener("popstate",this._onPopState),window.history.pushState(null,null,i(""))}},y=function(){function e(t,n){r(this,e),this.urlUtils=t,this.originalConfig=null,this.mapping=n.mapping||{},this.getHistoryState=n.getHistoryState||function(){return null},this.threshold=n.threshold||700,this.trackedParameters=n.trackedParameters||["query","attribute:*","index","page","hitsPerPage"],this.firstRender=!0,this.searchParametersFromUrl=v.getConfigurationFromQueryString(this.urlUtils.readUrl(),{mapping:this.mapping})}return p(e,[{key:"init",value:function(e){var t=e.state;this.initState=t}},{key:"getConfiguration",value:function(e){return this.originalConfig=c()({},e.index,e).state,this.searchParametersFromUrl}},{key:"render",value:function(e){var t=this,n=e.helper,r=e.state;if(this.firstRender){this.firstRender=!1,this.onHistoryChange(this.onPopState.bind(this,n)),n.on("change",function(e){return t.renderURLFromState(e)});this.getQueryString(this.initState)!==this.getQueryString(r)&&this.renderURLFromState(r)}}},{key:"dispose",value:function(e){e.helper.removeListener("change",this.renderURLFromState),this.urlUtils.dispose()}},{key:"onPopState",value:function(e,t){clearTimeout(this.urlUpdateTimeout);var n=e.getState(this.trackedParameters),r=h({},this.originalConfig,n);f()(r,t)||e.overrideStateWithoutTriggeringChangeEvent(t).search()}},{key:"renderURLFromState",value:function(e){var t=this,n=this.getQueryString(e);clearTimeout(this.urlUpdateTimeout),this.urlUpdateTimeout=setTimeout(function(){t.urlUtils.pushState(n,{getHistoryState:t.getHistoryState})},this.threshold)}},{key:"getQueryString",value:function(e){var t=this.urlUtils.readUrl(),n=v.getForeignConfigurationInQueryString(t,{mapping:this.mapping});return l.a.getQueryStringFromState(e.filter(this.trackedParameters),{moreAttributes:n,mapping:this.mapping,safe:!0})}},{key:"createURL",value:function(e,t){var n=t.absolute,r=e.filter(this.trackedParameters),a=this.urlUtils.createURL(c.a.url.getQueryStringFromState(r,{mapping:this.mapping}));return n?i(a):a}},{key:"onHistoryChange",value:function(e){var t=this;this.urlUtils.onpopstate(function(){var n=t.urlUtils.readUrl(),r=v.getConfigurationFromQueryString(n,{mapping:t.mapping}),i=h({},t.originalConfig,r);e(i)})}}]),e}();t.a=o},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pushFunction,n=e.delay,r=void 0===n?3e3:n,o=e.triggerOnUIInteraction,s=void 0!==o&&o,c=e.pushInitialSearch,u=void 0===c||c,l=e.pushPagination,d=void 0!==l&&l;if(!t)throw new Error(a);var f=null,h=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n].join("+");t.push(encodeURIComponent(n)+"="+encodeURIComponent(n)+"_"+encodeURIComponent(r))}return t.join("&")},p=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(r.hasOwnProperty(">=")&&r.hasOwnProperty("<="))r[">="][0]===r["<="][0]?t.push(n+"="+n+"_"+r[">="]):t.push(n+"="+n+"_"+r[">="]+"to"+r["<="]);else if(r.hasOwnProperty(">="))t.push(n+"="+n+"_from"+r[">="]);else if(r.hasOwnProperty("<="))t.push(n+"="+n+"_to"+r["<="]);else if(r.hasOwnProperty("=")){var i=[];for(var a in r["="])r["="].hasOwnProperty(a)&&i.push(r["="][a]);t.push(n+"="+n+"_"+i.join("-"))}}return t.join("&")},v="",g=function(e){if(null!==e){var n=[],r=h(i({},e.state.disjunctiveFacetsRefinements,e.state.facetsRefinements,e.state.hierarchicalFacetsRefinements)),a=p(e.state.numericRefinements);""!==r&&n.push(r),""!==a&&n.push(a),n=n.join("&");var o="Query: "+e.state.query+", "+n;!0===d&&(o+=", Page: "+e.state.page),v!==o&&(t(n,e.state,e.results),v=o)}},m=void 0,y=!0;return!0===u&&(y=!1),{init:function(){!0===s&&(document.addEventListener("click",function(){g(f)}),window.addEventListener("beforeunload",function(){g(f)}))},render:function(e){var t=e.results,n=e.state;if(!0===y)return void(y=!1);f={results:t,state:n},m&&clearTimeout(m),m=setTimeout(function(){return g(f)},r)}}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="Usage:\nanalytics({\n  pushFunction,\n  [ delay=3000 ],\n  [ triggerOnUIInteraction=false ],\n  [ pushInitialSearch=true ]\n})";t.a=r},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attributes,r=e.autoHideContainer,a=void 0!==r&&r,s=e.container,p=e.cssClasses,v=void 0===p?{}:p,g=e.rootPath,m=void 0===g?null:g,y=e.separator,b=void 0===y?" > ":y,_=e.templates,w=void 0===_?u.a:_,S=e.transformData;if(!s)throw new Error(h);var k=n.i(l.k)(s),T={disabledLabel:o()(d("disabledLabel"),v.disabledLabel),home:o()(d("home"),v.home),item:o()(d("item"),v.item),label:o()(d("label"),v.label),root:o()(d("root"),v.root),separator:o()(d("separator"),v.separator)},C=f({autoHideContainer:a,containerNode:k,cssClasses:T,renderState:{},separator:b,templates:w,transformData:S});try{return n.i(c.a)(C,function(){return n.i(i.unmountComponentAtNode)(k)})({attributes:t,rootPath:m})}catch(e){throw new Error(h)}}var i=n(1),a=n(2),o=n.n(a),s=n(738),c=n(263),u=n(768),l=n(0);t.a=r;var d=n.i(l.i)("ais-breadcrumb"),f=function(e){var t=e.autoHideContainer,r=e.containerNode,a=e.cssClasses,o=e.renderState,c=e.separator,d=e.templates,f=e.transformData;return function(e,h){var p=e.canRefine,v=e.createURL,g=e.instantSearchInstance,m=e.items,y=e.refine;if(h)return void(o.templateProps=n.i(l.j)({defaultTemplates:u.a,templatesConfig:g.templatesConfig,templates:d,transformData:f}));var b=t&&!p;n.i(i.render)(i.default.createElement(s.a,{canRefine:p,cssClasses:a,createURL:v,items:m,refine:y,separator:c,shouldAutoHideContainer:b,templateProps:o.templateProps}),r)}},h="Usage:\nbreadcrumb({\n  container,\n  attributes,\n  [ autoHideContainer=true ],\n  [ cssClasses.{disabledLabel, home, label, root, separator}={} ],\n  [ templates.{home, separator}]\n  [ transformData.{item} ],\n})"},function(e,t,n){"use strict";t.a={home:"Home",separator:""}},function(e,t,n){"use strict";function r(e){var t=e.container,r=e.templates,a=void 0===r?l.a:r,o=e.cssClasses,p=void 0===o?{}:o,v=e.collapsible,g=void 0!==v&&v,m=e.autoHideContainer,y=void 0===m||m,b=e.excludeAttributes,_=void 0===b?[]:b,w=e.clearsQuery,S=void 0!==w&&w;if(!t)throw new Error(h);var k=n.i(c.k)(t),T={root:s()(d(null),p.root),header:s()(d("header"),p.header),body:s()(d("body"),p.body),footer:s()(d("footer"),p.footer),link:s()(d("link"),p.link)},C=f({containerNode:k,cssClasses:T,collapsible:g,autoHideContainer:y,renderState:{},templates:a});try{return n.i(u.a)(C,function(){return n.i(i.unmountComponentAtNode)(k)})({excludeAttributes:_,clearsQuery:S})}catch(e){throw new Error(h)}}var i=n(1),a=n(739),o=n(2),s=n.n(o),c=n(0),u=n(264),l=n(770);t.a=r;var d=n.i(c.i)("ais-clear-all"),f=function(e){var t=e.containerNode,r=e.cssClasses,o=e.collapsible,s=e.autoHideContainer,u=e.renderState,d=e.templates;return function(e,f){var h=e.refine,p=e.hasRefinements,v=e.createURL,g=e.instantSearchInstance;if(f)return void(u.templateProps=n.i(c.j)({defaultTemplates:l.a,templatesConfig:g.templatesConfig,templates:d}));var m=s&&!p;n.i(i.render)(i.default.createElement(a.a,{refine:h,collapsible:o,cssClasses:r,hasRefinements:p,shouldAutoHideContainer:m,templateProps:u.templateProps,url:v()}),t)}},h="Usage:\nclearAll({\n  container,\n  [ cssClasses.{root,header,body,footer,link}={} ],\n  [ templates.{header,link,footer}={link: 'Clear all'} ],\n  [ autoHideContainer=true ],\n  [ collapsible=false ],\n  [ excludeAttributes=[] ]\n})"},function(e,t,n){"use strict";t.a={header:"",link:"Clear all",footer:""}},function(e,t,n){"use strict";function r(e){try{return n.i(i.a)()({searchParameters:e})}catch(e){throw new Error(a)}}var i=n(265);t.a=r;var a="Usage:\nsearch.addWidget(\n  instantsearch.widgets.configure({\n    // any searchParameter\n  })\n);\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/widgets/configure.html\n"},function(e,t,n){"use strict";function r(e){var t=e.container,r=e.attributes,a=void 0===r?[]:r,s=e.onlyListedAttributes,u=void 0!==s&&s,d=e.clearAll,h=void 0===d?"before":d,v=e.templates,m=void 0===v?k.a:v,b=e.transformData,w=e.autoHideContainer,P=void 0===w||w,$=e.cssClasses,A=void 0===$?{}:$,O=e.collapsible,I=void 0!==O&&O,R=e.clearsQuery,L=void 0!==R&&R,j=c()(b)||y()(b)||g()(b)&&y()(b.item),D=["header","item","clearAll","footer"],N=g()(m)&&_()(m,function(e,t,n){return e&&-1!==D.indexOf(n)&&(f()(t)||y()(t))},!0),U=["root","header","body","clearAll","list","item","link","count","footer"],M=g()(A)&&_()(A,function(e,t,n){return e&&-1!==U.indexOf(n)&&f()(t)||p()(t)},!0);if(!((f()(t)||n.i(T.p)(t))&&p()(a)&&l()(u)&&-1!==[!1,"before","after"].indexOf(h)&&g()(m)&&N&&j&&l()(P)&&M))throw new Error(E);var F=n.i(T.k)(t),B={root:o()(C(null),A.root),header:o()(C("header"),A.header),body:o()(C("body"),A.body),clearAll:o()(C("clear-all"),A.clearAll),list:o()(C("list"),A.list),item:o()(C("item"),A.item),link:o()(C("link"),A.link),count:o()(C("count"),A.count),footer:o()(C("footer"),A.footer)},q=x({containerNode:F,clearAllPosition:h,collapsible:I,cssClasses:B,autoHideContainer:P,renderState:{},templates:m,transformData:b});try{return n.i(S.a)(q,function(){return n.i(i.unmountComponentAtNode)(F)})({attributes:a,onlyListedAttributes:u,clearAll:h,clearsQuery:L})}catch(e){throw new Error(E)}}var i=n(1),a=n(2),o=n.n(a),s=n(343),c=n.n(s),u=n(341),l=n.n(u),d=n(178),f=n.n(d),h=n(4),p=n.n(h),v=n(50),g=n.n(v),m=n(49),y=n.n(m),b=n(117),_=n.n(b),w=n(740),S=n(266),k=n(773),T=n(0);t.a=r;var C=n.i(T.i)("ais-current-refined-values"),x=function(e){var t=e.autoHideContainer,r=e.clearAllPosition,a=e.collapsible,o=e.containerNode,s=e.cssClasses,c=e.renderState,u=e.transformData,l=e.templates;return function(e,d){var f=e.attributes,h=e.clearAllClick,p=e.clearAllURL,v=e.refine,g=e.createURL,m=e.refinements,y=e.instantSearchInstance;if(d)return void(c.templateProps=n.i(T.j)({transformData:u,defaultTemplates:k.a,templatesConfig:y.templatesConfig,templates:l}));var b=t&&m&&0===m.length,_=m.map(function(e){return v.bind(null,e)}),S=m.map(function(e){return g(e)});n.i(i.render)(i.default.createElement(w.a,{attributes:f,clearAllClick:h,clearAllPosition:r,clearAllURL:p,clearRefinementClicks:_,clearRefinementURLs:S,collapsible:a,cssClasses:s,refinements:m,shouldAutoHideContainer:b,templateProps:c.templateProps}),o)}},E="Usage:\ncurrentRefinedValues({\n  container,\n  [ attributes: [{name[, label, template, transformData]}] ],\n  [ onlyListedAttributes = false ],\n  [ clearAll = 'before' ] // One of ['before', 'after', false]\n  [ templates.{header,item,clearAll,footer} ],\n  [ transformData.{item} ],\n  [ autoHideContainer = true ],\n  [ cssClasses.{root, header, body, clearAll, list, item, link, count, footer} = {} ],\n  [ collapsible = false ]\n  [ clearsQuery = false ]\n})"},function(e,t,n){"use strict";function r(e){var t=e.label,n=e.operator,r=e.displayOperator,i=e.exclude,a=e.name,o=e.count,s=e.cssClasses,c=e.query,u=n?r:"",l=t?t+" "+(u||":")+" ":u,d=void 0===o?0:o,f=c?"":'<span class="'+s.count+'">'+d+"</span>";return l+" "+(i?"-":"")+" "+a+" "+f}t.a={header:"",item:r,clearAll:"Clear all",footer:""}},function(e,t,n){"use strict";var r=n(1),i=n(0),a=n(742),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(e){var t=e.refine,n=e.paddingBoundingBox,r=e.mapInstance,i=Math.pow(2,r.getZoom()),a=r.getProjection().fromLatLngToPoint(r.getBounds().getNorthEast());a.x=a.x-n.right/i,a.y=a.y+n.top/i;var o=r.getProjection().fromLatLngToPoint(r.getBounds().getSouthWest());o.x=o.x+n.right/i,o.y=o.y-n.bottom/i;var s=r.getProjection().fromPointToLatLng(a),c=r.getProjection().fromPointToLatLng(o);t({northEast:{lat:s.lat(),lng:s.lng()},southWest:{lat:c.lat(),lng:c.lng()}})},u=function(e,t){return e.reduce(function(e,n){var r=s(e,2),i=r[0],a=r[1];return t.includes(n.__id)?[i.concat(n),a]:[i,a.concat(n)]},[[],[]])},l=function(e,t){var l=e.items,d=e.position,f=e.refine,h=e.clearMapRefinement,p=e.toggleRefineOnMapMove,v=e.isRefineOnMapMove,g=e.setMapMoveSinceLastRefine,m=e.hasMapMoveSinceLastRefine,y=e.isRefinedWithMap,b=e.widgetParams,_=e.instantSearchInstance,w=b.container,S=b.googleReference,k=b.cssClasses,T=b.templates,C=b.initialZoom,x=b.initialPosition,E=b.enableClearMapRefinement,P=b.enableRefineControl,$=b.paddingBoundingBox,A=b.mapOptions,O=b.createMarker,I=b.markerOptions,R=b.renderState;if(t){R.isUserInteraction=!0,R.isPendingRefine=!1,R.markers=[];var L=document.createElement("div");L.className=k.root,w.appendChild(L);var j=document.createElement("div");j.className=k.map,L.appendChild(j);var D=document.createElement("div");D.className=k.controls,L.appendChild(D),R.mapInstance=new S.maps.Map(j,o({mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1,clickableIcons:!1,zoomControlOptions:{position:S.maps.ControlPosition.LEFT_TOP}},A));var N=function(){var e=function(){R.isUserInteraction&&(g(),v()&&(R.isPendingRefine=!0))};R.mapInstance.addListener("center_changed",e),R.mapInstance.addListener("zoom_changed",e),R.mapInstance.addListener("dragstart",e),R.mapInstance.addListener("idle",function(){R.isUserInteraction&&R.isPendingRefine&&(R.isPendingRefine=!1,c({mapInstance:R.mapInstance,refine:f,paddingBoundingBox:$}))})};return S.maps.event.addListenerOnce(R.mapInstance,"idle",N),void(R.templateProps=n.i(i.j)({templatesConfig:_.templatesConfig,templates:T}))}if(!l.length&&!y()&&!m()){var U=d||x;R.isUserInteraction=!1,R.mapInstance.setCenter(U),R.mapInstance.setZoom(C),R.isUserInteraction=!0}var M=l.map(function(e){return e.objectID}),F=u(R.markers,M),B=s(F,2),q=B[0],H=B[1],V=q.map(function(e){return e.__id}),z=l.filter(function(e){return!V.includes(e.objectID)});H.forEach(function(e){return e.setMap(null)}),R.markers=q.concat(z.map(function(e){var t=O({map:R.mapInstance,item:e});return Object.keys(I.events).forEach(function(n){t.addListener(n,function(r){I.events[n]({map:R.mapInstance,event:r,item:e,marker:t})})}),t}));var W=R.markers.length,G=R.mapInstance.getCenter(),Y=R.mapInstance.getZoom(),Q=void 0!==G&&void 0!==Y,X=!m()&&(!y()||y()&&!Q);if(W&&X){var J=R.markers.reduce(function(e,t){return e.extend(t.getPosition())},new S.maps.LatLngBounds);R.isUserInteraction=!1,R.mapInstance.fitBounds(J),R.isUserInteraction=!0}n.i(r.render)(r.default.createElement(a.a,{cssClasses:k,enableRefineControl:P,enableClearMapRefinement:E,isRefineOnMapMove:v(),isRefinedWithMap:y(),hasMapMoveSinceLastRefine:m(),onRefineToggle:p,onRefineClick:function(){return c({mapInstance:R.mapInstance,refine:f,paddingBoundingBox:$})},onClearClick:h,templateProps:R.templateProps}),w.querySelector("."+k.controls))};t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){return function(t){function n(t){var a=t.__id,o=t.position,s=t.map,c=t.template,u=t.className,l=t.anchor,d=void 0===l?{x:0,y:0}:l;r(this,n);var f=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return f.__id=a,f.anchor=d,f.listeners={},f.latLng=new e.maps.LatLng(o),f.element=document.createElement("div"),f.element.className=u,f.element.style.position="absolute",f.element.innerHTML=c,f.setMap(s),f}return a(n,t),o(n,[{key:"onAdd",value:function(){this.getPanes().overlayMouseTarget.appendChild(this.element);var e=this.element.getBoundingClientRect();this.offset={x:this.anchor.x+e.width/2,y:this.anchor.y+e.height},this.element.style.width=e.width+"px"}},{key:"draw",value:function(){var e=this.getProjection().fromLatLngToDivPixel(this.latLng);this.element.style.left=Math.round(e.x-this.offset.x)+"px",this.element.style.top=Math.round(e.y-this.offset.y)+"px",this.element.style.zIndex=parseInt(this.element.style.top,10)}},{key:"onRemove",value:function(){var e=this;this.element&&(this.element.parentNode.removeChild(this.element),Object.keys(this.listeners).forEach(function(t){e.element.removeEventListener(t,e.listeners[t])}),delete this.element,delete this.listeners)}},{key:"addListener",value:function(e,t){this.listeners[e]=t,this.element.addEventListener(e,t)}},{key:"getPosition",value:function(){return this.latLng}}]),n}(e.maps.OverlayView)};t.a=s},function(e,t,n){"use strict";t.a={clear:"Clear the map refinement",toggle:"Search as I move the map",redo:"Redo search here"}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=n(2),a=n.n(i),o=n(116),s=n.n(o),c=n(1),u=n(0),l=n(267),d=n(774),f=n(776),h=n(775),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=n.i(u.i)("ais-geo-search"),g="Usage:\n\ngeoSearch({\n  container,\n  googleReference,\n  [ initialZoom = 1 ],\n  [ initialPosition = { lat: 0, lng: 0 } ],\n  [ paddingBoundingBox = { top: 0, right: 0, bottom: 0, right: 0 } ],\n  [ cssClasses.{root,map,controls,clear,control,toggleLabel,toggleLabelActive,toggleInput,redo} = {} ],\n  [ templates.{clear,toggle,redo} ],\n  [ mapOptions ],\n  [ builtInMarker ],\n  [ customHTMLMarker = false ],\n  [ enableClearMapRefinement = true ],\n  [ enableRefineControl = true ],\n  [ enableRefineOnMapMove = true ],\n  [ enableGeolocationWithIP = true ],\n  [ position ],\n  [ radius ],\n  [ precision ],\n})\n\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/widgets/geoSearch.html\n",m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initialZoom,i=void 0===t?1:t,o=e.initialPosition,m=void 0===o?{lat:0,lng:0}:o,y=e.templates,b=void 0===y?{}:y,_=e.cssClasses,w=void 0===_?{}:_,S=e.paddingBoundingBox,k=void 0===S?{}:S,T=e.builtInMarker,C=void 0===T?{}:T,x=e.customHTMLMarker,E=void 0!==x&&x,P=e.enableClearMapRefinement,$=void 0===P||P,A=e.enableRefineControl,O=void 0===A||A,I=e.container,R=e.googleReference,L=r(e,["initialZoom","initialPosition","templates","cssClasses","paddingBoundingBox","builtInMarker","customHTMLMarker","enableClearMapRefinement","enableRefineControl","container","googleReference"]),j={createOptions:s.a,events:{}},D={template:"<p>Your custom HTML Marker</p>",createOptions:s.a,events:{}},N={top:0,right:0,bottom:0,left:0};if(!I)throw new Error('Must provide a "container". '+g);if(!R)throw new Error('Must provide a "googleReference". '+g);var U=n.i(u.k)(I),M={root:a()(v(null),w.root),map:a()(v("map"),w.map),controls:a()(v("controls"),w.controls),clear:a()(v("clear"),w.clear),control:a()(v("control"),w.control),toggleLabel:a()(v("toggle-label"),w.toggleLabel),toggleLabelActive:a()(v("toggle-label-active"),w.toggleLabelActive),toggleInput:a()(v("toggle-input"),w.toggleInput),redo:a()(v("redo"),w.redo)},F=p({},f.a,b),B=p({},j,C),q=Boolean(E)&&p({},D,E),H=p({},N,k),V=function(e){var t=e.item,n=r(e,["item"]);return new R.maps.Marker(p({},B.createOptions(t),n,{__id:t.objectID,position:t._geoloc}))},z=n.i(h.a)(R),W=function(e){var t=e.item,i=r(e,["item"]);return new z(p({},q.createOptions(t),i,{__id:t.objectID,position:t._geoloc,className:a()(v("marker")),template:n.i(u.l)({templateKey:"template",templates:q,data:t})}))},G=q?W:V,Y=q||B;try{return n.i(l.a)(d.a,function(){for(n.i(c.unmountComponentAtNode)(U.querySelector("."+M.controls));U.firstChild;)U.removeChild(U.firstChild)})(p({},L,{renderState:{},container:U,googleReference:R,initialZoom:i,initialPosition:m,templates:F,cssClasses:M,paddingBoundingBox:H,createMarker:G,markerOptions:Y,enableClearMapRefinement:$,enableRefineControl:O}))}catch(e){throw new Error("See usage. "+g)}};t.a=m},function(e,t,n){"use strict";t.a={header:"",item:'<a class="{{cssClasses.link}}" href="{{url}}">{{label}} <span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span></a>',footer:""}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.attributes,a=e.separator,c=void 0===a?" > ":a,p=e.rootPath,v=void 0===p?null:p,g=e.showParentLevel,m=void 0===g||g,y=e.limit,b=void 0===y?10:y,_=e.sortBy,w=void 0===_?["name:asc"]:_,S=e.cssClasses,k=void 0===S?{}:S,T=e.autoHideContainer,C=void 0===T||T,x=e.templates,E=void 0===x?u.a:x,P=e.collapsible,$=void 0!==P&&P,A=e.transformData;if(!t||!r||!r.length)throw new Error(h);var O=n.i(l.k)(t),I={root:o()(d(null),k.root),header:o()(d("header"),k.header),body:o()(d("body"),k.body),footer:o()(d("footer"),k.footer),list:o()(d("list"),k.list),depth:d("list","lvl"),item:o()(d("item"),k.item),active:o()(d("item","active"),k.active),link:o()(d("link"),k.link),count:o()(d("count"),k.count)},R=f({autoHideContainer:C,collapsible:$,cssClasses:I,containerNode:O,transformData:A,templates:E,renderState:{}});try{return n.i(s.a)(R,function(){return n.i(i.unmountComponentAtNode)(O)})({attributes:r,separator:c,rootPath:v,showParentLevel:m,limit:b,sortBy:w})}catch(e){throw new Error(h)}}var i=n(1),a=n(2),o=n.n(a),s=n(268),c=n(46),u=n(778),l=n(0);t.a=r;var d=n.i(l.i)("ais-hierarchical-menu"),f=function(e){var t=e.autoHideContainer,r=e.collapsible,a=e.cssClasses,o=e.containerNode,s=e.transformData,d=e.templates,f=e.renderState;return function(e,h){var p=e.createURL,v=e.items,g=e.refine,m=e.instantSearchInstance;if(h)return void(f.templateProps=n.i(l.j)({transformData:s,defaultTemplates:u.a,templatesConfig:m.templatesConfig,templates:d}));var y=t&&0===v.length;n.i(i.render)(i.default.createElement(c.a,{collapsible:r,createURL:p,cssClasses:a,facetValues:v,shouldAutoHideContainer:y,templateProps:f.templateProps,toggleRefinement:g}),o)}},h="Usage:\nhierarchicalMenu({\n  container,\n  attributes,\n  [ separator=' > ' ],\n  [ rootPath ],\n  [ showParentLevel=false ],\n  [ limit=10 ],\n  [ sortBy=['name:asc'] ],\n  [ cssClasses.{root , header, body, footer, list, depth, item, active, link}={} ],\n  [ templates.{header, item, footer} ],\n  [ transformData.{item} ],\n  [ autoHideContainer=true ],\n  [ collapsible=false ]\n})"},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.items,a=e.cssClasses,s=void 0===a?{}:a,c=e.autoHideContainer,u=void 0!==c&&c;if(!t)throw new Error(p);var v=n.i(d.k)(t),g={root:o()(f(null),s.root),select:o()(f(null),s.select),item:o()(f("item"),s.item)},m=h({containerNode:v,cssClasses:g,autoHideContainer:u});try{return n.i(l.a)(m,function(){return n.i(i.unmountComponentAtNode)(v)})({items:r})}catch(e){throw new Error(p)}}var i=n(1),a=n(2),o=n.n(a),s=n(27),c=n.n(s),u=n(154),l=n(269),d=n(0);t.a=r;var f=n.i(d.i)("ais-hits-per-page-selector"),h=function(e){var t=e.containerNode,r=e.cssClasses,a=e.autoHideContainer;return function(e,o){var s=e.items,l=e.refine,d=e.hasNoResults;if(!o){var f=c()(s,function(e){return e.isRefined})||{},h=f.value;n.i(i.render)(i.default.createElement(u.a,{cssClasses:r,currentValue:h,options:s,setValue:l,shouldAutoHideContainer:a&&d}),t)}}},p="Usage:\nhitsPerPageSelector({\n  container,\n  items,\n  [ cssClasses.{root,select,item}={} ],\n  [ autoHideContainer=false ]\n})"},function(e,t,n){"use strict";t.a={empty:"No results",item:function(e){return JSON.stringify(e,null,2)}}},function(e,t,n){"use strict";function r(e){var t=e.container,r=e.cssClasses,a=void 0===r?{}:r,s=e.templates,p=void 0===s?u.a:s,v=e.transformData,g=e.escapeHits,m=void 0!==g&&g;if(!t)throw new Error("Must provide a container."+h);if(p.item&&p.allItems)throw new Error("Must contain only allItems OR item template."+h);var y=n.i(l.k)(t),b={root:o()(d(null),a.root),item:o()(d("item"),a.item),empty:o()(d(null,"empty"),a.empty)},_=f({containerNode:y,cssClasses:b,renderState:{},transformData:v,templates:p});try{return n.i(c.a)(_,function(){return n.i(i.unmountComponentAtNode)(y)})({escapeHits:m})}catch(e){throw new Error(h)}}var i=n(1),a=n(2),o=n.n(a),s=n(262),c=n(270),u=n(781),l=n(0);t.a=r;var d=n.i(l.i)("ais-hits"),f=function(e){var t=e.renderState,r=e.cssClasses,a=e.containerNode,o=e.transformData,c=e.templates;return function(e,d){var f=e.hits,h=e.results,p=e.instantSearchInstance;if(d)return void(t.templateProps=n.i(l.j)({transformData:o,defaultTemplates:u.a,templatesConfig:p.templatesConfig,templates:c}));n.i(i.render)(i.default.createElement(s.a,{cssClasses:r,hits:f,results:h,templateProps:t.templateProps}),a)}},h="Usage:\nhits({\n  container,\n  [ cssClasses.{root,empty,item}={} ],\n  [ templates.{empty,item} | templates.{empty, allItems} ],\n  [ transformData.{empty,item} | transformData.{empty, allItems} ],\n})"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(769);n.d(t,"clearAll",function(){return r.a});var i=n(771);n.d(t,"configure",function(){return i.a});var a=n(772);n.d(t,"currentRefinedValues",function(){return a.a});var o=n(777);n.d(t,"geoSearch",function(){return o.a});var s=n(779);n.d(t,"hierarchicalMenu",function(){return s.a});var c=n(782);n.d(t,"hits",function(){return c.a});var u=n(780);n.d(t,"hitsPerPageSelector",function(){return u.a});var l=n(785);n.d(t,"infiniteHits",function(){return l.a});var d=n(789);n.d(t,"menu",function(){return d.a});var f=n(801);n.d(t,"refinementList",function(){return f.a});var h=n(791);n.d(t,"numericRefinementList",function(){return h.a});var p=n(792);n.d(t,"numericSelector",function(){return p.a});var v=n(793);n.d(t,"pagination",function(){return v.a});var g=n(795);n.d(t,"priceRanges",function(){return g.a});var m=n(797);n.d(t,"rangeInput",function(){return m.a});var y=n(803);n.d(t,"searchBox",function(){return y.a});var b=n(798);n.d(t,"rangeSlider",function(){return b.a});var _=n(804);n.d(t,"sortBySelector",function(){return _.a});var w=n(807);n.d(t,"starRating",function(){return w.a});var S=n(809);n.d(t,"stats",function(){return S.a});var k=n(811);n.d(t,"toggle",function(){return k.a});var T=n(766);n.d(t,"analytics",function(){return T.a});var C=n(767);n.d(t,"breadcrumb",function(){return C.a});var x=n(787);n.d(t,"menuSelect",function(){return x.a})},function(e,t,n){"use strict";t.a={empty:"No results",item:function(e){return JSON.stringify(e,null,2)}}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.cssClasses,a=void 0===r?{}:r,s=e.showMoreLabel,p=void 0===s?"Show more results":s,v=e.templates,g=void 0===v?c.a:v,m=e.transformData,y=e.escapeHits,b=void 0!==y&&y;if(!t)throw new Error("Must provide a container."+h);var _=n.i(l.k)(t),w={root:o()(d(null),a.root),item:o()(d("item"),a.item),empty:o()(d(null,"empty"),a.empty),showmore:o()(d("showmore"),a.showmore)},S=f({containerNode:_,cssClasses:w,transformData:m,templates:g,showMoreLabel:p,renderState:{}});try{return n.i(u.a)(S,function(){return n.i(i.unmountComponentAtNode)(_)})({escapeHits:b})}catch(e){throw new Error(h)}}var i=n(1),a=n(2),o=n.n(a),s=n(744),c=n(784),u=n(272),l=n(0);t.a=r;var d=n.i(l.i)("ais-infinite-hits"),f=function(e){var t=e.cssClasses,r=e.containerNode,a=e.renderState,o=e.templates,u=e.transformData,d=e.showMoreLabel;return function(e,f){var h=e.hits,p=e.results,v=e.showMore,g=e.isLastPage,m=e.instantSearchInstance;if(f)return void(a.templateProps=n.i(l.j)({transformData:u,defaultTemplates:c.a,templatesConfig:m.templatesConfig,templates:o}));n.i(i.render)(i.default.createElement(s.a,{cssClasses:t,hits:h,results:p,showMore:v,showMoreLabel:d,templateProps:a.templateProps,isLastPage:g}),r)}},h="\nUsage:\ninfiniteHits({\n  container,\n  [ escapeHits = false ],\n  [ showMoreLabel ],\n  [ cssClasses.{root,empty,item,showmore}={} ],\n  [ templates.{empty,item} | templates.{empty} ],\n  [ transformData.{empty,item} | transformData.{empty} ],\n})"},function(e,t,n){"use strict";t.a={header:"",item:"{{label}} ({{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}})",footer:"",seeAllOption:"See all"}},function(e,t,n){"use strict";function r(e){var t=e.container,r=e.attributeName,i=e.sortBy,a=void 0===i?["name:asc"]:i,u=e.limit,p=void 0===u?10:u,v=e.cssClasses,g=void 0===v?{}:v,m=e.templates,y=void 0===m?c.a:m,b=e.transformData,_=e.autoHideContainer,w=void 0===_||_;if(!t||!r)throw new Error(h);var S=n.i(l.k)(t),k={root:o()(d(null),g.root),header:o()(d("header"),g.header),footer:o()(d("footer"),g.footer),select:o()(d("select"),g.select),option:o()(d("option"),g.option)},T=f({containerNode:S,cssClasses:k,autoHideContainer:w,renderState:{},templates:y,transformData:b});try{return n.i(s.a)(T)({attributeName:r,limit:p,sortBy:a})}catch(e){throw new Error(h)}}var i=n(1),a=n(2),o=n.n(a),s=n(155),c=n(786),u=n(745),l=n(0);t.a=r;var d=n.i(l.i)("ais-menu-select"),f=function(e){var t=e.containerNode,r=e.cssClasses,a=e.autoHideContainer,o=e.renderState,s=e.templates,d=e.transformData;return function(e,f){var h=e.refine,p=e.items,v=e.canRefine,g=e.instantSearchInstance;if(f)return void(o.templateProps=n.i(l.j)({transformData:d,defaultTemplates:c.a,templatesConfig:g.templatesConfig,templates:s}));var m=a&&!v;n.i(i.render)(i.default.createElement(u.a,{cssClasses:r,items:p,refine:h,templateProps:o.templateProps,shouldAutoHideContainer:m,canRefine:v}),t)}},h="Usage:\nmenuSelect({\n  container,\n  attributeName,\n  [ sortBy=['name:asc'] ],\n  [ limit=10 ],\n  [ cssClasses.{root,select,option,header,footer} ]\n  [ templates.{header,item,footer,seeAllOption} ],\n  [ transformData.{item} ],\n  [ autoHideContainer ]\n})"},function(e,t,n){"use strict";t.a={header:"",item:'<a class="{{cssClasses.link}}" href="{{url}}">{{label}} <span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span></a>',footer:""}},function(e,t,n){"use strict";function r(e){var t=e.container,r=e.attributeName,a=e.sortBy,l=void 0===a?["name:asc"]:a,g=e.limit,m=void 0===g?10:g,y=e.cssClasses,b=void 0===y?{}:y,_=e.templates,w=void 0===_?s.a:_,S=e.collapsible,k=void 0!==S&&S,T=e.transformData,C=e.autoHideContainer,x=void 0===C||C,E=e.showMore,P=void 0!==E&&E;if(!t)throw new Error(v);var $=n.i(c.a)(P);if($&&$.limit<m)throw new Error("showMore.limit configuration should be > than the limit in the main configuration");var A=n.i(d.k)(t),O=$&&$.limit||void 0,I=$&&n.i(d.o)("show-more-",$.templates),R=I?f({},w,I):w,L={root:o()(h(null),b.root),header:o()(h("header"),b.header),body:o()(h("body"),b.body),footer:o()(h("footer"),b.footer),list:o()(h("list"),b.list),item:o()(h("item"),b.item),active:o()(h("item","active"),b.active),link:o()(h("link"),b.link),count:o()(h("count"),b.count)},j=p({containerNode:A,cssClasses:L,collapsible:k,autoHideContainer:x,renderState:{},templates:R,transformData:T,showMoreConfig:$});try{return n.i(u.a)(j,function(){return n.i(i.unmountComponentAtNode)(A)})({attributeName:r,limit:m,sortBy:l,showMoreLimit:O})}catch(e){throw new Error(v)}}var i=n(1),a=n(2),o=n.n(a),s=n(788),c=n(285),u=n(155),l=n(46),d=n(0);t.a=r;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=n.i(d.i)("ais-menu"),p=function(e){var t=e.containerNode,r=e.cssClasses,a=e.collapsible,o=e.autoHideContainer,c=e.renderState,u=e.templates,h=e.transformData,p=e.showMoreConfig;return function(e,v){var g=e.refine,m=e.items,y=e.createURL,b=e.canRefine,_=e.instantSearchInstance,w=e.isShowingMore,S=e.toggleShowMore,k=e.canToggleShowMore;if(v)return void(c.templateProps=n.i(d.j)({transformData:h,defaultTemplates:s.a,templatesConfig:_.templatesConfig,templates:u}));var T=m.map(function(e){return f({},e,{url:y(e.name)})}),C=o&&!b;n.i(i.render)(i.default.createElement(l.a,{collapsible:a,createURL:y,cssClasses:r,facetValues:T,shouldAutoHideContainer:C,showMore:null!==p,templateProps:c.templateProps,toggleRefinement:g,toggleShowMore:S,isShowingMore:w,canToggleShowMore:k}),t)}},v="Usage:\nmenu({\n  container,\n  attributeName,\n  [ sortBy=['name:asc'] ],\n  [ limit=10 ],\n  [ cssClasses.{root,list,item} ],\n  [ templates.{header,item,footer} ],\n  [ transformData.{item} ],\n  [ autoHideContainer ],\n  [ showMore.{templates: {active, inactive}, limit} ],\n  [ collapsible=false ]\n})"},function(e,t,n){"use strict";t.a={header:"",item:'<label class="{{cssClasses.label}}">\n  <input type="radio" class="{{cssClasses.radio}}" name="{{attributeName}}" {{#isRefined}}checked{{/isRefined}} />{{label}}\n</label>',footer:""}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.attributeName,a=e.options,s=e.cssClasses,p=void 0===s?{}:s,v=e.templates,g=void 0===v?u.a:v,m=e.collapsible,y=void 0!==m&&m,b=e.transformData,_=e.autoHideContainer,w=void 0===_||_;if(!t||!r||!a)throw new Error(h);var S=n.i(l.k)(t),k={root:o()(d(null),p.root),header:o()(d("header"),p.header),body:o()(d("body"),p.body),footer:o()(d("footer"),p.footer),list:o()(d("list"),p.list),item:o()(d("item"),p.item),label:o()(d("label"),p.label),radio:o()(d("radio"),p.radio),active:o()(d("item","active"),p.active)},T=f({containerNode:S,collapsible:y,autoHideContainer:w,cssClasses:k,renderState:{},transformData:b,templates:g});try{return n.i(c.a)(T,function(){return n.i(i.unmountComponentAtNode)(S)})({attributeName:r,options:a})}catch(e){throw new Error(h)}}var i=n(1),a=n(2),o=n.n(a),s=n(46),c=n(273),u=n(790),l=n(0);t.a=r;var d=n.i(l.i)("ais-refinement-list"),f=function(e){var t=e.containerNode,r=e.collapsible,a=e.autoHideContainer,o=e.cssClasses,c=e.renderState,d=e.transformData,f=e.templates;return function(e,h){var p=e.createURL,v=e.instantSearchInstance,g=e.refine,m=e.items,y=e.hasNoResults;if(h)return void(c.templateProps=n.i(l.j)({transformData:d,defaultTemplates:u.a,templatesConfig:v.templatesConfig,templates:f}));n.i(i.render)(i.default.createElement(s.a,{collapsible:r,createURL:p,cssClasses:o,facetValues:m,shouldAutoHideContainer:a&&y,templateProps:c.templateProps,toggleRefinement:g}),t)}},h="Usage:\nnumericRefinementList({\n  container,\n  attributeName,\n  options,\n  [ cssClasses.{root,header,body,footer,list,item,active,label,radio,count} ],\n  [ templates.{header,item,footer} ],\n  [ transformData.{item} ],\n  [ autoHideContainer ],\n  [ collapsible=false ]\n})"},function(e,t,n){"use strict";function r(e){var t=e.container,r=e.operator,a=void 0===r?"=":r,s=e.attributeName,h=e.options,p=e.cssClasses,v=void 0===p?{}:p,g=e.autoHideContainer,m=void 0!==g&&g,y=n.i(u.k)(t);if(!t||!h||0===h.length||!s)throw new Error(f);var b={root:o()(l(null),v.root),select:o()(l(null),v.select),item:o()(l("item"),v.item)},_=d({autoHideContainer:m,containerNode:y,cssClasses:b});try{return n.i(c.a)(_,function(){return n.i(i.unmountComponentAtNode)(y)})({operator:a,attributeName:s,options:h})}catch(e){throw new Error(f)}}var i=n(1),a=n(2),o=n.n(a),s=n(154),c=n(274),u=n(0);t.a=r;var l=n.i(u.i)("ais-numeric-selector"),d=function(e){var t=e.containerNode,r=e.autoHideContainer,a=e.cssClasses;return function(e,o){var c=e.currentRefinement,u=e.refine,l=e.hasNoResults,d=e.options;o||n.i(i.render)(i.default.createElement(s.a,{cssClasses:a,currentValue:c,options:d,setValue:u,shouldAutoHideContainer:r&&l}),t)}},f="Usage: numericSelector({\n  container,\n  attributeName,\n  options,\n  cssClasses.{root,select,item},\n  autoHideContainer\n})"},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.labels,i=void 0===r?f:r,s=e.cssClasses,u=void 0===s?{}:s,g=e.maxPages,m=e.padding,y=e.showFirstLast,b=void 0===y||y,_=e.autoHideContainer,w=void 0===_||_,S=e.scrollTo,k=void 0===S?"body":S;if(!t)throw new Error(v);var T=n.i(d.k)(t),C=!0===k?"body":k,x=!1!==C&&n.i(d.k)(C),E={root:c()(h(null),u.root),item:c()(h("item"),u.item),link:c()(h("link"),u.link),page:c()(h("item","page"),u.page),previous:c()(h("item","previous"),u.previous),next:c()(h("item","next"),u.next),first:c()(h("item","first"),u.first),last:c()(h("item","last"),u.last),active:c()(h("item","active"),u.active),disabled:c()(h("item","disabled"),u.disabled)},P=a()(i,f),$=p({containerNode:T,cssClasses:E,labels:P,showFirstLast:b,padding:m,autoHideContainer:w,scrollToNode:x});try{return n.i(l.a)($,function(){return n.i(o.unmountComponentAtNode)(T)})({maxPages:g,padding:m})}catch(e){throw new Error(v)}}var i=n(917),a=n.n(i),o=n(1),s=n(2),c=n.n(s),u=n(746),l=n(275),d=n(0);t.a=r;var f={previous:"‹",next:"›",first:"«",last:"»"},h=n.i(d.i)("ais-pagination"),p=function(e){var t=e.containerNode,r=e.cssClasses,i=e.labels,a=e.showFirstLast,s=e.autoHideContainer,c=e.scrollToNode;return function(e,l){var d=e.createURL,f=e.currentRefinement,h=e.nbHits,p=e.nbPages,v=e.pages,g=e.isFirstPage,m=e.isLastPage,y=e.refine;if(!l){var b=function(e){y(e),!1!==c&&c.scrollIntoView()},_=s&&0===h;n.i(o.render)(o.default.createElement(u.a,{createURL:d,cssClasses:r,currentPage:f,labels:i,nbHits:h,nbPages:p,pages:v,isFirstPage:g,isLastPage:m,setCurrentPage:b,shouldAutoHideContainer:_,showFirstLast:a}),t)}}},v="Usage:\npagination({\n  container,\n  [ cssClasses.{root,item,page,previous,next,first,last,active,disabled}={} ],\n  [ labels.{previous,next,first,last} ],\n  [ maxPages ],\n  [ padding=3 ],\n  [ showFirstLast=true ],\n  [ autoHideContainer=true ],\n  [ scrollTo='body' ]\n})"},function(e,t,n){"use strict";t.a={header:"",item:"\n    {{#from}}\n      {{^to}}\n        &ge;\n      {{/to}}\n      {{currency}}{{#helpers.formatNumber}}{{from}}{{/helpers.formatNumber}}\n    {{/from}}\n    {{#to}}\n      {{#from}}\n        -\n      {{/from}}\n      {{^from}}\n        &le;\n      {{/from}}\n      {{#helpers.formatNumber}}{{to}}{{/helpers.formatNumber}}\n    {{/to}}\n  ",footer:""}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.attributeName,a=e.cssClasses,s=void 0===a?{}:a,v=e.templates,g=void 0===v?u.a:v,m=e.collapsible,y=void 0!==m&&m,b=e.labels,_=void 0===b?{}:b,w=e.currency,S=void 0===w?"$":w,k=e.autoHideContainer,T=void 0===k||k;if(!t)throw new Error(p);var C=n.i(l.k)(t),x=d({button:"Go",separator:"to"},_),E={root:o()(f(null),s.root),header:o()(f("header"),s.header),body:o()(f("body"),s.body),list:o()(f("list"),s.list),link:o()(f("link"),s.link),item:o()(f("item"),s.item),active:o()(f("item","active"),s.active),form:o()(f("form"),s.form),label:o()(f("label"),s.label),input:o()(f("input"),s.input),currency:o()(f("currency"),s.currency),button:o()(f("button"),s.button),separator:o()(f("separator"),s.separator),footer:o()(f("footer"),s.footer)},P=void 0!==_.currency?_.currency:S,$=h({containerNode:C,templates:g,renderState:{},collapsible:y,cssClasses:E,labels:x,currency:P,autoHideContainer:T});try{return n.i(c.a)($,function(){return n.i(i.unmountComponentAtNode)(C)})({attributeName:r})}catch(e){throw new Error(p)}}var i=n(1),a=n(2),o=n.n(a),s=n(748),c=n(276),u=n(794),l=n(0);t.a=r;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=n.i(l.i)("ais-price-ranges"),h=function(e){var t=e.containerNode,r=e.templates,a=e.renderState,o=e.collapsible,c=e.cssClasses,d=e.labels,f=e.currency,h=e.autoHideContainer;return function(e,p){var v=e.refine,g=e.items,m=e.instantSearchInstance;if(p)return void(a.templateProps=n.i(l.j)({defaultTemplates:u.a,templatesConfig:m.templatesConfig,templates:r}));var y=h&&0===g.length;n.i(i.render)(i.default.createElement(s.a,{collapsible:o,cssClasses:c,currency:f,facetValues:g,labels:d,refine:v,shouldAutoHideContainer:y,templateProps:a.templateProps}),t)}},p="Usage:\npriceRanges({\n  container,\n  attributeName,\n  [ currency=$ ],\n  [ cssClasses.{root,header,body,list,item,active,link,form,label,input,currency,separator,button,footer} ],\n  [ templates.{header,item,footer} ],\n  [ labels.{currency,separator,button} ],\n  [ autoHideContainer=true ],\n  [ collapsible=false ]\n})"},function(e,t,n){"use strict";t.a={header:"",footer:""}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.attributeName,i=e.min,a=e.max,s=e.precision,f=void 0===s?0:s,g=e.cssClasses,m=void 0===g?{}:g,y=e.templates,b=void 0===y?l.a:y,_=e.labels,w=void 0===_?{}:_,S=e.autoHideContainer,k=void 0===S||S,T=e.collapsible,C=void 0!==T&&T;if(!t)throw new Error(v);var x=n.i(u.k)(t),E=d({separator:"to",submit:"Go"},w),P={root:o()(h(null),m.root),header:o()(h("header"),m.header),body:o()(h("body"),m.body),form:o()(h("form"),m.form),fieldset:o()(h("fieldset"),m.fieldset),labelMin:o()(h("labelMin"),m.labelMin),inputMin:o()(h("inputMin"),m.inputMin),separator:o()(h("separator"),m.separator),labelMax:o()(h("labelMax"),m.labelMax),inputMax:o()(h("inputMax"),m.inputMax),submit:o()(h("submit"),m.submit),footer:o()(h("footer"),m.footer)},$=p({containerNode:x,cssClasses:P,templates:b,labels:E,autoHideContainer:k,collapsible:C,renderState:{}});try{return n.i(c.a)($)({attributeName:r,min:i,max:a,precision:f})}catch(e){throw new Error(v)}}var i=n(1),a=n(2),o=n.n(a),s=n(750),c=n(99),u=n(0),l=n(796);t.a=r;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=n.i(u.i)("ais-range-input"),p=function(e){var t=e.containerNode,r=e.templates,a=e.cssClasses,o=e.labels,c=e.autoHideContainer,d=e.collapsible,h=e.renderState;return function(e,p){var v=e.refine,g=e.range,m=e.start,y=e.widgetParams,b=e.instantSearchInstance;if(p)return void(h.templateProps=n.i(u.j)({defaultTemplates:l.a,templatesConfig:b.templatesConfig,templates:r}));var _=g.min,w=g.max,S=f(m,2),k=S[0],T=S[1],C=1/Math.pow(10,y.precision),x=c&&_===w,E={min:k!==-1/0&&k!==_?k:void 0,max:T!==1/0&&T!==w?T:void 0};n.i(i.render)(i.default.createElement(s.a,{min:_,max:w,step:C,values:E,cssClasses:a,labels:o,refine:v,shouldAutoHideContainer:x,collapsible:d,templateProps:h.templateProps}),t)}},v="Usage:\nrangeInput({\n  container,\n  attributeName,\n  [ min ],\n  [ max ],\n  [ precision = 0 ],\n  [ cssClasses.{root, header, body, form, fieldset, labelMin, inputMin, separator, labelMax, inputMax, submit, footer} ],\n  [ templates.{header, footer} ],\n  [ labels.{separator, button} ],\n  [ autoHideContainer=true ],\n  [ collapsible=false ]\n})"},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.attributeName,a=e.min,s=e.max,l=e.templates,v=void 0===l?d:l,g=e.cssClasses,m=void 0===g?{}:g,y=e.step,b=e.pips,_=void 0===b||b,w=e.precision,S=void 0===w?0:w,k=e.tooltips,T=void 0===k||k,C=e.autoHideContainer,x=void 0===C||C,E=e.collapsible,P=void 0!==E&&E;if(!t)throw new Error(p);var $=n.i(u.k)(t),A={root:o()(f(null),m.root),header:o()(f("header"),m.header),body:o()(f("body"),m.body),footer:o()(f("footer"),m.footer)},O=h({containerNode:$,step:y,pips:_,tooltips:T,renderState:{},templates:v,autoHideContainer:x,collapsible:P,cssClasses:A});try{return n.i(c.a)(O,function(){return n.i(i.unmountComponentAtNode)($)})({attributeName:r,min:a,max:s,precision:S})}catch(e){throw new Error(p)}}var i=n(1),a=n(2),o=n.n(a),s=n(754),c=n(99),u=n(0);t.a=r;var l=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d={header:"",footer:""},f=n.i(u.i)("ais-range-slider"),h=function(e){var t=e.containerNode,r=e.cssClasses,a=e.pips,o=e.step,c=e.tooltips,f=e.autoHideContainer,h=e.collapsible,p=e.renderState,v=e.templates;return function(e,g){var m=e.refine,y=e.range,b=e.start,_=e.instantSearchInstance;if(g)return void(p.templateProps=n.i(u.j)({defaultTemplates:d,templatesConfig:_.templatesConfig,templates:v}));var w=y.min,S=y.max,k=f&&w===S,T=l(b,2),C=T[0],x=T[1],E=C===-1/0?w:C,P=x===1/0?S:x,$=[E>S?S:E,P<w?w:P];n.i(i.render)(i.default.createElement(s.a,{cssClasses:r,refine:m,min:w,max:S,values:$,tooltips:c,step:o,pips:a,shouldAutoHideContainer:k,collapsible:h,templateProps:p.templateProps}),t)}},p="Usage:\nrangeSlider({\n  container,\n  attributeName,\n  [ min ],\n  [ max ],\n  [ pips = true ],\n  [ step = 1 ],\n  [ precision = 0 ],\n  [ tooltips=true ],\n  [ templates.{header, footer} ],\n  [ cssClasses.{root, header, body, footer} ],\n  [ autoHideContainer=true ],\n  [ collapsible=false ],\n});\n"},function(e,t,n){"use strict";t.a={header:"",item:'<label class="{{cssClasses.label}}">\n  <input type="checkbox"\n         class="{{cssClasses.checkbox}}"\n         value="{{value}}"\n         {{#isRefined}}checked{{/isRefined}} />\n      {{{highlighted}}}\n  <span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span>\n</label>',footer:""}},function(e,t,n){"use strict";t.a={noResults:"No results"}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.attributeName,a=e.operator,s=void 0===a?"or":a,c=e.sortBy,u=void 0===c?["isRefined","count:desc","name:asc"]:c,b=e.limit,_=void 0===b?10:b,w=e.cssClasses,S=void 0===w?{}:w,k=e.templates,T=void 0===k?d.a:k,C=e.collapsible,x=void 0!==C&&C,E=e.transformData,P=e.autoHideContainer,$=void 0===P||P,A=e.showMore,O=void 0!==A&&A,I=e.searchForFacetValues,R=void 0!==I&&I;if(!t)throw new Error(y);var L=n.i(h.a)(O);if(L&&L.limit<_)throw new Error("showMore.limit configuration should be > than the limit in the main configuration");var j=!!R&&Boolean(R.escapeFacetValues),D=L&&L.limit||_,N=n.i(p.k)(t),U=L?n.i(p.o)("show-more-",L.templates):{},M=R?R.templates||f.a:{},F=v({},T,U,M),B={root:o()(g(null),S.root),header:o()(g("header"),S.header),body:o()(g("body"),S.body),footer:o()(g("footer"),S.footer),list:o()(g("list"),S.list),item:o()(g("item"),S.item),active:o()(g("item","active"),S.active),label:o()(g("label"),S.label),checkbox:o()(g("checkbox"),S.checkbox),count:o()(g("count"),S.count)},q=m({containerNode:N,cssClasses:B,transformData:E,templates:F,renderState:{},collapsible:x,autoHideContainer:$,showMoreConfig:L,searchForFacetValues:R});try{return n.i(l.a)(q,function(){return n.i(i.unmountComponentAtNode)(N)})({attributeName:r,operator:s,limit:_,showMoreLimit:D,sortBy:u,escapeFacetValues:j})}catch(e){throw new Error(y)}}var i=n(1),a=n(2),o=n.n(a),s=n(337),c=n.n(s),u=n(46),l=n(277),d=n(799),f=n(800),h=n(285),p=n(0);t.a=r;var v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=n.i(p.i)("ais-refinement-list"),m=function(e){var t=e.containerNode,r=e.cssClasses,a=e.transformData,o=e.templates,s=e.renderState,l=e.collapsible,f=e.autoHideContainer,h=e.showMoreConfig,v=e.searchForFacetValues;return function(e,g){var m=e.refine,y=e.items,b=e.createURL,_=e.searchForItems,w=e.isFromSearch,S=e.instantSearchInstance,k=e.canRefine,T=e.toggleShowMore,C=e.isShowingMore,x=e.hasExhaustiveItems,E=e.canToggleShowMore;if(g)return void(s.templateProps=n.i(p.j)({transformData:a,defaultTemplates:d.a,templatesConfig:S.templatesConfig,templates:o}));var P={header:{refinedFacetsCount:c()(y,{isRefined:!0}).length}};n.i(i.render)(i.default.createElement(u.a,{collapsible:l,createURL:b,cssClasses:r,facetValues:y,headerFooterData:P,shouldAutoHideContainer:f&&!1===k,templateProps:s.templateProps,toggleRefinement:m,searchFacetValues:v?_:void 0,searchPlaceholder:v.placeholder||"Search for other...",isFromSearch:w,showMore:null!==h,toggleShowMore:T,isShowingMore:C,hasExhaustiveItems:x,searchIsAlwaysActive:v.isAlwaysActive||!1,canToggleShowMore:E}),t)}},y="Usage:\nrefinementList({\n  container,\n  attributeName,\n  [ operator='or' ],\n  [ sortBy=['isRefined', 'count:desc', 'name:asc'] ],\n  [ limit=10 ],\n  [ cssClasses.{root, header, body, footer, list, item, active, label, checkbox, count}],\n  [ templates.{header,item,footer} ],\n  [ transformData.{item} ],\n  [ autoHideContainer=true ],\n  [ collapsible=false ],\n  [ showMore.{templates: {active, inactive}, limit} ],\n  [ collapsible=false ],\n  [ searchForFacetValues.{placeholder, templates: {noResults}, isAlwaysActive, escapeFacetValues}],\n})"},function(e,t,n){"use strict";t.a={poweredBy:'\n<div class="{{cssClasses.root}}">\n  Search by\n  <a class="{{cssClasses.link}}" href="{{url}}" target="_blank">Algolia</a>\n</div>',reset:'\n<button type="reset" title="Clear the search query." class="{{cssClasses.root}}">\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    viewBox="0 0 20 20" width="100%"\n    height="100%"\n  >\n    <path\n      d="M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z"\n      fill-rule="evenodd">\n    </path>\n  </svg>\n</button>\n  ',magnifier:'\n<div class="{{cssClasses.root}}">\n  <svg\n    xmlns="http://www.w3.org/2000/svg" id="sbx-icon-search-13"\n    viewBox="0 0 40 40"\n    width="100%"\n    height="100%"\n  >\n    <path\n      d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"\n      fill-rule="evenodd">\n    </path>\n  </svg>\n</div>\n  ',loadingIndicator:'\n<div class="{{cssClasses.root}}">\n\x3c!-- By Sam Herbert (@sherb), for everyone. More @ http://goo.gl/7AJzbL --\x3e\n<svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="#BFC7D8">\n    <g fill="none" fill-rule="evenodd">\n        <g transform="translate(1 1)" stroke-width="2">\n            <circle stroke-opacity=".5" cx="18" cy="18" r="18"/>\n            <path d="M36 18c0-9.94-8.06-18-18-18">\n                <animateTransform\n                    attributeName="transform"\n                    type="rotate"\n                    from="0 18 18"\n                    to="360 18 18"\n                    dur="1s"\n                    repeatCount="indefinite"/>\n            </path>\n        </g>\n    </g>\n</svg>\n</div>\n  '}},function(e,t,n){"use strict";function r(e){var t=e.containerNode,n=e.query,r=e.loadingIndicator,i=e.isSearchStalled,a=o(t);if(document.activeElement===a||n===a.value||(a.value=n),r){var s="INPUT"===t.tagName?t.parentNode:t.firstChild;i?s.classList.add("ais-stalled-search"):s.classList.remove("ais-stalled-search")}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.placeholder,i=void 0===r?"":r,a=e.cssClasses,o=void 0===a?{}:a,s=e.poweredBy,c=void 0!==s&&s,u=e.wrapInput,l=void 0===u||u,d=e.autofocus,f=void 0===d?"auto":d,h=e.searchOnEnterKeyPressOnly,p=void 0!==h&&h,v=e.reset,g=void 0===v||v,m=e.magnifier,y=void 0===m||m,b=e.loadingIndicator,_=void 0!==b&&b,w=e.queryHook;if(!t)throw new Error(O);var C=n.i(S.k)(t);"boolean"!=typeof f&&(f="auto"),!0===c&&(c={});var x=$({containerNode:C,cssClasses:o,placeholder:i,poweredBy:c,templates:T.a,autofocus:f,searchOnEnterKeyPressOnly:p,wrapInput:l,reset:g,magnifier:y,loadingIndicator:_});try{return n.i(k.a)(x,A(C))({queryHook:w})}catch(e){throw new Error(O)}}function a(e){return"INPUT"===e.tagName?e:document.createElement("input")}function o(e){return"INPUT"===e.tagName?e:e.querySelector("input")}function s(e,t){var n=document.createElement("div");return w()(x(null),t.root).split(" ").forEach(function(e){return n.classList.add(e)}),n.appendChild(e),n}function c(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,n)}function u(e){return(e.currentTarget?e.currentTarget:e.srcElement).value}function l(e,t){return function(n){return n.keyCode===e&&t(n)}}function d(e){return function(t){return e(u(t))}}function f(e,t,n,r){var i={autocapitalize:"off",autocomplete:"off",autocorrect:"off",placeholder:e,role:"textbox",spellcheck:"false",type:"text",value:n};b()(i,function(e,n){t.hasAttribute(n)||t.setAttribute(n,e)}),w()(x("input"),r.input).split(" ").forEach(function(e){return t.classList.add(e)})}function h(e,t,r,i){var a=r.reset;t=C({cssClasses:{},template:a},t);var o={root:w()(x("reset"),t.cssClasses.root)},s=n.i(S.l)({templateKey:"template",templates:t,data:{cssClasses:o}}),c=m(s,w()(x("reset-wrapper")));e.parentNode.appendChild(c),c.addEventListener("click",function(e){e.preventDefault(),i()})}function p(e,t,r){var i=r.magnifier;t=C({cssClasses:{},template:i},t);var a={root:w()(x("magnifier"),t.cssClasses.root)},o=n.i(S.l)({templateKey:"template",templates:t,data:{cssClasses:a}}),s=m(o,w()(x("magnifier-wrapper")));e.parentNode.appendChild(s)}function v(e,t,r){var i=r.loadingIndicator;t=C({cssClasses:{},template:i},t);var a={root:w()(x("loading-indicator"),t.cssClasses.root)},o=n.i(S.l)({templateKey:"template",templates:t,data:{cssClasses:a}}),s=m(o,w()(x("loading-indicator-wrapper")));e.parentNode.appendChild(s)}function g(e,t,r){var i=r.poweredBy;t=C({cssClasses:{},template:i},t);var a={root:w()(x("powered-by"),t.cssClasses.root),link:w()(x("powered-by-link"),t.cssClasses.link)},o="https://www.algolia.com/?utm_source=instantsearch.js&utm_medium=website&utm_content="+location.hostname+"&utm_campaign=poweredby",s=n.i(S.l)({templateKey:"template",templates:t,data:{cssClasses:a,url:o}}),c=m(s);e.parentNode.insertBefore(c,e.nextSibling)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("div");return n.innerHTML='<span class="'+t+'">'+e.trim()+"</span>",n.firstChild}var y=n(174),b=n.n(y),_=n(2),w=n.n(_),S=n(0),k=n(278),T=n(802);t.a=i;var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x=n.i(S.i)("ais-search-box"),E=13,P=8,$=function(e){var t=e.containerNode,n=e.cssClasses,i=e.placeholder,o=e.poweredBy,m=e.templates,y=e.autofocus,b=e.searchOnEnterKeyPressOnly,_=e.wrapInput,S=e.reset,k=e.magnifier,T=e.loadingIndicator;return function(e,C){var $=e.refine,A=e.clear,O=e.query,I=e.onHistoryChange,R=e.isSearchStalled;if(C){var L=window.addEventListener?"input":"propertychange",j=a(t),D=j===t,N=O;if(D){var U=document.createElement("div");j.parentNode.insertBefore(U,j);var M=j.parentNode,F=_?s(j,n):j;M.replaceChild(F,U);var B=j.value;B&&(N=B,$(B,!1))}else{var q=_?s(j,n):j;t.appendChild(q)}k&&p(j,k,m),S&&h(j,S,m,A),T&&v(j,T,m),f(i,j,N,n),o&&g(j,o,m),window.addEventListener("pageshow",function(){j.value=N}),I(function(e){j.value=e.query||""}),(!0===y||"auto"===y&&""===N)&&(j.focus(),j.setSelectionRange(N.length,N.length)),b?(c(j,L,function(e){$(u(e),!1)}),c(j,"keyup",function(e){e.keyCode===E&&$(u(e))})):(c(j,L,d($)),("propertychange"===L||window.attachEvent)&&c(j,"keyup",l(P,d($))))}else r({containerNode:t,query:O,loadingIndicator:T,isSearchStalled:R});if(S){var H="."+w()(x("reset-wrapper"));("INPUT"===t.tagName?t.parentNode.querySelector(H):t.querySelector(H)).style.display=O&&O.trim()?"block":"none"}}},A=function(e){return function(){var t=document.createRange();t.selectNodeContents(e),t.deleteContents()}},O="Usage:\nsearchBox({\n  container,\n  [ placeholder ],\n  [ cssClasses.{input,poweredBy} ],\n  [ poweredBy=false || poweredBy.{template, cssClasses.{root,link}} ],\n  [ wrapInput ],\n  [ autofocus ],\n  [ searchOnEnterKeyPressOnly ],\n  [ queryHook ]\n  [ reset=true || reset.{template, cssClasses.{root}} ]\n})"},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.indices,a=e.cssClasses,s=void 0===a?{}:a,h=e.autoHideContainer,p=void 0!==h&&h;if(!t)throw new Error(f);var v=n.i(u.k)(t),g={root:o()(l(null),s.root),select:o()(l(null),s.select),item:o()(l("item"),s.item)},m=d({containerNode:v,cssClasses:g,autoHideContainer:p});try{return n.i(c.a)(m,function(){return n.i(i.unmountComponentAtNode)(v)})({indices:r})}catch(e){throw new Error(f)}}var i=n(1),a=n(2),o=n.n(a),s=n(154),c=n(279),u=n(0);t.a=r;var l=n.i(u.i)("ais-sort-by-selector"),d=function(e){var t=e.containerNode,r=e.cssClasses,a=e.autoHideContainer;return function(e,o){var c=e.currentRefinement,u=e.options,l=e.refine,d=e.hasNoResults;if(!o){var f=a&&d;n.i(i.render)(i.default.createElement(s.a,{cssClasses:r,currentValue:c,options:u,setValue:l,shouldAutoHideContainer:f}),t)}}},f="Usage:\nsortBySelector({\n  container,\n  indices,\n  [cssClasses.{root,select,item}={}],\n  [autoHideContainer=false]\n})"},function(e,t,n){"use strict";t.a={andUp:"& Up"}},function(e,t,n){"use strict";t.a={header:"",item:'<a class="{{cssClasses.link}}{{^count}} {{cssClasses.disabledLink}}{{/count}}" {{#count}}href="{{href}}"{{/count}}>\n  {{#stars}}<span class="{{#.}}{{cssClasses.star}}{{/.}}{{^.}}{{cssClasses.emptyStar}}{{/.}}"></span>{{/stars}}\n  {{labels.andUp}}\n  {{#count}}<span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span>{{/count}}\n</a>',footer:""}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.attributeName,a=e.max,s=void 0===a?5:a,f=e.cssClasses,g=void 0===f?{}:f,m=e.labels,y=void 0===m?l.a:m,b=e.templates,_=void 0===b?u.a:b,w=e.collapsible,S=void 0!==w&&w,k=e.transformData,T=e.autoHideContainer,C=void 0===T||T;if(!t)throw new Error(v);var x=n.i(d.k)(t),E={root:o()(h(null),g.root),header:o()(h("header"),g.header),body:o()(h("body"),g.body),footer:o()(h("footer"),g.footer),list:o()(h("list"),g.list),item:o()(h("item"),g.item),link:o()(h("link"),g.link),disabledLink:o()(h("link","disabled"),g.disabledLink),count:o()(h("count"),g.count),star:o()(h("star"),g.star),emptyStar:o()(h("star","empty"),g.emptyStar),active:o()(h("item","active"),g.active)},P=p({containerNode:x,cssClasses:E,collapsible:S,autoHideContainer:C,renderState:{},templates:_,transformData:k,labels:y});try{return n.i(c.a)(P,function(){return n.i(i.unmountComponentAtNode)(x)})({attributeName:r,max:s})}catch(e){throw new Error(v)}}var i=n(1),a=n(2),o=n.n(a),s=n(46),c=n(280),u=n(806),l=n(805),d=n(0);t.a=r;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=n.i(d.i)("ais-star-rating"),p=function(e){var t=e.containerNode,r=e.cssClasses,a=e.templates,o=e.collapsible,c=e.transformData,l=e.autoHideContainer,h=e.renderState,p=e.labels;return function(e,v){var g=e.refine,m=e.items,y=e.createURL,b=e.instantSearchInstance,_=e.hasNoResults;if(v)return void(h.templateProps=n.i(d.j)({transformData:c,defaultTemplates:u.a,templatesConfig:b.templatesConfig,templates:a}));var w=l&&_;n.i(i.render)(i.default.createElement(s.a,{collapsible:o,createURL:y,cssClasses:r,facetValues:m.map(function(e){return f({},e,{labels:p})}),shouldAutoHideContainer:w,templateProps:h.templateProps,toggleRefinement:g}),t)}},v="Usage:\nstarRating({\n  container,\n  attributeName,\n  [ max=5 ],\n  [ cssClasses.{root,header,body,footer,list,item,active,link,disabledLink,star,emptyStar,count} ],\n  [ templates.{header,item,footer} ],\n  [ transformData.{item} ],\n  [ labels.{andUp} ],\n  [ autoHideContainer=true ],\n  [ collapsible=false ]\n})"},function(e,t,n){"use strict";t.a={header:"",body:'{{#hasNoResults}}No results{{/hasNoResults}}\n  {{#hasOneResult}}1 result{{/hasOneResult}}\n  {{#hasManyResults}}{{#helpers.formatNumber}}{{nbHits}}{{/helpers.formatNumber}} results{{/hasManyResults}}\n  <span class="{{cssClasses.time}}">found in {{processingTimeMS}}ms</span>',footer:""}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.cssClasses,a=void 0===r?{}:r,s=e.autoHideContainer,p=void 0===s||s,v=e.collapsible,g=void 0!==v&&v,m=e.transformData,y=e.templates,b=void 0===y?u.a:y;if(!t)throw new Error(h);var _=n.i(l.k)(t),w={body:o()(d("body"),a.body),footer:o()(d("footer"),a.footer),header:o()(d("header"),a.header),root:o()(d(null),a.root),time:o()(d("time"),a.time)},S=f({containerNode:_,cssClasses:w,collapsible:g,autoHideContainer:p,renderState:{},templates:b,transformData:m});try{return n.i(c.a)(S,function(){return n.i(i.unmountComponentAtNode)(_)})()}catch(e){throw new Error(h)}}var i=n(1),a=n(2),o=n.n(a),s=n(755),c=n(281),u=n(808),l=n(0);t.a=r;var d=n.i(l.i)("ais-stats"),f=function(e){var t=e.containerNode,r=e.cssClasses,a=e.collapsible,o=e.autoHideContainer,c=e.renderState,d=e.templates,f=e.transformData;return function(e,h){var p=e.hitsPerPage,v=e.nbHits,g=e.nbPages,m=e.page,y=e.processingTimeMS,b=e.query,_=e.instantSearchInstance;if(h)return void(c.templateProps=n.i(l.j)({transformData:f,defaultTemplates:u.a,templatesConfig:_.templatesConfig,templates:d}));var w=o&&0===v;n.i(i.render)(i.default.createElement(s.a,{collapsible:a,cssClasses:r,hitsPerPage:p,nbHits:v,nbPages:g,page:m,processingTimeMS:y,query:b,shouldAutoHideContainer:w,templateProps:c.templateProps}),t)}},h="Usage:\nstats({\n  container,\n  [ templates.{header, body, footer} ],\n  [ transformData.{body} ],\n  [ autoHideContainer=true ],\n  [ cssClasses.{root, header, body, footer, time} ],\n})"},function(e,t,n){"use strict";t.a={header:"",item:'<label class="{{cssClasses.label}}">\n  <input type="checkbox" class="{{cssClasses.checkbox}}" value="{{name}}" {{#isRefined}}checked{{/isRefined}} />{{name}}\n  <span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span>\n</label>',footer:""}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,r=e.attributeName,a=e.label,c=e.cssClasses,p=void 0===c?{}:c,v=e.templates,g=void 0===v?s.a:v,m=e.transformData,y=e.autoHideContainer,b=void 0===y||y,_=e.collapsible,w=void 0!==_&&_,S=e.values,k=void 0===S?{on:!0,off:void 0}:S;if(!t)throw new Error(h);var T=n.i(l.k)(t),C={root:o()(d(null),p.root),header:o()(d("header"),p.header),body:o()(d("body"),p.body),footer:o()(d("footer"),p.footer),list:o()(d("list"),p.list),item:o()(d("item"),p.item),active:o()(d("item","active"),p.active),label:o()(d("label"),p.label),checkbox:o()(d("checkbox"),p.checkbox),count:o()(d("count"),p.count)},x=f({containerNode:T,cssClasses:C,collapsible:w,autoHideContainer:b,renderState:{},templates:g,transformData:m});try{return n.i(u.a)(x,function(){return n.i(i.unmountComponentAtNode)(T)})({attributeName:r,label:a,values:k})}catch(e){throw new Error(h)}}var i=n(1),a=n(2),o=n.n(a),s=n(810),c=n(46),u=n(282),l=n(0);t.a=r;var d=n.i(l.i)("ais-toggle"),f=function(e){var t=e.containerNode,r=e.cssClasses,a=e.collapsible,o=e.autoHideContainer,u=e.renderState,d=e.templates,f=e.transformData;return function(e,h){var p=e.value,v=e.createURL,g=e.refine,m=e.instantSearchInstance;if(h)return void(u.templateProps=n.i(l.j)({transformData:f,defaultTemplates:s.a,templatesConfig:m.templatesConfig,templates:d}));var y=o&&(0===p.count||null===p.count);n.i(i.render)(i.default.createElement(c.a,{collapsible:a,createURL:v,cssClasses:r,facetValues:[p],shouldAutoHideContainer:y,templateProps:u.templateProps,toggleRefinement:function(e,t){return g({isRefined:t})}}),t)}},h="Usage:\ntoggle({\n  container,\n  attributeName,\n  label,\n  [ values={on: true, off: undefined} ],\n  [ cssClasses.{root,header,body,footer,list,item,active,label,checkbox,count} ],\n  [ templates.{header,item,footer} ],\n  [ transformData.{item} ],\n  [ autoHideContainer=true ],\n  [ collapsible=false ]\n})"},function(e,t,n){var r=n(33),i=n(7),a=r(i,"DataView");e.exports=a},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(873),a=n(874),o=n(875),s=n(876),c=n(877);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t,n){var r=n(33),i=n(7),a=r(i,"Promise");e.exports=a},function(e,t){function n(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}e.exports=n},function(e,t){function n(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}e.exports=n},function(e,t,n){function r(e,t){return e&&i(t,a(t),e)}var i=n(73),a=n(28);e.exports=r},function(e,t,n){function r(e,t){return e&&i(t,a(t),e)}var i=n(73),a=n(78);e.exports=r},function(e,t,n){function r(e,t,n,R,L,j){var D,N=t&C,U=t&x,M=t&E;if(n&&(D=L?n(e,R,L,j):n(e)),void 0!==D)return D;if(!S(e))return e;var F=b(e);if(F){if(D=g(e),!N)return l(e,D)}else{var B=v(e),q=B==$||B==A;if(_(e))return u(e,N);if(B==O||B==P||q&&!L){if(D=U||q?{}:y(e),!N)return U?f(e,c(D,e)):d(e,s(D,e))}else{if(!I[B])return L?e:{};D=m(e,B,N)}}j||(j=new i);var H=j.get(e);if(H)return H;if(j.set(e,D),k(e))return e.forEach(function(i){D.add(r(i,t,n,i,e,j))}),D;if(w(e))return e.forEach(function(i,a){D.set(a,r(i,t,n,a,e,j))}),D;var V=M?U?p:h:U?keysIn:T,z=F?void 0:V(e);return a(z||e,function(i,a){z&&(a=i,i=e[a]),o(D,a,r(i,t,n,a,e,j))}),D}var i=n(101),a=n(160),o=n(297),s=n(817),c=n(818),u=n(311),l=n(106),d=n(849),f=n(850),h=n(320),p=n(867),v=n(74),g=n(878),m=n(879),y=n(325),b=n(4),_=n(77),w=n(922),S=n(12),k=n(923),T=n(28),C=1,x=2,E=4,P="[object Arguments]",$="[object Function]",A="[object GeneratorFunction]",O="[object Object]",I={};I[P]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object DataView]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Map]"]=I["[object Number]"]=I[O]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object Symbol]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I["[object Error]"]=I[$]=I["[object WeakMap]"]=!1,e.exports=r},function(e,t,n){function r(e,t){var n=[];return i(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}var i=n(72);e.exports=r},function(e,t,n){function r(e,t,n,o,s){var c=-1,u=e.length;for(n||(n=a),s||(s=[]);++c<u;){var l=e[c];t>0&&n(l)?t>1?r(l,t-1,n,o,s):i(s,l):o||(s[s.length]=l)}return s}var i=n(162),a=n(881);e.exports=r},function(e,t){function n(e,t){return null!=e&&i.call(e,t)}var r=Object.prototype,i=r.hasOwnProperty;e.exports=n},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function r(e){return a(e)&&i(e)==o}var i=n(25),a=n(13),o="[object Arguments]";e.exports=r},function(e,t,n){function r(e,t,n,r,g,y){var b=u(e),_=u(t),w=b?p:c(e),S=_?p:c(t);w=w==h?v:w,S=S==h?v:S;var k=w==v,T=S==v,C=w==S;if(C&&l(e)){if(!l(t))return!1;b=!0,k=!1}if(C&&!k)return y||(y=new i),b||d(e)?a(e,t,n,r,g,y):o(e,t,w,n,r,g,y);if(!(n&f)){var x=k&&m.call(e,"__wrapped__"),E=T&&m.call(t,"__wrapped__");if(x||E){var P=x?e.value():e,$=E?t.value():t;return y||(y=new i),g(P,$,n,r,y)}}return!!C&&(y||(y=new i),s(e,t,n,r,g,y))}var i=n(101),a=n(318),o=n(864),s=n(865),c=n(74),u=n(4),l=n(77),d=n(115),f=1,h="[object Arguments]",p="[object Array]",v="[object Object]",g=Object.prototype,m=g.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){return a(e)&&i(e)==o}var i=n(74),a=n(13),o="[object Map]";e.exports=r},function(e,t,n){function r(e,t,n,r){var c=n.length,u=c,l=!r;if(null==e)return!u;for(e=Object(e);c--;){var d=n[c];if(l&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++c<u;){d=n[c];var f=d[0],h=e[f],p=d[1];if(l&&d[2]){if(void 0===h&&!(f in e))return!1}else{var v=new i;if(r)var g=r(h,p,f,e,t,v);if(!(void 0===g?a(p,h,o|s,r,v):g))return!1}}return!0}var i=n(101),a=n(164),o=1,s=2;e.exports=r},function(e,t){function n(e){return e!==e}e.exports=n},function(e,t,n){function r(e){return!(!o(e)||a(e))&&(i(e)?p:u).test(s(e))}var i=n(49),a=n(884),o=n(12),s=n(335),c=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,f=l.toString,h=d.hasOwnProperty,p=RegExp("^"+f.call(h).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){return a(e)&&i(e)==o}var i=n(74),a=n(13),o="[object Set]";e.exports=r},function(e,t,n){function r(e){return o(e)&&a(e.length)&&!!s[i(e)]}var i=n(25),a=n(177),o=n(13),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=r},function(e,t,n){function r(e){if(!i(e))return o(e);var t=a(e),n=[];for(var r in e)("constructor"!=r||!t&&c.call(e,r))&&n.push(r);return n}var i=n(12),a=n(111),o=n(899),s=Object.prototype,c=s.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=-1,r=a(e)?Array(e.length):[];return i(e,function(e,i,a){r[++n]=t(e,i,a)}),r}var i=n(72),a=n(21);e.exports=r},function(e,t,n){function r(e){var t=a(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}var i=n(827),a=n(869),o=n(327);e.exports=r},function(e,t,n){function r(e,t){return s(e)&&c(t)?u(l(e),t):function(n){var r=a(n,e);return void 0===r&&r===t?o(n,e):i(t,r,d|f)}}var i=n(164),a=n(175),o=n(921),s=n(170),c=n(326),u=n(327),l=n(113),d=1,f=2;e.exports=r},function(e,t,n){function r(e,t,n,r,b,_,w){var S=m(e,n),k=m(t,n),T=w.get(k);if(T)return void i(e,n,T);var C=_?_(S,k,n+"",e,t,w):void 0,x=void 0===C;if(x){var E=l(k),P=!E&&f(k),$=!E&&!P&&g(k);C=k,E||P||$?l(S)?C=S:d(S)?C=s(S):P?(x=!1,C=a(k,!0)):$?(x=!1,C=o(k,!0)):C=[]:v(k)||u(k)?(C=S,u(S)?C=y(S):(!p(S)||r&&h(S))&&(C=c(k))):x=!1}x&&(w.set(k,C),b(C,k,r,_,w),w.delete(k)),i(e,n,C)}var i=n(296),a=n(311),o=n(312),s=n(106),c=n(325),u=n(76),l=n(4),d=n(340),f=n(77),h=n(49),p=n(12),v=n(50),g=n(115),m=n(330),y=n(932);e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function r(e){return function(t){return i(t,e)}}var i=n(300);e.exports=r},function(e,t){function n(e){return function(t){return null==e?void 0:e[t]}}e.exports=n},function(e,t){function n(e,t,n,a){for(var o=-1,s=i(r((t-e)/(n||1)),0),c=Array(s);s--;)c[a?s:++o]=e,e+=n;return c}var r=Math.ceil,i=Math.max;e.exports=n},function(e,t){function n(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}e.exports=n},function(e,t,n){var r=n(915),i=n(317),a=n(75),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=o},function(e,t,n){function r(e,t){var n;return i(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}var i=n(72);e.exports=r},function(e,t,n){function r(e){if("string"==typeof e)return e;if(o(e))return a(e,r)+"";if(s(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-c?"-0":t}var i=n(47),a=n(161),o=n(4),s=n(114),c=1/0,u=i?i.prototype:void 0,l=u?u.toString:void 0;e.exports=r},function(e,t,n){function r(e,t){return i(t,function(t){return e[t]})}var i=n(161);e.exports=r},function(e,t,n){function r(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var i=n(167);e.exports=r},function(e,t){function n(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}var r=/\w*$/;e.exports=n},function(e,t,n){function r(e){return o?Object(o.call(e)):{}}var i=n(47),a=i?i.prototype:void 0,o=a?a.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t){return i(e,a(e),t)}var i=n(73),a=n(169);e.exports=r},function(e,t,n){function r(e,t){return i(e,a(e),t)}var i=n(73),a=n(323);e.exports=r},function(e,t,n){var r=n(7),i=r["__core-js_shared__"];e.exports=i},function(e,t){function n(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}e.exports=n},function(e,t,n){function r(e){return i(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&a(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var c=n[r];c&&e(t,c,r,o)}return t})}var i=n(105),a=n(110);e.exports=r},function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!i(n))return e(n,r);for(var a=n.length,o=t?a:-1,s=Object(n);(t?o--:++o<a)&&!1!==r(s[o],o,s););return n}}var i=n(21);e.exports=r},function(e,t){function n(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(!1===n(a[c],c,a))break}return t}}e.exports=n},function(e,t,n){function r(e,t,n){function r(){return(this&&this!==a&&this instanceof r?c:e).apply(s?n:this,arguments)}var s=t&o,c=i(e);return r}var i=n(107),a=n(7),o=1;e.exports=r},function(e,t,n){function r(e,t,n){function r(){for(var a=arguments.length,f=Array(a),h=a,p=c(r);h--;)f[h]=arguments[h];var v=a<3&&f[0]!==p&&f[a-1]!==p?[]:u(f,p);return(a-=v.length)<n?s(e,t,o,r.placeholder,void 0,f,v,void 0,void 0,n-a):i(this&&this!==l&&this instanceof r?d:e,this,f)}var d=a(e);return r}var i=n(102),a=n(107),o=n(315),s=n(316),c=n(322),u=n(172),l=n(7);e.exports=r},function(e,t,n){function r(e){return function(t,n,r){var s=Object(t);if(!a(t)){var c=i(n,3);t=o(t),n=function(e){return c(s[e],e,s)}}var u=e(t,n,r);return u>-1?s[c?t[u]:u]:void 0}}var i=n(26),a=n(21),o=n(28);e.exports=r},function(e,t,n){function r(e,t,n,r){function c(){for(var t=-1,a=arguments.length,s=-1,d=r.length,f=Array(d+a),h=this&&this!==o&&this instanceof c?l:e;++s<d;)f[s]=r[s];for(;a--;)f[s++]=arguments[++t];return i(h,u?n:this,f)}var u=t&s,l=a(e);return c}var i=n(102),a=n(107),o=n(7),s=1;e.exports=r},function(e,t,n){function r(e){return function(t,n,r){return r&&"number"!=typeof r&&a(t,n,r)&&(n=r=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),r=void 0===r?t<n?1:-1:o(r),i(t,n,r,e)}}var i=n(840),a=n(110),o=n(347);e.exports=r},function(e,t,n){var r=n(288),i=n(116),a=n(173),o=1/0,s=r&&1/a(new r([,-0]))[1]==o?function(e){return new r(e)}:i;e.exports=s},function(e,t,n){function r(e,t,n,r,S,k,T,C){var x=t&g;if(!x&&"function"!=typeof e)throw new TypeError(p);var E=r?r.length:0;if(E||(t&=~(b|_),r=S=void 0),T=void 0===T?T:w(h(T),0),C=void 0===C?C:h(C),E-=S?S.length:0,t&_){var P=r,$=S;r=S=void 0}var A=x?void 0:u(e),O=[e,t,n,r,S,P,$,k,T,C];if(A&&l(O,A),e=O[0],t=O[1],n=O[2],r=O[3],S=O[4],C=O[9]=void 0===O[9]?x?0:e.length:w(O[9]-E,0),!C&&t&(m|y)&&(t&=~(m|y)),t&&t!=v)I=t==m||t==y?o(e,t,C):t!=b&&t!=(v|b)||S.length?s.apply(void 0,O):c(e,t,n,r);else var I=a(e,t,n);return f((A?i:d)(I,O),e,t)}var i=n(305),a=n(856),o=n(857),s=n(315),c=n(859),u=n(321),l=n(897),d=n(331),f=n(333),h=n(118),p="Expected a function",v=1,g=2,m=8,y=16,b=32,_=64,w=Math.max;e.exports=r},function(e,t,n){function r(e,t,n,o,s,c){return a(e)&&a(t)&&(c.set(t,e),i(e,t,void 0,r,c),c.delete(t)),e}var i=n(304),a=n(12);e.exports=r},function(e,t,n){function r(e,t,n,r,i,k,C){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!k(new a(e),new a(t)));case f:case h:case g:return o(+e,+t);case p:return e.name==t.name&&e.message==t.message;case m:case b:return e==t+"";case v:var x=c;case y:var E=r&l;if(x||(x=u),e.size!=t.size&&!E)return!1;var P=C.get(e);if(P)return P==t;r|=d,C.set(e,t);var $=s(x(e),x(t),r,i,k,C);return C.delete(e),$;case _:if(T)return T.call(e)==T.call(t)}return!1}var i=n(47),a=n(290),o=n(48),s=n(318),c=n(895),u=n(173),l=1,d=2,f="[object Boolean]",h="[object Date]",p="[object Error]",v="[object Map]",g="[object Number]",m="[object RegExp]",y="[object Set]",b="[object String]",_="[object Symbol]",w="[object ArrayBuffer]",S="[object DataView]",k=i?i.prototype:void 0,T=k?k.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t,n,r,o,c){var u=n&a,l=i(e),d=l.length;if(d!=i(t).length&&!u)return!1;for(var f=d;f--;){var h=l[f];if(!(u?h in t:s.call(t,h)))return!1}var p=c.get(e);if(p&&c.get(t))return p==t;var v=!0;c.set(e,t),c.set(t,e);for(var g=u;++f<d;){h=l[f];var m=e[h],y=t[h];if(r)var b=u?r(y,m,h,t,e,c):r(m,y,h,e,t,c);if(!(void 0===b?m===y||o(m,y,n,r,c):b)){v=!1;break}g||(g="constructor"==h)}if(v&&!g){var _=e.constructor,w=t.constructor;_!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(v=!1)}return c.delete(e),c.delete(t),v}var i=n(320),a=1,o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(839),i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a=r(i);e.exports=a},function(e,t,n){function r(e){return i(e,o,a)}var i=n(301),a=n(323),o=n(78);e.exports=r},function(e,t,n){function r(e){for(var t=e.name+"",n=i[t],r=o.call(i,t)?n.length:0;r--;){var a=n[r],s=a.func;if(null==s||s==e)return a.name}return t}var i=n(902),a=Object.prototype,o=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){for(var t=a(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,i(o)]}return t}var i=n(326),a=n(28);e.exports=r},function(e,t,n){function r(e){var t=o.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[c]=n:delete e[c]),i}var i=n(47),a=Object.prototype,o=a.hasOwnProperty,s=a.toString,c=i?i.toStringTag:void 0;e.exports=r},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t){function n(e){var t=e.match(r);return t?t[1].split(i):[]}var r=/\{\n\/\* \[wrapped with (.+)\] \*/,i=/,? & /;e.exports=n},function(e,t,n){function r(){this.__data__=i?i(null):{},this.size=0}var i=n(112);e.exports=r},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(i){var n=t[e];return n===a?void 0:n}return s.call(t,e)?t[e]:void 0}var i=n(112),a="__lodash_hash_undefined__",o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return i?void 0!==t[e]:o.call(t,e)}var i=n(112),a=Object.prototype,o=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?a:t,this}var i=n(112),a="__lodash_hash_undefined__";e.exports=r},function(e,t){function n(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&i.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var r=Object.prototype,i=r.hasOwnProperty;e.exports=n},function(e,t,n){function r(e,t,n){var r=e.constructor;switch(t){case m:return i(e);case u:case l:return new r(+e);case y:return a(e,n);case b:case _:case w:case S:case k:case T:case C:case x:case E:return c(e,n);case d:return new r;case f:case v:return new r(e);case h:return o(e);case p:return new r;case g:return s(e)}}var i=n(167),a=n(846),o=n(847),s=n(848),c=n(312),u="[object Boolean]",l="[object Date]",d="[object Map]",f="[object Number]",h="[object RegExp]",p="[object Set]",v="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",b="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",S="[object Int16Array]",k="[object Int32Array]",T="[object Uint8Array]",C="[object Uint8ClampedArray]",x="[object Uint16Array]",E="[object Uint32Array]";e.exports=r},function(e,t){function n(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(r,"{\n/* [wrapped with "+t+"] */\n")}var r=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=n},function(e,t,n){function r(e){return o(e)||a(e)||!!(s&&e&&e[s])}var i=n(47),a=n(76),o=n(4),s=i?i.isConcatSpreadable:void 0;e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){var t=o(e),n=s[t];if("function"!=typeof n||!(t in i.prototype))return!1;if(e===n)return!0;var r=a(n);return!!r&&e===r[0]}var i=n(157),a=n(321),o=n(868),s=n(936);e.exports=r},function(e,t,n){function r(e){return!!a&&a in e}var i=n(851),a=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=i(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}var i=n(103),a=Array.prototype,o=a.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}var i=n(103);e.exports=r},function(e,t,n){function r(e){return i(this.__data__,e)>-1}var i=n(103);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var i=n(103);e.exports=r},function(e,t,n){function r(){this.size=0,this.__data__={hash:new i,map:new(o||a),string:new i}}var i=n(813),a=n(100),o=n(158);e.exports=r},function(e,t,n){function r(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}var i=n(108);e.exports=r},function(e,t,n){function r(e){return i(this,e).get(e)}var i=n(108);e.exports=r},function(e,t,n){function r(e){return i(this,e).has(e)}var i=n(108);e.exports=r},function(e,t,n){function r(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var i=n(108);e.exports=r},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}e.exports=n},function(e,t,n){function r(e){var t=i(e,function(e){return n.size===a&&n.clear(),e}),n=t.cache;return t}var i=n(926),a=500;e.exports=r},function(e,t,n){function r(e,t){var n=e[1],r=t[1],v=n|r,g=v<(c|u|f),m=r==f&&n==d||r==f&&n==h&&e[7].length<=t[8]||r==(f|h)&&t[7].length<=t[8]&&n==d;if(!g&&!m)return e;r&c&&(e[2]=t[2],v|=n&c?0:l);var y=t[3];if(y){var b=e[3];e[3]=b?i(b,y,t[4]):y,e[4]=b?o(e[3],s):t[4]}return y=t[5],y&&(b=e[5],e[5]=b?a(b,y,t[6]):y,e[6]=b?o(e[5],s):t[6]),y=t[7],y&&(e[7]=y),r&f&&(e[8]=null==e[8]?t[8]:p(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=v,e}var i=n(313),a=n(314),o=n(172),s="__lodash_placeholder__",c=1,u=2,l=4,d=8,f=128,h=256,p=Math.min;e.exports=r},function(e,t,n){var r=n(329),i=r(Object.keys,Object);e.exports=i},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t){function n(e){return i.call(e)}var r=Object.prototype,i=r.toString;e.exports=n},function(e,t,n){function r(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,s=a(r.length-t,0),c=Array(s);++o<s;)c[o]=r[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=r[o];return u[t]=n(c),i(e,this,u)}}var i=n(102),a=Math.max;e.exports=r},function(e,t){var n={};e.exports=n},function(e,t,n){function r(e,t){for(var n=e.length,r=o(t.length,n),s=i(e);r--;){var c=t[r];e[r]=a(c,n)?s[c]:void 0}return e}var i=n(106),a=n(109),o=Math.min;e.exports=r},function(e,t){function n(e){return this.__data__.set(e,r),this}var r="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(){this.__data__=new i,this.size=0}var i=n(100);e.exports=r},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!a||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(r)}return n.set(e,t),this.size=n.size,this}var i=n(100),a=n(158),o=n(159),s=200;e.exports=r},function(e,t){function n(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}e.exports=n},function(e,t,n){var r=n(896),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)}),t});e.exports=o},function(e,t,n){function r(e,t){return i(v,function(n){var r="_."+n[0];t&n[1]&&!a(e,r)&&e.push(r)}),e.sort()}var i=n(160),a=n(293),o=1,s=2,c=8,u=16,l=32,d=64,f=128,h=256,p=512,v=[["ary",f],["bind",o],["bindKey",s],["curry",c],["curryRight",u],["flip",p],["partial",l],["partialRight",d],["rearg",h]];e.exports=r},function(e,t,n){function r(e){if(e instanceof i)return e.clone();var t=new a(e.__wrapped__,e.__chain__);return t.__actions__=o(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var i=n(157),a=n(287),o=n(106);e.exports=r},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t,n){function r(e,t,n){t=n?void 0:t;var o=i(e,a,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=r.placeholder,o}var i=n(862),a=8;r.placeholder={},e.exports=r},function(e,t,n){var r=n(105),i=n(48),a=n(110),o=n(78),s=Object.prototype,c=s.hasOwnProperty,u=r(function(e,t){e=Object(e);var n=-1,r=t.length,u=r>2?t[2]:void 0;for(u&&a(t[0],t[1],u)&&(r=1);++n<r;)for(var l=t[n],d=o(l),f=-1,h=d.length;++f<h;){var p=d[f],v=e[p];(void 0===v||i(v,s[p])&&!c.call(e,p))&&(e[p]=l[p])}return e});e.exports=u},function(e,t,n){var r=n(102),i=n(105),a=n(863),o=n(344),s=i(function(e){return e.push(void 0,a),r(o,void 0,e)});e.exports=s},function(e,t,n){function r(e){return e=a(e),e&&s.test(e)?e.replace(o,i):e}var i=n(866),a=n(348),o=/[&<>"']/g,s=RegExp(o.source);e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var c=null==n?0:o(n);return c<0&&(c=s(r+c,0)),i(e,a(t,3),c)}var i=n(298),a=n(26),o=n(118),s=Math.max;e.exports=r},function(e,t,n){function r(e,t){return null!=e&&a(e,t,i)}var i=n(823),a=n(324);e.exports=r},function(e,t,n){var r=n(826),i=n(166),a=n(171),o=a&&a.isMap,s=o?i(o):r;e.exports=s},function(e,t,n){var r=n(830),i=n(166),a=n(171),o=a&&a.isSet,s=o?i(o):r;e.exports=s},function(e,t,n){function r(e,t){var n={};return t=o(t,3),a(e,function(e,r,a){i(n,t(e,r,a),e)}),n}var i=n(71),a=n(163),o=n(26);e.exports=r},function(e,t,n){function r(e,t){var n={};return t=o(t,3),a(e,function(e,r,a){i(n,r,t(e,r,a))}),n}var i=n(71),a=n(163),o=n(26);e.exports=r},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(r.Cache||i),n}var i=n(159),a="Expected a function";r.Cache=i,e.exports=r},function(e,t,n){function r(e){return o(e)?i(s(e)):a(e)}var i=n(837),a=n(838),o=n(170),s=n(113);e.exports=r},function(e,t,n){function r(e,t,n){var r=s(e)?i:o;return n&&c(e,t,n)&&(t=void 0),r(e,a(t,3))}var i=n(295),a=n(26),o=n(843),s=n(4),c=n(110);e.exports=r},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e,t){if((e=o(e))<1||e>s)return[];var n=c,r=u(e,c);t=a(t),e-=c;for(var l=i(r,t);++n<e;)t(n);return l}var i=n(306),a=n(309),o=n(118),s=9007199254740991,c=4294967295,u=Math.min;e.exports=r},function(e,t,n){function r(e){if("number"==typeof e)return e;if(a(e))return o;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=u.test(e);return n||l.test(e)?d(e.slice(2),n?2:8):c.test(e)?o:+e}var i=n(12),a=n(114),o=NaN,s=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;e.exports=r},function(e,t,n){function r(e){return i(e,a(e))}var i=n(73),a=n(78);e.exports=r},function(e,t,n){var r=n(821),i=n(105),a=n(307),o=n(340),s=i(function(e){return a(r(e,1,o,!0))});e.exports=s},function(e,t,n){function r(e){return e&&e.length?i(e):[]}var i=n(307);e.exports=r},function(e,t,n){function r(e){return null==e?[]:i(e,a(e))}var i=n(845),a=n(28);e.exports=r},function(e,t,n){function r(e){if(c(e)&&!s(e)&&!(e instanceof i)){if(e instanceof a)return e;if(d.call(e,"__wrapped__"))return u(e)}return new a(e)}var i=n(157),a=n(287),o=n(165),s=n(4),c=n(13),u=n(914),l=Object.prototype,d=l.hasOwnProperty;r.prototype=o.prototype,r.prototype.constructor=r,e.exports=r},function(e,t,n){"use strict";var r=n(939),i=n(938),a=n(349);e.exports={formats:a,parse:i,stringify:r}},function(e,t,n){"use strict";var r=n(350),i=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},o=function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,s=r.split(t.delimiter,o),c=0;c<s.length;++c){var u,l,d=s[c],f=d.indexOf("]="),h=-1===f?d.indexOf("="):f+1;-1===h?(u=t.decoder(d,a.decoder),l=t.strictNullHandling?null:""):(u=t.decoder(d.slice(0,h),a.decoder),l=t.decoder(d.slice(h+1),a.decoder)),i.call(n,u)?n[u]=[].concat(n[u]).concat(l):n[u]=l}return n},s=function(e,t,n){for(var r=t,i=e.length-1;i>=0;--i){var a,o=e[i];if("[]"===o)a=[],a=a.concat(r);else{a=n.plainObjects?Object.create(null):{};var s="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(s,10);!isNaN(c)&&o!==s&&String(c)===s&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(a=[],a[c]=r):a[s]=r}r=a}return r},c=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,c=a.exec(r),u=c?r.slice(0,c.index):r,l=[];if(u){if(!n.plainObjects&&i.call(Object.prototype,u)&&!n.allowPrototypes)return;l.push(u)}for(var d=0;null!==(c=o.exec(r))&&d<n.depth;){if(d+=1,!n.plainObjects&&i.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(c[1])}return c&&l.push("["+r.slice(c.index)+"]"),s(l,t,n)}};e.exports=function(e,t){var n=t?r.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:a.delimiter,n.depth="number"==typeof n.depth?n.depth:a.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:a.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:a.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:a.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:a.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:a.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:a.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:a.strictNullHandling,""===e||null===e||void 0===e)return n.plainObjects?Object.create(null):{};for(var i="string"==typeof e?o(e,n):e,s=n.plainObjects?Object.create(null):{},u=Object.keys(i),l=0;l<u.length;++l){var d=u[l],f=c(d,i[d],n);s=r.merge(s,f,n)}return r.compact(s)}},function(e,t,n){"use strict";var r=n(350),i=n(349),a={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return o.call(e)},skipNulls:!1,strictNullHandling:!1},c=function e(t,n,i,a,o,c,u,l,d,f,h,p){var v=t;if("function"==typeof u)v=u(n,v);else if(v instanceof Date)v=f(v);else if(null===v){if(a)return c&&!p?c(n,s.encoder):n;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||r.isBuffer(v)){if(c){return[h(p?n:c(n,s.encoder))+"="+h(c(v,s.encoder))]}return[h(n)+"="+h(String(v))]}var g=[];if(void 0===v)return g;var m;if(Array.isArray(u))m=u;else{var y=Object.keys(v);m=l?y.sort(l):y}for(var b=0;b<m.length;++b){var _=m[b];o&&null===v[_]||(g=Array.isArray(v)?g.concat(e(v[_],i(n,_),i,a,o,c,u,l,d,f,h,p)):g.concat(e(v[_],n+(d?"."+_:"["+_+"]"),i,a,o,c,u,l,d,f,h,p)))}return g};e.exports=function(e,t){var n=e,o=t?r.assign({},t):{};if(null!==o.encoder&&void 0!==o.encoder&&"function"!=typeof o.encoder)throw new TypeError("Encoder has to be a function.");var u=void 0===o.delimiter?s.delimiter:o.delimiter,l="boolean"==typeof o.strictNullHandling?o.strictNullHandling:s.strictNullHandling,d="boolean"==typeof o.skipNulls?o.skipNulls:s.skipNulls,f="boolean"==typeof o.encode?o.encode:s.encode,h="function"==typeof o.encoder?o.encoder:s.encoder,p="function"==typeof o.sort?o.sort:null,v=void 0!==o.allowDots&&o.allowDots,g="function"==typeof o.serializeDate?o.serializeDate:s.serializeDate,m="boolean"==typeof o.encodeValuesOnly?o.encodeValuesOnly:s.encodeValuesOnly;if(void 0===o.format)o.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,o.format))throw new TypeError("Unknown format option provided.");var y,b,_=i.formatters[o.format];"function"==typeof o.filter?(b=o.filter,n=b("",n)):Array.isArray(o.filter)&&(b=o.filter,y=b);var w=[];if("object"!=typeof n||null===n)return"";var S;S=o.arrayFormat in a?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":"indices";var k=a[S];y||(y=Object.keys(n)),p&&y.sort(p);for(var T=0;T<y.length;++T){var C=y[T];d&&null===n[C]||(w=w.concat(c(n[C],C,k,l,d,f?h:null,b,p,v,g,_,m)))}var x=w.join(u),E=!0===o.addQueryPrefix?"?":"";return x.length>0?E+x:""}},function(e,t,n){"use strict";var r=Function.prototype.toString,i=/^\s*class\b/,a=function(e){try{var t=r.call(e);return i.test(t)}catch(e){return!1}},o=function(e){try{return!a(e)&&(r.call(e),!0)}catch(e){return!1}},s=Object.prototype.toString,c="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(c)return o(e);if(a(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},function(e,t){function n(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=n;var r=Object.prototype.toString},function(e,t,n){"use strict";function r(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,e!==r&&c(this,e)}function a(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function o(e,t,n){p(function(){var r;try{r=t(n)}catch(t){return v.reject(e,t)}r===e?v.reject(e,new TypeError("Cannot resolve promise with itself")):v.resolve(e,r)})}function s(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function c(e,t){function n(t){a||(a=!0,v.reject(e,t))}function r(t){a||(a=!0,v.resolve(e,t))}function i(){t(r,n)}var a=!1,o=u(i);"error"===o.status&&n(o.value)}function u(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function l(e){return e instanceof this?e:v.resolve(new this(r),e)}function d(e){var t=new this(r);return v.reject(t,e)}function f(e){function t(e,t){function r(e){o[t]=e,++s!==i||a||(a=!0,v.resolve(u,o))}n.resolve(e).then(r,function(e){a||(a=!0,v.reject(u,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,a=!1;if(!i)return this.resolve([]);for(var o=new Array(i),s=0,c=-1,u=new this(r);++c<i;)t(e[c],c);return u}function h(e){function t(e){n.resolve(e).then(function(e){a||(a=!0,v.resolve(s,e))},function(e){a||(a=!0,v.reject(s,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,a=!1;if(!i)return this.resolve([]);for(var o=-1,s=new this(r);++o<i;)t(e[o]);return s}var p=n(153),v={},g=["REJECTED"],m=["FULFILLED"],y=["PENDING"];e.exports=i,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===m||"function"!=typeof t&&this.state===g)return this;var n=new this.constructor(r);if(this.state!==y){o(n,this.state===m?e:t,this.outcome)}else this.queue.push(new a(n,e,t));return n},a.prototype.callFulfilled=function(e){v.resolve(this.promise,e)},a.prototype.otherCallFulfilled=function(e){o(this.promise,this.onFulfilled,e)},a.prototype.callRejected=function(e){v.reject(this.promise,e)},a.prototype.otherCallRejected=function(e){o(this.promise,this.onRejected,e)},v.resolve=function(e,t){var n=u(s,t);if("error"===n.status)return v.reject(e,n.value);var r=n.value;if(r)c(e,r);else{e.state=m,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},v.reject=function(e,t){e.state=g,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},i.resolve=l,i.reject=d,i.all=f,i.race=h},function(e,t,n){(function(t){var n,n;/*!
    localForage -- Offline Storage, Improved
    Version 1.4.3
    https://mozilla.github.io/localForage
    (c) 2013-2016 Mozilla, Apache License 2.0
*/
!function(t){e.exports=t()}(function(){return function e(t,r,i){function a(s,c){if(!r[s]){if(!t[s]){var u="function"==typeof n&&n;if(!c&&u)return n(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=r[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return a(n||e)},d,d.exports,e,t,r,i)}return r[s].exports}for(var o="function"==typeof n&&n,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(e,t,n){"use strict";function r(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,e!==r&&c(this,e)}function a(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function o(e,t,n){p(function(){var r;try{r=t(n)}catch(t){return v.reject(e,t)}r===e?v.reject(e,new TypeError("Cannot resolve promise with itself")):v.resolve(e,r)})}function s(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function c(e,t){function n(t){a||(a=!0,v.reject(e,t))}function r(t){a||(a=!0,v.resolve(e,t))}function i(){t(r,n)}var a=!1,o=u(i);"error"===o.status&&n(o.value)}function u(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function l(e){return e instanceof this?e:v.resolve(new this(r),e)}function d(e){var t=new this(r);return v.reject(t,e)}function f(e){function t(e,t){function r(e){o[t]=e,++s!==i||a||(a=!0,v.resolve(u,o))}n.resolve(e).then(r,function(e){a||(a=!0,v.reject(u,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,a=!1;if(!i)return this.resolve([]);for(var o=new Array(i),s=0,c=-1,u=new this(r);++c<i;)t(e[c],c);return u}function h(e){function t(e){n.resolve(e).then(function(e){a||(a=!0,v.resolve(s,e))},function(e){a||(a=!0,v.reject(s,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,a=!1;if(!i)return this.resolve([]);for(var o=-1,s=new this(r);++o<i;)t(e[o]);return s}var p=e(2),v={},g=["REJECTED"],m=["FULFILLED"],y=["PENDING"];t.exports=n=i,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===m||"function"!=typeof t&&this.state===g)return this;var n=new this.constructor(r);if(this.state!==y){o(n,this.state===m?e:t,this.outcome)}else this.queue.push(new a(n,e,t));return n},a.prototype.callFulfilled=function(e){v.resolve(this.promise,e)},a.prototype.otherCallFulfilled=function(e){o(this.promise,this.onFulfilled,e)},a.prototype.callRejected=function(e){v.reject(this.promise,e)},a.prototype.otherCallRejected=function(e){o(this.promise,this.onRejected,e)},v.resolve=function(e,t){var n=u(s,t);if("error"===n.status)return v.reject(e,n.value);var r=n.value;if(r)c(e,r);else{e.state=m,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},v.reject=function(e,t){e.state=g,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},n.resolve=l,n.reject=d,n.all=f,n.race=h},{2:2}],2:[function(e,n,r){(function(e){"use strict";function t(){l=!0;for(var e,t,n=d.length;n;){for(t=d,d=[],e=-1;++e<n;)t[e]();n=d.length}l=!1}function r(e){1!==d.push(e)||l||i()}var i,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var o=0,s=new a(t),c=e.document.createTextNode("");s.observe(c,{characterData:!0}),i=function(){c.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(t,0)};else{var u=new e.MessageChannel;u.port1.onmessage=t,i=function(){u.port2.postMessage(0)}}var l,d=[];n.exports=r}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(1))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}function a(){try{return!!ae&&(!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&(ae&&"function"==typeof ae.open&&"undefined"!=typeof IDBKeyRange))}catch(e){return!1}}function o(){return"function"==typeof openDatabase}function s(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(e){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if("TypeError"!==a.name)throw a;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function u(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function l(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function d(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function f(e){return new ce(function(t){var n=c([""]);e.objectStore(ue).put(n,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}function h(e){return"boolean"==typeof oe?ce.resolve(oe):f(e).then(function(e){return oe=e})}function p(e){var t=se[e.name],n={};n.promise=new ce(function(e){n.resolve=e}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function v(e){var t=se[e.name],n=t.deferredOperations.pop();n&&n.resolve()}function g(e,t){return new ce(function(n,r){if(e.db){if(!t)return n(e.db);p(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var a=ae.open.apply(ae,i);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(ue)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(){r(a.error)},a.onsuccess=function(){n(a.result),v(e)}})}function m(e){return g(e,!1)}function y(e){return g(e,!0)}function b(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function _(e){return new ce(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function w(e){return c([d(atob(e.data))],{type:e.type})}function S(e){return e&&e.__local_forage_encoded_blob}function k(e){var t=this,n=t._initReady().then(function(){var e=se[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return l(n,e,e),n}function T(e){function t(){return ce.resolve()}var n=this,r={db:null};if(e)for(var i in e)r[i]=e[i];se||(se={});var a=se[r.name];a||(a={forages:[],db:null,dbReady:null,deferredOperations:[]},se[r.name]=a),a.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=k);for(var o=[],s=0;s<a.forages.length;s++){var c=a.forages[s];c!==n&&o.push(c._initReady().catch(t))}var u=a.forages.slice(0);return ce.all(o).then(function(){return r.db=a.db,m(r)}).then(function(e){return r.db=e,b(r,n._defaultConfig.version)?y(r):e}).then(function(e){r.db=a.db=e,n._dbInfo=r;for(var t=0;t<u.length;t++){var i=u[t];i!==n&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}})}function C(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo,a=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),o=a.get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),S(e)&&(e=w(e)),t(e)},o.onerror=function(){r(o.error)}}).catch(r)});return u(r,t),r}function x(e,t){var n=this,r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo,a=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),o=a.openCursor(),s=1;o.onsuccess=function(){var n=o.result;if(n){var r=n.value;S(r)&&(r=w(r));var i=e(r,n.key,s++);void 0!==i?t(i):n.continue()}else t()},o.onerror=function(){r(o.error)}}).catch(r)});return u(r,t),r}function E(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new ce(function(n,i){var a;r.ready().then(function(){return a=r._dbInfo,"[object Blob]"===le.call(t)?h(a.db).then(function(e){return e?t:_(t)}):t}).then(function(t){var r=a.db.transaction(a.storeName,"readwrite"),o=r.objectStore(a.storeName);null===t&&(t=void 0),r.oncomplete=function(){void 0===t&&(t=null),n(t)},r.onabort=r.onerror=function(){var e=s.error?s.error:s.transaction.error;i(e)};var s=o.put(t,e)}).catch(i)});return u(i,n),i}function P(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo,a=i.db.transaction(i.storeName,"readwrite"),o=a.objectStore(i.storeName),s=o.delete(e);a.oncomplete=function(){t()},a.onerror=function(){r(s.error)},a.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}}).catch(r)});return u(r,t),r}function $(e){var t=this,n=new ce(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readwrite"),a=i.objectStore(r.storeName),o=a.clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}).catch(n)});return u(n,e),n}function A(e){var t=this,n=new ce(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),a=i.count();a.onsuccess=function(){e(a.result)},a.onerror=function(){n(a.error)}}).catch(n)});return u(n,e),n}function O(e,t){var n=this,r=new ce(function(t,r){if(e<0)return void t(null);n.ready().then(function(){var i=n._dbInfo,a=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),o=!1,s=a.openCursor();s.onsuccess=function(){var n=s.result;if(!n)return void t(null);0===e?t(n.key):o?t(n.key):(o=!0,n.advance(e))},s.onerror=function(){r(s.error)}}).catch(r)});return u(r,t),r}function I(e){var t=this,n=new ce(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),a=i.openCursor(),o=[];a.onsuccess=function(){var t=a.result;if(!t)return void e(o);o.push(t.key),t.continue()},a.onerror=function(){n(a.error)}}).catch(n)});return u(n,e),n}function R(e){var t,n,r,i,a,o=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var u=new ArrayBuffer(o),l=new Uint8Array(u);for(t=0;t<s;t+=4)n=fe.indexOf(e[t]),r=fe.indexOf(e[t+1]),i=fe.indexOf(e[t+2]),a=fe.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|i>>2,l[c++]=(3&i)<<6|63&a;return u}function L(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=fe[n[t]>>2],r+=fe[(3&n[t])<<4|n[t+1]>>4],r+=fe[(15&n[t+1])<<2|n[t+2]>>6],r+=fe[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function j(e,t){var n="";if(e&&(n=$e.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===$e.call(e.buffer))){var r,i=ve;e instanceof ArrayBuffer?(r=e,i+=me):(r=e.buffer,"[object Int8Array]"===n?i+=be:"[object Uint8Array]"===n?i+=_e:"[object Uint8ClampedArray]"===n?i+=we:"[object Int16Array]"===n?i+=Se:"[object Uint16Array]"===n?i+=Te:"[object Int32Array]"===n?i+=ke:"[object Uint32Array]"===n?i+=Ce:"[object Float32Array]"===n?i+=xe:"[object Float64Array]"===n?i+=Ee:t(new Error("Failed to get type for BinaryArray"))),t(i+L(r))}else if("[object Blob]"===n){var a=new FileReader;a.onload=function(){var n=he+e.type+"~"+L(this.result);t(ve+ye+n)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function D(e){if(e.substring(0,ge)!==ve)return JSON.parse(e);var t,n=e.substring(Pe),r=e.substring(ge,Pe);if(r===ye&&pe.test(n)){var i=n.match(pe);t=i[1],n=n.substring(i[0].length)}var a=R(n);switch(r){case me:return a;case ye:return c([a],{type:t});case be:return new Int8Array(a);case _e:return new Uint8Array(a);case we:return new Uint8ClampedArray(a);case Se:return new Int16Array(a);case Te:return new Uint16Array(a);case ke:return new Int32Array(a);case Ce:return new Uint32Array(a);case xe:return new Float32Array(a);case Ee:return new Float64Array(a);default:throw new Error("Unkown type: "+r)}}function N(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new ce(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(i){i.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,e()},function(e,t){r(t)})})});return n.serializer=Ae,i}function U(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return u(r,t),r}function M(e,t){var n=this,r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName,[],function(n,r){for(var a=r.rows,o=a.length,s=0;s<o;s++){var c=a.item(s),u=c.value;if(u&&(u=i.serializer.deserialize(u)),void 0!==(u=e(u,c.key,s+1)))return void t(u)}t()},function(e,t){r(t)})})}).catch(r)});return u(r,t),r}function F(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new ce(function(n,i){r.ready().then(function(){void 0===t&&(t=null);var a=t,o=r._dbInfo;o.serializer.serialize(t,function(t,r){r?i(r):o.db.transaction(function(r){r.executeSql("INSERT OR REPLACE INTO "+o.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){n(a)},function(e,t){i(t)})},function(e){e.code===e.QUOTA_ERR&&i(e)})})}).catch(i)});return u(i,n),i}function B(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return u(r,t),r}function q(e){var t=this,n=new ce(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return u(n,e),n}function H(e){var t=this,n=new ce(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return u(n,e),n}function V(e,t){var n=this,r=new ce(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return u(r,t),r}function z(e){var t=this,n=new ce(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})}).catch(n)});return u(n,e),n}function W(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=n.name+"/",n.storeName!==t._defaultConfig.storeName&&(n.keyPrefix+=n.storeName+"/"),t._dbInfo=n,n.serializer=Ae,ce.resolve()}function G(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return u(n,e),n}function Y(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return u(r,t),r}function Q(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,a=localStorage.length,o=1,s=0;s<a;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(i),o++)))return u}}});return u(r,t),r}function X(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return u(r,t),r}function J(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++)0===localStorage.key(i).indexOf(e.keyPrefix)&&r.push(localStorage.key(i).substring(e.keyPrefix.length));return r});return u(n,e),n}function K(e){var t=this,n=t.keys().then(function(e){return e.length});return u(n,e),n}function Z(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return u(r,t),r}function ee(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new ce(function(i,a){var o=r._dbInfo;o.serializer.serialize(t,function(t,r){if(r)a(r);else try{localStorage.setItem(o.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||a(e),a(e)}})})});return u(i,n),i}function te(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function ne(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Me(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}function re(e){for(var t in Le)if(Le.hasOwnProperty(t)&&Le[t]===e)return!0;return!1}var ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae=i();"undefined"==typeof Promise&&void 0!==e&&e(3);var oe,se,ce=Promise,ue="local-forage-detect-blob-support",le=Object.prototype.toString,de={_driver:"asyncStorage",_initStorage:T,iterate:x,getItem:C,setItem:E,removeItem:P,clear:$,length:A,key:O,keys:I},fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",he="~~local_forage_type~",pe=/^~~local_forage_type~([^~]+)~/,ve="__lfsc__:",ge=ve.length,me="arbf",ye="blob",be="si08",_e="ui08",we="uic8",Se="si16",ke="si32",Te="ur16",Ce="ui32",xe="fl32",Ee="fl64",Pe=ge+me.length,$e=Object.prototype.toString,Ae={serialize:j,deserialize:D,stringToBuffer:R,bufferToString:L},Oe={_driver:"webSQLStorage",_initStorage:N,iterate:M,getItem:U,setItem:F,removeItem:B,clear:q,length:H,key:V,keys:z},Ie={_driver:"localStorageWrapper",_initStorage:W,iterate:Q,getItem:Y,setItem:ee,removeItem:Z,clear:G,length:K,key:X,keys:J},Re={},Le={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},je=[Le.INDEXEDDB,Le.WEBSQL,Le.LOCALSTORAGE],De=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],Ne={description:"",driver:je.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},Ue={};Ue[Le.INDEXEDDB]=a(),Ue[Le.WEBSQL]=o(),Ue[Le.LOCALSTORAGE]=s();var Me=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Fe=function(){function e(t){r(this,e),this.INDEXEDDB=Le.INDEXEDDB,this.LOCALSTORAGE=Le.LOCALSTORAGE,this.WEBSQL=Le.WEBSQL,this._defaultConfig=ne({},Ne),this._config=ne({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":ie(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new ce(function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),a=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void n(i);if(re(e._driver))return void n(a);for(var o=De.concat("_initStorage"),s=0;s<o.length;s++){var c=o[s];if(!c||!e[c]||"function"!=typeof e[c])return void n(i)}var u=ce.resolve(!0);"_support"in e&&(u=e._support&&"function"==typeof e._support?e._support():ce.resolve(!!e._support)),u.then(function(n){Ue[r]=n,Re[r]=e,t()},n)}catch(e){n(e)}});return l(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=this,i=ce.resolve().then(function(){if(!re(e)){if(Re[e])return Re[e];throw new Error("Driver not found.")}switch(e){case r.INDEXEDDB:return de;case r.LOCALSTORAGE:return Ie;case r.WEBSQL:return Oe}});return l(i,t,n),i},e.prototype.getSerializer=function(e){var t=ce.resolve(Ae);return l(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return l(n,e,e),n},e.prototype.setDriver=function(e,t,n){function r(){a._config.driver=a.driver()}function i(e){return function(){function t(){for(;n<e.length;){var i=e[n];return n++,a._dbInfo=null,a._ready=null,a.getDriver(i).then(function(e){return a._extend(e),r(),a._ready=a._initStorage(a._config),a._ready}).catch(t)}r();var o=new Error("No available storage method found.");return a._driverSet=ce.reject(o),a._driverSet}var n=0;return t()}}var a=this;Me(e)||(e=[e]);var o=this._getSupportedDrivers(e),s=null!==this._driverSet?this._driverSet.catch(function(){return ce.resolve()}):ce.resolve();return this._driverSet=s.then(function(){var e=o[0];return a._dbInfo=null,a._ready=null,a.getDriver(e).then(function(e){a._driver=e._driver,r(),a._wrapLibraryMethodsWithReady(),a._initDriver=i(o)})}).catch(function(){r();var e=new Error("No available storage method found.");return a._driverSet=ce.reject(e),a._driverSet}),l(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Ue[e]},e.prototype._extend=function(e){ne(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<De.length;e++)te(this,De[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),Be=new Fe;t.exports=Be},{3:3}]},{},[4])(4)})}).call(t,n(6))},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(957),a=n(958),o=n(959),s=n(960),c=n(961);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(965),a=n(966),o=n(967),s=n(968),c=n(969);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t,n){var r=n(352),i=n(181),a=r(i,"Map");e.exports=a},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(970),a=n(971),o=n(972),s=n(973),c=n(974);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=c,e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}e.exports=n},function(e,t,n){function r(e,t){t=i(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[a(t[n++])];return n&&n==r?e:void 0}var i=n(952),a=n(978);e.exports=r},function(e,t,n){function r(e){return!(!o(e)||a(e))&&(i(e)?p:u).test(s(e))}var i=n(982),a=n(964),o=n(353),s=n(979),c=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,f=l.toString,h=d.hasOwnProperty,p=RegExp("^"+f.call(h).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){if("string"==typeof e)return e;if(o(e))return a(e,r)+"";if(s(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-c?"-0":t}var i=n(180),a=n(948),o=n(182),s=n(183),c=1/0,u=i?i.prototype:void 0,l=u?u.toString:void 0;e.exports=r},function(e,t,n){function r(e,t){return i(e)?e:a(e,t)?[e]:o(s(e))}var i=n(182),a=n(962),o=n(977),s=n(985);e.exports=r},function(e,t,n){var r=n(181),i=r["__core-js_shared__"];e.exports=i},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(6))},function(e,t,n){function r(e){var t=o.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[c]=n:delete e[c]),i}var i=n(180),a=Object.prototype,o=a.hasOwnProperty,s=a.toString,c=i?i.toStringTag:void 0;e.exports=r},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function r(){this.__data__=i?i(null):{},this.size=0}var i=n(121);e.exports=r},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(i){var n=t[e];return n===a?void 0:n}return s.call(t,e)?t[e]:void 0}var i=n(121),a="__lodash_hash_undefined__",o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return i?void 0!==t[e]:o.call(t,e)}var i=n(121),a=Object.prototype,o=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?a:t,this}var i=n(121),a="__lodash_hash_undefined__";e.exports=r},function(e,t,n){function r(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(s.test(e)||!o.test(e)||null!=t&&e in Object(t))}var i=n(182),a=n(183),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){return!!a&&a in e}var i=n(953),a=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=i(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}var i=n(119),a=Array.prototype,o=a.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}var i=n(119);e.exports=r},function(e,t,n){function r(e){return i(this.__data__,e)>-1}var i=n(119);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var i=n(119);e.exports=r},function(e,t,n){function r(){this.size=0,this.__data__={hash:new i,map:new(o||a),string:new i}}var i=n(944),a=n(945),o=n(946);e.exports=r},function(e,t,n){function r(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}var i=n(120);e.exports=r},function(e,t,n){function r(e){return i(this,e).get(e)}var i=n(120);e.exports=r},function(e,t,n){function r(e){return i(this,e).has(e)}var i=n(120);e.exports=r},function(e,t,n){function r(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var i=n(120);e.exports=r},function(e,t,n){function r(e){var t=i(e,function(e){return n.size===a&&n.clear(),e}),n=t.cache;return t}var i=n(984),a=500;e.exports=r},function(e,t){function n(e){return i.call(e)}var r=Object.prototype,i=r.toString;e.exports=n},function(e,t,n){var r=n(975),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)}),t});e.exports=o},function(e,t,n){function r(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}var i=n(183),a=1/0;e.exports=r},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,i=r.toString;e.exports=n},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e,t,n){var r=null==e?void 0:i(e,t);return void 0===r?n:r}var i=n(949);e.exports=r},function(e,t,n){function r(e){if(!a(e))return!1;var t=i(e);return t==s||t==c||t==o||t==u}var i=n(351),a=n(353),o="[object AsyncFunction]",s="[object Function]",c="[object GeneratorFunction]",u="[object Proxy]";e.exports=r},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(r.Cache||i),n}var i=n(947),a="Expected a function";r.Cache=i,e.exports=r},function(e,t,n){function r(e){return null==e?"":i(e)}var i=n(951);e.exports=r},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},s=function(){function e(){r(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),n>-1},e.prototype.trigger=function(e){var t=this.listeners[e],n=void 0,r=void 0,i=void 0;if(t)if(2===arguments.length)for(r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else for(i=Array.prototype.slice.call(arguments,1),r=t.length,n=0;n<r;++n)t[n].apply(this,i)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),c=function(e){function t(){r(this,t);var n=o(this,e.call(this));return n.buffer="",n}return a(t,e),t.prototype.push=function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(s),u=function(){var e="[^=]*",t='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+n+")")},l=function(e){for(var t=e.split(u()),n={},r=t.length,i=void 0;r--;)""!==t[r]&&(i=/([^=]*)=(.*)/.exec(t[r]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),n[i[0]]=i[1]);return n},d=function(e){function t(){r(this,t);var n=o(this,e.call(this));return n.customParsers=[],n}return a(t,e),t.prototype.push=function(e){var t=void 0,n=void 0;if(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),0!==e.length){if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});for(var r=0;r<this.customParsers.length;r++)if(this.customParsers[r].call(this,e))return;if(0!==e.indexOf("#EXT"))return void this.trigger("data",{type:"comment",text:e.slice(1)});if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))return void this.trigger("data",{type:"tag",tagType:"m3u"});if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var i=l(t[1]);if(i.URI&&(n.uri=i.URI),i.BYTERANGE){var a=i.BYTERANGE.split("@"),o=a[0],s=a[1];n.byterange={},o&&(n.byterange.length=parseInt(o,10)),s&&(n.byterange.offset=parseInt(s,10))}}return void this.trigger("data",n)}if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=l(t[1]),n.attributes.RESOLUTION){var c=n.attributes.RESOLUTION.split("x"),u={};c[0]&&(u.width=parseInt(c[0],10)),c[1]&&(u.height=parseInt(c[1],10)),n.attributes.RESOLUTION=u}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}return void this.trigger("data",n)}if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=l(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))return void this.trigger("data",{type:"tag",tagType:"endlist"});if(t=/^#EXT-X-DISCONTINUITY/.exec(e))return void this.trigger("data",{type:"tag",tagType:"discontinuity"});if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=l(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=l(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);this.trigger("data",{type:"tag",data:e.slice(4)})}},t.prototype.addParser=function(e){var t=this,n=e.expression,r=e.customType,i=e.dataParser,a=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push(function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:r,segment:a}),!0})},t}(s),f=function(e){function t(){r(this,t);var n=o(this,e.call(this));n.lineStream=new c,n.parseStream=new d,n.lineStream.pipe(n.parseStream);var a=n,s=[],u={},l=void 0,f=void 0,h=function(){},p={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},v=0;return n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},n.parseStream.on("data",function(e){var t=void 0,n=void 0;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(u.byterange=t,t.length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&(u.byterange=t,t.offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(u.duration=e.duration),0===e.duration&&(u.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){return e.attributes?"NONE"===e.attributes.METHOD?void(f=null):e.attributes.URI?(e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),f={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void(void 0!==e.attributes.IV&&(f.iv=e.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){if(!isFinite(e.number))return void this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number});this.manifest.mediaSequence=e.number},"discontinuity-sequence":function(){if(!isFinite(e.number))return void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number});this.manifest.discontinuitySequence=e.number,v=e.number},"playlist-type":function(){if(!/VOD|EVENT/.test(e.playlistType))return void this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist});this.manifest.playlistType=e.playlistType},map:function(){l={},e.uri&&(l.uri=e.uri),e.byterange&&(l.byterange=e.byterange)},"stream-inf":function(){if(this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||p,!e.attributes)return void this.trigger("warn",{message:"ignoring empty stream-inf attributes"});u.attributes||(u.attributes={}),i(u.attributes,e.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||p,!(e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});var r=this.manifest.mediaGroups[e.attributes.TYPE];r[e.attributes["GROUP-ID"]]=r[e.attributes["GROUP-ID"]]||{},t=r[e.attributes["GROUP-ID"]],n={default:/yes/i.test(e.attributes.DEFAULT)},n.default?n.autoselect=!0:n.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(n.language=e.attributes.LANGUAGE),e.attributes.URI&&(n.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(n.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(n.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(n.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=n},discontinuity:function(){v+=1,u.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),u.dateTimeString=e.dateTimeString,u.dateTimeObject=e.dateTimeObject},targetduration:function(){if(!isFinite(e.duration)||e.duration<0)return void this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration});this.manifest.targetDuration=e.duration},totalduration:function(){if(!isFinite(e.duration)||e.duration<0)return void this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration});this.manifest.totalDuration=e.duration},start:function(){if(!e.attributes||isNaN(e.attributes["TIME-OFFSET"]))return void this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}},"cue-out":function(){u.cueOut=e.data},"cue-out-cont":function(){u.cueOutCont=e.data},"cue-in":function(){u.cueIn=e.data}})[e.tagType]||h).call(a)},uri:function(){u.uri=e.uri,s.push(u),!this.manifest.targetDuration||"duration"in u||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),u.duration=this.manifest.targetDuration),f&&(u.key=f),u.timeline=v,l&&(u.map=l),u={}},comment:function(){},custom:function(){e.segment?(u.custom=u.custom||{},u.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(a)}),n}return a(t,e),t.prototype.push=function(e){this.lineStream.push(e)},t.prototype.end=function(){this.lineStream.push("\n")},t.prototype.addParser=function(e){this.parseStream.addParser(e)},t}(s)},function(e,t,n){"use strict";(function(e){function r(e,t){return t={exports:{}},e(t,t.exports),t.exports}function i(e){for(var t=o.a.atob(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}var a=n(69),o=n.n(a);n.d(t,"a",function(){return ne}),n.d(t,"b",function(){return re});/*! @name mpd-parser @version 0.7.0 @license Apache-2.0 */
var s=function(e){return!!e&&"object"==typeof e},c=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce(function(t,n){return Object.keys(n).forEach(function(r){Array.isArray(t[r])&&Array.isArray(n[r])?t[r]=t[r].concat(n[r]):s(t[r])&&s(n[r])?t[r]=e(t[r],n[r]):t[r]=n[r]}),t},{})},u=function(e){return Object.keys(e).map(function(t){return e[t]})},l=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},d=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},f=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},h=function(e,t){return e.reduce(function(e,n,r){return n[t]&&e.push(r),e},[])},p=function(e){return u(e.reduce(function(e,t){var n=t.attributes.id+(t.attributes.lang||"");if(e[n]){var r;t.segments[0].discontinuity=!0,(r=e[n].segments).push.apply(r,t.segments),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)}else e[n]=t;return e},{})).map(function(e){return e.discontinuityStarts=h(e.segments,"discontinuity"),e})},v=function(e){var t,n=e.attributes,r=e.segments,i={attributes:(t={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(i.contentProtection=n.contentProtection),i},g=function(e){var t,n=e.attributes,r=e.segments;return void 0===r&&(r=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration),{attributes:(t={NAME:n.id,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1}},m=function(e){return e.reduce(function(e,t){var n=t.attributes.role&&t.attributes.role.value||"main",r=t.attributes.lang||"",i="main";return r&&(i=t.attributes.lang+" ("+n+")"),e[i]&&e[i].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth?e:(e[i]={language:r,autoselect:!0,default:"main"===n,playlists:[v(t)],uri:""},e)},{})},y=function(e){return e.reduce(function(e,t){var n=t.attributes.lang||"text";return e[n]?e:(e[n]={language:n,default:!1,autoselect:!1,playlists:[g(t)],uri:""},e)},{})},b=function(e){var t,n=e.attributes,r=e.segments,i={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(i.contentProtection=n.contentProtection),i},_=function(e){var t;if(!e.length)return{};var n=e[0].attributes,r=n.sourceDuration,i=n.minimumUpdatePeriod,a=void 0===i?0:i,o=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType},s=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType},c=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},u=p(e.filter(o)).map(b),l=p(e.filter(s)),d=e.filter(c),f={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:r,playlists:u,minimumUpdatePeriod:1e3*a};return l.length&&(f.mediaGroups.AUDIO.audio=m(l)),d.length&&(f.mediaGroups.SUBTITLES.subs=y(d)),f},w=("undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self,r(function(e,t){!function(t){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var c=r.exec(s.path);s.netLoc=c[1],s.path=c[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var l=s.path,d=l.substring(0,l.lastIndexOf("/")+1)+a.path;u.path=o.normalizePath(d)}else u.path=s.path,a.params||(u.params=s.params,a.query||(u.query=s.query));return null===u.path&&(u.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o}()})),S=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=w.buildAbsoluteURL(o.a.location.href,e)),w.buildAbsoluteURL(e,t))},k=function(e){var t=e.baseUrl,n=void 0===t?"":t,r=e.source,i=void 0===r?"":r,a=e.range,o=void 0===a?"":a,s={uri:i,resolvedUri:S(n||"",i)};if(o){var c=o.split("-"),u=parseInt(c[0],10),l=parseInt(c[1],10);s.byterange={length:l-u,offset:u}}return s},T=function(e,t,n){var r=e.NOW,i=e.clientOffset,a=e.availabilityStartTime,o=e.timescale,s=void 0===o?1:o,c=e.start,u=void 0===c?0:c,l=e.minimumUpdatePeriod,d=void 0===l?0:l,f=(r+i)/1e3,h=a+u,p=f+d,v=p-h;return Math.ceil((v*s-t)/n)},C=function(e,t){for(var n=e.type,r=void 0===n?"static":n,i=e.minimumUpdatePeriod,a=void 0===i?0:i,o=e.media,s=void 0===o?"":o,c=e.sourceDuration,u=e.timescale,l=void 0===u?1:u,d=e.startNumber,f=void 0===d?1:d,h=e.periodIndex,p=[],v=-1,g=0;g<t.length;g++){var m=t[g],y=m.d,b=m.r||0,_=m.t||0;v<0&&(v=_),_&&_>v&&(v=_);var w=void 0;if(b<0){var S=g+1;w=S===t.length?"dynamic"===r&&a>0&&s.indexOf("$Number$")>0?T(e,v,y):(c*l-v)/y:(t[S].t-v)/y}else w=b+1;for(var k=f+p.length+w,C=f+p.length;C<k;)p.push({number:C,duration:y/l,time:v,timeline:h}),v+=y,C++}return p},x={static:function(e){var t=e.duration,n=e.timescale,r=void 0===n?1:n,i=e.sourceDuration;return{start:0,end:Math.ceil(i/(t/r))}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,r=e.availabilityStartTime,i=e.timescale,a=void 0===i?1:i,o=e.duration,s=e.start,c=void 0===s?0:s,u=e.minimumUpdatePeriod,l=void 0===u?0:u,d=e.timeShiftBufferDepth,f=void 0===d?1/0:d,h=(t+n)/1e3,p=r+c,v=h+l,g=v-p,m=Math.ceil(g*a/o),y=Math.floor((h-p-f)*a/o),b=Math.floor((h-p)*a/o);return{start:Math.max(0,y),end:Math.min(m,b)}}},E=function(e){return function(t,n){var r=e.duration,i=e.timescale,a=void 0===i?1:i,o=e.periodIndex,s=e.startNumber;return{number:(void 0===s?1:s)+t,duration:r/a,timeline:o,time:n*r}}},P=function(e){var t=e.type,n=void 0===t?"static":t,r=e.duration,i=e.timescale,a=void 0===i?1:i,o=e.sourceDuration,s=x[n](e),c=s.start,u=s.end,d=l(c,u).map(E(e));if("static"===n){var f=d.length-1;d[f].duration=o-r/a*f}return d},$=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,A=function(e){return function(t,n,r,i){if("$$"===t)return"$";if(void 0===e[n])return t;var a=""+e[n];return"RepresentationID"===n?a:(i=r?parseInt(i,10):1,a.length>=i?a:""+new Array(i-a.length+1).join("0")+a)}},O=function(e,t){return e.replace($,A(t))},I=function(e,t){return e.duration||t?e.duration?P(e):C(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]},R=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,i=void 0===r?{sourceURL:"",range:""}:r,a=k({baseUrl:e.baseUrl,source:O(i.sourceURL,n),range:i.range});return I(e,t).map(function(t){n.Number=t.number,n.Time=t.time;var r=O(e.media||"",n);return{uri:r,timeline:t.timeline,duration:t.duration,resolvedUri:S(e.baseUrl||"",r),map:a,number:t.number}})},L={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},j=function(e,t){var n=e.baseUrl,r=e.initialization,i=void 0===r?{}:r,a=k({baseUrl:n,source:i.sourceURL,range:i.range}),o=k({baseUrl:n,source:t.media,range:t.mediaRange});return o.map=a,o},D=function(e,t){var n=e.duration,r=e.segmentUrls,i=void 0===r?[]:r;if(!n&&!t||n&&t)throw new Error(L.SEGMENT_TIME_UNSPECIFIED);var a,o=i.map(function(t){return j(e,t)});return n&&(a=P(e)),t&&(a=C(e,t)),a.map(function(e,t){if(o[t]){var n=o[t];return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n}}).filter(function(e){return e})},N=function(e){var t=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,i=e.sourceDuration,a=e.timescale,o=void 0===a?1:a,s=e.indexRange,c=void 0===s?"":s,u=e.duration;if(!t)throw new Error(L.NO_BASE_URL);var l=k({baseUrl:t,source:r.sourceURL,range:r.range}),d=k({baseUrl:t,source:t,range:c});if(d.map=l,u){var f=P(e);f.length&&(d.duration=f[0].duration,d.timeline=f[0].timeline)}else i&&(d.duration=i/o,d.timeline=0);return d.number=0,[d]},U=function(e){var t,n,r=e.attributes,i=e.segmentInfo;if(i.template?(n=R,t=c(r,i.template)):i.base?(n=N,t=c(r,i.base)):i.list&&(n=D,t=c(r,i.list)),!n)return{attributes:r};var a=n(t,i.timeline);if(t.duration){var o=t,s=o.duration,u=o.timescale,l=void 0===u?1:u;t.duration=s/l}else a.length?t.duration=a.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0;return{attributes:t,segments:a}},M=function(e){return e.map(U)},F=function(e,t){return f(e.childNodes).filter(function(e){return e.tagName===t})},B=function(e){return e.textContent.trim()},q=function(e){var t=31536e3,n=2592e3,r=86400,i=3600,a=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,s=o.exec(e);if(!s)return 0;var c=s.slice(1),u=c[0],l=c[1],d=c[2],f=c[3],h=c[4],p=c[5];return parseFloat(u||0)*t+parseFloat(l||0)*n+parseFloat(d||0)*r+parseFloat(f||0)*i+parseFloat(h||0)*a+parseFloat(p||0)},H=function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),Date.parse(e)},V={mediaPresentationDuration:function(e){return q(e)},availabilityStartTime:function(e){return H(e)/1e3},minimumUpdatePeriod:function(e){return q(e)},timeShiftBufferDepth:function(e){return q(e)},start:function(e){return q(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?q(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},z=function(e){return e&&e.attributes?f(e.attributes).reduce(function(e,t){var n=V[t.name]||V.DEFAULT;return e[t.name]=n(t.value),e},{}):{}},W={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},G=function(e,t){return t.length?d(e.map(function(e){return t.map(function(t){return S(e,B(t))})})):e},Y=function(e){var t=F(e,"SegmentTemplate")[0],n=F(e,"SegmentList")[0],r=n&&F(n,"SegmentURL").map(function(e){return c({tag:"SegmentURL"},z(e))}),i=F(e,"SegmentBase")[0],a=n||t,o=a&&F(a,"SegmentTimeline")[0],s=n||i||t,u=s&&F(s,"Initialization")[0],l=t&&z(t);l&&u?l.initialization=u&&z(u):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});var d={template:l,timeline:o&&F(o,"S").map(function(e){return z(e)}),list:n&&c(z(n),{segmentUrls:r,initialization:z(u)}),base:i&&c(z(i),{initialization:z(u)})};return Object.keys(d).forEach(function(e){d[e]||delete d[e]}),d},Q=function(e,t,n){return function(r){var i=F(r,"BaseURL"),a=G(t,i),o=c(e,z(r)),s=Y(r);return a.map(function(e){return{segmentInfo:c(n,s),attributes:c(o,{baseUrl:e})}})}},X=function(e){return e.reduce(function(e,t){var n=z(t),r=W[n.schemeIdUri];if(r){e[r]={attributes:n};var a=F(t,"cenc:pssh")[0];if(a){var o=B(a),s=o&&i(o);e[r].pssh=s}}return e},{})},J=function(e,t,n){return function(r){var i=z(r),a=G(t,F(r,"BaseURL")),o=F(r,"Role")[0],s={role:z(o)},u=c(e,i,s),l=X(F(r,"ContentProtection"));Object.keys(l).length&&(u=c(u,{contentProtection:l}));var f=Y(r),h=F(r,"Representation"),p=c(n,f);return d(h.map(Q(u,a,p)))}},K=function(e,t){return function(n,r){var i=G(t,F(n,"BaseURL")),a=z(n),s=parseInt(a.id,10),u=o.a.isNaN(s)?r:s,l=c(e,{periodIndex:u}),f=F(n,"AdaptationSet"),h=Y(n);return d(f.map(J(l,i,h)))}},Z=function(e,t){void 0===t&&(t={});var n=t,r=n.manifestUri,i=void 0===r?"":r,a=n.NOW,o=void 0===a?Date.now():a,s=n.clientOffset,c=void 0===s?0:s,u=F(e,"Period");if(!u.length)throw new Error(L.INVALID_NUMBER_OF_PERIOD);var l=z(e),f=G([i],F(e,"BaseURL"));return l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=o,l.clientOffset=c,d(u.map(K(l,f)))},ee=function(e){if(""===e)throw new Error(L.DASH_EMPTY_MANIFEST);var t=new o.a.DOMParser,n=t.parseFromString(e,"application/xml"),r=n&&"MPD"===n.documentElement.tagName?n.documentElement:null;if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error(L.DASH_INVALID_XML);return r},te=function(e){var t=F(e,"UTCTiming")[0];if(!t)return null;var n=z(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(L.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},ne=function(e,t){return _(M(Z(ee(e),t)))},re=function(e){return te(ee(e))}}).call(t,n(6))},function(e,t,n){"use strict";var r,i=n(29),a=n(184);r=function(){var e=new Uint8Array,t=0;r.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var r,i,o,s,c=0,u=0;for(e.length?(s=e.length,e=new Uint8Array(n.byteLength+s),e.set(e.subarray(0,s)),e.set(n,s)):e=n;e.length-u>=3;)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(255!=(255&e[u])||240!=(240&e[u+1]))u++;else{if(e.length-u<7)break;if(c=a.parseAdtsSize(e,u),u+c>e.length)break;o={type:"audio",data:e.subarray(u,u+c),pts:t,dts:t},this.trigger("data",o),u+=c}else{if(e.length-u<10)break;if(c=a.parseId3TagSize(e,u),u+c>e.length)break;i={type:"timed-metadata",data:e.subarray(u,u+c)},this.trigger("data",i),u+=c}r=e.length-u,e=r>0?e.subarray(u):new Uint8Array}},r.prototype=new i,e.exports=r},function(e,t,n){"use strict";var r,i=n(29),a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=function(){var e;r.prototype.init.call(this),this.push=function(t){var n,r,i,o,s,c,u=0,l=0;if("audio"===t.type)for(e?(o=e,e=new Uint8Array(o.byteLength+t.data.byteLength),e.set(o),e.set(t.data,o.byteLength)):e=t.data;u+5<e.length;)if(255===e[u]&&240==(246&e[u+1])){if(r=2*(1&~e[u+1]),n=(3&e[u+3])<<11|e[u+4]<<3|(224&e[u+5])>>5,s=1024*(1+(3&e[u+6])),c=9e4*s/a[(60&e[u+2])>>>2],i=u+n,e.byteLength<i)return;if(this.trigger("data",{pts:t.pts+l*c,dts:t.dts+l*c,sampleCount:s,audioobjecttype:1+(e[u+2]>>>6&3),channelcount:(1&e[u+2])<<2|(192&e[u+3])>>>6,samplerate:a[(60&e[u+2])>>>2],samplingfrequencyindex:(60&e[u+2])>>>2,samplesize:16,data:e.subarray(u+7+r,i)}),e.byteLength===i)return void(e=void 0);l++,e=e.subarray(i)}else u++},this.flush=function(){this.trigger("done")}},r.prototype=new i,e.exports=r},function(e,t,n){"use strict";var r,i,a,o=n(29),s=n(1004);i=function(){var e,t,n=0;i.prototype.init.call(this),this.push=function(r){var i;for(t?(i=new Uint8Array(t.byteLength+r.data.byteLength),i.set(t),i.set(r.data,t.byteLength),t=i):t=r.data;n<t.byteLength-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<t.byteLength;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<t.length);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")}},i.prototype=new o,a={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},r=function(){var e,t,n,o,c,u,l,d=new i;r.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,o=e.dts,d.push(e))},d.on("data",function(r){var i={trackId:t,pts:n,dts:o,data:r};switch(31&r[0]){case 5:i.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:i.nalUnitType="sei_rbsp",i.escapedRBSP=c(r.subarray(1));break;case 7:i.nalUnitType="seq_parameter_set_rbsp",i.escapedRBSP=c(r.subarray(1)),i.config=u(i.escapedRBSP);break;case 8:i.nalUnitType="pic_parameter_set_rbsp";break;case 9:i.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",i)}),d.on("done",function(){e.trigger("done")}),this.flush=function(){d.flush()},l=function(e,t){var n,r,i=8,a=8;for(n=0;n<e;n++)0!==a&&(r=t.readExpGolomb(),a=(i+r+256)%256),i=0===a?i:a},c=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},u=function(e){var t,n,r,i,o,c,u,d,f,h,p,v,g,m=0,y=0,b=0,_=0,w=1;if(t=new s(e),n=t.readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),a[n]&&(o=t.readUnsignedExpGolomb(),3===o&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==o?8:12,g=0;g<p;g++)t.readBoolean()&&(g<6?l(16,t):l(64,t));if(t.skipUnsignedExpGolomb(),0===(c=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===c)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),g=0;g<u;g++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),d=t.readUnsignedExpGolomb(),f=t.readUnsignedExpGolomb(),h=t.readBits(1),0===h&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),b=t.readUnsignedExpGolomb(),_=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}v&&(w=v[0]/v[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:Math.ceil((16*(d+1)-2*m-2*y)*w),height:(2-h)*(f+1)*16-2*b-2*_}}},r.prototype=new o,e.exports={H264Stream:r,NalByteStream:i}},function(e,t){var n=[33,16,5,32,164,27],r=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],i=function(e){for(var t=[];e--;)t.push(0);return t},a=function(e){return Object.keys(e).reduce(function(t,n){return t[n]=new Uint8Array(e[n].reduce(function(e,t){return e.concat(t)},[])),t},{})},o={96e3:[n,[227,64],i(154),[56]],88200:[n,[231],i(170),[56]],64e3:[n,[248,192],i(240),[56]],48e3:[n,[255,192],i(268),[55,148,128],i(54),[112]],44100:[n,[255,192],i(268),[55,163,128],i(84),[112]],32e3:[n,[255,192],i(268),[55,234],i(226),[112]],24e3:[n,[255,192],i(268),[55,255,128],i(268),[111,112],i(126),[224]],16e3:[n,[255,192],i(268),[55,255,128],i(268),[111,255],i(269),[223,108],i(195),[1,192]],12e3:[r,i(268),[3,127,248],i(268),[6,255,240],i(268),[13,255,224],i(268),[27,253,128],i(259),[56]],11025:[r,i(268),[3,127,248],i(268),[6,255,240],i(268),[13,255,224],i(268),[27,255,192],i(268),[55,175,128],i(108),[112]],8e3:[r,i(268),[3,121,16],i(47),[7]]};e.exports=a(o)},function(e,t,n){"use strict";var r,i,a,o=n(29),s=n(356),c=n(80),u=n(357).TimestampRolloverStream,l=n(80),d=188,f=71;r=function(){var e=new Uint8Array(d),t=0;r.prototype.init.call(this),this.push=function(n){var r,i=0,a=d;for(t?(r=new Uint8Array(n.byteLength+t),r.set(e.subarray(0,t)),r.set(n,t),t=0):r=n;a<r.byteLength;)r[i]!==f||r[a]!==f?(i++,a++):(this.trigger("data",r.subarray(i,a)),i+=d,a+=d);i<r.byteLength&&(e.set(r.subarray(i),0),t=r.byteLength-i)},this.flush=function(){t===d&&e[0]===f&&(this.trigger("data",e),t=0),this.trigger("done")}},r.prototype=new o,i=function(){var e,t,n,r;i.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var i=0;r.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===r.type?t(e.subarray(i),r):n(e.subarray(i),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i,a,o;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=(15&e[1])<<8|e[2],i=3+n-4,a=(15&e[10])<<8|e[11],o=12+a;o<i;){var s=e[o],u=(31&e[o+1])<<8|e[o+2];s===c.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=u:s===c.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=u:s===c.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][u]=s),o+=5+((15&e[o+3])<<8|e[o+4])}t.programMapTable=r.programMapTable}},this.push=function(t){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid)n.type="pat",e(t.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=c.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=c.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},i.prototype=new o,i.STREAM_TYPES={h264:27,adts:15},a=function(){var e=this,t={data:[],size:0},n={data:[],size:0},r={data:[],size:0},i=function(e,t){var n;t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),n=e[7],192&n&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])},o=function(t,n,r){var a,o=new Uint8Array(t.size),s={type:n},c=0,u=0,l=!1;if(t.data.length&&!(t.size<9)){for(s.trackId=t.data[0].pid,c=0;c<t.data.length;c++)a=t.data[c],o.set(a.data,u),u+=a.data.byteLength;i(o,s),l="video"===n||s.packetLength<=t.size,(r||l)&&(t.size=0,t.data.length=0),l&&e.trigger("data",s)}};a.prototype.init.call(this),this.push=function(i){({pat:function(){},pes:function(){var e,a;switch(i.streamType){case c.H264_STREAM_TYPE:case l.H264_STREAM_TYPE:e=t,a="video";break;case c.ADTS_STREAM_TYPE:e=n,a="audio";break;case c.METADATA_STREAM_TYPE:e=r,a="timed-metadata";break;default:return}i.payloadUnitStartIndicator&&o(e,a,!0),e.data.push(i),e.size+=i.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},n=i.programMapTable;null!==n.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.video,codec:"avc",type:"video"}),null!==n.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.audio,codec:"adts",type:"audio"}),e.trigger("data",t)}})[i.type]()},this.flush=function(){o(t,"video"),o(n,"audio"),o(r,"timed-metadata"),this.trigger("done")}},a.prototype=new o;var h={PAT_PID:0,MP2T_PACKET_LENGTH:d,TransportPacketStream:r,TransportParseStream:i,ElementaryStream:a,TimestampRolloverStream:u,CaptionStream:s.CaptionStream,Cea608Stream:s.Cea608Stream,MetadataStream:n(993)};for(var p in c)c.hasOwnProperty(p)&&(h[p]=c[p]);e.exports=h},function(e,t,n){"use strict";var r,i=n(29),a=n(80),o=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},s=function(e,t,n){return decodeURIComponent(o(e,t,n))},c=function(e,t,n){return unescape(o(e,t,n))},u=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},l={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=s(e.data,1,t),e.value=s(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=s(e.data,1,t),e.url=s(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=c(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};r=function(e){var t,n={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},i=0,o=[],s=0;if(r.prototype.init.call(this),this.dispatchType=a.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,r,a,c,d,f;if("timed-metadata"===e.type){if(e.dataAlignmentIndicator&&(s=0,o.length=0),0===o.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))return void(n.debug&&console.log("Skipping unrecognized metadata packet"));if(o.push(e),s+=e.data.byteLength,1===o.length&&(i=u(e.data.subarray(6,10)),i+=10),!(s<i)){for(t={data:new Uint8Array(i),frames:[],pts:o[0].pts,dts:o[0].dts},d=0;d<i;)t.data.set(o[0].data.subarray(0,i-d),d),d+=o[0].data.byteLength,s-=o[0].data.byteLength,o.shift();r=10,64&t.data[5]&&(r+=4,r+=u(t.data.subarray(10,14)),i-=u(t.data.subarray(16,20)));do{if((a=u(t.data.subarray(r+4,r+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(f=String.fromCharCode(t.data[r],t.data[r+1],t.data[r+2],t.data[r+3]),c={id:f,data:t.data.subarray(r+10,r+a+10)},c.key=c.id,l[c.id]&&(l[c.id](c),"com.apple.streaming.transportStreamTimestamp"===c.owner)){var h=c.data,p=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;p*=4,p+=3&h[7],c.timeStamp=p,void 0===t.pts&&void 0===t.dts&&(t.pts=c.timeStamp,t.dts=c.timeStamp),this.trigger("timestamp",c)}t.frames.push(c),r+=10,r+=a}while(r<i);this.trigger("data",t)}}}},r.prototype=new i,e.exports=r},function(e,t,n){"use strict";var r=n(80),i=function(e){var t=31&e[1];return t<<=8,t|=e[2]},a=function(e){return!!(64&e[1])},o=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},s=function(e,t){var n=i(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},c=function(e){var t=a(e),n=4+o(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},u=function(e){var t={},n=a(e),r=4+o(e);if(n&&(r+=e[r]+1),1&e[r+5]){var i,s,c;i=(15&e[r+1])<<8|e[r+2],s=3+i-4,c=(15&e[r+10])<<8|e[r+11];for(var u=12+c;u<s;){var l=r+u;t[(31&e[l+1])<<8|e[l+2]]=e[l],u+=5+((15&e[l+3])<<8|e[l+4])}return t}},l=function(e,t){switch(t[i(e)]){case r.H264_STREAM_TYPE:return"video";case r.ADTS_STREAM_TYPE:return"audio";case r.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},d=function(e){if(!a(e))return null;var t=4+o(e);if(t>=e.byteLength)return null;var n,r=null;return n=e[t+7],192&n&&(r={},r.pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},f=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},h=function(e){for(var t,n=4+o(e),r=e.subarray(n),i=0,a=0,s=!1;a<r.byteLength-3;a++)if(1===r[a+2]){i=a+5;break}for(;i<r.byteLength;)switch(r[i]){case 0:if(0!==r[i-1]){i+=2;break}if(0!==r[i-2]){i++;break}a+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===(t=f(31&r[a+3]))&&(s=!0);do{i++}while(1!==r[i]&&i<r.length);a=i-2,i+=3;break;case 1:if(0!==r[i-1]||0!==r[i-2]){i+=3;break}t=f(31&r[a+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(s=!0),a=i-2,i+=3;break;default:i+=3}return r=r.subarray(a),i-=a,a=0,r&&r.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===(t=f(31&r[a+3]))&&(s=!0),s};e.exports={parseType:s,parsePat:c,parsePmt:u,parsePayloadUnitStartIndicator:a,parsePesType:l,parsePesTime:d,videoPacketContainsKeyFrame:h}},function(e,t,n){var r=n(991),i=n(1003),a=9e4,o=function(e){var t,n,r=0;for(t=0;t<e.length;t++)n=e[t],r+=n.data.byteLength;return r},s=function(e,t,n,o){var s,c,u,l=0,d=0,f=0,h=0;if(t.length&&(s=i.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),l=Math.ceil(a/(e.samplerate/1024)),n&&o&&(d=s-Math.max(n,o),f=Math.floor(d/l),h=f*l),!(f<1||h>a/2))){for(c=r[e.samplerate],c||(c=t[0].data),u=0;u<f;u++)t.splice(u,0,{data:c});e.baseMediaDecodeTime-=Math.floor(i.videoTsToAudioTs(h,e.samplerate))}},c=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},u=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r},l=function(e){var t,n,r=0,i=new Uint8Array(o(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i};e.exports={prefixWithSilence:s,trimAdtsFramesByEarliestDts:c,generateSampleTable:u,concatenateFrameData:l}},function(e,t,n){"use strict";var r=n(359).discardEmulationPreventionBytes,i=n(356).CaptionStream,a=n(122),o=n(1e3),s=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(n<i.size)return i;n-=i.size}return null},c=function(e,t,n){var i,a,o,c,u=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(a=0;a+4<e.length;a+=o)if(o=u.getUint32(a),a+=4,!(o<=0))switch(31&e[a]){case 6:var d=e.subarray(a+1,a+1+o),f=s(a,t);i={nalUnitType:"sei_rbsp",size:o,data:d,escapedRBSP:r(d),trackId:n},f?(i.pts=f.pts,i.dts=f.dts,c=f):(i.pts=c.pts,i.dts=c.dts),l.push(i)}return l},u=function(e,t,n){var r=t,i=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,s=n.trackId,c=[];return e.forEach(function(e){var t=o.parseTrun(e),n=t.samples;n.forEach(function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=r+e.compositionTimeOffset,r+=e.duration}),c=c.concat(n)}),c},l=function(e,t){var n=a.findBox(e,["moof","traf"]),r=a.findBox(e,["mdat"]),i={},s=[];return r.forEach(function(e,t){var r=n[t];s.push({mdat:e,traf:r})}),s.forEach(function(e){var n,r,s=e.mdat,l=e.traf,d=a.findBox(l,["tfhd"]),f=o.parseTfhd(d[0]),h=f.trackId,p=a.findBox(l,["tfdt"]),v=p.length>0?o.parseTfdt(p[0]).baseMediaDecodeTime:0,g=a.findBox(l,["trun"]);t===h&&g.length>0&&(n=u(g,v,f),r=c(s,n,h),i[h]||(i[h]=[]),i[h]=i[h].concat(r))}),i},d=function(e,t,n){var r;return t?(r=l(e,t),{seiNals:r[t],timescale:n}):null},f=function(){var e,t,n,r,a,o=!1;this.isInitialized=function(){return o},this.init=function(){e=new i,o=!0,e.on("data",function(e){e.startTime=e.startPts/r,e.endTime=e.endPts/r,a.captions.push(e),a.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(n!==e[0]||r!==t[n])},this.parse=function(e,i,o){var s;if(!this.isInitialized())return null;if(!i||!o)return null;if(this.isNewInit(i,o))n=i[0],r=o[n];else if(!n||!r)return t.push(e),null;for(;t.length>0;){var c=t.shift();this.parse(c,i,o)}return null!==(s=d(e,n,r))&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),a):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;e.flush()},this.clearParsedCaptions=function(){a.captions=[],a.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,r=null,a?this.clearParsedCaptions():a={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()};e.exports=f},function(e,t){var n=function(e){var t,n,r=[],i=[];for(r.byteLength=0,t=0;t<e.length;t++)n=e[t],"access_unit_delimiter_rbsp"===n.nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.push(r)),r=[n],r.byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.push(r),i},r=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)n=e[t],n.keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),r=[n],r.nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i},i=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},a=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},o=function(e,t){var n=a();return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},s=function(e,t){var n,r,i,a,s,c=t||0,u=[];for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++)s=a[r],i=o(s,c),c+=i.size,u.push(i);return u},c=function(e){var t,n,r,i,a,o,s=0,c=e.byteLength,u=e.nalCount,l=c+4*u,d=new Uint8Array(l),f=new DataView(d.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)o=a[r],f.setUint32(s,o.data.byteLength),s+=4,d.set(o.data,s),s+=o.data.byteLength;return d};e.exports={groupNalsIntoFrames:n,groupFramesIntoGops:r,extendFirstKeyFrame:i,generateSampleTable:s,concatenateNalData:c}},function(e,t,n){e.exports={generator:n(358),probe:n(122),Transmuxer:n(185).Transmuxer,AudioSegmentStream:n(185).AudioSegmentStream,VideoSegmentStream:n(185).VideoSegmentStream,CaptionParser:n(996)}},function(e,t){var n=9e4,r=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},i=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},a=function(e,t){var r,i,a=e.minSegmentDts;return t||(a-=e.timelineStartInfo.dts),r=e.timelineStartInfo.baseMediaDecodeTime,r+=a,r=Math.max(0,r),"audio"===e.type&&(i=e.samplerate/n,r*=i,r=Math.floor(r)),r};e.exports={clearDtsInfo:i,calculateTrackBaseMediaDecodeTime:a,collectDtsInfo:r}},function(e,t,n){"use strict";var r,i,a=n(122).parseType,o=function(e){return new Date(1e3*e-20828448e5)},s=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},c=function(e){var t,n,r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=[];for(t=0;t+4<e.length;t+=n)if(n=r.getUint32(t),t+=4,n<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+e[t]&31)}return i},u={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:r(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,r,i,a=new DataView(e.buffer,e.byteOffset,e.byteLength),o={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},s=31&e[5];for(r=6,i=0;i<s;i++)n=a.getUint16(r),r+=2,o.sps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;for(t=e[r],r++,i=0;i<t;i++)n=a.getUint16(r),r+=2,o.pps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;return o},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:a(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},r=8;r<e.byteLength;)n.compatibleBrands.push(a(e.subarray(r,r+4))),r+=4;return n},dinf:function(e){return{boxes:r(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:r(e.subarray(8))}},hdlr:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:a(e.subarray(8,12)),name:""},r=8;for(r=24;r<e.byteLength;r++){if(0===e[r]){r++;break}n.name+=String.fromCharCode(e[r])}return n.name=decodeURIComponent(escape(n.name)),n},mdat:function(e){return{byteLength:e.byteLength,nals:c(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===i.version?(r+=4,i.creationTime=o(n.getUint32(r)),r+=8,i.modificationTime=o(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=8,i.duration=n.getUint32(r)):(i.creationTime=o(n.getUint32(r)),r+=4,i.modificationTime=o(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=4,i.duration=n.getUint32(r)),r+=4,t=n.getUint16(r),i.language+=String.fromCharCode(96+(t>>10)),i.language+=String.fromCharCode(96+((992&t)>>5)),i.language+=String.fromCharCode(96+(31&t)),i},mdia:function(e){return{boxes:r(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:r(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(n.streamDescriptor=r(e.subarray(28))[0]),n},moof:function(e){return{boxes:r(e)}},moov:function(e){return{boxes:r(e)}},mvex:function(e){return{boxes:r(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=o(t.getUint32(n)),n+=8,r.modificationTime=o(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=8,r.duration=t.getUint32(n)):(r.creationTime=o(t.getUint32(n)),n+=4,r.modificationTime=o(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=4,r.duration=t.getUint32(n)),n+=4,r.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,r.nextTrackId=t.getUint32(n),r},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},i=n.getUint16(22);for(t=24;i;t+=12,i--)r.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return r},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:r(e)}},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},i=n.getUint32(4);for(t=8;i;t+=4,i--)r.chunkOffsets.push(n.getUint32(t));return r},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=n.getUint32(4),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;r;t+=12,r--)i.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return i},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:r(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)r.entries.push(n.getUint32(t));return r},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},i=n.getUint32(4);for(t=8;i;t+=8,i--)r.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return r},styp:function(e){return u.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],o=8&r.flags[2],s=16&r.flags[2],c=32&r.flags[2],u=65536&r.flags[0],l=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),a&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(r.defaultSampleDuration=n.getUint32(t),t+=4),s&&(r.defaultSampleSize=n.getUint32(t),t+=4),c&&(r.defaultSampleFlags=n.getUint32(t)),u&&(r.durationIsEmpty=!0),!i&&l&&(r.baseDataOffsetIsMoof=!0),r},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=o(t.getUint32(n)),n+=8,r.modificationTime=o(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=8,r.duration=t.getUint32(n)):(r.creationTime=o(t.getUint32(n)),n+=4,r.modificationTime=o(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=4,r.duration=t.getUint32(n)),n+=4,n+=8,r.layer=t.getUint16(n),n+=2,r.alternateGroup=t.getUint16(n),n+=2,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,r.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,r.height=t.getUint16(n)+t.getUint16(n+2)/16,r},traf:function(e){return{boxes:r(e)}},trak:function(e){return{boxes:r(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],c=2&n.flags[1],u=4&n.flags[1],l=8&n.flags[1],d=r.getUint32(4),f=8;for(i&&(n.dataOffset=r.getInt32(f),f+=4),a&&d&&(t={flags:s(e.subarray(f,f+4))},f+=4,o&&(t.duration=r.getUint32(f),f+=4),c&&(t.size=r.getUint32(f),f+=4),l&&(t.compositionTimeOffset=r.getUint32(f),f+=4),n.samples.push(t),d--);d--;)t={},o&&(t.duration=r.getUint32(f),f+=4),c&&(t.size=r.getUint32(f),f+=4),u&&(t.flags=s(e.subarray(f,f+4)),f+=4),l&&(t.compositionTimeOffset=r.getUint32(f),f+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};r=function(e){for(var t,n,r,i,o,s=0,c=[],l=new ArrayBuffer(e.length),d=new Uint8Array(l),f=0;f<e.length;++f)d[f]=e[f];for(t=new DataView(l);s<e.byteLength;)n=t.getUint32(s),r=a(e.subarray(s+4,s+8)),i=n>1?s+n:e.byteLength,o=(u[r]||function(e){return{data:e}})(e.subarray(s+8,i)),o.size=n,o.type=r,c.push(o),s=i;return c},i=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map(function(e,r){return n+e.type+"\n"+Object.keys(e).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(t){var r=n+"  "+t+": ",i=e[t];if(i instanceof Uint8Array||i instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return a?1===a.length?r+"<"+a.join("").slice(1)+">":r+"<\n"+a.map(function(e){return n+"  "+e}).join("\n")+"\n"+n+"  >":r+"<>"}return r+JSON.stringify(i,null,2).split("\n").map(function(e,t){return 0===t?e:n+"  "+e}).join("\n")}).join("\n")+(e.boxes?"\n"+i(e.boxes,t+1):"")}).join("\n")},e.exports={inspect:r,textify:i,parseTfdt:u.tfdt,parseHdlr:u.hdlr,parseTfhd:u.tfhd,parseTrun:u.trun}},function(e,t,n){"use strict";var r=n(80),i=n(357).handleRollover,a={};a.ts=n(994),a.aac=n(184);var o=9e4,s=188,c=71,u=function(e,t){for(var n,r=0,i=s;i<e.byteLength;)if(e[r]!==c||e[i]!==c)r++,i++;else{switch(n=e.subarray(r,i),a.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=a.ts.parsePat(n));break;case"pmt":t.table||(t.table=a.ts.parsePmt(n))}if(t.pid&&t.table)return;r+=s,i+=s}},l=function(e,t,n){for(var r,i,o,u,l=0,d=s,f=!1;d<=e.byteLength;)if(e[l]!==c||e[d]!==c&&d!==e.byteLength)l++,d++;else{switch(r=e.subarray(l,d),a.ts.parseType(r,t.pid)){case"pes":i=a.ts.parsePesType(r,t.table),o=a.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&o&&(u=a.ts.parsePesTime(r))&&(u.type="audio",n.audio.push(u),f=!0)}if(f)break;l+=s,d+=s}for(d=e.byteLength,l=d-s,f=!1;l>=0;)if(e[l]!==c||e[d]!==c&&d!==e.byteLength)l--,d--;else{switch(r=e.subarray(l,d),a.ts.parseType(r,t.pid)){case"pes":i=a.ts.parsePesType(r,t.table),o=a.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&o&&(u=a.ts.parsePesTime(r))&&(u.type="audio",n.audio.push(u),f=!0)}if(f)break;l-=s,d-=s}},d=function(e,t,n){for(var r,i,o,u,l,d,f,h=0,p=s,v=!1,g={data:[],size:0};p<e.byteLength;)if(e[h]!==c||e[p]!==c)h++,p++;else{switch(r=e.subarray(h,p),a.ts.parseType(r,t.pid)){case"pes":if(i=a.ts.parsePesType(r,t.table),o=a.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(o&&!v&&(u=a.ts.parsePesTime(r))&&(u.type="video",n.video.push(u),v=!0),!n.firstKeyFrame)){if(o&&0!==g.size){for(l=new Uint8Array(g.size),d=0;g.data.length;)f=g.data.shift(),l.set(f,d),d+=f.byteLength;a.ts.videoPacketContainsKeyFrame(l)&&(n.firstKeyFrame=a.ts.parsePesTime(l),n.firstKeyFrame.type="video"),g.size=0}g.data.push(r),g.size+=r.byteLength}}if(v&&n.firstKeyFrame)break;h+=s,p+=s}for(p=e.byteLength,h=p-s,v=!1;h>=0;)if(e[h]!==c||e[p]!==c)h--,p--;else{switch(r=e.subarray(h,p),a.ts.parseType(r,t.pid)){case"pes":i=a.ts.parsePesType(r,t.table),o=a.ts.parsePayloadUnitStartIndicator(r),"video"===i&&o&&(u=a.ts.parsePesTime(r))&&(u.type="video",n.video.push(u),v=!0)}if(v)break;h-=s,p-=s}},f=function(e,t){if(e.audio&&e.audio.length){var n=t;void 0===n&&(n=e.audio[0].dts),e.audio.forEach(function(e){e.dts=i(e.dts,n),e.pts=i(e.pts,n),e.dtsTime=e.dts/o,e.ptsTime=e.pts/o})}if(e.video&&e.video.length){var r=t;if(void 0===r&&(r=e.video[0].dts),e.video.forEach(function(e){e.dts=i(e.dts,r),e.pts=i(e.pts,r),e.dtsTime=e.dts/o,e.ptsTime=e.pts/o}),e.firstKeyFrame){var a=e.firstKeyFrame;a.dts=i(a.dts,r),a.pts=i(a.pts,r),a.dtsTime=a.dts/o,a.ptsTime=a.dts/o}}},h=function(e){for(var t,n=!1,r=0,i=null,s=null,c=0,u=0;e.length-u>=3;){switch(a.aac.parseType(e,u)){case"timed-metadata":if(e.length-u<10){n=!0;break}if((c=a.aac.parseId3TagSize(e,u))>e.length){n=!0;break}null===s&&(t=e.subarray(u,u+c),s=a.aac.parseAacTimestamp(t)),u+=c;break;case"audio":if(e.length-u<7){n=!0;break}if((c=a.aac.parseAdtsSize(e,u))>e.length){n=!0;break}null===i&&(t=e.subarray(u,u+c),i=a.aac.parseSampleRate(t)),r++,u+=c;break;default:u++}if(n)return null}if(null===i||null===s)return null;var l=o/i;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*r*l,pts:s+1024*r*l}]}},p=function(e){var t={pid:null,table:null},n={};u(e,t);for(var i in t.table)if(t.table.hasOwnProperty(i)){var a=t.table[i];switch(a){case r.H264_STREAM_TYPE:n.video=[],d(e,t,n),0===n.video.length&&delete n.video;break;case r.ADTS_STREAM_TYPE:n.audio=[],l(e,t,n),0===n.audio.length&&delete n.audio}}return n},v=function(e,t){var n,r=a.aac.isLikelyAacData(e);return(n=r?h(e):p(e))&&(n.audio||n.video)?(f(n,t),n):null};e.exports={inspect:v,parseAudioPes_:l}},function(e,t){var n=function(e){return e>>>0};e.exports={toUnsigned:n}},function(e,t){var n,r,i,a,o,s,c=9e4;n=function(e){return e*c},r=function(e,t){return e*t},i=function(e){return e/c},a=function(e,t){return e/t},o=function(e,t){return n(a(e,t))},s=function(e,t){return r(i(e),t)},e.exports={secondsToVideoTs:n,secondsToAudioTs:r,videoTsToSeconds:i,audioTsToSeconds:a,audioTsToVideoTs:o,videoTsToAudioTs:s}},function(e,t,n){"use strict";var r;r=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,a=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");a.set(e.subarray(i,i+o)),n=new DataView(a.buffer).getUint32(0),r=8*o,t-=o},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,i=Math.floor(e/8),e-=8*i,t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),a=n>>>32-i;return r-=i,r>0?n<<=i:t>0&&this.loadWord(),i=e-i,i>0?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(0!=(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},e.exports=r},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=Array.prototype.slice,o=n(1006),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),u=s.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},f={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!f["$"+e]&&r.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{d(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),p=function(e){if("undefined"==typeof window||!h)return d(e);try{return d(e)}catch(e){return!1}},v=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===i.call(e),a=o(e),s=t&&"[object String]"===i.call(e),d=[];if(!t&&!n&&!a)throw new TypeError("Object.keys called on a non-object");var f=u&&n;if(s&&e.length>0&&!r.call(e,0))for(var h=0;h<e.length;++h)d.push(String(h));if(a&&e.length>0)for(var v=0;v<e.length;++v)d.push(String(v));else for(var g in e)f&&"prototype"===g||!r.call(e,g)||d.push(String(g));if(c)for(var m=p(e),y=0;y<l.length;++y)m&&"constructor"===l[y]||!r.call(e,l[y])||d.push(l[y]);return d};v.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var e=Object.keys;Object.keys=function(t){return e(o(t)?a.call(t):t)}}}else Object.keys=v;return Object.keys||v},e.exports=v},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},function(e,t,n){var r=n(1111),i=n(730),a=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return i(r(e).split("\n"),function(e){var n=e.indexOf(":"),i=r(e.slice(0,n)).toLowerCase(),o=r(e.slice(n+1));void 0===t[i]?t[i]=o:a(t[i])?t[i].push(o):t[i]=[t[i],o]}),t}},function(e,t,n){"use strict";function r(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}n.d(t,"a",function(){return r})},function(e,t){var n;n="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},e.exports=n},function(e,t,n){"use strict";function r(e){return function(t,n,r,i){if("undefined"!=typeof sqlitePlugin){var a=s({},e,{name:t,version:n,description:r,size:i});return sqlitePlugin.openDatabase(a)}return openDatabase(t,n,r,i)}}function i(e,t){var n=r(e),i=s({websql:n},e);("undefined"==typeof cordova||"undefined"==typeof sqlitePlugin&&"undefined"==typeof openDatabase)&&console.error("PouchDB error: you must install a SQLite plugin in order for PouchDB to work on this platform. Options:\n - https://github.com/nolanlawson/cordova-plugin-sqlite-2\n - https://github.com/litehelpers/Cordova-sqlite-storage\n - https://github.com/Microsoft/cordova-plugin-websql"),"default"in o&&"function"==typeof o.default.call?o.default.call(this,i,t):o.call(this,i,t)}function a(e){e.adapter("cordova-sqlite",i,!0)}var o=n(1011),s=n(1009);i.valid=function(){return!0},i.use_prefix=!1,"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(a),e.exports=a},function(e,t,n){"use strict";function r(e){return decodeURIComponent(escape(e))}function i(e){return e<65?e-48:e-55}function a(e,t,n){for(var r="";t<n;)r+=String.fromCharCode(i(e.charCodeAt(t++))<<4|i(e.charCodeAt(t++)));return r}function o(e,t,n){for(var r="";t<n;)r+=String.fromCharCode(i(e.charCodeAt(t+2))<<12|i(e.charCodeAt(t+3))<<8|i(e.charCodeAt(t))<<4|i(e.charCodeAt(t+1))),t+=4;return r}function s(e,t){return"UTF-8"===t?r(a(e,0,e.length)):o(e,0,e.length)}function c(e){return"'"+e+"'"}function u(e){return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function l(e){return e.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function d(e){return delete e._id,delete e._rev,JSON.stringify(e)}function f(e,t,n){return e=JSON.parse(e),e._id=t,e._rev=n,e}function h(e){for(var t="(";e--;)t+="?",e&&(t+=",");return t+")"}function p(e,t,n,r,i){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(i?" ORDER BY "+i:"")}function v(e,t,n){function r(){++a===e.length&&i()}function i(){if(o.length){var e="SELECT DISTINCT digest AS digest FROM "+N+" WHERE seq IN "+h(o.length);n.executeSql(e,o,function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).digest);if(n.length){var i="DELETE FROM "+N+" WHERE seq IN ("+o.map(function(){return"?"}).join(",")+")";e.executeSql(i,o,function(e){var t="SELECT digest FROM "+N+" WHERE digest IN ("+n.map(function(){return"?"}).join(",")+")";e.executeSql(t,n,function(e,t){for(var r=new T.a,i=0;i<t.rows.length;i++)r.add(t.rows.item(i).digest);n.forEach(function(t){r.has(t)||(e.executeSql("DELETE FROM "+N+" WHERE digest=?",[t]),e.executeSql("DELETE FROM "+L+" WHERE digest=?",[t]))})})})}})}}if(e.length){var a=0,o=[];e.forEach(function(e){var i="SELECT seq FROM "+R+" WHERE doc_id=? AND rev=?";n.executeSql(i,[t,e],function(e,t){if(!t.rows.length)return r();var n=t.rows.item(0).seq;o.push(n),e.executeSql("DELETE FROM "+R+" WHERE seq=?",[n],r)})})}}function g(e){return function(t){n.i(x.a)("error","WebSQL threw an error",t);var r=t&&t.constructor.toString().match(/function ([^(]+)/),i=r&&r[1]||t.type,a=t.target||t.message;e(n.i(C.a)(C.b,a,i))}}function m(e){return"size"in e?1e6*e.size:"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent)?5e6:1}function y(e,t,r,i,a,o,s){function c(){if(A)return s(A);o.notify(i._name),s(null,O)}function l(e,t){var r="SELECT count(*) as cnt FROM "+L+" WHERE digest=?";x.executeSql(r,[e],function(r,i){if(0===i.rows.item(0).cnt){var a=n.i(C.a)(C.c,"unknown stub attachment with digest "+e);t(a)}else t()})}function f(e){function t(){++i===n.length&&e(r)}var n=[];if(S.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var r=e.data._attachments[t];r.stub&&n.push(r.digest)})}),!n.length)return e();var r,i=0;n.forEach(function(e){l(e,function(e){e&&!r&&(r=e),t()})})}function h(e,t,r,a,o,s,c,u){function l(){function t(e,t){function r(){return++a===o.length&&t(),!1}function i(t){var i="INSERT INTO "+N+" (digest, seq) VALUES (?,?)",a=[n._attachments[t].digest,e];x.executeSql(i,a,r,r)}var a=0,o=Object.keys(n._attachments||{});if(!o.length)return t();for(var s=0;s<o.length;s++)i(o[s])}var n=e.data,r=a?1:0,i=n._id,o=n._rev,s=d(n),c="INSERT INTO "+R+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",u=[i,o,s,r];x.executeSql(c,u,function(e,n){var r=n.insertId;t(r,function(){g(e,r)})},function(){var e=p("seq",R,null,"doc_id=? AND rev=?");return x.executeSql(e,[i,o],function(e,n){var a=n.rows.item(0).seq,c="UPDATE "+R+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",u=[s,r,i,o];e.executeSql(c,u,function(e){t(a,function(){g(e,a)})})}),!1})}function f(e){m||(e?(m=e,u(m)):y===_.length&&l())}function h(e){y++,f(e)}function g(r,a){var s=e.metadata.id,l=e.stemmedRevs||[];o&&i.auto_compaction&&(l=n.i(P.a)(e.metadata).concat(l)),l.length&&v(l,s,r),e.metadata.seq=a;var d=e.metadata.rev;delete e.metadata.rev;var f=o?"UPDATE "+I+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+R+" WHERE doc_id="+I+".id AND rev=?) WHERE id=?":"INSERT INTO "+I+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",h=n.i($.a)(e.metadata),p=o?[h,a,t,s]:[s,a,a,h];r.executeSql(f,p,function(){O[c]={ok:!0,id:e.metadata.id,rev:d},j.set(s,e.metadata),u()})}var m=null,y=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev;var _=Object.keys(e.data._attachments||{});a&&(e.data._deleted=!0),_.forEach(function(n){var r=e.data._attachments[n];if(r.stub)y++,f();else{var i=r.data;delete r.data,r.revpos=parseInt(t,10);b(r.digest,i,h)}}),_.length||l()}function m(){n.i(E.c)(e.revs_limit,S,i,j,x,O,h,r)}function y(e){function t(){++r===S.length&&e()}if(!S.length)return e();var r=0;S.forEach(function(e){if(e._id&&n.i(E.a)(e._id))return t();var r=e.metadata.id;x.executeSql("SELECT json FROM "+I+" WHERE id = ?",[r],function(e,i){if(i.rows.length){var a=n.i($.b)(i.rows.item(0).json);j.set(r,a)}t()})})}function b(e,t,n){var r="SELECT digest FROM "+L+" WHERE digest=?";x.executeSql(r,[e],function(i,a){if(a.rows.length)return n();r="INSERT INTO "+L+" (digest, body, escaped) VALUES (?,?,1)",i.executeSql(r,[e,u(t)],function(){n()},function(){return n(),!1})})}var _=r.new_edits,w=t.docs,S=w.map(function(t){return t._id&&n.i(E.a)(t._id)?t:n.i(E.b)(t,_,e)}),k=S.filter(function(e){return e.error});if(k.length)return s(k[0]);var x,A,O=new Array(S.length),j=new T.b;n.i(E.d)(S,"binary",function(e){if(e)return s(e);a.transaction(function(e){x=e,f(function(e){e?A=e:y(m)})},g(s),c)})}function b(e){return e.websql(e.name,e.version,e.description,e.size)}function _(e){try{return{db:b(e)}}catch(e){return{error:e}}}function w(e){var t=U.get(e.name);return t||(t=_(e),U.set(e.name,t)),t}function S(e,t,r,i,a){function o(){++u===c.length&&a&&a()}function s(e,a){var s=e._attachments[a],c={binary:t.binary,ctx:i};r._getAttachment(e._id,a,s,c,function(t,r){e._attachments[a]=n.i(x.c)(n.i(x.d)(s,["digest","content_type"]),{data:r}),o()})}var c=Object.keys(e._attachments||{});if(!c.length)return a&&a();var u=0;c.forEach(function(n){t.attachments&&t.include_docs?s(e,n):(e._attachments[n].stub=!0,o())})}function k(e,t){function r(){n.i(x.e)()&&(window.localStorage["_pouch__websqldb_"+Z._name]=!0),t(null,Z)}function i(e,t){e.executeSql(H),e.executeSql("ALTER TABLE "+R+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){e.executeSql(B),e.executeSql("ALTER TABLE "+I+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){e.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+I+" (local, id)");var r="SELECT "+I+".winningseq AS seq, "+I+".json AS metadata FROM "+R+" JOIN "+I+" ON "+R+".seq = "+I+".winningseq";e.executeSql(r,[],function(e,r){for(var i=[],a=[],o=0;o<r.rows.length;o++){var s=r.rows.item(o),c=s.seq,u=JSON.parse(s.metadata);n.i(E.e)(u)&&i.push(c),n.i(E.a)(u.id)&&a.push(u.id)}e.executeSql("UPDATE "+I+"SET local = 1 WHERE id IN "+h(a.length),a,function(){e.executeSql("UPDATE "+R+" SET deleted = 1 WHERE seq IN "+h(i.length),i,t)})})})})}function a(e,t){var n="CREATE TABLE IF NOT EXISTS "+j+" (id UNIQUE, rev, json)";e.executeSql(n,[],function(){var n="SELECT "+I+".id AS id, "+R+".json AS data FROM "+R+" JOIN "+I+" ON "+R+".seq = "+I+".winningseq WHERE local = 1";e.executeSql(n,[],function(e,n){function r(){if(!i.length)return t(e);var n=i.shift(),a=JSON.parse(n.data)._rev;e.executeSql("INSERT INTO "+j+" (id, rev, json) VALUES (?,?,?)",[n.id,a,n.data],function(e){e.executeSql("DELETE FROM "+I+" WHERE id=?",[n.id],function(e){e.executeSql("DELETE FROM "+R+" WHERE seq=?",[n.seq],function(){r()})})})}for(var i=[],a=0;a<n.rows.length;a++)i.push(n.rows.item(a));r()})})}function o(e,t){function n(n){function r(){if(!n.length)return t(e);var i=n.shift(),a=s(i.hex,K),o=a.lastIndexOf("::"),c=a.substring(0,o),u=a.substring(o+2),l="UPDATE "+R+" SET doc_id=?, rev=? WHERE doc_id_rev=?";e.executeSql(l,[c,u,a],function(){r()})}r()}var r="ALTER TABLE "+R+" ADD COLUMN doc_id";e.executeSql(r,[],function(e){var t="ALTER TABLE "+R+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(q,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+R;e.executeSql(t,[],function(e,t){for(var r=[],i=0;i<t.rows.length;i++)r.push(t.rows.item(i));n(r)})})})})}function c(e,t){function n(e){var n="SELECT COUNT(*) AS cnt FROM "+L;e.executeSql(n,[],function(e,n){function r(){var n=p(G+", "+I+".id AS id",[I,R],W,null,I+".id ");n+=" LIMIT "+a+" OFFSET "+i,i+=a,e.executeSql(n,[],function(e,n){function i(e,t){var n=a[e]=a[e]||[];-1===n.indexOf(t)&&n.push(t)}if(!n.rows.length)return t(e);for(var a={},o=0;o<n.rows.length;o++)for(var s=n.rows.item(o),c=f(s.data,s.id,s.rev),u=Object.keys(c._attachments||{}),l=0;l<u.length;l++){var d=c._attachments[u[l]];i(d.digest,s.seq)}var h=[];if(Object.keys(a).forEach(function(e){a[e].forEach(function(t){h.push([e,t])})}),!h.length)return r();var p=0;h.forEach(function(t){var n="INSERT INTO "+N+" (digest, seq) VALUES (?,?)";e.executeSql(n,t,function(){++p===h.length&&r()})})})}if(!n.rows.item(0).cnt)return t(e);var i=0,a=10;r()})}var r="CREATE TABLE IF NOT EXISTS "+N+" (digest, seq INTEGER)";e.executeSql(r,[],function(e){e.executeSql(z,[],function(e){e.executeSql(V,[],n)})})}function u(e,t){var n="ALTER TABLE "+L+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";e.executeSql(n,[],t)}function b(e,t){var n="ALTER TABLE "+I+" ADD COLUMN max_seq INTEGER";e.executeSql(n,[],function(e){var n="UPDATE "+I+" SET max_seq=(SELECT MAX(seq) FROM "+R+" WHERE doc_id=id)";e.executeSql(n,[],function(e){var n="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+I+" (max_seq)";e.executeSql(n,[],t)})})}function _(e,t){e.executeSql('SELECT HEX("a") AS hex',[],function(e,n){var r=n.rows.item(0).hex;K=2===r.length?"UTF-8":"UTF-16",t()})}function k(){for(;ne.length>0;){ne.pop()(null,ee)}}function T(e,t){if(0===t){var r="CREATE TABLE IF NOT EXISTS "+D+" (dbid, db_version INTEGER)",s="CREATE TABLE IF NOT EXISTS "+L+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",l="CREATE TABLE IF NOT EXISTS "+N+" (digest, seq INTEGER)",d="CREATE TABLE IF NOT EXISTS "+I+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",f="CREATE TABLE IF NOT EXISTS "+R+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",h="CREATE TABLE IF NOT EXISTS "+j+" (id UNIQUE, rev, json)";e.executeSql(s),e.executeSql(h),e.executeSql(l,[],function(){e.executeSql(V),e.executeSql(z)}),e.executeSql(d,[],function(){e.executeSql(H),e.executeSql(f,[],function(){e.executeSql(B),e.executeSql(q),e.executeSql(r,[],function(){var t="INSERT INTO "+D+" (db_version, dbid) VALUES (?,?)";ee=n.i(x.f)();var r=[O,ee];e.executeSql(t,r,function(){k()})})})})}else{var p=function(){t<O&&e.executeSql("UPDATE "+D+" SET db_version = "+O);var n="SELECT dbid FROM "+D;e.executeSql(n,[],function(e,t){ee=t.rows.item(0).dbid,k()})},v=[i,a,o,c,u,b,p],g=t,m=function(e){v[g-1](e,m),g++};m(e)}}function U(){ae.transaction(function(e){_(e,function(){Y(e)})},g(t),r)}function Y(e){var t="SELECT sql FROM sqlite_master WHERE tbl_name = "+D;e.executeSql(t,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+D,[],function(e,t){T(e,t.rows.item(0).db_version)}):e.executeSql("ALTER TABLE "+D+" ADD COLUMN db_version INTEGER",[],function(){T(e,1)}):T(e,0)})}function Q(e,t){var n="SELECT MAX(seq) AS seq FROM "+R;e.executeSql(n,[],function(e,n){var r=n.rows.item(0).seq||0;t(r)})}function X(e,t){var n=p("COUNT("+I+".id) AS 'num'",[I,R],W,R+".deleted=0");e.executeSql(n,[],function(e,n){t(n.rows.item(0).num)})}function J(e,t,r,i,a){var o=p(G,[I,R],W,I+".id=?"),s=[t];e.executeSql(o,s,function(e,t){if(!t.rows.length){var o=n.i(C.a)(C.d,"missing");return a(o)}var s=t.rows.item(0),c=n.i($.b)(s.metadata);i(n.i(P.b)(r,c))})}var K,Z=this,ee=null,te=m(e),ne=[];Z._name=e.name;var re=n.i(x.c)({},e,{version:F,description:e.name,size:te}),ie=w(re);if(ie.error)return g(t)(ie.error);var ae=ie.db;"function"!=typeof ae.readTransaction&&(ae.readTransaction=ae.transaction),U(),Z._remote=!1,Z.type=function(){return"websql"},Z._id=n.i(x.g)(function(e){e(null,ee)}),Z._info=function(e){var t,n;ae.readTransaction(function(e){Q(e,function(e){t=e}),X(e,function(e){n=e})},g(e),function(){e(null,{doc_count:n,update_seq:t,websql_encoding:K})})},Z._bulkDocs=function(t,n,r){y(e,t,n,Z,ae,M,r)},Z._get=function(e,t,r){function i(e){r(e,{doc:a,metadata:o,ctx:s})}var a,o,s=t.ctx;if(!s)return ae.readTransaction(function(i){Z._get(e,n.i(x.c)({ctx:i},t),r)});var c,u;if(t.rev){if(t.latest)return void J(s,e,t.rev,function(n){t.latest=!1,t.rev=n,Z._get(e,t,r)},i);c=p(G,[I,R],I+".id="+R+".doc_id",[R+".doc_id=?",R+".rev=?"]),u=[e,t.rev]}else c=p(G,[I,R],W,I+".id=?"),u=[e];s.executeSql(c,u,function(e,r){if(!r.rows.length){return i(n.i(C.a)(C.d,"missing"))}var s=r.rows.item(0);if(o=n.i($.b)(s.metadata),s.deleted&&!t.rev){return i(n.i(C.a)(C.d,"deleted"))}a=f(s.data,o.id,s.rev),i()})},Z._allDocs=function(e,t){var r,i,a=[],o="startkey"in e&&e.startkey,s="endkey"in e&&e.endkey,c="key"in e&&e.key,u="keys"in e&&e.keys,l="descending"in e&&e.descending,d="limit"in e?e.limit:-1,h="skip"in e?e.skip:0,v=!1!==e.inclusive_end,m=[],y=[];if(u){var b=[],_="";u.forEach(function(e){-1===b.indexOf(e)&&(b.push(e),_+="?,")}),_=_.substring(0,_.length-1),y.push(I+".id IN ("+_+")"),m=m.concat(b)}else if(!1!==c)y.push(I+".id = ?"),m.push(c);else if(!1!==o||!1!==s){if(!1!==o&&(y.push(I+".id "+(l?"<=":">=")+" ?"),m.push(o)),!1!==s){var w=l?">":"<";v&&(w+="="),y.push(I+".id "+w+" ?"),m.push(s)}!1!==c&&(y.push(I+".id = ?"),m.push(c))}u||y.push(R+".deleted = 0"),ae.readTransaction(function(t){if(X(t,function(e){r=e}),e.update_seq&&Q(t,function(e){i=e}),0!==d){var o=p(G,[I,R],W,y,I+".id "+(l?"DESC":"ASC"));o+=" LIMIT "+d+" OFFSET "+h,t.executeSql(o,m,function(t,r){for(var i=0,o=r.rows.length;i<o;i++){var s=r.rows.item(i),c=n.i($.b)(s.metadata),l=c.id,d=f(s.data,l,s.rev),h=d._rev,p={id:l,key:l,value:{rev:h}};if(e.include_docs){if(p.doc=d,p.doc._rev=h,e.conflicts){var v=n.i(P.c)(c);v.length&&(p.doc._conflicts=v)}S(p.doc,e,Z,t)}if(s.deleted){if(!u)continue;p.value.deleted=!0,p.doc=null}if(u){var g=u.indexOf(l,g);do{a[g]=p,g=u.indexOf(l,g+1)}while(g>-1&&g<u.length)}else a.push(p)}u&&u.forEach(function(e,t){a[t]||(a[t]={key:e,error:"not_found"})})})}},g(t),function(){var n={total_rows:r,offset:e.skip,rows:a};e.update_seq&&(n.update_seq=i),t(null,n)})},Z._changes=function(e){function t(){var t=I+".json AS metadata, "+I+".max_seq AS maxSeq, "+R+".json AS winningDoc, "+R+".rev AS winningRev ",r=I+" JOIN "+R,c=I+".id="+R+".doc_id AND "+I+".winningseq="+R+".seq",u=["maxSeq > ?"],l=[e.since];e.doc_ids&&(u.push(I+".id IN "+h(e.doc_ids.length)),l=l.concat(e.doc_ids));var d="maxSeq "+(i?"DESC":"ASC"),v=p(t,r,c,u,d),m=n.i(x.i)(e);e.view||e.filter||(v+=" LIMIT "+a);var y=e.since||0;ae.readTransaction(function(t){t.executeSql(v,l,function(t,r){function i(t){return function(){e.onChange(t)}}for(var c=0,u=r.rows.length;c<u;c++){var l=r.rows.item(c),d=n.i($.b)(l.metadata);y=l.maxSeq;var h=f(l.winningDoc,d.id,l.winningRev),p=e.processChange(h,d,e);p.seq=l.maxSeq;var v=m(p);if("object"==typeof v)return e.complete(v);if(v&&(s++,e.return_docs&&o.push(p),e.attachments&&e.include_docs?S(h,e,Z,t,i(p)):i(p)()),s===a)break}})},g(e.complete),function(){e.continuous||e.complete(null,{results:o,last_seq:y})})}if(e=n.i(x.h)(e),e.continuous){var r=Z._name+":"+n.i(x.f)();return M.addListener(Z._name,r,Z,e),M.notify(Z._name),{cancel:function(){M.removeListener(Z._name,r)}}}var i=e.descending;e.since=e.since&&!i?e.since:0;var a="limit"in e?e.limit:-1;0===a&&(a=1);var o=[],s=0;t()},Z._close=function(e){e()},Z._getAttachment=function(e,t,r,i,a){var o,c=i.ctx,u=r.digest,d=r.content_type,f="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+L+" WHERE digest=?";c.executeSql(f,[u],function(e,t){var r=t.rows.item(0),c=r.escaped?l(r.body):s(r.body,K);o=i.binary?n.i(A.a)(c,d):n.i(A.b)(c),a(null,o)})},Z._getRevisionTree=function(e,t){ae.readTransaction(function(r){var i="SELECT json AS metadata FROM "+I+" WHERE id = ?";r.executeSql(i,[e],function(e,r){if(r.rows.length){var i=n.i($.b)(r.rows.item(0).metadata);t(null,i.rev_tree)}else t(n.i(C.a)(C.d))})})},Z._doCompaction=function(e,t,r){if(!t.length)return r();ae.transaction(function(r){var i="SELECT json AS metadata FROM "+I+" WHERE id = ?";r.executeSql(i,[e],function(r,i){var a=n.i($.b)(i.rows.item(0).metadata);n.i(P.d)(a.rev_tree,function(e,n,r,i,a){var o=n+"-"+r;-1!==t.indexOf(o)&&(a.status="missing")});var o="UPDATE "+I+" SET json = ? WHERE id = ?";r.executeSql(o,[n.i($.a)(a),e])}),v(t,e,r)},g(r),function(){r()})},Z._getLocal=function(e,t){ae.readTransaction(function(r){var i="SELECT json, rev FROM "+j+" WHERE id=?";r.executeSql(i,[e],function(r,i){if(i.rows.length){var a=i.rows.item(0),o=f(a.json,e,a.rev);t(null,o)}else t(n.i(C.a)(C.d))})})},Z._putLocal=function(e,t,r){function i(e){var i,l;o?(i="UPDATE "+j+" SET rev=?, json=? WHERE id=? AND rev=?",l=[a,u,s,o]):(i="INSERT INTO "+j+" (id, rev, json) VALUES (?,?,?)",l=[s,a,u]),e.executeSql(i,l,function(e,i){i.rowsAffected?(c={ok:!0,id:s,rev:a},t.ctx&&r(null,c)):r(n.i(C.a)(C.e))},function(){return r(n.i(C.a)(C.e)),!1})}"function"==typeof t&&(r=t,t={}),delete e._revisions;var a,o=e._rev,s=e._id;a=e._rev=o?"0-"+(parseInt(o.split("-")[1],10)+1):"0-1";var c,u=d(e);t.ctx?i(t.ctx):ae.transaction(i,g(r),function(){c&&r(null,c)})},Z._removeLocal=function(e,t,r){function i(i){var o="DELETE FROM "+j+" WHERE id=? AND rev=?",s=[e._id,e._rev];i.executeSql(o,s,function(i,o){if(!o.rowsAffected)return r(n.i(C.a)(C.d));a={ok:!0,id:e._id,rev:"0-0"},t.ctx&&r(null,a)})}"function"==typeof t&&(r=t,t={});var a;t.ctx?i(t.ctx):ae.transaction(i,g(r),function(){a&&r(null,a)})},Z._destroy=function(e,t){M.removeAllListeners(Z._name),ae.transaction(function(e){[I,R,L,D,j,N].forEach(function(t){e.executeSql("DROP TABLE IF EXISTS "+t,[])})},g(t),function(){n.i(x.e)()&&(delete window.localStorage["_pouch__websqldb_"+Z._name],delete window.localStorage[Z._name]),t(null,{ok:!0})})}}Object.defineProperty(t,"__esModule",{value:!0});var T=n(187),C=n(188),x=n(123),E=n(1012),P=n(189),$=n(1013),A=n(186),O=7,I=c("document-store"),R=c("by-sequence"),L=c("attach-store"),j=c("local-store"),D=c("metadata-store"),N=c("attach-seq-store"),U=new T.b,M=new x.b,F=1,B="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+R+" (seq, deleted)",q="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+R+" (doc_id, rev)",H="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+I+" (winningseq)",V="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+N+" (seq)",z="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+N+" (digest, seq)",W=R+".seq = "+I+".winningseq",G=R+".seq AS seq, "+R+".deleted AS deleted, "+R+".json AS data, "+R+".rev AS rev, "+I+".json AS metadata";t.default=k},function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}function i(e){if(!/^\d+-./.test(e))return n.i(g.a)(g.j);var t=e.indexOf("-"),r=e.substring(0,t),i=e.substring(t+1);return{prefix:parseInt(r,10),id:i}}function a(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],a=1,o=r.length;a<o;a++)i=[r[a],{status:"missing"},[i]];return[{pos:n,ids:i}]}function o(e,t,r){r||(r={deterministic_revs:!0});var o,s,c,u={status:"available"};if(e._deleted&&(u.deleted=!0),t)if(e._id||(e._id=n.i(v.f)()),s=n.i(v.j)(e,r.deterministic_revs),e._rev){if(c=i(e._rev),c.error)return c;e._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[s,u,[]]]]}],o=c.prefix+1}else e._rev_tree=[{pos:1,ids:[s,u,[]]}],o=1;else if(e._revisions&&(e._rev_tree=a(e._revisions,u),o=e._revisions.start,s=e._revisions.ids[0]),!e._rev_tree){if(c=i(e._rev),c.error)return c;o=c.prefix,s=c.id,e._rev_tree=[{pos:o,ids:[s,u,[]]}]}n.i(v.k)(e._id),e._rev=o+"-"+s;var l={metadata:{},data:{}};for(var d in e)if(Object.prototype.hasOwnProperty.call(e,d)){var f="_"===d[0];if(f&&!w[d]){var h=n.i(g.a)(g.k,d);throw h.message=g.k.message+": "+d,h}f&&!S[d]?l.metadata[d.slice(1)]=e[d]:l.data[d]=e[d]}return l}function s(e){try{return n.i(m.d)(e)}catch(e){var t=n.i(g.a)(g.l,"Attachment is not a valid base64 string");return{error:t}}}function c(e,t,r){var i=s(e.data);if(i.error)return r(i.error);e.length=i.length,e.data="blob"===t?n.i(m.a)(i,e.content_type):"base64"===t?n.i(m.b)(i):i,n.i(y.b)(i,function(t){e.digest="md5-"+t,r()})}function u(e,t,r){n.i(y.b)(e.data,function(i){e.digest="md5-"+i,e.length=e.data.size||e.data.length||0,"binary"===t?n.i(m.e)(e.data,function(t){e.data=t,r()}):"base64"===t?n.i(m.f)(e.data,function(t){e.data=t,r()}):r()})}function l(e,t,n){if(e.stub)return n();"string"==typeof e.data?c(e,t,n):u(e,t,n)}function d(e,t,n){function r(){a++,e.length===a&&(i?n(i):n())}if(!e.length)return n();var i,a=0;e.forEach(function(e){function n(e){i=e,++o===a.length&&r()}var a=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],o=0;if(!a.length)return r();for(var s in e.data._attachments)e.data._attachments.hasOwnProperty(s)&&l(e.data._attachments[s],t,n)})}function f(e,t,r,i,a,s,c,u){if(n.i(b.g)(t.rev_tree,r.metadata.rev)&&!u)return i[a]=r,s();var l=t.winningRev||n.i(b.h)(t),d="deleted"in t?t.deleted:n.i(b.e)(t,l),f="deleted"in r.metadata?r.metadata.deleted:n.i(b.e)(r.metadata),h=/^1-/.test(r.metadata.rev);if(d&&!f&&u&&h){var p=r.data;p._rev=l,p._id=r.metadata.id,r=o(p,u)}var v=n.i(b.i)(t.rev_tree,r.metadata.rev_tree[0],e);if(u&&(d&&f&&"new_leaf"!==v.conflicts||!d&&"new_leaf"!==v.conflicts||d&&!f&&"new_branch"===v.conflicts)){var m=n.i(g.a)(g.e);return i[a]=m,s()}var y=r.metadata.rev;r.metadata.rev_tree=v.tree,r.stemmedRevs=v.stemmedRevs||[],t.rev_map&&(r.metadata.rev_map=t.rev_map);var _,w=n.i(b.h)(r.metadata),S=n.i(b.e)(r.metadata,w),k=d===S?0:d<S?-1:1;_=y===w?S:n.i(b.e)(r.metadata,y),c(r,w,S,_,!0,k,a,s)}function h(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}function p(e,t,r,i,a,o,s,c,u){function l(e,t,r){var i=n.i(b.h)(e.metadata),a=n.i(b.e)(e.metadata,i);if("was_delete"in c&&a)return o[t]=n.i(g.a)(g.d,"deleted"),r();if(p&&h(e)){var u=n.i(g.a)(g.e);return o[t]=u,r()}s(e,i,a,a,!1,a?0:1,t,r)}function d(){++m===y&&u&&u()}e=e||1e3;var p=c.new_edits,v=new _.b,m=0,y=t.length;t.forEach(function(e,t){if(e._id&&n.i(b.f)(e._id)){var i=e._deleted?"_removeLocal":"_putLocal";return void r[i](e,{ctx:a},function(e,n){o[t]=e||n,d()})}var s=e.metadata.id;v.has(s)?(y--,v.get(s).push([e,t])):v.set(s,[[e,t]])}),v.forEach(function(t,r){function a(){++u<t.length?c():d()}function c(){var c=t[u],d=c[0],h=c[1];if(i.has(r))f(e,i.get(r),d,o,h,a,s,p);else{var v=n.i(b.i)([],d.metadata.rev_tree[0],e);d.metadata.rev_tree=v.tree,d.stemmedRevs=v.stemmedRevs||[],l(d,h,a)}}var u=0;c()})}var v=n(123),g=n(188),m=n(186),y=n(360),b=n(189);n.d(t,"e",function(){return b.e}),n.d(t,"a",function(){return b.f});var _=n(187);n.d(t,"b",function(){return o}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return p});var w=r(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),S=r(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"])},function(e,t,n){"use strict";function r(e){try{return JSON.parse(e)}catch(t){return o.a.parse(e)}}function i(e){try{return JSON.stringify(e)}catch(t){return o.a.stringify(e)}}var a=n(371),o=n.n(a);n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i})},function(e,t,n){var r=n(1015),i=n(1016),a=i;a.v1=r,a.v4=i,e.exports=a},function(e,t,n){function r(e,t,n){var r=t&&n||0,l=t||[];e=e||{};var d=e.node||i,f=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==f){var h=o();null==d&&(d=i=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=a=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,g=p-c+(v-u)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||p>c)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=p,u=v,a=f,p+=122192928e5;var m=(1e4*(268435455&p)+v)%4294967296;l[r++]=m>>>24&255,l[r++]=m>>>16&255,l[r++]=m>>>8&255,l[r++]=255&m;var y=p/4294967296*1e4&268435455;l[r++]=y>>>8&255,l[r++]=255&y,l[r++]=y>>>24&15|16,l[r++]=y>>>16&255,l[r++]=f>>>8|128,l[r++]=255&f;for(var b=0;b<6;++b)l[r+b]=d[b];return t||s(l)}var i,a,o=n(362),s=n(361),c=0,u=0;e.exports=r},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[r+s]=o[s];return t||a(o)}var i=n(362),a=n(361);e.exports=r},function(e,t,n){"use strict";(function(e){function r(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}function i(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}function a(e){if(e instanceof ArrayBuffer)return i(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}function o(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&xi.call(n)==Ei}function s(e){var t,n,i;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,i=e.length;n<i;n++)t[n]=s(e[n]);return t}if(e instanceof Date)return e.toISOString();if(r(e))return a(e);if(!o(e))return e;t={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var c=s(e[n]);void 0!==c&&(t[n]=c)}return t}function c(e){var t=!1;return hi()(function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)})}function u(e){return hi()(function(t){t=s(t);var n=this,r="function"==typeof t[t.length-1]&&t.pop(),i=new Ci(function(r,i){var a;try{var o=c(function(e,t){e?i(e):r(t)});t.push(o),a=e.apply(n,t),a&&"function"==typeof a.then&&r(a)}catch(e){i(e)}});return r&&i.then(function(e){r(null,e)},r),i})}function l(e,t,n){if(e.constructor.listeners("debug").length){for(var r=["api",e.name,t],i=0;i<n.length-1;i++)r.push(n[i]);e.constructor.emit("debug",r);var a=n[n.length-1];n[n.length-1]=function(n,r){var i=["api",e.name,t];i=i.concat(n?["error",n]:["success",r]),e.constructor.emit("debug",i),a(n,r)}}}function d(e,t){return u(hi()(function(n){if(this._closed)return Ci.reject(new Error("database is closed"));if(this._destroyed)return Ci.reject(new Error("database is destroyed"));var r=this;return l(r,e,n),this.taskqueue.isReady?t.apply(this,n):new Ci(function(t,i){r.taskqueue.addTask(function(a){a?i(a):t(r[e].apply(r,n))})})}))}function f(e){return"$"+e}function h(e){return e.substring(1)}function p(){this._store={}}function v(e){if(this._store=new p,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}function g(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}function m(e,t){for(var n={},r=0,i=t.length;r<i;r++){var a=t[r];a in e&&(n[a]=e[a])}return n}function y(e){return e}function b(e){return[{ok:e}]}function _(e,t,n){function r(){var e=[];f.forEach(function(t){t.docs.forEach(function(n){e.push({id:t.id,docs:[n]})})}),n(null,{results:e})}function i(){++d===l&&r()}function a(e,t,n){f[e]={id:t,docs:n},i()}function o(){if(!(p>=h.length)){var e=Math.min(p+Oi,h.length),t=h.slice(p,e);s(t,p),p+=t.length}}function s(n,r){n.forEach(function(n,i){var s=r+i,c=u.get(n),l=m(c[0],["atts_since","attachments"]);l.open_revs=c.map(function(e){return e.rev}),l.open_revs=l.open_revs.filter(y);var d=y;0===l.open_revs.length&&(delete l.open_revs,d=b),["revs","attachments","binary","ajax","latest"].forEach(function(e){e in t&&(l[e]=t[e])}),e.get(n,l,function(e,t){var r;r=e?[{error:e}]:d(t),a(s,n,r),o()})})}var c=t.docs,u=new $i;c.forEach(function(e){u.has(e.id)?u.get(e.id).push(e):u.set(e.id,[e])});var l=u.size,d=0,f=new Array(l),h=[];u.forEach(function(e,t){h.push(t)});var p=0;o()}function w(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}function S(){return Ai}function k(e){w()?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):S()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}function T(){pi.EventEmitter.call(this),this._listeners={},k(this)}function C(e){if("undefined"!==console&&e in console){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function x(e,t){var n=6e5;return e=parseInt(e,10)||0,t=parseInt(t,10),t!==t||t<=e?t=(e||1)<<1:t+=1,t>n&&(e=n>>1,t=n),~~((t-e)*Math.random()+e)}function E(e){var t=0;return e||(t=2e3),x(e,t)}function P(e,t){C("info","The above "+e+" is totally normal. "+t)}function $(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}function A(e,t){function n(t){for(var n in e)"function"!=typeof e[n]&&(this[n]=e[n]);void 0!==t&&(this.reason=t)}return n.prototype=$.prototype,new n(t)}function O(e){if("object"!=typeof e){var t=e;e=Fi,e.data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}function I(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return A(Vi,r)}}function R(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){r.doc||(r.doc={});var i=n&&I(e.filter,r.doc,t);if("object"==typeof i)return i;if(i)return!1;if(e.include_docs){if(!e.attachments)for(var a in r.doc._attachments)r.doc._attachments.hasOwnProperty(a)&&(r.doc._attachments[a].stub=!0)}else delete r.doc;return!0}}function L(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function j(){}function D(e){var t;if(e?"string"!=typeof e?t=A(Ni):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=A(Mi)):t=A(Ui),t)throw t}function N(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(C("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function U(e,t){return"listenerCount"in e?e.listenerCount(t):pi.EventEmitter.listenerCount(e,t)}function M(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function F(e){var t=M(e);return t?t.join("/"):null}function B(e){for(var t=ea.exec(e),n={},r=14;r--;){var i=Ji[r],a=t[r]||"",o=-1!==["user","password"].indexOf(i);n[i]=o?decodeURIComponent(a):a}return n[Ki]={},n[Ji[12]].replace(Zi,function(e,t,r){t&&(n[Ki][t]=r)}),n}function q(e,t){var n=[],r=[];for(var i in t)t.hasOwnProperty(i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)}function H(e,t,n){return new Ci(function(r,i){e.get(t,function(a,o){if(a){if(404!==a.status)return i(a);o={}}var s=o._rev,c=n(o);if(!c)return r({updated:!1,rev:s});c._id=t,c._rev=s,r(V(e,c,n))})})}function V(e,t,n){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(r){if(409!==r.status)throw r;return H(e,t._id,n)})}function z(){return ui.a.v4().replace(/-/g,"").toLowerCase()}function W(e){for(var t,n,r,i,a=e.rev_tree.slice();i=a.pop();){var o=i.ids,s=o[2],c=i.pos;if(s.length)for(var u=0,l=s.length;u<l;u++)a.push({pos:c+1,ids:s[u]});else{var d=!!o[1].deleted,f=o[0];t&&!(r!==d?r:n!==c?n<c:t<f)||(t=f,n=c,r=d)}}return n+"-"+t}function G(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,a=n.ids,o=a[2],s=t(0===o.length,i,a[0],n.ctx,a[1]),c=0,u=o.length;c<u;c++)r.push({pos:i+1,ids:o[c],ctx:s})}function Y(e,t){return e.pos-t.pos}function Q(e){var t=[];G(e,function(e,n,r,i,a){e&&t.push({rev:n+"-"+r,pos:n,opts:a})}),t.sort(Y).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function X(e){for(var t=W(e),n=Q(e.rev_tree),r=[],i=0,a=n.length;i<a;i++){var o=n[i];o.rev===t||o.opts.deleted||r.push(o.rev)}return r}function J(e){var t=[];return G(e.rev_tree,function(e,n,r,i,a){"available"!==a.status||e||(t.push(n+"-"+r),a.status="missing")}),t}function K(e){for(var t,n=[],r=e.slice();t=r.pop();){var i=t.pos,a=t.ids,o=a[0],s=a[1],c=a[2],u=0===c.length,l=t.history?t.history.slice():[];l.push({id:o,opts:s}),u&&n.push({pos:i+1-l.length,ids:l});for(var d=0,f=c.length;d<f;d++)r.push({pos:i+1,ids:c[d],history:l})}return n.reverse()}function Z(e,t){return e.pos-t.pos}function ee(e,t,n){for(var r,i=0,a=e.length;i<a;)r=i+a>>>1,n(e[r],t)<0?i=r+1:a=r;return i}function te(e,t,n){var r=ee(e,t,n);e.splice(r,0,t)}function ne(e,t){for(var n,r,i=t,a=e.length;i<a;i++){var o=e[i],s=[o.id,o.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function re(e,t){return e[0]<t[0]?-1:1}function ie(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),a=i.tree1,o=i.tree2;(a[1].status||o[1].status)&&(a[1].status="available"===a[1].status||"available"===o[1].status?"available":"missing");for(var s=0;s<o[2].length;s++)if(a[2][0]){for(var c=!1,u=0;u<a[2].length;u++)a[2][u][0]===o[2][s][0]&&(n.push({tree1:a[2][u],tree2:o[2][s]}),c=!0);c||(r="new_branch",te(a[2],o[2][s],re))}else r="new_leaf",a[2][0]=o[2][s]}return{conflicts:r,tree:e}}function ae(e,t,n){var r,i=[],a=!1,o=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var s=0,c=e.length;s<c;s++){var u=e[s];if(u.pos===t.pos&&u.ids[0]===t.ids[0])r=ie(u.ids,t.ids),i.push({pos:u.pos,ids:r.tree}),a=a||r.conflicts,o=!0;else if(!0!==n){var l=u.pos<t.pos?u:t,d=u.pos<t.pos?t:u,f=d.pos-l.pos,h=[],p=[];for(p.push({ids:l.ids,diff:f,parent:null,parentIdx:null});p.length>0;){var v=p.pop();if(0!==v.diff)for(var g=v.ids[2],m=0,y=g.length;m<y;m++)p.push({ids:g[m],diff:v.diff-1,parent:v.ids,parentIdx:m});else v.ids[0]===d.ids[0]&&h.push(v)}var b=h[0];b?(r=ie(b.ids,d.ids),b.parent[2][b.parentIdx]=r.tree,i.push({pos:l.pos,ids:l.ids}),a=a||r.conflicts,o=!0):i.push(u)}else i.push(u)}return o||i.push(t),i.sort(Z),{tree:i,conflicts:a||"internal_node"}}function oe(e,t){for(var n,r,i=K(e),a=0,o=i.length;a<o;a++){var s,c=i[a],u=c.ids;if(u.length>t){n||(n={});var l=u.length-t;s={pos:c.pos+l,ids:ne(u,l)};for(var d=0;d<l;d++){var f=c.pos+d+"-"+u[d].id;n[f]=!0}}else s={pos:c.pos,ids:ne(u,0)};r=r?ae(r,s,!0).tree:[s]}return n&&G(r,function(e,t,r){delete n[t+"-"+r]}),{tree:r,revs:n?Object.keys(n):[]}}function se(e,t,n){var r=ae(e,t),i=oe(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function ce(e,t){for(var n,r=e.slice(),i=t.split("-"),a=parseInt(i[0],10),o=i[1];n=r.pop();){if(n.pos===a&&n.ids[0]===o)return!0;for(var s=n.ids[2],c=0,u=s.length;c<u;c++)r.push({pos:n.pos+1,ids:s[c]})}return!1}function ue(e){return e.ids}function le(e,t){t||(t=W(e));for(var n,r=t.substring(t.indexOf("-")+1),i=e.rev_tree.map(ue);n=i.pop();){if(n[0]===r)return!!n[1].deleted;i=i.concat(n[2])}}function de(e){return/^_local/.test(e)}function fe(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var i=n.pos,a=n.ids,o=a[0],s=a[1],c=a[2],u=0===c.length,l=n.history?n.history.slice():[];if(l.push({id:o,pos:i,opts:s}),u)for(var d=0,f=l.length;d<f;d++){var h=l[d],p=h.pos+"-"+h.id;if(p===e)return i+"-"+o}for(var v=0,g=c.length;v<g;v++)r.push({pos:i+1,ids:c[v],history:l})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}function he(e,t){try{e.emit("change",t)}catch(e){C("error",'Error in .on("change", function):',e)}}function pe(e,t,n){function r(){i.cancel()}pi.EventEmitter.call(this);var i=this;this.db=e,t=t?s(t):{};var a=t.complete=c(function(t,n){t?U(i,"error")>0&&i.emit("error",t):i.emit("complete",n),i.removeAllListeners(),e.removeListener("destroyed",r)});n&&(i.on("complete",function(e){n(null,e)}),i.on("error",n)),e.once("destroyed",r),t.onChange=function(e){i.isCancelled||he(i,e)};var o=new Ci(function(e,n){t.complete=function(t,r){t?n(t):e(r)}});i.once("cancel",function(){e.removeListener("destroyed",r),t.complete(null,{status:"cancelled"})}),this.then=o.then.bind(o),this.catch=o.catch.bind(o),this.then(function(e){a(null,e)},a),e.taskqueue.isReady?i.validateChanges(t):e.taskqueue.addTask(function(e){e?t.complete(e):i.isCancelled?i.emit("cancel"):i.validateChanges(t)})}function ve(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=Q(t.rev_tree).map(function(e){return{rev:e.rev}}));var i={id:t.id,changes:r,doc:e};return le(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=X(t),i.doc._conflicts.length||delete i.doc._conflicts),i}function ge(e,t){return e<t?-1:e>t?1:0}function me(e,t){return function(n,r){n||r[0]&&r[0].error?(n=n||r[0],n.docId=t,e(n)):e(null,r.length?r[0]:r)}}function ye(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var a=r[i];n._attachments[a]=m(n._attachments[a],["data","digest","content_type","length","revpos","stub"])}}}function be(e,t){var n=ge(e._id,t._id);return 0!==n?n:ge(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function _e(e){var t={},n=[];return G(e,function(e,r,i,a){var o=r+"-"+i;return e&&(t[o]=0),void 0!==a&&n.push({from:a,to:o}),o}),n.reverse(),n.forEach(function(e){void 0===t[e.from]?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])}),t}function we(e,t,n){var r="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;if(t.descending&&r.reverse(),!r.length)return e._allDocs({limit:0},n);var i={offset:t.skip};return Ci.all(r.map(function(n){var r=Ri({key:n,deleted:"ok"},t);return["limit","skip","keys"].forEach(function(e){delete r[e]}),new Ci(function(t,a){e._allDocs(r,function(e,r){if(e)return a(e);i.total_rows=r.total_rows,t(r.rows[0]||{key:n,error:"not_found"})})})})).then(function(e){return i.rows=e,i})}function Se(e){var t=e._compactionQueue[0],n=t.opts,r=t.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(t){t&&t.last_seq&&(n.last_seq=t.last_seq),e._compact(n,function(t,n){t?r(t):r(null,n),yi()(function(){e._compactionQueue.shift(),e._compactionQueue.length&&Se(e)})})})}function ke(e){return"_"===e.charAt(0)&&e+" is not a valid attachment name, attachment names cannot start with '_'"}function Te(){pi.EventEmitter.call(this)}function Ce(){this.isReady=!1,this.failed=!1,this.queue=[]}function xe(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=Pe.adapters,i=Pe.preferredAdapters,a=Pe.prefix,o=t.adapter;if(!o)for(var s=0;s<i.length;++s){o=i[s];{if(!("idb"===o&&"websql"in r&&S()&&localStorage["_pouch__websqldb_"+a+e]))break;C("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.')}}var c=r[o];return{name:c&&"use_prefix"in c&&!c.use_prefix?e:a+e,adapter:o}}function Ee(e){function t(t){e.removeListener("closed",n),t||e.constructor.emit("destroyed",e.name)}function n(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",n),e.constructor.emit("ref",e)}function Pe(e,t){if(!(this instanceof Pe))return new Pe(e,t);var n=this;if(t=t||{},e&&"object"==typeof e&&(t=e,e=t.name,delete t.name),this.__opts=t=s(t),n.auto_compaction=t.auto_compaction,n.prefix=Pe.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var r=(t.prefix||"")+e,i=xe(r,t);if(t.name=i.name,t.adapter=t.adapter||i.adapter,n.name=e,n._adapter=t.adapter,Pe.emit("debug",["adapter","Picked adapter: ",t.adapter]),!Pe.adapters[t.adapter]||!Pe.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);Te.call(n),n.taskqueue=new Ce,n.adapter=t.adapter,Pe.adapters[t.adapter].call(n,t,function(e){if(e)return n.taskqueue.fail(e);Ee(n),n.emit("created",n),Pe.emit("created",n.name),n.taskqueue.ready(n)})}function $e(e){Object.keys(pi.EventEmitter.prototype).forEach(function(t){"function"==typeof pi.EventEmitter.prototype[t]&&(e[t]=na[t].bind(na))});var t=e._destructionListeners=new $i;e.on("ref",function(e){t.has(e.name)||t.set(e.name,[]),t.get(e.name).push(e)}),e.on("unref",function(e){if(t.has(e.name)){var n=t.get(e.name),r=n.indexOf(e);r<0||(n.splice(r,1),n.length>1?t.set(e.name,n):t.delete(e.name))}}),e.on("destroyed",function(e){if(t.has(e)){var n=t.get(e);t.delete(e),n.forEach(function(e){e.emit("destroyed",!0)})}})}function Ae(e){e.debug=_i.a;var t={};e.on("debug",function(e){var n=e[0],r=e.slice(1);t[n]||(t[n]=_i()("pouchdb:"+n)),t[n].apply(null,r)})}function Oe(e,t){for(var n=e,r=0,i=t.length;r<i;r++){if(!(n=n[t[r]]))break}return n}function Ie(e,t){return e<t?-1:e>t?1:0}function Re(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var a=e[r];"."===a?r>0&&"\\"===e[r-1]?n=n.substring(0,n.length-1)+".":(t.push(n),n=""):n+=a}return t.push(n),t}function Le(e){return ra.indexOf(e)>-1}function je(e){return Object.keys(e)[0]}function De(e){return e[je(e)]}function Ne(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(n){var r=e[n];if("object"!=typeof r&&(r={$eq:r}),Le(n))r instanceof Array?t[n]=r.map(function(e){return Ne([e])}):t[n]=Ne([r]);else{var i=t[n]=t[n]||{};Object.keys(r).forEach(function(e){var t=r[e];return"$gt"===e||"$gte"===e?Ue(e,t,i):"$lt"===e||"$lte"===e?Me(e,t,i):"$ne"===e?Fe(t,i):"$eq"===e?Be(t,i):void(i[e]=t)})}})}),t}function Ue(e,t,n){void 0===n.$eq&&(void 0!==n.$gte?"$gte"===e?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):void 0!==n.$gt?"$gte"===e?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}function Me(e,t,n){void 0===n.$eq&&(void 0!==n.$lte?"$lte"===e?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):void 0!==n.$lt?"$lte"===e?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}function Fe(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}function Be(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function qe(e){var t=s(e),n=!1;"$and"in t&&(t=Ne(t.$and),n=!0),["$or","$nor"].forEach(function(e){e in t&&t[e].forEach(function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n],i=e[r];"object"==typeof i&&null!==i||(e[r]={$eq:i})}})}),"$not"in t&&(t.$not=Ne([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var a=r[i],o=t[a];"object"!=typeof o||null===o?o={$eq:o}:"$ne"in o&&!n&&(o.$ne=[o.$ne]),t[a]=o}return t}function He(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}function Ve(e,t,n){return He(e,t,n)+e}function ze(e,t){if(e===t)return 0;e=We(e),t=We(t);var n=tt(e),r=tt(t);if(n-r!=0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return Ze(e,t)}return Array.isArray(e)?Ke(e,t):et(e,t)}function We(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=We(t[r])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];void 0!==a&&(e[i]=We(a))}}}}return e}function Ge(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return nt(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,a="";if(t)for(;++r<i;)a+=Ye(n[r]);else for(;++r<i;){var o=n[r];a+=Ye(o)+Ye(e[o])}return a}return""}function Ye(e){return e=We(e),tt(e)+oa+Ge(e)+"\0"}function Qe(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var i="0"===e[t];t++;var a="",o=e.substring(t,t+aa),s=parseInt(o,10)+ia;for(i&&(s=-s),t+=aa;;){var c=e[t];if("\0"===c)break;a+=c,t++}a=a.split("."),n=1===a.length?parseInt(a,10):parseFloat(a[0]+"."+a[1]),i&&(n-=10),0!==s&&(n=parseFloat(n+"e"+s))}return{num:n,length:t-r}}function Xe(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,a=r.index;if(Array.isArray(i))i.push(n);else if(a===e.length-2){var o=e.pop();i[o]=n}else e.push(n)}}function Je(e){for(var t=[],n=[],r=0;;){var i=e[r++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var a=Qe(e,r);t.push(a.num),r+=a.length;break;case"4":for(var o="";;){var s=e[r];if("\0"===s)break;o+=s,r++}o=o.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(o);break;case"5":var c={element:[],index:t.length};t.push(c.element),n.push(c);break;case"6":var u={element:{},index:t.length};t.push(u.element),n.push(u);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();Xe(t,n)}}}function Ke(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=ze(e[r],t[r]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}function Ze(e,t){return e===t?0:e>t?1:-1}function et(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),a=0;a<i;a++){var o=ze(n[a],r[a]);if(0!==o)return o;if(0!==(o=ze(e[n[a]],t[r[a]])))return o}return n.length===r.length?0:n.length>r.length?1:-1}function tt(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);return~n?null===e?1:Array.isArray(e)?5:n<3?n+2:n+3:Array.isArray(e)?5:void 0}function nt(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",a=(r?-n:n)-ia,o=Ve(a.toString(),"0",aa);i+=oa+o;var s=Math.abs(parseFloat(t[0]));r&&(s=10-s);var c=s.toFixed(20);return c=c.replace(/\.?0+$/,""),i+=oa+c}function rt(e){function t(t){return e.map(function(e){var n=je(e),r=Re(n);return Oe(t,r)})}return function(e,n){var r=t(e.doc),i=t(n.doc),a=ze(r,i);return 0!==a?a:Ie(e.doc._id,n.doc._id)}}function it(e,t,n){if(e=e.filter(function(e){return at(e.doc,t.selector,n)}),t.sort){var r=rt(t.sort);e=e.sort(r),"string"!=typeof t.sort[0]&&"desc"===De(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,a=("limit"in t?t.limit:e.length)+i;e=e.slice(i,a)}return e}function at(e,t,n){return n.every(function(n){var r=t[n],i=Re(n),a=Oe(e,i);return Le(n)?st(n,r,e):ot(r,e,i,a)})}function ot(e,t,n,r){return!e||Object.keys(e).every(function(i){var a=e[i];return ct(i,t,a,n,r)})}function st(e,t,n){return"$or"===e?t.some(function(e){return at(n,e,Object.keys(e))}):"$not"===e?!at(n,t,Object.keys(t)):!t.find(function(e){return at(n,e,Object.keys(e))})}function ct(e,t,n,r,i){if(!sa[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return sa[e](t,n,r,i)}function ut(e){return void 0!==e&&null!==e}function lt(e){return void 0!==e}function dt(e,t){var n=t[0],r=t[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%n===r}function ft(e,t){return t.some(function(t){return e instanceof Array?e.indexOf(t)>-1:e===t})}function ht(e,t){return t.every(function(t){return e.indexOf(t)>-1})}function pt(e,t){return e.length===t}function vt(e,t){return new RegExp(t).test(e)}function gt(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}function mt(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");t=qe(t);var n={doc:e},r=it([n],{selector:t},Object.keys(t));return r&&1===r.length}function yt(e){return q('"use strict";\nreturn '+e+";",{})}function bt(e){return q(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{})}function _t(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter){var n="string"==typeof e.filter?e.filter:"function";return t(new Error('selector invalid for filter "'+n+'"'))}t()}function wt(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=F(e.view):e.filter=F(e.filter))}function St(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!N(e.db)}function kt(e,t){var n=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var r=A(Vi,"`view` filter parameter not found or invalid.");return n(r)}var i=M(t.view);e.db.get("_design/"+i[0],function(r,a){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(O(r));var o=a&&a.views&&a.views[i[1]]&&a.views[i[1]].map;if(!o)return n(A(ji,a.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=bt(o),e.doChanges(t)})}else if(t.selector)t.filter=function(e){return mt(e,t.selector)},e.doChanges(t);else{var a=M(t.filter);e.db.get("_design/"+a[0],function(r,i){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(O(r));var o=i&&i.filters&&i.filters[a[1]];if(!o)return n(A(ji,i&&i.filters?"missing json key: "+a[1]:"missing json key: filters"));t.filter=yt(o),e.doChanges(t)})}}function Tt(e){e._changesFilterPlugin={validate:_t,normalize:wt,shouldFilter:St,filter:kt}}function Ct(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}function xt(e){if(!/^\d+-./.test(e))return A(Yi);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function Et(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],a=1,o=r.length;a<o;a++)i=[r[a],{status:"missing"},[i]];return[{pos:n,ids:i}]}function Pt(e,t){var n,r,i,a={status:"available"};if(e._deleted&&(a.deleted=!0),t)if(e._id||(e._id=ta()),r=z(),e._rev){if(i=xt(e._rev),i.error)return i;e._rev_tree=[{pos:i.prefix,ids:[i.id,{status:"missing"},[[r,a,[]]]]}],n=i.prefix+1}else e._rev_tree=[{pos:1,ids:[r,a,[]]}],n=1;else if(e._revisions&&(e._rev_tree=Et(e._revisions,a),n=e._revisions.start,r=e._revisions.ids[0]),!e._rev_tree){if(i=xt(e._rev),i.error)return i;n=i.prefix,r=i.id,e._rev_tree=[{pos:n,ids:[r,a,[]]}]}D(e._id),e._rev=n+"-"+r;var o={metadata:{},data:{}};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var c="_"===s[0];if(c&&!ua[s]){var u=A(Hi,s);throw u.message=Hi.message+": "+s,u}c&&!la[s]?o.metadata[s.slice(1)]=e[s]:o.data[s]=e[s]}return o}function $t(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if("TypeError"!==a.name)throw a;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function At(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function Ot(e,t){return $t([At(e)],{type:t})}function It(e,t){return Ot(da(e),t)}function Rt(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}function Lt(e,t){if("undefined"==typeof FileReader)return t(Rt((new FileReaderSync).readAsArrayBuffer(e)));var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||"";if(r)return t(n);t(Rt(n))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function jt(e,t){Lt(e,function(e){t(e)})}function Dt(e,t){jt(e,function(e){t(fa(e))})}function Nt(e,t){if("undefined"==typeof FileReader)return t((new FileReaderSync).readAsArrayBuffer(e));var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)}function Ut(e){return fa(e)}function Mt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.slice(t,n)}function Ft(e,t,n,r,i){(n>0||r<t.size)&&(t=Mt(t,n,r)),Nt(t,function(t){e.append(t),i()})}function Bt(e,t,n,r,i){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function qt(e,t){function n(){ha(i)}function r(){var e=l.end(!0),n=Ut(e);t(n),l.destroy()}function i(){var t=u*s,i=t+s;u++,u<c?d(l,e,t,i,n):d(l,e,t,i,r)}var a="string"==typeof e,o=a?e.length:e.size,s=Math.min(pa,o),c=Math.ceil(o/s),u=0,l=a?new Si.a:new Si.a.ArrayBuffer,d=a?Bt:Ft;i()}function Ht(e){return Si.a.hash(e)}function Vt(e){try{return da(e)}catch(e){var t=A(Bi,"Attachment is not a valid base64 string");return{error:t}}}function zt(e,t,n){var r=Vt(e.data);if(r.error)return n(r.error);e.length=r.length,e.data="blob"===t?Ot(r,e.content_type):"base64"===t?fa(r):r,qt(r,function(t){e.digest="md5-"+t,n()})}function Wt(e,t,n){qt(e.data,function(r){e.digest="md5-"+r,e.length=e.data.size||e.data.length||0,"binary"===t?jt(e.data,function(t){e.data=t,n()}):"base64"===t?Dt(e.data,function(t){e.data=t,n()}):n()})}function Gt(e,t,n){if(e.stub)return n();"string"==typeof e.data?zt(e,t,n):Wt(e,t,n)}function Yt(e,t,n){function r(){a++,e.length===a&&(i?n(i):n())}if(!e.length)return n();var i,a=0;e.forEach(function(e){function n(e){i=e,++o===a.length&&r()}var a=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],o=0;if(!a.length)return r();for(var s in e.data._attachments)e.data._attachments.hasOwnProperty(s)&&Gt(e.data._attachments[s],t,n)})}function Qt(e,t,n,r,i,a,o,s){if(ce(t.rev_tree,n.metadata.rev))return r[i]=n,a();var c=t.winningRev||W(t),u="deleted"in t?t.deleted:le(t,c),l="deleted"in n.metadata?n.metadata.deleted:le(n.metadata),d=/^1-/.test(n.metadata.rev);if(u&&!l&&s&&d){var f=n.data;f._rev=c,f._id=n.metadata.id,n=Pt(f,s)}var h=se(t.rev_tree,n.metadata.rev_tree[0],e);if(s&&(u&&l&&"new_leaf"!==h.conflicts||!u&&"new_leaf"!==h.conflicts||u&&!l&&"new_branch"===h.conflicts)){var p=A(Di);return r[i]=p,a()}var v=n.metadata.rev;n.metadata.rev_tree=h.tree,n.stemmedRevs=h.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var g,m=W(n.metadata),y=le(n.metadata,m),b=u===y?0:u<y?-1:1;g=v===m?y:le(n.metadata,v),o(n,m,y,g,!0,b,i,a)}function Xt(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}function Jt(e,t,n,r,i,a,o,s,c){function u(e,t,n){var r=W(e.metadata),i=le(e.metadata,r);if("was_delete"in s&&i)return a[t]=A(ji,"deleted"),n();if(d&&Xt(e)){var c=A(Di);return a[t]=c,n()}o(e,r,i,i,!1,i?0:1,t,n)}function l(){++h===p&&c&&c()}e=e||1e3;var d=s.new_edits,f=new $i,h=0,p=t.length;t.forEach(function(e,t){if(e._id&&de(e._id)){var r=e._deleted?"_removeLocal":"_putLocal";return void n[r](e,{ctx:i},function(e,n){a[t]=e||n,l()})}var o=e.metadata.id;f.has(o)?(p--,f.get(o).push([e,t])):f.set(o,[[e,t]])}),f.forEach(function(t,n){function i(){++c<t.length?s():l()}function s(){var s=t[c],l=s[0],f=s[1];if(r.has(n))Qt(e,r.get(n),l,a,f,i,o,d);else{var h=se([],l.metadata.rev_tree[0],e);l.metadata.rev_tree=h.tree,l.stemmedRevs=h.stemmedRevs||[],u(l,f,i)}}var c=0;s()})}function Kt(e){try{return JSON.parse(e)}catch(t){return Ti.a.parse(e)}}function Zt(e){try{return JSON.stringify(e)}catch(t){return Ti.a.stringify(e)}}function en(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(A(Wi,n,t.type))}}function tn(e,t,n){return{data:Zt(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function nn(e){if(!e)return null;var t=Kt(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function rn(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function an(e,t,n,r){n?r(e?"string"!=typeof e?e:It(e,t):$t([""],{type:t})):e?"string"!=typeof e?Lt(e,function(e){r(fa(e))}):r(e):r("")}function on(e,t,n,r){function i(){++s===o.length&&r&&r()}function a(e,t){var r=e._attachments[t],a=r.digest;n.objectStore(ya).get(a).onsuccess=function(e){r.body=e.target.result.body,i()}}var o=Object.keys(e._attachments||{});if(!o.length)return r&&r();var s=0;o.forEach(function(n){t.attachments&&t.include_docs?a(e,n):(e._attachments[n].stub=!0,i())})}function sn(e,t){return Ci.all(e.map(function(e){if(e.doc&&e.doc._attachments){var n=Object.keys(e.doc._attachments);return Ci.all(n.map(function(n){var r=e.doc._attachments[n];if("body"in r){var i=r.body,a=r.content_type;return new Ci(function(o){an(i,a,t,function(t){e.doc._attachments[n]=Ri(m(r,["digest","content_type"]),{data:t}),o()})})}}))}}))}function cn(e,t,n){function r(){--u||i()}function i(){a.length&&a.forEach(function(e){c.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::￿",!1,!1)).onsuccess=function(t){t.target.result||s.delete(e)}})}var a=[],o=n.objectStore(ma),s=n.objectStore(ya),c=n.objectStore(ba),u=e.length;e.forEach(function(e){var n=o.index("_doc_id_rev"),i=t+"::"+e;n.getKey(i).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return r();o.delete(t),c.index("seq").openCursor(IDBKeyRange.only(t)).onsuccess=function(e){var t=e.target.result;if(t){var n=t.value.digestSeq.split("::")[0];a.push(n),c.delete(t.primaryKey),t.continue()}else r()}}})}function un(e,t,n){try{return{txn:e.transaction(t,n)}}catch(e){return{error:e}}}function ln(e,t,n,r,i,a){function o(){var e=[ga,ma,ya,wa,ba,_a],t=un(i,e,"readwrite");if(t.error)return a(t.error);b=t.txn,b.onabort=en(a),b.ontimeout=en(a),b.oncomplete=d,_=b.objectStore(ga),w=b.objectStore(ma),S=b.objectStore(ya),k=b.objectStore(ba),T=b.objectStore(_a),T.get(_a).onsuccess=function(e){x=e.target.result,u()},h(function(e){if(e)return D=!0,a(e);l()})}function s(){I=!0,u()}function c(){Jt(e.revs_limit,E,r,j,b,L,p,n,s)}function u(){x&&I&&(x.docCount+=R,T.put(x))}function l(){function e(){++n===E.length&&c()}function t(t){var n=nn(t.target.result);n&&j.set(n.id,n),e()}if(E.length)for(var n=0,r=0,i=E.length;r<i;r++){var a=E[r];if(a._id&&de(a._id))e();else{var o=_.get(a.metadata.id);o.onsuccess=t}}}function d(){D||(ka.notify(r._meta.name),a(null,L))}function f(e,t){S.get(e).onsuccess=function(n){if(n.target.result)t();else{var r=A(Qi,"unknown stub attachment with digest "+e);r.status=412,t(r)}}}function h(e){function t(){++i===n.length&&e(r)}var n=[];if(E.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var r=e.data._attachments[t];r.stub&&n.push(r.digest)})}),!n.length)return e();var r,i=0;n.forEach(function(e){f(e,function(e){e&&!r&&(r=e),t()})})}function p(e,t,n,r,i,a,o,s){e.metadata.winningRev=t,e.metadata.deleted=n;var c=e.data;if(c._id=e.metadata.id,c._rev=e.metadata.rev,r&&(c._deleted=!0),c._attachments&&Object.keys(c._attachments).length)return g(e,t,n,i,o,s);R+=a,u(),v(e,t,n,i,o,s)}function v(e,t,n,i,a,o){function s(a){var o=e.stemmedRevs||[];i&&r.auto_compaction&&(o=o.concat(J(e.metadata))),o&&o.length&&cn(o,e.metadata.id,b),d.seq=a.target.result;var s=tn(d,t,n);_.put(s).onsuccess=u}function c(e){e.preventDefault(),e.stopPropagation(),w.index("_doc_id_rev").getKey(l._doc_id_rev).onsuccess=function(e){w.put(l,e.target.result).onsuccess=s}}function u(){L[a]={ok:!0,id:d.id,rev:d.rev},j.set(e.metadata.id,e.metadata),m(e,d.seq,o)}var l=e.data,d=e.metadata;l._doc_id_rev=d.id+"::"+d.rev,delete l._id,delete l._rev;var f=w.put(l);f.onsuccess=s,f.onerror=c}function g(e,t,n,r,i,a){function o(){u===l.length&&v(e,t,n,r,i,a)}function s(){u++,o()}var c=e.data,u=0,l=Object.keys(c._attachments);l.forEach(function(n){var r=e.data._attachments[n];if(r.stub)u++,o();else{var i=r.data;delete r.data,r.revpos=parseInt(t,10);y(r.digest,i,s)}})}function m(e,t,n){function r(){++a===o.length&&n()}function i(n){var i=e.data._attachments[n].digest,a=k.put({seq:t,digestSeq:i+"::"+t});a.onsuccess=r,a.onerror=function(e){e.preventDefault(),e.stopPropagation(),r()}}var a=0,o=Object.keys(e.data._attachments||{});if(!o.length)return n();for(var s=0;s<o.length;s++)i(o[s])}function y(e,t,n){S.count(e).onsuccess=function(r){if(r.target.result)return n();var i={digest:e,body:t};S.put(i).onsuccess=n}}for(var b,_,w,S,k,T,C,x,E=t.docs,P=0,$=E.length;P<$;P++){var O=E[P];O._id&&de(O._id)||(O=E[P]=Pt(O,n.new_edits),O.error&&!C&&(C=O))}if(C)return a(C);var I=!1,R=0,L=new Array(E.length),j=new $i,D=!1,N=r._meta.blobSupport?"blob":"base64";Yt(E,N,function(e){if(e)return a(e);o()})}function dn(e,t,n,r,i){function a(e){l=e.target.result,u&&i(u,l,d)}function o(e){u=e.target.result,l&&i(u,l,d)}function s(){if(!u.length)return i();var n,s=u[u.length-1];if(t&&t.upper)try{n=IDBKeyRange.bound(s,t.upper,!0,t.upperOpen)}catch(e){if("DataError"===e.name&&0===e.code)return i()}else n=IDBKeyRange.lowerBound(s,!0);t=n,u=null,l=null,e.getAll(t,r).onsuccess=a,e.getAllKeys(t,r).onsuccess=o}function c(e){var t=e.target.result;if(!t)return i();i([t.key],[t.value],t)}var u,l,d,f="function"==typeof e.getAll&&"function"==typeof e.getAllKeys&&r>1&&!n;f?(d={continue:s},e.getAll(t,r).onsuccess=a,e.getAllKeys(t,r).onsuccess=o):n?e.openCursor(t,"prev").onsuccess=c:e.openCursor(t).onsuccess=c}function fn(e,t,n){function r(e){var t=e.target.result;t?(i.push(t.value),t.continue()):n({target:{result:i}})}if("function"==typeof e.getAll)return void(e.getAll(t).onsuccess=n);var i=[];e.openCursor(t).onsuccess=r}function hn(e,t,n,r,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(e){return{error:e}}return null}function pn(e,t,n){function r(t,n,r){var i=t.id+"::"+r;C.get(i).onsuccess=function(r){if(n.doc=rn(r.target.result),e.conflicts){var i=X(t);i.length&&(n.doc._conflicts=i)}on(n.doc,e,_)}}function i(t,n){var i={id:n.id,key:n.id,value:{rev:t}},a=n.deleted;"ok"===e.deleted?(x.push(i),a?(i.value.deleted=!0,i.doc=null):e.include_docs&&r(n,i,t)):!a&&h--<=0&&(x.push(i),e.include_docs&&r(n,i,t))}function a(e){for(var t=0,n=e.length;t<n&&x.length!==p;t++){var r=e[t],a=nn(r);i(a.winningRev,a)}}function o(e,t,n){n&&(a(t),x.length<p&&n.continue())}function s(t){var n=t.target.result;e.descending&&(n=n.reverse()),a(n)}function c(){n(null,{total_rows:w,offset:e.skip,rows:x})}function u(){e.attachments?sn(x,e.binary).then(c):c()}var l="startkey"in e&&e.startkey,d="endkey"in e&&e.endkey,f="key"in e&&e.key,h=e.skip||0,p="number"==typeof e.limit?e.limit:-1,v=!1!==e.inclusive_end,g=hn(l,d,v,f,e.descending),m=g&&g.error;if(m&&("DataError"!==m.name||0!==m.code))return n(A(Wi,m.name,m.message));var y=[ga,ma,_a];e.attachments&&y.push(ya);var b=un(t,y,"readonly");if(b.error)return n(b.error);var _=b.txn;_.oncomplete=u,_.onabort=en(n);var w,S=_.objectStore(ga),k=_.objectStore(ma),T=_.objectStore(_a),C=k.index("_doc_id_rev"),x=[];return T.get(_a).onsuccess=function(e){w=e.target.result.docCount},m||0===p?void 0:-1===p?fn(S,g,s):void dn(S,g,e.descending,p+h,o)}function vn(e){return new Ci(function(t){var n=$t([""]);e.objectStore(Sa).put(n,"key").onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)},e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)}}).catch(function(){return!1})}function gn(e,t){e.objectStore(ga).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(e){t(e.target.result)}}function mn(e,t,n,r){try{e(t,n)}catch(t){r.emit("error",t)}}function yn(){!Ta&&Ca.length&&(Ta=!0,Ca.shift()())}function bn(e,t,n){Ca.push(function(){e(function(e,r){mn(t,e,r,n),Ta=!1,yi()(function(){yn(n)})})}),yn()}function _n(e,t,n,r){function i(t,n,r){function i(t,n){var r=e.processChange(n,t,e);f=r.seq=t.seq;var i=w(r);if("object"==typeof i)return e.complete(i);i&&(_++,p&&b.push(r),e.attachments&&e.include_docs?on(n,e,v,function(){sn([r],e.binary).then(function(){e.onChange(r)})}):e.onChange(r))}function a(){for(var e=0,t=s.length;e<t&&_!==h;e++){var n=s[e];if(n){i(c[e],n)}}_!==h&&r.continue()}if(r&&t.length){var s=new Array(t.length),c=new Array(t.length),u=0;n.forEach(function(e,n){o(rn(e),t[n],function(e,r){c[n]=e,s[n]=r,++u===t.length&&a()})})}}function a(e,t,n,r){if(n.seq!==t)return r();if(n.winningRev===e._rev)return r(n,e);var i=e._id+"::"+n.winningRev;y.get(i).onsuccess=function(e){r(n,rn(e.target.result))}}function o(e,t,n){if(d&&!d.has(e._id))return n();var r=S.get(e._id);if(r)return a(e,t,r,n);m.get(e._id).onsuccess=function(i){r=nn(i.target.result),S.set(e._id,r),a(e,t,r,n)}}function c(){e.complete(null,{results:b,last_seq:f})}function u(){!e.continuous&&e.attachments?sn(b).then(c):c()}if(e=s(e),e.continuous){var l=n+":"+ta();return ka.addListener(n,l,t,e),ka.notify(n),{cancel:function(){ka.removeListener(n,l)}}}var d=e.doc_ids&&new Pi(e.doc_ids);e.since=e.since||0;var f=e.since,h="limit"in e?e.limit:-1;0===h&&(h=1);var p;p="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var v,g,m,y,b=[],_=0,w=R(e),S=new $i,k=[ga,ma];e.attachments&&k.push(ya);var T=un(r,k,"readonly");if(T.error)return e.complete(T.error);v=T.txn,v.onabort=en(e.complete),v.oncomplete=u,g=v.objectStore(ma),m=v.objectStore(ga),y=g.index("_doc_id_rev"),dn(g,e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null,e.descending,h,i)}function wn(e,t){var n=this;bn(function(t){Sn(n,e,t)},t,n.constructor)}function Sn(e,t,n){function r(e){var t=e.createObjectStore(ga,{keyPath:"id"});e.createObjectStore(ma,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(ya,{keyPath:"digest"}),e.createObjectStore(_a,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(Sa),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(wa,{keyPath:"_id"});var n=e.createObjectStore(ba,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}function i(e,t){var n=e.objectStore(ga);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(e){var r=e.target.result;if(r){var i=r.value,a=le(i);i.deletedOrLocal=a?"1":"0",n.put(i),r.continue()}else t()}}function a(e){e.createObjectStore(wa,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function o(e,t){var n=e.objectStore(wa),r=e.objectStore(ga),i=e.objectStore(ma);r.openCursor().onsuccess=function(e){var a=e.target.result;if(a){var o=a.value,s=o.id,c=de(s),u=W(o);if(c){var l=s+"::"+u,d=s+"::",f=s+"::~",h=i.index("_doc_id_rev"),p=IDBKeyRange.bound(d,f,!1,!1),v=h.openCursor(p);v.onsuccess=function(e){if(v=e.target.result){var t=v.value;t._doc_id_rev===l&&n.put(t),i.delete(v.primaryKey),v.continue()}else r.delete(a.primaryKey),a.continue()}}else a.continue()}else t&&t()}}function s(e){var t=e.createObjectStore(ba,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}function c(e,t){var n=e.objectStore(ma),r=e.objectStore(ya),i=e.objectStore(ba);r.count().onsuccess=function(e){if(!e.target.result)return t();n.openCursor().onsuccess=function(e){var n=e.target.result;if(!n)return t();for(var r=n.value,a=n.primaryKey,o=Object.keys(r._attachments||{}),s={},c=0;c<o.length;c++)s[r._attachments[o[c]].digest]=!0;var u=Object.keys(s);for(c=0;c<u.length;c++){var l=u[c];i.put({seq:a,digestSeq:l+"::"+a})}n.continue()}}}function l(e){function t(e){return e.data?nn(e):(e.deleted="1"===e.deletedOrLocal,e)}var n=e.objectStore(ma),r=e.objectStore(ga);r.openCursor().onsuccess=function(e){function i(){var e=s.id+"::",t=s.id+"::￿",r=n.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,t)),i=0;r.onsuccess=function(e){var t=e.target.result;if(!t)return s.seq=i,a();var n=t.primaryKey;n>i&&(i=n),t.continue()}}function a(){var e=tn(s,s.winningRev,s.deleted);r.put(e).onsuccess=function(){o.continue()}}var o=e.target.result;if(o){var s=t(o.value);if(s.winningRev=s.winningRev||W(s),s.seq)return a();i()}}}var d=t.name,f=null;e._meta=null,e._remote=!1,e.type=function(){return"idb"},e._id=u(function(t){t(null,e._meta.instanceId)}),e._bulkDocs=function(n,r,i){ln(t,n,r,e,f,i)},e._get=function(e,t,n){function r(){n(o,{doc:i,metadata:a,ctx:s})}var i,a,o,s=t.ctx;if(!s){var c=un(f,[ga,ma,ya],"readonly");if(c.error)return n(c.error);s=c.txn}s.objectStore(ga).get(e).onsuccess=function(e){if(!(a=nn(e.target.result)))return o=A(ji,"missing"),r();var n;if(t.rev)n=t.latest?fe(t.rev,a):t.rev;else{n=a.winningRev;if(le(a))return o=A(ji,"deleted"),r()}var c=s.objectStore(ma),u=a.id+"::"+n;c.index("_doc_id_rev").get(u).onsuccess=function(e){if(i=e.target.result,i&&(i=rn(i)),!i)return o=A(ji,"missing"),r();r()}}},e._getAttachment=function(e,t,n,r,i){var a;if(r.ctx)a=r.ctx;else{var o=un(f,[ga,ma,ya],"readonly");if(o.error)return i(o.error);a=o.txn}var s=n.digest,c=n.content_type;a.objectStore(ya).get(s).onsuccess=function(e){an(e.target.result.body,c,r.binary,function(e){i(null,e)})}},e._info=function(t){var n,r,i=un(f,[_a,ma],"readonly");if(i.error)return t(i.error);var a=i.txn;a.objectStore(_a).get(_a).onsuccess=function(e){r=e.target.result.docCount},a.objectStore(ma).openCursor(null,"prev").onsuccess=function(e){var t=e.target.result;n=t?t.key:0},a.oncomplete=function(){t(null,{doc_count:r,update_seq:n,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(e,t){pn(e,f,t)},e._changes=function(t){return _n(t,e,d,f)},e._close=function(e){f.close(),xa.delete(d),e()},e._getRevisionTree=function(e,t){var n=un(f,[ga],"readonly");if(n.error)return t(n.error);n.txn.objectStore(ga).get(e).onsuccess=function(e){var n=nn(e.target.result);n?t(null,n.rev_tree):t(A(ji))}},e._doCompaction=function(e,t,n){var r=[ga,ma,ya,ba],i=un(f,r,"readwrite");if(i.error)return n(i.error);var a=i.txn;a.objectStore(ga).get(e).onsuccess=function(n){var r=nn(n.target.result);G(r.rev_tree,function(e,n,r,i,a){var o=n+"-"+r;-1!==t.indexOf(o)&&(a.status="missing")}),cn(t,e,a);var i=r.winningRev,o=r.deleted;a.objectStore(ga).put(tn(r,i,o))},a.onabort=en(n),a.oncomplete=function(){n()}},e._getLocal=function(e,t){var n=un(f,[wa],"readonly");if(n.error)return t(n.error);var r=n.txn,i=r.objectStore(wa).get(e);i.onerror=en(t),i.onsuccess=function(e){var n=e.target.result;n?(delete n._doc_id_rev,t(null,n)):t(A(ji))}},e._putLocal=function(e,t,n){"function"==typeof t&&(n=t,t={}),delete e._revisions;var r=e._rev,i=e._id;e._rev=r?"0-"+(parseInt(r.split("-")[1],10)+1):"0-1";var a,o=t.ctx;if(!o){var s=un(f,[wa],"readwrite");if(s.error)return n(s.error);o=s.txn,o.onerror=en(n),o.oncomplete=function(){a&&n(null,a)}}var c,u=o.objectStore(wa);r?(c=u.get(i),c.onsuccess=function(i){var o=i.target.result;if(o&&o._rev===r){u.put(e).onsuccess=function(){a={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,a)}}else n(A(Di))}):(c=u.add(e),c.onerror=function(e){n(A(Di)),e.preventDefault(),e.stopPropagation()},c.onsuccess=function(){a={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,a)})},e._removeLocal=function(e,t,n){"function"==typeof t&&(n=t,t={});var r=t.ctx;if(!r){var i=un(f,[wa],"readwrite");if(i.error)return n(i.error);r=i.txn,r.oncomplete=function(){a&&n(null,a)}}var a,o=e._id,s=r.objectStore(wa),c=s.get(o);c.onerror=en(n),c.onsuccess=function(r){var i=r.target.result;i&&i._rev===e._rev?(s.delete(o),a={ok:!0,id:o,rev:"0-0"},t.ctx&&n(null,a)):n(A(ji))}},e._destroy=function(e,t){ka.removeAllListeners(d);var n=Ea.get(d);n&&n.result&&(n.result.close(),xa.delete(d));var r=indexedDB.deleteDatabase(d);r.onsuccess=function(){Ea.delete(d),S()&&d in localStorage&&delete localStorage[d],t(null,{ok:!0})},r.onerror=en(t)};var h=xa.get(d);if(h)return f=h.idb,e._meta=h.global,yi()(function(){n(null,e)});var p;p=t.storage?kn(d,t.storage):indexedDB.open(d,va),Ea.set(d,p),p.onupgradeneeded=function(e){function t(){var e=d[f-1];f++,e&&e(u,t)}var n=e.target.result;if(e.oldVersion<1)return r(n);var u=e.currentTarget.transaction;e.oldVersion<3&&a(n),e.oldVersion<4&&s(n);var d=[i,o,c,l],f=e.oldVersion;t()},p.onsuccess=function(t){function r(){void 0!==s&&l&&(e._meta={name:d,instanceId:c,blobSupport:s},xa.set(d,{idb:f,global:e._meta}),n(null,e))}function i(){if(void 0!==o&&void 0!==a){var e=d+"_id";e in a?c=a[e]:a[e]=c=ta(),a.docCount=o,u.objectStore(_a).put(a)}}f=t.target.result,f.onversionchange=function(){f.close(),xa.delete(d)},f.onabort=function(e){C("error","Database has a global failure",e.target.error),f.close(),xa.delete(d)};var a,o,s,c,u=f.transaction([_a,Sa,ga],"readwrite"),l=!1;u.objectStore(_a).get(_a).onsuccess=function(e){a=e.target.result||{id:_a},i()},gn(u,function(e){o=e,i()}),ca||(ca=vn(u)),ca.then(function(e){s=e,r()}),u.oncomplete=function(){l=!0,r()}},p.onerror=function(){var e="Failed to open indexedDB, are you in private browsing mode?";C("error",e),n(A(Wi,e))}}function kn(e,t){try{return indexedDB.open(e,{version:va,storage:t})}catch(t){return indexedDB.open(e,va)}}function Tn(e){return decodeURIComponent(escape(e))}function Cn(e){return e<65?e-48:e-55}function xn(e,t,n){for(var r="";t<n;)r+=String.fromCharCode(Cn(e.charCodeAt(t++))<<4|Cn(e.charCodeAt(t++)));return r}function En(e,t,n){for(var r="";t<n;)r+=String.fromCharCode(Cn(e.charCodeAt(t+2))<<12|Cn(e.charCodeAt(t+3))<<8|Cn(e.charCodeAt(t))<<4|Cn(e.charCodeAt(t+1))),t+=4;return r}function Pn(e,t){return"UTF-8"===t?Tn(xn(e,0,e.length)):En(e,0,e.length)}function $n(e){return"'"+e+"'"}function An(e){return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function On(e){return e.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function In(e){return delete e._id,delete e._rev,JSON.stringify(e)}function Rn(e,t,n){return e=JSON.parse(e),e._id=t,e._rev=n,e}function Ln(e){for(var t="(";e--;)t+="?",e&&(t+=",");return t+")"}function jn(e,t,n,r,i){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(i?" ORDER BY "+i:"")}function Dn(e,t,n){function r(){++a===e.length&&i()}function i(){if(o.length){var e="SELECT DISTINCT digest AS digest FROM "+ja+" WHERE seq IN "+Ln(o.length);n.executeSql(e,o,function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).digest);if(n.length){var i="DELETE FROM "+ja+" WHERE seq IN ("+o.map(function(){return"?"}).join(",")+")";e.executeSql(i,o,function(e){var t="SELECT digest FROM "+ja+" WHERE digest IN ("+n.map(function(){return"?"}).join(",")+")";e.executeSql(t,n,function(e,t){for(var r=new Pi,i=0;i<t.rows.length;i++)r.add(t.rows.item(i).digest);n.forEach(function(t){r.has(t)||(e.executeSql("DELETE FROM "+ja+" WHERE digest=?",[t]),e.executeSql("DELETE FROM "+Ia+" WHERE digest=?",[t]))})})})}})}}if(e.length){var a=0,o=[];e.forEach(function(e){var i="SELECT seq FROM "+Oa+" WHERE doc_id=? AND rev=?";n.executeSql(i,[t,e],function(e,t){if(!t.rows.length)return r();var n=t.rows.item(0).seq;o.push(n),e.executeSql("DELETE FROM "+Oa+" WHERE seq=?",[n],r)})})}}function Nn(e){return function(t){C("error","WebSQL threw an error",t);var n=t&&t.constructor.toString().match(/function ([^(]+)/),r=n&&n[1]||t.type,i=t.target||t.message;e(A(Gi,i,r))}}function Un(e){return"size"in e?1e6*e.size:"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent)?5e6:1}function Mn(e,t,n,r,i,a,o){function s(){if(b)return o(b);a.notify(r._name),o(null,_)}function c(e,t){var n="SELECT count(*) as cnt FROM "+Ia+" WHERE digest=?";y.executeSql(n,[e],function(n,r){if(0===r.rows.item(0).cnt){var i=A(Qi,"unknown stub attachment with digest "+e);t(i)}else t()})}function u(e){function t(){++i===n.length&&e(r)}var n=[];if(g.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var r=e.data._attachments[t];r.stub&&n.push(r.digest)})}),!n.length)return e();var r,i=0;n.forEach(function(e){c(e,function(e){e&&!r&&(r=e),t()})})}function l(e,t,n,i,a,o,s,c){function u(){function t(e,t){function r(){return++a===o.length&&t(),!1}function i(t){var i="INSERT INTO "+ja+" (digest, seq) VALUES (?,?)",a=[n._attachments[t].digest,e];y.executeSql(i,a,r,r)}var a=0,o=Object.keys(n._attachments||{});if(!o.length)return t();for(var s=0;s<o.length;s++)i(o[s])}var n=e.data,r=i?1:0,a=n._id,o=n._rev,s=In(n),c="INSERT INTO "+Oa+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",u=[a,o,s,r];y.executeSql(c,u,function(e,n){var r=n.insertId;t(r,function(){f(e,r)})},function(){var e=jn("seq",Oa,null,"doc_id=? AND rev=?");return y.executeSql(e,[a,o],function(e,n){var i=n.rows.item(0).seq,c="UPDATE "+Oa+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",u=[s,r,a,o];e.executeSql(c,u,function(e){t(i,function(){f(e,i)})})}),!1})}function l(e){p||(e?(p=e,c(p)):v===g.length&&u())}function d(e){v++,l(e)}function f(n,i){var o=e.metadata.id,u=e.stemmedRevs||[];a&&r.auto_compaction&&(u=J(e.metadata).concat(u)),u.length&&Dn(u,o,n),e.metadata.seq=i;var l=e.metadata.rev;delete e.metadata.rev;var d=a?"UPDATE "+Aa+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+Oa+" WHERE doc_id="+Aa+".id AND rev=?) WHERE id=?":"INSERT INTO "+Aa+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",f=Zt(e.metadata),h=a?[f,i,t,o]:[o,i,i,f];n.executeSql(d,h,function(){_[s]={ok:!0,id:e.metadata.id,rev:l},w.set(o,e.metadata),c()})}var p=null,v=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev;var g=Object.keys(e.data._attachments||{});i&&(e.data._deleted=!0),g.forEach(function(n){var r=e.data._attachments[n];if(r.stub)v++,l();else{var i=r.data;delete r.data,r.revpos=parseInt(t,10);h(r.digest,i,d)}}),g.length||u()}function d(){Jt(e.revs_limit,g,r,w,y,_,l,n)}function f(e){function t(){++n===g.length&&e()}if(!g.length)return e();var n=0;g.forEach(function(e){if(e._id&&de(e._id))return t();var n=e.metadata.id;y.executeSql("SELECT json FROM "+Aa+" WHERE id = ?",[n],function(e,r){if(r.rows.length){var i=Kt(r.rows.item(0).json);w.set(n,i)}t()})})}function h(e,t,n){var r="SELECT digest FROM "+Ia+" WHERE digest=?";y.executeSql(r,[e],function(i,a){if(a.rows.length)return n();r="INSERT INTO "+Ia+" (digest, body, escaped) VALUES (?,?,1)",i.executeSql(r,[e,An(t)],function(){n()},function(){return n(),!1})})}var p=n.new_edits,v=t.docs,g=v.map(function(e){return e._id&&de(e._id)?e:Pt(e,p)}),m=g.filter(function(e){return e.error});if(m.length)return o(m[0]);var y,b,_=new Array(g.length),w=new $i;Yt(g,"binary",function(e){if(e)return o(e);i.transaction(function(e){y=e,u(function(e){e?b=e:f(d)})},Nn(o),s)})}function Fn(e){return e.websql(e.name,e.version,e.description,e.size)}function Bn(e){try{return{db:Fn(e)}}catch(e){return{error:e}}}function qn(e){var t=Da.get(e.name);return t||(t=Bn(e),Da.set(e.name,t)),t}function Hn(e,t,n,r,i){function a(){++c===s.length&&i&&i()}function o(e,i){var o=e._attachments[i],s={binary:t.binary,ctx:r};n._getAttachment(e._id,i,o,s,function(t,n){e._attachments[i]=Ri(m(o,["digest","content_type"]),{data:n}),a()})}var s=Object.keys(e._attachments||{});if(!s.length)return i&&i();var c=0;s.forEach(function(n){t.attachments&&t.include_docs?o(e,n):(e._attachments[n].stub=!0,a())})}function Vn(e,t){function n(){S()&&(window.localStorage["_pouch__websqldb_"+_._name]=!0),t(null,_)}function r(e,t){e.executeSql(Ba),e.executeSql("ALTER TABLE "+Oa+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){e.executeSql(Ma),e.executeSql("ALTER TABLE "+Aa+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){e.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+Aa+" (local, id)");var n="SELECT "+Aa+".winningseq AS seq, "+Aa+".json AS metadata FROM "+Oa+" JOIN "+Aa+" ON "+Oa+".seq = "+Aa+".winningseq";e.executeSql(n,[],function(e,n){for(var r=[],i=[],a=0;a<n.rows.length;a++){var o=n.rows.item(a),s=o.seq,c=JSON.parse(o.metadata);le(c)&&r.push(s),de(c.id)&&i.push(c.id)}e.executeSql("UPDATE "+Aa+"SET local = 1 WHERE id IN "+Ln(i.length),i,function(){e.executeSql("UPDATE "+Oa+" SET deleted = 1 WHERE seq IN "+Ln(r.length),r,t)})})})})}function i(e,t){var n="CREATE TABLE IF NOT EXISTS "+Ra+" (id UNIQUE, rev, json)";e.executeSql(n,[],function(){var n="SELECT "+Aa+".id AS id, "+Oa+".json AS data FROM "+Oa+" JOIN "+Aa+" ON "+Oa+".seq = "+Aa+".winningseq WHERE local = 1";e.executeSql(n,[],function(e,n){function r(){if(!i.length)return t(e);var n=i.shift(),a=JSON.parse(n.data)._rev;e.executeSql("INSERT INTO "+Ra+" (id, rev, json) VALUES (?,?,?)",[n.id,a,n.data],function(e){e.executeSql("DELETE FROM "+Aa+" WHERE id=?",[n.id],function(e){e.executeSql("DELETE FROM "+Oa+" WHERE seq=?",[n.seq],function(){r()})})})}for(var i=[],a=0;a<n.rows.length;a++)i.push(n.rows.item(a));r()})})}function a(e,t){function n(n){function r(){if(!n.length)return t(e);var i=n.shift(),a=Pn(i.hex,b),o=a.lastIndexOf("::"),s=a.substring(0,o),c=a.substring(o+2),u="UPDATE "+Oa+" SET doc_id=?, rev=? WHERE doc_id_rev=?";e.executeSql(u,[s,c,a],function(){r()})}r()}var r="ALTER TABLE "+Oa+" ADD COLUMN doc_id";e.executeSql(r,[],function(e){var t="ALTER TABLE "+Oa+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(Fa,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+Oa;e.executeSql(t,[],function(e,t){for(var r=[],i=0;i<t.rows.length;i++)r.push(t.rows.item(i));n(r)})})})})}function o(e,t){function n(e){var n="SELECT COUNT(*) AS cnt FROM "+Ia;e.executeSql(n,[],function(e,n){function r(){var n=jn(za+", "+Aa+".id AS id",[Aa,Oa],Va,null,Aa+".id ");n+=" LIMIT "+a+" OFFSET "+i,i+=a,e.executeSql(n,[],function(e,n){function i(e,t){var n=a[e]=a[e]||[];-1===n.indexOf(t)&&n.push(t)}if(!n.rows.length)return t(e);for(var a={},o=0;o<n.rows.length;o++)for(var s=n.rows.item(o),c=Rn(s.data,s.id,s.rev),u=Object.keys(c._attachments||{}),l=0;l<u.length;l++){var d=c._attachments[u[l]];i(d.digest,s.seq)}var f=[];if(Object.keys(a).forEach(function(e){a[e].forEach(function(t){f.push([e,t])})}),!f.length)return r();var h=0;f.forEach(function(t){var n="INSERT INTO "+ja+" (digest, seq) VALUES (?,?)";e.executeSql(n,t,function(){++h===f.length&&r()})})})}if(!n.rows.item(0).cnt)return t(e);var i=0,a=10;r()})}var r="CREATE TABLE IF NOT EXISTS "+ja+" (digest, seq INTEGER)";e.executeSql(r,[],function(e){e.executeSql(Ha,[],function(e){e.executeSql(qa,[],n)})})}function c(e,t){var n="ALTER TABLE "+Ia+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";e.executeSql(n,[],t)}function l(e,t){var n="ALTER TABLE "+Aa+" ADD COLUMN max_seq INTEGER";e.executeSql(n,[],function(e){var n="UPDATE "+Aa+" SET max_seq=(SELECT MAX(seq) FROM "+Oa+" WHERE doc_id=id)";e.executeSql(n,[],function(e){var n="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+Aa+" (max_seq)";e.executeSql(n,[],t)})})}function d(e,t){e.executeSql('SELECT HEX("a") AS hex',[],function(e,n){var r=n.rows.item(0).hex;b=2===r.length?"UTF-8":"UTF-16",t()})}function f(){for(;T.length>0;){T.pop()(null,w)}}function h(e,t){if(0===t){var n="CREATE TABLE IF NOT EXISTS "+La+" (dbid, db_version INTEGER)",s="CREATE TABLE IF NOT EXISTS "+Ia+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",u="CREATE TABLE IF NOT EXISTS "+ja+" (digest, seq INTEGER)",d="CREATE TABLE IF NOT EXISTS "+Aa+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",h="CREATE TABLE IF NOT EXISTS "+Oa+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",p="CREATE TABLE IF NOT EXISTS "+Ra+" (id UNIQUE, rev, json)";e.executeSql(s),e.executeSql(p),e.executeSql(u,[],function(){e.executeSql(qa),e.executeSql(Ha)}),e.executeSql(d,[],function(){e.executeSql(Ba),e.executeSql(h,[],function(){e.executeSql(Ma),e.executeSql(Fa),e.executeSql(n,[],function(){var t="INSERT INTO "+La+" (db_version, dbid) VALUES (?,?)";w=ta();var n=[$a,w];e.executeSql(t,n,function(){f()})})})})}else{var v=function(){t<$a&&e.executeSql("UPDATE "+La+" SET db_version = "+$a);var n="SELECT dbid FROM "+La;e.executeSql(n,[],function(e,t){w=t.rows.item(0).dbid,f()})},g=[r,i,a,o,c,l,v],m=t,y=function(e){g[m-1](e,y),m++};y(e)}}function p(){E.transaction(function(e){d(e,function(){v(e)})},Nn(t),n)}function v(e){var t="SELECT sql FROM sqlite_master WHERE tbl_name = "+La;e.executeSql(t,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+La,[],function(e,t){h(e,t.rows.item(0).db_version)}):e.executeSql("ALTER TABLE "+La+" ADD COLUMN db_version INTEGER",[],function(){h(e,1)}):h(e,0)})}function g(e,t){var n="SELECT MAX(seq) AS seq FROM "+Oa;e.executeSql(n,[],function(e,n){var r=n.rows.item(0).seq||0;t(r)})}function m(e,t){var n=jn("COUNT("+Aa+".id) AS 'num'",[Aa,Oa],Va,Oa+".deleted=0");e.executeSql(n,[],function(e,n){t(n.rows.item(0).num)})}function y(e,t,n,r,i){var a=jn(za,[Aa,Oa],Va,Aa+".id=?"),o=[t];e.executeSql(a,o,function(e,t){if(!t.rows.length){var a=A(ji,"missing");return i(a)}var o=t.rows.item(0),s=Kt(o.metadata);r(fe(n,s))})}var b,_=this,w=null,k=Un(e),T=[];_._name=e.name;var C=Ri({},e,{version:Ua,description:e.name,size:k}),x=qn(C);if(x.error)return Nn(t)(x.error);var E=x.db;"function"!=typeof E.readTransaction&&(E.readTransaction=E.transaction),p(),_._remote=!1,_.type=function(){return"websql"},_._id=u(function(e){e(null,w)}),_._info=function(e){var t,n;E.readTransaction(function(e){g(e,function(e){t=e}),m(e,function(e){n=e})},Nn(e),function(){e(null,{doc_count:n,update_seq:t,websql_encoding:b})})},_._bulkDocs=function(t,n,r){Mn(e,t,n,_,E,Na,r)},_._get=function(e,t,n){function r(e){n(e,{doc:i,metadata:a,ctx:o})}var i,a,o=t.ctx;if(!o)return E.readTransaction(function(r){_._get(e,Ri({ctx:r},t),n)});var s,c;if(t.rev){if(t.latest)return void y(o,e,t.rev,function(r){t.latest=!1,t.rev=r,_._get(e,t,n)},r);s=jn(za,[Aa,Oa],Aa+".id="+Oa+".doc_id",[Oa+".doc_id=?",Oa+".rev=?"]),c=[e,t.rev]}else s=jn(za,[Aa,Oa],Va,Aa+".id=?"),c=[e];o.executeSql(s,c,function(e,n){if(!n.rows.length){return r(A(ji,"missing"))}var o=n.rows.item(0);if(a=Kt(o.metadata),o.deleted&&!t.rev){return r(A(ji,"deleted"))}i=Rn(o.data,a.id,o.rev),r()})},_._allDocs=function(e,t){var n,r=[],i="startkey"in e&&e.startkey,a="endkey"in e&&e.endkey,o="key"in e&&e.key,s="descending"in e&&e.descending,c="limit"in e?e.limit:-1,u="skip"in e?e.skip:0,l=!1!==e.inclusive_end,d=[],f=[];if(!1!==o)f.push(Aa+".id = ?"),d.push(o);else if(!1!==i||!1!==a){if(!1!==i&&(f.push(Aa+".id "+(s?"<=":">=")+" ?"),d.push(i)),!1!==a){var h=s?">":"<";l&&(h+="="),f.push(Aa+".id "+h+" ?"),d.push(a)}!1!==o&&(f.push(Aa+".id = ?"),d.push(o))}"ok"!==e.deleted&&f.push(Oa+".deleted = 0"),E.readTransaction(function(t){if(m(t,function(e){n=e}),0!==c){var i=jn(za,[Aa,Oa],Va,f,Aa+".id "+(s?"DESC":"ASC"));i+=" LIMIT "+c+" OFFSET "+u,t.executeSql(i,d,function(t,n){for(var i=0,a=n.rows.length;i<a;i++){var o=n.rows.item(i),s=Kt(o.metadata),c=s.id,u=Rn(o.data,c,o.rev),l=u._rev,d={id:c,key:c,value:{rev:l}};if(e.include_docs){if(d.doc=u,d.doc._rev=l,e.conflicts){var f=X(s);f.length&&(d.doc._conflicts=f)}Hn(d.doc,e,_,t)}if(o.deleted){if("ok"!==e.deleted)continue;d.value.deleted=!0,d.doc=null}r.push(d)}})}},Nn(t),function(){t(null,{total_rows:n,offset:e.skip,rows:r})})},_._changes=function(e){function t(){var t=Aa+".json AS metadata, "+Aa+".max_seq AS maxSeq, "+Oa+".json AS winningDoc, "+Oa+".rev AS winningRev ",n=Aa+" JOIN "+Oa,s=Aa+".id="+Oa+".doc_id AND "+Aa+".winningseq="+Oa+".seq",u=["maxSeq > ?"],l=[e.since];e.doc_ids&&(u.push(Aa+".id IN "+Ln(e.doc_ids.length)),l=l.concat(e.doc_ids));var d="maxSeq "+(r?"DESC":"ASC"),f=jn(t,n,s,u,d),h=R(e);e.view||e.filter||(f+=" LIMIT "+i);var p=e.since||0;E.readTransaction(function(t){t.executeSql(f,l,function(t,n){function r(t){return function(){e.onChange(t)}}for(var s=0,u=n.rows.length;s<u;s++){var l=n.rows.item(s),d=Kt(l.metadata);p=l.maxSeq;var f=Rn(l.winningDoc,d.id,l.winningRev),v=e.processChange(f,d,e);v.seq=l.maxSeq;var g=h(v);if("object"==typeof g)return e.complete(g);if(g&&(c++,a&&o.push(v),e.attachments&&e.include_docs?Hn(f,e,_,t,r(v)):r(v)()),c===i)break}})},Nn(e.complete),function(){e.continuous||e.complete(null,{results:o,last_seq:p})})}if(e=s(e),e.continuous){var n=_._name+":"+ta();return Na.addListener(_._name,n,_,e),Na.notify(_._name),{cancel:function(){Na.removeListener(_._name,n)}}}var r=e.descending;e.since=e.since&&!r?e.since:0;var i="limit"in e?e.limit:-1;0===i&&(i=1);var a;a="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var o=[],c=0;t()},_._close=function(e){e()},_._getAttachment=function(e,t,n,r,i){var a,o=r.ctx,s=n.digest,c=n.content_type,u="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+Ia+" WHERE digest=?";o.executeSql(u,[s],function(e,t){var n=t.rows.item(0),o=n.escaped?On(n.body):Pn(n.body,b);a=r.binary?Ot(o,c):fa(o),i(null,a)})},_._getRevisionTree=function(e,t){E.readTransaction(function(n){var r="SELECT json AS metadata FROM "+Aa+" WHERE id = ?";n.executeSql(r,[e],function(e,n){if(n.rows.length){var r=Kt(n.rows.item(0).metadata);t(null,r.rev_tree)}else t(A(ji))})})},_._doCompaction=function(e,t,n){if(!t.length)return n();E.transaction(function(n){var r="SELECT json AS metadata FROM "+Aa+" WHERE id = ?";n.executeSql(r,[e],function(n,r){var i=Kt(r.rows.item(0).metadata);G(i.rev_tree,function(e,n,r,i,a){var o=n+"-"+r;-1!==t.indexOf(o)&&(a.status="missing")});var a="UPDATE "+Aa+" SET json = ? WHERE id = ?";n.executeSql(a,[Zt(i),e])}),Dn(t,e,n)},Nn(n),function(){n()})},_._getLocal=function(e,t){E.readTransaction(function(n){var r="SELECT json, rev FROM "+Ra+" WHERE id=?";n.executeSql(r,[e],function(n,r){if(r.rows.length){var i=r.rows.item(0),a=Rn(i.json,e,i.rev);t(null,a)}else t(A(ji))})})},_._putLocal=function(e,t,n){function r(e){var r,u;a?(r="UPDATE "+Ra+" SET rev=?, json=? WHERE id=? AND rev=?",u=[i,c,o,a]):(r="INSERT INTO "+Ra+" (id, rev, json) VALUES (?,?,?)",u=[o,i,c]),e.executeSql(r,u,function(e,r){r.rowsAffected?(s={ok:!0,id:o,rev:i},t.ctx&&n(null,s)):n(A(Di))},function(){return n(A(Di)),!1})}"function"==typeof t&&(n=t,t={}),delete e._revisions;var i,a=e._rev,o=e._id;i=e._rev=a?"0-"+(parseInt(a.split("-")[1],10)+1):"0-1";var s,c=In(e);t.ctx?r(t.ctx):E.transaction(r,Nn(n),function(){s&&n(null,s)})},_._removeLocal=function(e,t,n){function r(r){var a="DELETE FROM "+Ra+" WHERE id=? AND rev=?",o=[e._id,e._rev];r.executeSql(a,o,function(r,a){if(!a.rowsAffected)return n(A(ji));i={ok:!0,id:e._id,rev:"0-0"},t.ctx&&n(null,i)})}"function"==typeof t&&(n=t,t={});var i;t.ctx?r(t.ctx):E.transaction(r,Nn(n),function(){i&&n(null,i)})},_._destroy=function(e,t){Na.removeAllListeners(_._name),E.transaction(function(e){[Aa,Oa,Ia,La,Ra,ja].forEach(function(t){e.executeSql("DROP TABLE IF EXISTS "+t,[])})},Nn(t),function(){S()&&(delete window.localStorage["_pouch__websqldb_"+_._name],delete window.localStorage[_._name]),t(null,{ok:!0})})}}function zn(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(e){return!1}}function Wn(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var e=S(),t="_pouch__websqldb_valid_"+navigator.userAgent;if(e&&localStorage[t])return"1"===localStorage[t];var n=zn();return e&&(localStorage[t]=n?"1":"0"),n}function Gn(){return"function"==typeof openDatabase&&Wn()}function Yn(e,t,n,r){return openDatabase(e,t,n,r)}function Qn(e,t){var n=Ri({websql:Yn},e);Vn.call(this,n,t)}function Xn(){for(var e={},t=new Ci(function(t,n){e.resolve=t,e.reject=n}),n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.promise=t,Ci.resolve().then(function(){return fetch.apply(null,n)}).then(function(t){e.resolve(t)}).catch(function(t){e.reject(t)}),e}function Jn(e,t){var n,r,i,a=new Headers,o={method:e.method,credentials:"include",headers:a};return e.json&&(a.set("Accept","application/json"),a.set("Content-Type",e.headers["Content-Type"]||"application/json")),e.body&&e.processData&&"string"!=typeof e.body?o.body=JSON.stringify(e.body):o.body="body"in e?e.body:null,Object.keys(e.headers).forEach(function(t){e.headers.hasOwnProperty(t)&&a.set(t,e.headers[t])}),n=Xn(e.url,o),e.timeout>0&&(r=setTimeout(function(){n.reject(new Error("Load timeout for resource: "+e.url))},e.timeout)),n.promise.then(function(t){return i={statusCode:t.status},e.timeout>0&&clearTimeout(r),i.statusCode>=200&&i.statusCode<300?e.binary?t.blob():t.text():t.json()}).then(function(e){i.statusCode>=200&&i.statusCode<300?t(null,i,e):(e.status=i.statusCode,t(e))}).catch(function(e){e||(e=new Error("canceled")),t(e)}),{abort:n.reject}}function Kn(e,t){var n,r,i=!1,a=function(){n.abort(),c()},o=function(){i=!0,n.abort(),c()},s={abort:a},c=function(){clearTimeout(r),s.abort=function(){},n&&(n.onprogress=void 0,n.upload&&(n.upload.onprogress=void 0),n.onreadystatechange=void 0,n=void 0)};n=e.xhr?new e.xhr:new XMLHttpRequest;try{n.open(e.method,e.url)}catch(e){return t(new Error(e.name||"Url is invalid"))}n.withCredentials=!("withCredentials"in e)||e.withCredentials,"GET"===e.method?delete e.headers["Content-Type"]:e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(n.responseType="arraybuffer"),"body"in e||(e.body=null);for(var u in e.headers)e.headers.hasOwnProperty(u)&&n.setRequestHeader(u,e.headers[u]);return e.timeout>0&&(r=setTimeout(o,e.timeout),n.onprogress=function(){clearTimeout(r),4!==n.readyState&&(r=setTimeout(o,e.timeout))},void 0!==n.upload&&(n.upload.onprogress=n.onprogress)),n.onreadystatechange=function(){if(4===n.readyState){var r={statusCode:n.status};if(n.status>=200&&n.status<300){var a;a=e.binary?$t([n.response||""],{type:n.getResponseHeader("Content-Type")}):n.responseText,t(null,r,a)}else{var o={};if(i)o=new Error("ETIMEDOUT"),o.code="ETIMEDOUT";else if("string"==typeof n.response)try{o=JSON.parse(n.response)}catch(e){}o.status=n.status,t(o)}c()}},e.body&&e.body instanceof Blob?Nt(e.body,function(e){n.send(e)}):n.send(e.body),s}function Zn(){try{return new XMLHttpRequest,!0}catch(e){return!1}}function er(e,t){return Ga||e.xhr?Kn(e,t):Jn(e,t)}function tr(){return""}function nr(e,t){function n(t,n,r){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){return r(e)}Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?O(e):e})),e.binary&&Ya(t,n),r(null,t,n)}return e=s(e),e=Ri({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},e),e.json&&(e.binary||(e.headers.Accept="application/json"),e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),er(e,function(r,i,a){if(r)return t(O(r));var o,s=i.headers&&i.headers["content-type"],c=a||tr();if(!e.binary&&(e.json||!e.processData)&&"object"!=typeof c&&(/json/.test(s)||/^[\s]*\{/.test(c)&&/\}[\s]*$/.test(c)))try{c=JSON.parse(c.toString())}catch(e){}i.statusCode>=200&&i.statusCode<300?n(c,i,t):(o=O(c),o.status=i.statusCode,t(o))})}function rr(e,t){var n=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",r=-1!==n.indexOf("safari")&&-1===n.indexOf("chrome"),i=-1!==n.indexOf("msie"),a=-1!==n.indexOf("edge"),o=r||(i||a)&&"GET"===e.method,s=!("cache"in e)||e.cache;if(!/^blob:/.test(e.url)&&(o||!s)){var c=-1!==e.url.indexOf("?");e.url+=(c?"&":"?")+"_nonce="+Date.now()}return nr(e,t)}function ir(e,t){return new Ci(function(n,r){function i(){l++,e[d++]().then(o,s)}function a(){++f===h?u?r(u):n():c()}function o(){l--,a()}function s(e){l--,u=u||e,a()}function c(){for(;l<t&&d<h;)i()}var u,l=0,d=0,f=0,h=e.length;c()})}function ar(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var n=t[e];n.data=It(n.data,n.content_type)})}function or(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function sr(e){return e._attachments&&Object.keys(e._attachments)?Ci.all(Object.keys(e._attachments).map(function(t){var n=e._attachments[t];if(n.data&&"string"!=typeof n.data)return new Ci(function(e){Dt(n.data,e)}).then(function(e){n.data=e})})):Ci.resolve()}function cr(e){if(!e.prefix)return!1;var t=B(e.prefix).protocol;return"http"===t||"https"===t}function ur(e,t){if(cr(t)){var n=t.name.substr(t.prefix.length);e=t.prefix+encodeURIComponent(n)}var r=B(e);(r.user||r.password)&&(r.auth={username:r.user,password:r.password});var i=r.path.replace(/(^\/|\/$)/g,"").split("/");return r.db=i.pop(),-1===r.db.indexOf("%")&&(r.db=encodeURIComponent(r.db)),r.path=i.join("/"),r}function lr(e,t){return dr(e,e.db+"/"+t)}function dr(e,t){var n=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+n+t}function fr(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function hr(e,t){function n(e,t,n){var r=e.ajax||{},i=Ri(s(f),r,t),a=s(f.headers||{});return i.headers=Ri(a,r.headers,t.headers||{}),c.constructor.listeners("debug").length&&c.constructor.emit("debug",["http",i.method,i.url]),c._ajax(i,n)}function r(e,t){return new Ci(function(r,i){n(e,t,function(e,t){if(e)return i(e);r(t)})})}function i(e,t){return d(e,hi()(function(e){a().then(function(){return t.apply(this,e)}).catch(function(t){e.pop()(t)})}))}function a(){return e.skipSetup||e.skip_setup?Ci.resolve():g||(g=r({},{method:"GET",url:l}).catch(function(e){return e&&e.status&&404===e.status?(P(404,"PouchDB is just detecting if the remote exists."),r({},{method:"PUT",url:l})):Ci.reject(e)}).catch(function(e){return!(!e||!e.status||412!==e.status)||Ci.reject(e)}),g.catch(function(){g=null}),g)}function o(e){return e.split("/").map(encodeURIComponent).join("/")}var c=this,u=ur(e.name,e),l=lr(u,"");e=s(e);var f=e.ajax||{};if(e.auth||u.auth){var h=e.auth||u.auth,p=h.username+":"+h.password,v=fa(unescape(encodeURIComponent(p)));f.headers=f.headers||{},f.headers.Authorization="Basic "+v}c._ajax=rr;var g;yi()(function(){t(null,c)}),c._remote=!0,c.type=function(){return"http"},c.id=i("id",function(e){n({},{method:"GET",url:dr(u,"")},function(t,n){var r=n&&n.uuid?n.uuid+u.db:lr(u,"");e(null,r)})}),c.request=i("request",function(e,t){e.url=lr(u,e.url),n({},e,t)}),c.compact=i("compact",function(e,t){"function"==typeof e&&(t=e,e={}),e=s(e),n(e,{url:lr(u,"_compact"),method:"POST"},function(){function n(){c.info(function(r,i){i&&!i.compact_running?t(null,{ok:!0}):setTimeout(n,e.interval||200)})}n()})}),c.bulkGet=d("bulkGet",function(e,t){function r(t){var r={};e.revs&&(r.revs=!0),e.attachments&&(r.attachments=!0),e.latest&&(r.latest=!0),n(e,{url:lr(u,"_bulk_get"+fr(r)),method:"POST",body:{docs:e.docs}},t)}function i(){function n(e){return function(n,r){s[e]=r.results,++o===i&&t(null,{results:L(s)})}}for(var r=Xa,i=Math.ceil(e.docs.length/r),o=0,s=new Array(i),c=0;c<i;c++){var u=m(e,["revs","attachments","latest"]);u.ajax=f,u.docs=e.docs.slice(c*r,Math.min(e.docs.length,(c+1)*r)),_(a,u,n(c))}}var a=this,o=dr(u,""),s=Za[o];"boolean"!=typeof s?r(function(e,n){e?(Za[o]=!1,P(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),i()):(Za[o]=!0,t(null,n))}):s?r(t):i()}),c._info=function(e){a().then(function(){n({},{method:"GET",url:lr(u,"")},function(t,n){if(t)return e(t);n.host=lr(u,""),e(null,n)})}).catch(e)},c.get=i("get",function(e,t,n){function i(e){function n(n){var a=i[n],s=or(e._id)+"/"+o(n)+"?rev="+e._rev;return r(t,{method:"GET",url:lr(u,s),binary:!0}).then(function(e){return t.binary?e:new Ci(function(t){Dt(e,t)})}).then(function(e){delete a.stub,delete a.length,a.data=e})}var i=e._attachments,a=i&&Object.keys(i);if(i&&a.length){return ir(a.map(function(e){return function(){return n(e)}}),5)}}function a(e){return Array.isArray(e)?Ci.all(e.map(function(e){if(e.ok)return i(e.ok)})):i(e)}"function"==typeof t&&(n=t,t={}),t=s(t);var c={};t.revs&&(c.revs=!0),t.revs_info&&(c.revs_info=!0),t.latest&&(c.latest=!0),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),c.open_revs=t.open_revs),t.rev&&(c.rev=t.rev),t.conflicts&&(c.conflicts=t.conflicts),e=or(e);var l={method:"GET",url:lr(u,e+fr(c))};r(t,l).then(function(e){return Ci.resolve().then(function(){if(t.attachments)return a(e)}).then(function(){n(null,e)})}).catch(function(t){t.docId=e,n(t)})}),c.remove=i("remove",function(e,t,r,i){var a;"string"==typeof t?(a={_id:e,_rev:t},"function"==typeof r&&(i=r,r={})):(a=e,"function"==typeof t?(i=t,r={}):(i=r,r=t));var o=a._rev||r.rev;n(r,{method:"DELETE",url:lr(u,or(a._id))+"?rev="+o},i)}),c.getAttachment=i("getAttachment",function(e,t,r,i){"function"==typeof r&&(i=r,r={});var a=r.rev?"?rev="+r.rev:"";n(r,{method:"GET",url:lr(u,or(e))+"/"+o(t)+a,binary:!0},i)}),c.removeAttachment=i("removeAttachment",function(e,t,r,i){n({},{method:"DELETE",url:lr(u,or(e)+"/"+o(t))+"?rev="+r},i)}),c.putAttachment=i("putAttachment",function(e,t,r,i,a,s){"function"==typeof a&&(s=a,a=i,i=r,r=null);var c=or(e)+"/"+o(t),l=lr(u,c);if(r&&(l+="?rev="+r),"string"==typeof i){var d;try{d=da(i)}catch(e){return s(A(Bi,"Attachment is not a valid base64 string"))}i=d?Ot(d,a):""}n({},{headers:{"Content-Type":a},method:"PUT",url:l,processData:!1,body:i,timeout:f.timeout||6e4},s)}),c._bulkDocs=function(e,t,r){e.new_edits=t.new_edits,a().then(function(){return Ci.all(e.docs.map(sr))}).then(function(){n(t,{method:"POST",url:lr(u,"_bulk_docs"),timeout:t.timeout,body:e},function(e,t){if(e)return r(e);t.forEach(function(e){e.ok=!0}),r(null,t)})}).catch(r)},c._put=function(e,t,r){a().then(function(){return sr(e)}).then(function(){n(t,{method:"PUT",url:lr(u,or(e._id)),body:e},function(t,n){if(t)return t.docId=e&&e._id,r(t);r(null,n)})}).catch(r)},c.allDocs=i("allDocs",function(e,t){"function"==typeof e&&(t=e,e={}),e=s(e);var n,i={},a="GET";e.conflicts&&(i.conflicts=!0),e.descending&&(i.descending=!0),e.include_docs&&(i.include_docs=!0),e.attachments&&(i.attachments=!0),e.key&&(i.key=JSON.stringify(e.key)),e.start_key&&(e.startkey=e.start_key),e.startkey&&(i.startkey=JSON.stringify(e.startkey)),e.end_key&&(e.endkey=e.end_key),e.endkey&&(i.endkey=JSON.stringify(e.endkey)),void 0!==e.inclusive_end&&(i.inclusive_end=!!e.inclusive_end),void 0!==e.limit&&(i.limit=e.limit),void 0!==e.skip&&(i.skip=e.skip);var o=fr(i);void 0!==e.keys&&(a="POST",n={keys:e.keys}),r(e,{method:a,url:lr(u,"_all_docs"+o),body:n}).then(function(n){e.include_docs&&e.attachments&&e.binary&&n.rows.forEach(ar),t(null,n)}).catch(t)}),c._changes=function(e){var t="batch_size"in e?e.batch_size:Qa;e=s(e),!e.continuous||"heartbeat"in e||(e.heartbeat=Ka);var r="timeout"in e?e.timeout:"timeout"in f?f.timeout:3e4;"timeout"in e&&e.timeout&&r-e.timeout<Ja&&(r=e.timeout+Ja),"heartbeat"in e&&e.heartbeat&&r-e.heartbeat<Ja&&(r=e.heartbeat+Ja);var i={};"timeout"in e&&e.timeout&&(i.timeout=e.timeout);var o,c=void 0!==e.limit&&e.limit;o="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var l=c;if(e.style&&(i.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(i.include_docs=!0),e.attachments&&(i.attachments=!0),e.continuous&&(i.feed="longpoll"),e.conflicts&&(i.conflicts=!0),e.descending&&(i.descending=!0),"heartbeat"in e&&e.heartbeat&&(i.heartbeat=e.heartbeat),e.filter&&"string"==typeof e.filter&&(i.filter=e.filter),e.view&&"string"==typeof e.view&&(i.filter="_view",i.view=e.view),e.query_params&&"object"==typeof e.query_params)for(var d in e.query_params)e.query_params.hasOwnProperty(d)&&(i[d]=e.query_params[d]);var h,p="GET";e.doc_ids?(i.filter="_doc_ids",p="POST",h={doc_ids:e.doc_ids}):e.selector&&(i.filter="_selector",p="POST",h={selector:e.selector});var v,g,m=function(o,s){if(!e.aborted){i.since=o,"object"==typeof i.since&&(i.since=JSON.stringify(i.since)),e.descending?c&&(i.limit=l):i.limit=!c||l>t?t:l;var d={method:p,url:lr(u,"_changes"+fr(i)),timeout:r,body:h};g=o,e.aborted||a().then(function(){v=n(e,d,s)}).catch(s)}},y={results:[]},b=function(n,r){if(!e.aborted){var i=0;if(r&&r.results){i=r.results.length,y.last_seq=r.last_seq;({}).query=e.query_params,r.results=r.results.filter(function(t){l--;var n=R(e)(t);return n&&(e.include_docs&&e.attachments&&e.binary&&ar(t),o&&y.results.push(t),e.onChange(t)),n})}else if(n)return e.aborted=!0,void e.complete(n);r&&r.last_seq&&(g=r.last_seq);var a=c&&l<=0||r&&i<t||e.descending;(!e.continuous||c&&l<=0)&&a?e.complete(null,y):yi()(function(){m(g,b)})}};return m(e.since||0,b),{cancel:function(){e.aborted=!0,v&&v.abort()}}},c.revsDiff=i("revsDiff",function(e,t,r){"function"==typeof t&&(r=t,t={}),n(t,{method:"POST",url:lr(u,"_revs_diff"),body:e},r)}),c._close=function(e){e()},c._destroy=function(e,t){n(e,{url:lr(u,""),method:"DELETE"},function(e,n){if(e&&e.status&&404!==e.status)return t(e);t(null,n)})}}function pr(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,pr)}catch(e){}}function vr(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,vr)}catch(e){}}function gr(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,gr)}catch(e){}}function mr(e,t){return t&&e.then(function(e){yi()(function(){t(null,e)})},function(e){yi()(function(){t(e)})}),e}function yr(e){return hi()(function(t){var n=t.pop(),r=e.apply(this,t);return"function"==typeof n&&mr(r,n),r})}function br(e,t){return e.then(function(e){return t().then(function(){return e})},function(e){return t().then(function(){throw e})})}function _r(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}}function wr(e){var t=new Pi(e),n=new Array(t.size),r=-1;return t.forEach(function(e){n[++r]=e}),n}function Sr(e){var t=new Array(e.size),n=-1;return e.forEach(function(e,r){t[++n]=r}),t}function kr(e){return new gr("builtin "+e+" function requires map values to be numbers or number arrays")}function Tr(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];if("number"!=typeof i){if(!Array.isArray(i))throw kr("_sum");t="number"==typeof t?[t]:t;for(var a=0,o=i.length;a<o;a++){var s=i[a];if("number"!=typeof s)throw kr("_sum");void 0===t[a]?t.push(s):t[a]+=s}}else"number"==typeof t?t+=i:t[0]+=i}return t}function Cr(e,t){return q("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:Tr,log:to,isArray:no,toJSON:ro})}function xr(){this.promise=new Ci(function(e){e()})}function Er(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function Pr(e,t){return Er(e)+Er(t)+"undefined"}function $r(e,t,n,r,i,a){var o,s=Pr(n,r);if(!i&&(o=e._cachedViews=e._cachedViews||{},o[s]))return o[s];var c=e.info().then(function(c){function u(e){e.views=e.views||{};var n=t;-1===n.indexOf("/")&&(n=t+"/"+t);var r=e.views[n]=e.views[n]||{};if(!r[l])return r[l]=!0,e}var l=c.db_name+"-mrview-"+(i?"temp":Ht(s));return H(e,"_local/"+a,u).then(function(){return e.registerDependentDatabase(l).then(function(t){var i=t.db;i.auto_compaction=!0;var a={name:l,db:i,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return a.db.get("_local/lastSeq").catch(function(e){if(404!==e.status)throw e}).then(function(e){return a.seq=e?e.seq:0,o&&a.db.once("destroyed",function(){delete o[s]}),a})})})});return o&&(o[s]=c),c}function Ar(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function Or(e){return 1===e.length&&/^1-/.test(e[0].rev)}function Ir(e,t){try{e.emit("error",t)}catch(e){C("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),C("error",t)}}function Rr(e,t,n,r){function i(e,t,n){try{t(n)}catch(t){Ir(e,t)}}function a(e,t,n,r,i){try{return{output:t(n,r,i)}}catch(t){return Ir(e,t),{error:t}}}function o(e,t){var n=ze(e.key,t.key);return 0!==n?n:ze(e.value,t.value)}function s(e,t,n){return n=n||0,"number"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}function c(e){var t=e.value;return t&&"object"==typeof t&&t._id||e.id}function u(e){e.rows.forEach(function(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var n=t[e];t[e].data=It(n.data,n.content_type)})})}function l(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&u(t),t}}function d(e,t,n,r){var i=t[e];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(e+"="+i))}function f(e){if(void 0!==e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function h(e){return e.group_level=f(e.group_level),e.limit=f(e.limit),e.skip=f(e.skip),e}function p(e){if(e){if("number"!=typeof e)return new pr('Invalid value for integer: "'+e+'"');if(e<0)return new pr('Invalid value for positive integer: "'+e+'"')}}function v(e,t){var n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if(void 0!==e[n]&&void 0!==e[r]&&ze(e[n],e[r])>0)throw new pr("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&!1!==e.reduce){if(e.include_docs)throw new pr("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new pr("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(t){var n=p(e[t]);if(n)throw n})}function g(e,t,n){var r,i=[],a="GET";if(d("reduce",n,i),d("include_docs",n,i),d("attachments",n,i),d("limit",n,i),d("descending",n,i),d("group",n,i),d("group_level",n,i),d("skip",n,i),d("stale",n,i),d("conflicts",n,i),d("startkey",n,i,!0),d("start_key",n,i,!0),d("endkey",n,i,!0),d("end_key",n,i,!0),d("inclusive_end",n,i),d("key",n,i,!0),i=i.join("&"),i=""===i?"":"?"+i,void 0!==n.keys){var o="keys="+encodeURIComponent(JSON.stringify(n.keys));o.length+i.length+1<=2e3?i+=("?"===i[0]?"&":"?")+o:(a="POST","string"==typeof t?r={keys:n.keys}:t.keys=n.keys)}if("string"==typeof t){var s=Ar(t);return e.request({method:a,url:"_design/"+s[0]+"/_view/"+s[1]+i,body:r}).then(function(e){return e.rows.forEach(function(e){if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason)}),e}).then(l(n))}return r=r||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?r[e]=t[e]:r[e]=t[e].toString()}),e.request({method:"POST",url:"_temp_view"+i,body:r}).then(l(n))}function m(e,t,n){return new Ci(function(r,i){e._query(t,n,function(e,t){if(e)return i(e);r(t)})})}function y(e){return new Ci(function(t,n){e._viewCleanup(function(e,r){if(e)return n(e);t(r)})})}function b(e){return function(t){if(404===t.status)return e;throw t}}function _(e,t,n){function r(){return Or(l)?Ci.resolve(s):t.db.get(o).catch(b(s))}function i(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):Ci.resolve({rows:[]})}function a(e,t){for(var n=[],r=new Pi,i=0,a=t.rows.length;i<a;i++){var o=t.rows[i],s=o.doc;if(s&&(n.push(s),r.add(s._id),s._deleted=!u.has(s._id),!s._deleted)){var c=u.get(s._id);"value"in c&&(s.value=c.value)}}var l=Sr(u);return l.forEach(function(e){if(!r.has(e)){var t={_id:e},i=u.get(e);"value"in i&&(t.value=i.value),n.push(t)}}),e.keys=wr(l.concat(e.keys)),n.push(e),n}var o="_local/doc_"+e,s={_id:o,keys:[]},c=n.get(e),u=c[0],l=c[1];return r().then(function(e){return i(e).then(function(t){return a(e,t)})})}function w(e,t,n){var r="_local/lastSeq";return e.db.get(r).catch(b({_id:r,seq:0})).then(function(r){var i=Sr(t);return Ci.all(i.map(function(n){return _(n,e,t)})).then(function(t){var i=L(t);return r.seq=n,i.push(r),e.db.bulkDocs({docs:i})})})}function S(e){var t="string"==typeof e?e:e.name,n=io[t];return n||(n=io[t]=new xr),n}function k(e){return _r(S(e),function(){return T(e)})()}function T(e){function n(e,t){var n={id:d._id,key:We(e)};void 0!==t&&null!==t&&(n.value=We(t)),l.push(n)}function r(t,n){return function(){return w(e,t,n)}}function a(){return e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:h,limit:oo}).then(s)}function s(e){var t=e.results;if(t.length){var n=c(t);if(p.add(r(n,h)),!(t.length<oo))return a()}}function c(t){for(var n=new $i,r=0,a=t.length;r<a;r++){var s=t[r];if("_"!==s.doc._id[0]){l=[],d=s.doc,d._deleted||i(e.sourceDB,f,d),l.sort(o);var c=u(l);n.set(s.doc._id,[c,s.changes])}h=s.seq}return n}function u(e){for(var t,n=new $i,r=0,i=e.length;r<i;r++){var a=e[r],o=[a.key,a.id];r>0&&0===ze(a.key,t)&&o.push(r),n.set(Ye(o),a),t=a.key}return n}var l,d,f=t(e.mapFun,n),h=e.seq||0,p=new xr;return a().then(function(){return p.finish()}).then(function(){e.seq=h})}function C(e,t,r){0===r.group_level&&delete r.group_level;var i=r.group||r.group_level,o=n(e.reduceFun),c=[],u=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;t.forEach(function(e){var t=c[c.length-1],n=i?e.key:null;if(i&&Array.isArray(n)&&(n=n.slice(0,u)),t&&0===ze(t.groupKey,n))return t.keys.push([e.key,e.id]),void t.values.push(e.value);c.push({keys:[[e.key,e.id]],values:[e.value],groupKey:n})}),t=[];for(var l=0,d=c.length;l<d;l++){var f=c[l],h=a(e.sourceDB,o,f.keys,f.values,!1);if(h.error&&h.error instanceof gr)throw h.error;t.push({value:h.error?null:h.output,key:f.groupKey})}return{rows:s(t,r.limit,r.skip)}}function x(e,t){return _r(S(e),function(){return E(e,t)})()}function E(e,t){function n(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return i=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(t<n||t>n))return e.doc.value}var r=Je(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}})})}function r(n){var r;if(r=a?C(e,n,t):{total_rows:i,offset:o,rows:n},t.include_docs){var s=wr(n.map(c));return e.sourceDB.allDocs({keys:s,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then(function(e){var t=new $i;return e.rows.forEach(function(e){t.set(e.id,e.doc)}),n.forEach(function(e){var n=c(e),r=t.get(n);r&&(e.doc=r)}),r})}return r}var i,a=e.reduceFun&&!1!==t.reduce,o=t.skip||0;if(void 0===t.keys||t.keys.length||(t.limit=0,delete t.keys),void 0!==t.keys){var s=t.keys,u=s.map(function(e){return n({startkey:Ye([e]),endkey:Ye([e,{}])})});return Ci.all(u).then(L).then(r)}var l,d,f={descending:t.descending};if("start_key"in t&&(l=t.start_key),"startkey"in t&&(l=t.startkey),"end_key"in t&&(d=t.end_key),"endkey"in t&&(d=t.endkey),void 0!==l&&(f.startkey=Ye(t.descending?[l,{}]:[l])),void 0!==d){var h=!1!==t.inclusive_end;t.descending&&(h=!h),f.endkey=Ye(h?[d,{}]:[d])}if(void 0!==t.key){var p=Ye([t.key]),v=Ye([t.key,{}]);f.descending?(f.endkey=p,f.startkey=v):(f.startkey=p,f.endkey=v)}return a||("number"==typeof t.limit&&(f.limit=t.limit),f.skip=o),n(f).then(r)}function P(e){return e.request({method:"POST",url:"_view_cleanup"})}function $(t){return t.get("_local/"+e).then(function(e){var n=new $i;Object.keys(e.views).forEach(function(e){var t=Ar(e),r="_design/"+t[0],i=t[1],a=n.get(r);a||(a=new Pi,n.set(r,a)),a.add(i)});var r={keys:Sr(n),include_docs:!0};return t.allDocs(r).then(function(r){var i={};r.rows.forEach(function(t){var r=t.key.substring(8);n.get(t.key).forEach(function(n){var a=r+"/"+n;e.views[a]||(a=n);var o=Object.keys(e.views[a]),s=t.doc&&t.doc.views&&t.doc.views[n];o.forEach(function(e){i[e]=i[e]||s})})});var a=Object.keys(i).filter(function(e){return!i[e]}),o=a.map(function(e){return _r(S(e),function(){return new t.constructor(e,t.__opts).destroy()})()});return Ci.all(o).then(function(){return{ok:!0}})})},b({ok:!0}))}function A(t,n,i){if("function"==typeof t._query)return m(t,n,i);if(N(t))return g(t,n,i);if("string"!=typeof n)return v(i,n),ao.add(function(){return $r(t,"temp_view/temp_view",n.map,n.reduce,!0,e).then(function(e){return br(k(e).then(function(){return x(e,i)}),function(){return e.db.destroy()})})}),ao.finish();var a=n,o=Ar(a),s=o[0],c=o[1];return t.get("_design/"+s).then(function(n){var o=n.views&&n.views[c];if(!o)throw new vr("ddoc "+n._id+" has no view named "+c);return r(n,c),v(i,o),$r(t,a,o.map,o.reduce,!1,e).then(function(e){return"ok"===i.stale||"update_after"===i.stale?("update_after"===i.stale&&yi()(function(){k(e)}),x(e,i)):k(e).then(function(){return x(e,i)})})})}function O(e,t,n){var r=this;"function"==typeof t&&(n=t,t={}),t=t?h(t):{},"function"==typeof e&&(e={map:e});var i=Ci.resolve().then(function(){return A(r,e,t)});return mr(i,n),i}return{query:O,viewCleanup:yr(function(){var e=this;return"function"==typeof e._viewCleanup?y(e):N(e)?P(e):$(e)})}}function Lr(e){if(/^_sum/.test(e))return so._sum;if(/^_count/.test(e))return so._count;if(/^_stats/.test(e))return so._stats;if(/^_/.test(e))throw new Error(e+" is not a supported reduce function.")}function jr(e,t){if("function"==typeof e&&2===e.length){var n=e;return function(e){return n(e,t)}}return Cr(e.toString(),t)}function Dr(e){var t=e.toString(),n=Lr(t);return n||Cr(t)}function Nr(e,t){var n=e.views&&e.views[t];if("string"!=typeof n.map)throw new vr("ddoc "+e._id+" has no string view named "+t+", instead found object of type: "+typeof n.map)}function Ur(e,t,n){return uo.query.call(this,e,t,n)}function Mr(e){return uo.viewCleanup.call(this,e)}function Fr(e){return/^1-/.test(e)}function Br(e,t,n){return!e._attachments||!e._attachments[n]||e._attachments[n].digest!==t._attachments[n].digest}function qr(e,t){var n=Object.keys(t._attachments);return Ci.all(n.map(function(n){return e.getAttachment(t._id,n,{rev:t._rev})}))}function Hr(e,t,n){var r=N(t)&&!N(e),i=Object.keys(n._attachments);return r?e.get(n._id).then(function(r){return Ci.all(i.map(function(i){return Br(r,n,i)?t.getAttachment(n._id,i):e.getAttachment(r._id,i)}))}).catch(function(e){if(404!==e.status)throw e;return qr(t,n)}):qr(t,n)}function Vr(e){var t=[];return Object.keys(e).forEach(function(n){e[n].missing.forEach(function(e){t.push({id:n,rev:e})})}),{docs:t,revs:!0,latest:!0}}function zr(e,t,n,r){function i(){var i=Vr(n);if(i.docs.length)return e.bulkGet(i).then(function(n){if(r.cancelled)throw new Error("cancelled");return Ci.all(n.results.map(function(n){return Ci.all(n.docs.map(function(n){var r=n.ok;return n.error&&(f=!1),r&&r._attachments?Hr(t,e,r).then(function(e){var t=Object.keys(r._attachments);return e.forEach(function(e,n){var i=r._attachments[t[n]];delete i.stub,delete i.length,i.data=e}),r}):r}))})).then(function(e){d=d.concat(L(e).filter(Boolean))})})}function a(e){return e._attachments&&Object.keys(e._attachments).length>0}function o(e){return e._conflicts&&e._conflicts.length>0}function c(t){return e.allDocs({keys:t,include_docs:!0,conflicts:!0}).then(function(e){if(r.cancelled)throw new Error("cancelled");e.rows.forEach(function(e){e.deleted||!e.doc||!Fr(e.value.rev)||a(e.doc)||o(e.doc)||(e.doc._conflicts&&delete e.doc._conflicts,d.push(e.doc),delete n[e.id])})})}function u(){var e=Object.keys(n).filter(function(e){var t=n[e].missing;return 1===t.length&&Fr(t[0])});if(e.length>0)return c(e)}function l(){return{ok:f,docs:d}}n=s(n);var d=[],f=!0;return Ci.resolve().then(u).then(i).then(l)}function Wr(e,t,n,r,i){return e.get(t).catch(function(n){if(404===n.status)return"http"!==e.adapter&&"https"!==e.adapter||P(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:t,history:[],replicator:ho,version:fo};throw n}).then(function(a){if(!i.cancelled&&a.last_seq!==n)return a.history=(a.history||[]).filter(function(e){return e.session_id!==r}),a.history.unshift({last_seq:n,session_id:r}),a.history=a.history.slice(0,po),a.version=fo,a.replicator=ho,a.session_id=r,a.last_seq=n,e.put(a).catch(function(a){if(409===a.status)return Wr(e,t,n,r,i);throw a})})}function Gr(e,t,n,r,i){this.src=e,this.target=t,this.id=n,this.returnValue=r,this.opts=i}function Yr(e,t){return e.session_id===t.session_id?{last_seq:e.last_seq,history:e.history}:Qr(e.history,t.history)}function Qr(e,t){var n=e[0],r=e.slice(1),i=t[0],a=t.slice(1);return n&&0!==t.length?Xr(n.session_id,t)?{last_seq:n.last_seq,history:e}:Xr(i.session_id,r)?{last_seq:i.last_seq,history:a}:Qr(r,a):{last_seq:vo,history:[]}}function Xr(e,t){var n=t[0],r=t.slice(1);return!(!e||0===t.length)&&(e===n.session_id||Xr(e,r))}function Jr(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}function Kr(e,t,n,r){if(!1===e.retry)return t.emit("error",n),void t.removeAllListeners();if("function"!=typeof e.back_off_function&&(e.back_off_function=E),t.emit("requestError",n),"active"===t.state||"pending"===t.state){t.emit("paused",n),t.state="stopped";var i=function(){e.current_back_off=mo},a=function(){t.removeListener("active",i)};t.once("paused",a),t.once("active",i)}e.current_back_off=e.current_back_off||mo,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(r,e.current_back_off)}function Zr(e){return Object.keys(e).sort(ze).reduce(function(t,n){return t[n]=e[n],t},{})}function ei(e,t,n){var r=n.doc_ids?n.doc_ids.sort(ze):"",i=n.filter?n.filter.toString():"",a="",o="",s="";return n.selector&&(s=JSON.stringify(n.selector)),n.filter&&n.query_params&&(a=JSON.stringify(Zr(n.query_params))),n.filter&&"_view"===n.filter&&(o=n.view.toString()),Ci.all([e.id(),t.id()]).then(function(e){var t=e[0]+e[1]+i+o+a+r+s;return new Ci(function(e){qt(t,e)})}).then(function(e){return"_local/"+(e=e.replace(/\//g,".").replace(/\+/g,"_"))})}function ti(e,t,n,r,i){function a(){return k?Ci.resolve():ei(e,t,n).then(function(i){S=i;var a={};a=!1===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},k=new Gr(e,t,S,r,a)})}function o(){if(U=[],0!==w.docs.length){var e=w.docs,a={timeout:n.timeout};return t.bulkDocs({docs:e,new_edits:!1},a).then(function(t){if(r.cancelled)throw p(),new Error("cancelled");var n=Object.create(null);t.forEach(function(e){e.error&&(n[e.id]=e)});var a=Object.keys(n).length;i.doc_write_failures+=a,i.docs_written+=e.length-a,e.forEach(function(e){var t=n[e._id];if(t){if(i.errors.push(t),"unauthorized"!==t.name&&"forbidden"!==t.name)throw t;r.emit("denied",s(t))}else U.push(e)})},function(t){throw i.doc_write_failures+=e.length,t})}}function c(){if(w.error)throw new Error("There was a problem getting docs.");i.last_seq=$=w.seq;var e=s(i);return U.length&&(e.docs=U,r.emit("change",e)),x=!0,k.writeCheckpoint(w.seq,M).then(function(){if(x=!1,r.cancelled)throw p(),new Error("cancelled");w=void 0,y()}).catch(function(e){throw _(e),e})}function u(){var e={};return w.changes.forEach(function(t){"_user/"!==t.id&&(e[t.id]=t.changes.map(function(e){return e.rev}))}),t.revsDiff(e).then(function(e){if(r.cancelled)throw p(),new Error("cancelled");w.diffs=e})}function l(){return zr(e,t,w.diffs,r).then(function(e){w.error=!e.ok,e.docs.forEach(function(e){delete w.diffs[e._id],i.docs_read++,w.docs.push(e)})})}function d(){if(!r.cancelled&&!w){if(0===T.length)return void f(!0);w=T.shift(),u().then(l).then(o).then(c).then(d).catch(function(e){h("batch processing terminated with error",e)})}}function f(e){if(0===C.changes.length)return void(0!==T.length||w||((O&&F.live||E)&&(r.state="pending",r.emit("paused")),E&&p()));(e||E||C.changes.length>=I)&&(T.push(C),C={seq:0,changes:[],docs:[]},"pending"!==r.state&&"stopped"!==r.state||(r.state="active",r.emit("active")),d())}function h(e,t){P||(t.message||(t.message=e),i.ok=!1,i.status="aborting",T=[],C={seq:0,changes:[],docs:[]},p(t))}function p(a){P||r.cancelled&&(i.status="cancelled",x)||(i.status=i.status||"complete",i.end_time=new Date,i.last_seq=$,P=!0,a?(a=A(a),a.result=i,"unauthorized"===a.name||"forbidden"===a.name?(r.emit("error",a),r.removeAllListeners()):Kr(n,r,a,function(){ti(e,t,n,r)})):(r.emit("complete",i),r.removeAllListeners()))}function v(e){if(r.cancelled)return p();R(n)(e)&&(C.seq=e.seq,C.changes.push(e),f(0===T.length&&F.live))}function g(e){if(j=!1,r.cancelled)return p();if(e.results.length>0)F.since=e.last_seq,y(),f(!0);else{var t=function(){O?(F.live=!0,y()):E=!0,f(!0)};w||0!==e.results.length?t():(x=!0,k.writeCheckpoint(e.last_seq,M).then(function(){x=!1,i.last_seq=$=e.last_seq,t()}).catch(_))}}function m(e){if(j=!1,r.cancelled)return p();h("changes rejected",e)}function y(){function t(){a.cancel()}function i(){r.removeListener("cancel",t)}if(!j&&!E&&T.length<L){j=!0,r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",t);var a=e.changes(F).on("change",v);a.then(i,i),a.then(g).catch(m),n.retry&&(r._changes=a,r._abortChanges=t)}}function b(){a().then(function(){return r.cancelled?void p():k.getCheckpoint().then(function(e){$=e,F={since:$,limit:I,batch_size:I,style:"all_docs",doc_ids:D,selector:N,return_docs:!0},n.filter&&("string"!=typeof n.filter?F.include_docs=!0:F.filter=n.filter),"heartbeat"in n&&(F.heartbeat=n.heartbeat),"timeout"in n&&(F.timeout=n.timeout),n.query_params&&(F.query_params=n.query_params),n.view&&(F.view=n.view),y()})}).catch(function(e){h("getCheckpoint rejected with ",e)})}function _(e){x=!1,h("writeCheckpoint completed with error",e)}var w,S,k,T=[],C={seq:0,changes:[],docs:[]},x=!1,E=!1,P=!1,$=0,O=n.continuous||n.live||!1,I=n.batch_size||100,L=n.batches_limit||10,j=!1,D=n.doc_ids,N=n.selector,U=[],M=ta();i=i||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var F={};if(r.ready(e,t),r.cancelled)return void p();r._addedListeners||(r.once("cancel",p),"function"==typeof n.complete&&(r.once("error",n.complete),r.once("complete",function(e){n.complete(null,e)})),r._addedListeners=!0),void 0===n.since?b():a().then(function(){return x=!0,k.writeCheckpoint(n.since,M)}).then(function(){if(x=!1,r.cancelled)return void p();$=n.since,b()}).catch(_)}function ni(){pi.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new Ci(function(t,n){e.once("complete",t),e.once("error",n)});e.then=function(e,n){return t.then(e,n)},e.catch=function(e){return t.catch(e)},e.catch(function(){})}function ri(e,t){var n=t.PouchConstructor;return"string"==typeof e?new n(e,t):e}function ii(e,t,n,r){if("function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw A(Vi,"`doc_ids` filter parameter is not a list.");n.complete=r,n=s(n),n.continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var i=new ni(n);return ti(ri(e,n),ri(t,n),n,i),i}function ai(e,t,n,r){return"function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),n=s(n),n.PouchConstructor=n.PouchConstructor||this,e=ri(e,n),t=ri(t,n),new oi(e,t,n,r)}function oi(e,t,n,r){function i(e){p.emit("change",{direction:"pull",change:e})}function a(e){p.emit("change",{direction:"push",change:e})}function o(e){p.emit("denied",{direction:"push",doc:e})}function s(e){p.emit("denied",{direction:"pull",doc:e})}function c(){p.pushPaused=!0,p.pullPaused&&p.emit("paused")}function u(){p.pullPaused=!0,p.pushPaused&&p.emit("paused")}function l(){p.pushPaused=!1,p.pullPaused&&p.emit("active",{direction:"push"})}function d(){p.pullPaused=!1,p.pushPaused&&p.emit("active",{direction:"pull"})}function f(e){return function(t,n){var r="change"===t&&(n===i||n===a),f="denied"===t&&(n===s||n===o),h="paused"===t&&(n===u||n===c),v="active"===t&&(n===d||n===l);(r||f||h||v)&&(t in m||(m[t]={}),m[t][e]=!0,2===Object.keys(m[t]).length&&p.removeAllListeners(t))}}function h(e,t,n){-1==e.listeners(t).indexOf(n)&&e.on(t,n)}var p=this;this.canceled=!1;var v=n.push?Ri({},n,n.push):n,g=n.pull?Ri({},n,n.pull):n;this.push=ii(e,t,v),this.pull=ii(t,e,g),this.pushPaused=!0,this.pullPaused=!0;var m={};n.live&&(this.push.on("complete",p.pull.cancel.bind(p.pull)),this.pull.on("complete",p.push.cancel.bind(p.push))),this.on("newListener",function(e){"change"===e?(h(p.pull,"change",i),h(p.push,"change",a)):"denied"===e?(h(p.pull,"denied",s),h(p.push,"denied",o)):"active"===e?(h(p.pull,"active",d),h(p.push,"active",l)):"paused"===e&&(h(p.pull,"paused",u),h(p.push,"paused",c))}),this.on("removeListener",function(e){"change"===e?(p.pull.removeListener("change",i),p.push.removeListener("change",a)):"denied"===e?(p.pull.removeListener("denied",s),p.push.removeListener("denied",o)):"active"===e?(p.pull.removeListener("active",d),p.push.removeListener("active",l)):"paused"===e&&(p.pull.removeListener("paused",u),p.push.removeListener("paused",c))}),this.pull.on("removeListener",f("pull")),this.push.on("removeListener",f("push"));var y=Ci.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return p.emit("complete",t),r&&r(null,t),p.removeAllListeners(),t},function(e){if(p.cancel(),r?r(e):p.emit("error",e),p.removeAllListeners(),r)throw e});this.then=function(e,t){return y.then(e,t)},this.catch=function(e){return y.catch(e)}}function si(e){e.replicate=ii,e.sync=ai,Object.defineProperty(e.prototype,"replicate",{get:function(){var e=this;return{from:function(t,n,r){return e.constructor.replicate(t,e,n,r)},to:function(t,n,r){return e.constructor.replicate(e,t,n,r)}}}}),e.prototype.sync=function(e,t,n){return this.constructor.sync(this,e,t,n)}}Object.defineProperty(t,"__esModule",{value:!0});var ci=n(1021),ui=n.n(ci),li=n(942),di=n.n(li),fi=n(255),hi=n.n(fi),pi=n(68),vi=(n.n(pi),n(70)),gi=n.n(vi),mi=n(153),yi=n.n(mi),bi=n(1018),_i=n.n(bi),wi=n(368),Si=n.n(wi),ki=n(371),Ti=n.n(ki),Ci="function"==typeof Promise?Promise:di.a,xi=Function.prototype.toString,Ei=xi.call(Object);p.prototype.get=function(e){var t=f(e);return this._store[t]},p.prototype.set=function(e,t){var n=f(e);return this._store[n]=t,!0},p.prototype.has=function(e){return f(e)in this._store},p.prototype.delete=function(e){var t=f(e),n=t in this._store;return delete this._store[t],n},p.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n],a=this._store[i];i=h(i),e(a,i)}},Object.defineProperty(p.prototype,"size",{get:function(){return Object.keys(this._store).length}}),v.prototype.add=function(e){return this._store.set(e,!0)},v.prototype.has=function(e){return this._store.has(e)},v.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})},Object.defineProperty(v.prototype,"size",{get:function(){return this._store.size}});var Pi,$i;g()?(Pi=Set,$i=Map):(Pi=v,$i=p);var Ai,Oi=6;if(w())Ai=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),Ai=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){Ai=!1}gi()(T,pi.EventEmitter),T.prototype.addListener=function(e,t,n,r){function i(){function e(){o=!1}if(a._listeners[t]){if(o)return void(o="waiting");o=!0;var s=m(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(s).on("change",function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))}).on("complete",function(){"waiting"===o&&yi()(i),o=!1}).on("error",e)}}if(!this._listeners[t]){var a=this,o=!1;this._listeners[t]=i,this.on(e,i)}},T.prototype.removeListener=function(e,t){t in this._listeners&&(pi.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},T.prototype.notifyLocalWindows=function(e){w()?chrome.storage.local.set({dbName:e}):S()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},T.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var Ii;Ii="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};var Ri=Ii;gi()($,Error),$.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var Li=(new $(401,"unauthorized","Name or password is incorrect."),new $(400,"bad_request","Missing JSON list of 'docs'")),ji=new $(404,"not_found","missing"),Di=new $(409,"conflict","Document update conflict"),Ni=new $(400,"bad_request","_id field must contain a string"),Ui=new $(412,"missing_id","_id is required for puts"),Mi=new $(400,"bad_request","Only reserved document ids may start with underscore."),Fi=(new $(412,"precondition_failed","Database not open"),new $(500,"unknown_error","Database encountered an unknown error")),Bi=new $(500,"badarg","Some query argument is invalid"),qi=(new $(400,"invalid_request","Request was invalid"),new $(400,"query_parse_error","Some query parameter is invalid")),Hi=new $(500,"doc_validation","Bad special document member"),Vi=new $(400,"bad_request","Something wrong with the request"),zi=new $(400,"bad_request","Document must be a JSON object"),Wi=(new $(404,"not_found","Database not found"),new $(500,"indexed_db_went_bad","unknown")),Gi=new $(500,"web_sql_went_bad","unknown"),Yi=(new $(500,"levelDB_went_went_bad","unknown"),new $(403,"forbidden","Forbidden by design doc validate_doc_update function"),new $(400,"bad_request","Invalid rev format")),Qi=(new $(412,"file_exists","The database could not be created, the file already exists."),new $(412,"missing_stub","A pre-existing attachment stub wasn't found")),Xi=(new $(413,"invalid_url","Provided URL is invalid"),j.name);var Ji=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Ki="queryKey",Zi=/(?:^|&)([^&=]*)=?([^&]*)/g,ea=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ta=ui.a.v4;gi()(pe,pi.EventEmitter),pe.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},pe.prototype.validateChanges=function(e){var t=e.complete,n=this;Pe._changesFilterPlugin?Pe._changesFilterPlugin.validate(e,function(r){if(r)return t(r);n.doChanges(e)}):n.doChanges(e)},pe.prototype.doChanges=function(e){var t=this,n=e.complete;if(e=s(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=ve,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"===e.since)return void this.db.info().then(function(r){if(t.isCancelled)return void n(null,{status:"cancelled"});e.since=r.update_seq,t.doChanges(e)},n);if(Pe._changesFilterPlugin){if(Pe._changesFilterPlugin.normalize(e),Pe._changesFilterPlugin.shouldFilter(this,e))return Pe._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(t){t in e&&C("warn",'The "'+t+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&"function"==typeof r.cancel){var i=t.cancel;t.cancel=hi()(function(e){r.cancel(),i.apply(this,e)})}},gi()(Te,pi.EventEmitter),Te.prototype.post=d("post",function(e,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(A(zi));this.bulkDocs({docs:[e]},t,me(n,e._id))}),Te.prototype.put=d("put",function(e,t,n){function r(){var n=e._rev.split("-"),r=n[1],i=parseInt(n[0],10),a=i+1,o=z();e._revisions={start:a,ids:[o,r]},e._rev=a+"-"+o,t.new_edits=!1}function i(n){"function"==typeof a._put&&!1!==t.new_edits?a._put(e,t,n):a.bulkDocs({docs:[e]},t,me(n,e._id))}if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(A(zi));if(D(e._id),de(e._id)&&"function"==typeof this._putLocal)return e._deleted?this._removeLocal(e,n):this._putLocal(e,n);var a=this;t.force&&e._rev?(r(),i(function(t){var r=t?null:{ok:!0,id:e._id,rev:e._rev};n(t,r)})):i(n)}),Te.prototype.putAttachment=d("putAttachment",function(e,t,n,r,i){function a(e){var n="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[t]={content_type:i,data:r,revpos:++n},o.put(e)}var o=this;return"function"==typeof i&&(i=r,r=n,n=null),void 0===i&&(i=r,r=n,n=null),i||C("warn","Attachment",t,"on document",e,"is missing content_type"),o.get(e).then(function(e){if(e._rev!==n)throw A(Di);return a(e)},function(t){if(t.reason===ji.message)return a({_id:e});throw t})}),Te.prototype.removeAttachment=d("removeAttachment",function(e,t,n,r){var i=this;i.get(e,function(e,a){return e?void r(e):a._rev!==n?void r(A(Di)):a._attachments?(delete a._attachments[t],0===Object.keys(a._attachments).length&&delete a._attachments,void i.put(a,r)):r()})}),Te.prototype.remove=d("remove",function(e,t,n,r){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(i=e,"function"==typeof t?(r=t,n={}):(r=n,n=t)),n=n||{},n.was_delete=!0;var a={_id:i._id,_rev:i._rev||n.rev};if(a._deleted=!0,de(a._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,r);this.bulkDocs({docs:[a]},n,me(r,a._id))}),Te.prototype.revsDiff=d("revsDiff",function(e,t,n){function r(e,t){s.has(e)||s.set(e,{missing:[]}),s.get(e).missing.push(t)}function i(t,n){var i=e[t].slice(0);G(n,function(e,n,a,o,s){var c=n+"-"+a,u=i.indexOf(c);-1!==u&&(i.splice(u,1),"available"!==s.status&&r(t,c))}),i.forEach(function(e){r(t,e)})}"function"==typeof t&&(n=t,t={});var a=Object.keys(e);if(!a.length)return n(null,{});var o=0,s=new $i;a.map(function(t){this._getRevisionTree(t,function(r,c){if(r&&404===r.status&&"missing"===r.message)s.set(t,{missing:e[t]});else{if(r)return n(r);i(t,c)}if(++o===a.length){var u={};return s.forEach(function(e,t){u[t]=e}),n(null,u)}})},this)}),Te.prototype.bulkGet=d("bulkGet",function(e,t){_(this,e,t)}),Te.prototype.compactDocument=d("compactDocument",function(e,t,n){var r=this;this._getRevisionTree(e,function(i,a){if(i)return n(i);var o=_e(a),s=[],c=[];Object.keys(o).forEach(function(e){o[e]>t&&s.push(e)}),G(a,function(e,t,n,r,i){var a=t+"-"+n;"available"===i.status&&-1!==s.indexOf(a)&&c.push(a)}),r._doCompaction(e,c,n)})}),Te.prototype.compact=d("compact",function(e,t){"function"==typeof e&&(t=e,e={});var n=this;e=e||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:e,callback:t}),1===n._compactionQueue.length&&Se(n)}),Te.prototype._compact=function(e,t){function n(e){o.push(i.compactDocument(e.id,0))}function r(e){var n=e.last_seq;Ci.all(o).then(function(){return H(i,"_local/compaction",function(e){return(!e.last_seq||e.last_seq<n)&&(e.last_seq=n,e)})}).then(function(){t(null,{ok:!0})}).catch(t)}var i=this,a={return_docs:!1,last_seq:e.last_seq||0},o=[];i.changes(a).on("change",n).on("complete",r).on("error",t)},Te.prototype.get=d("get",function(e,t,n){function r(){var r=[],o=i.length;if(!o)return n(null,r);i.forEach(function(i){a.get(e,{rev:i,revs:t.revs,latest:t.latest,attachments:t.attachments},function(e,t){if(e)r.push({missing:i});else{for(var a,s=0,c=r.length;s<c;s++)if(r[s].ok&&r[s].ok._rev===t._rev){a=!0;break}a||r.push({ok:t})}--o||n(null,r)})})}if("function"==typeof t&&(n=t,t={}),"string"!=typeof e)return n(A(Ni));if(de(e)&&"function"==typeof this._getLocal)return this._getLocal(e,n);var i=[],a=this;if(!t.open_revs)return this._get(e,t,function(r,i){if(r)return r.docId=e,n(r);var o=i.doc,s=i.metadata,c=i.ctx;if(t.conflicts){var u=X(s);u.length&&(o._conflicts=u)}if(le(s,o._rev)&&(o._deleted=!0),t.revs||t.revs_info){for(var l=o._rev.split("-"),d=parseInt(l[0],10),f=l[1],h=K(s.rev_tree),p=null,v=0;v<h.length;v++){var g=h[v],m=g.ids.map(function(e){return e.id}).indexOf(f);(m===d-1||!p&&-1!==m)&&(p=g)}var y=p.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])+1,b=p.ids.length-y;if(p.ids.splice(y,b),p.ids.reverse(),t.revs&&(o._revisions={start:p.pos+p.ids.length-1,ids:p.ids.map(function(e){return e.id})}),t.revs_info){var _=p.pos+p.ids.length;o._revs_info=p.ids.map(function(e){return _--,{rev:_+"-"+e.id,status:e.opts.status}})}}if(t.attachments&&o._attachments){var w=o._attachments,S=Object.keys(w).length;if(0===S)return n(null,o);Object.keys(w).forEach(function(e){this._getAttachment(o._id,e,w[e],{rev:o._rev,binary:t.binary,ctx:c},function(t,r){var i=o._attachments[e];i.data=r,delete i.stub,delete i.length,--S||n(null,o)})},a)}else{if(o._attachments)for(var k in o._attachments)o._attachments.hasOwnProperty(k)&&(o._attachments[k].stub=!0);n(null,o)}});if("all"===t.open_revs)this._getRevisionTree(e,function(e,t){if(e)return n(e);i=Q(t).map(function(e){return e.rev}),r()});else{if(!Array.isArray(t.open_revs))return n(A(Fi,"function_clause"));i=t.open_revs;for(var o=0;o<i.length;o++){var s=i[o];if("string"!=typeof s||!/^\d+-/.test(s))return n(A(Yi))}r()}}),Te.prototype.getAttachment=d("getAttachment",function(e,t,n,r){var i=this;n instanceof Function&&(r=n,n={}),this._get(e,n,function(a,o){return a?r(a):o.doc._attachments&&o.doc._attachments[t]?(n.ctx=o.ctx,n.binary=!0,i._getAttachment(e,t,o.doc._attachments[t],n,r),void 0):r(A(ji))})}),Te.prototype.allDocs=d("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip=void 0!==e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(n)return void t(A(qi,"Query parameter `"+n+"` is not compatible with multi-get"));if(!N(this))return we(this,e,t)}return this._allDocs(e,t)}),Te.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new pe(this,e,t)},Te.prototype.close=d("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}),Te.prototype.info=d("info",function(e){var t=this;this._info(function(n,r){if(n)return e(n);r.db_name=r.db_name||t.name,r.auto_compaction=!(!t.auto_compaction||N(t)),r.adapter=t.adapter,e(null,r)})}),Te.prototype.id=d("id",function(e){return this._id(e)}),Te.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Te.prototype.bulkDocs=d("bulkDocs",function(e,t,n){if("function"==typeof t&&(n=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(A(Li));for(var r=0;r<e.docs.length;++r)if("object"!=typeof e.docs[r]||Array.isArray(e.docs[r]))return n(A(zi));var i;if(e.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(t){i=i||ke(t),e._attachments[t].content_type||C("warn","Attachment",t,"on document",e._id,"is missing content_type")})}),i)return n(A(Vi,i));"new_edits"in t||(t.new_edits=!("new_edits"in e)||e.new_edits);var a=this;t.new_edits||N(a)||e.docs.sort(be),ye(e.docs);var o=e.docs.map(function(e){return e._id});return this._bulkDocs(e,t,function(e,r){if(e)return n(e);if(t.new_edits||(r=r.filter(function(e){return e.error})),!N(a))for(var i=0,s=r.length;i<s;i++)r[i].id=r[i].id||o[i];n(null,r)})}),Te.prototype.registerDependentDatabase=d("registerDependentDatabase",function(e,t){function n(t){return t.dependentDbs=t.dependentDbs||{},!t.dependentDbs[e]&&(t.dependentDbs[e]=!0,t)}var r=new this.constructor(e,this.__opts);H(this,"_local/_pouch_dependentDbs",n).then(function(){t(null,{db:r})}).catch(t)}),Te.prototype.destroy=d("destroy",function(e,t){function n(){r._destroy(e,function(e,n){if(e)return t(e);r._destroyed=!0,r.emit("destroyed"),t(null,n||{ok:!0})})}"function"==typeof e&&(t=e,e={});var r=this,i=!("use_prefix"in r)||r.use_prefix;if(N(r))return n();r.get("_local/_pouch_dependentDbs",function(e,a){if(e)return 404!==e.status?t(e):n();var o=a.dependentDbs,s=r.constructor,c=Object.keys(o).map(function(e){var t=i?e.replace(new RegExp("^"+s.prefix),""):e;return new s(t,r.__opts).destroy()});Ci.all(c).then(n,t)})}),Ce.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},Ce.prototype.fail=function(e){this.failed=e,this.execute()},Ce.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},Ce.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},gi()(Pe,Te),Pe.adapters={},Pe.preferredAdapters=[],Pe.prefix="_pouch_";var na=new pi.EventEmitter;$e(Pe),Pe.adapter=function(e,t,n){t.valid()&&(Pe.adapters[e]=t,n&&Pe.preferredAdapters.push(e))},Pe.plugin=function(e){if("function"==typeof e)e(Pe);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){Pe.prototype[t]=e[t]})}return this.__defaults&&(Pe.__defaults=Ri({},this.__defaults)),Pe},Pe.defaults=function(e){function t(e,n){if(!(this instanceof t))return new t(e,n);n=n||{},e&&"object"==typeof e&&(n=e,e=n.name,delete n.name),n=Ri({},t.__defaults,n),Pe.call(this,e,n)}return gi()(t,Pe),t.preferredAdapters=Pe.preferredAdapters.slice(),Object.keys(Pe).forEach(function(e){e in t||(t[e]=Pe[e])}),t.__defaults=Ri({},this.__defaults,e),t};var ra=["$or","$nor","$not"],ia=-324,aa=3,oa="",sa={$elemMatch:function(e,t,n,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.some(function(e){return at(e,t,Object.keys(t))}):r.some(function(r){return ot(t,e,n,r)})))},$allMatch:function(e,t,n,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.every(function(e){return at(e,t,Object.keys(t))}):r.every(function(r){return ot(t,e,n,r)})))},$eq:function(e,t,n,r){return lt(r)&&0===ze(r,t)},$gte:function(e,t,n,r){return lt(r)&&ze(r,t)>=0},$gt:function(e,t,n,r){return lt(r)&&ze(r,t)>0},$lte:function(e,t,n,r){return lt(r)&&ze(r,t)<=0},$lt:function(e,t,n,r){return lt(r)&&ze(r,t)<0},$exists:function(e,t,n,r){return t?lt(r):!lt(r)},$mod:function(e,t,n,r){return ut(r)&&dt(r,t)},$ne:function(e,t,n,r){return t.every(function(e){return 0!==ze(r,e)})},$in:function(e,t,n,r){return ut(r)&&ft(r,t)},$nin:function(e,t,n,r){return ut(r)&&!ft(r,t)},$size:function(e,t,n,r){return ut(r)&&pt(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&ht(r,t)},$regex:function(e,t,n,r){return ut(r)&&vt(r,t)},$type:function(e,t,n,r){return gt(r,t)}};Pe.plugin(Ae),Pe.plugin(Tt),Pe.version="6.3.4";var ca,ua=Ct(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),la=Ct(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]),da=function(e){return atob(e)},fa=function(e){return btoa(e)},ha=e.setImmediate||e.setTimeout,pa=32768,va=5,ga="document-store",ma="by-sequence",ya="attach-store",ba="attach-seq-store",_a="meta-store",wa="local-store",Sa="detect-blob-support",ka=new T,Ta=!1,Ca=[],xa=new $i,Ea=new $i;wn.valid=function(){return!("undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform))&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange};var Pa=function(e){e.adapter("idb",wn,!0)},$a=7,Aa=$n("document-store"),Oa=$n("by-sequence"),Ia=$n("attach-store"),Ra=$n("local-store"),La=$n("metadata-store"),ja=$n("attach-seq-store"),Da=new $i,Na=new T,Ua=1,Ma="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+Oa+" (seq, deleted)",Fa="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+Oa+" (doc_id, rev)",Ba="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+Aa+" (winningseq)",qa="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+ja+" (seq)",Ha="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+ja+" (digest, seq)",Va=Oa+".seq = "+Aa+".winningseq",za=Oa+".seq AS seq, "+Oa+".deleted AS deleted, "+Oa+".json AS data, "+Oa+".rev AS rev, "+Aa+".json AS metadata";Qn.valid=Gn,Qn.use_prefix=!0;var Wa=function(e){e.adapter("websql",Qn,!0)},Ga=Zn(),Ya=function(){},Qa=25,Xa=50,Ja=5e3,Ka=1e4,Za={};hr.valid=function(){return!0};var eo=function(e){e.adapter("http",hr,!1),e.adapter("https",hr,!1)};gi()(pr,Error),gi()(vr,Error),gi()(gr,Error);var to=C.bind(null,"log"),no=Array.isArray,ro=JSON.parse;xr.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},xr.prototype.finish=function(){return this.promise};var io={},ao=new xr,oo=50,so={_sum:function(e,t){return Tr(t)},_count:function(e,t){return t.length},_stats:function(e,t){function n(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];t+=i*i}return t}return{sum:Tr(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:n(t)}}},co="mrviews",uo=Rr(co,jr,Dr,Nr),lo={query:Ur,viewCleanup:Mr},fo=1,ho="pouchdb",po=5,vo=0;Gr.prototype.writeCheckpoint=function(e,t){var n=this;return this.updateTarget(e,t).then(function(){return n.updateSource(e,t)})},Gr.prototype.updateTarget=function(e,t){return this.opts.writeTargetCheckpoint?Wr(this.target,this.id,e,t,this.returnValue):Ci.resolve(!0)},Gr.prototype.updateSource=function(e,t){if(this.opts.writeSourceCheckpoint){var n=this;return this.readOnlySource?Ci.resolve(!0):Wr(this.src,this.id,e,t,this.returnValue).catch(function(e){if(Jr(e))return n.readOnlySource=!0,!0;throw e})}return Ci.resolve(!0)};var go={undefined:function(e,t){return 0===ze(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return Yr(t,e).last_seq}};Gr.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.readOnlySource?Ci.resolve(t.last_seq):e.src.get(e.id).then(function(e){if(t.version!==e.version)return vo;var n;return n=t.version?t.version.toString():"undefined",n in go?go[n](t,e):vo},function(n){if(404===n.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:vo}).then(function(){return vo},function(n){return Jr(n)?(e.readOnlySource=!0,t.last_seq):vo});throw n})}).catch(function(e){if(404!==e.status)throw e;return vo})};var mo=0;gi()(ni,pi.EventEmitter),ni.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},ni.prototype.ready=function(e,t){function n(){i.cancel()}function r(){e.removeListener("destroyed",n),t.removeListener("destroyed",n)}var i=this;i._readyCalled||(i._readyCalled=!0,e.once("destroyed",n),t.once("destroyed",n),i.once("complete",r))},gi()(oi,pi.EventEmitter),oi.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},Pe.plugin(Pa).plugin(Wa).plugin(eo).plugin(lo).plugin(si),t.default=Pe}).call(t,n(6))},function(e,t,n){(function(r){function i(){return!("undefined"==typeof window||!window||void 0===window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function a(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(a=i))}),e.splice(a,0,r)}}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function c(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}function u(){try{return window.localStorage}catch(e){}}t=e.exports=n(1019),t.log=o,t.formatArgs=a,t.save=s,t.load=c,t.useColors=i,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:u(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(c())}).call(t,n(9))},function(e,t,n){function r(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function i(e){function n(){if(n.enabled){var e=n,r=+new Date,i=r-(u||r);e.diff=i,e.prev=u,e.curr=r,u=r;for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var s=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;s++;var i=t.formatters[r];if("function"==typeof i){var o=a[s];n=i.call(e,o),a.splice(s,1),s--}return n}),t.formatArgs.call(e,a);(n.log||t.log||console.log.bind(console)).apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=r(e),"function"==typeof t.init&&t.init(n),n}function a(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&(e=n[i].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function o(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=i.debug=i.default=i,t.coerce=c,t.disable=o,t.enable=a,t.enabled=s,t.humanize=n(1020),t.names=[],t.skips=[],t.formatters={};var u},function(e,t){function n(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=s?Math.round(e/s)+"m":e>=o?Math.round(e/o)+"s":e+"ms"}function i(e){return a(e,u,"day")||a(e,c,"hour")||a(e,s,"minute")||a(e,o,"second")||e+" ms"}function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var o=1e3,s=60*o,c=60*s,u=24*c,l=365.25*u;e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return n(e);if("number"===a&&!1===isNaN(e))return t.long?i(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var r=n(1022),i=n(1023),a=i;a.v1=r,a.v4=i,e.exports=a},function(e,t,n){function r(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var o=void 0!==e.clockseq?e.clockseq:c,d=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:l+1,h=d-u+(f-l)/1e4;if(h<0&&void 0===e.clockseq&&(o=o+1&16383),(h<0||d>u)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=d,l=f,c=o,d+=122192928e5;var p=(1e4*(268435455&d)+f)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var v=d/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=255&v,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var g=e.node||s,m=0;m<6;++m)i[r+m]=g[m];return t||a(i)}var i=n(364),a=n(363),o=i(),s=[1|o[0],o[1],o[2],o[3],o[4],o[5]],c=16383&(o[6]<<8|o[7]),u=0,l=0;e.exports=r},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[r+s]=o[s];return t||a(o)}var i=n(364),a=n(363);e.exports=r},function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return["rheostat","vertical"===e.orientation?"rheostat-vertical":"rheostat-horizontal"].concat(e.className.split(" ")).join(" ")}function l(e){return Number(e.currentTarget.getAttribute("data-handle-key"))}function d(e){e.stopPropagation(),e.preventDefault()}Object.defineProperty(t,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),v=i(p),g=n(3),m=i(g),y=n(1026),b=r(y),_=n(1025),w=i(_),S=Object.prototype.hasOwnProperty,k=m.default.arrayOf(m.default.number),T=m.default.oneOfType([m.default.func,m.default.string]),C=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),h(t,[{key:"render",value:function(){function e(){return v.default.createElement("button",f({},this.props,{type:"button"}))}return e}()}]),t}(v.default.Component),x={algorithm:m.default.shape({getValue:m.default.func,getPosition:m.default.func}),children:m.default.node,className:m.default.string,disabled:m.default.bool,handle:T,max:m.default.number,min:m.default.number,onClick:m.default.func,onChange:m.default.func,onKeyPress:m.default.func,onSliderDragEnd:m.default.func,onSliderDragMove:m.default.func,onSliderDragStart:m.default.func,onValuesUpdated:m.default.func,orientation:m.default.oneOf(["horizontal","vertical"]),pitComponent:T,pitPoints:k,progressBar:T,snap:m.default.bool,snapPoints:k,values:k},E={algorithm:w.default,className:"",children:null,disabled:!1,handle:C,max:b.PERCENT_FULL,min:b.PERCENT_EMPTY,onClick:null,onChange:null,onKeyPress:null,onSliderDragEnd:null,onSliderDragMove:null,onSliderDragStart:null,onValuesUpdated:null,orientation:"horizontal",pitComponent:null,pitPoints:[],progressBar:"div",snap:!1,snapPoints:[],values:[b.PERCENT_EMPTY]},P=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props,i=r.algorithm,a=r.max,c=r.min,l=r.values;return n.state={className:u(n.props),handlePos:l.map(function(e){return i.getPosition(e,c,a)}),handleDimensions:0,mousePos:null,sliderBox:{},slidingIndex:null,values:l},n.getPublicState=n.getPublicState.bind(n),n.getSliderBoundingBox=n.getSliderBoundingBox.bind(n),n.getProgressStyle=n.getProgressStyle.bind(n),n.getMinValue=n.getMinValue.bind(n),n.getMaxValue=n.getMaxValue.bind(n),n.getHandleDimensions=n.getHandleDimensions.bind(n),n.getClosestSnapPoint=n.getClosestSnapPoint.bind(n),n.getSnapPosition=n.getSnapPosition.bind(n),n.getNextPositionForKey=n.getNextPositionForKey.bind(n),n.getNextState=n.getNextState.bind(n),n.handleClick=n.handleClick.bind(n),n.getClosestHandle=n.getClosestHandle.bind(n),n.setStartSlide=n.setStartSlide.bind(n),n.startMouseSlide=n.startMouseSlide.bind(n),n.startTouchSlide=n.startTouchSlide.bind(n),n.handleMouseSlide=n.handleMouseSlide.bind(n),n.handleTouchSlide=n.handleTouchSlide.bind(n),n.handleSlide=n.handleSlide.bind(n),n.endSlide=n.endSlide.bind(n),n.handleKeydown=n.handleKeydown.bind(n),n.validatePosition=n.validatePosition.bind(n),n.validateValues=n.validateValues.bind(n),n.canMove=n.canMove.bind(n),n.fireChangeEvent=n.fireChangeEvent.bind(n),n.slideTo=n.slideTo.bind(n),n.updateNewValues=n.updateNewValues.bind(n),n}return c(t,e),h(t,[{key:"componentWillReceiveProps",value:function(){function e(e){var t=this.props,n=t.className,r=t.disabled,i=t.min,a=t.max,o=t.orientation,s=this.state,c=s.values,l=s.slidingIndex,d=e.min!==i||e.max!==a,f=c.length!==e.values.length||c.some(function(t,n){return e.values[n]!==t}),h=e.className!==n||e.orientation!==o,p=e.disabled&&!r;h&&this.setState({className:u(e)}),(d||f)&&this.updateNewValues(e),p&&null!==l&&this.endSlide()}return e}()},{key:"getPublicState",value:function(){function e(){var e=this.props,t=e.min;return{max:e.max,min:t,values:this.state.values}}return e}()},{key:"getSliderBoundingBox",value:function(){function e(){var e=this.refs.rheostat,t=e.getDOMNode?e.getDOMNode():e,n=t.getBoundingClientRect();return{height:n.height||t.clientHeight,left:n.left,top:n.top,width:n.width||t.clientWidth}}return e}()},{key:"getProgressStyle",value:function(){function e(e){var t=this.state.handlePos,n=t[e];if(0===e)return"vertical"===this.props.orientation?{height:String(n)+"%",top:0}:{left:0,width:String(n)+"%"};var r=t[e-1],i=n-r;return"vertical"===this.props.orientation?{height:i+"%",top:String(r)+"%"}:{left:String(r)+"%",width:i+"%"}}return e}()},{key:"getMinValue",value:function(){function e(e){return this.state.values[e-1]?Math.max(this.props.min,this.state.values[e-1]):this.props.min}return e}()},{key:"getMaxValue",value:function(){function e(e){return this.state.values[e+1]?Math.min(this.props.max,this.state.values[e+1]):this.props.max}return e}()},{key:"getHandleDimensions",value:function(){function e(e,t){var n=e.currentTarget||null;return n?"vertical"===this.props.orientation?n.clientHeight/t.height*b.PERCENT_FULL/2:n.clientWidth/t.width*b.PERCENT_FULL/2:0}return e}()},{key:"getClosestSnapPoint",value:function(){function e(e){return this.props.snapPoints.length?this.props.snapPoints.reduce(function(t,n){return Math.abs(t-e)<Math.abs(n-e)?t:n}):e}return e}()},{key:"getSnapPosition",value:function(){function e(e){if(!this.props.snap)return e;var t=this.props,n=t.algorithm,r=t.max,i=t.min,a=n.getValue(e,i,r),o=this.getClosestSnapPoint(a);return n.getPosition(o,i,r)}return e}()},{key:"getNextPositionForKey",value:function(){function e(e,t){var n,r=this.state,i=r.handlePos,o=r.values,s=this.props,c=s.algorithm,u=s.max,l=s.min,d=s.snapPoints,f=this.props.snap,h=o[e],p=i[e],v=p,g=1;u>=100?p=Math.round(p):g=100/(u-l);var m=null;f&&(m=d.indexOf(this.getClosestSnapPoint(o[e])));var y=(n={},a(n,b.KEYS.LEFT,function(e){return-1*e}),a(n,b.KEYS.RIGHT,function(e){return 1*e}),a(n,b.KEYS.UP,function(e){return 1*e}),a(n,b.KEYS.DOWN,function(e){return-1*e}),a(n,b.KEYS.PAGE_DOWN,function(e){return e>1?-e:-10*e}),a(n,b.KEYS.PAGE_UP,function(e){return e>1?e:10*e}),n);if(S.call(y,t))p+=y[t](g),f&&(p>v?m<d.length-1&&(h=d[m+1]):m>0&&(h=d[m-1]));else if(t===b.KEYS.HOME)p=b.PERCENT_EMPTY,f&&(h=d[0]);else{if(t!==b.KEYS.END)return null;p=b.PERCENT_FULL,f&&(h=d[d.length-1])}return f?c.getPosition(h,l,u):p}return e}()},{key:"getNextState",value:function(){function e(e,t){var n=this,r=this.state.handlePos,i=this.props,a=i.max,o=i.min,s=this.validatePosition(e,t),c=r.map(function(t,n){return n===e?s:t});return{handlePos:c,values:c.map(function(e){return n.props.algorithm.getValue(e,o,a)})}}return e}()},{key:"getClosestHandle",value:function(){function e(e){var t=this.state.handlePos;return t.reduce(function(n,r,i){return Math.abs(t[i]-e)<Math.abs(t[n]-e)?i:n},0)}return e}()},{key:"setStartSlide",value:function(){function e(e,t,n){var r=this.getSliderBoundingBox();this.setState({handleDimensions:this.getHandleDimensions(e,r),mousePos:{x:t,y:n},sliderBox:r,slidingIndex:l(e)})}return e}()},{key:"startMouseSlide",value:function(){function e(e){this.setStartSlide(e,e.clientX,e.clientY),"function"==typeof document.addEventListener?(document.addEventListener("mousemove",this.handleMouseSlide,!1),document.addEventListener("mouseup",this.endSlide,!1)):(document.attachEvent("onmousemove",this.handleMouseSlide),document.attachEvent("onmouseup",this.endSlide)),d(e)}return e}()},{key:"startTouchSlide",value:function(){function e(e){if(!(e.changedTouches.length>1)){var t=e.changedTouches[0];this.setStartSlide(e,t.clientX,t.clientY),document.addEventListener("touchmove",this.handleTouchSlide,!1),document.addEventListener("touchend",this.endSlide,!1),this.props.onSliderDragStart&&this.props.onSliderDragStart(),d(e)}}return e}()},{key:"handleMouseSlide",value:function(){function e(e){null!==this.state.slidingIndex&&(this.handleSlide(e.clientX,e.clientY),d(e))}return e}()},{key:"handleTouchSlide",value:function(){function e(e){if(null!==this.state.slidingIndex){if(e.changedTouches.length>1)return void this.endSlide();var t=e.changedTouches[0];this.handleSlide(t.clientX,t.clientY),d(e)}}return e}()},{key:"handleSlide",value:function(){function e(e,t){var n=this.state,r=n.slidingIndex,i=n.sliderBox,a="vertical"===this.props.orientation?(t-i.top)/i.height*b.PERCENT_FULL:(e-i.left)/i.width*b.PERCENT_FULL;this.slideTo(r,a),this.canMove(r,a)&&(this.setState({x:e,y:t}),this.props.onSliderDragMove&&this.props.onSliderDragMove())}return e}()},{key:"endSlide",value:function(){function e(){var e=this,t=this.state.slidingIndex;if(this.setState({slidingIndex:null}),"function"==typeof document.removeEventListener?(document.removeEventListener("mouseup",this.endSlide,!1),document.removeEventListener("touchend",this.endSlide,!1),document.removeEventListener("touchmove",this.handleTouchSlide,!1),document.removeEventListener("mousemove",this.handleMouseSlide,!1)):(document.detachEvent("onmousemove",this.handleMouseSlide),document.detachEvent("onmouseup",this.endSlide)),this.props.onSliderDragEnd&&this.props.onSliderDragEnd(),this.props.snap){var n=this.getSnapPosition(this.state.handlePos[t]);this.slideTo(t,n,function(){return e.fireChangeEvent()})}else this.fireChangeEvent()}return e}()},{key:"handleClick",value:function(){function e(e){var t=this;if(!e.target.getAttribute("data-handle-key")){var n=this.getSliderBoundingBox(),r="vertical"===this.props.orientation?(e.clientY-n.top)/n.height:(e.clientX-n.left)/n.width,i=r*b.PERCENT_FULL,a=this.getClosestHandle(i),o=this.getSnapPosition(i);this.slideTo(a,o,function(){return t.fireChangeEvent()}),this.props.onClick&&this.props.onClick()}}return e}()},{key:"handleKeydown",value:function(){function e(e){var t=this,n=l(e);if(e.keyCode===b.KEYS.ESC)return void e.currentTarget.blur();var r=this.getNextPositionForKey(n,e.keyCode);null!==r&&(this.canMove(n,r)&&(this.slideTo(n,r,function(){return t.fireChangeEvent()}),this.props.onKeyPress&&this.props.onKeyPress()),d(e))}return e}()},{key:"validatePosition",value:function(){function e(e,t){var n=this.state,r=n.handlePos,i=n.handleDimensions;return Math.max(Math.min(t,void 0!==r[e+1]?r[e+1]-i:b.PERCENT_FULL),void 0!==r[e-1]?r[e-1]+i:b.PERCENT_EMPTY)}return e}()},{key:"validateValues",value:function(){function e(e,t){var n=t||this.props,r=n.max,i=n.min;return e.map(function(e,t,n){var a=Math.max(Math.min(e,r),i);return n.length&&a<n[t-1]?n[t-1]:a})}return e}()},{key:"canMove",value:function(){function e(e,t){var n=this.state,r=n.handlePos,i=n.handleDimensions;return!(t<b.PERCENT_EMPTY)&&(!(t>b.PERCENT_FULL)&&(!(t>(void 0!==r[e+1]?r[e+1]-i:1/0))&&!(t<(void 0!==r[e-1]?r[e-1]+i:-1/0))))}return e}()},{key:"fireChangeEvent",value:function(){function e(){var e=this.props.onChange;e&&e(this.getPublicState())}return e}()},{key:"slideTo",value:function(){function e(e,t,n){var r=this,i=this.getNextState(e,t);this.setState(i,function(){var e=r.props.onValuesUpdated;e&&e(r.getPublicState()),n&&n()})}return e}()},{key:"updateNewValues",value:function(){function e(e){var t=this;if(null===this.state.slidingIndex){var n=e.max,r=e.min,i=e.values,a=this.props.algorithm,o=this.validateValues(i,e);this.setState({handlePos:o.map(function(e){return a.getPosition(e,r,n)}),values:o},function(){return t.fireChangeEvent()})}}return e}()},{key:"render",value:function(){function e(){var e=this,t=this.props,n=t.algorithm,r=t.children,i=t.disabled,a=t.handle,o=t.max,s=t.min,c=t.orientation,u=t.pitComponent,l=t.pitPoints,d=t.progressBar,f=this.state,h=f.className,p=f.handlePos,g=f.values;return v.default.createElement("div",{className:h,ref:"rheostat",onClick:!i&&this.handleClick,style:{position:"relative"}},v.default.createElement("div",{className:"rheostat-background"}),p.map(function(t,n){var r="vertical"===c?{top:String(t)+"%",position:"absolute"}:{left:String(t)+"%",position:"absolute"};return v.default.createElement(a,{"aria-valuemax":e.getMaxValue(n),"aria-valuemin":e.getMinValue(n),"aria-valuenow":g[n],"aria-disabled":i,"data-handle-key":n,className:"rheostat-handle",key:"handle-"+String(n),onClick:e.killEvent,onKeyDown:!i&&e.handleKeydown,onMouseDown:!i&&e.startMouseSlide,onTouchStart:!i&&e.startTouchSlide,role:"slider",style:r,tabIndex:0})}),p.map(function(t,n,r){return 0===n&&r.length>1?null:v.default.createElement(d,{className:"rheostat-progress",key:"progress-bar-"+String(n),style:e.getProgressStyle(n)})}),u&&l.map(function(e){var t=n.getPosition(e,s,o),r="vertical"===c?{top:String(t)+"%",position:"absolute"}:{left:String(t)+"%",position:"absolute"};return v.default.createElement(u,{key:"pit-"+String(e),style:r},e)}),r)}return e}()}]),t}(v.default.Component);P.propTypes=x,P.defaultProps=E,t.default=P},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={getPosition:function(){function e(e,t,n){return(e-t)/(n-t)*100}return e}(),getValue:function(){function e(e,t,n){var r=e/100;return 0===e?t:100===e?n:Math.round((n-t)*r+t)}return e}()}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.KEYS={DOWN:40,END:35,ESC:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,UP:38},t.PERCENT_EMPTY=0,t.PERCENT_FULL=100},function(e,t,n){"use strict";function r(){}function i(e,t){var n,i,a,o,s=j;for(o=arguments.length;o-- >2;)L.push(arguments[o]);for(t&&null!=t.children&&(L.length||L.push(t.children),delete t.children);L.length;)if((i=L.pop())&&void 0!==i.pop)for(o=i.length;o--;)L.push(i[o]);else"boolean"==typeof i&&(i=null),(a="function"!=typeof e)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(a=!1)),a&&n?s[s.length-1]+=i:s===j?s=[i]:s.push(i),n=a;var c=new r;return c.nodeName=e,c.children=s,c.attributes=null==t?void 0:t,c.key=null==t?void 0:t.key,void 0!==R.vnode&&R.vnode(c),c}function a(e,t){for(var n in t)e[n]=t[n];return e}function o(e,t){return i(e.nodeName,a(a({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}function s(e){!e._dirty&&(e._dirty=!0)&&1==U.push(e)&&(R.debounceRendering||D)(c)}function c(){var e,t=U;for(U=[];e=t.pop();)e._dirty&&P(e)}function u(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&l(e,t.nodeName):n||e._componentConstructor===t.nodeName}function l(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function d(e){var t=a({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function f(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}function h(e){var t=e.parentNode;t&&t.removeChild(e)}function p(e,t,n,r,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||i)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var a in n)a in r||(e.style[a]="");for(var a in r)e.style[a]="number"==typeof r[a]&&!1===N.test(a)?r[a]+"px":r[a]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var o=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,g,o):e.removeEventListener(t,g,o),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!i&&t in e)v(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var s=i&&t!==(t=t.replace(/^xlink\:?/,""));null==r||!1===r?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function v(e,t,n){try{e[t]=n}catch(e){}}function g(e){return this._listeners[e.type](R.event&&R.event(e)||e)}function m(){for(var e;e=M.pop();)R.afterMount&&R.afterMount(e),e.componentDidMount&&e.componentDidMount()}function y(e,t,n,r,i,a){F++||(B=null!=i&&void 0!==i.ownerSVGElement,q=null!=e&&!("__preactattr_"in e));var o=b(e,t,n,r,a);return i&&o.parentNode!==i&&i.appendChild(o),--F||(q=!1,a||m()),o}function b(e,t,n,r,i){var a=e,o=B;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(a=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(a,e),w(e,!0))),a.__preactattr_=!0,a;var s=t.nodeName;if("function"==typeof s)return $(e,t,n,r);if(B="svg"===s||"foreignObject"!==s&&B,s=String(s),(!e||!l(e,s))&&(a=f(s,B),e)){for(;e.firstChild;)a.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(a,e),w(e,!0)}var c=a.firstChild,u=a.__preactattr_,d=t.children;if(null==u){u=a.__preactattr_={};for(var h=a.attributes,p=h.length;p--;)u[h[p].name]=h[p].value}return!q&&d&&1===d.length&&"string"==typeof d[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=d[0]&&(c.nodeValue=d[0]):(d&&d.length||null!=c)&&_(a,d,n,r,q||null!=u.dangerouslySetInnerHTML),k(a,t.attributes,u),B=o,a}function _(e,t,n,r,i){var a,o,s,c,l,d=e.childNodes,f=[],p={},v=0,g=0,m=d.length,y=0,_=t?t.length:0;if(0!==m)for(var S=0;S<m;S++){var k=d[S],T=k.__preactattr_,C=_&&T?k._component?k._component.__key:T.key:null;null!=C?(v++,p[C]=k):(T||(void 0!==k.splitText?!i||k.nodeValue.trim():i))&&(f[y++]=k)}if(0!==_)for(var S=0;S<_;S++){c=t[S],l=null;var C=c.key;if(null!=C)v&&void 0!==p[C]&&(l=p[C],p[C]=void 0,v--);else if(!l&&g<y)for(a=g;a<y;a++)if(void 0!==f[a]&&u(o=f[a],c,i)){l=o,f[a]=void 0,a===y-1&&y--,a===g&&g++;break}l=b(l,c,n,r),s=d[S],l&&l!==e&&l!==s&&(null==s?e.appendChild(l):l===s.nextSibling?h(s):e.insertBefore(l,s))}if(v)for(var S in p)void 0!==p[S]&&w(p[S],!1);for(;g<=y;)void 0!==(l=f[y--])&&w(l,!1)}function w(e,t){var n=e._component;n?A(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||h(e),S(e))}function S(e){for(e=e.lastChild;e;){var t=e.previousSibling;w(e,!0),e=t}}function k(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||p(e,r,n[r],n[r]=void 0,B);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||p(e,r,n[r],n[r]=t[r],B)}function T(e){var t=e.constructor.name;(H[t]||(H[t]=[])).push(e)}function C(e,t,n){var r,i=H[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),O.call(r,t,n)):(r=new O(t,n),r.constructor=e,r.render=x),i)for(var a=i.length;a--;)if(i[a].constructor===e){r.nextBase=i[a].nextBase,i.splice(a,1);break}return r}function x(e,t,n){return this.constructor(e,n)}function E(e,t,n,r,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===R.syncComponentUpdates&&e.base?s(e):P(e,1,i)),e.__ref&&e.__ref(e))}function P(e,t,n,r){if(!e._disable){var i,o,s,c=e.props,u=e.state,l=e.context,f=e.prevProps||c,h=e.prevState||u,p=e.prevContext||l,v=e.base,g=e.nextBase,b=v||g,_=e._component,S=!1;if(v&&(e.props=f,e.state=h,e.context=p,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,u,l)?S=!0:e.componentWillUpdate&&e.componentWillUpdate(c,u,l),e.props=c,e.state=u,e.context=l),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!S){i=e.render(c,u,l),e.getChildContext&&(l=a(a({},l),e.getChildContext()));var k,T,x=i&&i.nodeName;if("function"==typeof x){var $=d(i);o=_,o&&o.constructor===x&&$.key==o.__key?E(o,$,1,l,!1):(k=o,e._component=o=C(x,$,l),o.nextBase=o.nextBase||g,o._parentComponent=e,E(o,$,0,l,!1),P(o,1,n,!0)),T=o.base}else s=b,k=_,k&&(s=e._component=null),(b||1===t)&&(s&&(s._component=null),T=y(s,i,l,n||!v,b&&b.parentNode,!0));if(b&&T!==b&&o!==_){var O=b.parentNode;O&&T!==O&&(O.replaceChild(T,b),k||(b._component=null,w(b,!1)))}if(k&&A(k),e.base=T,T&&!r){for(var I=e,L=e;L=L._parentComponent;)(I=L).base=T;T._component=I,T._componentConstructor=I.constructor}}if(!v||n?M.unshift(e):S||(e.componentDidUpdate&&e.componentDidUpdate(f,h,p),R.afterUpdate&&R.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);F||r||m()}}function $(e,t,n,r){for(var i=e&&e._component,a=i,o=e,s=i&&e._componentConstructor===t.nodeName,c=s,u=d(t);i&&!c&&(i=i._parentComponent);)c=i.constructor===t.nodeName;return i&&c&&(!r||i._component)?(E(i,u,3,n,r),e=i.base):(a&&!s&&(A(a),e=o=null),i=C(t.nodeName,u,n),e&&!i.nextBase&&(i.nextBase=e,o=null),E(i,u,1,n,r),e=i.base,o&&e!==o&&(o._component=null,w(o,!1))),e}function A(e){R.beforeUnmount&&R.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?A(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,h(t),T(e),S(t)),e.__ref&&e.__ref(null)}function O(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function I(e,t,n){return y(n,e,{},!1,t,!1)}n.d(t,"a",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return O}),n.d(t,"c",function(){return I}),n.d(t,"b",function(){return R});var R={},L=[],j=[],D="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,N=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,U=[],M=[],F=0,B=!1,q=!1,H={};a(O.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=a({},n)),a(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),s(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),P(this,2)},render:function(){}})},function(e,t,n){"use strict";(function(t){function r(e,n,r,c,u){if("production"!==t.env.NODE_ENV)for(var l in e)if(e.hasOwnProperty(l)){var d;try{i("function"==typeof e[l],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",c||"React class",r,l),d=e[l](n,l,c,r,null,o)}catch(e){d=e}if(a(!d||d instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",c||"React class",r,l,typeof d),d instanceof Error&&!(d.message in s)){s[d.message]=!0;var f=u?u():"";a(!1,"Failed %s type: %s%s",r,d.message,null!=f?f:"")}}}if("production"!==t.env.NODE_ENV)var i=n(152),a=n(260),o=n(190),s={};e.exports=r}).call(t,n(9))},function(e,t,n){"use strict";var r=n(151),i=n(152),a=n(190);e.exports=function(){function e(e,t,n,r,o,s){s!==a&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";(function(t){var r=n(151),i=n(152),a=n(260),o=n(190),s=n(1028);e.exports=function(e,n){function c(e){var t=e&&(P&&e[P]||e[$]);if("function"==typeof t)return t}function u(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function l(e){this.message=e,this.stack=""}function d(e){function r(r,u,d,f,h,p,v){if(f=f||A,p=p||d,v!==o)if(n)i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==t.env.NODE_ENV&&"undefined"!=typeof console){var g=f+":"+d;!s[g]&&c<3&&(a(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",p,f),s[g]=!0,c++)}return null==u[d]?r?new l(null===u[d]?"The "+h+" `"+p+"` is marked as required in `"+f+"`, but its value is `null`.":"The "+h+" `"+p+"` is marked as required in `"+f+"`, but its value is `undefined`."):null:e(u,d,f,h,p)}if("production"!==t.env.NODE_ENV)var s={},c=0;var u=r.bind(null,!1);return u.isRequired=r.bind(null,!0),u}function f(e){function t(t,n,r,i,a,o){var s=t[n];if(T(s)!==e)return new l("Invalid "+i+" `"+a+"` of type `"+C(s)+"` supplied to `"+r+"`, expected `"+e+"`.");return null}return d(t)}function h(){return d(r.thatReturnsNull)}function p(e){function t(t,n,r,i,a){if("function"!=typeof e)return new l("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){return new l("Invalid "+i+" `"+a+"` of type `"+T(s)+"` supplied to `"+r+"`, expected an array.")}for(var c=0;c<s.length;c++){var u=e(s,c,r,i,a+"["+c+"]",o);if(u instanceof Error)return u}return null}return d(t)}function v(){function t(t,n,r,i,a){var o=t[n];if(!e(o)){return new l("Invalid "+i+" `"+a+"` of type `"+T(o)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return d(t)}function g(e){function t(t,n,r,i,a){if(!(t[n]instanceof e)){var o=e.name||A;return new l("Invalid "+i+" `"+a+"` of type `"+E(t[n])+"` supplied to `"+r+"`, expected instance of `"+o+"`.")}return null}return d(t)}function m(e){function n(t,n,r,i,a){for(var o=t[n],s=0;s<e.length;s++)if(u(o,e[s]))return null;return new l("Invalid "+i+" `"+a+"` of value `"+o+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?d(n):("production"!==t.env.NODE_ENV&&a(!1,"Invalid argument supplied to oneOf, expected an instance of array."),r.thatReturnsNull)}function y(e){function t(t,n,r,i,a){if("function"!=typeof e)return new l("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],c=T(s);if("object"!==c)return new l("Invalid "+i+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var u in s)if(s.hasOwnProperty(u)){var d=e(s,u,r,i,a+"."+u,o);if(d instanceof Error)return d}return null}return d(t)}function b(e){function n(t,n,r,i,a){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,n,r,i,a,o))return null}return new l("Invalid "+i+" `"+a+"` supplied to `"+r+"`.")}if(!Array.isArray(e))return"production"!==t.env.NODE_ENV&&a(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),r.thatReturnsNull;for(var i=0;i<e.length;i++){var s=e[i];if("function"!=typeof s)return a(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",x(s),i),r.thatReturnsNull}return d(n)}function _(){function e(e,t,n,r,i){return S(e[t])?null:new l("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}return d(e)}function w(e){function t(t,n,r,i,a){var s=t[n],c=T(s);if("object"!==c)return new l("Invalid "+i+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");for(var u in e){var d=e[u];if(d){var f=d(s,u,r,i,a+"."+u,o);if(f)return f}}return null}return d(t)}function S(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(S);if(null===t||e(t))return!0;var n=c(t);if(!n)return!1;var r,i=n.call(t);if(n!==t.entries){for(;!(r=i.next()).done;)if(!S(r.value))return!1}else for(;!(r=i.next()).done;){var a=r.value;if(a&&!S(a[1]))return!1}return!0;default:return!1}}function k(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function T(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":k(t,e)?"symbol":t}function C(e){if(void 0===e||null===e)return""+e;var t=T(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function x(e){var t=C(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function E(e){return e.constructor&&e.constructor.name?e.constructor.name:A}var P="function"==typeof Symbol&&Symbol.iterator,$="@@iterator",A="<<anonymous>>",O={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:h(),arrayOf:p,element:v(),instanceOf:g,node:_(),objectOf:y,oneOf:m,oneOfType:b,shape:w};return l.prototype=Error.prototype,O.checkPropTypes=s,O.PropTypes=O,O}}).call(t,n(9))},function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(o(e),function(o){var s=encodeURIComponent(i(o))+n;return a(e[o])?r(e[o],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[o]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t){e.exports='<div class="alert alert-{{ $ctrl.type }} alert-dismissible pl25" role="alert">\n    <button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="$ctrl.close($event)">\n        <span aria-hidden="true">×</span>\n    </button>\n    <h5 class="mt5 white"\n        ng-if="title">\n        <i ng-if="$ctrl.titleIcon" class="fa {{ $ctrl.titleIcon }}"></i>\n        <span ng-transclude="title"></span>\n    </h5>\n    <div ng-transclude="body"></div>\n</div>'},function(e,t){e.exports='<spinner ng-if="$ctrl.loading"></spinner>\n\n<div class="upsell row" ng-if="!$ctrl.loading && !$ctrl.freeSection">\n    <h3 class="upsell__title visible-mobile">\n        Need access to subscription content?\n    </h3>\n    <div class="upsell__body">\n        <div class="upsell__content">\n            <h3 class="upsell__title hidden-mobile-block">\n                Need access to subscription content?\n            </h3>\n            <p class="upsell__text">\n                As a Packt for Teams admin you do not automatically have full access to our eBooks &amp; Videos.\n                To view content via an available seat please head\n                to the User Management page and select <strong>Assign seat to myself</strong>.\n            </p>\n            <div>\n                <a ng-href="{{ $ctrl.userManagementLink }}"\n                    target="_self"\n                    class="btn btn-primary">\n                    User Management\n                    <i class="fa fa-chevron-right ml5"></i>\n                </a>\n            </div>\n        </div>\n        <div class="upsell__image-wrapper">\n            <img ng-src="{{ $ctrl.cdnUrl(\'subs-upsell-banner.png\') }}"\n            class="img-responsive mb20">\n        </div>\n    </div>\n</div>\n\n<div class="b2b-soft-upsell" ng-if="!$ctrl.loading && $ctrl.freeSection">\n    <div class="row">\n        <div class="flex-sm outer">\n            <div class="left-hand flex-container">\n                <img class="viewing-icon" ng-src="{{ $ctrl.iconSrc }}" alt="Viewing">\n                <div class="left-hand__copy">You are currently viewing a FREE SECTION</div>\n            </div>\n            <div class="right-hand flex-container">\n                <p>\n                    As a Packt for Teams admin you do not automatically have full access to our eBooks &amp; Videos.\n                    To view content via an available seat please head\n                    to the User Management page and select <strong>Assign seat to myself</strong>.\n                </p>\n                <div class="flex-container btn-wrapper">\n                    <a ng-href="{{ $ctrl.userManagementLink }}" target="_self" class="btn btn-default">\n                        User Management\n                        <i class="fa fa-chevron-right ml5"></i>\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n'},function(e,t){e.exports='<div class="row">\n    <div class="col-md-4 center-block-xs">\n        <div class="bookmark-info">\n            <div class="bookmarks-img-wrapper">\n                <a ng-href="{{ $ctrl.product.product.lastReadPath }}">\n                    <img class="img-responsive title-shadow"\n                        ng-src="{{ $ctrl.configService.getCoverImage($ctrl.product.product.isbn13) }}"\n                        title="{{ $ctrl.product.product.title }}"/>\n                </a>\n            </div>\n            <div class="bookmarks-content">\n                <h3 class="bookmark-title" ng-bind-html="$ctrl.convertTagToBadge($ctrl.product.product.title)"></h3>\n                <p ng-if="$ctrl.product.product.type === \'books\'">\n                    <icons icon-name="book" class="bookmark-product-type-icon"></icons> Book\n                </p>\n                <p ng-if="$ctrl.product.product.type === \'videos\'">\n                    <icons icon-name="video" class="bookmark-product-type-icon"></icons> Video\n                </p>\n            </div>\n        </div>\n    </div>\n    <div class="col-md-8">\n        <ul class="list-group bookmarks-list">\n            <li ng-repeat="(key, bookmark) in $ctrl.product.bookmarks"\n                class="bookmark-list-item list-group-item pl0 pr0 row">\n                <div class="col-sm-5 col-md-8 text-center-xs">\n                    <h6 ng-bind-html="bookmark.title" class="bookmark-section-title concat"></h6>\n                </div>\n                <div class="col-sm-7 col-md-4 text-left text-center-xs">\n                    <div class="bookmarks-buttons">\n                        <a ng-click="$ctrl.removeBookmark(bookmark, $event)"\n                            class="btn btn-default bookmark-btn">\n                            Remove <i class="fa fa-times-circle ml5" aria-hidden="true"></i>\n                        </a>\n                        <a class="btn btn-info bookmark-btn"\n                            ng-click="$ctrl.resumeFromBookmark($event, bookmark.contentPath)"\n                            ng-href="{{ $ctrl.baseUrl }}{{ $ctrl.product.product.path }}{{ bookmark.contentPath }}">\n                            Resume\n                        </a>\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n'},function(e,t){e.exports='<div class="stepwizard mt25">\n    <div class="stepwizard-row setup-panel">\n        <div class="stepwizard-step" ng-if="$ctrl.isB2bCheckout">\n            <a href="#"\n                class="btn btn-circle btn-success"\n                disabled="disabled">\n                <i class="fa fa-check"></i>\n            </a>\n            <p>Plan</p>\n        </div>\n        <div class="stepwizard-step">\n            <a href="#"\n                class="btn btn-circle"\n                ng-class="{\n                    \'btn-primary\': $ctrl.step === \'account\',\n                    \'btn-success\': $ctrl.step !== \'account\'\n                }"\n                disabled="disabled">\n                <i class="fa fa-check" ng-if="$ctrl.step !== \'account\'"></i>\n                <icons icon-name="user" ng-if="$ctrl.step === \'account\' && $ctrl.isB2bCheckout"></icons>\n                <i class="fa fa-user" ng-if="$ctrl.step === \'account\' && !$ctrl.isB2bCheckout"></i>\n            </a>\n            <p>User Details</p>\n        </div>\n        <div class="stepwizard-step">\n            <a href="#"\n                class="btn btn-circle"\n                ng-class="{\n                    \'btn-success\': $ctrl.step === \'payment\',\n                    \'btn-primary\': $ctrl.step === \'address\',\n                    \'btn-default\': $ctrl.step === \'account\'\n                }"\n                disabled="disabled">\n                <i class="fa fa-check" ng-if="$ctrl.step === \'payment\'"></i>\n                <icons icon-name="home" ng-if="($ctrl.step === \'account\' || $ctrl.step === \'address\') && $ctrl.isB2bCheckout"></icons>\n                <i class="fa fa-home" ng-if="($ctrl.step === \'account\' || $ctrl.step === \'address\') && !$ctrl.isB2bCheckout"></i>\n            </a>\n            <p>Billing Details</p>\n        </div>\n        <div class="stepwizard-step">\n            <a href="#"\n                class="btn btn-circle"\n                ng-class="{\n                    \'btn-primary\': $ctrl.step === \'payment\',\n                    \'btn-default\': $ctrl.step !== \'payment\'\n                }"\n                disabled="disabled">\n                <icons ng-if="$ctrl.isB2bCheckout" icon-name="creditCard"></icons>\n                <i ng-if="!$ctrl.isB2bCheckout" class="fa fa-lock"></i>\n            </a>\n            <p>Payment Details</p>\n        </div>\n    </div>\n</div>\n'},function(e,t){e.exports='<div class="content-hard-upsell__container">\n    <div class="content-hard-upsell__image">\n        <img class="img-responsive" ng-src="{{ $ctrl.sideImageSrc }}" alt="Free trial">\n    </div>\n    <div class="content-hard-upsell__body text-center">\n        <h3 class="content-hard-upsell__title">\n            <img class="content-hard-upsell__title-icon" ng-src="{{ $ctrl.packtArrowSrc }}" alt="Packt arrow">\n            Continue reading with a <strong>10 day free trial</strong>\n        </h3>\n        <p class="content-hard-upsell__description">\n            With a Packt Subscription, you can keep track of your learning and progress\n            your skills with 7,000+ eBooks and Videos.\n        </p>\n        <a ng-href="{{ $ctrl.checkoutUrl }}" class="btn btn-primary">\n            Continue learning now\n        </a>\n    </div>\n</div>\n'},function(e,t){e.exports='<div class="content-login-banner">\n    <i class="fa fa-exclamation-circle fa-lg mr5"></i> You\'re currently viewing a course logged out.\n    <a ng-href="{{ $ctrl.loginUrl }}" class="link link-white underline">Sign in</a> to your account or\n    <a ng-href="{{ $ctrl.checkoutUrl }}" class="link link-white underline">start a free trial</a>.\n</div>\n'},function(e,t){e.exports='<div class="content-soft-upsell__container">\n    <div class="content-soft-upsell__body text-center">\n        <h3 class="content-soft-upsell__title">\n            <img class="content-soft-upsell__title-icon" ng-src="{{ $ctrl.padlockIconSrc }}" alt="Padlock">\n            You are currently viewing a free section\n        </h3>\n        <p class="content-soft-upsell__description">\n            Access this and 7,000+ eBooks and Videos with a Packt\n            subscription, with over 100 new titles released each month.\n        </p>\n        <a ng-href="{{ $ctrl.checkoutUrl }}" class="btn btn-primary">\n            Start your 10-day FREE trial\n        </a>\n    </div>\n</div>\n'},function(e,t){e.exports='<a id="download-{{ $ctrl.isbn }}"\n    ng-href="{{ $ctrl.productBaseUrl }}"\n    class="product">\n    <div class="product__body">\n        <div class="col-xs-3">\n            <img class="product-img"\n                ng-if="$ctrl.imagePath"\n                ng-src="{{ $ctrl.imagePath }}"/>\n            <div ng-if="$ctrl.type === \'books\'" class="product-type">\n                <icons icon-name="book"></icons>\n                <span>Book</span>\n            </div>\n            <div ng-if="$ctrl.type === \'videos\'" class="product-type">\n                <icons icon-name="video"></icons>\n                <span>Video</span>\n            </div>\n        </div>\n        <div class="col-xs-9">\n            <h2 class="product-title" ng-bind-html="$ctrl.title"></h2>\n            <div class="product-duration" ng-if="$ctrl.length">\n                <i class="fa fa-clock-o mr5" aria-hidden="true"></i>\n                {{ $ctrl.length }}\n            </div>\n            <div class="product-description" ng-bind-html="$ctrl.oneLiner"></div>\n        </div>\n    </div>\n</a>\n\n<div class="panel-footer clearfix" ng-if="$ctrl.productType === \'book\'">\n    <div class="btn-group">\n        <button ng-show="$ctrl.downloadInfo.isInProgress"\n            class="btn btn-default"\n            disabled>\n            <i class="fa fa-spinner fa-pulse fa-fw" aria-hidden="true"></i>\n            <span class="hidden-xs ml5">In progress...</span>\n        </button>\n        <button ng-show="$ctrl.downloadInfo.isInProgress && $ctrl.downloadInfo.isCancelable"\n            ng-click="$ctrl.cancelDownload()"\n            class="btn btn-default">\n            <i class="fa fa-times fa-lg" aria-hidden="true"></i>\n            <span class="hidden-xs ml5">Cancel Download</span>\n        </button>\n        <button ng-show="$ctrl.downloadInfo.isFinished"\n            ng-click="$ctrl.removeDownload()"\n            class="btn btn-default">\n            <i class="fa fa-trash fa-lg" aria-hidden="true"></i>\n            <span class="hidden-xs ml5">Remove from device</span>\n        </button>\n    </div>\n\n    <a ng-href="{{ $ctrl.lastReadUrl ? $ctrl.lastReadUrl : $ctrl.firstSectionUrl }}"\n        class="btn btn-info btn-lg pull-right">\n        {{ $ctrl.continueText }}\n        <span class="hidden-xs">Book</span>\n    </a>\n</div>\n\n<ul ng-if="$ctrl.productType === \'video\'"\n    class="cover-accordion list-group">\n    <a ng-class="{ \'collapsed\': !$ctrl.tocOpen }"\n        ng-click="$ctrl.toggleToc($event)"\n        aria-expanded="{{ $ctrl.tocOpen }}"\n        class="cover-accordion__title list-group-item">\n        {{ $ctrl.tocOpen ? \'Hide\' : \'Show\' }} Downloaded Sections\n        <i class="fa pull-right"\n            ng-class="{\n                \'fa-chevron-down\' : !$ctrl.tocOpen,\n                \'fa-chevron-up\' : $ctrl.tocOpen\n            }"\n        ></i>\n    </a>\n    <div ng-class="{ \'in\': $ctrl.tocOpen }"\n        id="item-one"\n        class="cover-toc collapse">\n        <ul class="cover-toc__level-wrapper">\n            <div ng-repeat="chapter in $ctrl.toc track by $index"\n                ng-if="$ctrl.hasSectionsWithDownloadInfo(chapter)"\n                class="cover-toc__item">\n                <div ng-class="{ \'collapsed\': $index !== 0 }"\n                    aria-expanded="false"\n                    class="cover-toc__title cover-toc__title--level1"\n                    data-target="#toc-item-{{ $index }}"\n                    data-toggle="collapse"\n                    role="button">\n                    <div class="cover-toc__section-name cover-toc__section-name--has-icon">\n                        <span class="cover-toc__chapter-id">{{ $index + 1 }}</span>\n                        <span ng-bind-html="chapter.title"></span>\n                    </div>\n                </div>\n                <ul ng-class="{ \'in\': $index === 0 }"\n                    id="toc-item-{{ $index }}"\n                    class="cover-toc__level-wrapper collapse">\n                    <li ng-repeat="section in chapter.children"\n                        ng-if="section.downloadInfo"\n                        class="cover-toc__item cover-toc__item--level2">\n                        <a ng-href="{{ $ctrl.productBaseUrl }}/{{ section.seoUrl }}"\n                           class="cover-toc__title cover-toc__title--level2">\n                            <div ng-bind-html="section.title" class="cover-toc__section-name"></div>\n                        </a>\n                        <span class="icon-list">\n                            <span ng-show="section.downloadInfo.isInProgress"\n                                class="is-downloading disabled">\n                                <i class="fa fa-spinner fa-pulse fa-fw" aria-hidden="true"></i>\n                            </span>\n                            <span ng-show="section.downloadInfo.isInProgress && section.downloadInfo.isCancelable"\n                                ng-click="$ctrl.cancelDownload(section)"\n                                class="fa fa-times fa-lg">\n                            </span>\n                            <span ng-show="section.downloadInfo.isFinished"\n                                ng-click="$ctrl.removeDownload(section)"\n                                class="fa fa-trash fa-lg">\n                            </span>\n                        </span>\n                    </li>\n                </ul>\n            </div>\n        </ul>\n    </div>\n</ul>\n'},function(e,t){e.exports='<div class="modal fade" id="errorModal" tabindex="-1" role="dialog">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button"\n                    class="close"\n                    data-dismiss="modal"\n                    aria-label="{{ $ctrl.dialogsService.error.buttonText }}">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n                <h4>{{ $ctrl.dialogsService.error.title }}</h4>\n            </div>\n            <div class="modal-body">\n                <p id="error-message" ng-bind-html="$ctrl.dialogsService.error.message"></p>\n            </div>\n            <div class="modal-footer">\n                <button type="button"\n                    class="btn btn-primary mb20 btn-block"\n                    data-dismiss="modal">\n                    {{ $ctrl.dialogsService.error.buttonText }}\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t){e.exports='<footer ng-show="!$ctrl.hideFooter" class="primary-footer">\n    <div class="container mobile-footer-group">\n        <div class="col-xs-12 primary-footer-text">\n            <div class="tabs">\n                <div class="tab">\n                    <input type="checkbox" id="chck1">\n                    <label class="tab-label" for="chck1">eBooks & Videos</label>\n                    <div class="tab-content">\n                        <ul>\n                            <li ng-repeat="(technologyName, technology) in $ctrl.footerTechnologies">\n                                <a ng-href="{{ $ctrl.constructSearchLinks(\'\', technology.name) }}" target="_self">{{ technology.name }}</a>\n                            </li>\n                            <li><a href="{{ $ctrl.constructSearchLinks() }}" target="_self">View All</a></li>\n                        </ul>\n                    </div>\n                </div>\n                <div class="tab">\n                    <input type="checkbox" id="chck2">\n                    <label class="tab-label" for="chck2">Useful Links</label>\n                    <div class="tab-content">\n                        <ul>\n                            <li ng-repeat="link in $ctrl.usefulFooterLinks">\n                                <a ng-href="{{ link.url }}" target="_self">{{ link.name }}</a>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="container footer-group">\n        <div class="footer-col primary-footer-text">\n            <p class="footer-heading">eBooks & Videos</p>\n            <ul>\n                <li ng-repeat="(technologyName, technology) in $ctrl.footerTechnologies  | limitTo:5">\n                    <a ng-href="{{ $ctrl.constructSearchLinks(\'\', technology.name) }}" target="_self">{{ technology.name }}</a>\n                </li>\n            </ul>\n        </div>\n        <div class="footer-col primary-footer-text category-column">\n            <ul>\n                <li ng-repeat="(technologyName, technology) in $ctrl.footerTechnologies" ng-if="$index > 4">\n                    <a ng-href="{{ $ctrl.constructSearchLinks(\'\', technology.name) }}" target="_self">{{ technology.name }}</a>\n                </li>\n                <li><a href="{{ $ctrl.constructSearchLinks() }}" target="_self">View All</a></li>\n            </ul>\n        </div>\n        <div class="footer-col primary-footer-text">\n            <p class="footer-heading">Useful Links</p>\n            <ul>\n                <li ng-repeat="link in $ctrl.usefulFooterLinks">\n                    <a ng-href="{{ link.url }}" target="_self">{{ link.name }}</a>\n                </li>\n            </ul>\n        </div>\n        <div class="footer-col primary-footer-text sign-up-show" ng-if="!$root.isIOS">\n            <p class ="footer-heading">Packt</p>\n            <p>Sign up to our emails for the latest subscription updates.</p>\n            <form class="newsletter-signup" ng-submit="$ctrl.subscribeToSubscriptionUpdates()">\n                <input type="email"\n                    class="form-control"\n                    placeholder="&#xF003; Enter your email address"\n                    aria-label="Email"\n                    required\n                    ng-model="$ctrl.email">\n                <button class="btn btn-primary" type="submit">\n                    <i class="fa fa-chevron-right ml5"></i>\n                </button>\n            </form>\n            <div class="primary-footer-text" ng-class="{\'hide-confirmation\': !$ctrl.displayMessage }">\n                <p>{{ $ctrl.displayMessage }}</p>\n            </div>\n            <div class="primary-footer-text" ng-class="{\'hide-confirmation\': !$ctrl.loading }">\n                <p>Submitting...</p>\n            </div>\n            <div class="app-icons" ng-if="!$root.isApp">\n                <a href="https://apps.apple.com/app/packt/id1376577776?ls=1" target="_blank"><img ng-src="{{ $ctrl.cdnUrl(\'apple-app-store.png\') }}" class="app-icon-badge" alt="Download on the App Store"></a>\n                <a href="https://play.google.com/store/apps/details?id=com.packtpub.reader" target="_blank"><img ng-src="{{ $ctrl.cdnUrl(\'google-play-app.png\') }}" class="app-icon-badge" alt="Get it on Google Play"></a>\n            </div>\n        </div>\n    </div>\n        <div class="subs-footer">\n            <p class="footer-text">\n                <span class="copyright">\n                    &copy; {{ $ctrl.currentYear }} Packt Publishing Limited All Rights Reserved\n                </span>\n                <span class="separator" ng-if="!$root.isIOS">&vert;</span>\n                <a href="https://www.packtpub.com/about/privacy-policy" ng-if="!$root.isIOS" target="_blank">\n                    Privacy Policy</a>\n                <span class="separator" ng-if="!$root.isIOS">&vert;</span>\n                <a href="https://www.packtpub.com/about/terms-and-conditions" ng-if="!$root.isIOS" target="_blank">\n                    Terms &amp; Conditions</a>\n            </p>\n        </div>\n</footer>\n\n\n'},function(e,t){e.exports='<div class="horizontal-slider row">\n    <div class="horizontal-slider__item col-sm-3 col-lg-2" ng-repeat="product in $ctrl.items track by product.isbn13">\n        <library-product product="product"\n            ng-click="$ctrl.handleProductClick(product, $index)">\n        </library-product>\n    </div>\n</div>'},function(e,t){e.exports='<ng-bind-html ng-bind-html="$ctrl.icon"></ng-bind-html>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Account</title><circle cx="11" cy="5.68" r="4.68"/><path d="M13 10.6h-.2c-.32 1.2-1.19 4.28-1.8 4.93-.61-.65-1.48-3.73-1.8-4.93H9A4.37 4.37 0 0 0 4.67 15v6h12.66v-6A4.37 4.37 0 0 0 13 10.6z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Blackboard</title><path d="M1 13.39a1.47 1.47 0 0 0 .08-.39 1.79 1.79 0 0 1 1.68-1.43 3.7 3.7 0 0 1 .47 0h3a2.47 2.47 0 0 1 2.45 1.86l.19.66.64-.76c.15-.19.3-.37.46-.55a.72.72 0 0 1 .6-.28.19.19 0 0 0 .19-.09l3.43-4.62c.23-.29.45-.59.67-.89.05-.07.08-.08.15 0l.32.23c.11.06.09.12 0 .21-.57.74-1.12 1.49-1.68 2.24l-2.4 3.22a.2.2 0 0 0 0 .22.66.66 0 0 1-.14.66c-.65.8-1.31 1.6-2 2.38a.68.68 0 0 1-1.2-.15 5.63 5.63 0 0 1-.31-.9 8 8 0 0 1-.26-.83.16.16 0 0 0-.2-.14c-.23 0-.24 0-.23.24V17.92c0 .09 0 .12-.11.12H1z"/><path d="M8.22 18.1v-.9c0-.14 0-.17.16-.16h11.35c.24 0 .21 0 .21-.2V5.13c0-.14 0-.18-.17-.18H5.63c-.14 0-.18 0-.17.18V6.2c0 .09 0 .12-.11.11h-.83c-.08 0-.11 0-.11-.1V4.43A.51.51 0 0 1 5 3.91h15.32a.63.63 0 0 1 .68.4v13.36a.63.63 0 0 1-.42.43z"/><path d="M20.58 18.1a.63.63 0 0 0 .42-.43V18c0 .05 0 .06-.06.06s-.24.04-.36.04zM4.94 11.22a1.84 1.84 0 1 1 1.84-1.84 1.85 1.85 0 0 1-1.84 1.84z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><title>Bookmarks</title><path d="M17.34 20.6a.4.4 0 0 1-.4.4l-6.25-5.56L5.07 21a.4.4 0 0 1-.41-.4V1.4a.4.4 0 0 1 .41-.4h11.87a.4.4 0 0 1 .4.4z"/></svg>\n'},function(e,t){e.exports='<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300"><path d="M235.5,89.84l-35,.15-.08-19.33a15.17,15.17,0,0,0-15.22-15.1l-69,.28a15.18,15.18,0,0,0-15.1,15.22l.08,19.33-36.52.15a10,10,0,0,0-9.88,9.95l.32,77,41-.17-.07-16.9L112,160.3l.07,16.91,78.32-.32L190.32,160l15.94-.06.07,16.91,39.44-.17-.32-76.94A9.94,9.94,0,0,0,235.5,89.84ZM190,90l-78.32.32L111.64,71a4.68,4.68,0,0,1,4.65-4.69l69-.28A4.68,4.68,0,0,1,190,70.7Zm16.37,107.59-15.93.06-.06-15-78.33.32.07,15-15.94.07-.06-15-41,.17.21,51.3a9.94,9.94,0,0,0,10,9.87l170.8-.69a10,10,0,0,0,9.87-10l-.21-51.3-39.44.16Z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Calendar</title><path d="M1 20V3.41c.58-1.06 1-1.07 2.86-.92v1.63a1.56 1.56 0 0 0 .62 1.32A2.29 2.29 0 0 0 7 5.78 1.74 1.74 0 0 0 8.15 4V2.45h5.72v1.64a2.27 2.27 0 0 0 .12.69A2.3 2.3 0 0 0 16.46 6a1.88 1.88 0 0 0 1.68-2V2.43h1.1a1.62 1.62 0 0 1 1.76 1V20a2 2 0 0 1-1 1H2a2 2 0 0 1-1-1zm10-1.16h7c.69 0 .85-.15.85-.82V8.26c0-.66-.16-.83-.81-.83H4c-.64 0-.81.17-.81.82V18c0 .67.17.83.85.83z"/><path d="M6.36 1a1.64 1.64 0 0 1 1.07 1.84v1.07a1.42 1.42 0 0 1-2.84 0V2.39A1.53 1.53 0 0 1 5.64 1zM16.36 1a1.64 1.64 0 0 1 1.07 1.84v1.07a1.42 1.42 0 0 1-2.84 0V2.39A1.53 1.53 0 0 1 15.64 1z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Checkout</title><path d="M18.37 16.27a1.58 1.58 0 1 1-1.58-1.58 1.59 1.59 0 0 1 1.58 1.58zM8.37 16.27a1.58 1.58 0 1 1-1.58-1.58 1.59 1.59 0 0 1 1.58 1.58zM5.04 5.2V4.14H1v2.47h3.89l1.9 7.03h10.7L21 5.2H5.04z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><title>Packt</title><path d="M4.32 1.22c.89.09 4-.45 5.14-.1.62.18 1.61 1.63 2.16 2.26 2 2.33 4.19 5 6.17 7Q13.8 15.86 9.46 21H4.21c2.65-3.6 5.56-6.93 8.23-10.51C9.85 7.28 7 4.32 4.32 1.22z" fill-rule="evenodd"/></svg>\n'},function(e,t){e.exports='<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 27 27"><path d="M26.59,17.12c0,.25-.09.5-.14.74a5.89,5.89,0,0,1-5.69,4.63c-3.81,0-7.63,0-11.44,0-1.24,0-2.49,0-3.73,0A4.88,4.88,0,0,1,.64,18.2s0-.08,0-.12v-1c0-.19.08-.39.13-.58a4.84,4.84,0,0,1,4.08-3.71l.15,0c0-.37,0-.74,0-1.1a8.11,8.11,0,0,1,16-1.29c0,.19.1.27.31.3a5.94,5.94,0,0,1,5.28,5.24.21.21,0,0,0,0,.11ZM13.07,21.41h5.82a20.14,20.14,0,0,0,2.33-.05,4.84,4.84,0,0,0,3.66-7.2,4.73,4.73,0,0,0-4.17-2.49.64.64,0,0,1-.7-.56A7,7,0,0,0,7,8.72,6.83,6.83,0,0,0,6.08,13c.07.56-.12.81-.62.8a3.79,3.79,0,0,0,0,7.58Z"/><path d="M17.82,15.13a1.9,1.9,0,0,1-.37-.29,6,6,0,0,0-3.17-1.95A5.52,5.52,0,0,0,9,14.48c-.14.13-.26.28-.4.42a.54.54,0,0,1-.79.06.53.53,0,0,1,0-.77,6.73,6.73,0,0,1,5.62-2.52,6.84,6.84,0,0,1,4.91,2.54.53.53,0,0,1,.09.61A.6.6,0,0,1,17.82,15.13Z"/><path d="M13.05,13.77a5.39,5.39,0,0,1,4,2,.54.54,0,0,1,0,.79.55.55,0,0,1-.79-.1A4.27,4.27,0,0,0,13.94,15a4,4,0,0,0-3.78,1.15l-.28.3a.54.54,0,1,1-.78-.74,5.11,5.11,0,0,1,2.49-1.67A13.94,13.94,0,0,1,13.05,13.77Z"/><path d="M13.07,16a3.53,3.53,0,0,1,2.59,1.19.54.54,0,0,1,0,.83.55.55,0,0,1-.82-.1,2.37,2.37,0,0,0-3.25-.35,2.64,2.64,0,0,0-.39.36.55.55,0,1,1-.8-.74A3.55,3.55,0,0,1,13.07,16Z"/><path d="M13.08,19.24a.57.57,0,0,1-.55-.55.55.55,0,0,1,.57-.53.56.56,0,0,1,.53.53A.55.55,0,0,1,13.08,19.24Z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Course</title><path d="M1 13.39a1.47 1.47 0 0 0 .08-.39 1.79 1.79 0 0 1 1.68-1.43 3.7 3.7 0 0 1 .47 0h3a2.47 2.47 0 0 1 2.45 1.86l.19.66.64-.76c.15-.19.3-.37.46-.55a.72.72 0 0 1 .6-.28.19.19 0 0 0 .19-.09l3.43-4.62c.23-.29.45-.59.67-.89.05-.07.08-.08.15 0l.32.23c.11.06.09.12 0 .21-.57.74-1.12 1.49-1.68 2.24l-2.4 3.22a.2.2 0 0 0 0 .22.66.66 0 0 1-.14.66c-.65.8-1.31 1.6-2 2.38a.68.68 0 0 1-1.2-.15 5.63 5.63 0 0 1-.31-.9 8 8 0 0 1-.26-.83.16.16 0 0 0-.2-.14c-.23 0-.24 0-.23.24V17.92c0 .09 0 .12-.11.12H1z"/><path d="M8.22 18.1v-.9c0-.14 0-.17.16-.16h11.35c.24 0 .21 0 .21-.2V5.13c0-.14 0-.18-.17-.18H5.63c-.14 0-.18 0-.17.18V6.2c0 .09 0 .12-.11.11h-.83c-.08 0-.11 0-.11-.1V4.43A.51.51 0 0 1 5 3.91h15.32a.63.63 0 0 1 .68.4v13.36a.63.63 0 0 1-.42.43z"/><path d="M20.58 18.1a.63.63 0 0 0 .42-.43V18c0 .05 0 .06-.06.06s-.24.04-.36.04zM4.94 11.22a1.84 1.84 0 1 1 1.84-1.84 1.85 1.85 0 0 1-1.84 1.84z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 22 22"><defs/><path d="M20.08 4.61H1.92A1.43 1.43 0 0 0 .5 6v.36h21V6a1.43 1.43 0 0 0-1.42-1.39zM.5 16a1.43 1.43 0 0 0 1.42 1.42h18.16A1.43 1.43 0 0 0 21.5 16V9.4H.5zm6.79-3.3H16v1.82H7.29zm-5.17 0h3v3h-3z" class="cls-1"/></svg>\n'},function(e,t){e.exports='<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 27 27"><path d="M13.71,12.19a22.35,22.35,0,0,1-6.84-1.1,8.81,8.81,0,0,1-3-1.63,3.23,3.23,0,0,1-1-1.39A2.31,2.31,0,0,1,3.3,5.83,6.09,6.09,0,0,1,5.64,4.09a16.33,16.33,0,0,1,4.58-1.31,23.93,23.93,0,0,1,5.48-.17,17.58,17.58,0,0,1,6,1.44,6.26,6.26,0,0,1,2.35,1.69A2.38,2.38,0,0,1,24,9a7.12,7.12,0,0,1-2.62,1.74A16.63,16.63,0,0,1,16.69,12C15.7,12.07,14.7,12.11,13.71,12.19Z"/><path d="M13.7,18.17a20.33,20.33,0,0,1-6.92-1,8.51,8.51,0,0,1-3.09-1.76,2.81,2.81,0,0,1-.95-2.21c0-.69,0-1.37,0-2.06a.43.43,0,0,1,.16-.32.39.39,0,0,1,.33,0,12.46,12.46,0,0,0,4.54,2,24.77,24.77,0,0,0,7.18.67,22.64,22.64,0,0,0,5.94-1,11.26,11.26,0,0,0,3.26-1.65.39.39,0,0,1,.33-.05.34.34,0,0,1,.17.27c0,.82,0,1.65,0,2.47a2.83,2.83,0,0,1-1.15,2,8.59,8.59,0,0,1-2.87,1.58,20,20,0,0,1-5.67,1C14.55,18.19,14.12,18.17,13.7,18.17Z"/><path d="M13.76,24.46a21.07,21.07,0,0,1-6.87-1.05,8.45,8.45,0,0,1-3.18-1.77,2.8,2.8,0,0,1-1-2.25c0-.67,0-1.33,0-2,0-.15,0-.3.16-.38a.34.34,0,0,1,.4.09A12.24,12.24,0,0,0,7.62,19a24,24,0,0,0,7.26.72,22.29,22.29,0,0,0,6-1,11.32,11.32,0,0,0,3.33-1.67.39.39,0,0,1,.33,0,.36.36,0,0,1,.17.27c0,.82,0,1.65,0,2.47a2.84,2.84,0,0,1-1.13,2,8.61,8.61,0,0,1-2.89,1.59A21.38,21.38,0,0,1,13.76,24.46Z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><title>Download</title><path d="M10.48 17.47a.79.79 0 0 0 1.34 0l6.89-9.25c.37-.49.17-.89-.45-.89h-3.93V2.12A1.11 1.11 0 0 0 13.23 1H9a1.12 1.12 0 0 0-1.14 1.12v4.66a1.19 1.19 0 0 0 .14.53H3.93c-.62 0-.82.4-.45.89zm7.6 1.53H3.92a.9.9 0 0 0-.89.9v.18a.89.89 0 0 0 .89.89h14.16a.89.89 0 0 0 .89-.89v-.18a.9.9 0 0 0-.89-.9z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Font size</title><path d="M7.8 16.83c-.12-.35-.24-.69-.37-1s-.25-.69-.36-1h-3.7c-.11.35-.24.7-.36 1l-.36 1H1c.33-.94.64-1.8.93-2.59s.58-1.54.87-2.24.56-1.38.83-2 .57-1.27.86-1.89H6c.29.62.58 1.25.86 1.89s.55 1.31.83 2 .58 1.45.88 2.24.61 1.65.93 2.59zm-2.58-7q-.3.66-.66 1.62c-.25.64-.51 1.34-.78 2.09h2.88c-.27-.75-.53-1.45-.79-2.1s-.47-1.23-.65-1.66zM18.71 16.83c-.15-.46-.32-.92-.49-1.36s-.33-.91-.49-1.38h-4.92l-.48 1.38-.48 1.36h-2.2c.43-1.25.85-2.4 1.24-3.45s.78-2.05 1.15-3 .75-1.84 1.12-2.69.75-1.69 1.14-2.52h2c.39.83.77 1.67 1.14 2.53s.74 1.75 1.12 2.69.76 1.94 1.16 3 .81 2.2 1.25 3.45zm-3.44-9.4c-.27.57-.55 1.31-.88 2.17s-.67 1.77-1 2.77h3.83c-.36-1-.7-1.93-1-2.79s-.7-1.58-.95-2.15z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Fullscreen</title><path d="M1 21h9.1c.13-.15.09-.38-.14-.6l-2.31-2.32.35-.32L10.73 15a.94.94 0 0 0 0-1.32L8.22 11.2a.91.91 0 0 0-1.31 0L4.16 14a.83.83 0 0 0-.23.39l-2.4-2.4c-.2-.19-.38-.25-.53-.18zM21 1h-9.1c-.13.15-.09.38.14.6l2.31 2.32-.35.32L11.27 7a.94.94 0 0 0 0 1.32l2.51 2.5a.91.91 0 0 0 1.31 0l2.75-2.75a.83.83 0 0 0 .23-.39l2.4 2.4c.2.19.38.25.53.18z"/></svg>\n'},function(e,t){e.exports='<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"\nviewBox="0 0 300 300"><path d="M264,141.58c-4.95-22.64-25.36-39.15-49.3-39.64-11.37-.23-22.75.17-34.11-.17-4.23-.13-10.23,2.57-11.53-5.15-.11-.66-3.38-1.09-5.18-1.11q-13.41-.18-26.81,0c-1.8,0-5.06.51-5.15,1.15-1.15,7.89-7.17,4.84-11.39,5.13-5.39.38-10.83.09-16.24.09-6,0-11.92-.1-17.87,0C62,102.42,41.5,119,36.79,142.11c-4.83,23.7,6.85,47.65,28.08,57.54C87,210,112.11,203.81,127.36,184c3-3.84,5.76-5.52,10.79-5.09a137.86,137.86,0,0,0,23.52.07c5.54-.48,8.78,1.11,12.17,5.54,14.81,19.35,40,25.31,61.93,15.19C257.44,189.69,269.21,165.46,264,141.58Zm-149.5,18.69H96v18.52H75.77V160.27H57.25v-20.2H75.77V121.55H96v18.52h18.52Zm83.1,18.52a14.31,14.31,0,1,1,14.31-14.31A14.31,14.31,0,0,1,197.59,178.79Zm32.71-28.62a14.31,14.31,0,1,1,14.31-14.31A14.31,14.31,0,0,1,230.3,150.17Z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><title>Help</title><path d="M9.78 16.16v-.73a6.73 6.73 0 0 1 .4-2.45 5.63 5.63 0 0 1 .95-1.57 17.19 17.19 0 0 1 1.74-1.68A8.37 8.37 0 0 0 14.49 8a2.82 2.82 0 0 0 .37-1.43 3.33 3.33 0 0 0-1.1-2.48A3.71 3.71 0 0 0 11.07 3a3.65 3.65 0 0 0-2.58 1 5 5 0 0 0-1.35 3l-2.48-.3a6.39 6.39 0 0 1 2-4.21A6.38 6.38 0 0 1 11 1a6.55 6.55 0 0 1 4.6 1.57 5 5 0 0 1 1.71 3.8 4.83 4.83 0 0 1-.6 2.37 11.16 11.16 0 0 1-2.36 2.64 11.82 11.82 0 0 0-1.54 1.54 3.69 3.69 0 0 0-.54 1.15 9.34 9.34 0 0 0-.2 2.09zM9.63 21v-2.75h2.75V21z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><title>Home</title><path d="M21.5 11.36h-3.23v9.69h-4.85v-6.46H8.58v6.46H3.73v-9.69H.5L11.1 1z"/></svg>\n'},function(e,t){e.exports='<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300">\n<path d="M71.72,78.74A4.56,4.56,0,0,1,75.29,78c.41.06.84.07,1.26.11a3,3,0,0,1,2.91,3.34c-.06,1.17-.18,2.33-.21,3.49a40.78,40.78,0,0,0,5.6,22.67c7.39,12.2,18.33,18.8,32.51,20.07a44,44,0,0,0,7.7,0,3.26,3.26,0,0,1,3.34,1.55,8.79,8.79,0,0,1,.28,5.15c-.16.37-.37.71-.56,1.07-.14.14-.29.28-.43.43a5.32,5.32,0,0,1-2.73,1c-.6,0-1.21.09-1.82.12a52.91,52.91,0,0,1-21.83-3.28,47.37,47.37,0,0,1-13.3-7.6c-.75-.6-1.49-1.22-2.23-1.83l-3-3a5,5,0,0,0-.32-.44,47.41,47.41,0,0,1-8.83-14.39A52.71,52.71,0,0,1,70.2,82.87c.1-1.31.09-2.65,1.09-3.7Z"/><path class="cls-1" d="M174.4,89.15l-.65.36a3.65,3.65,0,0,1-2.14.49c-.71-.07-1.41-.11-2.12-.17a3,3,0,0,1-2.9-3.35c.08-1.59.22-3.18.22-4.76a40.18,40.18,0,0,0-5.16-20.61c-7.33-12.66-18.42-19.53-33-20.85a42.94,42.94,0,0,0-7.69,0,3.26,3.26,0,0,1-3.34-1.56,8.76,8.76,0,0,1-.28-5.14c.16-.37.37-.71.56-1.07l.43-.43a16.92,16.92,0,0,1,2.23-.88,12.21,12.21,0,0,1,2.27-.2,52.79,52.79,0,0,1,21.88,3.28A47.37,47.37,0,0,1,158,41.9c.75.6,1.48,1.22,2.22,1.82l3,3a4.48,4.48,0,0,0,.32.44,45.3,45.3,0,0,1,5.58,7.69,51.81,51.81,0,0,1,6.66,30.4,5.85,5.85,0,0,1-1.15,3.59Z"/><path class="cls-1" d="M133.53,73.29a15,15,0,0,1-.08,21.09,14.86,14.86,0,0,1-21-21A14.9,14.9,0,0,1,133.53,73.29Z"/><path class="cls-1" d="M146.92,58.59A34.59,34.59,0,0,1,157.34,83.3c0,.93,0,1.86-.06,2.79a3.93,3.93,0,0,1-4,3.65l-2-.07a3.18,3.18,0,0,1-3.4-3.68,26.46,26.46,0,0,0-2.08-11.78,25.41,25.41,0,0,0-24-15.33c-.5,0-1,0-1.52,0a3.08,3.08,0,0,1-3.1-2.93c-.06-.89-.1-1.79-.1-2.69a3.88,3.88,0,0,1,3.85-3.74,52.23,52.23,0,0,1,6.13.14,32.75,32.75,0,0,1,16.21,6C144.77,56.72,146.14,58,146.92,58.59Z"/><path class="cls-1" d="M98.62,108.87a33.83,33.83,0,0,1-9.91-26.42,4.4,4.4,0,0,1,1.75-3.54,3.42,3.42,0,0,1,2.33-.69l2.23.17a3.12,3.12,0,0,1,3,3.48,28.14,28.14,0,0,0,.34,6,24.88,24.88,0,0,0,8.08,14.79A25.52,25.52,0,0,0,125,109.14a3.72,3.72,0,0,1,2.67.7,3.07,3.07,0,0,1,1.13,2.2c.06.65.07,1.32.16,2a4,4,0,0,1-3.85,4.43,37,37,0,0,1-7.44-.29,33.42,33.42,0,0,1-16.15-6.81C100.41,110.49,99.39,109.54,98.62,108.87Z"/><path class="cls-1" d="M138.14,184.43q0-38.44,0-76.91c0-2.18.36-4.14,2-5.69a7.27,7.27,0,0,1,5.33-1.72q25.91,0,51.83,0c8.08,0,16.16.13,24.23-.05,4.42-.09,7.5,2.73,7.5,7.53q-.14,77.25-.07,154.49c0,4.4-2.51,7-6.91,7q-38.46,0-76.91,0c-4.54,0-7-2.51-7-7Q138.13,223.23,138.14,184.43Zm10.76-28.06h69.32V113.13H148.9Zm67.18,94.4h-65V255h65Zm-32.47-45.61a12,12,0,1,0,11.91,12.1A11.91,11.91,0,0,0,183.61,205.16Z"/><path class="cls-1" d="M212.78,121.57v27.86H156c-.06-.86-.16-1.57-.16-2.28,0-7.75,0-15.49,0-23.24,0-1.77.19-2.69,1.24-2.69q27.55.09,55.13.06C212.3,121.28,212.45,121.41,212.78,121.57Z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Learning</title><path d="M10.55 14.81l-5.49-2.55L4.33 17s7.34-4.22 12.71 0l-.93-4.53zM20 9.22v4.65l-.59 2.36H21l-.66-2.27V9.22H20z"/><path d="M20.94 12.17a.73.73 0 1 1-.73-.73.73.73 0 0 1 .73.73zM10.5 5.03L1 9.06v.8l9.53 4.42 9.84-4.25v-.8l-9.87-4.2z"/></svg>\n'},function(e,t){e.exports='<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300"><path d="M194.2,38.07H94.41A13.52,13.52,0,0,0,80.93,51.56V248.44a13.52,13.52,0,0,0,13.48,13.49H194.2a13.53,13.53,0,0,0,13.49-13.49V51.56A13.53,13.53,0,0,0,194.2,38.07ZM144.31,254.85A8.66,8.66,0,1,1,153,246.2,8.66,8.66,0,0,1,144.31,254.85ZM199,223.33H89.57V68.53H199Z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Mute</title><path d="M7.7 7.13a3 3 0 0 1-1.59.5L2 7.52a.89.89 0 0 0-.9.86L1 12.84a.88.88 0 0 0 .86.9l4.07.11h.88l.69.55 4.4 3.51c.38.3.69.15.71-.33l.15-6.2c0-.48 0-1.27.05-1.75l.13-5.47c0-.48-.29-.64-.68-.36zM14.56 14.72l-.62-.56a7.05 7.05 0 0 0 .18-7.28l.65-.52a8.1 8.1 0 0 1-.21 8.36z"/><path d="M16.69 16.25l-.63-.56a9.9 9.9 0 0 0 .26-10.22l.68-.53a11 11 0 0 1-.31 11.31z"/><path d="M18.73 18.48l-.62-.56a13.47 13.47 0 0 0 .35-13.87l.65-.53a14.53 14.53 0 0 1-.38 14.96z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><title>Night Mode</title><path d="M10.81 1.28c-.35-.11-.69-.2-1-.28a11.88 11.88 0 0 1 2.32 11.27 11.91 11.91 0 0 1-8.46 7.8c.32.14.66.27 1 .38 5.63 1.81 11.58-1 13.28-6.3S16.44 3.09 10.81 1.28z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><title>Play</title><path d="M4.22 19.94c0 1 .68 1.37 1.5.75l11.44-8.63a1.34 1.34 0 0 0 0-2.26L5.76 1.31C4.93.69 4.25 1 4.25 2.07z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 416.05"><title>Playlists</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M0,162a9.06,9.06,0,0,0,.81-1.77c4.88-20.2,19.94-32.21,40.66-32.22q130,0,260,0c14,0,28,0,42,0,23,.09,40.53,17.41,40.56,40.5q.13,103.48,0,207c0,23.09-17.42,40.48-40.54,40.5Q191.7,416.11,40,416a40,40,0,0,1-38.7-29.73C.89,384.86.43,383.45,0,382ZM192.16,384H340.59c9,0,11.41-2.38,11.41-11.08V171c0-8.51-2.5-11-11-11H42.66C34.59,160,32,162.67,32,170.86V372.77C32,381.62,34.4,384,43.23,384Z"/><path d="M512,276a5.9,5.9,0,0,0-.87,1.15c-3.79,8.19-10.6,12.15-18.22,10.58-8-1.65-12.9-8.11-12.9-17.18q0-113.23,0-226.47C480,34.19,477.85,32,468.09,32H131.64a35.05,35.05,0,0,1-7-.37A16,16,0,0,1,128.08.07c23-.11,46-.06,69-.06L467,0c24.64,0,37.6,9.66,44.48,33.13A5.36,5.36,0,0,0,512,34Z"/><path d="M237.46,64h168C431.16,64,448,80.86,448,106.59q0,114,0,228c0,12.43-10.29,20.34-21.29,16.51C420.05,348.78,416,343,416,335.27q-.06-48.25,0-96.5,0-65.75,0-131.49C416,98.43,413.59,96,404.75,96q-168.49,0-337,0a33.56,33.56,0,0,1-7.45-.47A15.9,15.9,0,0,1,48.07,78.43c.81-8.25,7.58-14.36,16.39-14.37Q119.71,64,175,64Z"/><path d="M142,272.05c0-15.49,0-31,0-46.47,0-14.57,12.55-21.9,25.18-14.71q40.78,23.2,81.48,46.57c12.56,7.21,12.6,21.93.06,29.14Q208.05,310,167.24,333.12c-12.71,7.21-25.16,0-25.22-14.59C141.94,303,142,287.54,142,272.05Z"/></g></g></svg>'},function(e,t){e.exports='<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 27 27"><path d="M9.72,8.41C9.84,11,9.84,11,7.59,11.85L3.23,13.54c1.95.77,3.7,1.53,5.49,2.15.86.29,1.17.71,1,1.58a11.38,11.38,0,0,0,0,1.45L4,16.21c-1-.44-2.06-.85-3.05-1.36A1.09,1.09,0,0,1,.43,14c0-.58-.43-1.35.38-1.71C3.74,11,6.69,9.72,9.72,8.41Z"/><path d="M16.92,18.56c-.15-2.39-.15-2.39,2-3.23,1.4-.54,2.78-1.09,4.17-1.65.06,0,.1-.08.22-.18-1.77-.68-3.45-1.41-5.19-2-1-.32-1.4-.82-1.23-1.84a8.45,8.45,0,0,0,0-1.25l7.36,3.17.71.3c1.28.54,1.59,1.11,1.27,2.47a.77.77,0,0,1-.39.46l-8.66,3.76C17.12,18.61,17,18.58,16.92,18.56Z"/><path d="M15.69,7.67c-.26,1.09-.59,2.41-.91,3.74-.64,2.65-1.28,5.31-1.93,8,0,.15-.09.3-.13.46a.89.89,0,0,1-1.18.66c-.6-.14-.7-.6-.58-1.12.42-1.79.84-3.59,1.27-5.38.52-2.16,1-4.32,1.57-6.48.13-.52.26-1.08,1-1S15.76,6.77,15.69,7.67Z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Project</title><path d="M11.94 1.4a1.42 1.42 0 0 0-2.84 0h-2V5H14V1.4zm-1.42.89a.87.87 0 1 1 .86-.87.86.86 0 0 1-.86.87zM15.63 15.53a3.24 3.24 0 1 0 3.24 3.24 3.24 3.24 0 0 0-3.24-3.24zM15 20.74l-2-2 .76-.77L15 19.21l2.53-2.45.76.78z"/><path d="M14.56 3.15v2.4H6.49v-2.4H3.13v18.08h9.4a4 4 0 0 1 3.1-6.43 4 4 0 0 1 2.28.72V3.15zM5.18 10h9.18v.65H5.18zm7.22 4.15H5.18v-.66h7.22zm3.07-1.75H5.18v-.65h10.29zm0-3.49H5.18v-.63h10.29z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><title>Purchases</title><path d="M11 1a10 10 0 1 0 10 10A10 10 0 0 0 11 1zm3 14.9a4.18 4.18 0 0 1-2.4 1v2.05h-1.08v-2a6 6 0 0 1-2.06-.52 6.35 6.35 0 0 1-1.75-1.16L7.38 14a5.54 5.54 0 0 0 1.73 1.1 4.79 4.79 0 0 0 1.87.41 2.91 2.91 0 0 0 1.7-.43 1.3 1.3 0 0 0 .63-1.14A1.35 1.35 0 0 0 13 13a2.44 2.44 0 0 0-.86-.59c-.34-.14-.81-.3-1.39-.48A12.69 12.69 0 0 1 9 11.3a2.93 2.93 0 0 1-1.14-.9 2.49 2.49 0 0 1-.47-1.59 2.47 2.47 0 0 1 .86-1.95 4 4 0 0 1 2.31-.92V4.08h1.12v1.85a6.13 6.13 0 0 1 1.65.34 6.12 6.12 0 0 1 1.39.73l-.61 1.33a6.32 6.32 0 0 0-1.57-.72 5.23 5.23 0 0 0-1.48-.24 2.73 2.73 0 0 0-1.5.36 1.13 1.13 0 0 0-.57 1 1.33 1.33 0 0 0 .34.93 2.56 2.56 0 0 0 .83.57c.33.14.79.3 1.37.48a16.05 16.05 0 0 1 1.78.65 3 3 0 0 1 1.15.92 2.5 2.5 0 0 1 .48 1.6A2.64 2.64 0 0 1 14 15.9z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><title>Rewards</title><path d="M11.13 1a14.85 14.85 0 0 1 3 1.5 5.53 5.53 0 0 1 1.22 7.27 1.08 1.08 0 0 0 0 1.23c1.08 1.95 2.13 3.92 3.18 5.89.24.44.47.88.78 1.48-1-.29-1.79-.56-2.6-.74A.79.79 0 0 0 16 18c-.39.88-.71 1.79-1.1 2.81-.47-1-.9-2-1.32-3-.68-1.55-1.34-3.11-2-4.66-.1-.21-.37-.5-.55-.49s-.44.3-.53.52c-1.12 2.54-2.2 5.08-3.4 7.85l-1.29-3.31-3.08.84 1.39-2.65c.73-1.37 1.49-2.73 2.19-4.12a.9.9 0 0 0-.07-.85 5.81 5.81 0 0 1 3.07-9.79A1.34 1.34 0 0 0 9.6 1zm-.75 9.47A3.69 3.69 0 0 0 14 6.8a3.61 3.61 0 0 0-7.21 0 3.69 3.69 0 0 0 3.59 3.67z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><title>Right Arrow</title><path d="M21 8.74c-.46.48-.91 1-1.38 1.43q-2.21 2.22-4.43 4.43c-.38.38-.81.45-1.08.13a1.11 1.11 0 0 1-.23-.64v-2.65c-.06 0-.09-.07-.13-.07a30.16 30.16 0 0 0-5.93.28c-3.16.6-4.23 2.55-4.39 5.18 0 .83.05 1.66.05 2.49a2.06 2.06 0 0 1-.23.59c-.18-.12-.44-.21-.52-.38a16.82 16.82 0 0 1-1.65-4.94 1.11 1.11 0 0 0-.08-.16v-1.6a3.1 3.1 0 0 0 .08-.42 6.39 6.39 0 0 1 3.15-5.26A10.33 10.33 0 0 1 7.56 6a30.14 30.14 0 0 1 5.61-.33h.68v-.48-2.31a.7.7 0 0 1 .43-.71.69.69 0 0 1 .81.19l.12.12 5.39 5.35a5.85 5.85 0 0 1 .4.47z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Saved</title><path d="M3.65 1h.71v3.39a1 1 0 0 0 1.08 1.09h6.44c.59 0 1-.32 1-.85V1.01h1.25A3.91 3.91 0 0 1 16 2.22Q17.81 4.13 19.71 6A4.07 4.07 0 0 1 21 7.87v10.48a4.09 4.09 0 0 1-.91 1.72 3.87 3.87 0 0 1-1.75.93H3.65a2.46 2.46 0 0 0-.29-.09 3.13 3.13 0 0 1-2.35-3Q1 11 1 4.09a3.1 3.1 0 0 1 2.18-2.94zM11 10.05H5.51a1 1 0 0 0-1.14 1.15v5.24a1 1 0 0 0 1.12 1.13h11a1 1 0 0 0 1.13-1.13v-5.23a1 1 0 0 0-1.14-1.16z"/><path d="M11.94 3.27v.15c.08 1.21-.35 1.12-1.18 1.1a.57.57 0 0 1-.6-.59V2.56a.59.59 0 0 1 .62-.56 5 5 0 0 1 .55 0 .58.58 0 0 1 .61.61v.71zM11 11.73h3.59a.59.59 0 0 1 .6.59.58.58 0 0 1-.58.6H7.38c-.39 0-.63-.27-.62-.61a.6.6 0 0 1 .61-.59H11zM11 16H7.51c-.49 0-.75-.21-.75-.59s.25-.58.72-.58h7c.47 0 .72.2.72.57s-.25.6-.74.6z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><title>Search</title><path d="M16.41 13.79l-.53.53-1.54-1.54a7.4 7.4 0 0 0-.72-9.61 7.38 7.38 0 0 0-10.44 0 7.42 7.42 0 0 0 0 10.47 7.35 7.35 0 0 0 5.22 2.15 7.35 7.35 0 0 0 4.38-1.44l1.53 1.54-.53.53L18.36 21 21 18.37zm-4.35-1.73a5.17 5.17 0 0 1-7.32 0 5.21 5.21 0 0 1 0-7.33A5.13 5.13 0 0 1 8.4 3.22a5.12 5.12 0 0 1 3.66 1.51 5.19 5.19 0 0 1 0 7.33z"/></svg>\n'},function(e,t){e.exports='<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300"><path d="M84.75,140.84c0-.6.15-1.25.16-1.89.17-13.84,0-27.69.6-41.51a61.89,61.89,0,0,1,21.18-44.57C126,35.5,148.6,30.31,173.17,38.92S212.36,65.44,216.89,91c1.33,7.51.77,15.36,1,23,.19,8.12.23,16.25.34,24.37,0,.8.08,1.61.1,2,2.52,1,4.89,1.57,6.85,2.8,3.1,1.94,4.35,5.14,4.36,8.73,0,30.75.08,61.49,0,92.24,0,12.08-9.23,20.9-21.57,20.93-27.76.09-55.52,0-83.28,0-9.78,0-19.56.07-29.34,0-10.51-.09-18.55-6.22-21-16a28.43,28.43,0,0,1-.65-6.65q-.06-44.13,0-88.25C73.63,145.55,76.24,142.39,84.75,140.84Zm112.48.15c.05-.76.12-1.32.12-1.88q0-21.26,0-42.52a14.63,14.63,0,0,0-.13-2c-4.75-31.94-40.44-49.48-68.34-33.26-14.95,8.7-23.12,21.9-23.14,39.58q0,18.64,0,37.29V141ZM165.8,229.33c-.21-1.33-.33-2.31-.5-3.27-1.6-8.88-3.24-17.75-4.76-26.64a4,4,0,0,1,.69-2.84c4.69-5.87,4.34-13.5-1-18.35a12.87,12.87,0,0,0-17.59.23c-5.16,4.95-5.41,12.47-.7,18.17a3.62,3.62,0,0,1,.7,2.58c-1.08,6.44-2.3,12.86-3.45,19.3-.64,3.54-1.22,7.1-1.86,10.82Z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs/><title>Stopwatch</title><path d="M1 10.09c.19-.77.35-1.55.58-2.31.33-1.07.71-1.36 1.42-1.14s.76.73.42 1.73A8.07 8.07 0 1 0 16 4.68c-.41-.32-.87-.58-1.3-.88a1 1 0 0 1-.37-1.36c.33-.58.84-.53 1.35-.24a9.92 9.92 0 0 1 5.16 7.18c.05.24.11.47.17.71v1.82a4.11 4.11 0 0 0-.15.46 9.84 9.84 0 0 1-7.51 8.31c-.48.12-.95.21-1.43.32h-1.83a1.74 1.74 0 0 0-.38-.14 9.85 9.85 0 0 1-8.41-7.6c-.11-.45-.2-.9-.3-1.35z"/><path d="M11.41 1a4.87 4.87 0 0 1 .52.37 1.5 1.5 0 0 1 .17 2.19 1.55 1.55 0 0 1-2.2 0 1.5 1.5 0 0 1 .17-2.19 4.87 4.87 0 0 1 .52-.37zM3.79 3.65c.42.29.86.55 1.26.86q3.38 2.58 6.73 5.18c.54.42.93 1 .64 1.63a2.07 2.07 0 0 1-1.09 1.07 1.48 1.48 0 0 1-1.33-.32C7.83 9.36 5.72 6.6 3.6 3.85z"/></svg>\n'},function(e,t){e.exports='<?xml version="1.0"?>\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n    <path d="M 11 2 L 11 4 L 13 4 L 13 2 L 11 2 z M 15.34375 2.5625 L 14.65625 4.46875 C 17.761841 5.56552 20 8.5061905 20 12 C 20 16.430666 16.430666 20 12 20 C 7.5693339 20 4 16.430666 4 12 C 4 10.719344 4.3115068 9.5082062 4.84375 8.4375 L 3.03125 7.5625 C 2.3654932 8.9017938 2 10.406656 2 12 C 2 17.511334 6.4886661 22 12 22 C 17.511334 22 22 17.511334 22 12 C 22 7.6538095 19.232159 3.93573 15.34375 2.5625 z M 5 6 L 11 13 L 13 13 L 13 11 L 5 6 z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 22 22"><defs/><circle cx="11" cy="5.68" r="4.68" class="cls-1"/><path d="M13 10.6h-.2c-.32 1.2-1.19 4.28-1.8 4.93-.61-.65-1.48-3.73-1.8-4.93H9A4.37 4.37 0 0 0 4.67 15v6h12.66v-6A4.37 4.37 0 0 0 13 10.6z" class="cls-1"/></svg>\n'},function(e,t){e.exports='<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 27 27"><rect x="11.09" y="11.94" width="4.05" height="4.05"/><rect x="18.67" y="11.94" width="4.05" height="4.05"/><rect x="3.5" y="11.94" width="4.05" height="4.05"/><rect x="11.09" y="19.96" width="4.05" height="4.05"/><rect x="18.67" y="19.96" width="4.05" height="4.05"/><rect x="3.5" y="19.96" width="4.05" height="4.05"/><rect x="11.09" y="3.92" width="4.05" height="4.05"/><rect x="18.67" y="3.92" width="4.05" height="4.05"/><rect x="3.5" y="3.92" width="4.05" height="4.05"/></svg>\n'},function(e,t){e.exports='<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 27 27"><path d="M26.08,2H.92A1.07,1.07,0,0,0-.15,3V20A1.07,1.07,0,0,0,.92,21.05h9.7a15.13,15.13,0,0,1-.48,3c-.34.4-.93.52-.93.67s0,.21.22.28h8.19c.2-.07.22-.17.22-.28s-.59-.27-.92-.67a13.75,13.75,0,0,1-.48-3h9.64A1.07,1.07,0,0,0,27.15,20V3A1.07,1.07,0,0,0,26.08,2ZM26,16.51H1.18V3.35H26Z"/><path d="M11.52,7.21c.06,1.31.06,1.31-1.08,1.75-.71.26-1.41.54-2.21.85,1,.39,1.87.77,2.78,1.09a.64.64,0,0,1,.53.8,5.65,5.65,0,0,0,0,.73L8.59,11.16c-.51-.22-1-.43-1.54-.69A.56.56,0,0,1,6.81,10c0-.29-.21-.69.2-.87Z"/><path d="M15.16,12.35c-.08-1.21-.07-1.21,1-1.63l2.11-.84.1-.09c-.89-.35-1.74-.71-2.62-1-.5-.17-.71-.42-.62-.93a4.53,4.53,0,0,0,0-.64l3.73,1.61.35.15c.65.27.81.56.65,1.25a.38.38,0,0,1-.2.23l-4.38,1.91S15.22,12.36,15.16,12.35Z"/><path d="M14.54,6.84c-.13.55-.3,1.22-.46,1.89-.33,1.34-.65,2.69-1,4A2,2,0,0,1,13,13a.45.45,0,0,1-.59.34c-.31-.07-.35-.31-.29-.57.21-.91.42-1.81.64-2.72.26-1.09.52-2.19.79-3.28.07-.26.13-.55.51-.53S14.57,6.39,14.54,6.84Z"/></svg>\n'},function(e,t){e.exports='<div class="info-popup">\n    <i class="fa fa-info-circle" aria-hidden="true"></i>\n    <div class="info-popup__box">\n        <p>\n            {{ $ctrl.text }}\n        </p>\n    </div>\n</div>\n'},function(e,t){e.exports='<div class="book text-center">\n    <a ng-href="{{$ctrl.productHref}}">\n        <img class="img-responsive title-shadow library-image-cover"\n            ng-src="{{$ctrl.imagePath}}"\n            title="{{$ctrl.title}}" />\n    </a>\n</div>'},function(e,t){e.exports='<div class="modal fade in"\n    id="subscriptionUpgradeModal"\n    tabindex="-1"\n    role="dialog"\n    aria-hidden="false">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <span aria-hidden="true">×</span>\n                </button>\n                <h4>Upgrading your subscription</h4>\n            </div>\n            <div ng-if="!$ctrl.hasLegacyPayment" class="modal-body">\n                <p>\n                    You are upgrading to a <span class="highlight">{{ $ctrl.upgradeToSubs.productName }} {{ $ctrl.upgradeToSubs.rateTitle }}</span>\n                    subscription. This plan costs <span ng-bind-html="$ctrl.upgradeToSubs.priceInfo.priceDescription"></span>,\n                    but you will be charged a prorated amount based on what you\'ve already paid for your current subscription.\n                </p>\n                <p>\n                    Your subscription plan and benefits will be upgraded immediately.\n                </p>\n                <p>\n                    Any problems, please email <a ng-href="{{ $ctrl.mailToSupport }}">{{ $ctrl.supportEmail }}</a>.\n                </p>\n            </div>\n            <div ng-if="$ctrl.hasLegacyPayment" class="modal-body">\n                <p>\n                    Before you can upgrade your subscription,\n                    you need to re-enter your payment details.\n                </p>\n                <p>\n                    You will then be charged\n                    <span ng-bind-html="$ctrl.upgradeToSubs.priceInfo.priceDescription"></span>\n                    to upgrade to\n                    <span class="highlight">{{ $ctrl.upgradeToSubs.productName }} {{ $ctrl.upgradeToSubs.rateTitle }}</span>\n                    subscription. You will be charged a prorated amount based on what you\'ve already paid for your current subscription.\n                </p>\n                <p>\n                    Your subscription plan and benefits will be upgraded immediately.\n                </p>\n                <p>\n                    Any problems, please email <a ng-href="{{ $ctrl.mailToSupport }}">{{ $ctrl.supportEmail }}</a>.\n                </p>\n            </div>\n            <div class="modal-footer">\n                <button class="btn btn-default" data-dismiss="modal">Cancel</button>\n                <button class="btn btn-primary" ng-click="$ctrl.upgradeSubscription()">\n                    {{ $ctrl.hasLegacyPayment ? \'Update payment details\' : \'Upgrade my subscription\' }}\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t){e.exports='<nav class="navbar navbar-inverse navbar-fixed-top"\n    ng-show="$ctrl.isVisible()">\n    <div class="container">\n        <div ng-if="!$ctrl.isLoggedIn" class="navbar-link pull-right hidden-xs">\n          <a ng-href="{{ ::$ctrl.baseHref(\'login\') }}" class="btn btn-primary">Sign In</a>\n        </div>\n        <div class="navbar-header">\n            <a class="navbar-brand back-button"\n                ng-click="$ctrl.goBack()"\n                ng-if="$ctrl.canGoBack()">\n                <span class="fa fa-arrow-left"></span>\n            </a>\n            <button type="button"\n                class="navbar-toggle btn btn-clear navbar-menu-toggle"\n                ng-click="$ctrl.openDropdownMobile(\'mainOpen\')"\n                ng-if="!$root.isApp"\n                ng-show="!$ctrl.inCheckout">\n                <span class="sr-only">Toggle navigation</span>\n                <span>MENU</span>\n            </button>\n            <button href="#"\n                class="navbar-toggle navbar-menu-toggle"\n                ng-click="$ctrl.openDropdownMobile(\'mainOpen\')"\n                ng-if="$root.isApp"\n                aria-label="Menu"\n                aria-controls="navigation"\n                role="button"\n            >\n                <div class="hamburger hamburger--collapse"\n                    ng-class="{\n                    \'is-active\': $ctrl.mainOpen\n                }">\n                    <span class="hamburger-box">\n                    <span class="hamburger-inner"></span>\n                    </span>\n                </div>\n            </button>\n            <div ng-if="!$ctrl.isLoggedIn && $ctrl.inCheckout" class="navbar-link pull-right visible-xs">\n                <a ng-href="{{ ::$ctrl.baseHref(\'login\') }}" class="btn btn-primary">Sign In</a>\n            </div>\n            <button type="button"\n                class="navbar-toggle navbar-account-toggle hidden-offline"\n                ng-click="$ctrl.openDropdownMobile(\'accountOpen\')"\n                ng-show="$ctrl.isLoggedIn && !$ctrl.inCheckout">\n                <i class="fa fa-user-circle nav-account-button-icon"></i>\n                <span class="sr-only">Toggle account</span>\n            </button>\n            <button type="button"\n                class="navbar-toggle navbar-search-toggle hidden-offline"\n                ng-class="{ \'mr15\': !$ctrl.isLoggedIn }"\n                ng-click="$ctrl.openDropdownMobile(\'searchOpen\')"\n                ng-show="!$ctrl.inCheckout">\n                <span class="sr-only">Toggle search</span>\n                <icons icon-name="search" class="nav-search-button-icon"></icons>\n            </button>\n            <div class="navbar-brand"\n                ng-if="!$ctrl.canGoBack()">\n                <a ng-click="$ctrl.goHome()"\n                    ng-href="{{ $ctrl.baseUrl }}"\n                    ng-class="{ \'ml15\': !$ctrl.isLoggedIn && !$ctrl.inCheckout }">\n                    <img ng-src="{{ $ctrl.cdnUrl(\'Packt-logo-135.png\') }}">\n                </a>\n            </div>\n        </div>\n\n        \x3c!-- Collect the nav links, forms, and other content for toggling --\x3e\n        <div id="main-nav"\n            class="main-nav"\n            ng-class="{\'dropdown-closed\': !$ctrl.mainOpen, \'dropdown-open\': $ctrl.mainOpen}"\n            ng-show="!$ctrl.inCheckout">\n            \x3c!--Search Box --\x3e\n            <search placeholder="Search..."\n                id="main-nav-search"\n                wrapper-class="navbar-form navbar-left nav-search-bar"\n                class="desktop-search hidden-offline"\n                clear-search-after-submit="true"\n                on-submit="$ctrl.initiateSearch(event, value)"\n                show-search-btn="true">\n            </search>\n\n            <ul class="nav navbar-nav navbar-left">\n                <li id="nav-browse"\n                    class="navbar-button navbar-doublestack hidden-offline navbar__browse"\n                    ng-if="!$ctrl.inCheckout">\n                    <span class="dropdown-toggle"\n                        data-toggle="dropdown"\n                        role="button"\n                        aria-haspopup="true"\n                        aria-expanded="false">\n                        Browse\n                        <span class="caret"></span>\n                    </span>\n\n                    <ul class="dropdown-menu dropdown-margin">\n                        <li ng-repeat="(technologyName, technology) in $ctrl.subMenuTechnologies" class="hidden-xs">\n                            <a class="navbar__category-dropdown"\n                                ng-class="{ \'active\': $ctrl.Submenus[technologyName] }"\n                                ng-mouseover="$ctrl.showSubmenu($event, technologyName)"\n                                ng-href="{{ $ctrl.constructHref(product, productsName, technologyName) }}"\n                                target="_self">\n                                <icons icon-name="{{ technologyName }}" class="navbar-dropdown-icon"></icons>\n                                {{ technologyName }}\n                            </a>\n                            <div class="navbar__browse-submenu" ng-class="{ \'open\': $ctrl.Submenus[technologyName] }">\n                                <ul class="col-sm-4" ng-repeat="(productsName, products) in technology">\n                                    <li class="dropdown-header">{{ productsName }}\n                                    </li>\n                                    <li ng-repeat="product in products"\n                                        ng-class = "{ \'viewAllTechSubMenu\': technologyName == \'View All Technologies\' }">\n                                        <a ng-href="{{ product.url ? $ctrl.constructLearningPathHref(product.url) : $ctrl.constructHref(product.name, productsName, technologyName) }}"\n                                            target="_self">\n                                            <icons icon-name="{{ product.name }}"\n                                                ng-if="technologyName == \'View All Technologies\'"></icons>\n                                            {{ product.name }}\n                                        </a>\n                                    </li>\n                                    <li>\n                                        <a class= "link link-primary"\n                                            ng-if="technologyName !== \'View All Technologies\'"\n                                            ng-href="{{ $ctrl.constructHref(\'\', productsName, technologyName) }}"\n                                            target="_self">\n                                            View all {{ productsName }} &gt;\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>\n                        </li>\n                        <li ng-repeat="(productType, type) in $ctrl.productTypes" class="visible-xs">\n                            <a class="navbar__category-dropdown"\n                                ng-href="{{ $ctrl.constructHref(\'\', type.name , \'\') }}"\n                                target="_self">\n                                <icons icon-name="{{ type.name.toLowerCase() }}" class="navbar-dropdown-icon"></icons>\n                                View all {{type.name}}\n                            </a>\n                        </li>\n                        <li class="viewAllTechSubMenu visible-xs">\n                            <a class="navbar__category-dropdown"\n                                ng-href="{{ $ctrl.constructLearningPathHref(\'\') }}"\n                                target="_self">\n                                <icons icon-name="Learning Paths" class="navbar-dropdown-icon"></icons>\n                                View All Learning Paths\n                            </a>\n                        </li>\n                        <li>\n                            <a class="navbar__category-dropdown"\n                                ng-class="{ \'active\': $ctrl.Submenus.all }"\n                                ng-mouseover="$ctrl.showSubmenu($event, \'all\')"\n                                ng-href="{{ $ctrl.constructHref() }}"\n                                target="_self">\n                                <icons icon-name="View All Technologies"\n                                    class="navbar-dropdown-icon">\n                                </icons>\n                                View All Technologies\n                            </a>\n                       </li>\n                        <div class="navbar__browse-submenu hidden-xs" ng-class="{ \'open\': $ctrl.Submenus.all }">\n                            <ul class="col-sm-6">\n                                <li ng-repeat="category in $ctrl.viewAllTechnologies"\n                                    class="viewAllTechSubMenu button-background">\n                                    <a ng-href="{{ $ctrl.constructHref(\'\', \'\', category.name) }}"\n                                        target="_self">\n                                        <icons icon-name="{{ category.name }}"></icons>\n                                        {{ category.name }}\n                                    </a>\n                                </li>\n                                <li class="viewAllTechSubMenu button-background">\n                                    <a ng-href="{{ $ctrl.constructLearningPathHref(\'\') }}"\n                                        target="_self">\n                                        <icons icon-name="Learning Paths"></icons>\n                                        Learning Paths\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                    </ul>\n                </li>\n            </ul>\n\n            \x3c!-- Right Hand Nav --\x3e\n            <ul class="nav navbar-nav navbar-right">\n                <li id="nav-library"\n                    class="dropdown navbar-button hidden-offline"\n                    ng-if="$ctrl.isLoggedIn && !$ctrl.inCheckout">\n                    <span class="dropdown-toggle"\n                        data-toggle="dropdown"\n                        role="button"\n                        aria-haspopup="true"\n                        aria-expanded="false">\n                        My Library <span class="caret"></span>\n                    </span>\n                    <ul class="dropdown-menu">\n                        <li>\n                            <a ng-click="$ctrl.navigateTo(\'home\')" ng-href="{{ $ctrl.baseUrl }}">\n                                <icons icon-name="home" class="navbar-dropdown-icon"></icons>\n                                Home\n                            </a>\n                        </li>\n                        <li>\n                            <a ng-click="$ctrl.navigateTo(\'playlists\')" ng-href="{{ $ctrl.baseUrl + \'/playlists\' }}">\n                                <icons class="navbar-dropdown-icon" icon-name="playlist"></icons>\n                                Playlists\n                            </a>\n                        </li>\n                        <li>\n                            <a ng-click="$ctrl.navigateTo(\'newRewards\')" ng-href="{{ $ctrl.baseUrl + \'/rewards\' }}">\n                                <icons icon-name="rewards" class="navbar-dropdown-icon"></icons>\n                                Rewards\n                            </a>\n                        </li>\n                        <li>\n                            <a ng-click="$ctrl.navigateTo(\'newBookmarks\')" ng-href="{{ $ctrl.baseUrl + \'/bookmarks\' }}">\n                                <icons icon-name="bookmarks" class="navbar-dropdown-icon"></icons>\n                                Bookmarks\n                            </a>\n                        </li>\n                        <li>\n                            <a ng-click="$ctrl.navigateTo(\'newPurchases\')" ng-href="{{ $ctrl.baseUrl + \'/owned\' }}">\n                                <icons icon-name="purchases" class="navbar-dropdown-icon"></icons>\n                                Owned\n                            </a>\n                        </li>\n                        <li ng-if="$root.isApp">\n                            <a ng-click="$ctrl.navigateTo(\'downloads\')" ng-href="{{ $ctrl.baseUrl + \'/downloads\' }}">\n                                <icons icon-name="download" class="navbar-dropdown-icon"></icons>\n                                Downloads\n                            </a>\n                        </li>\n                    </ul>\n                </li>\n                <li class="navbar-button visible-xs in-menu-sign-in hidden-offline"\n                    ng-if="!$ctrl.isLoggedIn && !$ctrl.inCheckout">\n                    <a ng-href="{{ ::$ctrl.baseHref(\'login\') }}"\n                        ng-click ="$ctrl.navigateTo(\'login\')"\n                        class="btn btn-primary">\n                      Sign In\n                    </a>\n                </li>\n                <li id="nav-recent"\n                    class="dropdown navbar-button hidden-offline"\n                    ng-if="$ctrl.isLoggedIn && !$ctrl.inCheckout && $ctrl.data.lastViewedProducts.length > 0">\n                    <span class="dropdown-toggle"\n                        data-toggle="dropdown"\n                        role="button"\n                        aria-haspopup="true"\n                        aria-expanded="false">\n                        Recent <span class="caret"></span>\n                    </span>\n                    <ul class="dropdown-menu">\n                        <li ng-repeat="product in $ctrl.data.lastViewedProducts track by product.title">\n                            <a ng-click="$ctrl.navigateTo(product.lastReadPath, true)" ng-href="{{ product.lastReadPath }}">\n                                <icons icon-name="{{ product.type }}" class="navbar-dropdown-icon"></icons>\n                                <span ng-bind-html="product.title"></span>\n                            </a>\n                        </li>\n                        <li role="separator" class="divider"></li>\n                        <li>\n                            <a ng-click="$ctrl.navigateTo(\'history\')" ng-href="{{ $ctrl.baseUrl + \'/history\' }}">View History</a>\n                        </li>\n                    </ul>\n                </li>\n                <li id="nav-account"\n                    class="dropdown navbar-button"\n                    ng-class="{ \'active\' : $ctrl.isCurrentLocation(\'myAccount\') }"\n                    ng-if="$ctrl.isLoggedIn && !$ctrl.inCheckout">\n                    <span class="dropdown-toggle nav-account-button"\n                        data-toggle="dropdown"\n                        role="button"\n                        aria-haspopup="true"\n                        aria-expanded="false">\n                        <i class="fa fa-user-circle nav-account-button-icon"></i>\n                        <span class="nav-account-button-text ml5">\n                            Account <span class="caret"></span>\n                        </span>\n                    </span>\n                    <ul class="dropdown-menu">\n                        <li ng-if="!$root.isIOS">\n                            <a ng-click="$ctrl.navigateTo(\'myAccount\')" ng-href="{{ $ctrl.baseUrl + \'/my-account\' }}">Subscription Settings</a>\n                        </li>\n                        <li ng-if="$ctrl.b2bRole && !$root.isIOS">\n                            <a ng-href="{{ $ctrl.baseUrl + \'/my-account/account-details\' }}">Account Settings</a>\n                        </li>\n                        <li ng-if="!$root.isIOS && !$ctrl.inCheckout && !$ctrl.b2bRole">\n                            <a ng-href="{{ $ctrl.configService.getPacktUrl() + \'/all\' }}" target="_blank">Store</a>\n                        </li>\n                        <li ng-if="$ctrl.b2bRole === \'customer-admin\'">\n                            <a ng-href="{{ $ctrl.b2bOrganisationDetailsUrl }}">Organisation Settings</a>\n                        </li>\n                        <li ng-if="!root.isIOS && $ctrl.b2bRole === \'customer-admin\'">\n                            <a ng-href="{{ $ctrl.b2bUserManagementUrl }}">User Management</a>\n                        </li>\n                        <li ng-if="!$root.isIOS">\n                            <a ng-click="$ctrl.navigateTo(\'help\')" ng-href="{{ $ctrl.baseUrl + \'/help\' }}">Help</a>\n                        </li>\n                        <li role="separator" class="divider"></li>\n                        <li>\n                           <a ng-click="$ctrl.handleLogout($event)"\n                              ng-href="{{ $ctrl.baseUrl + \'/logout\' }}">Logout</a>\n                        </li>\n                    </ul>\n                </li>\n            </ul>\n        </div>\n        <div class="search-toggle"\n            ng-class="{\'dropdown-closed\': !$ctrl.searchOpen, \'dropdown-open\': $ctrl.searchOpen}"\n            ng-if="!$ctrl.inCheckout">\n            <search placeholder="Search..."\n                id="main-nav-search"\n                wrapper-class="nav-search-bar"\n                class="mobile-search hidden-offline"\n                clear-search-after-submit="true"\n                on-submit="$ctrl.initiateSearch(event, value)"\n                show-search-btn="true">\n            </search>\n        </div>\n        <div class="account-toggle"\n            ng-class="{\'dropdown-closed\': !$ctrl.accountOpen, \'dropdown-open\': $ctrl.accountOpen}"\n            ng-if="!$ctrl.inCheckout">\n            <ul class="nav navbar-nav">\n                <li ng-if="!$root.isIOS">\n                    <a ng-click="$ctrl.navigateTo(\'myAccount\')" ng-href="{{ $ctrl.baseUrl + \'/my-account\' }}">Subscription Settings</a>\n                </li>\n                <li ng-if="!$ctrl.b2bRole && !$root.isIOS">\n                  <a ng-href="{{ $ctrl.accountPortalUrl }}" target="_blank">Account Settings</a>\n                </li>\n                <li ng-if="$ctrl.b2bRole && !$root.isIOS">\n                    <a ng-href="{{ $ctrl.baseUrl + \'/my-account/account-details\' }}">Account Settings</a>\n                </li>\n                <li ng-if="$ctrl.b2bRole === \'customer-admin\'">\n                    <a ng-href="{{ $ctrl.b2bOrganisationDetailsUrl }}">Organisation Settings</a>\n                </li>\n                <li ng-if="$ctrl.b2bRole === \'customer-admin\'">\n                    <a ng-href="{{ $ctrl.b2bUserManagementUrl }}">User Management</a>\n                </li>\n                <li ng-if="!$root.isIOS">\n                    <a ng-click="$ctrl.navigateTo(\'help\')" ng-href="{{ $ctrl.baseUrl + \'/help\' }}">Help</a>\n                </li>\n                <li role="separator" class="divider"></li>\n                <li>\n                    <a ng-if="!$ctrl.isNewUsersService"\n                        ng-click="$ctrl.navigateTo(\'logout\')"\n                        ng-href="{{ $ctrl.baseUrl + \'/logout\' }}">Logout</a>\n                    <a ng-if="$ctrl.isNewUsersService"\n                        ng-click="$ctrl.handleLogout($event)"\n                        ng-href="{{ $ctrl.baseUrl + \'/login\' }}">Logout</a>\n                </li>\n                <li ng-if="$root.isApp && (!$root.isProd || $root.internalUser)">\n                    <a ng-click="$ctrl.notificationService.test($event)">\n                        <i class="fa fa-bell-o"></i>\n                        Test Notification\n                    </a>\n                </li>\n            </ul>\n        </div>\n        <div class="dropdown-hider" ng-if="!$ctrl.inCheckout"></div>\n    </div>\n</nav>\n<div class="main-nav overlay collapse"\n    ng-click="$ctrl.openDropdownMobile()"\n    ng-class="{\'dropdown-closed\': !$ctrl.overlayOpen, \'dropdown-open\': $ctrl.overlayOpen}"></div>\n'},function(e,t){e.exports='<div class="sidebar">\n    <ul class="sidebar-nav" ng-if="$ctrl.metaData">\n        <div class="list-group" id="sidebar-nav" role="tablist" aria-multiselectable="true">\n            <div class="clearfix"></div>\n            <li>\n                <a href="#"\n                    class="block-menu-item"\n                    ng-click="$ctrl.sidebarBackButton($event);">\n                    <span class="sidenav-menu pull-right">Back</span>\n                    <span class="pull-left mr5"><i class="fa fa-chevron-left"></i></span>\n                </a>\n            </li>\n            <li ng-if="$ctrl.hasEarlyAccessEntitlement && $ctrl.isEarlyAccessProduct"\n                class="info-block info-block--orange text-right"\n                data-toggle="modal"\n                data-target="#earlyAccessModal">\n                <h5 class="info-block__title mb10">Early Access</h5>\n                <p class="info-block__desc">\n                    <i class="fa fa-info-circle fa-lg mr5"></i> Click to find out more\n                </p>\n            </li>\n            <li ng-if="!$ctrl.hasEarlyAccessEntitlement && $ctrl.isEarlyAccessProduct"\n                class="info-block info-block--grey text-right">\n                <h5 class="info-block__title mb10">Early Access</h5>\n                <p class="info-block__desc">\n                    <i class="fa fa-exclamation-triangle fa-lg mr5" aria-hidden="true"></i> Not available with your subscription\n                </p>\n            </li>\n            <li class="book-header">\n                <a ng-click="$ctrl.goHome($event)" class="block-menu-item">\n                    <div class="section-name mb15">\n                        <h6 ng-bind-html="$ctrl.convertTagToBadge($ctrl.metaData.title)"></h6>\n                    </div>\n                    <div class="cover-info-overlay"\n                        ng-if="$ctrl.metaData.imageUrl">\n                        <img ng-src="{{ $ctrl.configService.getCoverImage($ctrl.isbn) }}"\n                            class="cover-image img-responsive"/>\n                        <i class="fa fa-info cover-info-icon" aria-label="Title Info"></i>\n                    </div>\n                </a>\n            </li>\n            <li class="search-form" ng-if="$ctrl.productType !== \'video\'">\n                <search id="sidebar-search"\n                    placeholder="&#xf002; Search this title..."\n                    wrapper-class="sidebar-search"\n                    on-submit="$ctrl.searchTitle(event, value)"\n                    on-cancel="$ctrl.cancelSearchTitle()"\n                    search-text="$ctrl.searchValue"\n                    show-cancel-btn="true">\n                </search>\n            </li>\n            <div class="search-results-show" ng-if="$ctrl.showSearchResults" ng-show="!$ctrl.loading">\n                <li class="chapter-header pt10 pb10 pl10">\n                    <strong>{{ $ctrl.searchResults.length }}</strong> results for <strong class="quo">{{ $ctrl.searchValue }}</strong>\n                </li>\n                <li class="search-result"\n                  ng-repeat="section in $ctrl.searchResults"\n                  ng-class="{ active: $ctrl.currentSection === section.id }">\n                    <a href="{{ $ctrl.productBaseUrl }}/{{ section.seoUrl }}"\n                      ng-click="$ctrl.navigate(\n                          $event,\n                          section.chapterId,\n                          section.id,\n                          section.seoUrl\n                      )">\n                      <div>\n                        <span class="section">\n                          {{ section.contentTitle }}\n                        </span>\n                      </div>\n                      <div class="snippet"\n                        ng-bind-html="section.content | truncate_at : $ctrl.searchValue : 150 | mark : $ctrl.searchValue">\n                      </div>\n                    </a>\n                </li>\n              <li class="search-library">\n                <a href="#" ng-click="$ctrl.searchLibrary($event)">\n                  Search the entire library\n                  <span class="fa fa-search ml5"></span>\n                </a>\n              </li>\n            </div>\n            <div class="search-results-show" ng-if="$ctrl.noResults">\n                <li class="chapter-header pt10 pb10 pl10">\n                    No matching search results for <strong class="quo">{{ $ctrl.searchValue }}</strong>\n                </li>\n            </div>\n            <tabs tabs-id="toc"\n                tabs-class="nav nav-pills nav-justified"\n                ng-if="!$ctrl.showSearchResults"\n                ng-show="!$ctrl.loading">\n                \x3c!-- Contents Tab--\x3e\n                <tab-pane tab-title="Contents">\n                    <ng-repeat\n                        ng-repeat="(key, chapter) in $ctrl.metaData.tableOfContents track by $index">\n                        <li ng-class="{active: $ctrl.currentChapter === chapter.id}"\n                            class="chapter-header">\n                            <div data-target="#collapse{{chapter.id}}"\n                                data-toggle="collapse"\n                                data-parent="#sidebar-nav"\n                                aria-expanded="false"\n                                class="collapsed">\n                                <a ng-click="$event.preventDefault();"\n                                    ng-href="{{$ctrl.productBaseUrl}}/{{chapter.seoUrl}}">\n                                    <div ng-show="chapter.completed" class="chapter-complete">\n                                        <i class="fa fa-check fa-25"></i>\n                                    </div>\n                                    <div class="section-name"\n                                        title="{{chapter.title}}"\n                                        ng-if="$ctrl.productType === \'video\'"\n                                        ng-bind-html="chapter.title">\n                                    </div>\n                                    <div class="section-name"\n                                        title="{{chapter.id}}: {{chapter.title}}"\n                                        ng-if="$ctrl.productType === \'book\' && chapter.type === \'chapter\'"\n                                        ng-bind-html="chapter.title">\n                                    </div>\n                                    <div class="section-name"\n                                        title="{{chapter.title}}"\n                                        ng-if="$ctrl.productType === \'book\' && chapter.type === \'appendix\'"\n                                        ng-bind-html="chapter.title">\n                                    </div>\n                                </a>\n                            </div>\n                        </li>\n                        <div id="collapse{{chapter.id}}"\n                            ng-class="{\'in\':chapter.id === $ctrl.currentChapter || $ctrl.isPrerender}"\n                            class="panel-collapse collapse"\n                            role="tabpanel"\n                            aria-labelledby="collapse{{key}}"\n                            aria-expanded="{{chapter.show}}">\n                            <li class="sub-nav"\n                                ng-repeat="(key2, section) in chapter.children"\n                                ng-class="{active: $ctrl.currentSection === section.id}">\n                                <a ng-href="{{$ctrl.productBaseUrl}}/{{section.seoUrl}}"\n                                    ng-click="$ctrl.navigate(\n                                        $event,\n                                        chapter.id,\n                                        section.id,\n                                        section.seoUrl\n                                    )">\n                                    <div ng-show="section.completed" class="section-complete">\n                                        <i class="fa fa-check fa-25"></i>\n                                    </div>\n                                    <div class="section-name"\n                                        title="{{section.title}}"\n                                        ng-bind-html="section.title"></div>\n                                </a>\n                            </li>\n                        </div>\n                    </ng-repeat>\n                </tab-pane>\n                \x3c!-- Bookmarks Tab --\x3e\n                <tab-pane tab-title="Bookmarks ({{$ctrl.bookmarks.length}})" tab-icon="fa fa-bookmark">\n                    <li ng-repeat="(key, section) in $ctrl.bookmarks" class="bookmark"\n                        ng-class="{active: $ctrl.currentSection === section.id}">\n                        <a ng-href="{{productController.productBaseUrl}}/{{section.seoUrl}}"\n                            ng-click="$ctrl.onNavigate(\n                                $event,\n                                section.chapterId,\n                                section.id,\n                                section.seoUrl\n                            )">\n                            <div ng-show="section.completed" class="section-complete">\n                                <i class="fa fa-check fa-25"></i>\n                            </div>\n                            <div class="section-name" ng-bind-html="section.bookmarkTitle"></div>\n                        </a>\n                    </li>\n                </tab-pane>\n            </tabs>\n            <spinner ng-show="$ctrl.loading"></spinner>\n        </div>\n    </ul>\n</div>\n<button id="menu-toggle"\n    class="toggle-nav"\n    ng-click="$ctrl.toggle()"\n    aria-label="Toggle Sidenav">\n    <span></span>\n</button>\n'},function(e,t){e.exports='<div class="tab-pane" ng-show="$ctrl.selected" ng-transclude></div>'},function(e,t){e.exports='<div class="tabbable">\n    <ul id="{{$ctrl.tabsId}}" class="{{$ctrl.tabsClass}}">\n        <li ng-repeat="pane in $ctrl.panes" ng-class="{active:pane.selected}">\n            <a ng-click="$ctrl.select(pane)">\n                <i class="{{pane.tabIcon}} mr10" ng-if="pane.tabIcon"></i>{{pane.tabTitle}}\n            </a>\n        </li>\n    </ul>\n    <div class="tab-content" ng-transclude></div>\n</div>'},function(e,t){e.exports='<div ng-if="$ctrl.show" ng-click="$ctrl.closeSidebar($event)" class="overlay"></div>'},function(e,t){e.exports='<div class="page-intro {{ $ctrl.cssClasses }}"\n    ng-if="$ctrl.isLoggedIn || $ctrl.visibleWhenLoggedOut"\n    ng-style="$ctrl.backgroundImageStyle"\n    ng-class="{ \'pb0\': $ctrl.hasPagination && $ctrl.pagesArray.length > 0 }">\n    <div class="container">\n        <h1 class="page-intro__title" ng-if="$ctrl.pageTitle" ng-bind-html="$ctrl.pageTitle"></h1>\n        <h2 class="page-intro__subtitle" ng-if="$ctrl.pageSubtitle" ng-bind-html="$ctrl.pageSubtitle"></h2>\n        <p class="page-intro__description" ng-if="$ctrl.pageDescription" ng-bind-html="$ctrl.pageDescription"></p>\n        <div class="page-intro__actions"\n            ng-if="$ctrl.hasCta || $ctrl.hasSelect || $ctrl.hasSearch || $ctrl.hasLink">\n            <div class="page-intro__link-wrapper" ng-if="$ctrl.hasLink">\n                <a ng-href="{{ $ctrl.linkHref }}" ng-bind-html="$ctrl.linkText"></a>\n            </div>\n            <div class="page-intro__cta"\n                ng-if="$ctrl.hasCta">\n                <a class="btn btn-primary"\n                    ng-href="{{ $ctrl.ctaHref }}">\n                    {{ $ctrl.ctaText }}\n                </a>\n            </div>\n            <div class="page-intro__filterBy"\n                ng-if="$ctrl.hasSelect">\n                <label for="filterBy">{{ $ctrl.selectLabel }}</label>\n                <select class="form-control page-intro__select"\n                    id="filterBy"\n                    name="filterBy"\n                    ng-change="$ctrl.selectChanged($ctrl.selectSelectedOption)"\n                    ng-options="option.displayName for option in $ctrl.selectOptions track by option.id"\n                    ng-model="$ctrl.selectSelectedOption">\n                </select>\n            </div>\n            <form action="#"\n                class="page-intro__searchByFullLength"\n                ng-if="$ctrl.hasSearch && $ctrl.triggerSearchOnSubmit && $ctrl.searchFullLength"\n                ng-submit="$ctrl.submitSearchForm($event)">\n                <div class="row mb20">\n                    <div class="col-sm-12">\n                        <input type="search"\n                        class="form-control ais-search-box--input"\n                        id="search-input"\n                        name="searchBy"\n                        ng-model="$ctrl.searchText"\n                        placeholder="{{ $ctrl.searchPlaceholder }}"\n                        aria-label="Search">\n                        <button class="btn btn-primary ais-search-box--submit" type="submit">\n                        Search\n                        <icons icon-name="search" class="ais-search-box--submit-magnifier"></icons>\n                        </button>\n                    </div>\n                </div>\n            </form>\n            <form action="#"\n                class="page-intro__searchBy"\n                ng-if="$ctrl.hasSearch && $ctrl.triggerSearchOnSubmit && !$ctrl.searchFullLength"\n                ng-submit="$ctrl.submitSearchForm($event)">\n                    <input type="search"\n                        name="searchBy"\n                        class="form-control page-intro__search"\n                        placeholder="{{ $ctrl.searchPlaceholder }}"\n                        ng-model="$ctrl.searchText">\n            </form>\n            <form action="#"\n                class="page-intro__searchBy"\n                ng-if="$ctrl.hasSearch && !$ctrl.triggerSearchOnSubmit"\n                ng-submit="$ctrl.preventSearchSubmit($event)">\n                    <input type="search"\n                        name="searchBy"\n                        class="form-control page-intro__search"\n                        placeholder="{{ $ctrl.searchPlaceholder }}"\n                        ng-model="$ctrl.searchText"\n                        ng-change="$ctrl.searchQueryChanged()">\n            </form>\n        </div>\n        <pagination ng-if="$ctrl.hasPagination && $ctrl.pagesArray.length > 0"\n            total-number-of-pages="$ctrl.totalNumberOfPages"\n            current-page="$ctrl.currentPage"\n            current-limit="$ctrl.currentLimit"\n            pages-array="$ctrl.pagesArray"\n            on-change-page="$ctrl.changePage(pageNumber)"\n            on-change-limit="$ctrl.changeLimit(pageLimit)">\n        </pagination>\n    </div>\n</div>\n\n<div class="page-intro__upsell-wrapper" ng-if="$ctrl.showSubscriptionUpsell">\n    <div class="container">\n        <subs-upsell></subs-upsell>\n    </div>\n</div>\n\n<div class="page-intro__upsell-wrapper" ng-if="$ctrl.showB2bContentUnlockUpsell">\n    <div class="container">\n        <b2b-content-unlock-upsell></b2b-content-unlock-upsell>\n    </div>\n</div>\n'},function(e,t){e.exports='<nav class="pagination__wrapper">\n    <div class="pagination__pages">\n        Page\n        <ul class="pagination ml10">\n            <li ng-class="{ \'disabled\': $ctrl.currentPage === 0 }"\n                data-page="list">\n                <a href="#"\n                    ng-click="$ctrl.changePage($event, $ctrl.currentPage - 1)"\n                    aria-label="Previous">\n                    <span class="link link-secondary" aria-hidden="true">‹</span>\n                </a>\n            </li>\n            <li ng-repeat="i in $ctrl.pagesArray track by $index"\n                ng-class="{ \'active\': $ctrl.currentPage === $index }"\n                data-page="list">\n                <a href="#"\n                    ng-if="$index === $ctrl.currentPage - 2 && $ctrl.currentPage === $ctrl.pagesArray.length - 1"\n                    ng-click="$ctrl.changePage($event, $ctrl.currentPage - 2)">\n                    {{ $ctrl.currentPage - 1 }}\n                </a>\n                <a href="#"\n                    ng-if="$index === $ctrl.currentPage - 1"\n                    ng-click="$ctrl.changePage($event, $ctrl.currentPage - 1)">\n                    {{ $ctrl.currentPage }}\n                </a>\n                <a href="#"\n                    ng-if="$index === $ctrl.currentPage"\n                    ng-click="$ctrl.changePage($event, $ctrl.currentPage)">\n                    {{ $ctrl.currentPage + 1 }}\n                </a>\n                <a href="#"\n                    ng-if="$index === $ctrl.currentPage + 1"\n                    ng-click="$ctrl.changePage($event, $ctrl.currentPage + 1)">\n                    {{ $ctrl.currentPage + 2 }}\n                </a>\n                <a href="#"\n                    ng-if="$index === $ctrl.currentPage + 2 && $ctrl.currentPage === 0"\n                    ng-click="$ctrl.changePage($event, $ctrl.currentPage + 2)">\n                    {{ $ctrl.currentPage + 3 }}\n                </a>\n            </li>\n            <li ng-class="{ \'disabled\': ($ctrl.currentPage === $ctrl.totalNumberOfPages - 1) || $ctrl.pagesArray.length === 0 }"\n                data-page="list">\n                <a href="#"\n                    ng-click="$ctrl.changePage($event, $ctrl.currentPage + 1)"\n                    aria-label="Next">\n                    <span class="link link-secondary" aria-hidden="true">›</span>\n                </a>\n            </li>\n        </ul>\n    </div>\n    <div class="pagination__limits">\n        View\n        <a href="#"\n            class="pagination__limit-link ml10 mr10"\n            ng-class="{ \'active\': $ctrl.currentLimit === 12 }"\n            ng-click="$ctrl.changeLimit($event, 12)">\n            12\n        </a>\n        <a href="#"\n            class="pagination__limit-link mr10"\n            ng-class="{ \'active\': $ctrl.currentLimit === 24 }"\n            ng-click="$ctrl.changeLimit($event, 24)">\n            24\n        </a>\n        <a href="#"\n            class="pagination__limit-link"\n            ng-class="{ \'active\': $ctrl.currentLimit === 48 }"\n            ng-click="$ctrl.changeLimit($event, 48)">\n            48\n        </a>\n    </div>\n</nav>\n'},function(e,t){e.exports='<div class="modal fade" tabindex="-1" role="dialog" id="playlistCreateModal">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4>\n          Create Playlist\n        </h4>\n      </div>\n      <div class="modal-body">\n        <form ng-submit="$ctrl.createNewPlaylist($event)">\n          <div class="form-group">\n            <label for="playlist-name" class="sr-only">Playlist name</label>\n            <input class="form-control"\n              id="playlist-name"\n              ng-model="$ctrl.createNewPlaylistTitle"\n              type="text"\n              placeholder="Playlist Name"\n              maxlength="{{ $ctrl.playlistsService.PLAYLIST_NAME_MAX_LIMIT }}"\n              autofocus>\n          </div>\n          <div class="row">\n            <div class="col-xs-6"><a ng-click="$ctrl.closeModal()"\n              class="btn btn-block btn-default">\n              Cancel\n            </a></div>\n            <div class="col-xs-6">\n              <button class="btn btn-block btn-primary"\n                type="submit">\n                Create\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="modal fade" tabindex="-1" role="dialog" id="playlistDeleteModal">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4>\n          Delete {{ $ctrl.playlistName }}?\n        </h4>\n      </div>\n      <div class="modal-body">\n        <form ng-submit="$ctrl.deletePlaylist($event)">\n          <div class="row">\n            <div class="col-xs-6">\n              <a ng-click="$ctrl.closeModal()"\n                class="btn btn-block btn-default">\n                Cancel\n              </a>\n            </div>\n            <div class="col-xs-6">\n              <button class="btn btn-block btn-primary"\n                type="submit">\n                Delete\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="modal fade" tabindex="-1" role="dialog" id="removeProductModal">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4>\n          Remove {{ $ctrl.productTitle }} from {{ $ctrl.playlistName }}?\n        </h4>\n      </div>\n      <div class="modal-body">\n        <form ng-submit="$ctrl.confirm($event)">\n          <div class="row">\n            <div class="col-xs-6">\n              <a ng-click="$ctrl.closeModal()"\n                class="btn btn-block btn-default">\n                Cancel\n              </a>\n            </div>\n            <div class="col-xs-6">\n              <button class="btn btn-block btn-primary" type="submit">\n                Remove\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="modal fade" tabindex="-1" role="dialog" id="playlistRenameModal">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4 class="text-overflow-ellipsis">Rename {{$ctrl.playlistName}}</h4>\n      </div>\n      <div class="modal-body">\n        <form ng-submit="$ctrl.renamePlaylistTitle($event)">\n          <div class="form-group">\n            <label for="playlist-name" class="sr-only">Playlist name</label>\n            <input class="form-control text-overflow-ellipsis"\n              id="playlist-name"\n              ng-model="$ctrl.newPlaylistTitle"\n              type="text"\n              maxlength="{{ $ctrl.playlistsService.PLAYLIST_NAME_MAX_LIMIT }}"\n              autofocus/>\n          </div>\n\n          <div class="row">\n            <div class="col-xs-6">\n              <a ng-click="$ctrl.closeModal()"\n                class="btn btn-block btn-default">\n                Cancel\n              </a>\n            </div>\n            <div class="col-xs-6">\n              <button class="btn btn-block btn-primary"\n                type="submit">\n                Rename\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports="\x3c!-- Prerender --\x3e\n<script>\n    window.prerenderReady = false;\n<\/script>\n"},function(e,t){e.exports='<ul class="list-group product-list grid"\n    ng-class="{\'grid--3\': $ctrl.hasSidebar, \'grid--4\': !$ctrl.hasSidebar}">\n    <li class="product-list__item grid__item"\n        ng-if="!$ctrl.filterByName"\n        ng-repeat="item in $ctrl.productList" >\n        <div class="product__wrapper">\n            <product value="item"\n                ng-click="$ctrl.handleProductClick(item, $index)">\n            </product>\n        </div>\n    </li>\n    <li class="product-list__item grid__item"\n        ng-if="$ctrl.filterByName"\n        ng-repeat="item in $ctrl.productList | filter: { title: $ctrl.filterByName } as results track by item.id">\n        <div class="product__wrapper">\n            <product value="item"\n                ng-click="$ctrl.handleProductClick(item, $index)">\n            </product>\n        </div>\n    </li>\n    <li ng-if="results.length === 0">\n        No results for <strong>{{ $ctrl.filterByName }}</strong>\n    </li>\n</ul>\n'},function(e,t){e.exports='<div class="product">\n    <div class="product__body">\n        <div class="col-xs-3 col-lg-4">\n            <a ng-href="{{productLineViewCtrl.productHref}}"\n              ng-class="{ \'product-img-wrapper\': productLineViewCtrl.type === \'learning-path\' }"\n              ng-style="{ \'background-color\': productLineViewCtrl.colorCode }">\n                <img class="product-img"\n                    ng-if="productLineViewCtrl.type !== \'learning-path\' && productLineViewCtrl.imagePath"\n                    ng-src="{{ productLineViewCtrl.configService.getCoverImage(productLineViewCtrl.isbn13) }}"/>\n                <icons class="product-img"\n                    ng-if="productLineViewCtrl.type === \'learning-path\'"\n                    icon-name="Learning Paths">\n                </icons>\n            </a>\n        </div>\n        <div class="col-xs-9">\n            <h2 class="product-title" ng-bind-html="productLineViewCtrl.title"></h2>\n            <div class="product-counts" ng-if="productLineViewCtrl.type === \'learning-path\'">\n                <div class="product-count"\n                    ng-if="productLineViewCtrl.booksCount">\n                    <icons icon-name="book"></icons>\n                    <span ng-bind-html="$ctrl.convertTagToBadge($ctrl.productLineViewCtrl.booksCount)"></span>\n                    <span>{{ productLineViewCtrl.booksCount }}</span>\n                </div>\n                <div class="product-count"\n                    ng-if="productLineViewCtrl.videosCount">\n                    <icons icon-name="video"></icons>\n                    <span>{{ productLineViewCtrl.videosCount }}</span>\n                </div>\n            </div>\n            <div ng-if="productLineViewCtrl.type === \'books\' || productLineViewCtrl.type === \'videos\'">\n                <p class="product-author">By <span ng-bind-html="productLineViewCtrl.author"></span></p>\n            </div>\n        </div>\n    </div>\n    <div class="product-duration" ng-if="productLineViewCtrl.type === \'videos\' || productLineViewCtrl.type === \'learning-path\'"> \n        <p>{{ productLineViewCtrl.length }}  &nbsp; &nbsp; <span ng-bind-html="productLineViewCtrl.publicationDate"></span></p>\n    </div>\n    <div class="product-duration" ng-if="productLineViewCtrl.type === \'books\'"> \n        <p>{{ productLineViewCtrl.pages }} pages  &nbsp; &nbsp; <span ng-bind-html="productLineViewCtrl.publicationDate"></span></p>\n    </div>\n    <div>\n        <p class="product-description" ng-bind-html="productLineViewCtrl.oneLiner"></p>\n    </div>\n    <div class="product__buttons">\n      <a class="btn btn-primary"\n          ng-click="productLineViewCtrl.$location.path(productLineViewCtrl.productHref)"\n          ng-if="productLineViewCtrl.isItStarted"\n          ng-href="{{ productLineViewCtrl.productHref }}">Resume</a>\n      <a class="btn btn-primary"\n          ng-click="productLineViewCtrl.$location.path(productLineViewCtrl.productHref)"\n          ng-if="(productLineViewCtrl.type === \'books\' || productLineViewCtrl.type === \'book\') && !productLineViewCtrl.isItStarted"\n          ng-href="{{ productLineViewCtrl.productHref }}">Read Now</a>\n      <a class="btn btn-primary"\n          ng-click="productLineViewCtrl.$location.path(productLineViewCtrl.productHref)"\n          ng-if="(productLineViewCtrl.type === \'videos\' || productLineViewCtrl.type === \'video\') && !productLineViewCtrl.isItStarted"\n          ng-href="{{ productLineViewCtrl.productHref }}">Watch Now</a>\n      <a class="btn btn-primary"\n          ng-click="productLineViewCtrl.$location.path(productLineViewCtrl.productHref)"\n          ng-if="productLineViewCtrl.type === \'learning-path\' && !productLineViewCtrl.isItStarted"\n          ng-href="{{ productLineViewCtrl.productHref }}">Get Started</a>\n    </div>\n</div>\n'},function(e,t){e.exports='<form class="{{ $ctrl.wrapperClass }}"\n  action="#"\n  ng-submit="$ctrl.submitSearch($event)">\n  <div class="form-group relative-parent">\n    <input type="search"\n      class="form-control"\n      placeholder="{{ $ctrl.placeholder }}"\n      ng-change="$ctrl.monitorChange()"\n      ng-model="$ctrl.searchText">\n    <button type="submit" ng-if="$ctrl.showSearchBtn">\n      <icons icon-name="search"></icons>\n    </button>\n    <button type="button"\n      class="cancel"\n      ng-if="$ctrl.showCancelBtn && $ctrl.searchText"\n      ng-click="$ctrl.cancelSearch()">\n      <i class="fa fa-close"></i>\n      <span class="sr-only">Cancel Search</span>\n    </button>\n  </div>\n</form>\n'},function(e,t){e.exports='<div class="text-center pt20 pb20 mt50 mb50">\n    <i class="fa fa-spinner fa-pulse fa-fw fa-3x" aria-hidden="true"></i>\n    <p ng-if="$ctrl.message">\n        {{ $ctrl.message }}\n    </p>\n</div>\n'},function(e,t){e.exports='<div class="subs-pane text-center"\n    ng-class="{ \'subs-pane--muted\': $ctrl.isCurrentPlan, \'subs-pane--exclusive\': $ctrl.isExclusive }">\n    <div class="subs-pane__header">\n        {{ $ctrl.pane.header }}\n    </div>\n    <div class="subs-pane__body">\n        <h5 class="subs-pane__title">\n            <strong>{{ $ctrl.activePlan.rateTitle }}</strong>\n            <p ng-if="$ctrl.isCurrentPlan">(your current plan)</p>\n        </h5>\n\n        <div class="subs-pane__pricing">\n            <p class="subs-pane__total-price">\n                <sup class="subs-pane__currency" ng-bind-html="$ctrl.activePlan.priceInfo.currencySymbol"></sup>\n                <span ng-bind-html="$ctrl.activePlan.priceInfo.priceWithoutDecimals"></span>\n                <sup class="subs-pane__total-price-decimal" ng-bind-html="$ctrl.activePlan.priceInfo.decimal"></sup>\n            </p>\n            <p ng-if="$ctrl.activePlan.priceInfo.pricingModel !== \'Month\'">\n                <span ng-bind-html="$ctrl.activePlan.priceInfo.currencySymbol"></span>\n                <span ng-bind-html="$ctrl.activePlan.priceInfo.monthlyPrice"></span>\n                per month\n            </p>\n            <p ng-if="$ctrl.activePlan.priceInfo.pricingModel === \'Month\'">\n                per month\n            </p>\n        </div>\n\n        <div class="subs-pane__radio-list">\n            <label class="radio-inline"\n                for="{{ option.id }}"\n                ng-repeat="option in $ctrl.radioList.options track by option.id">\n                <input type="radio"\n                    name="{{ $ctrl.radioList.id }}"\n                    id="{{ option.id }}"\n                    ng-value="option.id"\n                    ng-model="$ctrl.activeRadioOption"\n                    ng-change="$ctrl.setActivePlan(option.plan)"/>\n                {{ option.name }}\n            </label>\n        </div>\n\n        <ul class="subs-pane__feature-list">\n            <li class="subs-pane__feature-item"\n                ng-class="{ \'cross\': feature.isCrossed, \'tick\': !feature.isCrossed }"\n                ng-repeat="feature in $ctrl.featuresList track by feature.id">\n                {{ feature.name }}\n            </li>\n        </ul>\n\n        <button class="btn btn-primary btn-fluid mt30"\n            ng-if="!$ctrl.isCurrentPlan"\n            ng-click="$ctrl.upgrade($event)">\n            Upgrade to this plan\n        </button>\n    </div>\n</div>\n'},function(e,t){e.exports='<div class="timed-unlock-soft-upsell-content" ng-if="$ctrl.showUpsell">\n  <p class="header-text">\n    <i class="fa fa-unlock-alt" aria-hidden="true"></i>\n    <strong>You are accessing this content as part of the Free Week</strong>\n  </p>\n  <p>Access over 7,000 practical books and videos on new and emerging\n    tech with a Packt subscription – the online library for developers</p>\n  <div class="btn-wrapper">\n    <a ng-href="{{ $ctrl.checkoutUrl }}" class="btn btn-default timed-unlock-soft-upsell-button">\n      Get started for just $9.99\n    </a>\n  </div>\n</div>\n'},function(e,t){e.exports='<div ng-if="$ctrl.showTimedUnlock && !$ctrl.loading">\n    \x3c!-- Banner Start --\x3e\n    <div class="timed-unlock-banner" ng-if="$ctrl.canClaim">\n        <div class="timed-unlock-banner-content">\n            <div class="timed-unlock-banner-header">\n                <h3>You\'re one click away</h3>\n            </div>\n            <div class="timed-unlock-banner-body">\n                <p>Click the button below to unlock full access to 7,000 eBooks and videos all week.</p>\n            </div>\n            <div class="timed-unlock-banner-claim">\n                <button type="button"\n                    class="btn btn-default timed-unlock-button-modal"\n                    ng-click="$ctrl.claimTimedUnlock()"\n                    ng-disabled="$ctrl.loading"\n                    ng-if="!$ctrl.loading">\n                    <span>Access Now</span>\n                </button>\n                <a type="button"\n                    class="timed-unlock-link-modal"\n                    ng-href="{{ $ctrl.termsConditionsUrl }}"\n                    target="_blank"\n                    ng-disabled="$ctrl.loading"\n                    ng-if="!$ctrl.loading">\n                    <span>View T&Cs</span>\n                </a>\n            </div>\n        </div>\n    </div>\n\n    <div class="timed-unlock-banner" ng-if="$ctrl.canRegister">\n        <div class="timed-unlock-banner-content">\n            <div class="timed-unlock-banner-header">\n                <h5><span class="timed-unlock-timer">{{ $ctrl.timer }}</span>{{ $ctrl.signUpText }}\n                    <span class="text-uppercase">\n                        <span class="timed-unlock-extra-bold">free</span>\n                        week\n                    </span>\n                </h5>\n            </div>\n            <div class="timed-unlock-banner-body">\n                <p>No card, no cost - just full access to every Packt eBook and video all week.</p>\n            </div>\n            <div class="timed-unlock-banner-button">\n                <div class="modal-footer timed-unlock-footer">\n                        <button type="button"\n                            class="btn btn-default timed-unlock-button-modal"\n                            ng-click="$ctrl.navigateToRegister()">\n                            <span>Sign up to join</span>\n                        </button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="timed-unlock-banner" ng-if="$ctrl.timedUnlockUser">\n        <div class="timed-unlock-banner-content">\n            <div class="timed-unlock-banner-header">\n                <h5 class="default-padding"><span class="timed-unlock-timer">{{ $ctrl.timer }}</span>{{ $ctrl.signUpText }}\n                    <span class="text-uppercase">\n                        <span class="timed-unlock-extra-bold">free</span>\n                        week\n                    </span>\n                </h5>\n            </div>\n            <div class="timed-unlock-banner-body">\n                <p>Extend access by subscribing for <span ng-bind-html="$ctrl.currency"></span>{{ $ctrl.priceValue }}/month.</p>\n            </div>\n            <div class="timed-unlock-banner-button">\n                <div class="modal-footer timed-unlock-footer">\n                    <a ng-href="{{ $ctrl.checkoutUrl }}"\n                        class="btn btn-default timed-unlock-button-modal">\n                        <span>Subscribe Now</span>\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    \x3c!-- Modal Start --\x3e\n    <div class="modal modal--orange fade"\n        id="timed-unlock-modal"\n        tabindex="-1"\n        role="dialog">\n        <div class="modal-dialog"\n            role="document"\n            ng-if="$ctrl.canClaim">\n            <div class="modal-content timed-unlock-content">\n                <div class="modal-body">\n                    <button type="button"\n                        class="close"\n                        data-dismiss="modal"\n                        aria-label="Close"\n                        ng-click="$ctrl.timedUnlockService.hideModal()">\n                        <i class="fa fa-close"></i>\n                    </button>\n                    <div class="timed-unlock-text-block">\n                        <h3>You\'re one click away</h3>\n                        <p>Click the button below to unlock full access to 7,000 eBooks and videos all week.</p>\n                    </div>\n                </div>\n                <div class="modal-footer timed-unlock-footer">\n                    <button type="button"\n                        class="btn btn-default timed-unlock-button-modal"\n                        ng-click="$ctrl.claimTimedUnlock()"\n                        ng-disabled="$ctrl.loading"\n                        ng-if="!$ctrl.loading">\n                        <span>Access Now</span>\n                    </button>\n                    <a type="button"\n                        class="timed-unlock-link-modal"\n                        ng-href="{{ $ctrl.termsConditionsUrl }}"\n                        target="_blank"\n                        ng-disabled="$ctrl.loading"\n                        ng-if="!$ctrl.loading">\n                        <span>View T&Cs</span>\n                    </a>\n                </div>\n                <spinner ng-if="$ctrl.loading" message="\'Claiming Offer...\'"></spinner>\n            </div>\n        </div>\n        <div class="modal-dialog"\n            role="document"\n            ng-if="$ctrl.canRegister">\n            <div class="modal-content timed-unlock-content">\n                <div class="modal-body">\n                    <button type="button"\n                        class="close"\n                        data-dismiss="modal"\n                        aria-label="Close"\n                        ng-click="$ctrl.timedUnlockService.hideModal()">\n                        <i class="fa fa-close"></i>\n                    </button>\n                    <div class="timed-unlock-text-block">\n                        <h5>{{ $ctrl.timer }} {{ $ctrl.signUpText }}</h5>\n                        <h2 class="text-uppercase"><span class="timed-unlock-extra-bold">free</span>week</h2>\n                        <p>No card, no cost - just full access to every Packt eBook and video all week.</p>\n                    </div>\n                </div>\n                <div class="modal-footer timed-unlock-footer">\n                    <button type="button"\n                        class="btn btn-default timed-unlock-button-modal"\n                        ng-click="$ctrl.navigateToRegister()">\n                        <span>Sign up to join</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    \x3c!-- Success Message --\x3e\n    <div class="modal modal--orange fade"\n        id="success-timed-unlock-claim-modal"\n        tabindex="-1"\n        role="dialog"\n        aria-hidden="false">\n        <div class="modal-dialog" role="document">\n            <div class="modal-content timed-unlock-content">\n                <div class="modal-body">\n                    <button type="button"\n                        class="close"\n                        data-dismiss="modal"\n                        aria-label="Close">\n                        <i class="fa fa-close"></i>\n                    </button>\n                    <h3>Congratulations!</h3>\n                    <div class="timed-unlock-text-block">\n                        <p>\n                            <span class="text-uppercase">\n                                free week\n                            </span> is active for your account until {{ $ctrl.endAt | date }}.\n                        </p>\n                    </div>\n                    <spinner message="\'Refreshing Page...\'"></spinner>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t){e.exports='<div class="upsell">\n    <h3 class="upsell__title visible-mobile">\n        <span ng-if="!$ctrl.isProductPage">\n            Try a Packt subscription with a FREE 10-day trial\n        </span>\n        <span ng-if="$ctrl.isProductPage">\n            Unlock this content with a FREE 10-day subscription to Packt\n        </span>\n    </h3>\n    <div class="upsell__body">\n        <div class="upsell__content">\n            <h3 class="upsell__title hidden-mobile-block">\n                <span ng-if="!$ctrl.isProductPage">\n                    Try a Packt subscription with a FREE 10-day trial\n                </span>\n                <span ng-if="$ctrl.isProductPage">\n                    Unlock this content with a FREE 10-day subscription to Packt\n                </span>\n            </h3>\n            <ul class="upsell__list">\n                <li>Get access to all of Packt\'s 7,000+ eBooks &amp; Videos.</li>\n                <li>Over 100 new eBooks and Videos added each month.</li>\n                <li>Follow learning paths with expert-led titles.</li>\n                <li>Unlock course access forever with Packt credits.</li>\n                <li>Renews at $9.99 per month. No contract. Cancel anytime.</li>\n            </ul>\n            <div>\n                <a ng-href="{{ $ctrl.findOutMoreLink }}"\n                    target="_self"\n                    class="btn btn-primary mr5">\n                    Find Out More\n                    <i class="fa fa-chevron-right ml5"></i>\n                </a>\n                <a ng-href="{{ $ctrl.checkoutPathLink }}"\n                    target="_self"\n                    class="btn btn-info">\n                    Start Trial\n                    <i class="fa fa-chevron-right ml5"></i>\n                </a>\n            </div>\n        </div>\n        <div class="upsell__image-wrapper">\n            <img ng-src="{{ $ctrl.cdnUrl(\'subs-upsell-banner.png\') }}"\n            class="img-responsive mb20">\n        </div>\n    </div>\n</div>\n'},function(e,t){e.exports='<div class="validation-popup">\n    <span ng-show="$ctrl.rules.matchText">\n        <i class="fa fa-check text-success mr5" aria-hidden="true"></i>\n        Passwords match\n    </span>\n    <span ng-hide="$ctrl.rules.matchText">\n        <i class="fa fa-times text-danger mr5" aria-hidden="true"></i>\n        Passwords don\'t match\n    </span>\n</div>'},function(e,t){e.exports='<div class="validation-popup">\n    Passwords must meet the following requirements:\n    <ul class="list-unstyled">\n        <li>\n            <i class="fa fa-check text-success mr5"\n                aria-hidden="true"\n                ng-show="$ctrl.rules.oneLower">\n            </i>\n            <i class="fa fa-times text-danger mr5"\n                aria-hidden="true"\n                ng-hide="$ctrl.rules.oneLower">\n            </i>\n            At least one lowercase letter\n        </li>\n        <li>\n            <i class="fa fa-check text-success mr5"\n                aria-hidden="true"\n                ng-show="$ctrl.rules.oneUpper">\n            </i>\n            <i class="fa fa-times text-danger mr5"\n                aria-hidden="true"\n                ng-hide="$ctrl.rules.oneUpper">\n            </i>\n            At least one uppercase letter\n        </li>\n        <li>\n            <i class="fa fa-check text-success mr5"\n                aria-hidden="true"\n                ng-show="$ctrl.rules.oneNumber">\n            </i>\n            <i class="fa fa-times text-danger mr5"\n                aria-hidden="true"\n                ng-hide="$ctrl.rules.oneNumber">\n            </i>\n            At least one number\n        </li>\n        <li>\n            <i class="fa fa-check text-success mr5"\n                aria-hidden="true"\n                ng-show="$ctrl.rules.minEightChars">\n            </i>\n            <i class="fa fa-times text-danger mr5"\n                aria-hidden="true"\n                ng-hide="$ctrl.rules.minEightChars">\n            </i>\n            Be at least 8 characters\n        </li>\n    </ul>\n</div>'},function(e,t){e.exports='<div class="modal fade" id="endProjectsModal" tabindex="-1" role="dialog">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button"\n                    class="close"\n                    data-dismiss="modal"\n                    aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n                <h4>Project completed!</h4>\n            </div>\n            <div class="modal-body">\n                <p>You\'ve finished your project on {{ $ctrl.projectTitle }}</p>\n                <p>\n                    Click <a ng-href="projects" ng-click="$ctrl.navigateTo($event, \'projects\')">here</a> to start other projects,\n                    or click on the Next Section link below to explore the rest of this title.\n                </p>\n            </div>\n            <div class="modal-footer">\n                <button type="button"\n                    class="btn btn-primary mb20"\n                    data-dismiss="modal">\n                    Close\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t){function n(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(e){r=e}return[r,n]}e.exports=n},function(e,t,n){e.exports=n(1109)},function(e,t){function n(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}function r(e,t){function n(e){return"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[e]}t=t||62;var r,i=[],a="",o=e<0?"-":"";for(e=Math.abs(e);e>=t;)r=e%t,e=Math.floor(e/t),i.push(n(r));e>0&&i.push(n(e));for(var s=i.length-1;s>=0;s--)a+=i[s];return o+a}function i(e){return r(n(e),61).replace("-","Z")}function a(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="",r=e||8,i=0;i<r;i++){var a=Math.floor(Math.random()*t.length);n+=t.substring(a,a+1)}return n}t.bitwise=n,t.binaryTransfer=r,t.unique=i,t.random=a},function(e,t,n){"use strict";function r(e){var t=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(i.apply(e,[null].concat(n)))};return t.__proto__=e,t.prototype=e.prototype,t}var i=Function.prototype.bind;e.exports=r},function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t){function n(e){return e.replace(/\n\r?\s*/g,"")}e.exports=function(e){for(var t="",r=0;r<arguments.length;r++)t+=n(e[r])+(arguments[r+1]||"");return t}},function(e,t,n){!function(t){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var c=r.exec(s.path);s.netLoc=c[1],s.path=c[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var l=s.path,d=l.substring(0,l.lastIndexOf("/")+1)+a.path;u.path=o.normalizePath(d)}else u.path=s.path,a.params||(u.params=s.params,a.query||(u.query=s.query));return null===u.path&&(u.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o}()},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,n){var r=n(69),i=e.exports={WebVTT:n(1117),VTTCue:n(1118),VTTRegion:n(1119)};r.vttjs=i,r.WebVTT=i.WebVTT;var a=i.VTTCue,o=i.VTTRegion,s=r.VTTCue,c=r.VTTRegion;i.shim=function(){r.VTTCue=a,r.VTTRegion=o},i.restore=function(){r.VTTCue=s,r.VTTRegion=c},r.VTTCue||i.shim()},function(e,t){function n(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function r(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function i(){this.values=g(null)}function a(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);if(2===o.length){var s=o[0],c=o[1];t(s,c)}}}function o(e,t,o){function s(){var t=r(e);if(null===t)throw new n(n.Errors.BadTimeStamp,"Malformed timestamp: "+l);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function c(e,t){var n=new i;a(e,function(e,t){switch(e){case"region":for(var r=o.length-1;r>=0;r--)if(o[r].id===t){n.set(e,o[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),a=i[0];n.integer(e,a),n.percent(e,a)&&n.set("snapToLines",!1),n.alt(e,a,["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=t.split(","),n.percent(e,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical",""),t.line=n.get("line","auto"),t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align","middle"),t.position=n.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function u(){e=e.replace(/^\s+/,"")}var l=e;if(u(),t.startTime=s(),u(),"--\x3e"!==e.substr(0,3))throw new n(n.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+l);e=e.substr(3),u(),t.endTime=s(),u(),c(e,t)}function s(e,t){function n(){function e(e){return t=t.substr(e.length),e}if(!t)return null;var n=t.match(/^([^<]*)(<[^>]*>?)?/);return e(n[1]?n[1]:n[2])}function i(e){return m[e]}function a(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],i);return e}function o(e,t){return!_[t.localName]||_[t.localName]===e.localName}function s(t,n){var r=y[t];if(!r)return null;var i=e.document.createElement(r);i.localName=r;var a=b[t];return a&&n&&(i[a]=n.trim()),i}for(var c,u=e.document.createElement("div"),l=u,d=[];null!==(c=n());)if("<"!==c[0])l.appendChild(e.document.createTextNode(a(c)));else{if("/"===c[1]){d.length&&d[d.length-1]===c.substr(2).replace(">","")&&(d.pop(),l=l.parentNode);continue}var f,h=r(c.substr(1,c.length-2));if(h){f=e.document.createProcessingInstruction("timestamp",h),l.appendChild(f);continue}var p=c.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(f=s(p[1],p[3])))continue;if(!o(l,f))continue;p[2]&&(f.className=p[2].substr(1).replace("."," ")),d.push(p[1]),l.appendChild(f),l=f}return u}function c(e){for(var t=0;t<w.length;t++){var n=w[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function u(e){function t(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function n(e){if(!e||!e.length)return null;var r=e.pop(),i=r.textContent||r.innerText;if(i){var a=i.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):i}return"ruby"===r.tagName?n(e):r.childNodes?(t(e,r),n(e)):void 0}var r,i=[],a="";if(!e||!e.childNodes)return"ltr";for(t(i,e);a=n(i);)for(var o=0;o<a.length;o++)if(r=a.charCodeAt(o),c(r))return"rtl";return"ltr"}function l(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}function d(){}function f(e,t,n){d.call(this),this.cue=t,this.cueDiv=s(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:u(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":i=t.position;break;case"middle":i=t.position-t.size/2;break;case"end":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function h(e){var t,n,r,i;if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight}function p(e,t,n,r){function i(e,t){for(var i,a=new h(e),o=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var c=e.intersectPercentage(n);o>c&&(i=new h(e),o=c),e=new h(a)}return i||a}var a=new h(t),o=t.cue,s=l(o),c=[];if(o.snapToLines){var u;switch(o.vertical){case"":c=["+y","-y"],u="height";break;case"rl":c=["+x","-x"],u="width";break;case"lr":c=["-x","+x"],u="width"}var d=a.lineHeight,f=d*Math.round(s),p=n[u]+d,v=c[0];Math.abs(f)>p&&(f=f<0?-1:1,f*=Math.ceil(p/d)*d),s<0&&(f+=""===o.vertical?n.height:n.width,c=c.reverse()),a.move(v,f)}else{var g=a.lineHeight/n.height*100;switch(o.lineAlign){case"middle":s-=g/2;break;case"end":s-=g}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}c=["+y","-x","+x","-y"],a=new h(t)}var m=i(a,c);t.move(m.toCSSCompatValues(n))}function v(){}var g=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();n.prototype=g(Error.prototype),n.prototype.constructor=n,n.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},i.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var m={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},y={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},b={v:"title",lang:"lang"},_={rt:"ruby"},w=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];d.prototype.applyStyles=function(e,t){t=t||this.div;for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},d.prototype.formatStyle=function(e,t){return 0===e?0:e+t},f.prototype=g(d.prototype),f.prototype.constructor=f,h.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},h.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},h.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},h.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},h.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},h.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},h.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},h.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e,{left:e.left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},v.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},v.convertCueToDOMTree=function(e,t){return e&&t?s(e,t):null},v.processCues=function(e,t,n){function r(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),r(t)){var a=[],o=h.getSimpleBoxPosition(i),s=Math.round(.05*o.height*100)/100,c={font:s+"px sans-serif"};!function(){for(var n,r,s=0;s<t.length;s++)r=t[s],n=new f(e,r,c),i.appendChild(n.div),p(e,n,o,a),r.displayState=n.div,a.push(h.getSimpleBoxPosition(n))}()}else for(var u=0;u<t.length;u++)i.appendChild(t[u].displayState)},v.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},v.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof n))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function t(){for(var e=l.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,l.buffer=e.substr(t),n}function s(e){var t=new i;if(a(e,function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var r=n.split(",");if(2!==r.length)break;var a=new i;if(a.percent("x",r[0]),a.percent("y",r[1]),!a.has("x")||!a.has("y"))break;t.set(e+"X",a.get("x")),t.set(e+"Y",a.get("y"));break;case"scroll":t.alt(e,n,["up"])}},/=/,/\s/),t.has("id")){var n=new(l.vttjs.VTTRegion||l.window.VTTRegion);n.width=t.get("width",100),n.lines=t.get("lines",3),n.regionAnchorX=t.get("regionanchorX",0),n.regionAnchorY=t.get("regionanchorY",100),n.viewportAnchorX=t.get("viewportanchorX",0),n.viewportAnchorY=t.get("viewportanchorY",100),n.scroll=t.get("scroll",""),l.onregion&&l.onregion(n),l.regionList.push({id:t.get("id"),region:n})}}function c(e){var t=new i;a(e,function(e,n){switch(e){case"MPEGT":t.integer(e+"S",n);break;case"LOCA":t.set(e+"L",r(n))}},/[^\d]:/,/,/),l.ontimestampmap&&l.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}function u(e){e.match(/X-TIMESTAMP-MAP/)?a(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":c(t)}},/=/):a(e,function(e,t){switch(e){case"Region":s(t)}},/:/)}var l=this;e&&(l.buffer+=l.decoder.decode(e,{stream:!0}));try{var d;if("INITIAL"===l.state){if(!/\r\n|\n/.test(l.buffer))return this;d=t();var f=d.match(/^WEBVTT([ \t].*)?$/);if(!f||!f[0])throw new n(n.Errors.BadSignature);l.state="HEADER"}for(var h=!1;l.buffer;){if(!/\r\n|\n/.test(l.buffer))return this;switch(h?h=!1:d=t(),l.state){case"HEADER":/:/.test(d)?u(d):d||(l.state="ID");continue;case"NOTE":d||(l.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(d)){l.state="NOTE";break}if(!d)continue;if(l.cue=new(l.vttjs.VTTCue||l.window.VTTCue)(0,0,""),l.state="CUE",-1===d.indexOf("--\x3e")){l.cue.id=d;continue}case"CUE":try{o(d,l.cue,l.regionList)}catch(e){l.reportOrThrowError(e),l.cue=null,l.state="BADCUE";continue}l.state="CUETEXT";continue;case"CUETEXT":var p=-1!==d.indexOf("--\x3e");if(!d||p&&(h=!0)){l.oncue&&l.oncue(l.cue),l.cue=null,l.state="ID";continue}l.cue.text&&(l.cue.text+="\n"),l.cue.text+=d;continue;case"BADCUE":d||(l.state="ID");continue}}}catch(e){l.reportOrThrowError(e),"CUETEXT"===l.state&&l.cue&&l.oncue&&l.oncue(l.cue),l.cue=null,l.state="INITIAL"===l.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new n(n.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=v},function(e,t){function n(e){return"string"==typeof e&&(!!o[e.toLowerCase()]&&e.toLowerCase())}function r(e){return"string"==typeof e&&(!!s[e.toLowerCase()]&&e.toLowerCase())}function i(e,t,i){this.hasBeenReset=!1;var o="",s=!1,c=e,u=t,l=i,d=null,f="",h=!0,p="auto",v="start",g=50,m="middle",y=50,b="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return o},set:function(e){o=""+e}},pauseOnExit:{enumerable:!0,get:function(){return s},set:function(e){s=!!e}},startTime:{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");c=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(e){l=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return f},set:function(e){var t=n(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return p},set:function(e){if("number"!=typeof e&&e!==a)throw new SyntaxError("An invalid number or illegal string was specified.");p=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return v},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return m},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}}}),this.displayState=void 0}var a="auto",o={"":1,lr:1,rl:1},s={start:1,middle:1,end:1,left:1,right:1};i.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=i},function(e,t){function n(e){return"string"==typeof e&&(!!a[e.toLowerCase()]&&e.toLowerCase())}function r(e){return"number"==typeof e&&e>=0&&e<=100}function i(){var e=100,t=3,i=0,a=100,o=0,s=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!r(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!r(e))throw new Error("RegionAnchorX must be between 0 and 100.");a=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!r(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!r(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!r(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return c},set:function(e){var t=n(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");c=t}}})}var a={"":!0,up:!0};e.exports=i},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)t(e[n])}function i(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function a(e,t,n){var r=e;return d(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=h(t,{uri:e}),r.callback=n,r}function o(e,t,n){return t=a(e,t,n),s(t)}function s(e){function t(){4===l.readyState&&setTimeout(a,0)}function n(){var e=void 0;if(e=l.response?l.response:l.responseText||c(l),_)try{e=JSON.parse(e)}catch(e){}return e}function r(e){return clearTimeout(p),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,u(e,w)}function a(){if(!h){var t;clearTimeout(p),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=w,i=null;return 0!==t?(r={body:n(),statusCode:t,method:g,headers:{},url:v,rawRequest:l},l.getAllResponseHeaders&&(r.headers=f(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),u(i,r,r.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var s=!1,u=function(t,n,r){s||(s=!0,e.callback(t,n,r))},l=e.xhr||null;l||(l=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var d,h,p,v=l.url=e.uri||e.url,g=l.method=e.method||"GET",m=e.body||e.data,y=l.headers=e.headers||{},b=!!e.sync,_=!1,w={body:void 0,headers:{},statusCode:0,method:g,url:v,rawRequest:l};if("json"in e&&!1!==e.json&&(_=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==g&&"HEAD"!==g&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),m=JSON.stringify(!0===e.json?m:e.json))),l.onreadystatechange=t,l.onload=a,l.onerror=r,l.onprogress=function(){},l.onabort=function(){h=!0},l.ontimeout=r,l.open(g,v,!b,e.username,e.password),b||(l.withCredentials=!!e.withCredentials),!b&&e.timeout>0&&(p=setTimeout(function(){if(!h){h=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}},e.timeout)),l.setRequestHeader)for(d in y)y.hasOwnProperty(d)&&l.setRequestHeader(d,y[d]);else if(e.headers&&!i(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(m||null),l}function c(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function u(){}var l=n(69),d=n(941),f=n(1007),h=n(1122);e.exports=o,o.XMLHttpRequest=l.XMLHttpRequest||u,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:l.XDomainRequest,r(["get","put","post","patch","head","delete"],function(e){o["delete"===e?"del":e]=function(t,n,r){return n=a(t,n,r),n.method=e.toUpperCase(),s(n)}})},function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}e.exports=n;var r=Object.prototype.hasOwnProperty},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(191),a=r(i),o=(n(374),n(373),n(375),n(372),n(477)),s=(r(o),n(476)),c=(r(s),n(478));r(c);n(472);var u=n(475),l=(r(u),n(471)),d=(r(l),n(470)),f=(r(d),n(473)),h=(r(f),n(474)),p=(r(h),n(461)),v=(r(p),n(463)),g=(r(v),n(468)),m=(r(g),n(467)),y=(r(m),n(469)),b=(r(y),n(465)),_=(r(b),n(466)),w=(r(_),n(464)),S=(r(w),n(462));r(S);n(479);window.jQuery=window.$=n(458),window.Fuse=n(457);n(460),n(459),n(453),n(456),n(454),a.default.module("PacktUnlimited.services",[]),n(414),n(433),n(432),n(431),n(428),n(442),n(443),n(447),n(444),n(448),n(423),n(421),n(412),n(434),n(437),n(430),n(427),n(426),n(413),n(452),n(441),n(449),n(425),n(445),n(451),n(419),n(438),n(429),n(403),n(407),n(405),n(406),n(399),n(435),n(415),n(416),n(417),n(450),n(446),n(424),n(422),a.default.module("PacktUnlimited.controllers",[]),n(436),n(440),n(376),n(380),n(381),n(384),n(390),n(392),n(393),n(420),n(397),n(398),n(404),n(410),n(385),n(395),n(394),n(386),n(401),n(400),n(411),n(409),n(377),n(379),n(387),n(388),n(382),n(378),n(455),n(389),n(439),n(418),n(408),n(391),n(383),n(396),n(402);var k=["PacktUnlimited.services","PacktUnlimited.controllers","PacktUnlimited.directives","PacktUnlimited.components","PacktUnlimited.projects","PacktUnlimited.offline","PacktUnlimited.search","PacktUnlimited.learningPaths","PacktUnlimited.playlists","ngRoute","ngCookies","ngSanitize","common.filters","angular-cache","featureFlags"];a.default.module("PacktUnlimited",k).config(["$routeProvider","$locationProvider","CacheFactoryProvider","$sceProvider","featureFlagsServiceProvider","$qProvider",function(e,t,n,r,i,o){a.default.extend(n.defaults,{maxAge:864e5}),r.enabled(!1),i.init([{id:"discounted-print-book",active:!0},{id:"all-products-five-dollar",active:!1},{id:"b2b",active:!0},{id:"cancellation",active:!0}]),o.errorOnUnhandledRejections(!1),e.when("/",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/home/home.html",controller:"homeController",controllerAs:"$ctrl",pageType:"home"}).when("/books-and-videos",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/books-and-videos/books-and-videos.html",controller:"booksAndVideosController",controllerAs:"booksAndVideosController",pageType:"books-and-videos"}).when("/tech",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/new-tech/tech-list.html",controller:"techController",controllerAs:"$ctrl",pageType:"tech"}).when("/tech/:tech",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/new-tech/tech-detail.html",controller:"techDetailController",controllerAs:"$ctrl",pageType:"tech-detail"}).when("/projects",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/projects/new-projects-list.html",controller:"newProjectsListController",controllerAs:"$ctrl",pageType:"projects-list"}).when("/learning-paths",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/learning-paths/learning-paths-list.html",controller:"learningPathsListController",controllerAs:"$ctrl",pageType:"learning-paths-list"}).when("/learning-paths/:learningPathName",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/learning-paths/learning-path-details.html",controller:"learningPathDetailsController",controllerAs:"$ctrl",pageType:"learning-paths-details"}).when("/owned",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/purchases/purchases.template.html",controller:"purchasesController",controllerAs:"$ctrl",pageType:"purchases",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/purchases",{redirectTo:"/owned"}).when("/bookmarks",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/bookmarks-page/bookmarks-page.html",controller:"bookmarks",controllerAs:"bookmarks",pageType:"bookmarks",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/rewards",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/rewards/rewards.html",controller:"rewardsController",controllerAs:"$ctrl",pageType:"rewards",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/history",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/history/history.html",controller:"history",controllerAs:"historyController",pageType:"history",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/login",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/login/login.html",controller:"login",controllerAs:"loginController",pageType:"login"}).when("/logout",{template:" ",controller:"logoutController",pageType:"logout"}).when("/book/:category/:isbn",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/product/product.html",controller:"productController",controllerAs:"productController",resolve:{productType:["$route",function(e){e.current.params.productType="book"}]},pageType:"product"}).when("/book/:category/:isbn/:chapter",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/product/product.html",controller:"productController",controllerAs:"productController",resolve:{productType:["$route",function(e){e.current.params.productType="book"}]},pageType:"product"}).when("/book/:category/:isbn/:chapter/:section_id/:section*",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/product/product.html",controller:"productController",controllerAs:"productController",resolve:{productType:["$route",function(e){e.current.params.productType="book"}]},pageType:"product"}).when("/video/:category/:isbn",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/product/product.html",controller:"productController",controllerAs:"productController",resolve:{productType:["$route",function(e){e.current.params.productType="video"}]},pageType:"product"}).when("/video/:category/:isbn/:chapter",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/product/product.html",controller:"productController",controllerAs:"productController",resolve:{productType:["$route",function(e){e.current.params.productType="video"}]},pageType:"product"}).when("/video/:category/:isbn/:chapter/:section_id/:section*",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/product/product.html",controller:"productController",controllerAs:"productController",resolve:{productType:["$route",function(e){e.current.params.productType="video"}]},pageType:"product"}).when("/search",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/algolia-search/search.html",controller:"searchController",controllerAs:"searchController",pageType:"search",reloadOnSearch:!1}).when("/help",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/help/help.html",controller:"help",controllerAs:"helpController",pageType:"help"}).when("/password-reset",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/reset-password/reset-password.html",controller:"resetPassword",controllerAs:"resetPasswordController",pageType:"password-reset"}).when("/my-account",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/account/account-main.html",controller:"accountMain",controllerAs:"accountController",pageType:"account",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/my-account/email-preferences",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/account/email-preferences.html",controller:"newsletter",controllerAs:"newsletterController",pageType:"email",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/my-account/account-details",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/account/account-details.html",controller:"account",controllerAs:"accountController",pageType:"account-details",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/interactive-code-projects",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/interactive-code-projects/interactive-code-projects.html",controller:"interactiveCodeProjectsController",controllerAs:"interactiveCodeProjectsController",pageType:"interactive-code-projects"}).when("/register",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/create-account/create-account.html",controller:"createAccount",controllerAs:"createAccountController",pageType:"register"}).when("/playlists",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/playlists/playlists.html",controller:"playlistsController",controllerAs:"$ctrl",pageType:"playlists",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/playlists/:playlistId",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/playlists/playlists-details.html",controller:"playlistsDetailsController",controllerAs:"$ctrl",pageType:"playlists-details",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}),e.when("/my-account/billing-details",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/account/billing-details.html",controller:"billing",controllerAs:"billingController",pageType:"account-billing-details",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/my-account/upgrades",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/account/upgrades.html",controller:"upgrades",controllerAs:"upgradesController",pageType:"upgrades",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/register",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/create-account/create-account.html",controller:"createAccount",controllerAs:"createAccountController",pageType:"register"}).when("/my-account/update-card-details",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/account/update-card-details.html",controller:"card",controllerAs:"cardController",pageType:"update-card-details",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/checkout",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/checkout/checkout.html",controller:"checkout",controllerAs:"checkoutController",pageType:"checkout"}).when("/checkout/:product",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/checkout/checkout.html",controller:"checkout",controllerAs:"checkoutController",pageType:"checkout"}).when("/checkout-callback",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/checkout/paypal-checkout-callback.html",controller:"paypal-checkout-callback",controllerAs:"paypalCheckoutCallbackController",pageType:"paypal-checkout-callback"}).when("/checkout-callback-cancel",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/checkout/paypal-checkout-callback.html",controller:"paypal-checkout-callback",controllerAs:"paypalCheckoutCallbackController",pageType:"paypal-checkout-callback-cancel"}),e.when("/my-account/billing-details",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/account/billing-details.html",controller:"billing",controllerAs:"billingController",pageType:"account-billing-details",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/my-account/upgrades",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/account/upgrades.html",controller:"upgrades",controllerAs:"upgradesController",pageType:"upgrades",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/my-account/cancellation",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/account/cancellation.html",controller:"cancellation",controllerAs:"cancellationController",pageType:"cancellation",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/register",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/create-account/create-account.html",controller:"createAccount",controllerAs:"createAccountController",pageType:"register"}).when("/my-account/update-card-details",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/account/update-card-details.html",controller:"card",controllerAs:"cardController",pageType:"update-card-details",resolve:{auth:["authService",function(e){return e.isAuthenticated()}]}}).when("/checkout",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/checkout/checkout.html",controller:"checkout",controllerAs:"checkoutController",pageType:"checkout"}).when("/checkout/:product",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/checkout/checkout.html",controller:"checkout",controllerAs:"checkoutController",pageType:"checkout"}).when("/checkout-callback",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/checkout/paypal-checkout-callback.html",controller:"paypal-checkout-callback",controllerAs:"paypalCheckoutCallbackController",pageType:"paypal-checkout-callback"}).when("/checkout-callback-cancel",{templateUrl:"https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/app/checkout/paypal-checkout-callback.html",controller:"paypal-checkout-callback",controllerAs:"paypalCheckoutCallbackController",pageType:"paypal-checkout-callback-cancel"}),e.otherwise({redirectTo:"/"}),t.html5Mode(!0)}]).run(["$route","$rootScope","$location","$templateCache","$window","$routeParams","httpService","utilitiesService","productService","authService","userService","navigationService","analyticsService","fileService","alertService","cacheService","batchRequestService","prerenderReadyService",function(e,t,n,r,i,a,o,s,c,u,l,d,f,h,p,v,g,m){t.isOffline=!1,t.wpCdnPath="https://d3ginfw2u4xn7p.cloudfront.net/eecd4e6020654105ab4a86babbe00878/",t.$on("$routeChangeError",function(e,t,r,i){i===u.UNAUTHORIZED&&(e.preventDefault(),n.path("/login"))}),t.$on("$routeChangeSuccess",function(e,r){var i=n.url();d.setLastPageInHistory(i),t.showSideBarOverlay=!1;var a=r.$$route.pageType;"product"!==a&&(t.sidebarScrollProduct=null,t.sidebarScroll=null),t.$emit("mainnav:open",{isInCheckout:"checkout"===a}),t.$emit("footer:open",{footerIsHidden:"product"===a||"login"===a||"register"===a||"checkout"===a||"password-reset"===a}),m.reset(),$(".modal").modal("hide"),$(".modal-backdrop").remove(),$("body").removeClass("modal-open")}),i.addEventListener("offline",function(){t.isOffline||(t.isOffline=!0,p.addAlert("Your internet connection went down. ","danger",5e3),document.body.classList.add("offline"),t.$apply())}),i.addEventListener("online",function(){t.isOffline&&(t.isOffline=!1,p.addAlert("You are back online.","warning",5e3),document.body.classList.remove("offline"),g.handleOfflineBatchedRequests(),t.$apply())}),t.$on("$locationChangeSuccess",function(e,r,i){var a=n.url();d.setLastPageInHistory(a),/search/.test(r)||t.$emit("pageChanged")}),t.$on("pageChanged",function(){window.scrollTo(0,0)});var y=n.path;n.path=function(e,t){return y.apply(n,[e])}}])}]);